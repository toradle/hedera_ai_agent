!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).HederaAgentKit={})}(this,function(exports){"use strict";var __defProp2=Object.defineProperty,__defNormalProp2=(e,t,r)=>t in e?__defProp2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__publicField2=(e,t,r)=>__defNormalProp2(e,"symbol"!=typeof t?t+"":t,r);function _mergeNamespaces(e,t){for(var r=0;r<t.length;r++){const n=t[r];if("string"!=typeof n&&!Array.isArray(n))for(const t in n)if("default"!==t&&!(t in e)){const r=Object.getOwnPropertyDescriptor(n,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>n[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}function getDefaultExportFromCjs$1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var browser$d={exports:{}},process=browser$d.exports={},cachedSetTimeout,cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}function runTimeout(e){if(cachedSetTimeout===setTimeout)return setTimeout(e,0);if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout)return cachedSetTimeout=setTimeout,setTimeout(e,0);try{return cachedSetTimeout(e,0)}catch(t){try{return cachedSetTimeout.call(null,e,0)}catch(r){return cachedSetTimeout.call(this,e,0)}}}function runClearTimeout(e){if(cachedClearTimeout===clearTimeout)return clearTimeout(e);if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout)return cachedClearTimeout=clearTimeout,clearTimeout(e);try{return cachedClearTimeout(e)}catch(t){try{return cachedClearTimeout.call(null,e)}catch(r){return cachedClearTimeout.call(this,e)}}}!function(){try{cachedSetTimeout="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(e){cachedSetTimeout=defaultSetTimout}try{cachedClearTimeout="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(e){cachedClearTimeout=defaultClearTimeout}}();var queue$1=[],draining=!1,currentQueue,queueIndex=-1;function cleanUpNextTick(){draining&&currentQueue&&(draining=!1,currentQueue.length?queue$1=currentQueue.concat(queue$1):queueIndex=-1,queue$1.length&&drainQueue())}function drainQueue(){if(!draining){var e=runTimeout(cleanUpNextTick);draining=!0;for(var t=queue$1.length;t;){for(currentQueue=queue$1,queue$1=[];++queueIndex<t;)currentQueue&&currentQueue[queueIndex].run();queueIndex=-1,t=queue$1.length}currentQueue=null,draining=!1,runClearTimeout(e)}}function Item(e,t){this.fun=e,this.array=t}function noop$2(){}process.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];queue$1.push(new Item(e,t)),1!==queue$1.length||draining||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},process.title="browser",process.browser=!0,process.env={},process.argv=[],process.version="",process.versions={},process.on=noop$2,process.addListener=noop$2,process.once=noop$2,process.off=noop$2,process.removeListener=noop$2,process.removeAllListeners=noop$2,process.emit=noop$2,process.prependListener=noop$2,process.prependOnceListener=noop$2,process.listeners=function(e){return[]},process.binding=function(e){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(e){throw new Error("process.chdir is not supported")},process.umask=function(){return 0};var browserExports$1=browser$d.exports;const process$1=getDefaultExportFromCjs$1(browserExports$1);
/**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   */var wasm=null;try{wasm=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function Long(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function isLong(e){return!0===(e&&e.__isLong__)}function ctz32(e){var t=Math.clz32(e&-e);return e?31-t:t}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};function fromInt(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=UINT_CACHE[e])?n:(r=fromBits(e,0,!0),o&&(UINT_CACHE[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=INT_CACHE[e])?n:(r=fromBits(e,e<0?-1:0,!1),o&&(INT_CACHE[e]=r),r)}function fromNumber(e,t){if(isNaN(e))return t?UZERO:ZERO;if(t){if(e<0)return UZERO;if(e>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(e<=-TWO_PWR_63_DBL)return MIN_VALUE;if(e+1>=TWO_PWR_63_DBL)return MAX_VALUE}return e<0?fromNumber(-e,t).neg():fromBits(e%TWO_PWR_32_DBL|0,e/TWO_PWR_32_DBL|0,t)}function fromBits(e,t,r){return new Long(e,t,r)}Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;function fromString(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?UZERO:ZERO;if((r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return fromString(e.substring(1),t,r).neg();for(var o=fromNumber(pow_dbl(r,8)),i=ZERO,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),c=parseInt(e.substring(s,s+a),r);if(a<8){var u=fromNumber(pow_dbl(r,a));i=i.mul(u).add(fromNumber(c))}else i=(i=i.mul(o)).add(fromNumber(c))}return i.unsigned=t,i}function fromValue(e,t){return"number"==typeof e?fromNumber(e,t):"string"==typeof e?fromString(e,t):fromBits(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}Long.fromString=fromString,Long.fromValue=fromValue;var TWO_PWR_16_DBL=65536,TWO_PWR_24_DBL=1<<24,TWO_PWR_32_DBL=TWO_PWR_16_DBL*TWO_PWR_16_DBL,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(TWO_PWR_24_DBL),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var t=fromNumber(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=fromNumber(pow_dbl(e,6),this.unsigned),i=this,s="";;){var a=i.div(o),c=(i.sub(a.mul(o)).toInt()>>>0).toString(e);if((i=a).isZero())return c+s;for(;c.length<6;)c="0"+c;s=""+c+s}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},LongPrototype.isSafeInteger=function(){var e=this.high>>21;return!e||!this.unsigned&&(-1===e&&!(0===this.low&&-2097152===this.high))},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.eqz=LongPrototype.isZero,LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return!(1&~this.low)},LongPrototype.isEven=function(){return!(1&this.low)},LongPrototype.equals=function(e){return isLong(e)||(e=fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(e){return!this.eq(e)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.ne=LongPrototype.notEquals,LongPrototype.lessThan=function(e){return this.comp(e)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(e){return this.comp(e)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.le=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(e){return this.comp(e)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(e){return this.comp(e)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.ge=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(e){if(isLong(e)||(e=fromValue(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(e){isLong(e)||(e=fromValue(e));var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,a=e.low>>>16,c=0,u=0,l=0,d=0;return l+=(d+=o+(65535&e.low))>>>16,u+=(l+=n+a)>>>16,c+=(u+=r+s)>>>16,c+=t+i,fromBits((l&=65535)<<16|(d&=65535),(c&=65535)<<16|(u&=65535),this.unsigned)},LongPrototype.subtract=function(e){return isLong(e)||(e=fromValue(e)),this.add(e.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(e){if(this.isZero())return this;if(isLong(e)||(e=fromValue(e)),wasm)return fromBits(wasm.mul(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned);if(e.isZero())return this.unsigned?UZERO:ZERO;if(this.eq(MIN_VALUE))return e.isOdd()?MIN_VALUE:ZERO;if(e.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(TWO_PWR_24)&&e.lt(TWO_PWR_24))return fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var t=this.high>>>16,r=65535&this.high,n=this.low>>>16,o=65535&this.low,i=e.high>>>16,s=65535&e.high,a=e.low>>>16,c=65535&e.low,u=0,l=0,d=0,h=0;return d+=(h+=o*c)>>>16,l+=(d+=n*c)>>>16,d&=65535,l+=(d+=o*a)>>>16,u+=(l+=r*c)>>>16,l&=65535,u+=(l+=n*a)>>>16,l&=65535,u+=(l+=o*s)>>>16,u+=t*c+r*a+n*s+o*i,fromBits((d&=65535)<<16|(h&=65535),(u&=65535)<<16|(l&=65535),this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(e){if(isLong(e)||(e=fromValue(e)),e.isZero())throw Error("division by zero");var t,r,n;if(wasm)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?fromBits((this.unsigned?wasm.div_u:wasm.div_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?UZERO:ZERO;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return UZERO;if(e.gt(this.shru(1)))return UONE;n=UZERO}else{if(this.eq(MIN_VALUE))return e.eq(ONE)||e.eq(NEG_ONE)?MIN_VALUE:e.eq(MIN_VALUE)?ONE:(t=this.shr(1).div(e).shl(1)).eq(ZERO)?e.isNegative()?ONE:NEG_ONE:(r=this.sub(e.mul(t)),n=t.add(r.div(e)));if(e.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();n=ZERO}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(t)/Math.LN2),i=o<=48?1:pow_dbl(2,o-48),s=fromNumber(t),a=s.mul(e);a.isNegative()||a.gt(r);)a=(s=fromNumber(t-=i,this.unsigned)).mul(e);s.isZero()&&(s=ONE),n=n.add(s),r=r.sub(a)}return n},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(e){return isLong(e)||(e=fromValue(e)),wasm?fromBits((this.unsigned?wasm.rem_u:wasm.rem_s)(this.low,this.high,e.low,e.high),wasm.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.rem=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},LongPrototype.clz=LongPrototype.countLeadingZeros,LongPrototype.countTrailingZeros=function(){return this.low?ctz32(this.low):ctz32(this.high)+32},LongPrototype.ctz=LongPrototype.countTrailingZeros,LongPrototype.and=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low&e.low,this.high&e.high,this.unsigned)},LongPrototype.or=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low|e.low,this.high|e.high,this.unsigned)},LongPrototype.xor=function(e){return isLong(e)||(e=fromValue(e)),fromBits(this.low^e.low,this.high^e.high,this.unsigned)},LongPrototype.shiftLeft=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):fromBits(0,this.low<<e-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(e){return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?fromBits(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):fromBits(32===e?this.high:this.high>>>e-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.shr_u=LongPrototype.shiftRightUnsigned,LongPrototype.rotateLeft=function(e){var t;return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?fromBits(this.high,this.low,this.unsigned):e<32?(t=32-e,fromBits(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),fromBits(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},LongPrototype.rotl=LongPrototype.rotateLeft,LongPrototype.rotateRight=function(e){var t;return isLong(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?fromBits(this.high,this.low,this.unsigned):e<32?(t=32-e,fromBits(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),fromBits(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},LongPrototype.rotr=LongPrototype.rotateRight,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},LongPrototype.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},Long.fromBytes=function(e,t,r){return r?Long.fromBytesLE(e,t):Long.fromBytesBE(e,t)},Long.fromBytesLE=function(e,t){return new Long(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},Long.fromBytesBE=function(e,t){return new Long(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},"function"==typeof BigInt&&(Long.fromBigInt=function(e,t){return fromBits(Number(BigInt.asIntN(32,e)),Number(BigInt.asIntN(32,e>>BigInt(32))),t)},Long.fromValue=function(e,t){return"bigint"==typeof e?Long.fromBigInt(e,t):fromValue(e,t)},LongPrototype.toBigInt=function(){var e=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|e});var isNumeric=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError="[BigNumber Error] ",tooManyDigits=bignumberError+"Number primitive has more than 15 significant digits: ",BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER$1=9007199254740991,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1e9;function clone$1(e){var t,r,n,o,i,s=w.prototype={constructor:w,toString:null,valueOf:null},a=new w(1),c=20,u=4,l=-7,d=21,h=-1e7,f=1e7,p=!1,m=1,y=0,g={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},b="0123456789abcdefghijklmnopqrstuvwxyz",_=!0;function w(e,t){var o,i,s,a,l,d,p,m,y=this;if(!(y instanceof w))return new w(e,t);if(null==t){if(e&&!0===e._isBigNumber)return y.s=e.s,void(!e.c||e.e>f?y.c=y.e=null:e.e<h?y.c=[y.e=0]:(y.e=e.e,y.c=e.c.slice()));if((d="number"==typeof e)&&0*e==0){if(y.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,l=e;l>=10;l/=10,a++);return void(a>f?y.c=y.e=null:(y.e=a,y.c=[e]))}m=String(e)}else{if(!isNumeric.test(m=String(e)))return n(y,m,d);y.s=45==m.charCodeAt(0)?(m=m.slice(1),-1):1}(a=m.indexOf("."))>-1&&(m=m.replace(".","")),(l=m.search(/e/i))>0?(a<0&&(a=l),a+=+m.slice(l+1),m=m.substring(0,l)):a<0&&(a=m.length)}else{if(intCheck(t,2,b.length,"Base"),10==t&&_)return T(y=new w(e),c+y.e+1,u);if(m=String(e),d="number"==typeof e){if(0*e!=0)return n(y,m,d,t);if(y.s=1/e<0?(m=m.slice(1),-1):1,w.DEBUG&&m.replace(/^0\.0*|\./,"").length>15)throw Error(tooManyDigits+e)}else y.s=45===m.charCodeAt(0)?(m=m.slice(1),-1):1;for(o=b.slice(0,t),a=l=0,p=m.length;l<p;l++)if(o.indexOf(i=m.charAt(l))<0){if("."==i){if(l>a){a=p;continue}}else if(!s&&(m==m.toUpperCase()&&(m=m.toLowerCase())||m==m.toLowerCase()&&(m=m.toUpperCase()))){s=!0,l=-1,a=0;continue}return n(y,String(e),d,t)}d=!1,(a=(m=r(m,t,10,y.s)).indexOf("."))>-1?m=m.replace(".",""):a=m.length}for(l=0;48===m.charCodeAt(l);l++);for(p=m.length;48===m.charCodeAt(--p););if(m=m.slice(l,++p)){if(p-=l,d&&w.DEBUG&&p>15&&(e>MAX_SAFE_INTEGER$1||e!==mathfloor(e)))throw Error(tooManyDigits+y.s*e);if((a=a-l-1)>f)y.c=y.e=null;else if(a<h)y.c=[y.e=0];else{if(y.e=a,y.c=[],l=(a+1)%LOG_BASE,a<0&&(l+=LOG_BASE),l<p){for(l&&y.c.push(+m.slice(0,l)),p-=LOG_BASE;l<p;)y.c.push(+m.slice(l,l+=LOG_BASE));l=LOG_BASE-(m=m.slice(l)).length}else l-=p;for(;l--;m+="0");y.c.push(+m)}}else y.c=[y.e=0]}function v(e,t,r,n){var o,i,s,a,c;if(null==r?r=u:intCheck(r,0,8),!e.c)return e.toString();if(o=e.c[0],s=e.e,null==t)c=coeffToString(e.c),c=1==n||2==n&&(s<=l||s>=d)?toExponential(c,s):toFixedPoint(c,s,"0");else if(i=(e=T(new w(e),t,r)).e,a=(c=coeffToString(e.c)).length,1==n||2==n&&(t<=i||i<=l)){for(;a<t;c+="0",a++);c=toExponential(c,i)}else if(t-=s,c=toFixedPoint(c,i,"0"),i+1>a){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=i-a)>0)for(i+1==a&&(c+=".");t--;c+="0");return e.s<0&&o?"-"+c:c}function I(e,t){for(var r,n,o=1,i=new w(e[0]);o<e.length;o++)(!(n=new w(e[o])).s||(r=compare$1(i,n))===t||0===r&&i.s===t)&&(i=n);return i}function k(e,t,r){for(var n=1,o=t.length;!t[--o];t.pop());for(o=t[0];o>=10;o/=10,n++);return(r=n+r*LOG_BASE-1)>f?e.c=e.e=null:r<h?e.c=[e.e=0]:(e.e=r,e.c=t),e}function T(e,t,r,n){var o,i,s,a,c,u,l,d=e.c,p=POWS_TEN;if(d){e:{for(o=1,a=d[0];a>=10;a/=10,o++);if((i=t-o)<0)i+=LOG_BASE,s=t,c=d[u=0],l=mathfloor(c/p[o-s-1]%10);else if((u=mathceil((i+1)/LOG_BASE))>=d.length){if(!n)break e;for(;d.length<=u;d.push(0));c=l=0,o=1,s=(i%=LOG_BASE)-LOG_BASE+1}else{for(c=a=d[u],o=1;a>=10;a/=10,o++);l=(s=(i%=LOG_BASE)-LOG_BASE+o)<0?0:mathfloor(c/p[o-s-1]%10)}if(n=n||t<0||null!=d[u+1]||(s<0?c:c%p[o-s-1]),n=r<4?(l||n)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||n||6==r&&(i>0?s>0?c/p[o-s]:0:d[u-1])%10&1||r==(e.s<0?8:7)),t<1||!d[0])return d.length=0,n?(t-=e.e+1,d[0]=p[(LOG_BASE-t%LOG_BASE)%LOG_BASE],e.e=-t||0):d[0]=e.e=0,e;if(0==i?(d.length=u,a=1,u--):(d.length=u+1,a=p[LOG_BASE-i],d[u]=s>0?mathfloor(c/p[o-s]%p[s])*a:0),n)for(;;){if(0==u){for(i=1,s=d[0];s>=10;s/=10,i++);for(s=d[0]+=a,a=1;s>=10;s/=10,a++);i!=a&&(e.e++,d[0]==BASE&&(d[0]=1));break}if(d[u]+=a,d[u]!=BASE)break;d[u--]=0,a=1}for(i=d.length;0===d[--i];d.pop());}e.e>f?e.c=e.e=null:e.e<h&&(e.c=[e.e=0])}return e}function A(e){var t,r=e.e;return null===r?e.toString():(t=coeffToString(e.c),t=r<=l||r>=d?toExponential(t,r):toFixedPoint(t,r,"0"),e.s<0?"-"+t:t)}return w.clone=clone$1,w.ROUND_UP=0,w.ROUND_DOWN=1,w.ROUND_CEIL=2,w.ROUND_FLOOR=3,w.ROUND_HALF_UP=4,w.ROUND_HALF_DOWN=5,w.ROUND_HALF_EVEN=6,w.ROUND_HALF_CEIL=7,w.ROUND_HALF_FLOOR=8,w.EUCLID=9,w.config=w.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(bignumberError+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(intCheck(r=e[t],0,MAX,t),c=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(intCheck(r=e[t],0,8,t),u=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(intCheck(r[0],-MAX,0,t),intCheck(r[1],0,MAX,t),l=r[0],d=r[1]):(intCheck(r,-MAX,MAX,t),l=-(d=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)intCheck(r[0],-MAX,-1,t),intCheck(r[1],1,MAX,t),h=r[0],f=r[1];else{if(intCheck(r,-MAX,MAX,t),!r)throw Error(bignumberError+t+" cannot be zero: "+r);h=-(f=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(bignumberError+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw p=!r,Error(bignumberError+"crypto unavailable");p=r}else p=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(intCheck(r=e[t],0,9,t),m=r),e.hasOwnProperty(t="POW_PRECISION")&&(intCheck(r=e[t],0,MAX,t),y=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(bignumberError+t+" not an object: "+r);g=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(bignumberError+t+" invalid: "+r);_="0123456789"==r.slice(0,10),b=r}}return{DECIMAL_PLACES:c,ROUNDING_MODE:u,EXPONENTIAL_AT:[l,d],RANGE:[h,f],CRYPTO:p,MODULO_MODE:m,POW_PRECISION:y,FORMAT:g,ALPHABET:b}},w.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!w.DEBUG)return!0;var t,r,n=e.c,o=e.e,i=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===i||-1===i)&&o>=-MAX&&o<=MAX&&o===mathfloor(o)){if(0===n[0]){if(0===o&&1===n.length)return!0;break e}if((t=(o+1)%LOG_BASE)<1&&(t+=LOG_BASE),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=BASE||r!==mathfloor(r))break e;if(0!==r)return!0}}}else if(null===n&&null===o&&(null===i||1===i||-1===i))return!0;throw Error(bignumberError+"Invalid BigNumber: "+e)},w.maximum=w.max=function(){return I(arguments,-1)},w.minimum=w.min=function(){return I(arguments,1)},w.random=(o=9007199254740992,i=Math.random()*o&2097151?function(){return mathfloor(Math.random()*o)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,o,s,u=0,l=[],d=new w(a);if(null==e?e=c:intCheck(e,0,MAX),o=mathceil(e/LOG_BASE),p)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));u<o;)(s=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(l.push(s%1e14),u+=2);u=o/2}else{if(!crypto.randomBytes)throw p=!1,Error(bignumberError+"crypto unavailable");for(t=crypto.randomBytes(o*=7);u<o;)(s=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(l.push(s%1e14),u+=7);u=o/7}if(!p)for(;u<o;)(s=i())<9e15&&(l[u++]=s%1e14);for(o=l[--u],e%=LOG_BASE,o&&e&&(s=POWS_TEN[LOG_BASE-e],l[u]=mathfloor(o/s)*s);0===l[u];l.pop(),u--);if(u<0)l=[n=0];else{for(n=-1;0===l[0];l.splice(0,1),n-=LOG_BASE);for(u=1,s=l[0];s>=10;s/=10,u++);u<LOG_BASE&&(n-=LOG_BASE-u)}return d.e=n,d.c=l,d}),w.sum=function(){for(var e=1,t=arguments,r=new w(t[0]);e<t.length;)r=r.plus(t[e++]);return r},r=function(){var e="0123456789";function r(e,t,r,n){for(var o,i,s=[0],a=0,c=e.length;a<c;){for(i=s.length;i--;s[i]*=t);for(s[0]+=n.indexOf(e.charAt(a++)),o=0;o<s.length;o++)s[o]>r-1&&(null==s[o+1]&&(s[o+1]=0),s[o+1]+=s[o]/r|0,s[o]%=r)}return s.reverse()}return function(n,o,i,s,a){var l,d,h,f,p,m,g,_,v=n.indexOf("."),I=c,k=u;for(v>=0&&(f=y,y=0,n=n.replace(".",""),m=(_=new w(o)).pow(n.length-v),y=f,_.c=r(toFixedPoint(coeffToString(m.c),m.e,"0"),10,i,e),_.e=_.c.length),h=f=(g=r(n,o,i,a?(l=b,e):(l=e,b))).length;0==g[--f];g.pop());if(!g[0])return l.charAt(0);if(v<0?--h:(m.c=g,m.e=h,m.s=s,g=(m=t(m,_,I,k,i)).c,p=m.r,h=m.e),v=g[d=h+I+1],f=i/2,p=p||d<0||null!=g[d+1],p=k<4?(null!=v||p)&&(0==k||k==(m.s<0?3:2)):v>f||v==f&&(4==k||p||6==k&&1&g[d-1]||k==(m.s<0?8:7)),d<1||!g[0])n=p?toFixedPoint(l.charAt(1),-I,l.charAt(0)):l.charAt(0);else{if(g.length=d,p)for(--i;++g[--d]>i;)g[d]=0,d||(++h,g=[1].concat(g));for(f=g.length;!g[--f];);for(v=0,n="";v<=f;n+=l.charAt(g[v++]));n=toFixedPoint(n,h,l.charAt(0))}return n}}(),t=function(){function e(e,t,r){var n,o,i,s,a=0,c=e.length,u=t%SQRT_BASE,l=t/SQRT_BASE|0;for(e=e.slice();c--;)a=((o=u*(i=e[c]%SQRT_BASE)+(n=l*i+(s=e[c]/SQRT_BASE|0)*u)%SQRT_BASE*SQRT_BASE+a)/r|0)+(n/SQRT_BASE|0)+l*s,e[c]=o%r;return a&&(e=[a].concat(e)),e}function t(e,t,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(e[o]!=t[o]){i=e[o]>t[o]?1:-1;break}return i}function r(e,t,r,n){for(var o=0;r--;)e[r]-=o,o=e[r]<t[r]?1:0,e[r]=o*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,o,i,s,a){var c,u,l,d,h,f,p,m,y,g,b,_,v,I,k,A,S,E=n.s==o.s?1:-1,P=n.c,O=o.c;if(!(P&&P[0]&&O&&O[0]))return new w(n.s&&o.s&&(P?!O||P[0]!=O[0]:O)?P&&0==P[0]||!O?0*E:E/0:NaN);for(y=(m=new w(E)).c=[],E=i+(u=n.e-o.e)+1,a||(a=BASE,u=bitFloor(n.e/LOG_BASE)-bitFloor(o.e/LOG_BASE),E=E/LOG_BASE|0),l=0;O[l]==(P[l]||0);l++);if(O[l]>(P[l]||0)&&u--,E<0)y.push(1),d=!0;else{for(I=P.length,A=O.length,l=0,E+=2,(h=mathfloor(a/(O[0]+1)))>1&&(O=e(O,h,a),P=e(P,h,a),A=O.length,I=P.length),v=A,b=(g=P.slice(0,A)).length;b<A;g[b++]=0);S=O.slice(),S=[0].concat(S),k=O[0],O[1]>=a/2&&k++;do{if(h=0,(c=t(O,g,A,b))<0){if(_=g[0],A!=b&&(_=_*a+(g[1]||0)),(h=mathfloor(_/k))>1)for(h>=a&&(h=a-1),p=(f=e(O,h,a)).length,b=g.length;1==t(f,g,p,b);)h--,r(f,A<p?S:O,p,a),p=f.length,c=1;else 0==h&&(c=h=1),p=(f=O.slice()).length;if(p<b&&(f=[0].concat(f)),r(g,f,b,a),b=g.length,-1==c)for(;t(O,g,A,b)<1;)h++,r(g,A<b?S:O,b,a),b=g.length}else 0===c&&(h++,g=[0]);y[l++]=h,g[0]?g[b++]=P[v]||0:(g=[P[v]],b=1)}while((v++<I||null!=g[0])&&E--);d=null!=g[0],y[0]||y.splice(0,1)}if(a==BASE){for(l=1,E=y[0];E>=10;E/=10,l++);T(m,i+(m.e=l+u*LOG_BASE-1)+1,s,d)}else m.e=u,m.r=+d;return m}}(),n=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,r=/^\.([^.]+)$/,n=/^-?(Infinity|NaN)$/,o=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(i,s,a,c){var u,l=a?s:s.replace(o,"");if(n.test(l))i.s=isNaN(l)?null:l<0?-1:1;else{if(!a&&(l=l.replace(e,function(e,t,r){return u="x"==(r=r.toLowerCase())?16:"b"==r?2:8,c&&c!=u?e:t}),c&&(u=c,l=l.replace(t,"$1").replace(r,"0.$1")),s!=l))return new w(l,u);if(w.DEBUG)throw Error(bignumberError+"Not a"+(c?" base "+c:"")+" number: "+s);i.s=null}i.c=i.e=null}}(),s.absoluteValue=s.abs=function(){var e=new w(this);return e.s<0&&(e.s=1),e},s.comparedTo=function(e,t){return compare$1(this,new w(e,t))},s.decimalPlaces=s.dp=function(e,t){var r,n,o,i=this;if(null!=e)return intCheck(e,0,MAX),null==t?t=u:intCheck(t,0,8),T(new w(i),e+i.e+1,t);if(!(r=i.c))return null;if(n=((o=r.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE,o=r[o])for(;o%10==0;o/=10,n--);return n<0&&(n=0),n},s.dividedBy=s.div=function(e,r){return t(this,new w(e,r),c,u)},s.dividedToIntegerBy=s.idiv=function(e,r){return t(this,new w(e,r),0,1)},s.exponentiatedBy=s.pow=function(e,t){var r,n,o,i,s,c,l,d,h=this;if((e=new w(e)).c&&!e.isInteger())throw Error(bignumberError+"Exponent not an integer: "+A(e));if(null!=t&&(t=new w(t)),s=e.e>14,!h.c||!h.c[0]||1==h.c[0]&&!h.e&&1==h.c.length||!e.c||!e.c[0])return d=new w(Math.pow(+A(h),s?e.s*(2-isOdd(e)):+A(e))),t?d.mod(t):d;if(c=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new w(NaN);(n=!c&&h.isInteger()&&t.isInteger())&&(h=h.mod(t))}else{if(e.e>9&&(h.e>0||h.e<-1||(0==h.e?h.c[0]>1||s&&h.c[1]>=24e7:h.c[0]<8e13||s&&h.c[0]<=9999975e7)))return i=h.s<0&&isOdd(e)?-0:0,h.e>-1&&(i=1/i),new w(c?1/i:i);y&&(i=mathceil(y/LOG_BASE+2))}for(s?(r=new w(.5),c&&(e.s=1),l=isOdd(e)):l=(o=Math.abs(+A(e)))%2,d=new w(a);;){if(l){if(!(d=d.times(h)).c)break;i?d.c.length>i&&(d.c.length=i):n&&(d=d.mod(t))}if(o){if(0===(o=mathfloor(o/2)))break;l=o%2}else if(T(e=e.times(r),e.e+1,1),e.e>14)l=isOdd(e);else{if(0===(o=+A(e)))break;l=o%2}h=h.times(h),i?h.c&&h.c.length>i&&(h.c.length=i):n&&(h=h.mod(t))}return n?d:(c&&(d=a.div(d)),t?d.mod(t):i?T(d,y,u,undefined):d)},s.integerValue=function(e){var t=new w(this);return null==e?e=u:intCheck(e,0,8),T(t,t.e+1,e)},s.isEqualTo=s.eq=function(e,t){return 0===compare$1(this,new w(e,t))},s.isFinite=function(){return!!this.c},s.isGreaterThan=s.gt=function(e,t){return compare$1(this,new w(e,t))>0},s.isGreaterThanOrEqualTo=s.gte=function(e,t){return 1===(t=compare$1(this,new w(e,t)))||0===t},s.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2},s.isLessThan=s.lt=function(e,t){return compare$1(this,new w(e,t))<0},s.isLessThanOrEqualTo=s.lte=function(e,t){return-1===(t=compare$1(this,new w(e,t)))||0===t},s.isNaN=function(){return!this.s},s.isNegative=function(){return this.s<0},s.isPositive=function(){return this.s>0},s.isZero=function(){return!!this.c&&0==this.c[0]},s.minus=function(e,t){var r,n,o,i,s=this,a=s.s;if(t=(e=new w(e,t)).s,!a||!t)return new w(NaN);if(a!=t)return e.s=-t,s.plus(e);var c=s.e/LOG_BASE,l=e.e/LOG_BASE,d=s.c,h=e.c;if(!c||!l){if(!d||!h)return d?(e.s=-t,e):new w(h?s:NaN);if(!d[0]||!h[0])return h[0]?(e.s=-t,e):new w(d[0]?s:3==u?-0:0)}if(c=bitFloor(c),l=bitFloor(l),d=d.slice(),a=c-l){for((i=a<0)?(a=-a,o=d):(l=c,o=h),o.reverse(),t=a;t--;o.push(0));o.reverse()}else for(n=(i=(a=d.length)<(t=h.length))?a:t,a=t=0;t<n;t++)if(d[t]!=h[t]){i=d[t]<h[t];break}if(i&&(o=d,d=h,h=o,e.s=-e.s),(t=(n=h.length)-(r=d.length))>0)for(;t--;d[r++]=0);for(t=BASE-1;n>a;){if(d[--n]<h[n]){for(r=n;r&&!d[--r];d[r]=t);--d[r],d[n]+=BASE}d[n]-=h[n]}for(;0==d[0];d.splice(0,1),--l);return d[0]?k(e,d,l):(e.s=3==u?-1:1,e.c=[e.e=0],e)},s.modulo=s.mod=function(e,r){var n,o,i=this;return e=new w(e,r),!i.c||!e.s||e.c&&!e.c[0]?new w(NaN):!e.c||i.c&&!i.c[0]?new w(i):(9==m?(o=e.s,e.s=1,n=t(i,e,0,3),e.s=o,n.s*=o):n=t(i,e,0,m),(e=i.minus(n.times(e))).c[0]||1!=m||(e.s=i.s),e)},s.multipliedBy=s.times=function(e,t){var r,n,o,i,s,a,c,u,l,d,h,f,p,m,y,g=this,b=g.c,_=(e=new w(e,t)).c;if(!(b&&_&&b[0]&&_[0]))return!g.s||!e.s||b&&!b[0]&&!_||_&&!_[0]&&!b?e.c=e.e=e.s=null:(e.s*=g.s,b&&_?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=bitFloor(g.e/LOG_BASE)+bitFloor(e.e/LOG_BASE),e.s*=g.s,(c=b.length)<(d=_.length)&&(p=b,b=_,_=p,o=c,c=d,d=o),o=c+d,p=[];o--;p.push(0));for(m=BASE,y=SQRT_BASE,o=d;--o>=0;){for(r=0,h=_[o]%y,f=_[o]/y|0,i=o+(s=c);i>o;)r=((u=h*(u=b[--s]%y)+(a=f*u+(l=b[s]/y|0)*h)%y*y+p[i]+r)/m|0)+(a/y|0)+f*l,p[i--]=u%m;p[i]=r}return r?++n:p.splice(0,1),k(e,p,n)},s.negated=function(){var e=new w(this);return e.s=-e.s||null,e},s.plus=function(e,t){var r,n=this,o=n.s;if(t=(e=new w(e,t)).s,!o||!t)return new w(NaN);if(o!=t)return e.s=-t,n.minus(e);var i=n.e/LOG_BASE,s=e.e/LOG_BASE,a=n.c,c=e.c;if(!i||!s){if(!a||!c)return new w(o/0);if(!a[0]||!c[0])return c[0]?e:new w(a[0]?n:0*o)}if(i=bitFloor(i),s=bitFloor(s),a=a.slice(),o=i-s){for(o>0?(s=i,r=c):(o=-o,r=a),r.reverse();o--;r.push(0));r.reverse()}for((o=a.length)-(t=c.length)<0&&(r=c,c=a,a=r,t=o),o=0;t;)o=(a[--t]=a[t]+c[t]+o)/BASE|0,a[t]=BASE===a[t]?0:a[t]%BASE;return o&&(a=[o].concat(a),++s),k(e,a,s)},s.precision=s.sd=function(e,t){var r,n,o,i=this;if(null!=e&&e!==!!e)return intCheck(e,1,MAX),null==t?t=u:intCheck(t,0,8),T(new w(i),e,t);if(!(r=i.c))return null;if(n=(o=r.length-1)*LOG_BASE+1,o=r[o]){for(;o%10==0;o/=10,n--);for(o=r[0];o>=10;o/=10,n++);}return e&&i.e+1>n&&(n=i.e+1),n},s.shiftedBy=function(e){return intCheck(e,-MAX_SAFE_INTEGER$1,MAX_SAFE_INTEGER$1),this.times("1e"+e)},s.squareRoot=s.sqrt=function(){var e,r,n,o,i,s=this,a=s.c,l=s.s,d=s.e,h=c+4,f=new w("0.5");if(1!==l||!a||!a[0])return new w(!l||l<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(l=Math.sqrt(+A(s)))||l==1/0?(((r=coeffToString(a)).length+d)%2==0&&(r+="0"),l=Math.sqrt(+r),d=bitFloor((d+1)/2)-(d<0||d%2),n=new w(r=l==1/0?"5e"+d:(r=l.toExponential()).slice(0,r.indexOf("e")+1)+d)):n=new w(l+""),n.c[0])for((l=(d=n.e)+h)<3&&(l=0);;)if(i=n,n=f.times(i.plus(t(s,i,h,1))),coeffToString(i.c).slice(0,l)===(r=coeffToString(n.c)).slice(0,l)){if(n.e<d&&--l,"9999"!=(r=r.slice(l-3,l+1))&&(o||"4999"!=r)){+r&&(+r.slice(1)||"5"!=r.charAt(0))||(T(n,n.e+c+2,1),e=!n.times(n).eq(s));break}if(!o&&(T(i,i.e+c+2,0),i.times(i).eq(s))){n=i;break}h+=4,l+=4,o=1}return T(n,n.e+c+1,u,e)},s.toExponential=function(e,t){return null!=e&&(intCheck(e,0,MAX),e++),v(this,e,t,1)},s.toFixed=function(e,t){return null!=e&&(intCheck(e,0,MAX),e=e+this.e+1),v(this,e,t)},s.toFormat=function(e,t,r){var n,o=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=g;else if("object"!=typeof r)throw Error(bignumberError+"Argument not an object: "+r);if(n=o.toFixed(e,t),o.c){var i,s=n.split("."),a=+r.groupSize,c=+r.secondaryGroupSize,u=r.groupSeparator||"",l=s[0],d=s[1],h=o.s<0,f=h?l.slice(1):l,p=f.length;if(c&&(i=a,a=c,c=i,p-=i),a>0&&p>0){for(i=p%a||a,l=f.substr(0,i);i<p;i+=a)l+=u+f.substr(i,a);c>0&&(l+=u+f.slice(i)),h&&(l="-"+l)}n=d?l+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?d.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):d):l}return(r.prefix||"")+n+(r.suffix||"")},s.toFraction=function(e){var r,n,o,i,s,c,l,d,h,p,m,y,g=this,b=g.c;if(null!=e&&(!(l=new w(e)).isInteger()&&(l.c||1!==l.s)||l.lt(a)))throw Error(bignumberError+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+A(l));if(!b)return new w(g);for(r=new w(a),h=n=new w(a),o=d=new w(a),y=coeffToString(b),s=r.e=y.length-g.e-1,r.c[0]=POWS_TEN[(c=s%LOG_BASE)<0?LOG_BASE+c:c],e=!e||l.comparedTo(r)>0?s>0?r:h:l,c=f,f=1/0,l=new w(y),d.c[0]=0;p=t(l,r,0,1),1!=(i=n.plus(p.times(o))).comparedTo(e);)n=o,o=i,h=d.plus(p.times(i=h)),d=i,r=l.minus(p.times(i=r)),l=i;return i=t(e.minus(n),o,0,1),d=d.plus(i.times(h)),n=n.plus(i.times(o)),d.s=h.s=g.s,m=t(h,o,s*=2,u).minus(g).abs().comparedTo(t(d,n,s,u).minus(g).abs())<1?[h,o]:[d,n],f=c,m},s.toNumber=function(){return+A(this)},s.toPrecision=function(e,t){return null!=e&&intCheck(e,1,MAX),v(this,e,t,2)},s.toString=function(e){var t,n=this,o=n.s,i=n.e;return null===i?o?(t="Infinity",o<0&&(t="-"+t)):t="NaN":(null==e?t=i<=l||i>=d?toExponential(coeffToString(n.c),i):toFixedPoint(coeffToString(n.c),i,"0"):10===e&&_?t=toFixedPoint(coeffToString((n=T(new w(n),c+i+1,u)).c),n.e,"0"):(intCheck(e,2,b.length,"Base"),t=r(toFixedPoint(coeffToString(n.c),i,"0"),10,e,o,!0)),o<0&&n.c[0]&&(t="-"+t)),t},s.valueOf=s.toJSON=function(){return A(this)},s._isBigNumber=!0,s[Symbol.toStringTag]="BigNumber",s[Symbol.for("nodejs.util.inspect.custom")]=s.valueOf,null!=e&&w.set(e),w}function bitFloor(e){var t=0|e;return e>0||e===t?t:t-1}function coeffToString(e){for(var t,r,n=1,o=e.length,i=e[0]+"";n<o;){for(t=e[n++]+"",r=LOG_BASE-t.length;r--;t="0"+t);i+=t}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function compare$1(e,t){var r,n,o=e.c,i=t.c,s=e.s,a=t.s,c=e.e,u=t.e;if(!s||!a)return null;if(r=o&&!o[0],n=i&&!i[0],r||n)return r?n?0:-a:s;if(s!=a)return s;if(r=s<0,n=c==u,!o||!i)return n?0:!o^r?1:-1;if(!n)return c>u^r?1:-1;for(a=(c=o.length)<(u=i.length)?c:u,s=0;s<a;s++)if(o[s]!=i[s])return o[s]>i[s]^r?1:-1;return c==u?0:c>u^r?1:-1}function intCheck(e,t,r,n){if(e<t||e>r||e!==mathfloor(e))throw Error(bignumberError+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function isOdd(e){var t=e.c.length-1;return bitFloor(e.e/LOG_BASE)==t&&e.c[t]%2!=0}function toExponential(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function toFixedPoint(e,t,r){var n,o;if(t<0){for(o=r+".";++t;o+=r);e=o+e}else if(++t>(n=e.length)){for(o=r,t-=n;--t;o+=r);e+=o}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var BigNumber$2=clone$1(),commonjsGlobal="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var lib={},indexMinimal={},minimal$1={},aspromise,hasRequiredAspromise;function requireAspromise(){if(hasRequiredAspromise)return aspromise;return hasRequiredAspromise=1,aspromise=function(e,t){var r=new Array(arguments.length-1),n=0,o=2,i=!0;for(;o<arguments.length;)r[n++]=arguments[o++];return new Promise(function(o,s){r[n]=function(e){if(i)if(i=!1,e)s(e);else{for(var t=new Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];o.apply(null,t)}};try{e.apply(t||null,r)}catch(a){i&&(i=!1,s(a))}})},aspromise}var base64$1={},hasRequiredBase64,eventemitter,hasRequiredEventemitter,float,hasRequiredFloat,inquire_1,hasRequiredInquire;function requireBase64(){return hasRequiredBase64||(hasRequiredBase64=1,function(e){var t=e;t.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var r=new Array(64),n=new Array(123),o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;t.encode=function(e,t,n){for(var o,i=null,s=[],a=0,c=0;t<n;){var u=e[t++];switch(c){case 0:s[a++]=r[u>>2],o=(3&u)<<4,c=1;break;case 1:s[a++]=r[o|u>>4],o=(15&u)<<2,c=2;break;case 2:s[a++]=r[o|u>>6],s[a++]=r[63&u],c=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,s)),a=0)}return c&&(s[a++]=r[o],s[a++]=61,1===c&&(s[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,s.slice(0,a))),i.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var i="invalid encoding";t.decode=function(e,t,r){for(var o,s=r,a=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&a>1)break;if(void 0===(u=n[u]))throw Error(i);switch(a){case 0:o=u,a=1;break;case 1:t[r++]=o<<2|(48&u)>>4,o=u,a=2;break;case 2:t[r++]=(15&o)<<4|(60&u)>>2,o=u,a=3;break;case 3:t[r++]=(3&o)<<6|u,a=0}}if(1===a)throw Error(i);return r-s},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}(base64$1)),base64$1}function requireEventemitter(){if(hasRequiredEventemitter)return eventemitter;function e(){this._listeners={}}return hasRequiredEventemitter=1,eventemitter=e,e.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},e.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],n=0;n<r.length;)r[n].fn===t?r.splice(n,1):++n;return this},e.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],n=1;n<arguments.length;)r.push(arguments[n++]);for(n=0;n<t.length;)t[n].fn.apply(t[n++].ctx,r)}return this},eventemitter}function requireFloat(){if(hasRequiredFloat)return float;function e(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),n=128===r[3];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3]}function i(e,n,o){t[0]=e,n[o]=r[3],n[o+1]=r[2],n[o+2]=r[1],n[o+3]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],t[0]}function a(e,n){return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t[0]}e.writeFloatLE=n?o:i,e.writeFloatBE=n?i:o,e.readFloatLE=n?s:a,e.readFloatBE=n?a:s}():function(){function i(e,t,r,n){var o=t<0?1:0;if(o&&(t=-t),0===t)e(1/t>0?0:2147483648,r,n);else if(isNaN(t))e(2143289344,r,n);else if(t>34028234663852886e22)e((o<<31|2139095040)>>>0,r,n);else if(t<11754943508222875e-54)e((o<<31|Math.round(t/1401298464324817e-60))>>>0,r,n);else{var i=Math.floor(Math.log(t)/Math.LN2);e((o<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,r,n)}}function s(e,t,r){var n=e(t,r),o=2*(n>>31)+1,i=n>>>23&255,s=8388607&n;return 255===i?s?NaN:o*(1/0):0===i?1401298464324817e-60*o*s:o*Math.pow(2,i-150)*(s+8388608)}e.writeFloatLE=i.bind(null,t),e.writeFloatBE=i.bind(null,r),e.readFloatLE=s.bind(null,n),e.readFloatBE=s.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),n=128===r[7];function o(e,n,o){t[0]=e,n[o]=r[0],n[o+1]=r[1],n[o+2]=r[2],n[o+3]=r[3],n[o+4]=r[4],n[o+5]=r[5],n[o+6]=r[6],n[o+7]=r[7]}function i(e,n,o){t[0]=e,n[o]=r[7],n[o+1]=r[6],n[o+2]=r[5],n[o+3]=r[4],n[o+4]=r[3],n[o+5]=r[2],n[o+6]=r[1],n[o+7]=r[0]}function s(e,n){return r[0]=e[n],r[1]=e[n+1],r[2]=e[n+2],r[3]=e[n+3],r[4]=e[n+4],r[5]=e[n+5],r[6]=e[n+6],r[7]=e[n+7],t[0]}function a(e,n){return r[7]=e[n],r[6]=e[n+1],r[5]=e[n+2],r[4]=e[n+3],r[3]=e[n+4],r[2]=e[n+5],r[1]=e[n+6],r[0]=e[n+7],t[0]}e.writeDoubleLE=n?o:i,e.writeDoubleBE=n?i:o,e.readDoubleLE=n?s:a,e.readDoubleBE=n?a:s}():function(){function i(e,t,r,n,o,i){var s=n<0?1:0;if(s&&(n=-n),0===n)e(0,o,i+t),e(1/n>0?0:2147483648,o,i+r);else if(isNaN(n))e(0,o,i+t),e(2146959360,o,i+r);else if(n>17976931348623157e292)e(0,o,i+t),e((s<<31|2146435072)>>>0,o,i+r);else{var a;if(n<22250738585072014e-324)e((a=n/5e-324)>>>0,o,i+t),e((s<<31|a/4294967296)>>>0,o,i+r);else{var c=Math.floor(Math.log(n)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(a=n*Math.pow(2,-c))>>>0,o,i+t),e((s<<31|c+1023<<20|1048576*a&1048575)>>>0,o,i+r)}}}function s(e,t,r,n,o){var i=e(n,o+t),s=e(n,o+r),a=2*(s>>31)+1,c=s>>>20&2047,u=4294967296*(1048575&s)+i;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=i.bind(null,t,0,4),e.writeDoubleBE=i.bind(null,r,4,0),e.readDoubleLE=s.bind(null,n,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function t(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function r(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function n(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}return hasRequiredFloat=1,float=e(e)}function requireInquire(){if(hasRequiredInquire)return inquire_1;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e2){}return null}return hasRequiredInquire=1,inquire_1=inquire,inquire_1}var utf8={},hasRequiredUtf8,pool_1,hasRequiredPool,longbits,hasRequiredLongbits,hasRequiredMinimal$1,writer,hasRequiredWriter,writer_buffer,hasRequiredWriter_buffer,reader,hasRequiredReader,reader_buffer,hasRequiredReader_buffer;function requireUtf8(){return hasRequiredUtf8||(hasRequiredUtf8=1,(e=utf8).length=function(e){for(var t=0,r=0,n=0;n<e.length;++n)(r=e.charCodeAt(n))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(n+1))?(++n,t+=4):t+=3;return t},e.read=function(e,t,r){if(r-t<1)return"";for(var n,o=null,i=[],s=0;t<r;)(n=e[t++])<128?i[s++]=n:n>191&&n<224?i[s++]=(31&n)<<6|63&e[t++]:n>239&&n<365?(n=((7&n)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[s++]=55296+(n>>10),i[s++]=56320+(1023&n)):i[s++]=(15&n)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,i)),s=0);return o?(s&&o.push(String.fromCharCode.apply(String,i.slice(0,s))),o.join("")):String.fromCharCode.apply(String,i.slice(0,s))},e.write=function(e,t,r){for(var n,o,i=r,s=0;s<e.length;++s)(n=e.charCodeAt(s))<128?t[r++]=n:n<2048?(t[r++]=n>>6|192,t[r++]=63&n|128):55296==(64512&n)&&56320==(64512&(o=e.charCodeAt(s+1)))?(n=65536+((1023&n)<<10)+(1023&o),++s,t[r++]=n>>18|240,t[r++]=n>>12&63|128,t[r++]=n>>6&63|128,t[r++]=63&n|128):(t[r++]=n>>12|224,t[r++]=n>>6&63|128,t[r++]=63&n|128);return r-i}),utf8;var e}function requirePool(){if(hasRequiredPool)return pool_1;return hasRequiredPool=1,pool_1=function(e,t,r){var n=r||8192,o=n>>>1,i=null,s=n;return function(r){if(r<1||r>o)return e(r);s+r>n&&(i=e(n),s=0);var a=t.call(i,s,s+=r);return 7&s&&(s=1+(7|s)),a}}}function requireLongbits(){if(hasRequiredLongbits)return longbits;hasRequiredLongbits=1,longbits=t;var e=requireMinimal$1();function t(e,t){this.lo=e>>>0,this.hi=t>>>0}var r=t.zero=new t(0,0);r.toNumber=function(){return 0},r.zzEncode=r.zzDecode=function(){return this},r.length=function(){return 1};var n=t.zeroHash="\0\0\0\0\0\0\0\0";t.fromNumber=function(e){if(0===e)return r;var n=e<0;n&&(e=-e);var o=e>>>0,i=(e-o)/4294967296>>>0;return n&&(i=~i>>>0,o=~o>>>0,++o>4294967295&&(o=0,++i>4294967295&&(i=0))),new t(o,i)},t.from=function(n){if("number"==typeof n)return t.fromNumber(n);if(e.isString(n)){if(!e.Long)return t.fromNumber(parseInt(n,10));n=e.Long.fromString(n)}return n.low||n.high?new t(n.low>>>0,n.high>>>0):r},t.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},t.prototype.toLong=function(t){return e.Long?new e.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var o=String.prototype.charCodeAt;return t.fromHash=function(e){return e===n?r:new t((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},t.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},t.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},t.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},t.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10},longbits}function requireMinimal$1(){return hasRequiredMinimal$1||(hasRequiredMinimal$1=1,function(e){var t=e;function r(e,t,r){for(var n=Object.keys(t),o=0;o<n.length;++o)void 0!==e[n[o]]&&r||(e[n[o]]=t[n[o]]);return e}function n(e){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),n&&r(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}t.asPromise=requireAspromise(),t.base64=requireBase64(),t.EventEmitter=requireEventemitter(),t.float=requireFloat(),t.inquire=requireInquire(),t.utf8=requireUtf8(),t.pool=requirePool(),t.LongBits=requireLongbits(),t.isNode=Boolean(void 0!==commonjsGlobal&&commonjsGlobal&&commonjsGlobal.process&&commonjsGlobal.process.versions&&commonjsGlobal.process.versions.node),t.global=t.isNode&&commonjsGlobal||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||minimal$1,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"==typeof e},t.isset=t.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(r){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,r){var n=t.LongBits.fromHash(e);return t.Long?t.Long.fromBits(n.lo,n.hi,r):n.toNumber(Boolean(r))},t.merge=r,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=n,t.ProtocolError=n("ProtocolError"),t.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},t.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}}(minimal$1)),minimal$1}function requireWriter(){if(hasRequiredWriter)return writer;hasRequiredWriter=1,writer=c;var e,t=requireMinimal$1(),r=t.LongBits,n=t.base64,o=t.utf8;function i(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function s(){}function a(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function c(){this.len=0,this.head=new i(s,0,0),this.tail=this.head,this.states=null}var u=function(){return t.Buffer?function(){return(c.create=function(){return new e})()}:function(){return new c}};function l(e,t,r){t[r]=255&e}function d(e,t){this.len=e,this.next=void 0,this.val=t}function h(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function f(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}c.create=u(),c.alloc=function(e){return new t.Array(e)},t.Array!==Array&&(c.alloc=t.pool(c.alloc,t.Array.prototype.subarray)),c.prototype._push=function(e,t,r){return this.tail=this.tail.next=new i(e,t,r),this.len+=t,this},d.prototype=Object.create(i.prototype),d.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},c.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new d((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},c.prototype.int32=function(e){return e<0?this._push(h,10,r.fromNumber(e)):this.uint32(e)},c.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},c.prototype.uint64=function(e){var t=r.from(e);return this._push(h,t.length(),t)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(e){var t=r.from(e).zzEncode();return this._push(h,t.length(),t)},c.prototype.bool=function(e){return this._push(l,1,e?1:0)},c.prototype.fixed32=function(e){return this._push(f,4,e>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(e){var t=r.from(e);return this._push(f,4,t.lo)._push(f,4,t.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(e){return this._push(t.float.writeFloatLE,4,e)},c.prototype.double=function(e){return this._push(t.float.writeDoubleLE,8,e)};var p=t.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var n=0;n<e.length;++n)t[r+n]=e[n]};return c.prototype.bytes=function(e){var r=e.length>>>0;if(!r)return this._push(l,1,0);if(t.isString(e)){var o=c.alloc(r=n.length(e));n.decode(e,o,0),e=o}return this.uint32(r)._push(p,r,e)},c.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(l,1,0)},c.prototype.fork=function(){return this.states=new a(this),this.head=this.tail=new i(s,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new i(s,0,0),this.len=0),this},c.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},c.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},c._configure=function(t){e=t,c.create=u(),e._configure()},writer}function requireWriter_buffer(){if(hasRequiredWriter_buffer)return writer_buffer;hasRequiredWriter_buffer=1,writer_buffer=r;var e=requireWriter();(r.prototype=Object.create(e.prototype)).constructor=r;var t=requireMinimal$1();function r(){e.call(this)}function n(e,r,n){e.length<40?t.utf8.write(e,r,n):r.utf8Write?r.utf8Write(e,n):r.write(e,n)}return r._configure=function(){r.alloc=t._Buffer_allocUnsafe,r.writeBytesBuffer=t.Buffer&&t.Buffer.prototype instanceof Uint8Array&&"set"===t.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var n=0;n<e.length;)t[r++]=e[n++]}},r.prototype.bytes=function(e){t.isString(e)&&(e=t._Buffer_from(e,"base64"));var n=e.length>>>0;return this.uint32(n),n&&this._push(r.writeBytesBuffer,n,e),this},r.prototype.string=function(e){var r=t.Buffer.byteLength(e);return this.uint32(r),r&&this._push(n,r,e),this},r._configure(),writer_buffer}function requireReader(){if(hasRequiredReader)return reader;hasRequiredReader=1,reader=i;var e,t=requireMinimal$1(),r=t.LongBits,n=t.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function i(e){this.buf=e,this.pos=0,this.len=e.length}var s="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new i(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new i(e);throw Error("illegal buffer")},a=function(){return t.Buffer?function(r){return(i.create=function(r){return t.Buffer.isBuffer(r)?new e(r):s(r)})(r)}:s};function c(){var e=new r(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function u(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function l(){if(this.pos+8>this.len)throw o(this,8);return new r(u(this.buf,this.pos+=4),u(this.buf,this.pos+=4))}return i.create=a(),i.prototype._slice=t.Array.prototype.subarray||t.Array.prototype.slice,i.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return e;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return e}}(),i.prototype.int32=function(){return 0|this.uint32()},i.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)},i.prototype.bool=function(){return 0!==this.uint32()},i.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return u(this.buf,this.pos+=4)},i.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|u(this.buf,this.pos+=4)},i.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=t.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},i.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=t.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},i.prototype.bytes=function(){var e=this.uint32(),r=this.pos,n=this.pos+e;if(n>this.len)throw o(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(r,n);if(r===n){var i=t.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,r,n)},i.prototype.string=function(){var e=this.bytes();return n.read(e,0,e.length)},i.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw o(this)}while(128&this.buf[this.pos++]);return this},i.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},i._configure=function(r){e=r,i.create=a(),e._configure();var n=t.Long?"toLong":"toNumber";t.merge(i.prototype,{int64:function(){return c.call(this)[n](!1)},uint64:function(){return c.call(this)[n](!0)},sint64:function(){return c.call(this).zzDecode()[n](!1)},fixed64:function(){return l.call(this)[n](!0)},sfixed64:function(){return l.call(this)[n](!1)}})},reader}function requireReader_buffer(){if(hasRequiredReader_buffer)return reader_buffer;hasRequiredReader_buffer=1,reader_buffer=r;var e=requireReader();(r.prototype=Object.create(e.prototype)).constructor=r;var t=requireMinimal$1();function r(t){e.call(this,t)}return r._configure=function(){t.Buffer&&(r.prototype._slice=t.Buffer.prototype.slice)},r.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},r._configure(),reader_buffer}var rpc={},service,hasRequiredService,hasRequiredRpc,roots,hasRequiredRoots,hasRequiredIndexMinimal,minimal,hasRequiredMinimal;function requireService(){if(hasRequiredService)return service;hasRequiredService=1,service=t;var e=requireMinimal$1();function t(t,r,n){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");e.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(r),this.responseDelimited=Boolean(n)}return(t.prototype=Object.create(e.EventEmitter.prototype)).constructor=t,t.prototype.rpcCall=function t(r,n,o,i,s){if(!i)throw TypeError("request must be specified");var a=this;if(!s)return e.asPromise(t,a,r,n,o,i);if(a.rpcImpl)try{return a.rpcImpl(r,n[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),function(e,t){if(e)return a.emit("error",e,r),s(e);if(null!==t){if(!(t instanceof o))try{t=o[a.responseDelimited?"decodeDelimited":"decode"](t)}catch(n){return a.emit("error",n,r),s(n)}return a.emit("data",t,r),s(null,t)}a.end(!0)})}catch(c){return a.emit("error",c,r),void setTimeout(function(){s(c)},0)}else setTimeout(function(){s(Error("already ended"))},0)},t.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this},service}function requireRpc(){return hasRequiredRpc||(hasRequiredRpc=1,rpc.Service=requireService()),rpc}function requireRoots(){return hasRequiredRoots?roots:(hasRequiredRoots=1,roots={})}function requireIndexMinimal(){return hasRequiredIndexMinimal||(hasRequiredIndexMinimal=1,function(e){var t=e;function r(){t.util._configure(),t.Writer._configure(t.BufferWriter),t.Reader._configure(t.BufferReader)}t.build="minimal",t.Writer=requireWriter(),t.BufferWriter=requireWriter_buffer(),t.Reader=requireReader(),t.BufferReader=requireReader_buffer(),t.util=requireMinimal$1(),t.rpc=requireRpc(),t.roots=requireRoots(),t.configure=r,r()}(indexMinimal)),indexMinimal}function requireMinimal(){return hasRequiredMinimal?minimal:(hasRequiredMinimal=1,minimal=requireIndexMinimal())}var umd$1={exports:{}},umd=umd$1.exports,hasRequiredUmd;function requireUmd(){return hasRequiredUmd||(hasRequiredUmd=1,e=umd$1,t=umd$1.exports,"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;
/**
           * @license
           * Copyright 2009 The Closure Library Authors
           * Copyright 2020 Daniel Wirtz / The long.js Authors.
           *
           * Licensed under the Apache License, Version 2.0 (the "License");
           * you may not use this file except in compliance with the License.
           * You may obtain a copy of the License at
           *
           *     http://www.apache.org/licenses/LICENSE-2.0
           *
           * Unless required by applicable law or agreed to in writing, software
           * distributed under the License is distributed on an "AS IS" BASIS,
           * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
           * See the License for the specific language governing permissions and
           * limitations under the License.
           *
           * SPDX-License-Identifier: Apache-2.0
           */
var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}function o(e){var t=Math.clz32(e&-e);return e?31-t:t}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=n;var i={},s={};function a(e,t){var r,n,o;return t?(o=0<=(e>>>=0)&&e<256)&&(n=s[e])?n:(r=u(e,0,!0),o&&(s[e]=r),r):(o=-128<=(e|=0)&&e<128)&&(n=i[e])?n:(r=u(e,e<0?-1:0,!1),o&&(i[e]=r),r)}function c(e,t){if(isNaN(e))return t?_:b;if(t){if(e<0)return _;if(e>=m)return T}else{if(e<=-y)return A;if(e+1>=y)return k}return e<0?c(-e,t).neg():u(e%p|0,e/p|0,t)}function u(e,t,n){return new r(e,t,n)}r.fromInt=a,r.fromNumber=c,r.fromBits=u;var l=Math.pow;function d(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?_:b;if((r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return d(e.substring(1),t,r).neg();for(var o=c(l(r,8)),i=b,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),u=parseInt(e.substring(s,s+a),r);if(a<8){var h=c(l(r,a));i=i.mul(h).add(c(u))}else i=(i=i.mul(o)).add(c(u))}return i.unsigned=t,i}function h(e,t){return"number"==typeof e?c(e,t):"string"==typeof e?d(e,t):u(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=d,r.fromValue=h;var f=65536,p=f*f,m=p*p,y=m/2,g=a(1<<24),b=a(0);r.ZERO=b;var _=a(0,!0);r.UZERO=_;var w=a(1);r.ONE=w;var v=a(1,!0);r.UONE=v;var I=a(-1);r.NEG_ONE=I;var k=u(-1,2147483647,!1);r.MAX_VALUE=k;var T=u(-1,-1,!0);r.MAX_UNSIGNED_VALUE=T;var A=u(0,-2147483648,!1);r.MIN_VALUE=A;var S=r.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(A)){var t=c(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=c(l(e,6),this.unsigned),i=this,s="";;){var a=i.div(o),u=(i.sub(a.mul(o)).toInt()>>>0).toString(e);if((i=a).isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(A)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&!(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isSafeInteger=function(){var e=this.high>>21;return!e||!this.unsigned&&-1===e&&!(0===this.low&&-2097152===this.high)},S.isZero=function(){return 0===this.high&&0===this.low},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return!(1&~this.low)},S.isEven=function(){return!(1&this.low)},S.equals=function(e){return n(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(e){if(n(e)||(e=h(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(A)?A:this.not().add(w)},S.neg=S.negate,S.add=function(e){n(e)||(e=h(e));var t=this.high>>>16,r=65535&this.high,o=this.low>>>16,i=65535&this.low,s=e.high>>>16,a=65535&e.high,c=e.low>>>16,l=0,d=0,f=0,p=0;return f+=(p+=i+(65535&e.low))>>>16,d+=(f+=o+c)>>>16,l+=(d+=r+a)>>>16,l+=t+s,u((f&=65535)<<16|(p&=65535),(l&=65535)<<16|(d&=65535),this.unsigned)},S.subtract=function(e){return n(e)||(e=h(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=h(e)),t)return u(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?_:b;if(this.eq(A))return e.isOdd()?A:b;if(e.eq(A))return this.isOdd()?A:b;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return c(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,o=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,l=65535&e.high,d=e.low>>>16,f=65535&e.low,p=0,m=0,y=0,w=0;return y+=(w+=s*f)>>>16,m+=(y+=i*f)>>>16,y&=65535,m+=(y+=s*d)>>>16,p+=(m+=o*f)>>>16,m&=65535,p+=(m+=i*d)>>>16,m&=65535,p+=(m+=s*l)>>>16,p+=r*f+o*d+i*l+s*a,u((y&=65535)<<16|(w&=65535),(p&=65535)<<16|(m&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(n(e)||(e=h(e)),e.isZero())throw Error("division by zero");var r,o,i;if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?u((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?_:b;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return _;if(e.gt(this.shru(1)))return v;i=_}else{if(this.eq(A))return e.eq(w)||e.eq(I)?A:e.eq(A)?w:(r=this.shr(1).div(e).shl(1)).eq(b)?e.isNegative()?w:I:(o=this.sub(e.mul(r)),i=r.add(o.div(e)));if(e.eq(A))return this.unsigned?_:b;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=b}for(o=this;o.gte(e);){r=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(r)/Math.LN2),a=s<=48?1:l(2,s-48),d=c(r),f=d.mul(e);f.isNegative()||f.gt(o);)f=(d=c(r-=a,this.unsigned)).mul(e);d.isZero()&&(d=w),i=i.add(d),o=o.sub(f)}return i},S.div=S.divide,S.modulo=function(e){return n(e)||(e=h(e)),t?u((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return u(~this.low,~this.high,this.unsigned)},S.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},S.clz=S.countLeadingZeros,S.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},S.ctz=S.countTrailingZeros,S.and=function(e){return n(e)||(e=h(e)),u(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return n(e)||(e=h(e)),u(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return n(e)||(e=h(e)),u(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):u(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):u(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?u(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):u(32===e?this.high:this.high>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.rotateLeft=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),u(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},S.rotl=S.rotateLeft,S.rotateRight=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?u(this.high,this.low,this.unsigned):e<32?(t=32-e,u(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),u(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},S.rotr=S.rotateRight,S.toSigned=function(){return this.unsigned?u(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:u(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,n){return n?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},"function"==typeof BigInt&&(r.fromBigInt=function(e,t){return u(Number(BigInt.asIntN(32,e)),Number(BigInt.asIntN(32,e>>BigInt(32))),t)},r.fromValue=function(e,t){return"bigint"==typeof e?r.fromBigInt(e,t):h(e,t)},S.toBigInt=function(){var e=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|e}),e.default=r}(t),e.exports=(r=t).default||r),umd$1.exports;var e,t,r}var proto={},hasRequiredProto,hasRequiredLib;function requireProto(){if(hasRequiredProto)return proto;hasRequiredProto=1,Object.defineProperty(proto,"__esModule",{value:!0}),proto.proto=proto.google=proto.default=proto.com=void 0;var e=function(e,r){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=t(r);if(n&&n.has(e))return n.get(e);var o={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=i?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(o,s,a):o[s]=e[s]}return o.default=e,n&&n.set(e,o),o}(requireMinimal());function t(e){if("function"!=typeof WeakMap)return null;var r=new WeakMap,n=new WeakMap;return(t=function(e){return e?n:r})(e)}const r=e.Reader,n=e.Writer,o=e.util,i=e.roots.hashgraph||(e.roots.hashgraph={});proto.default=i;const s=i.com=(()=>{const t={};return t.hedera=function(){const t={};return t.mirror=function(){const t={};return t.api=function(){const t={};return t.proto=function(){const t={};return t.ConsensusTopicQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.topicID=null,e.prototype.consensusStartTime=null,e.prototype.consensusEndTime=null,e.prototype.limit=o.Long?o.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&i.proto.TopicID.encode(e.topicID,t.uint32(10).fork()).ldelim(),null!=e.consensusStartTime&&Object.hasOwnProperty.call(e,"consensusStartTime")&&i.proto.Timestamp.encode(e.consensusStartTime,t.uint32(18).fork()).ldelim(),null!=e.consensusEndTime&&Object.hasOwnProperty.call(e,"consensusEndTime")&&i.proto.Timestamp.encode(e.consensusEndTime,t.uint32(26).fork()).ldelim(),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(32).uint64(e.limit),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.mirror.api.proto.ConsensusTopicQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.topicID=i.proto.TopicID.decode(e,e.uint32());break;case 2:o.consensusStartTime=i.proto.Timestamp.decode(e,e.uint32());break;case 3:o.consensusEndTime=i.proto.Timestamp.decode(e,e.uint32());break;case 4:o.limit=e.uint64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.mirror.api.proto.ConsensusTopicQuery"},e}(),t.ConsensusTopicResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.consensusTimestamp=null,e.prototype.message=o.newBuffer([]),e.prototype.runningHash=o.newBuffer([]),e.prototype.sequenceNumber=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.runningHashVersion=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.chunkInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.consensusTimestamp&&Object.hasOwnProperty.call(e,"consensusTimestamp")&&i.proto.Timestamp.encode(e.consensusTimestamp,t.uint32(10).fork()).ldelim(),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).bytes(e.message),null!=e.runningHash&&Object.hasOwnProperty.call(e,"runningHash")&&t.uint32(26).bytes(e.runningHash),null!=e.sequenceNumber&&Object.hasOwnProperty.call(e,"sequenceNumber")&&t.uint32(32).uint64(e.sequenceNumber),null!=e.runningHashVersion&&Object.hasOwnProperty.call(e,"runningHashVersion")&&t.uint32(40).uint64(e.runningHashVersion),null!=e.chunkInfo&&Object.hasOwnProperty.call(e,"chunkInfo")&&i.proto.ConsensusMessageChunkInfo.encode(e.chunkInfo,t.uint32(50).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.mirror.api.proto.ConsensusTopicResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.consensusTimestamp=i.proto.Timestamp.decode(e,e.uint32());break;case 2:o.message=e.bytes();break;case 3:o.runningHash=e.bytes();break;case 4:o.sequenceNumber=e.uint64();break;case 5:o.runningHashVersion=e.uint64();break;case 6:o.chunkInfo=i.proto.ConsensusMessageChunkInfo.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.mirror.api.proto.ConsensusTopicResponse"},e}(),t.ConsensusService=function(){function t(t,r,n){e.rpc.Service.call(this,t,r,n)}return(t.prototype=Object.create(e.rpc.Service.prototype)).constructor=t,t.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(t.prototype.subscribeTopic=function e(t,r){return this.rpcCall(e,i.com.hedera.mirror.api.proto.ConsensusTopicQuery,i.com.hedera.mirror.api.proto.ConsensusTopicResponse,t,r)},"name",{value:"subscribeTopic"}),t}(),t.AddressBookQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.fileId=null,e.prototype.limit=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fileId&&Object.hasOwnProperty.call(e,"fileId")&&i.proto.FileID.encode(e.fileId,t.uint32(10).fork()).ldelim(),null!=e.limit&&Object.hasOwnProperty.call(e,"limit")&&t.uint32(16).int32(e.limit),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.mirror.api.proto.AddressBookQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.fileId=i.proto.FileID.decode(e,e.uint32());break;case 2:o.limit=e.int32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.mirror.api.proto.AddressBookQuery"},e}(),t.NetworkService=function(){function t(t,r,n){e.rpc.Service.call(this,t,r,n)}return(t.prototype=Object.create(e.rpc.Service.prototype)).constructor=t,t.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(t.prototype.getNodes=function e(t,r){return this.rpcCall(e,i.com.hedera.mirror.api.proto.AddressBookQuery,i.proto.NodeAddress,t,r)},"name",{value:"getNodes"}),t}(),t}(),t}(),t}(),t.hapi=function(){const e={};return e.node=function(){const e={};return e.addressbook=function(){const e={};return e.NodeCreateTransactionBody=function(){function e(e){if(this.gossipEndpoint=[],this.serviceEndpoint=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.accountId=null,e.prototype.description="",e.prototype.gossipEndpoint=o.emptyArray,e.prototype.serviceEndpoint=o.emptyArray,e.prototype.gossipCaCertificate=o.newBuffer([]),e.prototype.grpcCertificateHash=o.newBuffer([]),e.prototype.adminKey=null,e.prototype.declineReward=!1,e.prototype.grpcProxyEndpoint=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.accountId&&Object.hasOwnProperty.call(e,"accountId")&&i.proto.AccountID.encode(e.accountId,t.uint32(10).fork()).ldelim(),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(18).string(e.description),null!=e.gossipEndpoint&&e.gossipEndpoint.length)for(var r=0;r<e.gossipEndpoint.length;++r)i.proto.ServiceEndpoint.encode(e.gossipEndpoint[r],t.uint32(26).fork()).ldelim();if(null!=e.serviceEndpoint&&e.serviceEndpoint.length)for(r=0;r<e.serviceEndpoint.length;++r)i.proto.ServiceEndpoint.encode(e.serviceEndpoint[r],t.uint32(34).fork()).ldelim();return null!=e.gossipCaCertificate&&Object.hasOwnProperty.call(e,"gossipCaCertificate")&&t.uint32(42).bytes(e.gossipCaCertificate),null!=e.grpcCertificateHash&&Object.hasOwnProperty.call(e,"grpcCertificateHash")&&t.uint32(50).bytes(e.grpcCertificateHash),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(58).fork()).ldelim(),null!=e.declineReward&&Object.hasOwnProperty.call(e,"declineReward")&&t.uint32(64).bool(e.declineReward),null!=e.grpcProxyEndpoint&&Object.hasOwnProperty.call(e,"grpcProxyEndpoint")&&i.proto.ServiceEndpoint.encode(e.grpcProxyEndpoint,t.uint32(74).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.addressbook.NodeCreateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.accountId=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.description=e.string();break;case 3:o.gossipEndpoint&&o.gossipEndpoint.length||(o.gossipEndpoint=[]),o.gossipEndpoint.push(i.proto.ServiceEndpoint.decode(e,e.uint32()));break;case 4:o.serviceEndpoint&&o.serviceEndpoint.length||(o.serviceEndpoint=[]),o.serviceEndpoint.push(i.proto.ServiceEndpoint.decode(e,e.uint32()));break;case 5:o.gossipCaCertificate=e.bytes();break;case 6:o.grpcCertificateHash=e.bytes();break;case 7:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 8:o.declineReward=e.bool();break;case 9:o.grpcProxyEndpoint=i.proto.ServiceEndpoint.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.addressbook.NodeCreateTransactionBody"},e}(),e.NodeUpdateTransactionBody=function(){function e(e){if(this.gossipEndpoint=[],this.serviceEndpoint=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nodeId=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.accountId=null,e.prototype.description=null,e.prototype.gossipEndpoint=o.emptyArray,e.prototype.serviceEndpoint=o.emptyArray,e.prototype.gossipCaCertificate=null,e.prototype.grpcCertificateHash=null,e.prototype.adminKey=null,e.prototype.declineReward=null,e.prototype.grpcProxyEndpoint=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.nodeId&&Object.hasOwnProperty.call(e,"nodeId")&&t.uint32(8).uint64(e.nodeId),null!=e.accountId&&Object.hasOwnProperty.call(e,"accountId")&&i.proto.AccountID.encode(e.accountId,t.uint32(18).fork()).ldelim(),null!=e.description&&Object.hasOwnProperty.call(e,"description")&&i.google.protobuf.StringValue.encode(e.description,t.uint32(26).fork()).ldelim(),null!=e.gossipEndpoint&&e.gossipEndpoint.length)for(var r=0;r<e.gossipEndpoint.length;++r)i.proto.ServiceEndpoint.encode(e.gossipEndpoint[r],t.uint32(34).fork()).ldelim();if(null!=e.serviceEndpoint&&e.serviceEndpoint.length)for(r=0;r<e.serviceEndpoint.length;++r)i.proto.ServiceEndpoint.encode(e.serviceEndpoint[r],t.uint32(42).fork()).ldelim();return null!=e.gossipCaCertificate&&Object.hasOwnProperty.call(e,"gossipCaCertificate")&&i.google.protobuf.BytesValue.encode(e.gossipCaCertificate,t.uint32(50).fork()).ldelim(),null!=e.grpcCertificateHash&&Object.hasOwnProperty.call(e,"grpcCertificateHash")&&i.google.protobuf.BytesValue.encode(e.grpcCertificateHash,t.uint32(58).fork()).ldelim(),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(66).fork()).ldelim(),null!=e.declineReward&&Object.hasOwnProperty.call(e,"declineReward")&&i.google.protobuf.BoolValue.encode(e.declineReward,t.uint32(74).fork()).ldelim(),null!=e.grpcProxyEndpoint&&Object.hasOwnProperty.call(e,"grpcProxyEndpoint")&&i.proto.ServiceEndpoint.encode(e.grpcProxyEndpoint,t.uint32(82).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.addressbook.NodeUpdateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.nodeId=e.uint64();break;case 2:o.accountId=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.description=i.google.protobuf.StringValue.decode(e,e.uint32());break;case 4:o.gossipEndpoint&&o.gossipEndpoint.length||(o.gossipEndpoint=[]),o.gossipEndpoint.push(i.proto.ServiceEndpoint.decode(e,e.uint32()));break;case 5:o.serviceEndpoint&&o.serviceEndpoint.length||(o.serviceEndpoint=[]),o.serviceEndpoint.push(i.proto.ServiceEndpoint.decode(e,e.uint32()));break;case 6:o.gossipCaCertificate=i.google.protobuf.BytesValue.decode(e,e.uint32());break;case 7:o.grpcCertificateHash=i.google.protobuf.BytesValue.decode(e,e.uint32());break;case 8:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 9:o.declineReward=i.google.protobuf.BoolValue.decode(e,e.uint32());break;case 10:o.grpcProxyEndpoint=i.proto.ServiceEndpoint.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.addressbook.NodeUpdateTransactionBody"},e}(),e.NodeDeleteTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nodeId=o.Long?o.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.nodeId&&Object.hasOwnProperty.call(e,"nodeId")&&t.uint32(8).uint64(e.nodeId),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.addressbook.NodeDeleteTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.nodeId=e.uint64();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.addressbook.NodeDeleteTransactionBody"},e}(),e}(),e.state=function(){const e={};return e.hints=function(){const e={};return e.HintsPartyId=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.partyId=0,e.prototype.numParties=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.partyId&&Object.hasOwnProperty.call(e,"partyId")&&t.uint32(8).uint32(e.partyId),null!=e.numParties&&Object.hasOwnProperty.call(e,"numParties")&&t.uint32(16).uint32(e.numParties),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.hints.HintsPartyId;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.partyId=e.uint32();break;case 2:o.numParties=e.uint32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.hints.HintsPartyId"},e}(),e.HintsKeySet=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nodeId=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.adoptionTime=null,e.prototype.key=o.newBuffer([]),e.prototype.nextKey=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.nodeId&&Object.hasOwnProperty.call(e,"nodeId")&&t.uint32(8).uint64(e.nodeId),null!=e.adoptionTime&&Object.hasOwnProperty.call(e,"adoptionTime")&&i.proto.Timestamp.encode(e.adoptionTime,t.uint32(18).fork()).ldelim(),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(26).bytes(e.key),null!=e.nextKey&&Object.hasOwnProperty.call(e,"nextKey")&&t.uint32(34).bytes(e.nextKey),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.hints.HintsKeySet;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.nodeId=e.uint64();break;case 2:o.adoptionTime=i.proto.Timestamp.decode(e,e.uint32());break;case 3:o.key=e.bytes();break;case 4:o.nextKey=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.hints.HintsKeySet"},e}(),e.PreprocessedKeys=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.aggregationKey=o.newBuffer([]),e.prototype.verificationKey=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.aggregationKey&&Object.hasOwnProperty.call(e,"aggregationKey")&&t.uint32(10).bytes(e.aggregationKey),null!=e.verificationKey&&Object.hasOwnProperty.call(e,"verificationKey")&&t.uint32(18).bytes(e.verificationKey),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.hints.PreprocessedKeys;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.aggregationKey=e.bytes();break;case 2:o.verificationKey=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.hints.PreprocessedKeys"},e}(),e.PreprocessingVoteId=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.constructionId=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.nodeId=o.Long?o.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.constructionId&&Object.hasOwnProperty.call(e,"constructionId")&&t.uint32(8).uint64(e.constructionId),null!=e.nodeId&&Object.hasOwnProperty.call(e,"nodeId")&&t.uint32(16).uint64(e.nodeId),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.hints.PreprocessingVoteId;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.constructionId=e.uint64();break;case 2:o.nodeId=e.uint64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.hints.PreprocessingVoteId"},e}(),e.PreprocessingVote=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.preprocessedKeys=null,e.prototype.congruentNodeId=null,Object.defineProperty(e.prototype,"vote",{get:o.oneOfGetter(t=["preprocessedKeys","congruentNodeId"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.preprocessedKeys&&Object.hasOwnProperty.call(e,"preprocessedKeys")&&i.com.hedera.hapi.node.state.hints.PreprocessedKeys.encode(e.preprocessedKeys,t.uint32(10).fork()).ldelim(),null!=e.congruentNodeId&&Object.hasOwnProperty.call(e,"congruentNodeId")&&t.uint32(16).uint64(e.congruentNodeId),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.hints.PreprocessingVote;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.preprocessedKeys=i.com.hedera.hapi.node.state.hints.PreprocessedKeys.decode(e,e.uint32());break;case 2:o.congruentNodeId=e.uint64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.hints.PreprocessingVote"},e}(),e.NodePartyId=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nodeId=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.partyId=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.nodeId&&Object.hasOwnProperty.call(e,"nodeId")&&t.uint32(8).uint64(e.nodeId),null!=e.partyId&&Object.hasOwnProperty.call(e,"partyId")&&t.uint32(16).uint32(e.partyId),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.hints.NodePartyId;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.nodeId=e.uint64();break;case 2:o.partyId=e.uint32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.hints.NodePartyId"},e}(),e.HintsScheme=function(){function e(e){if(this.nodePartyIds=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.preprocessedKeys=null,e.prototype.nodePartyIds=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.preprocessedKeys&&Object.hasOwnProperty.call(e,"preprocessedKeys")&&i.com.hedera.hapi.node.state.hints.PreprocessedKeys.encode(e.preprocessedKeys,t.uint32(10).fork()).ldelim(),null!=e.nodePartyIds&&e.nodePartyIds.length)for(var r=0;r<e.nodePartyIds.length;++r)i.com.hedera.hapi.node.state.hints.NodePartyId.encode(e.nodePartyIds[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.hints.HintsScheme;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.preprocessedKeys=i.com.hedera.hapi.node.state.hints.PreprocessedKeys.decode(e,e.uint32());break;case 2:o.nodePartyIds&&o.nodePartyIds.length||(o.nodePartyIds=[]),o.nodePartyIds.push(i.com.hedera.hapi.node.state.hints.NodePartyId.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.hints.HintsScheme"},e}(),e.HintsConstruction=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.constructionId=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.sourceRosterHash=o.newBuffer([]),e.prototype.targetRosterHash=o.newBuffer([]),e.prototype.gracePeriodEndTime=null,e.prototype.preprocessingStartTime=null,e.prototype.hintsScheme=null,Object.defineProperty(e.prototype,"preprocessingState",{get:o.oneOfGetter(t=["gracePeriodEndTime","preprocessingStartTime","hintsScheme"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.constructionId&&Object.hasOwnProperty.call(e,"constructionId")&&t.uint32(8).uint64(e.constructionId),null!=e.sourceRosterHash&&Object.hasOwnProperty.call(e,"sourceRosterHash")&&t.uint32(18).bytes(e.sourceRosterHash),null!=e.targetRosterHash&&Object.hasOwnProperty.call(e,"targetRosterHash")&&t.uint32(26).bytes(e.targetRosterHash),null!=e.gracePeriodEndTime&&Object.hasOwnProperty.call(e,"gracePeriodEndTime")&&i.proto.Timestamp.encode(e.gracePeriodEndTime,t.uint32(34).fork()).ldelim(),null!=e.preprocessingStartTime&&Object.hasOwnProperty.call(e,"preprocessingStartTime")&&i.proto.Timestamp.encode(e.preprocessingStartTime,t.uint32(42).fork()).ldelim(),null!=e.hintsScheme&&Object.hasOwnProperty.call(e,"hintsScheme")&&i.com.hedera.hapi.node.state.hints.HintsScheme.encode(e.hintsScheme,t.uint32(50).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.hints.HintsConstruction;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.constructionId=e.uint64();break;case 2:o.sourceRosterHash=e.bytes();break;case 3:o.targetRosterHash=e.bytes();break;case 4:o.gracePeriodEndTime=i.proto.Timestamp.decode(e,e.uint32());break;case 5:o.preprocessingStartTime=i.proto.Timestamp.decode(e,e.uint32());break;case 6:o.hintsScheme=i.com.hedera.hapi.node.state.hints.HintsScheme.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.hints.HintsConstruction"},e}(),e.CRSStage=function(){const e={},t=Object.create(e);return t[e[0]="GATHERING_CONTRIBUTIONS"]=0,t[e[1]="WAITING_FOR_ADOPTING_FINAL_CRS"]=1,t[e[2]="COMPLETED"]=2,t}(),e.CRSState=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.crs=o.newBuffer([]),e.prototype.stage=0,e.prototype.nextContributingNodeId=null,e.prototype.contributionEndTime=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.crs&&Object.hasOwnProperty.call(e,"crs")&&t.uint32(10).bytes(e.crs),null!=e.stage&&Object.hasOwnProperty.call(e,"stage")&&t.uint32(16).int32(e.stage),null!=e.nextContributingNodeId&&Object.hasOwnProperty.call(e,"nextContributingNodeId")&&i.google.protobuf.UInt64Value.encode(e.nextContributingNodeId,t.uint32(26).fork()).ldelim(),null!=e.contributionEndTime&&Object.hasOwnProperty.call(e,"contributionEndTime")&&i.proto.Timestamp.encode(e.contributionEndTime,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.hints.CRSState;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.crs=e.bytes();break;case 2:o.stage=e.int32();break;case 3:o.nextContributingNodeId=i.google.protobuf.UInt64Value.decode(e,e.uint32());break;case 4:o.contributionEndTime=i.proto.Timestamp.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.hints.CRSState"},e}(),e}(),e.history=function(){const e={};return e.ProofKeySet=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.adoptionTime=null,e.prototype.key=o.newBuffer([]),e.prototype.nextKey=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.adoptionTime&&Object.hasOwnProperty.call(e,"adoptionTime")&&i.proto.Timestamp.encode(e.adoptionTime,t.uint32(18).fork()).ldelim(),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(26).bytes(e.key),null!=e.nextKey&&Object.hasOwnProperty.call(e,"nextKey")&&t.uint32(34).bytes(e.nextKey),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.history.ProofKeySet;e.pos<n;){var s=e.uint32();switch(s>>>3){case 2:o.adoptionTime=i.proto.Timestamp.decode(e,e.uint32());break;case 3:o.key=e.bytes();break;case 4:o.nextKey=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.history.ProofKeySet"},e}(),e.ProofKey=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nodeId=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.key=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.nodeId&&Object.hasOwnProperty.call(e,"nodeId")&&t.uint32(8).uint64(e.nodeId),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(18).bytes(e.key),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.history.ProofKey;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.nodeId=e.uint64();break;case 2:o.key=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.history.ProofKey"},e}(),e.History=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.addressBookHash=o.newBuffer([]),e.prototype.metadata=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.addressBookHash&&Object.hasOwnProperty.call(e,"addressBookHash")&&t.uint32(10).bytes(e.addressBookHash),null!=e.metadata&&Object.hasOwnProperty.call(e,"metadata")&&t.uint32(18).bytes(e.metadata),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.history.History;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.addressBookHash=e.bytes();break;case 2:o.metadata=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.history.History"},e}(),e.HistoryProof=function(){function e(e){if(this.targetProofKeys=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sourceAddressBookHash=o.newBuffer([]),e.prototype.targetProofKeys=o.emptyArray,e.prototype.targetHistory=null,e.prototype.proof=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.sourceAddressBookHash&&Object.hasOwnProperty.call(e,"sourceAddressBookHash")&&t.uint32(10).bytes(e.sourceAddressBookHash),null!=e.targetProofKeys&&e.targetProofKeys.length)for(var r=0;r<e.targetProofKeys.length;++r)i.com.hedera.hapi.node.state.history.ProofKey.encode(e.targetProofKeys[r],t.uint32(18).fork()).ldelim();return null!=e.targetHistory&&Object.hasOwnProperty.call(e,"targetHistory")&&i.com.hedera.hapi.node.state.history.History.encode(e.targetHistory,t.uint32(26).fork()).ldelim(),null!=e.proof&&Object.hasOwnProperty.call(e,"proof")&&t.uint32(34).bytes(e.proof),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.history.HistoryProof;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.sourceAddressBookHash=e.bytes();break;case 2:o.targetProofKeys&&o.targetProofKeys.length||(o.targetProofKeys=[]),o.targetProofKeys.push(i.com.hedera.hapi.node.state.history.ProofKey.decode(e,e.uint32()));break;case 3:o.targetHistory=i.com.hedera.hapi.node.state.history.History.decode(e,e.uint32());break;case 4:o.proof=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.history.HistoryProof"},e}(),e.HistoryProofConstruction=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.constructionId=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.sourceRosterHash=o.newBuffer([]),e.prototype.sourceProof=null,e.prototype.targetRosterHash=o.newBuffer([]),e.prototype.gracePeriodEndTime=null,e.prototype.assemblyStartTime=null,e.prototype.targetProof=null,e.prototype.failureReason=null,Object.defineProperty(e.prototype,"proofState",{get:o.oneOfGetter(t=["gracePeriodEndTime","assemblyStartTime","targetProof","failureReason"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.constructionId&&Object.hasOwnProperty.call(e,"constructionId")&&t.uint32(8).uint64(e.constructionId),null!=e.sourceRosterHash&&Object.hasOwnProperty.call(e,"sourceRosterHash")&&t.uint32(18).bytes(e.sourceRosterHash),null!=e.sourceProof&&Object.hasOwnProperty.call(e,"sourceProof")&&i.com.hedera.hapi.node.state.history.HistoryProof.encode(e.sourceProof,t.uint32(26).fork()).ldelim(),null!=e.targetRosterHash&&Object.hasOwnProperty.call(e,"targetRosterHash")&&t.uint32(34).bytes(e.targetRosterHash),null!=e.gracePeriodEndTime&&Object.hasOwnProperty.call(e,"gracePeriodEndTime")&&i.proto.Timestamp.encode(e.gracePeriodEndTime,t.uint32(42).fork()).ldelim(),null!=e.assemblyStartTime&&Object.hasOwnProperty.call(e,"assemblyStartTime")&&i.proto.Timestamp.encode(e.assemblyStartTime,t.uint32(50).fork()).ldelim(),null!=e.targetProof&&Object.hasOwnProperty.call(e,"targetProof")&&i.com.hedera.hapi.node.state.history.HistoryProof.encode(e.targetProof,t.uint32(58).fork()).ldelim(),null!=e.failureReason&&Object.hasOwnProperty.call(e,"failureReason")&&t.uint32(66).string(e.failureReason),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.history.HistoryProofConstruction;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.constructionId=e.uint64();break;case 2:o.sourceRosterHash=e.bytes();break;case 3:o.sourceProof=i.com.hedera.hapi.node.state.history.HistoryProof.decode(e,e.uint32());break;case 4:o.targetRosterHash=e.bytes();break;case 5:o.gracePeriodEndTime=i.proto.Timestamp.decode(e,e.uint32());break;case 6:o.assemblyStartTime=i.proto.Timestamp.decode(e,e.uint32());break;case 7:o.targetProof=i.com.hedera.hapi.node.state.history.HistoryProof.decode(e,e.uint32());break;case 8:o.failureReason=e.string();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.history.HistoryProofConstruction"},e}(),e.ConstructionNodeId=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.constructionId=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.nodeId=o.Long?o.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.constructionId&&Object.hasOwnProperty.call(e,"constructionId")&&t.uint32(8).uint64(e.constructionId),null!=e.nodeId&&Object.hasOwnProperty.call(e,"nodeId")&&t.uint32(16).uint64(e.nodeId),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.history.ConstructionNodeId;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.constructionId=e.uint64();break;case 2:o.nodeId=e.uint64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.history.ConstructionNodeId"},e}(),e.HistoryProofVote=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.proof=null,e.prototype.congruentNodeId=null,Object.defineProperty(e.prototype,"vote",{get:o.oneOfGetter(t=["proof","congruentNodeId"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.proof&&Object.hasOwnProperty.call(e,"proof")&&i.com.hedera.hapi.node.state.history.HistoryProof.encode(e.proof,t.uint32(10).fork()).ldelim(),null!=e.congruentNodeId&&Object.hasOwnProperty.call(e,"congruentNodeId")&&t.uint32(16).uint64(e.congruentNodeId),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.history.HistoryProofVote;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.proof=i.com.hedera.hapi.node.state.history.HistoryProof.decode(e,e.uint32());break;case 2:o.congruentNodeId=e.uint64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.history.HistoryProofVote"},e}(),e.HistorySignature=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.history=null,e.prototype.signature=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.history&&Object.hasOwnProperty.call(e,"history")&&i.com.hedera.hapi.node.state.history.History.encode(e.history,t.uint32(10).fork()).ldelim(),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(18).bytes(e.signature),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.history.HistorySignature;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.history=i.com.hedera.hapi.node.state.history.History.decode(e,e.uint32());break;case 2:o.signature=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.history.HistorySignature"},e}(),e.RecordedHistorySignature=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.signingTime=null,e.prototype.historySignature=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.signingTime&&Object.hasOwnProperty.call(e,"signingTime")&&i.proto.Timestamp.encode(e.signingTime,t.uint32(10).fork()).ldelim(),null!=e.historySignature&&Object.hasOwnProperty.call(e,"historySignature")&&i.com.hedera.hapi.node.state.history.HistorySignature.encode(e.historySignature,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.node.state.history.RecordedHistorySignature;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.signingTime=i.proto.Timestamp.decode(e,e.uint32());break;case 2:o.historySignature=i.com.hedera.hapi.node.state.history.HistorySignature.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.node.state.history.RecordedHistorySignature"},e}(),e}(),e}(),e}(),e.services=function(){const e={};return e.auxiliary=function(){const e={};return e.hints=function(){const e={};return e.HintsKeyPublicationTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.partyId=0,e.prototype.numParties=0,e.prototype.hintsKey=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.partyId&&Object.hasOwnProperty.call(e,"partyId")&&t.uint32(8).uint32(e.partyId),null!=e.numParties&&Object.hasOwnProperty.call(e,"numParties")&&t.uint32(16).uint32(e.numParties),null!=e.hintsKey&&Object.hasOwnProperty.call(e,"hintsKey")&&t.uint32(26).bytes(e.hintsKey),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.services.auxiliary.hints.HintsKeyPublicationTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.partyId=e.uint32();break;case 2:o.numParties=e.uint32();break;case 3:o.hintsKey=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.services.auxiliary.hints.HintsKeyPublicationTransactionBody"},e}(),e.HintsPreprocessingVoteTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.constructionId=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.vote=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.constructionId&&Object.hasOwnProperty.call(e,"constructionId")&&t.uint32(8).uint64(e.constructionId),null!=e.vote&&Object.hasOwnProperty.call(e,"vote")&&i.com.hedera.hapi.node.state.hints.PreprocessingVote.encode(e.vote,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.services.auxiliary.hints.HintsPreprocessingVoteTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.constructionId=e.uint64();break;case 2:o.vote=i.com.hedera.hapi.node.state.hints.PreprocessingVote.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.services.auxiliary.hints.HintsPreprocessingVoteTransactionBody"},e}(),e.HintsPartialSignatureTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.constructionId=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.message=o.newBuffer([]),e.prototype.partialSignature=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.constructionId&&Object.hasOwnProperty.call(e,"constructionId")&&t.uint32(8).uint64(e.constructionId),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).bytes(e.message),null!=e.partialSignature&&Object.hasOwnProperty.call(e,"partialSignature")&&t.uint32(26).bytes(e.partialSignature),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.services.auxiliary.hints.HintsPartialSignatureTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.constructionId=e.uint64();break;case 2:o.message=e.bytes();break;case 3:o.partialSignature=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.services.auxiliary.hints.HintsPartialSignatureTransactionBody"},e}(),e.CrsPublicationTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.newCrs=o.newBuffer([]),e.prototype.proof=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.newCrs&&Object.hasOwnProperty.call(e,"newCrs")&&t.uint32(10).bytes(e.newCrs),null!=e.proof&&Object.hasOwnProperty.call(e,"proof")&&t.uint32(18).bytes(e.proof),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.services.auxiliary.hints.CrsPublicationTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.newCrs=e.bytes();break;case 2:o.proof=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.services.auxiliary.hints.CrsPublicationTransactionBody"},e}(),e}(),e.history=function(){const e={};return e.HistoryProofSignatureTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.constructionId=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.signature=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.constructionId&&Object.hasOwnProperty.call(e,"constructionId")&&t.uint32(8).uint64(e.constructionId),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&i.com.hedera.hapi.node.state.history.HistorySignature.encode(e.signature,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.services.auxiliary.history.HistoryProofSignatureTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.constructionId=e.uint64();break;case 2:o.signature=i.com.hedera.hapi.node.state.history.HistorySignature.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.services.auxiliary.history.HistoryProofSignatureTransactionBody"},e}(),e.HistoryProofKeyPublicationTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.proofKey=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.proofKey&&Object.hasOwnProperty.call(e,"proofKey")&&t.uint32(10).bytes(e.proofKey),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.services.auxiliary.history.HistoryProofKeyPublicationTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.proofKey=e.bytes();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.services.auxiliary.history.HistoryProofKeyPublicationTransactionBody"},e}(),e.HistoryProofVoteTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.constructionId=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.vote=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.constructionId&&Object.hasOwnProperty.call(e,"constructionId")&&t.uint32(8).uint64(e.constructionId),null!=e.vote&&Object.hasOwnProperty.call(e,"vote")&&i.com.hedera.hapi.node.state.history.HistoryProofVote.encode(e.vote,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.services.auxiliary.history.HistoryProofVoteTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.constructionId=e.uint64();break;case 2:o.vote=i.com.hedera.hapi.node.state.history.HistoryProofVote.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.services.auxiliary.history.HistoryProofVoteTransactionBody"},e}(),e}(),e}(),e}(),e.platform=function(){const e={};return e.event=function(){const e={};return e.EventConsensusData=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.consensusTimestamp=null,e.prototype.consensusOrder=o.Long?o.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.consensusTimestamp&&Object.hasOwnProperty.call(e,"consensusTimestamp")&&i.proto.Timestamp.encode(e.consensusTimestamp,t.uint32(10).fork()).ldelim(),null!=e.consensusOrder&&Object.hasOwnProperty.call(e,"consensusOrder")&&t.uint32(16).uint64(e.consensusOrder),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.platform.event.EventConsensusData;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.consensusTimestamp=i.proto.Timestamp.decode(e,e.uint32());break;case 2:o.consensusOrder=e.uint64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.platform.event.EventConsensusData"},e}(),e.EventCore=function(){function e(e){if(this.parents=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.creatorNodeId=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.birthRound=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.timeCreated=null,e.prototype.parents=o.emptyArray,e.prototype.version=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.creatorNodeId&&Object.hasOwnProperty.call(e,"creatorNodeId")&&t.uint32(8).int64(e.creatorNodeId),null!=e.birthRound&&Object.hasOwnProperty.call(e,"birthRound")&&t.uint32(16).int64(e.birthRound),null!=e.timeCreated&&Object.hasOwnProperty.call(e,"timeCreated")&&i.proto.Timestamp.encode(e.timeCreated,t.uint32(26).fork()).ldelim(),null!=e.parents&&e.parents.length)for(var r=0;r<e.parents.length;++r)i.com.hedera.hapi.platform.event.EventDescriptor.encode(e.parents[r],t.uint32(34).fork()).ldelim();return null!=e.version&&Object.hasOwnProperty.call(e,"version")&&i.proto.SemanticVersion.encode(e.version,t.uint32(138).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.platform.event.EventCore;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.creatorNodeId=e.int64();break;case 2:o.birthRound=e.int64();break;case 3:o.timeCreated=i.proto.Timestamp.decode(e,e.uint32());break;case 4:o.parents&&o.parents.length||(o.parents=[]),o.parents.push(i.com.hedera.hapi.platform.event.EventDescriptor.decode(e,e.uint32()));break;case 17:o.version=i.proto.SemanticVersion.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.platform.event.EventCore"},e}(),e.EventDescriptor=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.hash=o.newBuffer([]),e.prototype.creatorNodeId=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.birthRound=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.generation=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(10).bytes(e.hash),null!=e.creatorNodeId&&Object.hasOwnProperty.call(e,"creatorNodeId")&&t.uint32(16).int64(e.creatorNodeId),null!=e.birthRound&&Object.hasOwnProperty.call(e,"birthRound")&&t.uint32(24).int64(e.birthRound),null!=e.generation&&Object.hasOwnProperty.call(e,"generation")&&t.uint32(136).int64(e.generation),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.platform.event.EventDescriptor;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.hash=e.bytes();break;case 2:o.creatorNodeId=e.int64();break;case 3:o.birthRound=e.int64();break;case 17:o.generation=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.platform.event.EventDescriptor"},e}(),e.TransactionGroupRole=function(){const e={},t=Object.create(e);return t[e[0]="STANDALONE"]=0,t[e[1]="FIRST_CHILD"]=1,t[e[2]="MIDDLE_CHILD"]=2,t[e[3]="LAST_CHILD"]=3,t[e[4]="STARTING_PARENT"]=4,t[e[5]="PARENT"]=5,t[e[6]="ENDING_PARENT"]=6,t}(),e.EventTransaction=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.applicationTransaction=null,e.prototype.stateSignatureTransaction=null,e.prototype.transactionGroupRole=0,Object.defineProperty(e.prototype,"transaction",{get:o.oneOfGetter(t=["applicationTransaction","stateSignatureTransaction"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.applicationTransaction&&Object.hasOwnProperty.call(e,"applicationTransaction")&&t.uint32(10).bytes(e.applicationTransaction),null!=e.stateSignatureTransaction&&Object.hasOwnProperty.call(e,"stateSignatureTransaction")&&i.com.hedera.hapi.platform.event.StateSignatureTransaction.encode(e.stateSignatureTransaction,t.uint32(18).fork()).ldelim(),null!=e.transactionGroupRole&&Object.hasOwnProperty.call(e,"transactionGroupRole")&&t.uint32(24).int32(e.transactionGroupRole),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.platform.event.EventTransaction;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.applicationTransaction=e.bytes();break;case 2:o.stateSignatureTransaction=i.com.hedera.hapi.platform.event.StateSignatureTransaction.decode(e,e.uint32());break;case 3:o.transactionGroupRole=e.int32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.platform.event.EventTransaction"},e}(),e.GossipEvent=function(){function e(e){if(this.transactions=[],this.parents=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.eventCore=null,e.prototype.signature=o.newBuffer([]),e.prototype.transactions=o.emptyArray,e.prototype.parents=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.eventCore&&Object.hasOwnProperty.call(e,"eventCore")&&i.com.hedera.hapi.platform.event.EventCore.encode(e.eventCore,t.uint32(10).fork()).ldelim(),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(18).bytes(e.signature),null!=e.transactions&&e.transactions.length)for(var r=0;r<e.transactions.length;++r)t.uint32(34).bytes(e.transactions[r]);if(null!=e.parents&&e.parents.length)for(r=0;r<e.parents.length;++r)i.com.hedera.hapi.platform.event.EventDescriptor.encode(e.parents[r],t.uint32(42).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.platform.event.GossipEvent;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.eventCore=i.com.hedera.hapi.platform.event.EventCore.decode(e,e.uint32());break;case 2:o.signature=e.bytes();break;case 4:o.transactions&&o.transactions.length||(o.transactions=[]),o.transactions.push(e.bytes());break;case 5:o.parents&&o.parents.length||(o.parents=[]),o.parents.push(i.com.hedera.hapi.platform.event.EventDescriptor.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.platform.event.GossipEvent"},e}(),e.StateSignatureTransaction=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.round=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.signature=o.newBuffer([]),e.prototype.hash=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.round&&Object.hasOwnProperty.call(e,"round")&&t.uint32(8).int64(e.round),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(18).bytes(e.signature),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(26).bytes(e.hash),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.com.hedera.hapi.platform.event.StateSignatureTransaction;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.round=e.int64();break;case 2:o.signature=e.bytes();break;case 3:o.hash=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/com.hedera.hapi.platform.event.StateSignatureTransaction"},e}(),e}(),e}(),e}(),t}(),t})();proto.com=s;const a=i.proto=(()=>{const t={};return t.TransactionList=function(){function e(e){if(this.transactionList=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.transactionList=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.transactionList&&e.transactionList.length)for(var r=0;r<e.transactionList.length;++r)i.proto.Transaction.encode(e.transactionList[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionList;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.transactionList&&o.transactionList.length||(o.transactionList=[]),o.transactionList.push(i.proto.Transaction.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionList"},e}(),t.AddressBookService=function(){function t(t,r,n){e.rpc.Service.call(this,t,r,n)}return(t.prototype=Object.create(e.rpc.Service.prototype)).constructor=t,t.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(t.prototype.createNode=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"createNode"}),Object.defineProperty(t.prototype.deleteNode=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"deleteNode"}),Object.defineProperty(t.prototype.updateNode=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"updateNode"}),t}(),t.TransactionResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nodeTransactionPrecheckCode=0,e.prototype.cost=o.Long?o.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.nodeTransactionPrecheckCode&&Object.hasOwnProperty.call(e,"nodeTransactionPrecheckCode")&&t.uint32(8).int32(e.nodeTransactionPrecheckCode),null!=e.cost&&Object.hasOwnProperty.call(e,"cost")&&t.uint32(16).uint64(e.cost),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.nodeTransactionPrecheckCode=e.int32();break;case 2:o.cost=e.uint64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionResponse"},e}(),t.ResponseCodeEnum=function(){const e={},t=Object.create(e);return t[e[0]="OK"]=0,t[e[1]="INVALID_TRANSACTION"]=1,t[e[2]="PAYER_ACCOUNT_NOT_FOUND"]=2,t[e[3]="INVALID_NODE_ACCOUNT"]=3,t[e[4]="TRANSACTION_EXPIRED"]=4,t[e[5]="INVALID_TRANSACTION_START"]=5,t[e[6]="INVALID_TRANSACTION_DURATION"]=6,t[e[7]="INVALID_SIGNATURE"]=7,t[e[8]="MEMO_TOO_LONG"]=8,t[e[9]="INSUFFICIENT_TX_FEE"]=9,t[e[10]="INSUFFICIENT_PAYER_BALANCE"]=10,t[e[11]="DUPLICATE_TRANSACTION"]=11,t[e[12]="BUSY"]=12,t[e[13]="NOT_SUPPORTED"]=13,t[e[14]="INVALID_FILE_ID"]=14,t[e[15]="INVALID_ACCOUNT_ID"]=15,t[e[16]="INVALID_CONTRACT_ID"]=16,t[e[17]="INVALID_TRANSACTION_ID"]=17,t[e[18]="RECEIPT_NOT_FOUND"]=18,t[e[19]="RECORD_NOT_FOUND"]=19,t[e[20]="INVALID_SOLIDITY_ID"]=20,t[e[21]="UNKNOWN"]=21,t[e[22]="SUCCESS"]=22,t[e[23]="FAIL_INVALID"]=23,t[e[24]="FAIL_FEE"]=24,t[e[25]="FAIL_BALANCE"]=25,t[e[26]="KEY_REQUIRED"]=26,t[e[27]="BAD_ENCODING"]=27,t[e[28]="INSUFFICIENT_ACCOUNT_BALANCE"]=28,t[e[29]="INVALID_SOLIDITY_ADDRESS"]=29,t[e[30]="INSUFFICIENT_GAS"]=30,t[e[31]="CONTRACT_SIZE_LIMIT_EXCEEDED"]=31,t[e[32]="LOCAL_CALL_MODIFICATION_EXCEPTION"]=32,t[e[33]="CONTRACT_REVERT_EXECUTED"]=33,t[e[34]="CONTRACT_EXECUTION_EXCEPTION"]=34,t[e[35]="INVALID_RECEIVING_NODE_ACCOUNT"]=35,t[e[36]="MISSING_QUERY_HEADER"]=36,t[e[37]="ACCOUNT_UPDATE_FAILED"]=37,t[e[38]="INVALID_KEY_ENCODING"]=38,t[e[39]="NULL_SOLIDITY_ADDRESS"]=39,t[e[40]="CONTRACT_UPDATE_FAILED"]=40,t[e[41]="INVALID_QUERY_HEADER"]=41,t[e[42]="INVALID_FEE_SUBMITTED"]=42,t[e[43]="INVALID_PAYER_SIGNATURE"]=43,t[e[44]="KEY_NOT_PROVIDED"]=44,t[e[45]="INVALID_EXPIRATION_TIME"]=45,t[e[46]="NO_WACL_KEY"]=46,t[e[47]="FILE_CONTENT_EMPTY"]=47,t[e[48]="INVALID_ACCOUNT_AMOUNTS"]=48,t[e[49]="EMPTY_TRANSACTION_BODY"]=49,t[e[50]="INVALID_TRANSACTION_BODY"]=50,t[e[51]="INVALID_SIGNATURE_TYPE_MISMATCHING_KEY"]=51,t[e[52]="INVALID_SIGNATURE_COUNT_MISMATCHING_KEY"]=52,t[e[53]="EMPTY_LIVE_HASH_BODY"]=53,t[e[54]="EMPTY_LIVE_HASH"]=54,t[e[55]="EMPTY_LIVE_HASH_KEYS"]=55,t[e[56]="INVALID_LIVE_HASH_SIZE"]=56,t[e[57]="EMPTY_QUERY_BODY"]=57,t[e[58]="EMPTY_LIVE_HASH_QUERY"]=58,t[e[59]="LIVE_HASH_NOT_FOUND"]=59,t[e[60]="ACCOUNT_ID_DOES_NOT_EXIST"]=60,t[e[61]="LIVE_HASH_ALREADY_EXISTS"]=61,t[e[62]="INVALID_FILE_WACL"]=62,t[e[63]="SERIALIZATION_FAILED"]=63,t[e[64]="TRANSACTION_OVERSIZE"]=64,t[e[65]="TRANSACTION_TOO_MANY_LAYERS"]=65,t[e[66]="CONTRACT_DELETED"]=66,t[e[67]="PLATFORM_NOT_ACTIVE"]=67,t[e[68]="KEY_PREFIX_MISMATCH"]=68,t[e[69]="PLATFORM_TRANSACTION_NOT_CREATED"]=69,t[e[70]="INVALID_RENEWAL_PERIOD"]=70,t[e[71]="INVALID_PAYER_ACCOUNT_ID"]=71,t[e[72]="ACCOUNT_DELETED"]=72,t[e[73]="FILE_DELETED"]=73,t[e[74]="ACCOUNT_REPEATED_IN_ACCOUNT_AMOUNTS"]=74,t[e[75]="SETTING_NEGATIVE_ACCOUNT_BALANCE"]=75,t[e[76]="OBTAINER_REQUIRED"]=76,t[e[77]="OBTAINER_SAME_CONTRACT_ID"]=77,t[e[78]="OBTAINER_DOES_NOT_EXIST"]=78,t[e[79]="MODIFYING_IMMUTABLE_CONTRACT"]=79,t[e[80]="FILE_SYSTEM_EXCEPTION"]=80,t[e[81]="AUTORENEW_DURATION_NOT_IN_RANGE"]=81,t[e[82]="ERROR_DECODING_BYTESTRING"]=82,t[e[83]="CONTRACT_FILE_EMPTY"]=83,t[e[84]="CONTRACT_BYTECODE_EMPTY"]=84,t[e[85]="INVALID_INITIAL_BALANCE"]=85,t[e[86]="INVALID_RECEIVE_RECORD_THRESHOLD"]=86,t[e[87]="INVALID_SEND_RECORD_THRESHOLD"]=87,t[e[88]="ACCOUNT_IS_NOT_GENESIS_ACCOUNT"]=88,t[e[89]="PAYER_ACCOUNT_UNAUTHORIZED"]=89,t[e[90]="INVALID_FREEZE_TRANSACTION_BODY"]=90,t[e[91]="FREEZE_TRANSACTION_BODY_NOT_FOUND"]=91,t[e[92]="TRANSFER_LIST_SIZE_LIMIT_EXCEEDED"]=92,t[e[93]="RESULT_SIZE_LIMIT_EXCEEDED"]=93,t[e[94]="NOT_SPECIAL_ACCOUNT"]=94,t[e[95]="CONTRACT_NEGATIVE_GAS"]=95,t[e[96]="CONTRACT_NEGATIVE_VALUE"]=96,t[e[97]="INVALID_FEE_FILE"]=97,t[e[98]="INVALID_EXCHANGE_RATE_FILE"]=98,t[e[99]="INSUFFICIENT_LOCAL_CALL_GAS"]=99,t[e[100]="ENTITY_NOT_ALLOWED_TO_DELETE"]=100,t[e[101]="AUTHORIZATION_FAILED"]=101,t[e[102]="FILE_UPLOADED_PROTO_INVALID"]=102,t[e[103]="FILE_UPLOADED_PROTO_NOT_SAVED_TO_DISK"]=103,t[e[104]="FEE_SCHEDULE_FILE_PART_UPLOADED"]=104,t[e[105]="EXCHANGE_RATE_CHANGE_LIMIT_EXCEEDED"]=105,t[e[106]="MAX_CONTRACT_STORAGE_EXCEEDED"]=106,t[e[107]="TRANSFER_ACCOUNT_SAME_AS_DELETE_ACCOUNT"]=107,t[e[108]="TOTAL_LEDGER_BALANCE_INVALID"]=108,t[e[110]="EXPIRATION_REDUCTION_NOT_ALLOWED"]=110,t[e[111]="MAX_GAS_LIMIT_EXCEEDED"]=111,t[e[112]="MAX_FILE_SIZE_EXCEEDED"]=112,t[e[113]="RECEIVER_SIG_REQUIRED"]=113,t[e[150]="INVALID_TOPIC_ID"]=150,t[e[155]="INVALID_ADMIN_KEY"]=155,t[e[156]="INVALID_SUBMIT_KEY"]=156,t[e[157]="UNAUTHORIZED"]=157,t[e[158]="INVALID_TOPIC_MESSAGE"]=158,t[e[159]="INVALID_AUTORENEW_ACCOUNT"]=159,t[e[160]="AUTORENEW_ACCOUNT_NOT_ALLOWED"]=160,t[e[162]="TOPIC_EXPIRED"]=162,t[e[163]="INVALID_CHUNK_NUMBER"]=163,t[e[164]="INVALID_CHUNK_TRANSACTION_ID"]=164,t[e[165]="ACCOUNT_FROZEN_FOR_TOKEN"]=165,t[e[166]="TOKENS_PER_ACCOUNT_LIMIT_EXCEEDED"]=166,t[e[167]="INVALID_TOKEN_ID"]=167,t[e[168]="INVALID_TOKEN_DECIMALS"]=168,t[e[169]="INVALID_TOKEN_INITIAL_SUPPLY"]=169,t[e[170]="INVALID_TREASURY_ACCOUNT_FOR_TOKEN"]=170,t[e[171]="INVALID_TOKEN_SYMBOL"]=171,t[e[172]="TOKEN_HAS_NO_FREEZE_KEY"]=172,t[e[173]="TRANSFERS_NOT_ZERO_SUM_FOR_TOKEN"]=173,t[e[174]="MISSING_TOKEN_SYMBOL"]=174,t[e[175]="TOKEN_SYMBOL_TOO_LONG"]=175,t[e[176]="ACCOUNT_KYC_NOT_GRANTED_FOR_TOKEN"]=176,t[e[177]="TOKEN_HAS_NO_KYC_KEY"]=177,t[e[178]="INSUFFICIENT_TOKEN_BALANCE"]=178,t[e[179]="TOKEN_WAS_DELETED"]=179,t[e[180]="TOKEN_HAS_NO_SUPPLY_KEY"]=180,t[e[181]="TOKEN_HAS_NO_WIPE_KEY"]=181,t[e[182]="INVALID_TOKEN_MINT_AMOUNT"]=182,t[e[183]="INVALID_TOKEN_BURN_AMOUNT"]=183,t[e[184]="TOKEN_NOT_ASSOCIATED_TO_ACCOUNT"]=184,t[e[185]="CANNOT_WIPE_TOKEN_TREASURY_ACCOUNT"]=185,t[e[186]="INVALID_KYC_KEY"]=186,t[e[187]="INVALID_WIPE_KEY"]=187,t[e[188]="INVALID_FREEZE_KEY"]=188,t[e[189]="INVALID_SUPPLY_KEY"]=189,t[e[190]="MISSING_TOKEN_NAME"]=190,t[e[191]="TOKEN_NAME_TOO_LONG"]=191,t[e[192]="INVALID_WIPING_AMOUNT"]=192,t[e[193]="TOKEN_IS_IMMUTABLE"]=193,t[e[194]="TOKEN_ALREADY_ASSOCIATED_TO_ACCOUNT"]=194,t[e[195]="TRANSACTION_REQUIRES_ZERO_TOKEN_BALANCES"]=195,t[e[196]="ACCOUNT_IS_TREASURY"]=196,t[e[197]="TOKEN_ID_REPEATED_IN_TOKEN_LIST"]=197,t[e[198]="TOKEN_TRANSFER_LIST_SIZE_LIMIT_EXCEEDED"]=198,t[e[199]="EMPTY_TOKEN_TRANSFER_BODY"]=199,t[e[200]="EMPTY_TOKEN_TRANSFER_ACCOUNT_AMOUNTS"]=200,t[e[201]="INVALID_SCHEDULE_ID"]=201,t[e[202]="SCHEDULE_IS_IMMUTABLE"]=202,t[e[203]="INVALID_SCHEDULE_PAYER_ID"]=203,t[e[204]="INVALID_SCHEDULE_ACCOUNT_ID"]=204,t[e[205]="NO_NEW_VALID_SIGNATURES"]=205,t[e[206]="UNRESOLVABLE_REQUIRED_SIGNERS"]=206,t[e[207]="SCHEDULED_TRANSACTION_NOT_IN_WHITELIST"]=207,t[e[208]="SOME_SIGNATURES_WERE_INVALID"]=208,t[e[209]="TRANSACTION_ID_FIELD_NOT_ALLOWED"]=209,t[e[210]="IDENTICAL_SCHEDULE_ALREADY_CREATED"]=210,t[e[211]="INVALID_ZERO_BYTE_IN_STRING"]=211,t[e[212]="SCHEDULE_ALREADY_DELETED"]=212,t[e[213]="SCHEDULE_ALREADY_EXECUTED"]=213,t[e[214]="MESSAGE_SIZE_TOO_LARGE"]=214,t[e[215]="OPERATION_REPEATED_IN_BUCKET_GROUPS"]=215,t[e[216]="BUCKET_CAPACITY_OVERFLOW"]=216,t[e[217]="NODE_CAPACITY_NOT_SUFFICIENT_FOR_OPERATION"]=217,t[e[218]="BUCKET_HAS_NO_THROTTLE_GROUPS"]=218,t[e[219]="THROTTLE_GROUP_HAS_ZERO_OPS_PER_SEC"]=219,t[e[220]="SUCCESS_BUT_MISSING_EXPECTED_OPERATION"]=220,t[e[221]="UNPARSEABLE_THROTTLE_DEFINITIONS"]=221,t[e[222]="INVALID_THROTTLE_DEFINITIONS"]=222,t[e[223]="ACCOUNT_EXPIRED_AND_PENDING_REMOVAL"]=223,t[e[224]="INVALID_TOKEN_MAX_SUPPLY"]=224,t[e[225]="INVALID_TOKEN_NFT_SERIAL_NUMBER"]=225,t[e[226]="INVALID_NFT_ID"]=226,t[e[227]="METADATA_TOO_LONG"]=227,t[e[228]="BATCH_SIZE_LIMIT_EXCEEDED"]=228,t[e[229]="INVALID_QUERY_RANGE"]=229,t[e[230]="FRACTION_DIVIDES_BY_ZERO"]=230,t[e[231]="INSUFFICIENT_PAYER_BALANCE_FOR_CUSTOM_FEE"]=231,t[e[232]="CUSTOM_FEES_LIST_TOO_LONG"]=232,t[e[233]="INVALID_CUSTOM_FEE_COLLECTOR"]=233,t[e[234]="INVALID_TOKEN_ID_IN_CUSTOM_FEES"]=234,t[e[235]="TOKEN_NOT_ASSOCIATED_TO_FEE_COLLECTOR"]=235,t[e[236]="TOKEN_MAX_SUPPLY_REACHED"]=236,t[e[237]="SENDER_DOES_NOT_OWN_NFT_SERIAL_NO"]=237,t[e[238]="CUSTOM_FEE_NOT_FULLY_SPECIFIED"]=238,t[e[239]="CUSTOM_FEE_MUST_BE_POSITIVE"]=239,t[e[240]="TOKEN_HAS_NO_FEE_SCHEDULE_KEY"]=240,t[e[241]="CUSTOM_FEE_OUTSIDE_NUMERIC_RANGE"]=241,t[e[242]="ROYALTY_FRACTION_CANNOT_EXCEED_ONE"]=242,t[e[243]="FRACTIONAL_FEE_MAX_AMOUNT_LESS_THAN_MIN_AMOUNT"]=243,t[e[244]="CUSTOM_SCHEDULE_ALREADY_HAS_NO_FEES"]=244,t[e[245]="CUSTOM_FEE_DENOMINATION_MUST_BE_FUNGIBLE_COMMON"]=245,t[e[246]="CUSTOM_FRACTIONAL_FEE_ONLY_ALLOWED_FOR_FUNGIBLE_COMMON"]=246,t[e[247]="INVALID_CUSTOM_FEE_SCHEDULE_KEY"]=247,t[e[248]="INVALID_TOKEN_MINT_METADATA"]=248,t[e[249]="INVALID_TOKEN_BURN_METADATA"]=249,t[e[250]="CURRENT_TREASURY_STILL_OWNS_NFTS"]=250,t[e[251]="ACCOUNT_STILL_OWNS_NFTS"]=251,t[e[252]="TREASURY_MUST_OWN_BURNED_NFT"]=252,t[e[253]="ACCOUNT_DOES_NOT_OWN_WIPED_NFT"]=253,t[e[254]="ACCOUNT_AMOUNT_TRANSFERS_ONLY_ALLOWED_FOR_FUNGIBLE_COMMON"]=254,t[e[255]="MAX_NFTS_IN_PRICE_REGIME_HAVE_BEEN_MINTED"]=255,t[e[256]="PAYER_ACCOUNT_DELETED"]=256,t[e[257]="CUSTOM_FEE_CHARGING_EXCEEDED_MAX_RECURSION_DEPTH"]=257,t[e[258]="CUSTOM_FEE_CHARGING_EXCEEDED_MAX_ACCOUNT_AMOUNTS"]=258,t[e[259]="INSUFFICIENT_SENDER_ACCOUNT_BALANCE_FOR_CUSTOM_FEE"]=259,t[e[260]="SERIAL_NUMBER_LIMIT_REACHED"]=260,t[e[261]="CUSTOM_ROYALTY_FEE_ONLY_ALLOWED_FOR_NON_FUNGIBLE_UNIQUE"]=261,t[e[262]="NO_REMAINING_AUTOMATIC_ASSOCIATIONS"]=262,t[e[263]="EXISTING_AUTOMATIC_ASSOCIATIONS_EXCEED_GIVEN_LIMIT"]=263,t[e[264]="REQUESTED_NUM_AUTOMATIC_ASSOCIATIONS_EXCEEDS_ASSOCIATION_LIMIT"]=264,t[e[265]="TOKEN_IS_PAUSED"]=265,t[e[266]="TOKEN_HAS_NO_PAUSE_KEY"]=266,t[e[267]="INVALID_PAUSE_KEY"]=267,t[e[268]="FREEZE_UPDATE_FILE_DOES_NOT_EXIST"]=268,t[e[269]="FREEZE_UPDATE_FILE_HASH_DOES_NOT_MATCH"]=269,t[e[270]="NO_UPGRADE_HAS_BEEN_PREPARED"]=270,t[e[271]="NO_FREEZE_IS_SCHEDULED"]=271,t[e[272]="UPDATE_FILE_HASH_CHANGED_SINCE_PREPARE_UPGRADE"]=272,t[e[273]="FREEZE_START_TIME_MUST_BE_FUTURE"]=273,t[e[274]="PREPARED_UPDATE_FILE_IS_IMMUTABLE"]=274,t[e[275]="FREEZE_ALREADY_SCHEDULED"]=275,t[e[276]="FREEZE_UPGRADE_IN_PROGRESS"]=276,t[e[277]="UPDATE_FILE_ID_DOES_NOT_MATCH_PREPARED"]=277,t[e[278]="UPDATE_FILE_HASH_DOES_NOT_MATCH_PREPARED"]=278,t[e[279]="CONSENSUS_GAS_EXHAUSTED"]=279,t[e[280]="REVERTED_SUCCESS"]=280,t[e[281]="MAX_STORAGE_IN_PRICE_REGIME_HAS_BEEN_USED"]=281,t[e[282]="INVALID_ALIAS_KEY"]=282,t[e[283]="UNEXPECTED_TOKEN_DECIMALS"]=283,t[e[284]="INVALID_PROXY_ACCOUNT_ID"]=284,t[e[285]="INVALID_TRANSFER_ACCOUNT_ID"]=285,t[e[286]="INVALID_FEE_COLLECTOR_ACCOUNT_ID"]=286,t[e[287]="ALIAS_IS_IMMUTABLE"]=287,t[e[288]="SPENDER_ACCOUNT_SAME_AS_OWNER"]=288,t[e[289]="AMOUNT_EXCEEDS_TOKEN_MAX_SUPPLY"]=289,t[e[290]="NEGATIVE_ALLOWANCE_AMOUNT"]=290,t[e[291]="CANNOT_APPROVE_FOR_ALL_FUNGIBLE_COMMON"]=291,t[e[292]="SPENDER_DOES_NOT_HAVE_ALLOWANCE"]=292,t[e[293]="AMOUNT_EXCEEDS_ALLOWANCE"]=293,t[e[294]="MAX_ALLOWANCES_EXCEEDED"]=294,t[e[295]="EMPTY_ALLOWANCES"]=295,t[e[296]="SPENDER_ACCOUNT_REPEATED_IN_ALLOWANCES"]=296,t[e[297]="REPEATED_SERIAL_NUMS_IN_NFT_ALLOWANCES"]=297,t[e[298]="FUNGIBLE_TOKEN_IN_NFT_ALLOWANCES"]=298,t[e[299]="NFT_IN_FUNGIBLE_TOKEN_ALLOWANCES"]=299,t[e[300]="INVALID_ALLOWANCE_OWNER_ID"]=300,t[e[301]="INVALID_ALLOWANCE_SPENDER_ID"]=301,t[e[302]="REPEATED_ALLOWANCES_TO_DELETE"]=302,t[e[303]="INVALID_DELEGATING_SPENDER"]=303,t[e[304]="DELEGATING_SPENDER_CANNOT_GRANT_APPROVE_FOR_ALL"]=304,t[e[305]="DELEGATING_SPENDER_DOES_NOT_HAVE_APPROVE_FOR_ALL"]=305,t[e[306]="SCHEDULE_EXPIRATION_TIME_TOO_FAR_IN_FUTURE"]=306,t[e[307]="SCHEDULE_EXPIRATION_TIME_MUST_BE_HIGHER_THAN_CONSENSUS_TIME"]=307,t[e[308]="SCHEDULE_FUTURE_THROTTLE_EXCEEDED"]=308,t[e[309]="SCHEDULE_FUTURE_GAS_LIMIT_EXCEEDED"]=309,t[e[310]="INVALID_ETHEREUM_TRANSACTION"]=310,t[e[311]="WRONG_CHAIN_ID"]=311,t[e[312]="WRONG_NONCE"]=312,t[e[313]="ACCESS_LIST_UNSUPPORTED"]=313,t[e[314]="SCHEDULE_PENDING_EXPIRATION"]=314,t[e[315]="CONTRACT_IS_TOKEN_TREASURY"]=315,t[e[316]="CONTRACT_HAS_NON_ZERO_TOKEN_BALANCES"]=316,t[e[317]="CONTRACT_EXPIRED_AND_PENDING_REMOVAL"]=317,t[e[318]="CONTRACT_HAS_NO_AUTO_RENEW_ACCOUNT"]=318,t[e[319]="PERMANENT_REMOVAL_REQUIRES_SYSTEM_INITIATION"]=319,t[e[320]="PROXY_ACCOUNT_ID_FIELD_IS_DEPRECATED"]=320,t[e[321]="SELF_STAKING_IS_NOT_ALLOWED"]=321,t[e[322]="INVALID_STAKING_ID"]=322,t[e[323]="STAKING_NOT_ENABLED"]=323,t[e[324]="INVALID_PRNG_RANGE"]=324,t[e[325]="MAX_ENTITIES_IN_PRICE_REGIME_HAVE_BEEN_CREATED"]=325,t[e[326]="INVALID_FULL_PREFIX_SIGNATURE_FOR_PRECOMPILE"]=326,t[e[327]="INSUFFICIENT_BALANCES_FOR_STORAGE_RENT"]=327,t[e[328]="MAX_CHILD_RECORDS_EXCEEDED"]=328,t[e[329]="INSUFFICIENT_BALANCES_FOR_RENEWAL_FEES"]=329,t[e[330]="TRANSACTION_HAS_UNKNOWN_FIELDS"]=330,t[e[331]="ACCOUNT_IS_IMMUTABLE"]=331,t[e[332]="ALIAS_ALREADY_ASSIGNED"]=332,t[e[333]="INVALID_METADATA_KEY"]=333,t[e[334]="TOKEN_HAS_NO_METADATA_KEY"]=334,t[e[335]="MISSING_TOKEN_METADATA"]=335,t[e[336]="MISSING_SERIAL_NUMBERS"]=336,t[e[337]="TOKEN_HAS_NO_ADMIN_KEY"]=337,t[e[338]="NODE_DELETED"]=338,t[e[339]="INVALID_NODE_ID"]=339,t[e[340]="INVALID_GOSSIP_ENDPOINT"]=340,t[e[341]="INVALID_NODE_ACCOUNT_ID"]=341,t[e[342]="INVALID_NODE_DESCRIPTION"]=342,t[e[343]="INVALID_SERVICE_ENDPOINT"]=343,t[e[344]="INVALID_GOSSIP_CA_CERTIFICATE"]=344,t[e[345]="INVALID_GRPC_CERTIFICATE"]=345,t[e[346]="INVALID_MAX_AUTO_ASSOCIATIONS"]=346,t[e[347]="MAX_NODES_CREATED"]=347,t[e[348]="IP_FQDN_CANNOT_BE_SET_FOR_SAME_ENDPOINT"]=348,t[e[349]="GOSSIP_ENDPOINT_CANNOT_HAVE_FQDN"]=349,t[e[350]="FQDN_SIZE_TOO_LARGE"]=350,t[e[351]="INVALID_ENDPOINT"]=351,t[e[352]="GOSSIP_ENDPOINTS_EXCEEDED_LIMIT"]=352,t[e[353]="TOKEN_REFERENCE_REPEATED"]=353,t[e[354]="INVALID_OWNER_ID"]=354,t[e[355]="TOKEN_REFERENCE_LIST_SIZE_LIMIT_EXCEEDED"]=355,t[e[356]="SERVICE_ENDPOINTS_EXCEEDED_LIMIT"]=356,t[e[357]="INVALID_IPV4_ADDRESS"]=357,t[e[358]="EMPTY_TOKEN_REFERENCE_LIST"]=358,t[e[359]="UPDATE_NODE_ACCOUNT_NOT_ALLOWED"]=359,t[e[360]="TOKEN_HAS_NO_METADATA_OR_SUPPLY_KEY"]=360,t[e[361]="EMPTY_PENDING_AIRDROP_ID_LIST"]=361,t[e[362]="PENDING_AIRDROP_ID_REPEATED"]=362,t[e[363]="PENDING_AIRDROP_ID_LIST_TOO_LONG"]=363,t[e[364]="PENDING_NFT_AIRDROP_ALREADY_EXISTS"]=364,t[e[365]="ACCOUNT_HAS_PENDING_AIRDROPS"]=365,t[e[366]="THROTTLED_AT_CONSENSUS"]=366,t[e[367]="INVALID_PENDING_AIRDROP_ID"]=367,t[e[368]="TOKEN_AIRDROP_WITH_FALLBACK_ROYALTY"]=368,t[e[369]="INVALID_TOKEN_IN_PENDING_AIRDROP"]=369,t[e[370]="SCHEDULE_EXPIRY_IS_BUSY"]=370,t[e[371]="INVALID_GRPC_CERTIFICATE_HASH"]=371,t[e[372]="MISSING_EXPIRY_TIME"]=372,t[e[373]="NO_SCHEDULING_ALLOWED_AFTER_SCHEDULED_RECURSION"]=373,t[e[374]="RECURSIVE_SCHEDULING_LIMIT_REACHED"]=374,t[e[375]="WAITING_FOR_LEDGER_ID"]=375,t[e[376]="MAX_ENTRIES_FOR_FEE_EXEMPT_KEY_LIST_EXCEEDED"]=376,t[e[377]="FEE_EXEMPT_KEY_LIST_CONTAINS_DUPLICATED_KEYS"]=377,t[e[378]="INVALID_KEY_IN_FEE_EXEMPT_KEY_LIST"]=378,t[e[379]="INVALID_FEE_SCHEDULE_KEY"]=379,t[e[380]="FEE_SCHEDULE_KEY_CANNOT_BE_UPDATED"]=380,t[e[381]="FEE_SCHEDULE_KEY_NOT_SET"]=381,t[e[382]="MAX_CUSTOM_FEE_LIMIT_EXCEEDED"]=382,t[e[383]="NO_VALID_MAX_CUSTOM_FEE"]=383,t[e[384]="INVALID_MAX_CUSTOM_FEES"]=384,t[e[385]="DUPLICATE_DENOMINATION_IN_MAX_CUSTOM_FEE_LIST"]=385,t[e[386]="DUPLICATE_ACCOUNT_ID_IN_MAX_CUSTOM_FEE_LIST"]=386,t[e[387]="MAX_CUSTOM_FEES_IS_NOT_SUPPORTED"]=387,t[e[388]="BATCH_LIST_EMPTY"]=388,t[e[389]="BATCH_LIST_CONTAINS_DUPLICATES"]=389,t[e[390]="BATCH_TRANSACTION_IN_BLACKLIST"]=390,t[e[391]="INNER_TRANSACTION_FAILED"]=391,t[e[392]="MISSING_BATCH_KEY"]=392,t[e[393]="BATCH_KEY_SET_ON_NON_INNER_TRANSACTION"]=393,t[e[394]="INVALID_BATCH_KEY"]=394,t[e[395]="SCHEDULE_EXPIRY_NOT_CONFIGURABLE"]=395,t[e[396]="CREATING_SYSTEM_ENTITIES"]=396,t[e[397]="THROTTLE_GROUP_LCM_OVERFLOW"]=397,t[e[398]="AIRDROP_CONTAINS_MULTIPLE_SENDERS_FOR_A_TOKEN"]=398,t[e[399]="GRPC_WEB_PROXY_NOT_SUPPORTED"]=399,t}(),t.Transaction=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.body=null,e.prototype.sigs=null,e.prototype.sigMap=null,e.prototype.bodyBytes=o.newBuffer([]),e.prototype.signedTransactionBytes=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.body&&Object.hasOwnProperty.call(e,"body")&&i.proto.TransactionBody.encode(e.body,t.uint32(10).fork()).ldelim(),null!=e.sigs&&Object.hasOwnProperty.call(e,"sigs")&&i.proto.SignatureList.encode(e.sigs,t.uint32(18).fork()).ldelim(),null!=e.sigMap&&Object.hasOwnProperty.call(e,"sigMap")&&i.proto.SignatureMap.encode(e.sigMap,t.uint32(26).fork()).ldelim(),null!=e.bodyBytes&&Object.hasOwnProperty.call(e,"bodyBytes")&&t.uint32(34).bytes(e.bodyBytes),null!=e.signedTransactionBytes&&Object.hasOwnProperty.call(e,"signedTransactionBytes")&&t.uint32(42).bytes(e.signedTransactionBytes),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.Transaction;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.body=i.proto.TransactionBody.decode(e,e.uint32());break;case 2:o.sigs=i.proto.SignatureList.decode(e,e.uint32());break;case 3:o.sigMap=i.proto.SignatureMap.decode(e,e.uint32());break;case 4:o.bodyBytes=e.bytes();break;case 5:o.signedTransactionBytes=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.Transaction"},e}(),t.TransactionBody=function(){function e(e){if(this.maxCustomFees=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.transactionID=null,e.prototype.nodeAccountID=null,e.prototype.transactionFee=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.transactionValidDuration=null,e.prototype.generateRecord=!1,e.prototype.memo="",e.prototype.batchKey=null,e.prototype.contractCall=null,e.prototype.contractCreateInstance=null,e.prototype.contractUpdateInstance=null,e.prototype.cryptoAddLiveHash=null,e.prototype.cryptoCreateAccount=null,e.prototype.cryptoDelete=null,e.prototype.cryptoDeleteLiveHash=null,e.prototype.cryptoTransfer=null,e.prototype.cryptoUpdateAccount=null,e.prototype.fileAppend=null,e.prototype.fileCreate=null,e.prototype.fileDelete=null,e.prototype.fileUpdate=null,e.prototype.systemDelete=null,e.prototype.systemUndelete=null,e.prototype.contractDeleteInstance=null,e.prototype.freeze=null,e.prototype.consensusCreateTopic=null,e.prototype.consensusUpdateTopic=null,e.prototype.consensusDeleteTopic=null,e.prototype.consensusSubmitMessage=null,e.prototype.uncheckedSubmit=null,e.prototype.tokenCreation=null,e.prototype.tokenFreeze=null,e.prototype.tokenUnfreeze=null,e.prototype.tokenGrantKyc=null,e.prototype.tokenRevokeKyc=null,e.prototype.tokenDeletion=null,e.prototype.tokenUpdate=null,e.prototype.tokenMint=null,e.prototype.tokenBurn=null,e.prototype.tokenWipe=null,e.prototype.tokenAssociate=null,e.prototype.tokenDissociate=null,e.prototype.scheduleCreate=null,e.prototype.scheduleDelete=null,e.prototype.scheduleSign=null,e.prototype.tokenFeeScheduleUpdate=null,e.prototype.tokenPause=null,e.prototype.tokenUnpause=null,e.prototype.cryptoApproveAllowance=null,e.prototype.cryptoDeleteAllowance=null,e.prototype.ethereumTransaction=null,e.prototype.nodeStakeUpdate=null,e.prototype.utilPrng=null,e.prototype.tokenUpdateNfts=null,e.prototype.nodeCreate=null,e.prototype.nodeUpdate=null,e.prototype.nodeDelete=null,e.prototype.tokenReject=null,e.prototype.tokenAirdrop=null,e.prototype.tokenCancelAirdrop=null,e.prototype.tokenClaimAirdrop=null,e.prototype.stateSignatureTransaction=null,e.prototype.hintsPreprocessingVote=null,e.prototype.hintsKeyPublication=null,e.prototype.hintsPartialSignature=null,e.prototype.historyProofSignature=null,e.prototype.historyProofKeyPublication=null,e.prototype.historyProofVote=null,e.prototype.crsPublication=null,e.prototype.atomicBatch=null,e.prototype.maxCustomFees=o.emptyArray,Object.defineProperty(e.prototype,"data",{get:o.oneOfGetter(t=["contractCall","contractCreateInstance","contractUpdateInstance","cryptoAddLiveHash","cryptoCreateAccount","cryptoDelete","cryptoDeleteLiveHash","cryptoTransfer","cryptoUpdateAccount","fileAppend","fileCreate","fileDelete","fileUpdate","systemDelete","systemUndelete","contractDeleteInstance","freeze","consensusCreateTopic","consensusUpdateTopic","consensusDeleteTopic","consensusSubmitMessage","uncheckedSubmit","tokenCreation","tokenFreeze","tokenUnfreeze","tokenGrantKyc","tokenRevokeKyc","tokenDeletion","tokenUpdate","tokenMint","tokenBurn","tokenWipe","tokenAssociate","tokenDissociate","scheduleCreate","scheduleDelete","scheduleSign","tokenFeeScheduleUpdate","tokenPause","tokenUnpause","cryptoApproveAllowance","cryptoDeleteAllowance","ethereumTransaction","nodeStakeUpdate","utilPrng","tokenUpdateNfts","nodeCreate","nodeUpdate","nodeDelete","tokenReject","tokenAirdrop","tokenCancelAirdrop","tokenClaimAirdrop","stateSignatureTransaction","hintsPreprocessingVote","hintsKeyPublication","hintsPartialSignature","historyProofSignature","historyProofKeyPublication","historyProofVote","crsPublication","atomicBatch"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.transactionID&&Object.hasOwnProperty.call(e,"transactionID")&&i.proto.TransactionID.encode(e.transactionID,t.uint32(10).fork()).ldelim(),null!=e.nodeAccountID&&Object.hasOwnProperty.call(e,"nodeAccountID")&&i.proto.AccountID.encode(e.nodeAccountID,t.uint32(18).fork()).ldelim(),null!=e.transactionFee&&Object.hasOwnProperty.call(e,"transactionFee")&&t.uint32(24).uint64(e.transactionFee),null!=e.transactionValidDuration&&Object.hasOwnProperty.call(e,"transactionValidDuration")&&i.proto.Duration.encode(e.transactionValidDuration,t.uint32(34).fork()).ldelim(),null!=e.generateRecord&&Object.hasOwnProperty.call(e,"generateRecord")&&t.uint32(40).bool(e.generateRecord),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(50).string(e.memo),null!=e.contractCall&&Object.hasOwnProperty.call(e,"contractCall")&&i.proto.ContractCallTransactionBody.encode(e.contractCall,t.uint32(58).fork()).ldelim(),null!=e.contractCreateInstance&&Object.hasOwnProperty.call(e,"contractCreateInstance")&&i.proto.ContractCreateTransactionBody.encode(e.contractCreateInstance,t.uint32(66).fork()).ldelim(),null!=e.contractUpdateInstance&&Object.hasOwnProperty.call(e,"contractUpdateInstance")&&i.proto.ContractUpdateTransactionBody.encode(e.contractUpdateInstance,t.uint32(74).fork()).ldelim(),null!=e.cryptoAddLiveHash&&Object.hasOwnProperty.call(e,"cryptoAddLiveHash")&&i.proto.CryptoAddLiveHashTransactionBody.encode(e.cryptoAddLiveHash,t.uint32(82).fork()).ldelim(),null!=e.cryptoCreateAccount&&Object.hasOwnProperty.call(e,"cryptoCreateAccount")&&i.proto.CryptoCreateTransactionBody.encode(e.cryptoCreateAccount,t.uint32(90).fork()).ldelim(),null!=e.cryptoDelete&&Object.hasOwnProperty.call(e,"cryptoDelete")&&i.proto.CryptoDeleteTransactionBody.encode(e.cryptoDelete,t.uint32(98).fork()).ldelim(),null!=e.cryptoDeleteLiveHash&&Object.hasOwnProperty.call(e,"cryptoDeleteLiveHash")&&i.proto.CryptoDeleteLiveHashTransactionBody.encode(e.cryptoDeleteLiveHash,t.uint32(106).fork()).ldelim(),null!=e.cryptoTransfer&&Object.hasOwnProperty.call(e,"cryptoTransfer")&&i.proto.CryptoTransferTransactionBody.encode(e.cryptoTransfer,t.uint32(114).fork()).ldelim(),null!=e.cryptoUpdateAccount&&Object.hasOwnProperty.call(e,"cryptoUpdateAccount")&&i.proto.CryptoUpdateTransactionBody.encode(e.cryptoUpdateAccount,t.uint32(122).fork()).ldelim(),null!=e.fileAppend&&Object.hasOwnProperty.call(e,"fileAppend")&&i.proto.FileAppendTransactionBody.encode(e.fileAppend,t.uint32(130).fork()).ldelim(),null!=e.fileCreate&&Object.hasOwnProperty.call(e,"fileCreate")&&i.proto.FileCreateTransactionBody.encode(e.fileCreate,t.uint32(138).fork()).ldelim(),null!=e.fileDelete&&Object.hasOwnProperty.call(e,"fileDelete")&&i.proto.FileDeleteTransactionBody.encode(e.fileDelete,t.uint32(146).fork()).ldelim(),null!=e.fileUpdate&&Object.hasOwnProperty.call(e,"fileUpdate")&&i.proto.FileUpdateTransactionBody.encode(e.fileUpdate,t.uint32(154).fork()).ldelim(),null!=e.systemDelete&&Object.hasOwnProperty.call(e,"systemDelete")&&i.proto.SystemDeleteTransactionBody.encode(e.systemDelete,t.uint32(162).fork()).ldelim(),null!=e.systemUndelete&&Object.hasOwnProperty.call(e,"systemUndelete")&&i.proto.SystemUndeleteTransactionBody.encode(e.systemUndelete,t.uint32(170).fork()).ldelim(),null!=e.contractDeleteInstance&&Object.hasOwnProperty.call(e,"contractDeleteInstance")&&i.proto.ContractDeleteTransactionBody.encode(e.contractDeleteInstance,t.uint32(178).fork()).ldelim(),null!=e.freeze&&Object.hasOwnProperty.call(e,"freeze")&&i.proto.FreezeTransactionBody.encode(e.freeze,t.uint32(186).fork()).ldelim(),null!=e.consensusCreateTopic&&Object.hasOwnProperty.call(e,"consensusCreateTopic")&&i.proto.ConsensusCreateTopicTransactionBody.encode(e.consensusCreateTopic,t.uint32(194).fork()).ldelim(),null!=e.consensusUpdateTopic&&Object.hasOwnProperty.call(e,"consensusUpdateTopic")&&i.proto.ConsensusUpdateTopicTransactionBody.encode(e.consensusUpdateTopic,t.uint32(202).fork()).ldelim(),null!=e.consensusDeleteTopic&&Object.hasOwnProperty.call(e,"consensusDeleteTopic")&&i.proto.ConsensusDeleteTopicTransactionBody.encode(e.consensusDeleteTopic,t.uint32(210).fork()).ldelim(),null!=e.consensusSubmitMessage&&Object.hasOwnProperty.call(e,"consensusSubmitMessage")&&i.proto.ConsensusSubmitMessageTransactionBody.encode(e.consensusSubmitMessage,t.uint32(218).fork()).ldelim(),null!=e.uncheckedSubmit&&Object.hasOwnProperty.call(e,"uncheckedSubmit")&&i.proto.UncheckedSubmitBody.encode(e.uncheckedSubmit,t.uint32(226).fork()).ldelim(),null!=e.tokenCreation&&Object.hasOwnProperty.call(e,"tokenCreation")&&i.proto.TokenCreateTransactionBody.encode(e.tokenCreation,t.uint32(234).fork()).ldelim(),null!=e.tokenFreeze&&Object.hasOwnProperty.call(e,"tokenFreeze")&&i.proto.TokenFreezeAccountTransactionBody.encode(e.tokenFreeze,t.uint32(250).fork()).ldelim(),null!=e.tokenUnfreeze&&Object.hasOwnProperty.call(e,"tokenUnfreeze")&&i.proto.TokenUnfreezeAccountTransactionBody.encode(e.tokenUnfreeze,t.uint32(258).fork()).ldelim(),null!=e.tokenGrantKyc&&Object.hasOwnProperty.call(e,"tokenGrantKyc")&&i.proto.TokenGrantKycTransactionBody.encode(e.tokenGrantKyc,t.uint32(266).fork()).ldelim(),null!=e.tokenRevokeKyc&&Object.hasOwnProperty.call(e,"tokenRevokeKyc")&&i.proto.TokenRevokeKycTransactionBody.encode(e.tokenRevokeKyc,t.uint32(274).fork()).ldelim(),null!=e.tokenDeletion&&Object.hasOwnProperty.call(e,"tokenDeletion")&&i.proto.TokenDeleteTransactionBody.encode(e.tokenDeletion,t.uint32(282).fork()).ldelim(),null!=e.tokenUpdate&&Object.hasOwnProperty.call(e,"tokenUpdate")&&i.proto.TokenUpdateTransactionBody.encode(e.tokenUpdate,t.uint32(290).fork()).ldelim(),null!=e.tokenMint&&Object.hasOwnProperty.call(e,"tokenMint")&&i.proto.TokenMintTransactionBody.encode(e.tokenMint,t.uint32(298).fork()).ldelim(),null!=e.tokenBurn&&Object.hasOwnProperty.call(e,"tokenBurn")&&i.proto.TokenBurnTransactionBody.encode(e.tokenBurn,t.uint32(306).fork()).ldelim(),null!=e.tokenWipe&&Object.hasOwnProperty.call(e,"tokenWipe")&&i.proto.TokenWipeAccountTransactionBody.encode(e.tokenWipe,t.uint32(314).fork()).ldelim(),null!=e.tokenAssociate&&Object.hasOwnProperty.call(e,"tokenAssociate")&&i.proto.TokenAssociateTransactionBody.encode(e.tokenAssociate,t.uint32(322).fork()).ldelim(),null!=e.tokenDissociate&&Object.hasOwnProperty.call(e,"tokenDissociate")&&i.proto.TokenDissociateTransactionBody.encode(e.tokenDissociate,t.uint32(330).fork()).ldelim(),null!=e.scheduleCreate&&Object.hasOwnProperty.call(e,"scheduleCreate")&&i.proto.ScheduleCreateTransactionBody.encode(e.scheduleCreate,t.uint32(338).fork()).ldelim(),null!=e.scheduleDelete&&Object.hasOwnProperty.call(e,"scheduleDelete")&&i.proto.ScheduleDeleteTransactionBody.encode(e.scheduleDelete,t.uint32(346).fork()).ldelim(),null!=e.scheduleSign&&Object.hasOwnProperty.call(e,"scheduleSign")&&i.proto.ScheduleSignTransactionBody.encode(e.scheduleSign,t.uint32(354).fork()).ldelim(),null!=e.tokenFeeScheduleUpdate&&Object.hasOwnProperty.call(e,"tokenFeeScheduleUpdate")&&i.proto.TokenFeeScheduleUpdateTransactionBody.encode(e.tokenFeeScheduleUpdate,t.uint32(362).fork()).ldelim(),null!=e.tokenPause&&Object.hasOwnProperty.call(e,"tokenPause")&&i.proto.TokenPauseTransactionBody.encode(e.tokenPause,t.uint32(370).fork()).ldelim(),null!=e.tokenUnpause&&Object.hasOwnProperty.call(e,"tokenUnpause")&&i.proto.TokenUnpauseTransactionBody.encode(e.tokenUnpause,t.uint32(378).fork()).ldelim(),null!=e.cryptoApproveAllowance&&Object.hasOwnProperty.call(e,"cryptoApproveAllowance")&&i.proto.CryptoApproveAllowanceTransactionBody.encode(e.cryptoApproveAllowance,t.uint32(386).fork()).ldelim(),null!=e.cryptoDeleteAllowance&&Object.hasOwnProperty.call(e,"cryptoDeleteAllowance")&&i.proto.CryptoDeleteAllowanceTransactionBody.encode(e.cryptoDeleteAllowance,t.uint32(394).fork()).ldelim(),null!=e.ethereumTransaction&&Object.hasOwnProperty.call(e,"ethereumTransaction")&&i.proto.EthereumTransactionBody.encode(e.ethereumTransaction,t.uint32(402).fork()).ldelim(),null!=e.nodeStakeUpdate&&Object.hasOwnProperty.call(e,"nodeStakeUpdate")&&i.proto.NodeStakeUpdateTransactionBody.encode(e.nodeStakeUpdate,t.uint32(410).fork()).ldelim(),null!=e.utilPrng&&Object.hasOwnProperty.call(e,"utilPrng")&&i.proto.UtilPrngTransactionBody.encode(e.utilPrng,t.uint32(418).fork()).ldelim(),null!=e.tokenUpdateNfts&&Object.hasOwnProperty.call(e,"tokenUpdateNfts")&&i.proto.TokenUpdateNftsTransactionBody.encode(e.tokenUpdateNfts,t.uint32(426).fork()).ldelim(),null!=e.nodeCreate&&Object.hasOwnProperty.call(e,"nodeCreate")&&i.com.hedera.hapi.node.addressbook.NodeCreateTransactionBody.encode(e.nodeCreate,t.uint32(434).fork()).ldelim(),null!=e.nodeUpdate&&Object.hasOwnProperty.call(e,"nodeUpdate")&&i.com.hedera.hapi.node.addressbook.NodeUpdateTransactionBody.encode(e.nodeUpdate,t.uint32(442).fork()).ldelim(),null!=e.nodeDelete&&Object.hasOwnProperty.call(e,"nodeDelete")&&i.com.hedera.hapi.node.addressbook.NodeDeleteTransactionBody.encode(e.nodeDelete,t.uint32(450).fork()).ldelim(),null!=e.tokenReject&&Object.hasOwnProperty.call(e,"tokenReject")&&i.proto.TokenRejectTransactionBody.encode(e.tokenReject,t.uint32(458).fork()).ldelim(),null!=e.tokenAirdrop&&Object.hasOwnProperty.call(e,"tokenAirdrop")&&i.proto.TokenAirdropTransactionBody.encode(e.tokenAirdrop,t.uint32(466).fork()).ldelim(),null!=e.tokenCancelAirdrop&&Object.hasOwnProperty.call(e,"tokenCancelAirdrop")&&i.proto.TokenCancelAirdropTransactionBody.encode(e.tokenCancelAirdrop,t.uint32(474).fork()).ldelim(),null!=e.tokenClaimAirdrop&&Object.hasOwnProperty.call(e,"tokenClaimAirdrop")&&i.proto.TokenClaimAirdropTransactionBody.encode(e.tokenClaimAirdrop,t.uint32(482).fork()).ldelim(),null!=e.stateSignatureTransaction&&Object.hasOwnProperty.call(e,"stateSignatureTransaction")&&i.com.hedera.hapi.platform.event.StateSignatureTransaction.encode(e.stateSignatureTransaction,t.uint32(522).fork()).ldelim(),null!=e.hintsPreprocessingVote&&Object.hasOwnProperty.call(e,"hintsPreprocessingVote")&&i.com.hedera.hapi.services.auxiliary.hints.HintsPreprocessingVoteTransactionBody.encode(e.hintsPreprocessingVote,t.uint32(530).fork()).ldelim(),null!=e.hintsKeyPublication&&Object.hasOwnProperty.call(e,"hintsKeyPublication")&&i.com.hedera.hapi.services.auxiliary.hints.HintsKeyPublicationTransactionBody.encode(e.hintsKeyPublication,t.uint32(538).fork()).ldelim(),null!=e.hintsPartialSignature&&Object.hasOwnProperty.call(e,"hintsPartialSignature")&&i.com.hedera.hapi.services.auxiliary.hints.HintsPartialSignatureTransactionBody.encode(e.hintsPartialSignature,t.uint32(546).fork()).ldelim(),null!=e.historyProofSignature&&Object.hasOwnProperty.call(e,"historyProofSignature")&&i.com.hedera.hapi.services.auxiliary.history.HistoryProofSignatureTransactionBody.encode(e.historyProofSignature,t.uint32(554).fork()).ldelim(),null!=e.historyProofKeyPublication&&Object.hasOwnProperty.call(e,"historyProofKeyPublication")&&i.com.hedera.hapi.services.auxiliary.history.HistoryProofKeyPublicationTransactionBody.encode(e.historyProofKeyPublication,t.uint32(562).fork()).ldelim(),null!=e.historyProofVote&&Object.hasOwnProperty.call(e,"historyProofVote")&&i.com.hedera.hapi.services.auxiliary.history.HistoryProofVoteTransactionBody.encode(e.historyProofVote,t.uint32(570).fork()).ldelim(),null!=e.crsPublication&&Object.hasOwnProperty.call(e,"crsPublication")&&i.com.hedera.hapi.services.auxiliary.hints.CrsPublicationTransactionBody.encode(e.crsPublication,t.uint32(578).fork()).ldelim(),null!=e.batchKey&&Object.hasOwnProperty.call(e,"batchKey")&&i.proto.Key.encode(e.batchKey,t.uint32(586).fork()).ldelim(),null!=e.atomicBatch&&Object.hasOwnProperty.call(e,"atomicBatch")&&i.proto.AtomicBatchTransactionBody.encode(e.atomicBatch,t.uint32(594).fork()).ldelim(),null!=e.maxCustomFees&&e.maxCustomFees.length)for(var r=0;r<e.maxCustomFees.length;++r)i.proto.CustomFeeLimit.encode(e.maxCustomFees[r],t.uint32(8010).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.transactionID=i.proto.TransactionID.decode(e,e.uint32());break;case 2:o.nodeAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.transactionFee=e.uint64();break;case 4:o.transactionValidDuration=i.proto.Duration.decode(e,e.uint32());break;case 5:o.generateRecord=e.bool();break;case 6:o.memo=e.string();break;case 73:o.batchKey=i.proto.Key.decode(e,e.uint32());break;case 7:o.contractCall=i.proto.ContractCallTransactionBody.decode(e,e.uint32());break;case 8:o.contractCreateInstance=i.proto.ContractCreateTransactionBody.decode(e,e.uint32());break;case 9:o.contractUpdateInstance=i.proto.ContractUpdateTransactionBody.decode(e,e.uint32());break;case 10:o.cryptoAddLiveHash=i.proto.CryptoAddLiveHashTransactionBody.decode(e,e.uint32());break;case 11:o.cryptoCreateAccount=i.proto.CryptoCreateTransactionBody.decode(e,e.uint32());break;case 12:o.cryptoDelete=i.proto.CryptoDeleteTransactionBody.decode(e,e.uint32());break;case 13:o.cryptoDeleteLiveHash=i.proto.CryptoDeleteLiveHashTransactionBody.decode(e,e.uint32());break;case 14:o.cryptoTransfer=i.proto.CryptoTransferTransactionBody.decode(e,e.uint32());break;case 15:o.cryptoUpdateAccount=i.proto.CryptoUpdateTransactionBody.decode(e,e.uint32());break;case 16:o.fileAppend=i.proto.FileAppendTransactionBody.decode(e,e.uint32());break;case 17:o.fileCreate=i.proto.FileCreateTransactionBody.decode(e,e.uint32());break;case 18:o.fileDelete=i.proto.FileDeleteTransactionBody.decode(e,e.uint32());break;case 19:o.fileUpdate=i.proto.FileUpdateTransactionBody.decode(e,e.uint32());break;case 20:o.systemDelete=i.proto.SystemDeleteTransactionBody.decode(e,e.uint32());break;case 21:o.systemUndelete=i.proto.SystemUndeleteTransactionBody.decode(e,e.uint32());break;case 22:o.contractDeleteInstance=i.proto.ContractDeleteTransactionBody.decode(e,e.uint32());break;case 23:o.freeze=i.proto.FreezeTransactionBody.decode(e,e.uint32());break;case 24:o.consensusCreateTopic=i.proto.ConsensusCreateTopicTransactionBody.decode(e,e.uint32());break;case 25:o.consensusUpdateTopic=i.proto.ConsensusUpdateTopicTransactionBody.decode(e,e.uint32());break;case 26:o.consensusDeleteTopic=i.proto.ConsensusDeleteTopicTransactionBody.decode(e,e.uint32());break;case 27:o.consensusSubmitMessage=i.proto.ConsensusSubmitMessageTransactionBody.decode(e,e.uint32());break;case 28:o.uncheckedSubmit=i.proto.UncheckedSubmitBody.decode(e,e.uint32());break;case 29:o.tokenCreation=i.proto.TokenCreateTransactionBody.decode(e,e.uint32());break;case 31:o.tokenFreeze=i.proto.TokenFreezeAccountTransactionBody.decode(e,e.uint32());break;case 32:o.tokenUnfreeze=i.proto.TokenUnfreezeAccountTransactionBody.decode(e,e.uint32());break;case 33:o.tokenGrantKyc=i.proto.TokenGrantKycTransactionBody.decode(e,e.uint32());break;case 34:o.tokenRevokeKyc=i.proto.TokenRevokeKycTransactionBody.decode(e,e.uint32());break;case 35:o.tokenDeletion=i.proto.TokenDeleteTransactionBody.decode(e,e.uint32());break;case 36:o.tokenUpdate=i.proto.TokenUpdateTransactionBody.decode(e,e.uint32());break;case 37:o.tokenMint=i.proto.TokenMintTransactionBody.decode(e,e.uint32());break;case 38:o.tokenBurn=i.proto.TokenBurnTransactionBody.decode(e,e.uint32());break;case 39:o.tokenWipe=i.proto.TokenWipeAccountTransactionBody.decode(e,e.uint32());break;case 40:o.tokenAssociate=i.proto.TokenAssociateTransactionBody.decode(e,e.uint32());break;case 41:o.tokenDissociate=i.proto.TokenDissociateTransactionBody.decode(e,e.uint32());break;case 42:o.scheduleCreate=i.proto.ScheduleCreateTransactionBody.decode(e,e.uint32());break;case 43:o.scheduleDelete=i.proto.ScheduleDeleteTransactionBody.decode(e,e.uint32());break;case 44:o.scheduleSign=i.proto.ScheduleSignTransactionBody.decode(e,e.uint32());break;case 45:o.tokenFeeScheduleUpdate=i.proto.TokenFeeScheduleUpdateTransactionBody.decode(e,e.uint32());break;case 46:o.tokenPause=i.proto.TokenPauseTransactionBody.decode(e,e.uint32());break;case 47:o.tokenUnpause=i.proto.TokenUnpauseTransactionBody.decode(e,e.uint32());break;case 48:o.cryptoApproveAllowance=i.proto.CryptoApproveAllowanceTransactionBody.decode(e,e.uint32());break;case 49:o.cryptoDeleteAllowance=i.proto.CryptoDeleteAllowanceTransactionBody.decode(e,e.uint32());break;case 50:o.ethereumTransaction=i.proto.EthereumTransactionBody.decode(e,e.uint32());break;case 51:o.nodeStakeUpdate=i.proto.NodeStakeUpdateTransactionBody.decode(e,e.uint32());break;case 52:o.utilPrng=i.proto.UtilPrngTransactionBody.decode(e,e.uint32());break;case 53:o.tokenUpdateNfts=i.proto.TokenUpdateNftsTransactionBody.decode(e,e.uint32());break;case 54:o.nodeCreate=i.com.hedera.hapi.node.addressbook.NodeCreateTransactionBody.decode(e,e.uint32());break;case 55:o.nodeUpdate=i.com.hedera.hapi.node.addressbook.NodeUpdateTransactionBody.decode(e,e.uint32());break;case 56:o.nodeDelete=i.com.hedera.hapi.node.addressbook.NodeDeleteTransactionBody.decode(e,e.uint32());break;case 57:o.tokenReject=i.proto.TokenRejectTransactionBody.decode(e,e.uint32());break;case 58:o.tokenAirdrop=i.proto.TokenAirdropTransactionBody.decode(e,e.uint32());break;case 59:o.tokenCancelAirdrop=i.proto.TokenCancelAirdropTransactionBody.decode(e,e.uint32());break;case 60:o.tokenClaimAirdrop=i.proto.TokenClaimAirdropTransactionBody.decode(e,e.uint32());break;case 65:o.stateSignatureTransaction=i.com.hedera.hapi.platform.event.StateSignatureTransaction.decode(e,e.uint32());break;case 66:o.hintsPreprocessingVote=i.com.hedera.hapi.services.auxiliary.hints.HintsPreprocessingVoteTransactionBody.decode(e,e.uint32());break;case 67:o.hintsKeyPublication=i.com.hedera.hapi.services.auxiliary.hints.HintsKeyPublicationTransactionBody.decode(e,e.uint32());break;case 68:o.hintsPartialSignature=i.com.hedera.hapi.services.auxiliary.hints.HintsPartialSignatureTransactionBody.decode(e,e.uint32());break;case 69:o.historyProofSignature=i.com.hedera.hapi.services.auxiliary.history.HistoryProofSignatureTransactionBody.decode(e,e.uint32());break;case 70:o.historyProofKeyPublication=i.com.hedera.hapi.services.auxiliary.history.HistoryProofKeyPublicationTransactionBody.decode(e,e.uint32());break;case 71:o.historyProofVote=i.com.hedera.hapi.services.auxiliary.history.HistoryProofVoteTransactionBody.decode(e,e.uint32());break;case 72:o.crsPublication=i.com.hedera.hapi.services.auxiliary.hints.CrsPublicationTransactionBody.decode(e,e.uint32());break;case 74:o.atomicBatch=i.proto.AtomicBatchTransactionBody.decode(e,e.uint32());break;case 1001:o.maxCustomFees&&o.maxCustomFees.length||(o.maxCustomFees=[]),o.maxCustomFees.push(i.proto.CustomFeeLimit.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionBody"},e}(),t.AtomicBatchTransactionBody=function(){function e(e){if(this.transactions=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.transactions=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.transactions&&e.transactions.length)for(var r=0;r<e.transactions.length;++r)t.uint32(10).bytes(e.transactions[r]);return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.AtomicBatchTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.transactions&&o.transactions.length||(o.transactions=[]),o.transactions.push(e.bytes());else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.AtomicBatchTransactionBody"},e}(),t.ShardID=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.shardNum=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.shardNum&&Object.hasOwnProperty.call(e,"shardNum")&&t.uint32(8).int64(e.shardNum),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ShardID;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.shardNum=e.int64();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ShardID"},e}(),t.RealmID=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.shardNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.realmNum=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.shardNum&&Object.hasOwnProperty.call(e,"shardNum")&&t.uint32(8).int64(e.shardNum),null!=e.realmNum&&Object.hasOwnProperty.call(e,"realmNum")&&t.uint32(16).int64(e.realmNum),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.RealmID;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.shardNum=e.int64();break;case 2:o.realmNum=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.RealmID"},e}(),t.TokenID=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.shardNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.realmNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.tokenNum=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.shardNum&&Object.hasOwnProperty.call(e,"shardNum")&&t.uint32(8).int64(e.shardNum),null!=e.realmNum&&Object.hasOwnProperty.call(e,"realmNum")&&t.uint32(16).int64(e.realmNum),null!=e.tokenNum&&Object.hasOwnProperty.call(e,"tokenNum")&&t.uint32(24).int64(e.tokenNum),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenID;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.shardNum=e.int64();break;case 2:o.realmNum=e.int64();break;case 3:o.tokenNum=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenID"},e}(),t.BlockHashAlgorithm=function(){const e={},t=Object.create(e);return t[e[0]="SHA2_384"]=0,t}(),t.AccountID=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.shardNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.realmNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.accountNum=null,e.prototype.alias=null,Object.defineProperty(e.prototype,"account",{get:o.oneOfGetter(t=["accountNum","alias"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.shardNum&&Object.hasOwnProperty.call(e,"shardNum")&&t.uint32(8).int64(e.shardNum),null!=e.realmNum&&Object.hasOwnProperty.call(e,"realmNum")&&t.uint32(16).int64(e.realmNum),null!=e.accountNum&&Object.hasOwnProperty.call(e,"accountNum")&&t.uint32(24).int64(e.accountNum),null!=e.alias&&Object.hasOwnProperty.call(e,"alias")&&t.uint32(34).bytes(e.alias),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.AccountID;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.shardNum=e.int64();break;case 2:o.realmNum=e.int64();break;case 3:o.accountNum=e.int64();break;case 4:o.alias=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.AccountID"},e}(),t.NftID=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token_ID=null,e.prototype.serialNumber=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.token_ID&&Object.hasOwnProperty.call(e,"token_ID")&&i.proto.TokenID.encode(e.token_ID,t.uint32(10).fork()).ldelim(),null!=e.serialNumber&&Object.hasOwnProperty.call(e,"serialNumber")&&t.uint32(16).int64(e.serialNumber),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.NftID;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.token_ID=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.serialNumber=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.NftID"},e}(),t.FileID=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.shardNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.realmNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.fileNum=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.shardNum&&Object.hasOwnProperty.call(e,"shardNum")&&t.uint32(8).int64(e.shardNum),null!=e.realmNum&&Object.hasOwnProperty.call(e,"realmNum")&&t.uint32(16).int64(e.realmNum),null!=e.fileNum&&Object.hasOwnProperty.call(e,"fileNum")&&t.uint32(24).int64(e.fileNum),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FileID;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.shardNum=e.int64();break;case 2:o.realmNum=e.int64();break;case 3:o.fileNum=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FileID"},e}(),t.ContractID=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.shardNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.realmNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.contractNum=null,e.prototype.evmAddress=null,Object.defineProperty(e.prototype,"contract",{get:o.oneOfGetter(t=["contractNum","evmAddress"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.shardNum&&Object.hasOwnProperty.call(e,"shardNum")&&t.uint32(8).int64(e.shardNum),null!=e.realmNum&&Object.hasOwnProperty.call(e,"realmNum")&&t.uint32(16).int64(e.realmNum),null!=e.contractNum&&Object.hasOwnProperty.call(e,"contractNum")&&t.uint32(24).int64(e.contractNum),null!=e.evmAddress&&Object.hasOwnProperty.call(e,"evmAddress")&&t.uint32(34).bytes(e.evmAddress),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractID;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.shardNum=e.int64();break;case 2:o.realmNum=e.int64();break;case 3:o.contractNum=e.int64();break;case 4:o.evmAddress=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractID"},e}(),t.TopicID=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.shardNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.realmNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.topicNum=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.shardNum&&Object.hasOwnProperty.call(e,"shardNum")&&t.uint32(8).int64(e.shardNum),null!=e.realmNum&&Object.hasOwnProperty.call(e,"realmNum")&&t.uint32(16).int64(e.realmNum),null!=e.topicNum&&Object.hasOwnProperty.call(e,"topicNum")&&t.uint32(24).int64(e.topicNum),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TopicID;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.shardNum=e.int64();break;case 2:o.realmNum=e.int64();break;case 3:o.topicNum=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TopicID"},e}(),t.ScheduleID=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.shardNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.realmNum=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.scheduleNum=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.shardNum&&Object.hasOwnProperty.call(e,"shardNum")&&t.uint32(8).int64(e.shardNum),null!=e.realmNum&&Object.hasOwnProperty.call(e,"realmNum")&&t.uint32(16).int64(e.realmNum),null!=e.scheduleNum&&Object.hasOwnProperty.call(e,"scheduleNum")&&t.uint32(24).int64(e.scheduleNum),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ScheduleID;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.shardNum=e.int64();break;case 2:o.realmNum=e.int64();break;case 3:o.scheduleNum=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ScheduleID"},e}(),t.TransactionID=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.transactionValidStart=null,e.prototype.accountID=null,e.prototype.scheduled=!1,e.prototype.nonce=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.transactionValidStart&&Object.hasOwnProperty.call(e,"transactionValidStart")&&i.proto.Timestamp.encode(e.transactionValidStart,t.uint32(10).fork()).ldelim(),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),null!=e.scheduled&&Object.hasOwnProperty.call(e,"scheduled")&&t.uint32(24).bool(e.scheduled),null!=e.nonce&&Object.hasOwnProperty.call(e,"nonce")&&t.uint32(32).int32(e.nonce),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionID;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.transactionValidStart=i.proto.Timestamp.decode(e,e.uint32());break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.scheduled=e.bool();break;case 4:o.nonce=e.int32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionID"},e}(),t.AccountAmount=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.accountID=null,e.prototype.amount=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.isApproval=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(10).fork()).ldelim(),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(16).sint64(e.amount),null!=e.isApproval&&Object.hasOwnProperty.call(e,"isApproval")&&t.uint32(24).bool(e.isApproval),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.AccountAmount;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.amount=e.sint64();break;case 3:o.isApproval=e.bool();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.AccountAmount"},e}(),t.TransferList=function(){function e(e){if(this.accountAmounts=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.accountAmounts=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.accountAmounts&&e.accountAmounts.length)for(var r=0;r<e.accountAmounts.length;++r)i.proto.AccountAmount.encode(e.accountAmounts[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransferList;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.accountAmounts&&o.accountAmounts.length||(o.accountAmounts=[]),o.accountAmounts.push(i.proto.AccountAmount.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransferList"},e}(),t.NftTransfer=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.senderAccountID=null,e.prototype.receiverAccountID=null,e.prototype.serialNumber=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.isApproval=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.senderAccountID&&Object.hasOwnProperty.call(e,"senderAccountID")&&i.proto.AccountID.encode(e.senderAccountID,t.uint32(10).fork()).ldelim(),null!=e.receiverAccountID&&Object.hasOwnProperty.call(e,"receiverAccountID")&&i.proto.AccountID.encode(e.receiverAccountID,t.uint32(18).fork()).ldelim(),null!=e.serialNumber&&Object.hasOwnProperty.call(e,"serialNumber")&&t.uint32(24).int64(e.serialNumber),null!=e.isApproval&&Object.hasOwnProperty.call(e,"isApproval")&&t.uint32(32).bool(e.isApproval),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.NftTransfer;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.senderAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.receiverAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.serialNumber=e.int64();break;case 4:o.isApproval=e.bool();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.NftTransfer"},e}(),t.TokenTransferList=function(){function e(e){if(this.transfers=[],this.nftTransfers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.prototype.transfers=o.emptyArray,e.prototype.nftTransfers=o.emptyArray,e.prototype.expectedDecimals=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),null!=e.transfers&&e.transfers.length)for(var r=0;r<e.transfers.length;++r)i.proto.AccountAmount.encode(e.transfers[r],t.uint32(18).fork()).ldelim();if(null!=e.nftTransfers&&e.nftTransfers.length)for(r=0;r<e.nftTransfers.length;++r)i.proto.NftTransfer.encode(e.nftTransfers[r],t.uint32(26).fork()).ldelim();return null!=e.expectedDecimals&&Object.hasOwnProperty.call(e,"expectedDecimals")&&i.google.protobuf.UInt32Value.encode(e.expectedDecimals,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenTransferList;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.token=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.transfers&&o.transfers.length||(o.transfers=[]),o.transfers.push(i.proto.AccountAmount.decode(e,e.uint32()));break;case 3:o.nftTransfers&&o.nftTransfers.length||(o.nftTransfers=[]),o.nftTransfers.push(i.proto.NftTransfer.decode(e,e.uint32()));break;case 4:o.expectedDecimals=i.google.protobuf.UInt32Value.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenTransferList"},e}(),t.Fraction=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.numerator=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.denominator=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.numerator&&Object.hasOwnProperty.call(e,"numerator")&&t.uint32(8).int64(e.numerator),null!=e.denominator&&Object.hasOwnProperty.call(e,"denominator")&&t.uint32(16).int64(e.denominator),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.Fraction;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.numerator=e.int64();break;case 2:o.denominator=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.Fraction"},e}(),t.TokenType=function(){const e={},t=Object.create(e);return t[e[0]="FUNGIBLE_COMMON"]=0,t[e[1]="NON_FUNGIBLE_UNIQUE"]=1,t}(),t.SubType=function(){const e={},t=Object.create(e);return t[e[0]="DEFAULT"]=0,t[e[1]="TOKEN_FUNGIBLE_COMMON"]=1,t[e[2]="TOKEN_NON_FUNGIBLE_UNIQUE"]=2,t[e[3]="TOKEN_FUNGIBLE_COMMON_WITH_CUSTOM_FEES"]=3,t[e[4]="TOKEN_NON_FUNGIBLE_UNIQUE_WITH_CUSTOM_FEES"]=4,t[e[5]="SCHEDULE_CREATE_CONTRACT_CALL"]=5,t[e[6]="TOPIC_CREATE_WITH_CUSTOM_FEES"]=6,t[e[7]="SUBMIT_MESSAGE_WITH_CUSTOM_FEES"]=7,t}(),t.TokenSupplyType=function(){const e={},t=Object.create(e);return t[e[0]="INFINITE"]=0,t[e[1]="FINITE"]=1,t}(),t.TokenKeyValidation=function(){const e={},t=Object.create(e);return t[e[0]="FULL_VALIDATION"]=0,t[e[1]="NO_VALIDATION"]=1,t}(),t.TokenFreezeStatus=function(){const e={},t=Object.create(e);return t[e[0]="FreezeNotApplicable"]=0,t[e[1]="Frozen"]=1,t[e[2]="Unfrozen"]=2,t}(),t.TokenKycStatus=function(){const e={},t=Object.create(e);return t[e[0]="KycNotApplicable"]=0,t[e[1]="Granted"]=1,t[e[2]="Revoked"]=2,t}(),t.TokenPauseStatus=function(){const e={},t=Object.create(e);return t[e[0]="PauseNotApplicable"]=0,t[e[1]="Paused"]=1,t[e[2]="Unpaused"]=2,t}(),t.Key=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.contractID=null,e.prototype.ed25519=null,e.prototype.RSA_3072=null,e.prototype.ECDSA_384=null,e.prototype.thresholdKey=null,e.prototype.keyList=null,e.prototype.ECDSASecp256k1=null,e.prototype.delegatableContractId=null,Object.defineProperty(e.prototype,"key",{get:o.oneOfGetter(t=["contractID","ed25519","RSA_3072","ECDSA_384","thresholdKey","keyList","ECDSASecp256k1","delegatableContractId"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(10).fork()).ldelim(),null!=e.ed25519&&Object.hasOwnProperty.call(e,"ed25519")&&t.uint32(18).bytes(e.ed25519),null!=e.RSA_3072&&Object.hasOwnProperty.call(e,"RSA_3072")&&t.uint32(26).bytes(e.RSA_3072),null!=e.ECDSA_384&&Object.hasOwnProperty.call(e,"ECDSA_384")&&t.uint32(34).bytes(e.ECDSA_384),null!=e.thresholdKey&&Object.hasOwnProperty.call(e,"thresholdKey")&&i.proto.ThresholdKey.encode(e.thresholdKey,t.uint32(42).fork()).ldelim(),null!=e.keyList&&Object.hasOwnProperty.call(e,"keyList")&&i.proto.KeyList.encode(e.keyList,t.uint32(50).fork()).ldelim(),null!=e.ECDSASecp256k1&&Object.hasOwnProperty.call(e,"ECDSASecp256k1")&&t.uint32(58).bytes(e.ECDSASecp256k1),null!=e.delegatableContractId&&Object.hasOwnProperty.call(e,"delegatableContractId")&&i.proto.ContractID.encode(e.delegatableContractId,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.Key;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;case 2:o.ed25519=e.bytes();break;case 3:o.RSA_3072=e.bytes();break;case 4:o.ECDSA_384=e.bytes();break;case 5:o.thresholdKey=i.proto.ThresholdKey.decode(e,e.uint32());break;case 6:o.keyList=i.proto.KeyList.decode(e,e.uint32());break;case 7:o.ECDSASecp256k1=e.bytes();break;case 8:o.delegatableContractId=i.proto.ContractID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.Key"},e}(),t.ThresholdKey=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.threshold=0,e.prototype.keys=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.threshold&&Object.hasOwnProperty.call(e,"threshold")&&t.uint32(8).uint32(e.threshold),null!=e.keys&&Object.hasOwnProperty.call(e,"keys")&&i.proto.KeyList.encode(e.keys,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ThresholdKey;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.threshold=e.uint32();break;case 2:o.keys=i.proto.KeyList.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ThresholdKey"},e}(),t.KeyList=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.keys=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.keys&&e.keys.length)for(var r=0;r<e.keys.length;++r)i.proto.Key.encode(e.keys[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.KeyList;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.keys&&o.keys.length||(o.keys=[]),o.keys.push(i.proto.Key.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.KeyList"},e}(),t.Signature=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.contract=null,e.prototype.ed25519=null,e.prototype.RSA_3072=null,e.prototype.ECDSA_384=null,e.prototype.thresholdSignature=null,e.prototype.signatureList=null,Object.defineProperty(e.prototype,"signature",{get:o.oneOfGetter(t=["contract","ed25519","RSA_3072","ECDSA_384","thresholdSignature","signatureList"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.contract&&Object.hasOwnProperty.call(e,"contract")&&t.uint32(10).bytes(e.contract),null!=e.ed25519&&Object.hasOwnProperty.call(e,"ed25519")&&t.uint32(18).bytes(e.ed25519),null!=e.RSA_3072&&Object.hasOwnProperty.call(e,"RSA_3072")&&t.uint32(26).bytes(e.RSA_3072),null!=e.ECDSA_384&&Object.hasOwnProperty.call(e,"ECDSA_384")&&t.uint32(34).bytes(e.ECDSA_384),null!=e.thresholdSignature&&Object.hasOwnProperty.call(e,"thresholdSignature")&&i.proto.ThresholdSignature.encode(e.thresholdSignature,t.uint32(42).fork()).ldelim(),null!=e.signatureList&&Object.hasOwnProperty.call(e,"signatureList")&&i.proto.SignatureList.encode(e.signatureList,t.uint32(50).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.Signature;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.contract=e.bytes();break;case 2:o.ed25519=e.bytes();break;case 3:o.RSA_3072=e.bytes();break;case 4:o.ECDSA_384=e.bytes();break;case 5:o.thresholdSignature=i.proto.ThresholdSignature.decode(e,e.uint32());break;case 6:o.signatureList=i.proto.SignatureList.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.Signature"},e}(),t.ThresholdSignature=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sigs=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.sigs&&Object.hasOwnProperty.call(e,"sigs")&&i.proto.SignatureList.encode(e.sigs,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ThresholdSignature;e.pos<n;){var s=e.uint32();if(s>>>3==2)o.sigs=i.proto.SignatureList.decode(e,e.uint32());else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ThresholdSignature"},e}(),t.SignatureList=function(){function e(e){if(this.sigs=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sigs=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.sigs&&e.sigs.length)for(var r=0;r<e.sigs.length;++r)i.proto.Signature.encode(e.sigs[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SignatureList;e.pos<n;){var s=e.uint32();if(s>>>3==2)o.sigs&&o.sigs.length||(o.sigs=[]),o.sigs.push(i.proto.Signature.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SignatureList"},e}(),t.SignaturePair=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.pubKeyPrefix=o.newBuffer([]),e.prototype.contract=null,e.prototype.ed25519=null,e.prototype.RSA_3072=null,e.prototype.ECDSA_384=null,e.prototype.ECDSASecp256k1=null,Object.defineProperty(e.prototype,"signature",{get:o.oneOfGetter(t=["contract","ed25519","RSA_3072","ECDSA_384","ECDSASecp256k1"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.pubKeyPrefix&&Object.hasOwnProperty.call(e,"pubKeyPrefix")&&t.uint32(10).bytes(e.pubKeyPrefix),null!=e.contract&&Object.hasOwnProperty.call(e,"contract")&&t.uint32(18).bytes(e.contract),null!=e.ed25519&&Object.hasOwnProperty.call(e,"ed25519")&&t.uint32(26).bytes(e.ed25519),null!=e.RSA_3072&&Object.hasOwnProperty.call(e,"RSA_3072")&&t.uint32(34).bytes(e.RSA_3072),null!=e.ECDSA_384&&Object.hasOwnProperty.call(e,"ECDSA_384")&&t.uint32(42).bytes(e.ECDSA_384),null!=e.ECDSASecp256k1&&Object.hasOwnProperty.call(e,"ECDSASecp256k1")&&t.uint32(50).bytes(e.ECDSASecp256k1),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SignaturePair;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.pubKeyPrefix=e.bytes();break;case 2:o.contract=e.bytes();break;case 3:o.ed25519=e.bytes();break;case 4:o.RSA_3072=e.bytes();break;case 5:o.ECDSA_384=e.bytes();break;case 6:o.ECDSASecp256k1=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SignaturePair"},e}(),t.SignatureMap=function(){function e(e){if(this.sigPair=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sigPair=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.sigPair&&e.sigPair.length)for(var r=0;r<e.sigPair.length;++r)i.proto.SignaturePair.encode(e.sigPair[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SignatureMap;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.sigPair&&o.sigPair.length||(o.sigPair=[]),o.sigPair.push(i.proto.SignaturePair.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SignatureMap"},e}(),t.HederaFunctionality=function(){const e={},t=Object.create(e);return t[e[0]="NONE"]=0,t[e[1]="CryptoTransfer"]=1,t[e[2]="CryptoUpdate"]=2,t[e[3]="CryptoDelete"]=3,t[e[4]="CryptoAddLiveHash"]=4,t[e[5]="CryptoDeleteLiveHash"]=5,t[e[6]="ContractCall"]=6,t[e[7]="ContractCreate"]=7,t[e[8]="ContractUpdate"]=8,t[e[9]="FileCreate"]=9,t[e[10]="FileAppend"]=10,t[e[11]="FileUpdate"]=11,t[e[12]="FileDelete"]=12,t[e[13]="CryptoGetAccountBalance"]=13,t[e[14]="CryptoGetAccountRecords"]=14,t[e[15]="CryptoGetInfo"]=15,t[e[16]="ContractCallLocal"]=16,t[e[17]="ContractGetInfo"]=17,t[e[18]="ContractGetBytecode"]=18,t[e[19]="GetBySolidityID"]=19,t[e[20]="GetByKey"]=20,t[e[21]="CryptoGetLiveHash"]=21,t[e[22]="CryptoGetStakers"]=22,t[e[23]="FileGetContents"]=23,t[e[24]="FileGetInfo"]=24,t[e[25]="TransactionGetRecord"]=25,t[e[26]="ContractGetRecords"]=26,t[e[27]="CryptoCreate"]=27,t[e[28]="SystemDelete"]=28,t[e[29]="SystemUndelete"]=29,t[e[30]="ContractDelete"]=30,t[e[31]="Freeze"]=31,t[e[32]="CreateTransactionRecord"]=32,t[e[33]="CryptoAccountAutoRenew"]=33,t[e[34]="ContractAutoRenew"]=34,t[e[35]="GetVersionInfo"]=35,t[e[36]="TransactionGetReceipt"]=36,t[e[50]="ConsensusCreateTopic"]=50,t[e[51]="ConsensusUpdateTopic"]=51,t[e[52]="ConsensusDeleteTopic"]=52,t[e[53]="ConsensusGetTopicInfo"]=53,t[e[54]="ConsensusSubmitMessage"]=54,t[e[55]="UncheckedSubmit"]=55,t[e[56]="TokenCreate"]=56,t[e[58]="TokenGetInfo"]=58,t[e[59]="TokenFreezeAccount"]=59,t[e[60]="TokenUnfreezeAccount"]=60,t[e[61]="TokenGrantKycToAccount"]=61,t[e[62]="TokenRevokeKycFromAccount"]=62,t[e[63]="TokenDelete"]=63,t[e[64]="TokenUpdate"]=64,t[e[65]="TokenMint"]=65,t[e[66]="TokenBurn"]=66,t[e[67]="TokenAccountWipe"]=67,t[e[68]="TokenAssociateToAccount"]=68,t[e[69]="TokenDissociateFromAccount"]=69,t[e[70]="ScheduleCreate"]=70,t[e[71]="ScheduleDelete"]=71,t[e[72]="ScheduleSign"]=72,t[e[73]="ScheduleGetInfo"]=73,t[e[74]="TokenGetAccountNftInfos"]=74,t[e[75]="TokenGetNftInfo"]=75,t[e[76]="TokenGetNftInfos"]=76,t[e[77]="TokenFeeScheduleUpdate"]=77,t[e[78]="NetworkGetExecutionTime"]=78,t[e[79]="TokenPause"]=79,t[e[80]="TokenUnpause"]=80,t[e[81]="CryptoApproveAllowance"]=81,t[e[82]="CryptoDeleteAllowance"]=82,t[e[83]="GetAccountDetails"]=83,t[e[84]="EthereumTransaction"]=84,t[e[85]="NodeStakeUpdate"]=85,t[e[86]="UtilPrng"]=86,t[e[87]="TransactionGetFastRecord"]=87,t[e[88]="TokenUpdateNfts"]=88,t[e[89]="NodeCreate"]=89,t[e[90]="NodeUpdate"]=90,t[e[91]="NodeDelete"]=91,t[e[92]="TokenReject"]=92,t[e[93]="TokenAirdrop"]=93,t[e[94]="TokenCancelAirdrop"]=94,t[e[95]="TokenClaimAirdrop"]=95,t[e[100]="StateSignatureTransaction"]=100,t[e[101]="HintsKeyPublication"]=101,t[e[102]="HintsPreprocessingVote"]=102,t[e[103]="HintsPartialSignature"]=103,t[e[104]="HistoryAssemblySignature"]=104,t[e[105]="HistoryProofKeyPublication"]=105,t[e[106]="HistoryProofVote"]=106,t[e[107]="CrsPublication"]=107,t[e[108]="AtomicBatch"]=108,t}(),t.FeeComponents=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.min=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.max=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.constant=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.bpt=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.vpt=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.rbh=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.sbh=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.gas=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.tv=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.bpr=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.sbpr=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.min&&Object.hasOwnProperty.call(e,"min")&&t.uint32(8).int64(e.min),null!=e.max&&Object.hasOwnProperty.call(e,"max")&&t.uint32(16).int64(e.max),null!=e.constant&&Object.hasOwnProperty.call(e,"constant")&&t.uint32(24).int64(e.constant),null!=e.bpt&&Object.hasOwnProperty.call(e,"bpt")&&t.uint32(32).int64(e.bpt),null!=e.vpt&&Object.hasOwnProperty.call(e,"vpt")&&t.uint32(40).int64(e.vpt),null!=e.rbh&&Object.hasOwnProperty.call(e,"rbh")&&t.uint32(48).int64(e.rbh),null!=e.sbh&&Object.hasOwnProperty.call(e,"sbh")&&t.uint32(56).int64(e.sbh),null!=e.gas&&Object.hasOwnProperty.call(e,"gas")&&t.uint32(64).int64(e.gas),null!=e.tv&&Object.hasOwnProperty.call(e,"tv")&&t.uint32(72).int64(e.tv),null!=e.bpr&&Object.hasOwnProperty.call(e,"bpr")&&t.uint32(80).int64(e.bpr),null!=e.sbpr&&Object.hasOwnProperty.call(e,"sbpr")&&t.uint32(88).int64(e.sbpr),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FeeComponents;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.min=e.int64();break;case 2:o.max=e.int64();break;case 3:o.constant=e.int64();break;case 4:o.bpt=e.int64();break;case 5:o.vpt=e.int64();break;case 6:o.rbh=e.int64();break;case 7:o.sbh=e.int64();break;case 8:o.gas=e.int64();break;case 9:o.tv=e.int64();break;case 10:o.bpr=e.int64();break;case 11:o.sbpr=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FeeComponents"},e}(),t.TransactionFeeSchedule=function(){function e(e){if(this.fees=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.hederaFunctionality=0,e.prototype.feeData=null,e.prototype.fees=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.hederaFunctionality&&Object.hasOwnProperty.call(e,"hederaFunctionality")&&t.uint32(8).int32(e.hederaFunctionality),null!=e.feeData&&Object.hasOwnProperty.call(e,"feeData")&&i.proto.FeeData.encode(e.feeData,t.uint32(18).fork()).ldelim(),null!=e.fees&&e.fees.length)for(var r=0;r<e.fees.length;++r)i.proto.FeeData.encode(e.fees[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionFeeSchedule;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.hederaFunctionality=e.int32();break;case 2:o.feeData=i.proto.FeeData.decode(e,e.uint32());break;case 3:o.fees&&o.fees.length||(o.fees=[]),o.fees.push(i.proto.FeeData.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionFeeSchedule"},e}(),t.FeeData=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nodedata=null,e.prototype.networkdata=null,e.prototype.servicedata=null,e.prototype.subType=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.nodedata&&Object.hasOwnProperty.call(e,"nodedata")&&i.proto.FeeComponents.encode(e.nodedata,t.uint32(10).fork()).ldelim(),null!=e.networkdata&&Object.hasOwnProperty.call(e,"networkdata")&&i.proto.FeeComponents.encode(e.networkdata,t.uint32(18).fork()).ldelim(),null!=e.servicedata&&Object.hasOwnProperty.call(e,"servicedata")&&i.proto.FeeComponents.encode(e.servicedata,t.uint32(26).fork()).ldelim(),null!=e.subType&&Object.hasOwnProperty.call(e,"subType")&&t.uint32(32).int32(e.subType),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FeeData;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.nodedata=i.proto.FeeComponents.decode(e,e.uint32());break;case 2:o.networkdata=i.proto.FeeComponents.decode(e,e.uint32());break;case 3:o.servicedata=i.proto.FeeComponents.decode(e,e.uint32());break;case 4:o.subType=e.int32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FeeData"},e}(),t.FeeSchedule=function(){function e(e){if(this.transactionFeeSchedule=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.transactionFeeSchedule=o.emptyArray,e.prototype.expiryTime=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.transactionFeeSchedule&&e.transactionFeeSchedule.length)for(var r=0;r<e.transactionFeeSchedule.length;++r)i.proto.TransactionFeeSchedule.encode(e.transactionFeeSchedule[r],t.uint32(10).fork()).ldelim();return null!=e.expiryTime&&Object.hasOwnProperty.call(e,"expiryTime")&&i.proto.TimestampSeconds.encode(e.expiryTime,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FeeSchedule;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.transactionFeeSchedule&&o.transactionFeeSchedule.length||(o.transactionFeeSchedule=[]),o.transactionFeeSchedule.push(i.proto.TransactionFeeSchedule.decode(e,e.uint32()));break;case 2:o.expiryTime=i.proto.TimestampSeconds.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FeeSchedule"},e}(),t.CurrentAndNextFeeSchedule=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.currentFeeSchedule=null,e.prototype.nextFeeSchedule=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.currentFeeSchedule&&Object.hasOwnProperty.call(e,"currentFeeSchedule")&&i.proto.FeeSchedule.encode(e.currentFeeSchedule,t.uint32(10).fork()).ldelim(),null!=e.nextFeeSchedule&&Object.hasOwnProperty.call(e,"nextFeeSchedule")&&i.proto.FeeSchedule.encode(e.nextFeeSchedule,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CurrentAndNextFeeSchedule;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.currentFeeSchedule=i.proto.FeeSchedule.decode(e,e.uint32());break;case 2:o.nextFeeSchedule=i.proto.FeeSchedule.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CurrentAndNextFeeSchedule"},e}(),t.ServiceEndpoint=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.ipAddressV4=o.newBuffer([]),e.prototype.port=0,e.prototype.domainName="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.ipAddressV4&&Object.hasOwnProperty.call(e,"ipAddressV4")&&t.uint32(10).bytes(e.ipAddressV4),null!=e.port&&Object.hasOwnProperty.call(e,"port")&&t.uint32(16).int32(e.port),null!=e.domainName&&Object.hasOwnProperty.call(e,"domainName")&&t.uint32(26).string(e.domainName),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ServiceEndpoint;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.ipAddressV4=e.bytes();break;case 2:o.port=e.int32();break;case 3:o.domainName=e.string();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ServiceEndpoint"},e}(),t.NodeAddress=function(){function e(e){if(this.serviceEndpoint=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.ipAddress=o.newBuffer([]),e.prototype.portno=0,e.prototype.memo=o.newBuffer([]),e.prototype.RSA_PubKey="",e.prototype.nodeId=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.nodeAccountId=null,e.prototype.nodeCertHash=o.newBuffer([]),e.prototype.serviceEndpoint=o.emptyArray,e.prototype.description="",e.prototype.stake=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.ipAddress&&Object.hasOwnProperty.call(e,"ipAddress")&&t.uint32(10).bytes(e.ipAddress),null!=e.portno&&Object.hasOwnProperty.call(e,"portno")&&t.uint32(16).int32(e.portno),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(26).bytes(e.memo),null!=e.RSA_PubKey&&Object.hasOwnProperty.call(e,"RSA_PubKey")&&t.uint32(34).string(e.RSA_PubKey),null!=e.nodeId&&Object.hasOwnProperty.call(e,"nodeId")&&t.uint32(40).int64(e.nodeId),null!=e.nodeAccountId&&Object.hasOwnProperty.call(e,"nodeAccountId")&&i.proto.AccountID.encode(e.nodeAccountId,t.uint32(50).fork()).ldelim(),null!=e.nodeCertHash&&Object.hasOwnProperty.call(e,"nodeCertHash")&&t.uint32(58).bytes(e.nodeCertHash),null!=e.serviceEndpoint&&e.serviceEndpoint.length)for(var r=0;r<e.serviceEndpoint.length;++r)i.proto.ServiceEndpoint.encode(e.serviceEndpoint[r],t.uint32(66).fork()).ldelim();return null!=e.description&&Object.hasOwnProperty.call(e,"description")&&t.uint32(74).string(e.description),null!=e.stake&&Object.hasOwnProperty.call(e,"stake")&&t.uint32(80).int64(e.stake),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.NodeAddress;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.ipAddress=e.bytes();break;case 2:o.portno=e.int32();break;case 3:o.memo=e.bytes();break;case 4:o.RSA_PubKey=e.string();break;case 5:o.nodeId=e.int64();break;case 6:o.nodeAccountId=i.proto.AccountID.decode(e,e.uint32());break;case 7:o.nodeCertHash=e.bytes();break;case 8:o.serviceEndpoint&&o.serviceEndpoint.length||(o.serviceEndpoint=[]),o.serviceEndpoint.push(i.proto.ServiceEndpoint.decode(e,e.uint32()));break;case 9:o.description=e.string();break;case 10:o.stake=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.NodeAddress"},e}(),t.NodeAddressBook=function(){function e(e){if(this.nodeAddress=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nodeAddress=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.nodeAddress&&e.nodeAddress.length)for(var r=0;r<e.nodeAddress.length;++r)i.proto.NodeAddress.encode(e.nodeAddress[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.NodeAddressBook;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.nodeAddress&&o.nodeAddress.length||(o.nodeAddress=[]),o.nodeAddress.push(i.proto.NodeAddress.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.NodeAddressBook"},e}(),t.SemanticVersion=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.major=0,e.prototype.minor=0,e.prototype.patch=0,e.prototype.pre="",e.prototype.build="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.major&&Object.hasOwnProperty.call(e,"major")&&t.uint32(8).int32(e.major),null!=e.minor&&Object.hasOwnProperty.call(e,"minor")&&t.uint32(16).int32(e.minor),null!=e.patch&&Object.hasOwnProperty.call(e,"patch")&&t.uint32(24).int32(e.patch),null!=e.pre&&Object.hasOwnProperty.call(e,"pre")&&t.uint32(34).string(e.pre),null!=e.build&&Object.hasOwnProperty.call(e,"build")&&t.uint32(42).string(e.build),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SemanticVersion;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.major=e.int32();break;case 2:o.minor=e.int32();break;case 3:o.patch=e.int32();break;case 4:o.pre=e.string();break;case 5:o.build=e.string();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SemanticVersion"},e}(),t.Setting=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.value="",e.prototype.data=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(26).bytes(e.data),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.Setting;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.name=e.string();break;case 2:o.value=e.string();break;case 3:o.data=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.Setting"},e}(),t.ServicesConfigurationList=function(){function e(e){if(this.nameValue=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nameValue=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.nameValue&&e.nameValue.length)for(var r=0;r<e.nameValue.length;++r)i.proto.Setting.encode(e.nameValue[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ServicesConfigurationList;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.nameValue&&o.nameValue.length||(o.nameValue=[]),o.nameValue.push(i.proto.Setting.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ServicesConfigurationList"},e}(),t.TokenRelationship=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenId=null,e.prototype.symbol="",e.prototype.balance=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.kycStatus=0,e.prototype.freezeStatus=0,e.prototype.decimals=0,e.prototype.automaticAssociation=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.tokenId&&Object.hasOwnProperty.call(e,"tokenId")&&i.proto.TokenID.encode(e.tokenId,t.uint32(10).fork()).ldelim(),null!=e.symbol&&Object.hasOwnProperty.call(e,"symbol")&&t.uint32(18).string(e.symbol),null!=e.balance&&Object.hasOwnProperty.call(e,"balance")&&t.uint32(24).uint64(e.balance),null!=e.kycStatus&&Object.hasOwnProperty.call(e,"kycStatus")&&t.uint32(32).int32(e.kycStatus),null!=e.freezeStatus&&Object.hasOwnProperty.call(e,"freezeStatus")&&t.uint32(40).int32(e.freezeStatus),null!=e.decimals&&Object.hasOwnProperty.call(e,"decimals")&&t.uint32(48).uint32(e.decimals),null!=e.automaticAssociation&&Object.hasOwnProperty.call(e,"automaticAssociation")&&t.uint32(56).bool(e.automaticAssociation),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenRelationship;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.tokenId=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.symbol=e.string();break;case 3:o.balance=e.uint64();break;case 4:o.kycStatus=e.int32();break;case 5:o.freezeStatus=e.int32();break;case 6:o.decimals=e.uint32();break;case 7:o.automaticAssociation=e.bool();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenRelationship"},e}(),t.TokenBalance=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenId=null,e.prototype.balance=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.decimals=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.tokenId&&Object.hasOwnProperty.call(e,"tokenId")&&i.proto.TokenID.encode(e.tokenId,t.uint32(10).fork()).ldelim(),null!=e.balance&&Object.hasOwnProperty.call(e,"balance")&&t.uint32(16).uint64(e.balance),null!=e.decimals&&Object.hasOwnProperty.call(e,"decimals")&&t.uint32(24).uint32(e.decimals),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenBalance;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.tokenId=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.balance=e.uint64();break;case 3:o.decimals=e.uint32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenBalance"},e}(),t.TokenBalances=function(){function e(e){if(this.tokenBalances=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenBalances=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.tokenBalances&&e.tokenBalances.length)for(var r=0;r<e.tokenBalances.length;++r)i.proto.TokenBalance.encode(e.tokenBalances[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenBalances;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.tokenBalances&&o.tokenBalances.length||(o.tokenBalances=[]),o.tokenBalances.push(i.proto.TokenBalance.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenBalances"},e}(),t.TokenAssociation=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenId=null,e.prototype.accountId=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.tokenId&&Object.hasOwnProperty.call(e,"tokenId")&&i.proto.TokenID.encode(e.tokenId,t.uint32(10).fork()).ldelim(),null!=e.accountId&&Object.hasOwnProperty.call(e,"accountId")&&i.proto.AccountID.encode(e.accountId,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenAssociation;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.tokenId=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.accountId=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenAssociation"},e}(),t.StakingInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.declineReward=!1,e.prototype.stakePeriodStart=null,e.prototype.pendingReward=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.stakedToMe=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.stakedAccountId=null,e.prototype.stakedNodeId=null,Object.defineProperty(e.prototype,"stakedId",{get:o.oneOfGetter(t=["stakedAccountId","stakedNodeId"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.declineReward&&Object.hasOwnProperty.call(e,"declineReward")&&t.uint32(8).bool(e.declineReward),null!=e.stakePeriodStart&&Object.hasOwnProperty.call(e,"stakePeriodStart")&&i.proto.Timestamp.encode(e.stakePeriodStart,t.uint32(18).fork()).ldelim(),null!=e.pendingReward&&Object.hasOwnProperty.call(e,"pendingReward")&&t.uint32(24).int64(e.pendingReward),null!=e.stakedToMe&&Object.hasOwnProperty.call(e,"stakedToMe")&&t.uint32(32).int64(e.stakedToMe),null!=e.stakedAccountId&&Object.hasOwnProperty.call(e,"stakedAccountId")&&i.proto.AccountID.encode(e.stakedAccountId,t.uint32(42).fork()).ldelim(),null!=e.stakedNodeId&&Object.hasOwnProperty.call(e,"stakedNodeId")&&t.uint32(48).int64(e.stakedNodeId),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.StakingInfo;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.declineReward=e.bool();break;case 2:o.stakePeriodStart=i.proto.Timestamp.decode(e,e.uint32());break;case 3:o.pendingReward=e.int64();break;case 4:o.stakedToMe=e.int64();break;case 5:o.stakedAccountId=i.proto.AccountID.decode(e,e.uint32());break;case 6:o.stakedNodeId=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.StakingInfo"},e}(),t.PendingAirdropId=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.senderId=null,e.prototype.receiverId=null,e.prototype.fungibleTokenType=null,e.prototype.nonFungibleToken=null,Object.defineProperty(e.prototype,"tokenReference",{get:o.oneOfGetter(t=["fungibleTokenType","nonFungibleToken"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.senderId&&Object.hasOwnProperty.call(e,"senderId")&&i.proto.AccountID.encode(e.senderId,t.uint32(10).fork()).ldelim(),null!=e.receiverId&&Object.hasOwnProperty.call(e,"receiverId")&&i.proto.AccountID.encode(e.receiverId,t.uint32(18).fork()).ldelim(),null!=e.fungibleTokenType&&Object.hasOwnProperty.call(e,"fungibleTokenType")&&i.proto.TokenID.encode(e.fungibleTokenType,t.uint32(26).fork()).ldelim(),null!=e.nonFungibleToken&&Object.hasOwnProperty.call(e,"nonFungibleToken")&&i.proto.NftID.encode(e.nonFungibleToken,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.PendingAirdropId;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.senderId=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.receiverId=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.fungibleTokenType=i.proto.TokenID.decode(e,e.uint32());break;case 4:o.nonFungibleToken=i.proto.NftID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.PendingAirdropId"},e}(),t.PendingAirdropValue=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.amount=o.Long?o.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(8).uint64(e.amount),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.PendingAirdropValue;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.amount=e.uint64();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.PendingAirdropValue"},e}(),t.Timestamp=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seconds=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.nanos=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.seconds&&Object.hasOwnProperty.call(e,"seconds")&&t.uint32(8).int64(e.seconds),null!=e.nanos&&Object.hasOwnProperty.call(e,"nanos")&&t.uint32(16).int32(e.nanos),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.Timestamp;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.seconds=e.int64();break;case 2:o.nanos=e.int32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.Timestamp"},e}(),t.TimestampSeconds=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seconds=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.seconds&&Object.hasOwnProperty.call(e,"seconds")&&t.uint32(8).int64(e.seconds),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TimestampSeconds;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.seconds=e.int64();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TimestampSeconds"},e}(),t.SystemDeleteTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.fileID=null,e.prototype.contractID=null,e.prototype.expirationTime=null,Object.defineProperty(e.prototype,"id",{get:o.oneOfGetter(t=["fileID","contractID"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(10).fork()).ldelim(),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(18).fork()).ldelim(),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.TimestampSeconds.encode(e.expirationTime,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SystemDeleteTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.fileID=i.proto.FileID.decode(e,e.uint32());break;case 2:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;case 3:o.expirationTime=i.proto.TimestampSeconds.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SystemDeleteTransactionBody"},e}(),t.SystemUndeleteTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.fileID=null,e.prototype.contractID=null,Object.defineProperty(e.prototype,"id",{get:o.oneOfGetter(t=["fileID","contractID"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(10).fork()).ldelim(),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SystemUndeleteTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.fileID=i.proto.FileID.decode(e,e.uint32());break;case 2:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SystemUndeleteTransactionBody"},e}(),t.FreezeTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.startHour=0,e.prototype.startMin=0,e.prototype.endHour=0,e.prototype.endMin=0,e.prototype.updateFile=null,e.prototype.fileHash=o.newBuffer([]),e.prototype.startTime=null,e.prototype.freezeType=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.startHour&&Object.hasOwnProperty.call(e,"startHour")&&t.uint32(8).int32(e.startHour),null!=e.startMin&&Object.hasOwnProperty.call(e,"startMin")&&t.uint32(16).int32(e.startMin),null!=e.endHour&&Object.hasOwnProperty.call(e,"endHour")&&t.uint32(24).int32(e.endHour),null!=e.endMin&&Object.hasOwnProperty.call(e,"endMin")&&t.uint32(32).int32(e.endMin),null!=e.updateFile&&Object.hasOwnProperty.call(e,"updateFile")&&i.proto.FileID.encode(e.updateFile,t.uint32(42).fork()).ldelim(),null!=e.fileHash&&Object.hasOwnProperty.call(e,"fileHash")&&t.uint32(50).bytes(e.fileHash),null!=e.startTime&&Object.hasOwnProperty.call(e,"startTime")&&i.proto.Timestamp.encode(e.startTime,t.uint32(58).fork()).ldelim(),null!=e.freezeType&&Object.hasOwnProperty.call(e,"freezeType")&&t.uint32(64).int32(e.freezeType),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FreezeTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.startHour=e.int32();break;case 2:o.startMin=e.int32();break;case 3:o.endHour=e.int32();break;case 4:o.endMin=e.int32();break;case 5:o.updateFile=i.proto.FileID.decode(e,e.uint32());break;case 6:o.fileHash=e.bytes();break;case 7:o.startTime=i.proto.Timestamp.decode(e,e.uint32());break;case 8:o.freezeType=e.int32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FreezeTransactionBody"},e}(),t.FreezeType=function(){const e={},t=Object.create(e);return t[e[0]="UNKNOWN_FREEZE_TYPE"]=0,t[e[1]="FREEZE_ONLY"]=1,t[e[2]="PREPARE_UPGRADE"]=2,t[e[3]="FREEZE_UPGRADE"]=3,t[e[4]="FREEZE_ABORT"]=4,t[e[5]="TELEMETRY_UPGRADE"]=5,t}(),t.ContractCallTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.contractID=null,e.prototype.gas=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.amount=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.functionParameters=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(10).fork()).ldelim(),null!=e.gas&&Object.hasOwnProperty.call(e,"gas")&&t.uint32(16).int64(e.gas),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(24).int64(e.amount),null!=e.functionParameters&&Object.hasOwnProperty.call(e,"functionParameters")&&t.uint32(34).bytes(e.functionParameters),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractCallTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;case 2:o.gas=e.int64();break;case 3:o.amount=e.int64();break;case 4:o.functionParameters=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractCallTransactionBody"},e}(),t.ContractCreateTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.fileID=null,e.prototype.initcode=null,e.prototype.adminKey=null,e.prototype.gas=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.initialBalance=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.proxyAccountID=null,e.prototype.autoRenewPeriod=null,e.prototype.constructorParameters=o.newBuffer([]),e.prototype.shardID=null,e.prototype.realmID=null,e.prototype.newRealmAdminKey=null,e.prototype.memo="",e.prototype.maxAutomaticTokenAssociations=0,e.prototype.autoRenewAccountId=null,e.prototype.stakedAccountId=null,e.prototype.stakedNodeId=null,e.prototype.declineReward=!1,Object.defineProperty(e.prototype,"initcodeSource",{get:o.oneOfGetter(t=["fileID","initcode"]),set:o.oneOfSetter(t)}),Object.defineProperty(e.prototype,"stakedId",{get:o.oneOfGetter(t=["stakedAccountId","stakedNodeId"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(10).fork()).ldelim(),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(26).fork()).ldelim(),null!=e.gas&&Object.hasOwnProperty.call(e,"gas")&&t.uint32(32).int64(e.gas),null!=e.initialBalance&&Object.hasOwnProperty.call(e,"initialBalance")&&t.uint32(40).int64(e.initialBalance),null!=e.proxyAccountID&&Object.hasOwnProperty.call(e,"proxyAccountID")&&i.proto.AccountID.encode(e.proxyAccountID,t.uint32(50).fork()).ldelim(),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(66).fork()).ldelim(),null!=e.constructorParameters&&Object.hasOwnProperty.call(e,"constructorParameters")&&t.uint32(74).bytes(e.constructorParameters),null!=e.shardID&&Object.hasOwnProperty.call(e,"shardID")&&i.proto.ShardID.encode(e.shardID,t.uint32(82).fork()).ldelim(),null!=e.realmID&&Object.hasOwnProperty.call(e,"realmID")&&i.proto.RealmID.encode(e.realmID,t.uint32(90).fork()).ldelim(),null!=e.newRealmAdminKey&&Object.hasOwnProperty.call(e,"newRealmAdminKey")&&i.proto.Key.encode(e.newRealmAdminKey,t.uint32(98).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(106).string(e.memo),null!=e.maxAutomaticTokenAssociations&&Object.hasOwnProperty.call(e,"maxAutomaticTokenAssociations")&&t.uint32(112).int32(e.maxAutomaticTokenAssociations),null!=e.autoRenewAccountId&&Object.hasOwnProperty.call(e,"autoRenewAccountId")&&i.proto.AccountID.encode(e.autoRenewAccountId,t.uint32(122).fork()).ldelim(),null!=e.initcode&&Object.hasOwnProperty.call(e,"initcode")&&t.uint32(130).bytes(e.initcode),null!=e.stakedAccountId&&Object.hasOwnProperty.call(e,"stakedAccountId")&&i.proto.AccountID.encode(e.stakedAccountId,t.uint32(138).fork()).ldelim(),null!=e.stakedNodeId&&Object.hasOwnProperty.call(e,"stakedNodeId")&&t.uint32(144).int64(e.stakedNodeId),null!=e.declineReward&&Object.hasOwnProperty.call(e,"declineReward")&&t.uint32(152).bool(e.declineReward),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractCreateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.fileID=i.proto.FileID.decode(e,e.uint32());break;case 16:o.initcode=e.bytes();break;case 3:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 4:o.gas=e.int64();break;case 5:o.initialBalance=e.int64();break;case 6:o.proxyAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 8:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 9:o.constructorParameters=e.bytes();break;case 10:o.shardID=i.proto.ShardID.decode(e,e.uint32());break;case 11:o.realmID=i.proto.RealmID.decode(e,e.uint32());break;case 12:o.newRealmAdminKey=i.proto.Key.decode(e,e.uint32());break;case 13:o.memo=e.string();break;case 14:o.maxAutomaticTokenAssociations=e.int32();break;case 15:o.autoRenewAccountId=i.proto.AccountID.decode(e,e.uint32());break;case 17:o.stakedAccountId=i.proto.AccountID.decode(e,e.uint32());break;case 18:o.stakedNodeId=e.int64();break;case 19:o.declineReward=e.bool();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractCreateTransactionBody"},e}(),t.Duration=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.seconds=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.seconds&&Object.hasOwnProperty.call(e,"seconds")&&t.uint32(8).int64(e.seconds),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.Duration;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.seconds=e.int64();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.Duration"},e}(),t.ContractUpdateTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.contractID=null,e.prototype.expirationTime=null,e.prototype.adminKey=null,e.prototype.proxyAccountID=null,e.prototype.autoRenewPeriod=null,e.prototype.fileID=null,e.prototype.memo=null,e.prototype.memoWrapper=null,e.prototype.maxAutomaticTokenAssociations=null,e.prototype.autoRenewAccountId=null,e.prototype.stakedAccountId=null,e.prototype.stakedNodeId=null,e.prototype.declineReward=null,Object.defineProperty(e.prototype,"memoField",{get:o.oneOfGetter(t=["memo","memoWrapper"]),set:o.oneOfSetter(t)}),Object.defineProperty(e.prototype,"stakedId",{get:o.oneOfGetter(t=["stakedAccountId","stakedNodeId"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(10).fork()).ldelim(),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.Timestamp.encode(e.expirationTime,t.uint32(18).fork()).ldelim(),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(26).fork()).ldelim(),null!=e.proxyAccountID&&Object.hasOwnProperty.call(e,"proxyAccountID")&&i.proto.AccountID.encode(e.proxyAccountID,t.uint32(50).fork()).ldelim(),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(58).fork()).ldelim(),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(66).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(74).string(e.memo),null!=e.memoWrapper&&Object.hasOwnProperty.call(e,"memoWrapper")&&i.google.protobuf.StringValue.encode(e.memoWrapper,t.uint32(82).fork()).ldelim(),null!=e.maxAutomaticTokenAssociations&&Object.hasOwnProperty.call(e,"maxAutomaticTokenAssociations")&&i.google.protobuf.Int32Value.encode(e.maxAutomaticTokenAssociations,t.uint32(90).fork()).ldelim(),null!=e.autoRenewAccountId&&Object.hasOwnProperty.call(e,"autoRenewAccountId")&&i.proto.AccountID.encode(e.autoRenewAccountId,t.uint32(98).fork()).ldelim(),null!=e.stakedAccountId&&Object.hasOwnProperty.call(e,"stakedAccountId")&&i.proto.AccountID.encode(e.stakedAccountId,t.uint32(106).fork()).ldelim(),null!=e.stakedNodeId&&Object.hasOwnProperty.call(e,"stakedNodeId")&&t.uint32(112).int64(e.stakedNodeId),null!=e.declineReward&&Object.hasOwnProperty.call(e,"declineReward")&&i.google.protobuf.BoolValue.encode(e.declineReward,t.uint32(122).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractUpdateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;case 2:o.expirationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 3:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 6:o.proxyAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 7:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 8:o.fileID=i.proto.FileID.decode(e,e.uint32());break;case 9:o.memo=e.string();break;case 10:o.memoWrapper=i.google.protobuf.StringValue.decode(e,e.uint32());break;case 11:o.maxAutomaticTokenAssociations=i.google.protobuf.Int32Value.decode(e,e.uint32());break;case 12:o.autoRenewAccountId=i.proto.AccountID.decode(e,e.uint32());break;case 13:o.stakedAccountId=i.proto.AccountID.decode(e,e.uint32());break;case 14:o.stakedNodeId=e.int64();break;case 15:o.declineReward=i.google.protobuf.BoolValue.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractUpdateTransactionBody"},e}(),t.LiveHash=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.accountId=null,e.prototype.hash=o.newBuffer([]),e.prototype.keys=null,e.prototype.duration=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.accountId&&Object.hasOwnProperty.call(e,"accountId")&&i.proto.AccountID.encode(e.accountId,t.uint32(10).fork()).ldelim(),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(18).bytes(e.hash),null!=e.keys&&Object.hasOwnProperty.call(e,"keys")&&i.proto.KeyList.encode(e.keys,t.uint32(26).fork()).ldelim(),null!=e.duration&&Object.hasOwnProperty.call(e,"duration")&&i.proto.Duration.encode(e.duration,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.LiveHash;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.accountId=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.hash=e.bytes();break;case 3:o.keys=i.proto.KeyList.decode(e,e.uint32());break;case 5:o.duration=i.proto.Duration.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.LiveHash"},e}(),t.CryptoAddLiveHashTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.liveHash=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.liveHash&&Object.hasOwnProperty.call(e,"liveHash")&&i.proto.LiveHash.encode(e.liveHash,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoAddLiveHashTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==3)o.liveHash=i.proto.LiveHash.decode(e,e.uint32());else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoAddLiveHashTransactionBody"},e}(),t.CryptoCreateTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.key=null,e.prototype.initialBalance=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.proxyAccountID=null,e.prototype.sendRecordThreshold=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.receiveRecordThreshold=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.receiverSigRequired=!1,e.prototype.autoRenewPeriod=null,e.prototype.shardID=null,e.prototype.realmID=null,e.prototype.newRealmAdminKey=null,e.prototype.memo="",e.prototype.maxAutomaticTokenAssociations=0,e.prototype.stakedAccountId=null,e.prototype.stakedNodeId=null,e.prototype.declineReward=!1,e.prototype.alias=o.newBuffer([]),Object.defineProperty(e.prototype,"stakedId",{get:o.oneOfGetter(t=["stakedAccountId","stakedNodeId"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&i.proto.Key.encode(e.key,t.uint32(10).fork()).ldelim(),null!=e.initialBalance&&Object.hasOwnProperty.call(e,"initialBalance")&&t.uint32(16).uint64(e.initialBalance),null!=e.proxyAccountID&&Object.hasOwnProperty.call(e,"proxyAccountID")&&i.proto.AccountID.encode(e.proxyAccountID,t.uint32(26).fork()).ldelim(),null!=e.sendRecordThreshold&&Object.hasOwnProperty.call(e,"sendRecordThreshold")&&t.uint32(48).uint64(e.sendRecordThreshold),null!=e.receiveRecordThreshold&&Object.hasOwnProperty.call(e,"receiveRecordThreshold")&&t.uint32(56).uint64(e.receiveRecordThreshold),null!=e.receiverSigRequired&&Object.hasOwnProperty.call(e,"receiverSigRequired")&&t.uint32(64).bool(e.receiverSigRequired),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(74).fork()).ldelim(),null!=e.shardID&&Object.hasOwnProperty.call(e,"shardID")&&i.proto.ShardID.encode(e.shardID,t.uint32(82).fork()).ldelim(),null!=e.realmID&&Object.hasOwnProperty.call(e,"realmID")&&i.proto.RealmID.encode(e.realmID,t.uint32(90).fork()).ldelim(),null!=e.newRealmAdminKey&&Object.hasOwnProperty.call(e,"newRealmAdminKey")&&i.proto.Key.encode(e.newRealmAdminKey,t.uint32(98).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(106).string(e.memo),null!=e.maxAutomaticTokenAssociations&&Object.hasOwnProperty.call(e,"maxAutomaticTokenAssociations")&&t.uint32(112).int32(e.maxAutomaticTokenAssociations),null!=e.stakedAccountId&&Object.hasOwnProperty.call(e,"stakedAccountId")&&i.proto.AccountID.encode(e.stakedAccountId,t.uint32(122).fork()).ldelim(),null!=e.stakedNodeId&&Object.hasOwnProperty.call(e,"stakedNodeId")&&t.uint32(128).int64(e.stakedNodeId),null!=e.declineReward&&Object.hasOwnProperty.call(e,"declineReward")&&t.uint32(136).bool(e.declineReward),null!=e.alias&&Object.hasOwnProperty.call(e,"alias")&&t.uint32(146).bytes(e.alias),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoCreateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.key=i.proto.Key.decode(e,e.uint32());break;case 2:o.initialBalance=e.uint64();break;case 3:o.proxyAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 6:o.sendRecordThreshold=e.uint64();break;case 7:o.receiveRecordThreshold=e.uint64();break;case 8:o.receiverSigRequired=e.bool();break;case 9:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 10:o.shardID=i.proto.ShardID.decode(e,e.uint32());break;case 11:o.realmID=i.proto.RealmID.decode(e,e.uint32());break;case 12:o.newRealmAdminKey=i.proto.Key.decode(e,e.uint32());break;case 13:o.memo=e.string();break;case 14:o.maxAutomaticTokenAssociations=e.int32();break;case 15:o.stakedAccountId=i.proto.AccountID.decode(e,e.uint32());break;case 16:o.stakedNodeId=e.int64();break;case 17:o.declineReward=e.bool();break;case 18:o.alias=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoCreateTransactionBody"},e}(),t.CryptoDeleteTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.transferAccountID=null,e.prototype.deleteAccountID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.transferAccountID&&Object.hasOwnProperty.call(e,"transferAccountID")&&i.proto.AccountID.encode(e.transferAccountID,t.uint32(10).fork()).ldelim(),null!=e.deleteAccountID&&Object.hasOwnProperty.call(e,"deleteAccountID")&&i.proto.AccountID.encode(e.deleteAccountID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoDeleteTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.transferAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.deleteAccountID=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoDeleteTransactionBody"},e}(),t.CryptoDeleteLiveHashTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.accountOfLiveHash=null,e.prototype.liveHashToDelete=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.accountOfLiveHash&&Object.hasOwnProperty.call(e,"accountOfLiveHash")&&i.proto.AccountID.encode(e.accountOfLiveHash,t.uint32(10).fork()).ldelim(),null!=e.liveHashToDelete&&Object.hasOwnProperty.call(e,"liveHashToDelete")&&t.uint32(18).bytes(e.liveHashToDelete),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoDeleteLiveHashTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.accountOfLiveHash=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.liveHashToDelete=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoDeleteLiveHashTransactionBody"},e}(),t.CryptoTransferTransactionBody=function(){function e(e){if(this.tokenTransfers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.transfers=null,e.prototype.tokenTransfers=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.transfers&&Object.hasOwnProperty.call(e,"transfers")&&i.proto.TransferList.encode(e.transfers,t.uint32(10).fork()).ldelim(),null!=e.tokenTransfers&&e.tokenTransfers.length)for(var r=0;r<e.tokenTransfers.length;++r)i.proto.TokenTransferList.encode(e.tokenTransfers[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoTransferTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.transfers=i.proto.TransferList.decode(e,e.uint32());break;case 2:o.tokenTransfers&&o.tokenTransfers.length||(o.tokenTransfers=[]),o.tokenTransfers.push(i.proto.TokenTransferList.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoTransferTransactionBody"},e}(),t.CryptoUpdateTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.accountIDToUpdate=null,e.prototype.key=null,e.prototype.proxyAccountID=null,e.prototype.proxyFraction=0,e.prototype.sendRecordThreshold=null,e.prototype.sendRecordThresholdWrapper=null,e.prototype.receiveRecordThreshold=null,e.prototype.receiveRecordThresholdWrapper=null,e.prototype.autoRenewPeriod=null,e.prototype.expirationTime=null,e.prototype.receiverSigRequired=null,e.prototype.receiverSigRequiredWrapper=null,e.prototype.memo=null,e.prototype.maxAutomaticTokenAssociations=null,e.prototype.stakedAccountId=null,e.prototype.stakedNodeId=null,e.prototype.declineReward=null,Object.defineProperty(e.prototype,"sendRecordThresholdField",{get:o.oneOfGetter(t=["sendRecordThreshold","sendRecordThresholdWrapper"]),set:o.oneOfSetter(t)}),Object.defineProperty(e.prototype,"receiveRecordThresholdField",{get:o.oneOfGetter(t=["receiveRecordThreshold","receiveRecordThresholdWrapper"]),set:o.oneOfSetter(t)}),Object.defineProperty(e.prototype,"receiverSigRequiredField",{get:o.oneOfGetter(t=["receiverSigRequired","receiverSigRequiredWrapper"]),set:o.oneOfSetter(t)}),Object.defineProperty(e.prototype,"stakedId",{get:o.oneOfGetter(t=["stakedAccountId","stakedNodeId"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.accountIDToUpdate&&Object.hasOwnProperty.call(e,"accountIDToUpdate")&&i.proto.AccountID.encode(e.accountIDToUpdate,t.uint32(18).fork()).ldelim(),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&i.proto.Key.encode(e.key,t.uint32(26).fork()).ldelim(),null!=e.proxyAccountID&&Object.hasOwnProperty.call(e,"proxyAccountID")&&i.proto.AccountID.encode(e.proxyAccountID,t.uint32(34).fork()).ldelim(),null!=e.proxyFraction&&Object.hasOwnProperty.call(e,"proxyFraction")&&t.uint32(40).int32(e.proxyFraction),null!=e.sendRecordThreshold&&Object.hasOwnProperty.call(e,"sendRecordThreshold")&&t.uint32(48).uint64(e.sendRecordThreshold),null!=e.receiveRecordThreshold&&Object.hasOwnProperty.call(e,"receiveRecordThreshold")&&t.uint32(56).uint64(e.receiveRecordThreshold),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(66).fork()).ldelim(),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.Timestamp.encode(e.expirationTime,t.uint32(74).fork()).ldelim(),null!=e.receiverSigRequired&&Object.hasOwnProperty.call(e,"receiverSigRequired")&&t.uint32(80).bool(e.receiverSigRequired),null!=e.sendRecordThresholdWrapper&&Object.hasOwnProperty.call(e,"sendRecordThresholdWrapper")&&i.google.protobuf.UInt64Value.encode(e.sendRecordThresholdWrapper,t.uint32(90).fork()).ldelim(),null!=e.receiveRecordThresholdWrapper&&Object.hasOwnProperty.call(e,"receiveRecordThresholdWrapper")&&i.google.protobuf.UInt64Value.encode(e.receiveRecordThresholdWrapper,t.uint32(98).fork()).ldelim(),null!=e.receiverSigRequiredWrapper&&Object.hasOwnProperty.call(e,"receiverSigRequiredWrapper")&&i.google.protobuf.BoolValue.encode(e.receiverSigRequiredWrapper,t.uint32(106).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&i.google.protobuf.StringValue.encode(e.memo,t.uint32(114).fork()).ldelim(),null!=e.maxAutomaticTokenAssociations&&Object.hasOwnProperty.call(e,"maxAutomaticTokenAssociations")&&i.google.protobuf.Int32Value.encode(e.maxAutomaticTokenAssociations,t.uint32(122).fork()).ldelim(),null!=e.stakedAccountId&&Object.hasOwnProperty.call(e,"stakedAccountId")&&i.proto.AccountID.encode(e.stakedAccountId,t.uint32(130).fork()).ldelim(),null!=e.stakedNodeId&&Object.hasOwnProperty.call(e,"stakedNodeId")&&t.uint32(136).int64(e.stakedNodeId),null!=e.declineReward&&Object.hasOwnProperty.call(e,"declineReward")&&i.google.protobuf.BoolValue.encode(e.declineReward,t.uint32(146).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoUpdateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 2:o.accountIDToUpdate=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.key=i.proto.Key.decode(e,e.uint32());break;case 4:o.proxyAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 5:o.proxyFraction=e.int32();break;case 6:o.sendRecordThreshold=e.uint64();break;case 11:o.sendRecordThresholdWrapper=i.google.protobuf.UInt64Value.decode(e,e.uint32());break;case 7:o.receiveRecordThreshold=e.uint64();break;case 12:o.receiveRecordThresholdWrapper=i.google.protobuf.UInt64Value.decode(e,e.uint32());break;case 8:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 9:o.expirationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 10:o.receiverSigRequired=e.bool();break;case 13:o.receiverSigRequiredWrapper=i.google.protobuf.BoolValue.decode(e,e.uint32());break;case 14:o.memo=i.google.protobuf.StringValue.decode(e,e.uint32());break;case 15:o.maxAutomaticTokenAssociations=i.google.protobuf.Int32Value.decode(e,e.uint32());break;case 16:o.stakedAccountId=i.proto.AccountID.decode(e,e.uint32());break;case 17:o.stakedNodeId=e.int64();break;case 18:o.declineReward=i.google.protobuf.BoolValue.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoUpdateTransactionBody"},e}(),t.CryptoApproveAllowanceTransactionBody=function(){function e(e){if(this.cryptoAllowances=[],this.nftAllowances=[],this.tokenAllowances=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.cryptoAllowances=o.emptyArray,e.prototype.nftAllowances=o.emptyArray,e.prototype.tokenAllowances=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.cryptoAllowances&&e.cryptoAllowances.length)for(var r=0;r<e.cryptoAllowances.length;++r)i.proto.CryptoAllowance.encode(e.cryptoAllowances[r],t.uint32(10).fork()).ldelim();if(null!=e.nftAllowances&&e.nftAllowances.length)for(r=0;r<e.nftAllowances.length;++r)i.proto.NftAllowance.encode(e.nftAllowances[r],t.uint32(18).fork()).ldelim();if(null!=e.tokenAllowances&&e.tokenAllowances.length)for(r=0;r<e.tokenAllowances.length;++r)i.proto.TokenAllowance.encode(e.tokenAllowances[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoApproveAllowanceTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.cryptoAllowances&&o.cryptoAllowances.length||(o.cryptoAllowances=[]),o.cryptoAllowances.push(i.proto.CryptoAllowance.decode(e,e.uint32()));break;case 2:o.nftAllowances&&o.nftAllowances.length||(o.nftAllowances=[]),o.nftAllowances.push(i.proto.NftAllowance.decode(e,e.uint32()));break;case 3:o.tokenAllowances&&o.tokenAllowances.length||(o.tokenAllowances=[]),o.tokenAllowances.push(i.proto.TokenAllowance.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoApproveAllowanceTransactionBody"},e}(),t.CryptoAllowance=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.owner=null,e.prototype.spender=null,e.prototype.amount=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.owner&&Object.hasOwnProperty.call(e,"owner")&&i.proto.AccountID.encode(e.owner,t.uint32(10).fork()).ldelim(),null!=e.spender&&Object.hasOwnProperty.call(e,"spender")&&i.proto.AccountID.encode(e.spender,t.uint32(18).fork()).ldelim(),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(24).int64(e.amount),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoAllowance;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.owner=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.spender=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.amount=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoAllowance"},e}(),t.NftAllowance=function(){function e(e){if(this.serialNumbers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenId=null,e.prototype.owner=null,e.prototype.spender=null,e.prototype.serialNumbers=o.emptyArray,e.prototype.approvedForAll=null,e.prototype.delegatingSpender=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.tokenId&&Object.hasOwnProperty.call(e,"tokenId")&&i.proto.TokenID.encode(e.tokenId,t.uint32(10).fork()).ldelim(),null!=e.owner&&Object.hasOwnProperty.call(e,"owner")&&i.proto.AccountID.encode(e.owner,t.uint32(18).fork()).ldelim(),null!=e.spender&&Object.hasOwnProperty.call(e,"spender")&&i.proto.AccountID.encode(e.spender,t.uint32(26).fork()).ldelim(),null!=e.serialNumbers&&e.serialNumbers.length){t.uint32(34).fork();for(var r=0;r<e.serialNumbers.length;++r)t.int64(e.serialNumbers[r]);t.ldelim()}return null!=e.approvedForAll&&Object.hasOwnProperty.call(e,"approvedForAll")&&i.google.protobuf.BoolValue.encode(e.approvedForAll,t.uint32(42).fork()).ldelim(),null!=e.delegatingSpender&&Object.hasOwnProperty.call(e,"delegatingSpender")&&i.proto.AccountID.encode(e.delegatingSpender,t.uint32(50).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.NftAllowance;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.tokenId=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.owner=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.spender=i.proto.AccountID.decode(e,e.uint32());break;case 4:if(o.serialNumbers&&o.serialNumbers.length||(o.serialNumbers=[]),2==(7&s))for(var a=e.uint32()+e.pos;e.pos<a;)o.serialNumbers.push(e.int64());else o.serialNumbers.push(e.int64());break;case 5:o.approvedForAll=i.google.protobuf.BoolValue.decode(e,e.uint32());break;case 6:o.delegatingSpender=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.NftAllowance"},e}(),t.TokenAllowance=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenId=null,e.prototype.owner=null,e.prototype.spender=null,e.prototype.amount=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.tokenId&&Object.hasOwnProperty.call(e,"tokenId")&&i.proto.TokenID.encode(e.tokenId,t.uint32(10).fork()).ldelim(),null!=e.owner&&Object.hasOwnProperty.call(e,"owner")&&i.proto.AccountID.encode(e.owner,t.uint32(18).fork()).ldelim(),null!=e.spender&&Object.hasOwnProperty.call(e,"spender")&&i.proto.AccountID.encode(e.spender,t.uint32(26).fork()).ldelim(),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(32).int64(e.amount),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenAllowance;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.tokenId=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.owner=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.spender=i.proto.AccountID.decode(e,e.uint32());break;case 4:o.amount=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenAllowance"},e}(),t.CryptoDeleteAllowanceTransactionBody=function(){function e(e){if(this.nftAllowances=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nftAllowances=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.nftAllowances&&e.nftAllowances.length)for(var r=0;r<e.nftAllowances.length;++r)i.proto.NftRemoveAllowance.encode(e.nftAllowances[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoDeleteAllowanceTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==2)o.nftAllowances&&o.nftAllowances.length||(o.nftAllowances=[]),o.nftAllowances.push(i.proto.NftRemoveAllowance.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoDeleteAllowanceTransactionBody"},e}(),t.NftRemoveAllowance=function(){function e(e){if(this.serialNumbers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenId=null,e.prototype.owner=null,e.prototype.serialNumbers=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.tokenId&&Object.hasOwnProperty.call(e,"tokenId")&&i.proto.TokenID.encode(e.tokenId,t.uint32(10).fork()).ldelim(),null!=e.owner&&Object.hasOwnProperty.call(e,"owner")&&i.proto.AccountID.encode(e.owner,t.uint32(18).fork()).ldelim(),null!=e.serialNumbers&&e.serialNumbers.length){t.uint32(26).fork();for(var r=0;r<e.serialNumbers.length;++r)t.int64(e.serialNumbers[r]);t.ldelim()}return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.NftRemoveAllowance;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.tokenId=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.owner=i.proto.AccountID.decode(e,e.uint32());break;case 3:if(o.serialNumbers&&o.serialNumbers.length||(o.serialNumbers=[]),2==(7&s))for(var a=e.uint32()+e.pos;e.pos<a;)o.serialNumbers.push(e.int64());else o.serialNumbers.push(e.int64());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.NftRemoveAllowance"},e}(),t.EthereumTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.ethereumData=o.newBuffer([]),e.prototype.callData=null,e.prototype.maxGasAllowance=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.ethereumData&&Object.hasOwnProperty.call(e,"ethereumData")&&t.uint32(10).bytes(e.ethereumData),null!=e.callData&&Object.hasOwnProperty.call(e,"callData")&&i.proto.FileID.encode(e.callData,t.uint32(18).fork()).ldelim(),null!=e.maxGasAllowance&&Object.hasOwnProperty.call(e,"maxGasAllowance")&&t.uint32(24).int64(e.maxGasAllowance),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.EthereumTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.ethereumData=e.bytes();break;case 2:o.callData=i.proto.FileID.decode(e,e.uint32());break;case 3:o.maxGasAllowance=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.EthereumTransactionBody"},e}(),t.FileAppendTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.fileID=null,e.prototype.contents=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(18).fork()).ldelim(),null!=e.contents&&Object.hasOwnProperty.call(e,"contents")&&t.uint32(34).bytes(e.contents),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FileAppendTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 2:o.fileID=i.proto.FileID.decode(e,e.uint32());break;case 4:o.contents=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FileAppendTransactionBody"},e}(),t.FileCreateTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.expirationTime=null,e.prototype.keys=null,e.prototype.contents=o.newBuffer([]),e.prototype.shardID=null,e.prototype.realmID=null,e.prototype.newRealmAdminKey=null,e.prototype.memo="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.Timestamp.encode(e.expirationTime,t.uint32(18).fork()).ldelim(),null!=e.keys&&Object.hasOwnProperty.call(e,"keys")&&i.proto.KeyList.encode(e.keys,t.uint32(26).fork()).ldelim(),null!=e.contents&&Object.hasOwnProperty.call(e,"contents")&&t.uint32(34).bytes(e.contents),null!=e.shardID&&Object.hasOwnProperty.call(e,"shardID")&&i.proto.ShardID.encode(e.shardID,t.uint32(42).fork()).ldelim(),null!=e.realmID&&Object.hasOwnProperty.call(e,"realmID")&&i.proto.RealmID.encode(e.realmID,t.uint32(50).fork()).ldelim(),null!=e.newRealmAdminKey&&Object.hasOwnProperty.call(e,"newRealmAdminKey")&&i.proto.Key.encode(e.newRealmAdminKey,t.uint32(58).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(66).string(e.memo),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FileCreateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 2:o.expirationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 3:o.keys=i.proto.KeyList.decode(e,e.uint32());break;case 4:o.contents=e.bytes();break;case 5:o.shardID=i.proto.ShardID.decode(e,e.uint32());break;case 6:o.realmID=i.proto.RealmID.decode(e,e.uint32());break;case 7:o.newRealmAdminKey=i.proto.Key.decode(e,e.uint32());break;case 8:o.memo=e.string();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FileCreateTransactionBody"},e}(),t.FileDeleteTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.fileID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FileDeleteTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==2)o.fileID=i.proto.FileID.decode(e,e.uint32());else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FileDeleteTransactionBody"},e}(),t.FileUpdateTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.fileID=null,e.prototype.expirationTime=null,e.prototype.keys=null,e.prototype.contents=o.newBuffer([]),e.prototype.memo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(10).fork()).ldelim(),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.Timestamp.encode(e.expirationTime,t.uint32(18).fork()).ldelim(),null!=e.keys&&Object.hasOwnProperty.call(e,"keys")&&i.proto.KeyList.encode(e.keys,t.uint32(26).fork()).ldelim(),null!=e.contents&&Object.hasOwnProperty.call(e,"contents")&&t.uint32(34).bytes(e.contents),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&i.google.protobuf.StringValue.encode(e.memo,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FileUpdateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.fileID=i.proto.FileID.decode(e,e.uint32());break;case 2:o.expirationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 3:o.keys=i.proto.KeyList.decode(e,e.uint32());break;case 4:o.contents=e.bytes();break;case 5:o.memo=i.google.protobuf.StringValue.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FileUpdateTransactionBody"},e}(),t.ContractDeleteTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.contractID=null,e.prototype.transferAccountID=null,e.prototype.transferContractID=null,e.prototype.permanentRemoval=!1,Object.defineProperty(e.prototype,"obtainers",{get:o.oneOfGetter(t=["transferAccountID","transferContractID"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(10).fork()).ldelim(),null!=e.transferAccountID&&Object.hasOwnProperty.call(e,"transferAccountID")&&i.proto.AccountID.encode(e.transferAccountID,t.uint32(18).fork()).ldelim(),null!=e.transferContractID&&Object.hasOwnProperty.call(e,"transferContractID")&&i.proto.ContractID.encode(e.transferContractID,t.uint32(26).fork()).ldelim(),null!=e.permanentRemoval&&Object.hasOwnProperty.call(e,"permanentRemoval")&&t.uint32(32).bool(e.permanentRemoval),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractDeleteTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;case 2:o.transferAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.transferContractID=i.proto.ContractID.decode(e,e.uint32());break;case 4:o.permanentRemoval=e.bool();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractDeleteTransactionBody"},e}(),t.ConsensusCreateTopicTransactionBody=function(){function e(e){if(this.feeExemptKeyList=[],this.customFees=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.memo="",e.prototype.adminKey=null,e.prototype.submitKey=null,e.prototype.autoRenewPeriod=null,e.prototype.autoRenewAccount=null,e.prototype.feeScheduleKey=null,e.prototype.feeExemptKeyList=o.emptyArray,e.prototype.customFees=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(10).string(e.memo),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(18).fork()).ldelim(),null!=e.submitKey&&Object.hasOwnProperty.call(e,"submitKey")&&i.proto.Key.encode(e.submitKey,t.uint32(26).fork()).ldelim(),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(50).fork()).ldelim(),null!=e.autoRenewAccount&&Object.hasOwnProperty.call(e,"autoRenewAccount")&&i.proto.AccountID.encode(e.autoRenewAccount,t.uint32(58).fork()).ldelim(),null!=e.feeScheduleKey&&Object.hasOwnProperty.call(e,"feeScheduleKey")&&i.proto.Key.encode(e.feeScheduleKey,t.uint32(66).fork()).ldelim(),null!=e.feeExemptKeyList&&e.feeExemptKeyList.length)for(var r=0;r<e.feeExemptKeyList.length;++r)i.proto.Key.encode(e.feeExemptKeyList[r],t.uint32(74).fork()).ldelim();if(null!=e.customFees&&e.customFees.length)for(r=0;r<e.customFees.length;++r)i.proto.FixedCustomFee.encode(e.customFees[r],t.uint32(82).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ConsensusCreateTopicTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.memo=e.string();break;case 2:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 3:o.submitKey=i.proto.Key.decode(e,e.uint32());break;case 6:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 7:o.autoRenewAccount=i.proto.AccountID.decode(e,e.uint32());break;case 8:o.feeScheduleKey=i.proto.Key.decode(e,e.uint32());break;case 9:o.feeExemptKeyList&&o.feeExemptKeyList.length||(o.feeExemptKeyList=[]),o.feeExemptKeyList.push(i.proto.Key.decode(e,e.uint32()));break;case 10:o.customFees&&o.customFees.length||(o.customFees=[]),o.customFees.push(i.proto.FixedCustomFee.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ConsensusCreateTopicTransactionBody"},e}(),t.FractionalFee=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.fractionalAmount=null,e.prototype.minimumAmount=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.maximumAmount=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.netOfTransfers=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fractionalAmount&&Object.hasOwnProperty.call(e,"fractionalAmount")&&i.proto.Fraction.encode(e.fractionalAmount,t.uint32(10).fork()).ldelim(),null!=e.minimumAmount&&Object.hasOwnProperty.call(e,"minimumAmount")&&t.uint32(16).int64(e.minimumAmount),null!=e.maximumAmount&&Object.hasOwnProperty.call(e,"maximumAmount")&&t.uint32(24).int64(e.maximumAmount),null!=e.netOfTransfers&&Object.hasOwnProperty.call(e,"netOfTransfers")&&t.uint32(32).bool(e.netOfTransfers),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FractionalFee;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.fractionalAmount=i.proto.Fraction.decode(e,e.uint32());break;case 2:o.minimumAmount=e.int64();break;case 3:o.maximumAmount=e.int64();break;case 4:o.netOfTransfers=e.bool();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FractionalFee"},e}(),t.FixedFee=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.amount=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.denominatingTokenId=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(8).int64(e.amount),null!=e.denominatingTokenId&&Object.hasOwnProperty.call(e,"denominatingTokenId")&&i.proto.TokenID.encode(e.denominatingTokenId,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FixedFee;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.amount=e.int64();break;case 2:o.denominatingTokenId=i.proto.TokenID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FixedFee"},e}(),t.RoyaltyFee=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.exchangeValueFraction=null,e.prototype.fallbackFee=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.exchangeValueFraction&&Object.hasOwnProperty.call(e,"exchangeValueFraction")&&i.proto.Fraction.encode(e.exchangeValueFraction,t.uint32(10).fork()).ldelim(),null!=e.fallbackFee&&Object.hasOwnProperty.call(e,"fallbackFee")&&i.proto.FixedFee.encode(e.fallbackFee,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.RoyaltyFee;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.exchangeValueFraction=i.proto.Fraction.decode(e,e.uint32());break;case 2:o.fallbackFee=i.proto.FixedFee.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.RoyaltyFee"},e}(),t.CustomFee=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.fixedFee=null,e.prototype.fractionalFee=null,e.prototype.royaltyFee=null,e.prototype.feeCollectorAccountId=null,e.prototype.allCollectorsAreExempt=!1,Object.defineProperty(e.prototype,"fee",{get:o.oneOfGetter(t=["fixedFee","fractionalFee","royaltyFee"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fixedFee&&Object.hasOwnProperty.call(e,"fixedFee")&&i.proto.FixedFee.encode(e.fixedFee,t.uint32(10).fork()).ldelim(),null!=e.fractionalFee&&Object.hasOwnProperty.call(e,"fractionalFee")&&i.proto.FractionalFee.encode(e.fractionalFee,t.uint32(18).fork()).ldelim(),null!=e.feeCollectorAccountId&&Object.hasOwnProperty.call(e,"feeCollectorAccountId")&&i.proto.AccountID.encode(e.feeCollectorAccountId,t.uint32(26).fork()).ldelim(),null!=e.royaltyFee&&Object.hasOwnProperty.call(e,"royaltyFee")&&i.proto.RoyaltyFee.encode(e.royaltyFee,t.uint32(34).fork()).ldelim(),null!=e.allCollectorsAreExempt&&Object.hasOwnProperty.call(e,"allCollectorsAreExempt")&&t.uint32(40).bool(e.allCollectorsAreExempt),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CustomFee;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.fixedFee=i.proto.FixedFee.decode(e,e.uint32());break;case 2:o.fractionalFee=i.proto.FractionalFee.decode(e,e.uint32());break;case 4:o.royaltyFee=i.proto.RoyaltyFee.decode(e,e.uint32());break;case 3:o.feeCollectorAccountId=i.proto.AccountID.decode(e,e.uint32());break;case 5:o.allCollectorsAreExempt=e.bool();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CustomFee"},e}(),t.AssessedCustomFee=function(){function e(e){if(this.effectivePayerAccountId=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.amount=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.tokenId=null,e.prototype.feeCollectorAccountId=null,e.prototype.effectivePayerAccountId=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(8).int64(e.amount),null!=e.tokenId&&Object.hasOwnProperty.call(e,"tokenId")&&i.proto.TokenID.encode(e.tokenId,t.uint32(18).fork()).ldelim(),null!=e.feeCollectorAccountId&&Object.hasOwnProperty.call(e,"feeCollectorAccountId")&&i.proto.AccountID.encode(e.feeCollectorAccountId,t.uint32(26).fork()).ldelim(),null!=e.effectivePayerAccountId&&e.effectivePayerAccountId.length)for(var r=0;r<e.effectivePayerAccountId.length;++r)i.proto.AccountID.encode(e.effectivePayerAccountId[r],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.AssessedCustomFee;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.amount=e.int64();break;case 2:o.tokenId=i.proto.TokenID.decode(e,e.uint32());break;case 3:o.feeCollectorAccountId=i.proto.AccountID.decode(e,e.uint32());break;case 4:o.effectivePayerAccountId&&o.effectivePayerAccountId.length||(o.effectivePayerAccountId=[]),o.effectivePayerAccountId.push(i.proto.AccountID.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.AssessedCustomFee"},e}(),t.FixedCustomFee=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.fixedFee=null,e.prototype.feeCollectorAccountId=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fixedFee&&Object.hasOwnProperty.call(e,"fixedFee")&&i.proto.FixedFee.encode(e.fixedFee,t.uint32(10).fork()).ldelim(),null!=e.feeCollectorAccountId&&Object.hasOwnProperty.call(e,"feeCollectorAccountId")&&i.proto.AccountID.encode(e.feeCollectorAccountId,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FixedCustomFee;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.fixedFee=i.proto.FixedFee.decode(e,e.uint32());break;case 2:o.feeCollectorAccountId=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FixedCustomFee"},e}(),t.FixedCustomFeeList=function(){function e(e){if(this.fees=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.fees=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.fees&&e.fees.length)for(var r=0;r<e.fees.length;++r)i.proto.FixedCustomFee.encode(e.fees[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FixedCustomFeeList;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.fees&&o.fees.length||(o.fees=[]),o.fees.push(i.proto.FixedCustomFee.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FixedCustomFeeList"},e}(),t.FeeExemptKeyList=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.keys=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.keys&&e.keys.length)for(var r=0;r<e.keys.length;++r)i.proto.Key.encode(e.keys[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FeeExemptKeyList;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.keys&&o.keys.length||(o.keys=[]),o.keys.push(i.proto.Key.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FeeExemptKeyList"},e}(),t.CustomFeeLimit=function(){function e(e){if(this.fees=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.accountId=null,e.prototype.fees=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.accountId&&Object.hasOwnProperty.call(e,"accountId")&&i.proto.AccountID.encode(e.accountId,t.uint32(10).fork()).ldelim(),null!=e.fees&&e.fees.length)for(var r=0;r<e.fees.length;++r)i.proto.FixedFee.encode(e.fees[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CustomFeeLimit;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.accountId=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.fees&&o.fees.length||(o.fees=[]),o.fees.push(i.proto.FixedFee.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CustomFeeLimit"},e}(),t.ConsensusUpdateTopicTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.topicID=null,e.prototype.memo=null,e.prototype.expirationTime=null,e.prototype.adminKey=null,e.prototype.submitKey=null,e.prototype.autoRenewPeriod=null,e.prototype.autoRenewAccount=null,e.prototype.feeScheduleKey=null,e.prototype.feeExemptKeyList=null,e.prototype.customFees=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&i.proto.TopicID.encode(e.topicID,t.uint32(10).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&i.google.protobuf.StringValue.encode(e.memo,t.uint32(18).fork()).ldelim(),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.Timestamp.encode(e.expirationTime,t.uint32(34).fork()).ldelim(),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(50).fork()).ldelim(),null!=e.submitKey&&Object.hasOwnProperty.call(e,"submitKey")&&i.proto.Key.encode(e.submitKey,t.uint32(58).fork()).ldelim(),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(66).fork()).ldelim(),null!=e.autoRenewAccount&&Object.hasOwnProperty.call(e,"autoRenewAccount")&&i.proto.AccountID.encode(e.autoRenewAccount,t.uint32(74).fork()).ldelim(),null!=e.feeScheduleKey&&Object.hasOwnProperty.call(e,"feeScheduleKey")&&i.proto.Key.encode(e.feeScheduleKey,t.uint32(82).fork()).ldelim(),null!=e.feeExemptKeyList&&Object.hasOwnProperty.call(e,"feeExemptKeyList")&&i.proto.FeeExemptKeyList.encode(e.feeExemptKeyList,t.uint32(90).fork()).ldelim(),null!=e.customFees&&Object.hasOwnProperty.call(e,"customFees")&&i.proto.FixedCustomFeeList.encode(e.customFees,t.uint32(98).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ConsensusUpdateTopicTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.topicID=i.proto.TopicID.decode(e,e.uint32());break;case 2:o.memo=i.google.protobuf.StringValue.decode(e,e.uint32());break;case 4:o.expirationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 6:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 7:o.submitKey=i.proto.Key.decode(e,e.uint32());break;case 8:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 9:o.autoRenewAccount=i.proto.AccountID.decode(e,e.uint32());break;case 10:o.feeScheduleKey=i.proto.Key.decode(e,e.uint32());break;case 11:o.feeExemptKeyList=i.proto.FeeExemptKeyList.decode(e,e.uint32());break;case 12:o.customFees=i.proto.FixedCustomFeeList.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ConsensusUpdateTopicTransactionBody"},e}(),t.ConsensusDeleteTopicTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.topicID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&i.proto.TopicID.encode(e.topicID,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ConsensusDeleteTopicTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.topicID=i.proto.TopicID.decode(e,e.uint32());else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ConsensusDeleteTopicTransactionBody"},e}(),t.ConsensusMessageChunkInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.initialTransactionID=null,e.prototype.total=0,e.prototype.number=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.initialTransactionID&&Object.hasOwnProperty.call(e,"initialTransactionID")&&i.proto.TransactionID.encode(e.initialTransactionID,t.uint32(10).fork()).ldelim(),null!=e.total&&Object.hasOwnProperty.call(e,"total")&&t.uint32(16).int32(e.total),null!=e.number&&Object.hasOwnProperty.call(e,"number")&&t.uint32(24).int32(e.number),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ConsensusMessageChunkInfo;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.initialTransactionID=i.proto.TransactionID.decode(e,e.uint32());break;case 2:o.total=e.int32();break;case 3:o.number=e.int32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ConsensusMessageChunkInfo"},e}(),t.ConsensusSubmitMessageTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.topicID=null,e.prototype.message=o.newBuffer([]),e.prototype.chunkInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&i.proto.TopicID.encode(e.topicID,t.uint32(10).fork()).ldelim(),null!=e.message&&Object.hasOwnProperty.call(e,"message")&&t.uint32(18).bytes(e.message),null!=e.chunkInfo&&Object.hasOwnProperty.call(e,"chunkInfo")&&i.proto.ConsensusMessageChunkInfo.encode(e.chunkInfo,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ConsensusSubmitMessageTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.topicID=i.proto.TopicID.decode(e,e.uint32());break;case 2:o.message=e.bytes();break;case 3:o.chunkInfo=i.proto.ConsensusMessageChunkInfo.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ConsensusSubmitMessageTransactionBody"},e}(),t.UncheckedSubmitBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.transactionBytes=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.transactionBytes&&Object.hasOwnProperty.call(e,"transactionBytes")&&t.uint32(10).bytes(e.transactionBytes),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.UncheckedSubmitBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.transactionBytes=e.bytes();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.UncheckedSubmitBody"},e}(),t.TokenCreateTransactionBody=function(){function e(e){if(this.customFees=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.symbol="",e.prototype.decimals=0,e.prototype.initialSupply=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.treasury=null,e.prototype.adminKey=null,e.prototype.kycKey=null,e.prototype.freezeKey=null,e.prototype.wipeKey=null,e.prototype.supplyKey=null,e.prototype.freezeDefault=!1,e.prototype.expiry=null,e.prototype.autoRenewAccount=null,e.prototype.autoRenewPeriod=null,e.prototype.memo="",e.prototype.tokenType=0,e.prototype.supplyType=0,e.prototype.maxSupply=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.feeScheduleKey=null,e.prototype.customFees=o.emptyArray,e.prototype.pauseKey=null,e.prototype.metadata=o.newBuffer([]),e.prototype.metadataKey=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.symbol&&Object.hasOwnProperty.call(e,"symbol")&&t.uint32(18).string(e.symbol),null!=e.decimals&&Object.hasOwnProperty.call(e,"decimals")&&t.uint32(24).uint32(e.decimals),null!=e.initialSupply&&Object.hasOwnProperty.call(e,"initialSupply")&&t.uint32(32).uint64(e.initialSupply),null!=e.treasury&&Object.hasOwnProperty.call(e,"treasury")&&i.proto.AccountID.encode(e.treasury,t.uint32(42).fork()).ldelim(),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(50).fork()).ldelim(),null!=e.kycKey&&Object.hasOwnProperty.call(e,"kycKey")&&i.proto.Key.encode(e.kycKey,t.uint32(58).fork()).ldelim(),null!=e.freezeKey&&Object.hasOwnProperty.call(e,"freezeKey")&&i.proto.Key.encode(e.freezeKey,t.uint32(66).fork()).ldelim(),null!=e.wipeKey&&Object.hasOwnProperty.call(e,"wipeKey")&&i.proto.Key.encode(e.wipeKey,t.uint32(74).fork()).ldelim(),null!=e.supplyKey&&Object.hasOwnProperty.call(e,"supplyKey")&&i.proto.Key.encode(e.supplyKey,t.uint32(82).fork()).ldelim(),null!=e.freezeDefault&&Object.hasOwnProperty.call(e,"freezeDefault")&&t.uint32(88).bool(e.freezeDefault),null!=e.expiry&&Object.hasOwnProperty.call(e,"expiry")&&i.proto.Timestamp.encode(e.expiry,t.uint32(106).fork()).ldelim(),null!=e.autoRenewAccount&&Object.hasOwnProperty.call(e,"autoRenewAccount")&&i.proto.AccountID.encode(e.autoRenewAccount,t.uint32(114).fork()).ldelim(),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(122).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(130).string(e.memo),null!=e.tokenType&&Object.hasOwnProperty.call(e,"tokenType")&&t.uint32(136).int32(e.tokenType),null!=e.supplyType&&Object.hasOwnProperty.call(e,"supplyType")&&t.uint32(144).int32(e.supplyType),null!=e.maxSupply&&Object.hasOwnProperty.call(e,"maxSupply")&&t.uint32(152).int64(e.maxSupply),null!=e.feeScheduleKey&&Object.hasOwnProperty.call(e,"feeScheduleKey")&&i.proto.Key.encode(e.feeScheduleKey,t.uint32(162).fork()).ldelim(),null!=e.customFees&&e.customFees.length)for(var r=0;r<e.customFees.length;++r)i.proto.CustomFee.encode(e.customFees[r],t.uint32(170).fork()).ldelim();return null!=e.pauseKey&&Object.hasOwnProperty.call(e,"pauseKey")&&i.proto.Key.encode(e.pauseKey,t.uint32(178).fork()).ldelim(),null!=e.metadata&&Object.hasOwnProperty.call(e,"metadata")&&t.uint32(186).bytes(e.metadata),null!=e.metadataKey&&Object.hasOwnProperty.call(e,"metadataKey")&&i.proto.Key.encode(e.metadataKey,t.uint32(194).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenCreateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.name=e.string();break;case 2:o.symbol=e.string();break;case 3:o.decimals=e.uint32();break;case 4:o.initialSupply=e.uint64();break;case 5:o.treasury=i.proto.AccountID.decode(e,e.uint32());break;case 6:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 7:o.kycKey=i.proto.Key.decode(e,e.uint32());break;case 8:o.freezeKey=i.proto.Key.decode(e,e.uint32());break;case 9:o.wipeKey=i.proto.Key.decode(e,e.uint32());break;case 10:o.supplyKey=i.proto.Key.decode(e,e.uint32());break;case 11:o.freezeDefault=e.bool();break;case 13:o.expiry=i.proto.Timestamp.decode(e,e.uint32());break;case 14:o.autoRenewAccount=i.proto.AccountID.decode(e,e.uint32());break;case 15:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 16:o.memo=e.string();break;case 17:o.tokenType=e.int32();break;case 18:o.supplyType=e.int32();break;case 19:o.maxSupply=e.int64();break;case 20:o.feeScheduleKey=i.proto.Key.decode(e,e.uint32());break;case 21:o.customFees&&o.customFees.length||(o.customFees=[]),o.customFees.push(i.proto.CustomFee.decode(e,e.uint32()));break;case 22:o.pauseKey=i.proto.Key.decode(e,e.uint32());break;case 23:o.metadata=e.bytes();break;case 24:o.metadataKey=i.proto.Key.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenCreateTransactionBody"},e}(),t.TokenFreezeAccountTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.prototype.account=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&i.proto.AccountID.encode(e.account,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenFreezeAccountTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.token=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.account=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenFreezeAccountTransactionBody"},e}(),t.TokenUnfreezeAccountTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.prototype.account=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&i.proto.AccountID.encode(e.account,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenUnfreezeAccountTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.token=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.account=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenUnfreezeAccountTransactionBody"},e}(),t.TokenGrantKycTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.prototype.account=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&i.proto.AccountID.encode(e.account,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenGrantKycTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.token=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.account=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenGrantKycTransactionBody"},e}(),t.TokenRevokeKycTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.prototype.account=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&i.proto.AccountID.encode(e.account,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenRevokeKycTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.token=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.account=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenRevokeKycTransactionBody"},e}(),t.TokenDeleteTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenDeleteTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.token=i.proto.TokenID.decode(e,e.uint32());else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenDeleteTransactionBody"},e}(),t.TokenUpdateTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.prototype.symbol="",e.prototype.name="",e.prototype.treasury=null,e.prototype.adminKey=null,e.prototype.kycKey=null,e.prototype.freezeKey=null,e.prototype.wipeKey=null,e.prototype.supplyKey=null,e.prototype.autoRenewAccount=null,e.prototype.autoRenewPeriod=null,e.prototype.expiry=null,e.prototype.memo=null,e.prototype.feeScheduleKey=null,e.prototype.pauseKey=null,e.prototype.metadata=null,e.prototype.metadataKey=null,e.prototype.keyVerificationMode=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),null!=e.symbol&&Object.hasOwnProperty.call(e,"symbol")&&t.uint32(18).string(e.symbol),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(26).string(e.name),null!=e.treasury&&Object.hasOwnProperty.call(e,"treasury")&&i.proto.AccountID.encode(e.treasury,t.uint32(34).fork()).ldelim(),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(42).fork()).ldelim(),null!=e.kycKey&&Object.hasOwnProperty.call(e,"kycKey")&&i.proto.Key.encode(e.kycKey,t.uint32(50).fork()).ldelim(),null!=e.freezeKey&&Object.hasOwnProperty.call(e,"freezeKey")&&i.proto.Key.encode(e.freezeKey,t.uint32(58).fork()).ldelim(),null!=e.wipeKey&&Object.hasOwnProperty.call(e,"wipeKey")&&i.proto.Key.encode(e.wipeKey,t.uint32(66).fork()).ldelim(),null!=e.supplyKey&&Object.hasOwnProperty.call(e,"supplyKey")&&i.proto.Key.encode(e.supplyKey,t.uint32(74).fork()).ldelim(),null!=e.autoRenewAccount&&Object.hasOwnProperty.call(e,"autoRenewAccount")&&i.proto.AccountID.encode(e.autoRenewAccount,t.uint32(82).fork()).ldelim(),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(90).fork()).ldelim(),null!=e.expiry&&Object.hasOwnProperty.call(e,"expiry")&&i.proto.Timestamp.encode(e.expiry,t.uint32(98).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&i.google.protobuf.StringValue.encode(e.memo,t.uint32(106).fork()).ldelim(),null!=e.feeScheduleKey&&Object.hasOwnProperty.call(e,"feeScheduleKey")&&i.proto.Key.encode(e.feeScheduleKey,t.uint32(114).fork()).ldelim(),null!=e.pauseKey&&Object.hasOwnProperty.call(e,"pauseKey")&&i.proto.Key.encode(e.pauseKey,t.uint32(122).fork()).ldelim(),null!=e.metadata&&Object.hasOwnProperty.call(e,"metadata")&&i.google.protobuf.BytesValue.encode(e.metadata,t.uint32(130).fork()).ldelim(),null!=e.metadataKey&&Object.hasOwnProperty.call(e,"metadataKey")&&i.proto.Key.encode(e.metadataKey,t.uint32(138).fork()).ldelim(),null!=e.keyVerificationMode&&Object.hasOwnProperty.call(e,"keyVerificationMode")&&t.uint32(144).int32(e.keyVerificationMode),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenUpdateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.token=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.symbol=e.string();break;case 3:o.name=e.string();break;case 4:o.treasury=i.proto.AccountID.decode(e,e.uint32());break;case 5:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 6:o.kycKey=i.proto.Key.decode(e,e.uint32());break;case 7:o.freezeKey=i.proto.Key.decode(e,e.uint32());break;case 8:o.wipeKey=i.proto.Key.decode(e,e.uint32());break;case 9:o.supplyKey=i.proto.Key.decode(e,e.uint32());break;case 10:o.autoRenewAccount=i.proto.AccountID.decode(e,e.uint32());break;case 11:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 12:o.expiry=i.proto.Timestamp.decode(e,e.uint32());break;case 13:o.memo=i.google.protobuf.StringValue.decode(e,e.uint32());break;case 14:o.feeScheduleKey=i.proto.Key.decode(e,e.uint32());break;case 15:o.pauseKey=i.proto.Key.decode(e,e.uint32());break;case 16:o.metadata=i.google.protobuf.BytesValue.decode(e,e.uint32());break;case 17:o.metadataKey=i.proto.Key.decode(e,e.uint32());break;case 18:o.keyVerificationMode=e.int32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenUpdateTransactionBody"},e}(),t.TokenMintTransactionBody=function(){function e(e){if(this.metadata=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.prototype.amount=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.metadata=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(16).uint64(e.amount),null!=e.metadata&&e.metadata.length)for(var r=0;r<e.metadata.length;++r)t.uint32(26).bytes(e.metadata[r]);return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenMintTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.token=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.amount=e.uint64();break;case 3:o.metadata&&o.metadata.length||(o.metadata=[]),o.metadata.push(e.bytes());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenMintTransactionBody"},e}(),t.TokenBurnTransactionBody=function(){function e(e){if(this.serialNumbers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.prototype.amount=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.serialNumbers=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(16).uint64(e.amount),null!=e.serialNumbers&&e.serialNumbers.length){t.uint32(26).fork();for(var r=0;r<e.serialNumbers.length;++r)t.int64(e.serialNumbers[r]);t.ldelim()}return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenBurnTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.token=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.amount=e.uint64();break;case 3:if(o.serialNumbers&&o.serialNumbers.length||(o.serialNumbers=[]),2==(7&s))for(var a=e.uint32()+e.pos;e.pos<a;)o.serialNumbers.push(e.int64());else o.serialNumbers.push(e.int64());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenBurnTransactionBody"},e}(),t.TokenWipeAccountTransactionBody=function(){function e(e){if(this.serialNumbers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.prototype.account=null,e.prototype.amount=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.serialNumbers=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&i.proto.AccountID.encode(e.account,t.uint32(18).fork()).ldelim(),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(24).uint64(e.amount),null!=e.serialNumbers&&e.serialNumbers.length){t.uint32(34).fork();for(var r=0;r<e.serialNumbers.length;++r)t.int64(e.serialNumbers[r]);t.ldelim()}return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenWipeAccountTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.token=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.account=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.amount=e.uint64();break;case 4:if(o.serialNumbers&&o.serialNumbers.length||(o.serialNumbers=[]),2==(7&s))for(var a=e.uint32()+e.pos;e.pos<a;)o.serialNumbers.push(e.int64());else o.serialNumbers.push(e.int64());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenWipeAccountTransactionBody"},e}(),t.TokenAssociateTransactionBody=function(){function e(e){if(this.tokens=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.account=null,e.prototype.tokens=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&i.proto.AccountID.encode(e.account,t.uint32(10).fork()).ldelim(),null!=e.tokens&&e.tokens.length)for(var r=0;r<e.tokens.length;++r)i.proto.TokenID.encode(e.tokens[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenAssociateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.account=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.tokens&&o.tokens.length||(o.tokens=[]),o.tokens.push(i.proto.TokenID.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenAssociateTransactionBody"},e}(),t.TokenDissociateTransactionBody=function(){function e(e){if(this.tokens=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.account=null,e.prototype.tokens=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&i.proto.AccountID.encode(e.account,t.uint32(10).fork()).ldelim(),null!=e.tokens&&e.tokens.length)for(var r=0;r<e.tokens.length;++r)i.proto.TokenID.encode(e.tokens[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenDissociateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.account=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.tokens&&o.tokens.length||(o.tokens=[]),o.tokens.push(i.proto.TokenID.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenDissociateTransactionBody"},e}(),t.TokenFeeScheduleUpdateTransactionBody=function(){function e(e){if(this.customFees=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenId=null,e.prototype.customFees=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.tokenId&&Object.hasOwnProperty.call(e,"tokenId")&&i.proto.TokenID.encode(e.tokenId,t.uint32(10).fork()).ldelim(),null!=e.customFees&&e.customFees.length)for(var r=0;r<e.customFees.length;++r)i.proto.CustomFee.encode(e.customFees[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenFeeScheduleUpdateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.tokenId=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.customFees&&o.customFees.length||(o.customFees=[]),o.customFees.push(i.proto.CustomFee.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenFeeScheduleUpdateTransactionBody"},e}(),t.TokenPauseTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenPauseTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.token=i.proto.TokenID.decode(e,e.uint32());else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenPauseTransactionBody"},e}(),t.TokenUnpauseTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenUnpauseTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.token=i.proto.TokenID.decode(e,e.uint32());else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenUnpauseTransactionBody"},e}(),t.TokenUpdateNftsTransactionBody=function(){function e(e){if(this.serialNumbers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.token=null,e.prototype.serialNumbers=o.emptyArray,e.prototype.metadata=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(10).fork()).ldelim(),null!=e.serialNumbers&&e.serialNumbers.length){t.uint32(18).fork();for(var r=0;r<e.serialNumbers.length;++r)t.int64(e.serialNumbers[r]);t.ldelim()}return null!=e.metadata&&Object.hasOwnProperty.call(e,"metadata")&&i.google.protobuf.BytesValue.encode(e.metadata,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenUpdateNftsTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.token=i.proto.TokenID.decode(e,e.uint32());break;case 2:if(o.serialNumbers&&o.serialNumbers.length||(o.serialNumbers=[]),2==(7&s))for(var a=e.uint32()+e.pos;e.pos<a;)o.serialNumbers.push(e.int64());else o.serialNumbers.push(e.int64());break;case 3:o.metadata=i.google.protobuf.BytesValue.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenUpdateNftsTransactionBody"},e}(),t.TokenRejectTransactionBody=function(){function e(e){if(this.rejections=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.owner=null,e.prototype.rejections=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.owner&&Object.hasOwnProperty.call(e,"owner")&&i.proto.AccountID.encode(e.owner,t.uint32(10).fork()).ldelim(),null!=e.rejections&&e.rejections.length)for(var r=0;r<e.rejections.length;++r)i.proto.TokenReference.encode(e.rejections[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenRejectTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.owner=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.rejections&&o.rejections.length||(o.rejections=[]),o.rejections.push(i.proto.TokenReference.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenRejectTransactionBody"},e}(),t.TokenReference=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.fungibleToken=null,e.prototype.nft=null,Object.defineProperty(e.prototype,"tokenIdentifier",{get:o.oneOfGetter(t=["fungibleToken","nft"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fungibleToken&&Object.hasOwnProperty.call(e,"fungibleToken")&&i.proto.TokenID.encode(e.fungibleToken,t.uint32(10).fork()).ldelim(),null!=e.nft&&Object.hasOwnProperty.call(e,"nft")&&i.proto.NftID.encode(e.nft,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenReference;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.fungibleToken=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.nft=i.proto.NftID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenReference"},e}(),t.TokenAirdropTransactionBody=function(){function e(e){if(this.tokenTransfers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenTransfers=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.tokenTransfers&&e.tokenTransfers.length)for(var r=0;r<e.tokenTransfers.length;++r)i.proto.TokenTransferList.encode(e.tokenTransfers[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenAirdropTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.tokenTransfers&&o.tokenTransfers.length||(o.tokenTransfers=[]),o.tokenTransfers.push(i.proto.TokenTransferList.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenAirdropTransactionBody"},e}(),t.TokenCancelAirdropTransactionBody=function(){function e(e){if(this.pendingAirdrops=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.pendingAirdrops=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.pendingAirdrops&&e.pendingAirdrops.length)for(var r=0;r<e.pendingAirdrops.length;++r)i.proto.PendingAirdropId.encode(e.pendingAirdrops[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenCancelAirdropTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.pendingAirdrops&&o.pendingAirdrops.length||(o.pendingAirdrops=[]),o.pendingAirdrops.push(i.proto.PendingAirdropId.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenCancelAirdropTransactionBody"},e}(),t.TokenClaimAirdropTransactionBody=function(){function e(e){if(this.pendingAirdrops=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.pendingAirdrops=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.pendingAirdrops&&e.pendingAirdrops.length)for(var r=0;r<e.pendingAirdrops.length;++r)i.proto.PendingAirdropId.encode(e.pendingAirdrops[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenClaimAirdropTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.pendingAirdrops&&o.pendingAirdrops.length||(o.pendingAirdrops=[]),o.pendingAirdrops.push(i.proto.PendingAirdropId.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenClaimAirdropTransactionBody"},e}(),t.ScheduleCreateTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.scheduledTransactionBody=null,e.prototype.memo="",e.prototype.adminKey=null,e.prototype.payerAccountID=null,e.prototype.expirationTime=null,e.prototype.waitForExpiry=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.scheduledTransactionBody&&Object.hasOwnProperty.call(e,"scheduledTransactionBody")&&i.proto.SchedulableTransactionBody.encode(e.scheduledTransactionBody,t.uint32(10).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(18).string(e.memo),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(26).fork()).ldelim(),null!=e.payerAccountID&&Object.hasOwnProperty.call(e,"payerAccountID")&&i.proto.AccountID.encode(e.payerAccountID,t.uint32(34).fork()).ldelim(),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.Timestamp.encode(e.expirationTime,t.uint32(42).fork()).ldelim(),null!=e.waitForExpiry&&Object.hasOwnProperty.call(e,"waitForExpiry")&&t.uint32(104).bool(e.waitForExpiry),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ScheduleCreateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.scheduledTransactionBody=i.proto.SchedulableTransactionBody.decode(e,e.uint32());break;case 2:o.memo=e.string();break;case 3:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 4:o.payerAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 5:o.expirationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 13:o.waitForExpiry=e.bool();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ScheduleCreateTransactionBody"},e}(),t.SchedulableTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.transactionFee=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.memo="",e.prototype.contractCall=null,e.prototype.contractCreateInstance=null,e.prototype.contractUpdateInstance=null,e.prototype.contractDeleteInstance=null,e.prototype.cryptoCreateAccount=null,e.prototype.cryptoDelete=null,e.prototype.cryptoTransfer=null,e.prototype.cryptoUpdateAccount=null,e.prototype.fileAppend=null,e.prototype.fileCreate=null,e.prototype.fileDelete=null,e.prototype.fileUpdate=null,e.prototype.systemDelete=null,e.prototype.systemUndelete=null,e.prototype.freeze=null,e.prototype.consensusCreateTopic=null,e.prototype.consensusUpdateTopic=null,e.prototype.consensusDeleteTopic=null,e.prototype.consensusSubmitMessage=null,e.prototype.tokenCreation=null,e.prototype.tokenFreeze=null,e.prototype.tokenUnfreeze=null,e.prototype.tokenGrantKyc=null,e.prototype.tokenRevokeKyc=null,e.prototype.tokenDeletion=null,e.prototype.tokenUpdate=null,e.prototype.tokenMint=null,e.prototype.tokenBurn=null,e.prototype.tokenWipe=null,e.prototype.tokenAssociate=null,e.prototype.tokenDissociate=null,e.prototype.scheduleDelete=null,e.prototype.tokenPause=null,e.prototype.tokenUnpause=null,e.prototype.cryptoApproveAllowance=null,e.prototype.cryptoDeleteAllowance=null,e.prototype.tokenFeeScheduleUpdate=null,e.prototype.utilPrng=null,e.prototype.tokenUpdateNfts=null,e.prototype.nodeCreate=null,e.prototype.nodeUpdate=null,e.prototype.nodeDelete=null,e.prototype.tokenReject=null,e.prototype.tokenCancelAirdrop=null,e.prototype.tokenClaimAirdrop=null,e.prototype.tokenAirdrop=null,Object.defineProperty(e.prototype,"data",{get:o.oneOfGetter(t=["contractCall","contractCreateInstance","contractUpdateInstance","contractDeleteInstance","cryptoCreateAccount","cryptoDelete","cryptoTransfer","cryptoUpdateAccount","fileAppend","fileCreate","fileDelete","fileUpdate","systemDelete","systemUndelete","freeze","consensusCreateTopic","consensusUpdateTopic","consensusDeleteTopic","consensusSubmitMessage","tokenCreation","tokenFreeze","tokenUnfreeze","tokenGrantKyc","tokenRevokeKyc","tokenDeletion","tokenUpdate","tokenMint","tokenBurn","tokenWipe","tokenAssociate","tokenDissociate","scheduleDelete","tokenPause","tokenUnpause","cryptoApproveAllowance","cryptoDeleteAllowance","tokenFeeScheduleUpdate","utilPrng","tokenUpdateNfts","nodeCreate","nodeUpdate","nodeDelete","tokenReject","tokenCancelAirdrop","tokenClaimAirdrop","tokenAirdrop"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.transactionFee&&Object.hasOwnProperty.call(e,"transactionFee")&&t.uint32(8).uint64(e.transactionFee),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(18).string(e.memo),null!=e.contractCall&&Object.hasOwnProperty.call(e,"contractCall")&&i.proto.ContractCallTransactionBody.encode(e.contractCall,t.uint32(26).fork()).ldelim(),null!=e.contractCreateInstance&&Object.hasOwnProperty.call(e,"contractCreateInstance")&&i.proto.ContractCreateTransactionBody.encode(e.contractCreateInstance,t.uint32(34).fork()).ldelim(),null!=e.contractUpdateInstance&&Object.hasOwnProperty.call(e,"contractUpdateInstance")&&i.proto.ContractUpdateTransactionBody.encode(e.contractUpdateInstance,t.uint32(42).fork()).ldelim(),null!=e.contractDeleteInstance&&Object.hasOwnProperty.call(e,"contractDeleteInstance")&&i.proto.ContractDeleteTransactionBody.encode(e.contractDeleteInstance,t.uint32(50).fork()).ldelim(),null!=e.cryptoCreateAccount&&Object.hasOwnProperty.call(e,"cryptoCreateAccount")&&i.proto.CryptoCreateTransactionBody.encode(e.cryptoCreateAccount,t.uint32(58).fork()).ldelim(),null!=e.cryptoDelete&&Object.hasOwnProperty.call(e,"cryptoDelete")&&i.proto.CryptoDeleteTransactionBody.encode(e.cryptoDelete,t.uint32(66).fork()).ldelim(),null!=e.cryptoTransfer&&Object.hasOwnProperty.call(e,"cryptoTransfer")&&i.proto.CryptoTransferTransactionBody.encode(e.cryptoTransfer,t.uint32(74).fork()).ldelim(),null!=e.cryptoUpdateAccount&&Object.hasOwnProperty.call(e,"cryptoUpdateAccount")&&i.proto.CryptoUpdateTransactionBody.encode(e.cryptoUpdateAccount,t.uint32(82).fork()).ldelim(),null!=e.fileAppend&&Object.hasOwnProperty.call(e,"fileAppend")&&i.proto.FileAppendTransactionBody.encode(e.fileAppend,t.uint32(90).fork()).ldelim(),null!=e.fileCreate&&Object.hasOwnProperty.call(e,"fileCreate")&&i.proto.FileCreateTransactionBody.encode(e.fileCreate,t.uint32(98).fork()).ldelim(),null!=e.fileDelete&&Object.hasOwnProperty.call(e,"fileDelete")&&i.proto.FileDeleteTransactionBody.encode(e.fileDelete,t.uint32(106).fork()).ldelim(),null!=e.fileUpdate&&Object.hasOwnProperty.call(e,"fileUpdate")&&i.proto.FileUpdateTransactionBody.encode(e.fileUpdate,t.uint32(114).fork()).ldelim(),null!=e.systemDelete&&Object.hasOwnProperty.call(e,"systemDelete")&&i.proto.SystemDeleteTransactionBody.encode(e.systemDelete,t.uint32(122).fork()).ldelim(),null!=e.systemUndelete&&Object.hasOwnProperty.call(e,"systemUndelete")&&i.proto.SystemUndeleteTransactionBody.encode(e.systemUndelete,t.uint32(130).fork()).ldelim(),null!=e.freeze&&Object.hasOwnProperty.call(e,"freeze")&&i.proto.FreezeTransactionBody.encode(e.freeze,t.uint32(138).fork()).ldelim(),null!=e.consensusCreateTopic&&Object.hasOwnProperty.call(e,"consensusCreateTopic")&&i.proto.ConsensusCreateTopicTransactionBody.encode(e.consensusCreateTopic,t.uint32(146).fork()).ldelim(),null!=e.consensusUpdateTopic&&Object.hasOwnProperty.call(e,"consensusUpdateTopic")&&i.proto.ConsensusUpdateTopicTransactionBody.encode(e.consensusUpdateTopic,t.uint32(154).fork()).ldelim(),null!=e.consensusDeleteTopic&&Object.hasOwnProperty.call(e,"consensusDeleteTopic")&&i.proto.ConsensusDeleteTopicTransactionBody.encode(e.consensusDeleteTopic,t.uint32(162).fork()).ldelim(),null!=e.consensusSubmitMessage&&Object.hasOwnProperty.call(e,"consensusSubmitMessage")&&i.proto.ConsensusSubmitMessageTransactionBody.encode(e.consensusSubmitMessage,t.uint32(170).fork()).ldelim(),null!=e.tokenCreation&&Object.hasOwnProperty.call(e,"tokenCreation")&&i.proto.TokenCreateTransactionBody.encode(e.tokenCreation,t.uint32(178).fork()).ldelim(),null!=e.tokenFreeze&&Object.hasOwnProperty.call(e,"tokenFreeze")&&i.proto.TokenFreezeAccountTransactionBody.encode(e.tokenFreeze,t.uint32(186).fork()).ldelim(),null!=e.tokenUnfreeze&&Object.hasOwnProperty.call(e,"tokenUnfreeze")&&i.proto.TokenUnfreezeAccountTransactionBody.encode(e.tokenUnfreeze,t.uint32(194).fork()).ldelim(),null!=e.tokenGrantKyc&&Object.hasOwnProperty.call(e,"tokenGrantKyc")&&i.proto.TokenGrantKycTransactionBody.encode(e.tokenGrantKyc,t.uint32(202).fork()).ldelim(),null!=e.tokenRevokeKyc&&Object.hasOwnProperty.call(e,"tokenRevokeKyc")&&i.proto.TokenRevokeKycTransactionBody.encode(e.tokenRevokeKyc,t.uint32(210).fork()).ldelim(),null!=e.tokenDeletion&&Object.hasOwnProperty.call(e,"tokenDeletion")&&i.proto.TokenDeleteTransactionBody.encode(e.tokenDeletion,t.uint32(218).fork()).ldelim(),null!=e.tokenUpdate&&Object.hasOwnProperty.call(e,"tokenUpdate")&&i.proto.TokenUpdateTransactionBody.encode(e.tokenUpdate,t.uint32(226).fork()).ldelim(),null!=e.tokenMint&&Object.hasOwnProperty.call(e,"tokenMint")&&i.proto.TokenMintTransactionBody.encode(e.tokenMint,t.uint32(234).fork()).ldelim(),null!=e.tokenBurn&&Object.hasOwnProperty.call(e,"tokenBurn")&&i.proto.TokenBurnTransactionBody.encode(e.tokenBurn,t.uint32(242).fork()).ldelim(),null!=e.tokenWipe&&Object.hasOwnProperty.call(e,"tokenWipe")&&i.proto.TokenWipeAccountTransactionBody.encode(e.tokenWipe,t.uint32(250).fork()).ldelim(),null!=e.tokenAssociate&&Object.hasOwnProperty.call(e,"tokenAssociate")&&i.proto.TokenAssociateTransactionBody.encode(e.tokenAssociate,t.uint32(258).fork()).ldelim(),null!=e.tokenDissociate&&Object.hasOwnProperty.call(e,"tokenDissociate")&&i.proto.TokenDissociateTransactionBody.encode(e.tokenDissociate,t.uint32(266).fork()).ldelim(),null!=e.scheduleDelete&&Object.hasOwnProperty.call(e,"scheduleDelete")&&i.proto.ScheduleDeleteTransactionBody.encode(e.scheduleDelete,t.uint32(274).fork()).ldelim(),null!=e.tokenPause&&Object.hasOwnProperty.call(e,"tokenPause")&&i.proto.TokenPauseTransactionBody.encode(e.tokenPause,t.uint32(282).fork()).ldelim(),null!=e.tokenUnpause&&Object.hasOwnProperty.call(e,"tokenUnpause")&&i.proto.TokenUnpauseTransactionBody.encode(e.tokenUnpause,t.uint32(290).fork()).ldelim(),null!=e.cryptoApproveAllowance&&Object.hasOwnProperty.call(e,"cryptoApproveAllowance")&&i.proto.CryptoApproveAllowanceTransactionBody.encode(e.cryptoApproveAllowance,t.uint32(298).fork()).ldelim(),null!=e.cryptoDeleteAllowance&&Object.hasOwnProperty.call(e,"cryptoDeleteAllowance")&&i.proto.CryptoDeleteAllowanceTransactionBody.encode(e.cryptoDeleteAllowance,t.uint32(306).fork()).ldelim(),null!=e.tokenFeeScheduleUpdate&&Object.hasOwnProperty.call(e,"tokenFeeScheduleUpdate")&&i.proto.TokenFeeScheduleUpdateTransactionBody.encode(e.tokenFeeScheduleUpdate,t.uint32(314).fork()).ldelim(),null!=e.utilPrng&&Object.hasOwnProperty.call(e,"utilPrng")&&i.proto.UtilPrngTransactionBody.encode(e.utilPrng,t.uint32(322).fork()).ldelim(),null!=e.tokenUpdateNfts&&Object.hasOwnProperty.call(e,"tokenUpdateNfts")&&i.proto.TokenUpdateNftsTransactionBody.encode(e.tokenUpdateNfts,t.uint32(330).fork()).ldelim(),null!=e.nodeCreate&&Object.hasOwnProperty.call(e,"nodeCreate")&&i.com.hedera.hapi.node.addressbook.NodeCreateTransactionBody.encode(e.nodeCreate,t.uint32(338).fork()).ldelim(),null!=e.nodeUpdate&&Object.hasOwnProperty.call(e,"nodeUpdate")&&i.com.hedera.hapi.node.addressbook.NodeUpdateTransactionBody.encode(e.nodeUpdate,t.uint32(346).fork()).ldelim(),null!=e.nodeDelete&&Object.hasOwnProperty.call(e,"nodeDelete")&&i.com.hedera.hapi.node.addressbook.NodeDeleteTransactionBody.encode(e.nodeDelete,t.uint32(354).fork()).ldelim(),null!=e.tokenReject&&Object.hasOwnProperty.call(e,"tokenReject")&&i.proto.TokenRejectTransactionBody.encode(e.tokenReject,t.uint32(362).fork()).ldelim(),null!=e.tokenCancelAirdrop&&Object.hasOwnProperty.call(e,"tokenCancelAirdrop")&&i.proto.TokenCancelAirdropTransactionBody.encode(e.tokenCancelAirdrop,t.uint32(370).fork()).ldelim(),null!=e.tokenClaimAirdrop&&Object.hasOwnProperty.call(e,"tokenClaimAirdrop")&&i.proto.TokenClaimAirdropTransactionBody.encode(e.tokenClaimAirdrop,t.uint32(378).fork()).ldelim(),null!=e.tokenAirdrop&&Object.hasOwnProperty.call(e,"tokenAirdrop")&&i.proto.TokenAirdropTransactionBody.encode(e.tokenAirdrop,t.uint32(386).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SchedulableTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.transactionFee=e.uint64();break;case 2:o.memo=e.string();break;case 3:o.contractCall=i.proto.ContractCallTransactionBody.decode(e,e.uint32());break;case 4:o.contractCreateInstance=i.proto.ContractCreateTransactionBody.decode(e,e.uint32());break;case 5:o.contractUpdateInstance=i.proto.ContractUpdateTransactionBody.decode(e,e.uint32());break;case 6:o.contractDeleteInstance=i.proto.ContractDeleteTransactionBody.decode(e,e.uint32());break;case 7:o.cryptoCreateAccount=i.proto.CryptoCreateTransactionBody.decode(e,e.uint32());break;case 8:o.cryptoDelete=i.proto.CryptoDeleteTransactionBody.decode(e,e.uint32());break;case 9:o.cryptoTransfer=i.proto.CryptoTransferTransactionBody.decode(e,e.uint32());break;case 10:o.cryptoUpdateAccount=i.proto.CryptoUpdateTransactionBody.decode(e,e.uint32());break;case 11:o.fileAppend=i.proto.FileAppendTransactionBody.decode(e,e.uint32());break;case 12:o.fileCreate=i.proto.FileCreateTransactionBody.decode(e,e.uint32());break;case 13:o.fileDelete=i.proto.FileDeleteTransactionBody.decode(e,e.uint32());break;case 14:o.fileUpdate=i.proto.FileUpdateTransactionBody.decode(e,e.uint32());break;case 15:o.systemDelete=i.proto.SystemDeleteTransactionBody.decode(e,e.uint32());break;case 16:o.systemUndelete=i.proto.SystemUndeleteTransactionBody.decode(e,e.uint32());break;case 17:o.freeze=i.proto.FreezeTransactionBody.decode(e,e.uint32());break;case 18:o.consensusCreateTopic=i.proto.ConsensusCreateTopicTransactionBody.decode(e,e.uint32());break;case 19:o.consensusUpdateTopic=i.proto.ConsensusUpdateTopicTransactionBody.decode(e,e.uint32());break;case 20:o.consensusDeleteTopic=i.proto.ConsensusDeleteTopicTransactionBody.decode(e,e.uint32());break;case 21:o.consensusSubmitMessage=i.proto.ConsensusSubmitMessageTransactionBody.decode(e,e.uint32());break;case 22:o.tokenCreation=i.proto.TokenCreateTransactionBody.decode(e,e.uint32());break;case 23:o.tokenFreeze=i.proto.TokenFreezeAccountTransactionBody.decode(e,e.uint32());break;case 24:o.tokenUnfreeze=i.proto.TokenUnfreezeAccountTransactionBody.decode(e,e.uint32());break;case 25:o.tokenGrantKyc=i.proto.TokenGrantKycTransactionBody.decode(e,e.uint32());break;case 26:o.tokenRevokeKyc=i.proto.TokenRevokeKycTransactionBody.decode(e,e.uint32());break;case 27:o.tokenDeletion=i.proto.TokenDeleteTransactionBody.decode(e,e.uint32());break;case 28:o.tokenUpdate=i.proto.TokenUpdateTransactionBody.decode(e,e.uint32());break;case 29:o.tokenMint=i.proto.TokenMintTransactionBody.decode(e,e.uint32());break;case 30:o.tokenBurn=i.proto.TokenBurnTransactionBody.decode(e,e.uint32());break;case 31:o.tokenWipe=i.proto.TokenWipeAccountTransactionBody.decode(e,e.uint32());break;case 32:o.tokenAssociate=i.proto.TokenAssociateTransactionBody.decode(e,e.uint32());break;case 33:o.tokenDissociate=i.proto.TokenDissociateTransactionBody.decode(e,e.uint32());break;case 34:o.scheduleDelete=i.proto.ScheduleDeleteTransactionBody.decode(e,e.uint32());break;case 35:o.tokenPause=i.proto.TokenPauseTransactionBody.decode(e,e.uint32());break;case 36:o.tokenUnpause=i.proto.TokenUnpauseTransactionBody.decode(e,e.uint32());break;case 37:o.cryptoApproveAllowance=i.proto.CryptoApproveAllowanceTransactionBody.decode(e,e.uint32());break;case 38:o.cryptoDeleteAllowance=i.proto.CryptoDeleteAllowanceTransactionBody.decode(e,e.uint32());break;case 39:o.tokenFeeScheduleUpdate=i.proto.TokenFeeScheduleUpdateTransactionBody.decode(e,e.uint32());break;case 40:o.utilPrng=i.proto.UtilPrngTransactionBody.decode(e,e.uint32());break;case 41:o.tokenUpdateNfts=i.proto.TokenUpdateNftsTransactionBody.decode(e,e.uint32());break;case 42:o.nodeCreate=i.com.hedera.hapi.node.addressbook.NodeCreateTransactionBody.decode(e,e.uint32());break;case 43:o.nodeUpdate=i.com.hedera.hapi.node.addressbook.NodeUpdateTransactionBody.decode(e,e.uint32());break;case 44:o.nodeDelete=i.com.hedera.hapi.node.addressbook.NodeDeleteTransactionBody.decode(e,e.uint32());break;case 45:o.tokenReject=i.proto.TokenRejectTransactionBody.decode(e,e.uint32());break;case 46:o.tokenCancelAirdrop=i.proto.TokenCancelAirdropTransactionBody.decode(e,e.uint32());break;case 47:o.tokenClaimAirdrop=i.proto.TokenClaimAirdropTransactionBody.decode(e,e.uint32());break;case 48:o.tokenAirdrop=i.proto.TokenAirdropTransactionBody.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SchedulableTransactionBody"},e}(),t.ScheduleDeleteTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.scheduleID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.scheduleID&&Object.hasOwnProperty.call(e,"scheduleID")&&i.proto.ScheduleID.encode(e.scheduleID,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ScheduleDeleteTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.scheduleID=i.proto.ScheduleID.decode(e,e.uint32());else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ScheduleDeleteTransactionBody"},e}(),t.UtilPrngTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.range=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.range&&Object.hasOwnProperty.call(e,"range")&&t.uint32(8).int32(e.range),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.UtilPrngTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.range=e.int32();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.UtilPrngTransactionBody"},e}(),t.ScheduleSignTransactionBody=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.scheduleID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.scheduleID&&Object.hasOwnProperty.call(e,"scheduleID")&&i.proto.ScheduleID.encode(e.scheduleID,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ScheduleSignTransactionBody;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.scheduleID=i.proto.ScheduleID.decode(e,e.uint32());else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ScheduleSignTransactionBody"},e}(),t.NodeStakeUpdateTransactionBody=function(){function e(e){if(this.nodeStake=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.endOfStakingPeriod=null,e.prototype.nodeStake=o.emptyArray,e.prototype.maxStakingRewardRatePerHbar=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.nodeRewardFeeFraction=null,e.prototype.stakingPeriodsStored=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.stakingPeriod=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.stakingRewardFeeFraction=null,e.prototype.stakingStartThreshold=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.stakingRewardRate=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.reservedStakingRewards=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.unreservedStakingRewardBalance=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.rewardBalanceThreshold=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.maxStakeRewarded=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.maxTotalReward=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.endOfStakingPeriod&&Object.hasOwnProperty.call(e,"endOfStakingPeriod")&&i.proto.Timestamp.encode(e.endOfStakingPeriod,t.uint32(10).fork()).ldelim(),null!=e.nodeStake&&e.nodeStake.length)for(var r=0;r<e.nodeStake.length;++r)i.proto.NodeStake.encode(e.nodeStake[r],t.uint32(18).fork()).ldelim();return null!=e.maxStakingRewardRatePerHbar&&Object.hasOwnProperty.call(e,"maxStakingRewardRatePerHbar")&&t.uint32(24).int64(e.maxStakingRewardRatePerHbar),null!=e.nodeRewardFeeFraction&&Object.hasOwnProperty.call(e,"nodeRewardFeeFraction")&&i.proto.Fraction.encode(e.nodeRewardFeeFraction,t.uint32(34).fork()).ldelim(),null!=e.stakingPeriodsStored&&Object.hasOwnProperty.call(e,"stakingPeriodsStored")&&t.uint32(40).int64(e.stakingPeriodsStored),null!=e.stakingPeriod&&Object.hasOwnProperty.call(e,"stakingPeriod")&&t.uint32(48).int64(e.stakingPeriod),null!=e.stakingRewardFeeFraction&&Object.hasOwnProperty.call(e,"stakingRewardFeeFraction")&&i.proto.Fraction.encode(e.stakingRewardFeeFraction,t.uint32(58).fork()).ldelim(),null!=e.stakingStartThreshold&&Object.hasOwnProperty.call(e,"stakingStartThreshold")&&t.uint32(64).int64(e.stakingStartThreshold),null!=e.stakingRewardRate&&Object.hasOwnProperty.call(e,"stakingRewardRate")&&t.uint32(72).int64(e.stakingRewardRate),null!=e.reservedStakingRewards&&Object.hasOwnProperty.call(e,"reservedStakingRewards")&&t.uint32(80).int64(e.reservedStakingRewards),null!=e.unreservedStakingRewardBalance&&Object.hasOwnProperty.call(e,"unreservedStakingRewardBalance")&&t.uint32(88).int64(e.unreservedStakingRewardBalance),null!=e.rewardBalanceThreshold&&Object.hasOwnProperty.call(e,"rewardBalanceThreshold")&&t.uint32(96).int64(e.rewardBalanceThreshold),null!=e.maxStakeRewarded&&Object.hasOwnProperty.call(e,"maxStakeRewarded")&&t.uint32(104).int64(e.maxStakeRewarded),null!=e.maxTotalReward&&Object.hasOwnProperty.call(e,"maxTotalReward")&&t.uint32(112).int64(e.maxTotalReward),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.NodeStakeUpdateTransactionBody;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.endOfStakingPeriod=i.proto.Timestamp.decode(e,e.uint32());break;case 2:o.nodeStake&&o.nodeStake.length||(o.nodeStake=[]),o.nodeStake.push(i.proto.NodeStake.decode(e,e.uint32()));break;case 3:o.maxStakingRewardRatePerHbar=e.int64();break;case 4:o.nodeRewardFeeFraction=i.proto.Fraction.decode(e,e.uint32());break;case 5:o.stakingPeriodsStored=e.int64();break;case 6:o.stakingPeriod=e.int64();break;case 7:o.stakingRewardFeeFraction=i.proto.Fraction.decode(e,e.uint32());break;case 8:o.stakingStartThreshold=e.int64();break;case 9:o.stakingRewardRate=e.int64();break;case 10:o.reservedStakingRewards=e.int64();break;case 11:o.unreservedStakingRewardBalance=e.int64();break;case 12:o.rewardBalanceThreshold=e.int64();break;case 13:o.maxStakeRewarded=e.int64();break;case 14:o.maxTotalReward=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.NodeStakeUpdateTransactionBody"},e}(),t.NodeStake=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.maxStake=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.minStake=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.nodeId=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.rewardRate=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.stake=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.stakeNotRewarded=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.stakeRewarded=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.maxStake&&Object.hasOwnProperty.call(e,"maxStake")&&t.uint32(8).int64(e.maxStake),null!=e.minStake&&Object.hasOwnProperty.call(e,"minStake")&&t.uint32(16).int64(e.minStake),null!=e.nodeId&&Object.hasOwnProperty.call(e,"nodeId")&&t.uint32(24).int64(e.nodeId),null!=e.rewardRate&&Object.hasOwnProperty.call(e,"rewardRate")&&t.uint32(32).int64(e.rewardRate),null!=e.stake&&Object.hasOwnProperty.call(e,"stake")&&t.uint32(40).int64(e.stake),null!=e.stakeNotRewarded&&Object.hasOwnProperty.call(e,"stakeNotRewarded")&&t.uint32(48).int64(e.stakeNotRewarded),null!=e.stakeRewarded&&Object.hasOwnProperty.call(e,"stakeRewarded")&&t.uint32(56).int64(e.stakeRewarded),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.NodeStake;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.maxStake=e.int64();break;case 2:o.minStake=e.int64();break;case 3:o.nodeId=e.int64();break;case 4:o.rewardRate=e.int64();break;case 5:o.stake=e.int64();break;case 6:o.stakeNotRewarded=e.int64();break;case 7:o.stakeRewarded=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.NodeStake"},e}(),t.ConsensusGetTopicInfoQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.topicID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&i.proto.TopicID.encode(e.topicID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ConsensusGetTopicInfoQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.topicID=i.proto.TopicID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ConsensusGetTopicInfoQuery"},e}(),t.ConsensusGetTopicInfoResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.topicID=null,e.prototype.topicInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&i.proto.TopicID.encode(e.topicID,t.uint32(18).fork()).ldelim(),null!=e.topicInfo&&Object.hasOwnProperty.call(e,"topicInfo")&&i.proto.ConsensusTopicInfo.encode(e.topicInfo,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ConsensusGetTopicInfoResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.topicID=i.proto.TopicID.decode(e,e.uint32());break;case 5:o.topicInfo=i.proto.ConsensusTopicInfo.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ConsensusGetTopicInfoResponse"},e}(),t.ResponseType=function(){const e={},t=Object.create(e);return t[e[0]="ANSWER_ONLY"]=0,t[e[1]="ANSWER_STATE_PROOF"]=1,t[e[2]="COST_ANSWER"]=2,t[e[3]="COST_ANSWER_STATE_PROOF"]=3,t}(),t.QueryHeader=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.payment=null,e.prototype.responseType=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.payment&&Object.hasOwnProperty.call(e,"payment")&&i.proto.Transaction.encode(e.payment,t.uint32(10).fork()).ldelim(),null!=e.responseType&&Object.hasOwnProperty.call(e,"responseType")&&t.uint32(16).int32(e.responseType),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.QueryHeader;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.payment=i.proto.Transaction.decode(e,e.uint32());break;case 2:o.responseType=e.int32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.QueryHeader"},e}(),t.ResponseHeader=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nodeTransactionPrecheckCode=0,e.prototype.responseType=0,e.prototype.cost=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.stateProof=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.nodeTransactionPrecheckCode&&Object.hasOwnProperty.call(e,"nodeTransactionPrecheckCode")&&t.uint32(8).int32(e.nodeTransactionPrecheckCode),null!=e.responseType&&Object.hasOwnProperty.call(e,"responseType")&&t.uint32(16).int32(e.responseType),null!=e.cost&&Object.hasOwnProperty.call(e,"cost")&&t.uint32(24).uint64(e.cost),null!=e.stateProof&&Object.hasOwnProperty.call(e,"stateProof")&&t.uint32(34).bytes(e.stateProof),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ResponseHeader;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.nodeTransactionPrecheckCode=e.int32();break;case 2:o.responseType=e.int32();break;case 3:o.cost=e.uint64();break;case 4:o.stateProof=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ResponseHeader"},e}(),t.ConsensusTopicInfo=function(){function e(e){if(this.feeExemptKeyList=[],this.customFees=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.memo="",e.prototype.runningHash=o.newBuffer([]),e.prototype.sequenceNumber=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.expirationTime=null,e.prototype.adminKey=null,e.prototype.submitKey=null,e.prototype.autoRenewPeriod=null,e.prototype.autoRenewAccount=null,e.prototype.ledgerId=o.newBuffer([]),e.prototype.feeScheduleKey=null,e.prototype.feeExemptKeyList=o.emptyArray,e.prototype.customFees=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(10).string(e.memo),null!=e.runningHash&&Object.hasOwnProperty.call(e,"runningHash")&&t.uint32(18).bytes(e.runningHash),null!=e.sequenceNumber&&Object.hasOwnProperty.call(e,"sequenceNumber")&&t.uint32(24).uint64(e.sequenceNumber),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.Timestamp.encode(e.expirationTime,t.uint32(34).fork()).ldelim(),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(42).fork()).ldelim(),null!=e.submitKey&&Object.hasOwnProperty.call(e,"submitKey")&&i.proto.Key.encode(e.submitKey,t.uint32(50).fork()).ldelim(),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(58).fork()).ldelim(),null!=e.autoRenewAccount&&Object.hasOwnProperty.call(e,"autoRenewAccount")&&i.proto.AccountID.encode(e.autoRenewAccount,t.uint32(66).fork()).ldelim(),null!=e.ledgerId&&Object.hasOwnProperty.call(e,"ledgerId")&&t.uint32(74).bytes(e.ledgerId),null!=e.feeScheduleKey&&Object.hasOwnProperty.call(e,"feeScheduleKey")&&i.proto.Key.encode(e.feeScheduleKey,t.uint32(82).fork()).ldelim(),null!=e.feeExemptKeyList&&e.feeExemptKeyList.length)for(var r=0;r<e.feeExemptKeyList.length;++r)i.proto.Key.encode(e.feeExemptKeyList[r],t.uint32(90).fork()).ldelim();if(null!=e.customFees&&e.customFees.length)for(r=0;r<e.customFees.length;++r)i.proto.FixedCustomFee.encode(e.customFees[r],t.uint32(98).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ConsensusTopicInfo;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.memo=e.string();break;case 2:o.runningHash=e.bytes();break;case 3:o.sequenceNumber=e.uint64();break;case 4:o.expirationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 5:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 6:o.submitKey=i.proto.Key.decode(e,e.uint32());break;case 7:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 8:o.autoRenewAccount=i.proto.AccountID.decode(e,e.uint32());break;case 9:o.ledgerId=e.bytes();break;case 10:o.feeScheduleKey=i.proto.Key.decode(e,e.uint32());break;case 11:o.feeExemptKeyList&&o.feeExemptKeyList.length||(o.feeExemptKeyList=[]),o.feeExemptKeyList.push(i.proto.Key.decode(e,e.uint32()));break;case 12:o.customFees&&o.customFees.length||(o.customFees=[]),o.customFees.push(i.proto.FixedCustomFee.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ConsensusTopicInfo"},e}(),t.ConsensusService=function(){function t(t,r,n){e.rpc.Service.call(this,t,r,n)}return(t.prototype=Object.create(e.rpc.Service.prototype)).constructor=t,t.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(t.prototype.createTopic=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"createTopic"}),Object.defineProperty(t.prototype.updateTopic=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"updateTopic"}),Object.defineProperty(t.prototype.deleteTopic=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"deleteTopic"}),Object.defineProperty(t.prototype.submitMessage=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"submitMessage"}),Object.defineProperty(t.prototype.getTopicInfo=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getTopicInfo"}),t}(),t.Query=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.getByKey=null,e.prototype.getBySolidityID=null,e.prototype.contractCallLocal=null,e.prototype.contractGetInfo=null,e.prototype.contractGetBytecode=null,e.prototype.ContractGetRecords=null,e.prototype.cryptogetAccountBalance=null,e.prototype.cryptoGetAccountRecords=null,e.prototype.cryptoGetInfo=null,e.prototype.cryptoGetLiveHash=null,e.prototype.cryptoGetProxyStakers=null,e.prototype.fileGetContents=null,e.prototype.fileGetInfo=null,e.prototype.transactionGetReceipt=null,e.prototype.transactionGetRecord=null,e.prototype.transactionGetFastRecord=null,e.prototype.consensusGetTopicInfo=null,e.prototype.networkGetVersionInfo=null,e.prototype.tokenGetInfo=null,e.prototype.scheduleGetInfo=null,e.prototype.tokenGetAccountNftInfos=null,e.prototype.tokenGetNftInfo=null,e.prototype.tokenGetNftInfos=null,e.prototype.networkGetExecutionTime=null,e.prototype.accountDetails=null,Object.defineProperty(e.prototype,"query",{get:o.oneOfGetter(t=["getByKey","getBySolidityID","contractCallLocal","contractGetInfo","contractGetBytecode","ContractGetRecords","cryptogetAccountBalance","cryptoGetAccountRecords","cryptoGetInfo","cryptoGetLiveHash","cryptoGetProxyStakers","fileGetContents","fileGetInfo","transactionGetReceipt","transactionGetRecord","transactionGetFastRecord","consensusGetTopicInfo","networkGetVersionInfo","tokenGetInfo","scheduleGetInfo","tokenGetAccountNftInfos","tokenGetNftInfo","tokenGetNftInfos","networkGetExecutionTime","accountDetails"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.getByKey&&Object.hasOwnProperty.call(e,"getByKey")&&i.proto.GetByKeyQuery.encode(e.getByKey,t.uint32(10).fork()).ldelim(),null!=e.getBySolidityID&&Object.hasOwnProperty.call(e,"getBySolidityID")&&i.proto.GetBySolidityIDQuery.encode(e.getBySolidityID,t.uint32(18).fork()).ldelim(),null!=e.contractCallLocal&&Object.hasOwnProperty.call(e,"contractCallLocal")&&i.proto.ContractCallLocalQuery.encode(e.contractCallLocal,t.uint32(26).fork()).ldelim(),null!=e.contractGetInfo&&Object.hasOwnProperty.call(e,"contractGetInfo")&&i.proto.ContractGetInfoQuery.encode(e.contractGetInfo,t.uint32(34).fork()).ldelim(),null!=e.contractGetBytecode&&Object.hasOwnProperty.call(e,"contractGetBytecode")&&i.proto.ContractGetBytecodeQuery.encode(e.contractGetBytecode,t.uint32(42).fork()).ldelim(),null!=e.ContractGetRecords&&Object.hasOwnProperty.call(e,"ContractGetRecords")&&i.proto.ContractGetRecordsQuery.encode(e.ContractGetRecords,t.uint32(50).fork()).ldelim(),null!=e.cryptogetAccountBalance&&Object.hasOwnProperty.call(e,"cryptogetAccountBalance")&&i.proto.CryptoGetAccountBalanceQuery.encode(e.cryptogetAccountBalance,t.uint32(58).fork()).ldelim(),null!=e.cryptoGetAccountRecords&&Object.hasOwnProperty.call(e,"cryptoGetAccountRecords")&&i.proto.CryptoGetAccountRecordsQuery.encode(e.cryptoGetAccountRecords,t.uint32(66).fork()).ldelim(),null!=e.cryptoGetInfo&&Object.hasOwnProperty.call(e,"cryptoGetInfo")&&i.proto.CryptoGetInfoQuery.encode(e.cryptoGetInfo,t.uint32(74).fork()).ldelim(),null!=e.cryptoGetLiveHash&&Object.hasOwnProperty.call(e,"cryptoGetLiveHash")&&i.proto.CryptoGetLiveHashQuery.encode(e.cryptoGetLiveHash,t.uint32(82).fork()).ldelim(),null!=e.cryptoGetProxyStakers&&Object.hasOwnProperty.call(e,"cryptoGetProxyStakers")&&i.proto.CryptoGetStakersQuery.encode(e.cryptoGetProxyStakers,t.uint32(90).fork()).ldelim(),null!=e.fileGetContents&&Object.hasOwnProperty.call(e,"fileGetContents")&&i.proto.FileGetContentsQuery.encode(e.fileGetContents,t.uint32(98).fork()).ldelim(),null!=e.fileGetInfo&&Object.hasOwnProperty.call(e,"fileGetInfo")&&i.proto.FileGetInfoQuery.encode(e.fileGetInfo,t.uint32(106).fork()).ldelim(),null!=e.transactionGetReceipt&&Object.hasOwnProperty.call(e,"transactionGetReceipt")&&i.proto.TransactionGetReceiptQuery.encode(e.transactionGetReceipt,t.uint32(114).fork()).ldelim(),null!=e.transactionGetRecord&&Object.hasOwnProperty.call(e,"transactionGetRecord")&&i.proto.TransactionGetRecordQuery.encode(e.transactionGetRecord,t.uint32(122).fork()).ldelim(),null!=e.transactionGetFastRecord&&Object.hasOwnProperty.call(e,"transactionGetFastRecord")&&i.proto.TransactionGetFastRecordQuery.encode(e.transactionGetFastRecord,t.uint32(130).fork()).ldelim(),null!=e.consensusGetTopicInfo&&Object.hasOwnProperty.call(e,"consensusGetTopicInfo")&&i.proto.ConsensusGetTopicInfoQuery.encode(e.consensusGetTopicInfo,t.uint32(402).fork()).ldelim(),null!=e.networkGetVersionInfo&&Object.hasOwnProperty.call(e,"networkGetVersionInfo")&&i.proto.NetworkGetVersionInfoQuery.encode(e.networkGetVersionInfo,t.uint32(410).fork()).ldelim(),null!=e.tokenGetInfo&&Object.hasOwnProperty.call(e,"tokenGetInfo")&&i.proto.TokenGetInfoQuery.encode(e.tokenGetInfo,t.uint32(418).fork()).ldelim(),null!=e.scheduleGetInfo&&Object.hasOwnProperty.call(e,"scheduleGetInfo")&&i.proto.ScheduleGetInfoQuery.encode(e.scheduleGetInfo,t.uint32(426).fork()).ldelim(),null!=e.tokenGetAccountNftInfos&&Object.hasOwnProperty.call(e,"tokenGetAccountNftInfos")&&i.proto.TokenGetAccountNftInfosQuery.encode(e.tokenGetAccountNftInfos,t.uint32(434).fork()).ldelim(),null!=e.tokenGetNftInfo&&Object.hasOwnProperty.call(e,"tokenGetNftInfo")&&i.proto.TokenGetNftInfoQuery.encode(e.tokenGetNftInfo,t.uint32(442).fork()).ldelim(),null!=e.tokenGetNftInfos&&Object.hasOwnProperty.call(e,"tokenGetNftInfos")&&i.proto.TokenGetNftInfosQuery.encode(e.tokenGetNftInfos,t.uint32(450).fork()).ldelim(),null!=e.networkGetExecutionTime&&Object.hasOwnProperty.call(e,"networkGetExecutionTime")&&i.proto.NetworkGetExecutionTimeQuery.encode(e.networkGetExecutionTime,t.uint32(458).fork()).ldelim(),null!=e.accountDetails&&Object.hasOwnProperty.call(e,"accountDetails")&&i.proto.GetAccountDetailsQuery.encode(e.accountDetails,t.uint32(466).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.Query;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.getByKey=i.proto.GetByKeyQuery.decode(e,e.uint32());break;case 2:o.getBySolidityID=i.proto.GetBySolidityIDQuery.decode(e,e.uint32());break;case 3:o.contractCallLocal=i.proto.ContractCallLocalQuery.decode(e,e.uint32());break;case 4:o.contractGetInfo=i.proto.ContractGetInfoQuery.decode(e,e.uint32());break;case 5:o.contractGetBytecode=i.proto.ContractGetBytecodeQuery.decode(e,e.uint32());break;case 6:o.ContractGetRecords=i.proto.ContractGetRecordsQuery.decode(e,e.uint32());break;case 7:o.cryptogetAccountBalance=i.proto.CryptoGetAccountBalanceQuery.decode(e,e.uint32());break;case 8:o.cryptoGetAccountRecords=i.proto.CryptoGetAccountRecordsQuery.decode(e,e.uint32());break;case 9:o.cryptoGetInfo=i.proto.CryptoGetInfoQuery.decode(e,e.uint32());break;case 10:o.cryptoGetLiveHash=i.proto.CryptoGetLiveHashQuery.decode(e,e.uint32());break;case 11:o.cryptoGetProxyStakers=i.proto.CryptoGetStakersQuery.decode(e,e.uint32());break;case 12:o.fileGetContents=i.proto.FileGetContentsQuery.decode(e,e.uint32());break;case 13:o.fileGetInfo=i.proto.FileGetInfoQuery.decode(e,e.uint32());break;case 14:o.transactionGetReceipt=i.proto.TransactionGetReceiptQuery.decode(e,e.uint32());break;case 15:o.transactionGetRecord=i.proto.TransactionGetRecordQuery.decode(e,e.uint32());break;case 16:o.transactionGetFastRecord=i.proto.TransactionGetFastRecordQuery.decode(e,e.uint32());break;case 50:o.consensusGetTopicInfo=i.proto.ConsensusGetTopicInfoQuery.decode(e,e.uint32());break;case 51:o.networkGetVersionInfo=i.proto.NetworkGetVersionInfoQuery.decode(e,e.uint32());break;case 52:o.tokenGetInfo=i.proto.TokenGetInfoQuery.decode(e,e.uint32());break;case 53:o.scheduleGetInfo=i.proto.ScheduleGetInfoQuery.decode(e,e.uint32());break;case 54:o.tokenGetAccountNftInfos=i.proto.TokenGetAccountNftInfosQuery.decode(e,e.uint32());break;case 55:o.tokenGetNftInfo=i.proto.TokenGetNftInfoQuery.decode(e,e.uint32());break;case 56:o.tokenGetNftInfos=i.proto.TokenGetNftInfosQuery.decode(e,e.uint32());break;case 57:o.networkGetExecutionTime=i.proto.NetworkGetExecutionTimeQuery.decode(e,e.uint32());break;case 58:o.accountDetails=i.proto.GetAccountDetailsQuery.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.Query"},e}(),t.GetByKeyQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.key=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&i.proto.Key.encode(e.key,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.GetByKeyQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.key=i.proto.Key.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.GetByKeyQuery"},e}(),t.EntityID=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.accountID=null,e.prototype.liveHash=null,e.prototype.fileID=null,e.prototype.contractID=null,Object.defineProperty(e.prototype,"entity",{get:o.oneOfGetter(t=["accountID","liveHash","fileID","contractID"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(10).fork()).ldelim(),null!=e.liveHash&&Object.hasOwnProperty.call(e,"liveHash")&&i.proto.LiveHash.encode(e.liveHash,t.uint32(18).fork()).ldelim(),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(26).fork()).ldelim(),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.EntityID;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.liveHash=i.proto.LiveHash.decode(e,e.uint32());break;case 3:o.fileID=i.proto.FileID.decode(e,e.uint32());break;case 4:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.EntityID"},e}(),t.GetByKeyResponse=function(){function e(e){if(this.entities=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.entities=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.entities&&e.entities.length)for(var r=0;r<e.entities.length;++r)i.proto.EntityID.encode(e.entities[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.GetByKeyResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.entities&&o.entities.length||(o.entities=[]),o.entities.push(i.proto.EntityID.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.GetByKeyResponse"},e}(),t.GetBySolidityIDQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.solidityID="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.solidityID&&Object.hasOwnProperty.call(e,"solidityID")&&t.uint32(18).string(e.solidityID),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.GetBySolidityIDQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.solidityID=e.string();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.GetBySolidityIDQuery"},e}(),t.GetBySolidityIDResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.accountID=null,e.prototype.fileID=null,e.prototype.contractID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(26).fork()).ldelim(),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(34).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.GetBySolidityIDResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.fileID=i.proto.FileID.decode(e,e.uint32());break;case 4:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.GetBySolidityIDResponse"},e}(),t.ContractCallLocalQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.contractID=null,e.prototype.gas=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.functionParameters=o.newBuffer([]),e.prototype.maxResultSize=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.senderId=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(18).fork()).ldelim(),null!=e.gas&&Object.hasOwnProperty.call(e,"gas")&&t.uint32(24).int64(e.gas),null!=e.functionParameters&&Object.hasOwnProperty.call(e,"functionParameters")&&t.uint32(34).bytes(e.functionParameters),null!=e.maxResultSize&&Object.hasOwnProperty.call(e,"maxResultSize")&&t.uint32(40).int64(e.maxResultSize),null!=e.senderId&&Object.hasOwnProperty.call(e,"senderId")&&i.proto.AccountID.encode(e.senderId,t.uint32(50).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractCallLocalQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;case 3:o.gas=e.int64();break;case 4:o.functionParameters=e.bytes();break;case 5:o.maxResultSize=e.int64();break;case 6:o.senderId=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractCallLocalQuery"},e}(),t.ContractCallLocalResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.functionResult=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.functionResult&&Object.hasOwnProperty.call(e,"functionResult")&&i.proto.ContractFunctionResult.encode(e.functionResult,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractCallLocalResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.functionResult=i.proto.ContractFunctionResult.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractCallLocalResponse"},e}(),t.ContractNonceInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.contractId=null,e.prototype.nonce=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.contractId&&Object.hasOwnProperty.call(e,"contractId")&&i.proto.ContractID.encode(e.contractId,t.uint32(10).fork()).ldelim(),null!=e.nonce&&Object.hasOwnProperty.call(e,"nonce")&&t.uint32(16).int64(e.nonce),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractNonceInfo;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.contractId=i.proto.ContractID.decode(e,e.uint32());break;case 2:o.nonce=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractNonceInfo"},e}(),t.ContractLoginfo=function(){function e(e){if(this.topic=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.contractID=null,e.prototype.bloom=o.newBuffer([]),e.prototype.topic=o.emptyArray,e.prototype.data=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(10).fork()).ldelim(),null!=e.bloom&&Object.hasOwnProperty.call(e,"bloom")&&t.uint32(18).bytes(e.bloom),null!=e.topic&&e.topic.length)for(var r=0;r<e.topic.length;++r)t.uint32(26).bytes(e.topic[r]);return null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(34).bytes(e.data),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractLoginfo;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;case 2:o.bloom=e.bytes();break;case 3:o.topic&&o.topic.length||(o.topic=[]),o.topic.push(e.bytes());break;case 4:o.data=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractLoginfo"},e}(),t.ContractFunctionResult=function(){function e(e){if(this.logInfo=[],this.createdContractIDs=[],this.contractNonces=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.contractID=null,e.prototype.contractCallResult=o.newBuffer([]),e.prototype.errorMessage="",e.prototype.bloom=o.newBuffer([]),e.prototype.gasUsed=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.logInfo=o.emptyArray,e.prototype.createdContractIDs=o.emptyArray,e.prototype.evmAddress=null,e.prototype.gas=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.amount=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.functionParameters=o.newBuffer([]),e.prototype.senderId=null,e.prototype.contractNonces=o.emptyArray,e.prototype.signerNonce=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(10).fork()).ldelim(),null!=e.contractCallResult&&Object.hasOwnProperty.call(e,"contractCallResult")&&t.uint32(18).bytes(e.contractCallResult),null!=e.errorMessage&&Object.hasOwnProperty.call(e,"errorMessage")&&t.uint32(26).string(e.errorMessage),null!=e.bloom&&Object.hasOwnProperty.call(e,"bloom")&&t.uint32(34).bytes(e.bloom),null!=e.gasUsed&&Object.hasOwnProperty.call(e,"gasUsed")&&t.uint32(40).uint64(e.gasUsed),null!=e.logInfo&&e.logInfo.length)for(var r=0;r<e.logInfo.length;++r)i.proto.ContractLoginfo.encode(e.logInfo[r],t.uint32(50).fork()).ldelim();if(null!=e.createdContractIDs&&e.createdContractIDs.length)for(r=0;r<e.createdContractIDs.length;++r)i.proto.ContractID.encode(e.createdContractIDs[r],t.uint32(58).fork()).ldelim();if(null!=e.evmAddress&&Object.hasOwnProperty.call(e,"evmAddress")&&i.google.protobuf.BytesValue.encode(e.evmAddress,t.uint32(74).fork()).ldelim(),null!=e.gas&&Object.hasOwnProperty.call(e,"gas")&&t.uint32(80).int64(e.gas),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(88).int64(e.amount),null!=e.functionParameters&&Object.hasOwnProperty.call(e,"functionParameters")&&t.uint32(98).bytes(e.functionParameters),null!=e.senderId&&Object.hasOwnProperty.call(e,"senderId")&&i.proto.AccountID.encode(e.senderId,t.uint32(106).fork()).ldelim(),null!=e.contractNonces&&e.contractNonces.length)for(r=0;r<e.contractNonces.length;++r)i.proto.ContractNonceInfo.encode(e.contractNonces[r],t.uint32(114).fork()).ldelim();return null!=e.signerNonce&&Object.hasOwnProperty.call(e,"signerNonce")&&i.google.protobuf.Int64Value.encode(e.signerNonce,t.uint32(122).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractFunctionResult;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;case 2:o.contractCallResult=e.bytes();break;case 3:o.errorMessage=e.string();break;case 4:o.bloom=e.bytes();break;case 5:o.gasUsed=e.uint64();break;case 6:o.logInfo&&o.logInfo.length||(o.logInfo=[]),o.logInfo.push(i.proto.ContractLoginfo.decode(e,e.uint32()));break;case 7:o.createdContractIDs&&o.createdContractIDs.length||(o.createdContractIDs=[]),o.createdContractIDs.push(i.proto.ContractID.decode(e,e.uint32()));break;case 9:o.evmAddress=i.google.protobuf.BytesValue.decode(e,e.uint32());break;case 10:o.gas=e.int64();break;case 11:o.amount=e.int64();break;case 12:o.functionParameters=e.bytes();break;case 13:o.senderId=i.proto.AccountID.decode(e,e.uint32());break;case 14:o.contractNonces&&o.contractNonces.length||(o.contractNonces=[]),o.contractNonces.push(i.proto.ContractNonceInfo.decode(e,e.uint32()));break;case 15:o.signerNonce=i.google.protobuf.Int64Value.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractFunctionResult"},e}(),t.ContractGetInfoQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.contractID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractGetInfoQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractGetInfoQuery"},e}(),t.ContractGetInfoResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.contractInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.contractInfo&&Object.hasOwnProperty.call(e,"contractInfo")&&i.proto.ContractGetInfoResponse.ContractInfo.encode(e.contractInfo,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractGetInfoResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.contractInfo=i.proto.ContractGetInfoResponse.ContractInfo.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractGetInfoResponse"},e.ContractInfo=function(){function e(e){if(this.tokenRelationships=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.contractID=null,e.prototype.accountID=null,e.prototype.contractAccountID="",e.prototype.adminKey=null,e.prototype.expirationTime=null,e.prototype.autoRenewPeriod=null,e.prototype.storage=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.memo="",e.prototype.balance=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.deleted=!1,e.prototype.tokenRelationships=o.emptyArray,e.prototype.ledgerId=o.newBuffer([]),e.prototype.autoRenewAccountId=null,e.prototype.maxAutomaticTokenAssociations=0,e.prototype.stakingInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(10).fork()).ldelim(),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),null!=e.contractAccountID&&Object.hasOwnProperty.call(e,"contractAccountID")&&t.uint32(26).string(e.contractAccountID),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(34).fork()).ldelim(),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.Timestamp.encode(e.expirationTime,t.uint32(42).fork()).ldelim(),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(50).fork()).ldelim(),null!=e.storage&&Object.hasOwnProperty.call(e,"storage")&&t.uint32(56).int64(e.storage),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(66).string(e.memo),null!=e.balance&&Object.hasOwnProperty.call(e,"balance")&&t.uint32(72).uint64(e.balance),null!=e.deleted&&Object.hasOwnProperty.call(e,"deleted")&&t.uint32(80).bool(e.deleted),null!=e.tokenRelationships&&e.tokenRelationships.length)for(var r=0;r<e.tokenRelationships.length;++r)i.proto.TokenRelationship.encode(e.tokenRelationships[r],t.uint32(90).fork()).ldelim();return null!=e.ledgerId&&Object.hasOwnProperty.call(e,"ledgerId")&&t.uint32(98).bytes(e.ledgerId),null!=e.autoRenewAccountId&&Object.hasOwnProperty.call(e,"autoRenewAccountId")&&i.proto.AccountID.encode(e.autoRenewAccountId,t.uint32(106).fork()).ldelim(),null!=e.maxAutomaticTokenAssociations&&Object.hasOwnProperty.call(e,"maxAutomaticTokenAssociations")&&t.uint32(112).int32(e.maxAutomaticTokenAssociations),null!=e.stakingInfo&&Object.hasOwnProperty.call(e,"stakingInfo")&&i.proto.StakingInfo.encode(e.stakingInfo,t.uint32(122).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractGetInfoResponse.ContractInfo;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.contractAccountID=e.string();break;case 4:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 5:o.expirationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 6:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 7:o.storage=e.int64();break;case 8:o.memo=e.string();break;case 9:o.balance=e.uint64();break;case 10:o.deleted=e.bool();break;case 11:o.tokenRelationships&&o.tokenRelationships.length||(o.tokenRelationships=[]),o.tokenRelationships.push(i.proto.TokenRelationship.decode(e,e.uint32()));break;case 12:o.ledgerId=e.bytes();break;case 13:o.autoRenewAccountId=i.proto.AccountID.decode(e,e.uint32());break;case 14:o.maxAutomaticTokenAssociations=e.int32();break;case 15:o.stakingInfo=i.proto.StakingInfo.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractGetInfoResponse.ContractInfo"},e}(),e}(),t.ContractGetBytecodeQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.contractID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractGetBytecodeQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractGetBytecodeQuery"},e}(),t.ContractGetBytecodeResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.bytecode=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.bytecode&&Object.hasOwnProperty.call(e,"bytecode")&&t.uint32(50).bytes(e.bytecode),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractGetBytecodeResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 6:o.bytecode=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractGetBytecodeResponse"},e}(),t.ContractGetRecordsQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.contractID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractGetRecordsQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractGetRecordsQuery"},e}(),t.ContractGetRecordsResponse=function(){function e(e){if(this.records=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.contractID=null,e.prototype.records=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(18).fork()).ldelim(),null!=e.records&&e.records.length)for(var r=0;r<e.records.length;++r)i.proto.TransactionRecord.encode(e.records[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractGetRecordsResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;case 3:o.records&&o.records.length||(o.records=[]),o.records.push(i.proto.TransactionRecord.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractGetRecordsResponse"},e}(),t.TransactionRecord=function(){function e(e){if(this.tokenTransferLists=[],this.assessedCustomFees=[],this.automaticTokenAssociations=[],this.paidStakingRewards=[],this.newPendingAirdrops=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.receipt=null,e.prototype.transactionHash=o.newBuffer([]),e.prototype.consensusTimestamp=null,e.prototype.transactionID=null,e.prototype.memo="",e.prototype.transactionFee=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.contractCallResult=null,e.prototype.contractCreateResult=null,e.prototype.transferList=null,e.prototype.tokenTransferLists=o.emptyArray,e.prototype.scheduleRef=null,e.prototype.assessedCustomFees=o.emptyArray,e.prototype.automaticTokenAssociations=o.emptyArray,e.prototype.parentConsensusTimestamp=null,e.prototype.alias=o.newBuffer([]),e.prototype.ethereumHash=o.newBuffer([]),e.prototype.paidStakingRewards=o.emptyArray,e.prototype.prngBytes=null,e.prototype.prngNumber=null,e.prototype.evmAddress=o.newBuffer([]),e.prototype.newPendingAirdrops=o.emptyArray,Object.defineProperty(e.prototype,"body",{get:o.oneOfGetter(t=["contractCallResult","contractCreateResult"]),set:o.oneOfSetter(t)}),Object.defineProperty(e.prototype,"entropy",{get:o.oneOfGetter(t=["prngBytes","prngNumber"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.receipt&&Object.hasOwnProperty.call(e,"receipt")&&i.proto.TransactionReceipt.encode(e.receipt,t.uint32(10).fork()).ldelim(),null!=e.transactionHash&&Object.hasOwnProperty.call(e,"transactionHash")&&t.uint32(18).bytes(e.transactionHash),null!=e.consensusTimestamp&&Object.hasOwnProperty.call(e,"consensusTimestamp")&&i.proto.Timestamp.encode(e.consensusTimestamp,t.uint32(26).fork()).ldelim(),null!=e.transactionID&&Object.hasOwnProperty.call(e,"transactionID")&&i.proto.TransactionID.encode(e.transactionID,t.uint32(34).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(42).string(e.memo),null!=e.transactionFee&&Object.hasOwnProperty.call(e,"transactionFee")&&t.uint32(48).uint64(e.transactionFee),null!=e.contractCallResult&&Object.hasOwnProperty.call(e,"contractCallResult")&&i.proto.ContractFunctionResult.encode(e.contractCallResult,t.uint32(58).fork()).ldelim(),null!=e.contractCreateResult&&Object.hasOwnProperty.call(e,"contractCreateResult")&&i.proto.ContractFunctionResult.encode(e.contractCreateResult,t.uint32(66).fork()).ldelim(),null!=e.transferList&&Object.hasOwnProperty.call(e,"transferList")&&i.proto.TransferList.encode(e.transferList,t.uint32(82).fork()).ldelim(),null!=e.tokenTransferLists&&e.tokenTransferLists.length)for(var r=0;r<e.tokenTransferLists.length;++r)i.proto.TokenTransferList.encode(e.tokenTransferLists[r],t.uint32(90).fork()).ldelim();if(null!=e.scheduleRef&&Object.hasOwnProperty.call(e,"scheduleRef")&&i.proto.ScheduleID.encode(e.scheduleRef,t.uint32(98).fork()).ldelim(),null!=e.assessedCustomFees&&e.assessedCustomFees.length)for(r=0;r<e.assessedCustomFees.length;++r)i.proto.AssessedCustomFee.encode(e.assessedCustomFees[r],t.uint32(106).fork()).ldelim();if(null!=e.automaticTokenAssociations&&e.automaticTokenAssociations.length)for(r=0;r<e.automaticTokenAssociations.length;++r)i.proto.TokenAssociation.encode(e.automaticTokenAssociations[r],t.uint32(114).fork()).ldelim();if(null!=e.parentConsensusTimestamp&&Object.hasOwnProperty.call(e,"parentConsensusTimestamp")&&i.proto.Timestamp.encode(e.parentConsensusTimestamp,t.uint32(122).fork()).ldelim(),null!=e.alias&&Object.hasOwnProperty.call(e,"alias")&&t.uint32(130).bytes(e.alias),null!=e.ethereumHash&&Object.hasOwnProperty.call(e,"ethereumHash")&&t.uint32(138).bytes(e.ethereumHash),null!=e.paidStakingRewards&&e.paidStakingRewards.length)for(r=0;r<e.paidStakingRewards.length;++r)i.proto.AccountAmount.encode(e.paidStakingRewards[r],t.uint32(146).fork()).ldelim();if(null!=e.prngBytes&&Object.hasOwnProperty.call(e,"prngBytes")&&t.uint32(154).bytes(e.prngBytes),null!=e.prngNumber&&Object.hasOwnProperty.call(e,"prngNumber")&&t.uint32(160).int32(e.prngNumber),null!=e.evmAddress&&Object.hasOwnProperty.call(e,"evmAddress")&&t.uint32(170).bytes(e.evmAddress),null!=e.newPendingAirdrops&&e.newPendingAirdrops.length)for(r=0;r<e.newPendingAirdrops.length;++r)i.proto.PendingAirdropRecord.encode(e.newPendingAirdrops[r],t.uint32(178).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionRecord;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.receipt=i.proto.TransactionReceipt.decode(e,e.uint32());break;case 2:o.transactionHash=e.bytes();break;case 3:o.consensusTimestamp=i.proto.Timestamp.decode(e,e.uint32());break;case 4:o.transactionID=i.proto.TransactionID.decode(e,e.uint32());break;case 5:o.memo=e.string();break;case 6:o.transactionFee=e.uint64();break;case 7:o.contractCallResult=i.proto.ContractFunctionResult.decode(e,e.uint32());break;case 8:o.contractCreateResult=i.proto.ContractFunctionResult.decode(e,e.uint32());break;case 10:o.transferList=i.proto.TransferList.decode(e,e.uint32());break;case 11:o.tokenTransferLists&&o.tokenTransferLists.length||(o.tokenTransferLists=[]),o.tokenTransferLists.push(i.proto.TokenTransferList.decode(e,e.uint32()));break;case 12:o.scheduleRef=i.proto.ScheduleID.decode(e,e.uint32());break;case 13:o.assessedCustomFees&&o.assessedCustomFees.length||(o.assessedCustomFees=[]),o.assessedCustomFees.push(i.proto.AssessedCustomFee.decode(e,e.uint32()));break;case 14:o.automaticTokenAssociations&&o.automaticTokenAssociations.length||(o.automaticTokenAssociations=[]),o.automaticTokenAssociations.push(i.proto.TokenAssociation.decode(e,e.uint32()));break;case 15:o.parentConsensusTimestamp=i.proto.Timestamp.decode(e,e.uint32());break;case 16:o.alias=e.bytes();break;case 17:o.ethereumHash=e.bytes();break;case 18:o.paidStakingRewards&&o.paidStakingRewards.length||(o.paidStakingRewards=[]),o.paidStakingRewards.push(i.proto.AccountAmount.decode(e,e.uint32()));break;case 19:o.prngBytes=e.bytes();break;case 20:o.prngNumber=e.int32();break;case 21:o.evmAddress=e.bytes();break;case 22:o.newPendingAirdrops&&o.newPendingAirdrops.length||(o.newPendingAirdrops=[]),o.newPendingAirdrops.push(i.proto.PendingAirdropRecord.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionRecord"},e}(),t.PendingAirdropRecord=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.pendingAirdropId=null,e.prototype.pendingAirdropValue=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.pendingAirdropId&&Object.hasOwnProperty.call(e,"pendingAirdropId")&&i.proto.PendingAirdropId.encode(e.pendingAirdropId,t.uint32(10).fork()).ldelim(),null!=e.pendingAirdropValue&&Object.hasOwnProperty.call(e,"pendingAirdropValue")&&i.proto.PendingAirdropValue.encode(e.pendingAirdropValue,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.PendingAirdropRecord;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.pendingAirdropId=i.proto.PendingAirdropId.decode(e,e.uint32());break;case 2:o.pendingAirdropValue=i.proto.PendingAirdropValue.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.PendingAirdropRecord"},e}(),t.TransactionReceipt=function(){function e(e){if(this.serialNumbers=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.status=0,e.prototype.accountID=null,e.prototype.fileID=null,e.prototype.contractID=null,e.prototype.exchangeRate=null,e.prototype.topicID=null,e.prototype.topicSequenceNumber=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.topicRunningHash=o.newBuffer([]),e.prototype.topicRunningHashVersion=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.tokenID=null,e.prototype.newTotalSupply=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.scheduleID=null,e.prototype.scheduledTransactionID=null,e.prototype.serialNumbers=o.emptyArray,e.prototype.nodeId=o.Long?o.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.status&&Object.hasOwnProperty.call(e,"status")&&t.uint32(8).int32(e.status),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(26).fork()).ldelim(),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(34).fork()).ldelim(),null!=e.exchangeRate&&Object.hasOwnProperty.call(e,"exchangeRate")&&i.proto.ExchangeRateSet.encode(e.exchangeRate,t.uint32(42).fork()).ldelim(),null!=e.topicID&&Object.hasOwnProperty.call(e,"topicID")&&i.proto.TopicID.encode(e.topicID,t.uint32(50).fork()).ldelim(),null!=e.topicSequenceNumber&&Object.hasOwnProperty.call(e,"topicSequenceNumber")&&t.uint32(56).uint64(e.topicSequenceNumber),null!=e.topicRunningHash&&Object.hasOwnProperty.call(e,"topicRunningHash")&&t.uint32(66).bytes(e.topicRunningHash),null!=e.topicRunningHashVersion&&Object.hasOwnProperty.call(e,"topicRunningHashVersion")&&t.uint32(72).uint64(e.topicRunningHashVersion),null!=e.tokenID&&Object.hasOwnProperty.call(e,"tokenID")&&i.proto.TokenID.encode(e.tokenID,t.uint32(82).fork()).ldelim(),null!=e.newTotalSupply&&Object.hasOwnProperty.call(e,"newTotalSupply")&&t.uint32(88).uint64(e.newTotalSupply),null!=e.scheduleID&&Object.hasOwnProperty.call(e,"scheduleID")&&i.proto.ScheduleID.encode(e.scheduleID,t.uint32(98).fork()).ldelim(),null!=e.scheduledTransactionID&&Object.hasOwnProperty.call(e,"scheduledTransactionID")&&i.proto.TransactionID.encode(e.scheduledTransactionID,t.uint32(106).fork()).ldelim(),null!=e.serialNumbers&&e.serialNumbers.length){t.uint32(114).fork();for(var r=0;r<e.serialNumbers.length;++r)t.int64(e.serialNumbers[r]);t.ldelim()}return null!=e.nodeId&&Object.hasOwnProperty.call(e,"nodeId")&&t.uint32(120).uint64(e.nodeId),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionReceipt;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.status=e.int32();break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.fileID=i.proto.FileID.decode(e,e.uint32());break;case 4:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;case 5:o.exchangeRate=i.proto.ExchangeRateSet.decode(e,e.uint32());break;case 6:o.topicID=i.proto.TopicID.decode(e,e.uint32());break;case 7:o.topicSequenceNumber=e.uint64();break;case 8:o.topicRunningHash=e.bytes();break;case 9:o.topicRunningHashVersion=e.uint64();break;case 10:o.tokenID=i.proto.TokenID.decode(e,e.uint32());break;case 11:o.newTotalSupply=e.uint64();break;case 12:o.scheduleID=i.proto.ScheduleID.decode(e,e.uint32());break;case 13:o.scheduledTransactionID=i.proto.TransactionID.decode(e,e.uint32());break;case 14:if(o.serialNumbers&&o.serialNumbers.length||(o.serialNumbers=[]),2==(7&s))for(var a=e.uint32()+e.pos;e.pos<a;)o.serialNumbers.push(e.int64());else o.serialNumbers.push(e.int64());break;case 15:o.nodeId=e.uint64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionReceipt"},e}(),t.ExchangeRate=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.hbarEquiv=0,e.prototype.centEquiv=0,e.prototype.expirationTime=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.hbarEquiv&&Object.hasOwnProperty.call(e,"hbarEquiv")&&t.uint32(8).int32(e.hbarEquiv),null!=e.centEquiv&&Object.hasOwnProperty.call(e,"centEquiv")&&t.uint32(16).int32(e.centEquiv),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.TimestampSeconds.encode(e.expirationTime,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ExchangeRate;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.hbarEquiv=e.int32();break;case 2:o.centEquiv=e.int32();break;case 3:o.expirationTime=i.proto.TimestampSeconds.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ExchangeRate"},e}(),t.ExchangeRateSet=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.currentRate=null,e.prototype.nextRate=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.currentRate&&Object.hasOwnProperty.call(e,"currentRate")&&i.proto.ExchangeRate.encode(e.currentRate,t.uint32(10).fork()).ldelim(),null!=e.nextRate&&Object.hasOwnProperty.call(e,"nextRate")&&i.proto.ExchangeRate.encode(e.nextRate,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ExchangeRateSet;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.currentRate=i.proto.ExchangeRate.decode(e,e.uint32());break;case 2:o.nextRate=i.proto.ExchangeRate.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ExchangeRateSet"},e}(),t.CryptoGetAccountBalanceQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.header=null,e.prototype.accountID=null,e.prototype.contractID=null,Object.defineProperty(e.prototype,"balanceSource",{get:o.oneOfGetter(t=["accountID","contractID"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),null!=e.contractID&&Object.hasOwnProperty.call(e,"contractID")&&i.proto.ContractID.encode(e.contractID,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoGetAccountBalanceQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.contractID=i.proto.ContractID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoGetAccountBalanceQuery"},e}(),t.CryptoGetAccountBalanceResponse=function(){function e(e){if(this.tokenBalances=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.accountID=null,e.prototype.balance=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.tokenBalances=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),null!=e.balance&&Object.hasOwnProperty.call(e,"balance")&&t.uint32(24).uint64(e.balance),null!=e.tokenBalances&&e.tokenBalances.length)for(var r=0;r<e.tokenBalances.length;++r)i.proto.TokenBalance.encode(e.tokenBalances[r],t.uint32(34).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoGetAccountBalanceResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.balance=e.uint64();break;case 4:o.tokenBalances&&o.tokenBalances.length||(o.tokenBalances=[]),o.tokenBalances.push(i.proto.TokenBalance.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoGetAccountBalanceResponse"},e}(),t.CryptoGetAccountRecordsQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.accountID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoGetAccountRecordsQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoGetAccountRecordsQuery"},e}(),t.CryptoGetAccountRecordsResponse=function(){function e(e){if(this.records=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.accountID=null,e.prototype.records=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),null!=e.records&&e.records.length)for(var r=0;r<e.records.length;++r)i.proto.TransactionRecord.encode(e.records[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoGetAccountRecordsResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.records&&o.records.length||(o.records=[]),o.records.push(i.proto.TransactionRecord.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoGetAccountRecordsResponse"},e}(),t.CryptoGetInfoQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.accountID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoGetInfoQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoGetInfoQuery"},e}(),t.CryptoGetInfoResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.accountInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.accountInfo&&Object.hasOwnProperty.call(e,"accountInfo")&&i.proto.CryptoGetInfoResponse.AccountInfo.encode(e.accountInfo,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoGetInfoResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.accountInfo=i.proto.CryptoGetInfoResponse.AccountInfo.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoGetInfoResponse"},e.AccountInfo=function(){function e(e){if(this.liveHashes=[],this.tokenRelationships=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.accountID=null,e.prototype.contractAccountID="",e.prototype.deleted=!1,e.prototype.proxyAccountID=null,e.prototype.proxyReceived=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.key=null,e.prototype.balance=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.generateSendRecordThreshold=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.generateReceiveRecordThreshold=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.receiverSigRequired=!1,e.prototype.expirationTime=null,e.prototype.autoRenewPeriod=null,e.prototype.liveHashes=o.emptyArray,e.prototype.tokenRelationships=o.emptyArray,e.prototype.memo="",e.prototype.ownedNfts=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.maxAutomaticTokenAssociations=0,e.prototype.alias=o.newBuffer([]),e.prototype.ledgerId=o.newBuffer([]),e.prototype.ethereumNonce=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.stakingInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(10).fork()).ldelim(),null!=e.contractAccountID&&Object.hasOwnProperty.call(e,"contractAccountID")&&t.uint32(18).string(e.contractAccountID),null!=e.deleted&&Object.hasOwnProperty.call(e,"deleted")&&t.uint32(24).bool(e.deleted),null!=e.proxyAccountID&&Object.hasOwnProperty.call(e,"proxyAccountID")&&i.proto.AccountID.encode(e.proxyAccountID,t.uint32(34).fork()).ldelim(),null!=e.proxyReceived&&Object.hasOwnProperty.call(e,"proxyReceived")&&t.uint32(48).int64(e.proxyReceived),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&i.proto.Key.encode(e.key,t.uint32(58).fork()).ldelim(),null!=e.balance&&Object.hasOwnProperty.call(e,"balance")&&t.uint32(64).uint64(e.balance),null!=e.generateSendRecordThreshold&&Object.hasOwnProperty.call(e,"generateSendRecordThreshold")&&t.uint32(72).uint64(e.generateSendRecordThreshold),null!=e.generateReceiveRecordThreshold&&Object.hasOwnProperty.call(e,"generateReceiveRecordThreshold")&&t.uint32(80).uint64(e.generateReceiveRecordThreshold),null!=e.receiverSigRequired&&Object.hasOwnProperty.call(e,"receiverSigRequired")&&t.uint32(88).bool(e.receiverSigRequired),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.Timestamp.encode(e.expirationTime,t.uint32(98).fork()).ldelim(),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(106).fork()).ldelim(),null!=e.liveHashes&&e.liveHashes.length)for(var r=0;r<e.liveHashes.length;++r)i.proto.LiveHash.encode(e.liveHashes[r],t.uint32(114).fork()).ldelim();if(null!=e.tokenRelationships&&e.tokenRelationships.length)for(r=0;r<e.tokenRelationships.length;++r)i.proto.TokenRelationship.encode(e.tokenRelationships[r],t.uint32(122).fork()).ldelim();return null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(130).string(e.memo),null!=e.ownedNfts&&Object.hasOwnProperty.call(e,"ownedNfts")&&t.uint32(136).int64(e.ownedNfts),null!=e.maxAutomaticTokenAssociations&&Object.hasOwnProperty.call(e,"maxAutomaticTokenAssociations")&&t.uint32(144).int32(e.maxAutomaticTokenAssociations),null!=e.alias&&Object.hasOwnProperty.call(e,"alias")&&t.uint32(154).bytes(e.alias),null!=e.ledgerId&&Object.hasOwnProperty.call(e,"ledgerId")&&t.uint32(162).bytes(e.ledgerId),null!=e.ethereumNonce&&Object.hasOwnProperty.call(e,"ethereumNonce")&&t.uint32(168).int64(e.ethereumNonce),null!=e.stakingInfo&&Object.hasOwnProperty.call(e,"stakingInfo")&&i.proto.StakingInfo.encode(e.stakingInfo,t.uint32(178).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoGetInfoResponse.AccountInfo;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.contractAccountID=e.string();break;case 3:o.deleted=e.bool();break;case 4:o.proxyAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 6:o.proxyReceived=e.int64();break;case 7:o.key=i.proto.Key.decode(e,e.uint32());break;case 8:o.balance=e.uint64();break;case 9:o.generateSendRecordThreshold=e.uint64();break;case 10:o.generateReceiveRecordThreshold=e.uint64();break;case 11:o.receiverSigRequired=e.bool();break;case 12:o.expirationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 13:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 14:o.liveHashes&&o.liveHashes.length||(o.liveHashes=[]),o.liveHashes.push(i.proto.LiveHash.decode(e,e.uint32()));break;case 15:o.tokenRelationships&&o.tokenRelationships.length||(o.tokenRelationships=[]),o.tokenRelationships.push(i.proto.TokenRelationship.decode(e,e.uint32()));break;case 16:o.memo=e.string();break;case 17:o.ownedNfts=e.int64();break;case 18:o.maxAutomaticTokenAssociations=e.int32();break;case 19:o.alias=e.bytes();break;case 20:o.ledgerId=e.bytes();break;case 21:o.ethereumNonce=e.int64();break;case 22:o.stakingInfo=i.proto.StakingInfo.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoGetInfoResponse.AccountInfo"},e}(),e}(),t.CryptoGetLiveHashQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.accountID=null,e.prototype.hash=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(26).bytes(e.hash),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoGetLiveHashQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.hash=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoGetLiveHashQuery"},e}(),t.CryptoGetLiveHashResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.liveHash=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.liveHash&&Object.hasOwnProperty.call(e,"liveHash")&&i.proto.LiveHash.encode(e.liveHash,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoGetLiveHashResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.liveHash=i.proto.LiveHash.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoGetLiveHashResponse"},e}(),t.CryptoGetStakersQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.accountID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoGetStakersQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoGetStakersQuery"},e}(),t.ProxyStaker=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.accountID=null,e.prototype.amount=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(10).fork()).ldelim(),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(16).int64(e.amount),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ProxyStaker;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.amount=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ProxyStaker"},e}(),t.AllProxyStakers=function(){function e(e){if(this.proxyStaker=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.accountID=null,e.prototype.proxyStaker=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(10).fork()).ldelim(),null!=e.proxyStaker&&e.proxyStaker.length)for(var r=0;r<e.proxyStaker.length;++r)i.proto.ProxyStaker.encode(e.proxyStaker[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.AllProxyStakers;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.proxyStaker&&o.proxyStaker.length||(o.proxyStaker=[]),o.proxyStaker.push(i.proto.ProxyStaker.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.AllProxyStakers"},e}(),t.CryptoGetStakersResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.stakers=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.stakers&&Object.hasOwnProperty.call(e,"stakers")&&i.proto.AllProxyStakers.encode(e.stakers,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.CryptoGetStakersResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 3:o.stakers=i.proto.AllProxyStakers.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.CryptoGetStakersResponse"},e}(),t.FileGetContentsQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.fileID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FileGetContentsQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.fileID=i.proto.FileID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FileGetContentsQuery"},e}(),t.FileGetContentsResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.fileContents=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.fileContents&&Object.hasOwnProperty.call(e,"fileContents")&&i.proto.FileGetContentsResponse.FileContents.encode(e.fileContents,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FileGetContentsResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.fileContents=i.proto.FileGetContentsResponse.FileContents.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FileGetContentsResponse"},e.FileContents=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.fileID=null,e.prototype.contents=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(10).fork()).ldelim(),null!=e.contents&&Object.hasOwnProperty.call(e,"contents")&&t.uint32(18).bytes(e.contents),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FileGetContentsResponse.FileContents;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.fileID=i.proto.FileID.decode(e,e.uint32());break;case 2:o.contents=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FileGetContentsResponse.FileContents"},e}(),e}(),t.FileGetInfoQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.fileID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FileGetInfoQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.fileID=i.proto.FileID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FileGetInfoQuery"},e}(),t.FileGetInfoResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.fileInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.fileInfo&&Object.hasOwnProperty.call(e,"fileInfo")&&i.proto.FileGetInfoResponse.FileInfo.encode(e.fileInfo,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FileGetInfoResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.fileInfo=i.proto.FileGetInfoResponse.FileInfo.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FileGetInfoResponse"},e.FileInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.fileID=null,e.prototype.size=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.expirationTime=null,e.prototype.deleted=!1,e.prototype.keys=null,e.prototype.memo="",e.prototype.ledgerId=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fileID&&Object.hasOwnProperty.call(e,"fileID")&&i.proto.FileID.encode(e.fileID,t.uint32(10).fork()).ldelim(),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(16).int64(e.size),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.Timestamp.encode(e.expirationTime,t.uint32(26).fork()).ldelim(),null!=e.deleted&&Object.hasOwnProperty.call(e,"deleted")&&t.uint32(32).bool(e.deleted),null!=e.keys&&Object.hasOwnProperty.call(e,"keys")&&i.proto.KeyList.encode(e.keys,t.uint32(42).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(50).string(e.memo),null!=e.ledgerId&&Object.hasOwnProperty.call(e,"ledgerId")&&t.uint32(58).bytes(e.ledgerId),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.FileGetInfoResponse.FileInfo;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.fileID=i.proto.FileID.decode(e,e.uint32());break;case 2:o.size=e.int64();break;case 3:o.expirationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 4:o.deleted=e.bool();break;case 5:o.keys=i.proto.KeyList.decode(e,e.uint32());break;case 6:o.memo=e.string();break;case 7:o.ledgerId=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.FileGetInfoResponse.FileInfo"},e}(),e}(),t.TransactionGetReceiptQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.transactionID=null,e.prototype.includeDuplicates=!1,e.prototype.includeChildReceipts=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.transactionID&&Object.hasOwnProperty.call(e,"transactionID")&&i.proto.TransactionID.encode(e.transactionID,t.uint32(18).fork()).ldelim(),null!=e.includeDuplicates&&Object.hasOwnProperty.call(e,"includeDuplicates")&&t.uint32(24).bool(e.includeDuplicates),null!=e.includeChildReceipts&&Object.hasOwnProperty.call(e,"includeChildReceipts")&&t.uint32(32).bool(e.includeChildReceipts),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionGetReceiptQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.transactionID=i.proto.TransactionID.decode(e,e.uint32());break;case 3:o.includeDuplicates=e.bool();break;case 4:o.includeChildReceipts=e.bool();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionGetReceiptQuery"},e}(),t.TransactionGetReceiptResponse=function(){function e(e){if(this.duplicateTransactionReceipts=[],this.childTransactionReceipts=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.receipt=null,e.prototype.duplicateTransactionReceipts=o.emptyArray,e.prototype.childTransactionReceipts=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.receipt&&Object.hasOwnProperty.call(e,"receipt")&&i.proto.TransactionReceipt.encode(e.receipt,t.uint32(18).fork()).ldelim(),null!=e.duplicateTransactionReceipts&&e.duplicateTransactionReceipts.length)for(var r=0;r<e.duplicateTransactionReceipts.length;++r)i.proto.TransactionReceipt.encode(e.duplicateTransactionReceipts[r],t.uint32(34).fork()).ldelim();if(null!=e.childTransactionReceipts&&e.childTransactionReceipts.length)for(r=0;r<e.childTransactionReceipts.length;++r)i.proto.TransactionReceipt.encode(e.childTransactionReceipts[r],t.uint32(42).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionGetReceiptResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.receipt=i.proto.TransactionReceipt.decode(e,e.uint32());break;case 4:o.duplicateTransactionReceipts&&o.duplicateTransactionReceipts.length||(o.duplicateTransactionReceipts=[]),o.duplicateTransactionReceipts.push(i.proto.TransactionReceipt.decode(e,e.uint32()));break;case 5:o.childTransactionReceipts&&o.childTransactionReceipts.length||(o.childTransactionReceipts=[]),o.childTransactionReceipts.push(i.proto.TransactionReceipt.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionGetReceiptResponse"},e}(),t.TransactionGetRecordQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.transactionID=null,e.prototype.includeDuplicates=!1,e.prototype.includeChildRecords=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.transactionID&&Object.hasOwnProperty.call(e,"transactionID")&&i.proto.TransactionID.encode(e.transactionID,t.uint32(18).fork()).ldelim(),null!=e.includeDuplicates&&Object.hasOwnProperty.call(e,"includeDuplicates")&&t.uint32(24).bool(e.includeDuplicates),null!=e.includeChildRecords&&Object.hasOwnProperty.call(e,"includeChildRecords")&&t.uint32(32).bool(e.includeChildRecords),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionGetRecordQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.transactionID=i.proto.TransactionID.decode(e,e.uint32());break;case 3:o.includeDuplicates=e.bool();break;case 4:o.includeChildRecords=e.bool();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionGetRecordQuery"},e}(),t.TransactionGetRecordResponse=function(){function e(e){if(this.duplicateTransactionRecords=[],this.childTransactionRecords=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.transactionRecord=null,e.prototype.duplicateTransactionRecords=o.emptyArray,e.prototype.childTransactionRecords=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.transactionRecord&&Object.hasOwnProperty.call(e,"transactionRecord")&&i.proto.TransactionRecord.encode(e.transactionRecord,t.uint32(26).fork()).ldelim(),null!=e.duplicateTransactionRecords&&e.duplicateTransactionRecords.length)for(var r=0;r<e.duplicateTransactionRecords.length;++r)i.proto.TransactionRecord.encode(e.duplicateTransactionRecords[r],t.uint32(34).fork()).ldelim();if(null!=e.childTransactionRecords&&e.childTransactionRecords.length)for(r=0;r<e.childTransactionRecords.length;++r)i.proto.TransactionRecord.encode(e.childTransactionRecords[r],t.uint32(42).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionGetRecordResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 3:o.transactionRecord=i.proto.TransactionRecord.decode(e,e.uint32());break;case 4:o.duplicateTransactionRecords&&o.duplicateTransactionRecords.length||(o.duplicateTransactionRecords=[]),o.duplicateTransactionRecords.push(i.proto.TransactionRecord.decode(e,e.uint32()));break;case 5:o.childTransactionRecords&&o.childTransactionRecords.length||(o.childTransactionRecords=[]),o.childTransactionRecords.push(i.proto.TransactionRecord.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionGetRecordResponse"},e}(),t.TransactionGetFastRecordQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.transactionID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.transactionID&&Object.hasOwnProperty.call(e,"transactionID")&&i.proto.TransactionID.encode(e.transactionID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionGetFastRecordQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.transactionID=i.proto.TransactionID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionGetFastRecordQuery"},e}(),t.TransactionGetFastRecordResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.transactionRecord=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.transactionRecord&&Object.hasOwnProperty.call(e,"transactionRecord")&&i.proto.TransactionRecord.encode(e.transactionRecord,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionGetFastRecordResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.transactionRecord=i.proto.TransactionRecord.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionGetFastRecordResponse"},e}(),t.NetworkGetVersionInfoQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.NetworkGetVersionInfoQuery;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.header=i.proto.QueryHeader.decode(e,e.uint32());else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.NetworkGetVersionInfoQuery"},e}(),t.NetworkGetVersionInfoResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.hapiProtoVersion=null,e.prototype.hederaServicesVersion=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.hapiProtoVersion&&Object.hasOwnProperty.call(e,"hapiProtoVersion")&&i.proto.SemanticVersion.encode(e.hapiProtoVersion,t.uint32(18).fork()).ldelim(),null!=e.hederaServicesVersion&&Object.hasOwnProperty.call(e,"hederaServicesVersion")&&i.proto.SemanticVersion.encode(e.hederaServicesVersion,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.NetworkGetVersionInfoResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.hapiProtoVersion=i.proto.SemanticVersion.decode(e,e.uint32());break;case 3:o.hederaServicesVersion=i.proto.SemanticVersion.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.NetworkGetVersionInfoResponse"},e}(),t.NetworkGetExecutionTimeQuery=function(){function e(e){if(this.transactionIds=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.transactionIds=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.transactionIds&&e.transactionIds.length)for(var r=0;r<e.transactionIds.length;++r)i.proto.TransactionID.encode(e.transactionIds[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.NetworkGetExecutionTimeQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.transactionIds&&o.transactionIds.length||(o.transactionIds=[]),o.transactionIds.push(i.proto.TransactionID.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.NetworkGetExecutionTimeQuery"},e}(),t.NetworkGetExecutionTimeResponse=function(){function e(e){if(this.executionTimes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.executionTimes=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.executionTimes&&e.executionTimes.length){t.uint32(18).fork();for(var r=0;r<e.executionTimes.length;++r)t.uint64(e.executionTimes[r]);t.ldelim()}return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.NetworkGetExecutionTimeResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:if(o.executionTimes&&o.executionTimes.length||(o.executionTimes=[]),2==(7&s))for(var a=e.uint32()+e.pos;e.pos<a;)o.executionTimes.push(e.uint64());else o.executionTimes.push(e.uint64());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.NetworkGetExecutionTimeResponse"},e}(),t.TokenGetInfoQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.token=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&i.proto.TokenID.encode(e.token,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenGetInfoQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.token=i.proto.TokenID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenGetInfoQuery"},e}(),t.TokenInfo=function(){function e(e){if(this.customFees=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenId=null,e.prototype.name="",e.prototype.symbol="",e.prototype.decimals=0,e.prototype.totalSupply=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.treasury=null,e.prototype.adminKey=null,e.prototype.kycKey=null,e.prototype.freezeKey=null,e.prototype.wipeKey=null,e.prototype.supplyKey=null,e.prototype.defaultFreezeStatus=0,e.prototype.defaultKycStatus=0,e.prototype.deleted=!1,e.prototype.autoRenewAccount=null,e.prototype.autoRenewPeriod=null,e.prototype.expiry=null,e.prototype.memo="",e.prototype.tokenType=0,e.prototype.supplyType=0,e.prototype.maxSupply=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.feeScheduleKey=null,e.prototype.customFees=o.emptyArray,e.prototype.pauseKey=null,e.prototype.pauseStatus=0,e.prototype.ledgerId=o.newBuffer([]),e.prototype.metadata=o.newBuffer([]),e.prototype.metadataKey=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.tokenId&&Object.hasOwnProperty.call(e,"tokenId")&&i.proto.TokenID.encode(e.tokenId,t.uint32(10).fork()).ldelim(),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.symbol&&Object.hasOwnProperty.call(e,"symbol")&&t.uint32(26).string(e.symbol),null!=e.decimals&&Object.hasOwnProperty.call(e,"decimals")&&t.uint32(32).uint32(e.decimals),null!=e.totalSupply&&Object.hasOwnProperty.call(e,"totalSupply")&&t.uint32(40).uint64(e.totalSupply),null!=e.treasury&&Object.hasOwnProperty.call(e,"treasury")&&i.proto.AccountID.encode(e.treasury,t.uint32(50).fork()).ldelim(),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(58).fork()).ldelim(),null!=e.kycKey&&Object.hasOwnProperty.call(e,"kycKey")&&i.proto.Key.encode(e.kycKey,t.uint32(66).fork()).ldelim(),null!=e.freezeKey&&Object.hasOwnProperty.call(e,"freezeKey")&&i.proto.Key.encode(e.freezeKey,t.uint32(74).fork()).ldelim(),null!=e.wipeKey&&Object.hasOwnProperty.call(e,"wipeKey")&&i.proto.Key.encode(e.wipeKey,t.uint32(82).fork()).ldelim(),null!=e.supplyKey&&Object.hasOwnProperty.call(e,"supplyKey")&&i.proto.Key.encode(e.supplyKey,t.uint32(90).fork()).ldelim(),null!=e.defaultFreezeStatus&&Object.hasOwnProperty.call(e,"defaultFreezeStatus")&&t.uint32(96).int32(e.defaultFreezeStatus),null!=e.defaultKycStatus&&Object.hasOwnProperty.call(e,"defaultKycStatus")&&t.uint32(104).int32(e.defaultKycStatus),null!=e.deleted&&Object.hasOwnProperty.call(e,"deleted")&&t.uint32(112).bool(e.deleted),null!=e.autoRenewAccount&&Object.hasOwnProperty.call(e,"autoRenewAccount")&&i.proto.AccountID.encode(e.autoRenewAccount,t.uint32(122).fork()).ldelim(),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(130).fork()).ldelim(),null!=e.expiry&&Object.hasOwnProperty.call(e,"expiry")&&i.proto.Timestamp.encode(e.expiry,t.uint32(138).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(146).string(e.memo),null!=e.tokenType&&Object.hasOwnProperty.call(e,"tokenType")&&t.uint32(152).int32(e.tokenType),null!=e.supplyType&&Object.hasOwnProperty.call(e,"supplyType")&&t.uint32(160).int32(e.supplyType),null!=e.maxSupply&&Object.hasOwnProperty.call(e,"maxSupply")&&t.uint32(168).int64(e.maxSupply),null!=e.feeScheduleKey&&Object.hasOwnProperty.call(e,"feeScheduleKey")&&i.proto.Key.encode(e.feeScheduleKey,t.uint32(178).fork()).ldelim(),null!=e.customFees&&e.customFees.length)for(var r=0;r<e.customFees.length;++r)i.proto.CustomFee.encode(e.customFees[r],t.uint32(186).fork()).ldelim();return null!=e.pauseKey&&Object.hasOwnProperty.call(e,"pauseKey")&&i.proto.Key.encode(e.pauseKey,t.uint32(194).fork()).ldelim(),null!=e.pauseStatus&&Object.hasOwnProperty.call(e,"pauseStatus")&&t.uint32(200).int32(e.pauseStatus),null!=e.ledgerId&&Object.hasOwnProperty.call(e,"ledgerId")&&t.uint32(210).bytes(e.ledgerId),null!=e.metadata&&Object.hasOwnProperty.call(e,"metadata")&&t.uint32(218).bytes(e.metadata),null!=e.metadataKey&&Object.hasOwnProperty.call(e,"metadataKey")&&i.proto.Key.encode(e.metadataKey,t.uint32(226).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenInfo;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.tokenId=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.name=e.string();break;case 3:o.symbol=e.string();break;case 4:o.decimals=e.uint32();break;case 5:o.totalSupply=e.uint64();break;case 6:o.treasury=i.proto.AccountID.decode(e,e.uint32());break;case 7:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 8:o.kycKey=i.proto.Key.decode(e,e.uint32());break;case 9:o.freezeKey=i.proto.Key.decode(e,e.uint32());break;case 10:o.wipeKey=i.proto.Key.decode(e,e.uint32());break;case 11:o.supplyKey=i.proto.Key.decode(e,e.uint32());break;case 12:o.defaultFreezeStatus=e.int32();break;case 13:o.defaultKycStatus=e.int32();break;case 14:o.deleted=e.bool();break;case 15:o.autoRenewAccount=i.proto.AccountID.decode(e,e.uint32());break;case 16:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 17:o.expiry=i.proto.Timestamp.decode(e,e.uint32());break;case 18:o.memo=e.string();break;case 19:o.tokenType=e.int32();break;case 20:o.supplyType=e.int32();break;case 21:o.maxSupply=e.int64();break;case 22:o.feeScheduleKey=i.proto.Key.decode(e,e.uint32());break;case 23:o.customFees&&o.customFees.length||(o.customFees=[]),o.customFees.push(i.proto.CustomFee.decode(e,e.uint32()));break;case 24:o.pauseKey=i.proto.Key.decode(e,e.uint32());break;case 25:o.pauseStatus=e.int32();break;case 26:o.ledgerId=e.bytes();break;case 27:o.metadata=e.bytes();break;case 28:o.metadataKey=i.proto.Key.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenInfo"},e}(),t.TokenGetInfoResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.tokenInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.tokenInfo&&Object.hasOwnProperty.call(e,"tokenInfo")&&i.proto.TokenInfo.encode(e.tokenInfo,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenGetInfoResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.tokenInfo=i.proto.TokenInfo.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenGetInfoResponse"},e}(),t.ScheduleGetInfoQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.scheduleID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.scheduleID&&Object.hasOwnProperty.call(e,"scheduleID")&&i.proto.ScheduleID.encode(e.scheduleID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ScheduleGetInfoQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.scheduleID=i.proto.ScheduleID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ScheduleGetInfoQuery"},e}(),t.ScheduleInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.scheduleID=null,e.prototype.deletionTime=null,e.prototype.executionTime=null,e.prototype.expirationTime=null,e.prototype.scheduledTransactionBody=null,e.prototype.memo="",e.prototype.adminKey=null,e.prototype.signers=null,e.prototype.creatorAccountID=null,e.prototype.payerAccountID=null,e.prototype.scheduledTransactionID=null,e.prototype.ledgerId=o.newBuffer([]),e.prototype.waitForExpiry=!1,Object.defineProperty(e.prototype,"data",{get:o.oneOfGetter(t=["deletionTime","executionTime"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.scheduleID&&Object.hasOwnProperty.call(e,"scheduleID")&&i.proto.ScheduleID.encode(e.scheduleID,t.uint32(10).fork()).ldelim(),null!=e.deletionTime&&Object.hasOwnProperty.call(e,"deletionTime")&&i.proto.Timestamp.encode(e.deletionTime,t.uint32(18).fork()).ldelim(),null!=e.executionTime&&Object.hasOwnProperty.call(e,"executionTime")&&i.proto.Timestamp.encode(e.executionTime,t.uint32(26).fork()).ldelim(),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.Timestamp.encode(e.expirationTime,t.uint32(34).fork()).ldelim(),null!=e.scheduledTransactionBody&&Object.hasOwnProperty.call(e,"scheduledTransactionBody")&&i.proto.SchedulableTransactionBody.encode(e.scheduledTransactionBody,t.uint32(42).fork()).ldelim(),null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(50).string(e.memo),null!=e.adminKey&&Object.hasOwnProperty.call(e,"adminKey")&&i.proto.Key.encode(e.adminKey,t.uint32(58).fork()).ldelim(),null!=e.signers&&Object.hasOwnProperty.call(e,"signers")&&i.proto.KeyList.encode(e.signers,t.uint32(66).fork()).ldelim(),null!=e.creatorAccountID&&Object.hasOwnProperty.call(e,"creatorAccountID")&&i.proto.AccountID.encode(e.creatorAccountID,t.uint32(74).fork()).ldelim(),null!=e.payerAccountID&&Object.hasOwnProperty.call(e,"payerAccountID")&&i.proto.AccountID.encode(e.payerAccountID,t.uint32(82).fork()).ldelim(),null!=e.scheduledTransactionID&&Object.hasOwnProperty.call(e,"scheduledTransactionID")&&i.proto.TransactionID.encode(e.scheduledTransactionID,t.uint32(90).fork()).ldelim(),null!=e.ledgerId&&Object.hasOwnProperty.call(e,"ledgerId")&&t.uint32(98).bytes(e.ledgerId),null!=e.waitForExpiry&&Object.hasOwnProperty.call(e,"waitForExpiry")&&t.uint32(104).bool(e.waitForExpiry),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ScheduleInfo;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.scheduleID=i.proto.ScheduleID.decode(e,e.uint32());break;case 2:o.deletionTime=i.proto.Timestamp.decode(e,e.uint32());break;case 3:o.executionTime=i.proto.Timestamp.decode(e,e.uint32());break;case 4:o.expirationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 5:o.scheduledTransactionBody=i.proto.SchedulableTransactionBody.decode(e,e.uint32());break;case 6:o.memo=e.string();break;case 7:o.adminKey=i.proto.Key.decode(e,e.uint32());break;case 8:o.signers=i.proto.KeyList.decode(e,e.uint32());break;case 9:o.creatorAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 10:o.payerAccountID=i.proto.AccountID.decode(e,e.uint32());break;case 11:o.scheduledTransactionID=i.proto.TransactionID.decode(e,e.uint32());break;case 12:o.ledgerId=e.bytes();break;case 13:o.waitForExpiry=e.bool();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ScheduleInfo"},e}(),t.ScheduleGetInfoResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.scheduleInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.scheduleInfo&&Object.hasOwnProperty.call(e,"scheduleInfo")&&i.proto.ScheduleInfo.encode(e.scheduleInfo,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ScheduleGetInfoResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.scheduleInfo=i.proto.ScheduleInfo.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ScheduleGetInfoResponse"},e}(),t.TokenGetAccountNftInfosQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.accountID=null,e.prototype.start=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.end=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),null!=e.start&&Object.hasOwnProperty.call(e,"start")&&t.uint32(24).int64(e.start),null!=e.end&&Object.hasOwnProperty.call(e,"end")&&t.uint32(32).int64(e.end),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenGetAccountNftInfosQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.start=e.int64();break;case 4:o.end=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenGetAccountNftInfosQuery"},e}(),t.TokenGetAccountNftInfosResponse=function(){function e(e){if(this.nfts=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.nfts=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.nfts&&e.nfts.length)for(var r=0;r<e.nfts.length;++r)i.proto.TokenNftInfo.encode(e.nfts[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenGetAccountNftInfosResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.nfts&&o.nfts.length||(o.nfts=[]),o.nfts.push(i.proto.TokenNftInfo.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenGetAccountNftInfosResponse"},e}(),t.TokenGetNftInfoQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.nftID=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.nftID&&Object.hasOwnProperty.call(e,"nftID")&&i.proto.NftID.encode(e.nftID,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenGetNftInfoQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.nftID=i.proto.NftID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenGetNftInfoQuery"},e}(),t.TokenNftInfo=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.nftID=null,e.prototype.accountID=null,e.prototype.creationTime=null,e.prototype.metadata=o.newBuffer([]),e.prototype.ledgerId=o.newBuffer([]),e.prototype.spenderId=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.nftID&&Object.hasOwnProperty.call(e,"nftID")&&i.proto.NftID.encode(e.nftID,t.uint32(10).fork()).ldelim(),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(18).fork()).ldelim(),null!=e.creationTime&&Object.hasOwnProperty.call(e,"creationTime")&&i.proto.Timestamp.encode(e.creationTime,t.uint32(26).fork()).ldelim(),null!=e.metadata&&Object.hasOwnProperty.call(e,"metadata")&&t.uint32(34).bytes(e.metadata),null!=e.ledgerId&&Object.hasOwnProperty.call(e,"ledgerId")&&t.uint32(42).bytes(e.ledgerId),null!=e.spenderId&&Object.hasOwnProperty.call(e,"spenderId")&&i.proto.AccountID.encode(e.spenderId,t.uint32(50).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenNftInfo;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.nftID=i.proto.NftID.decode(e,e.uint32());break;case 2:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.creationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 4:o.metadata=e.bytes();break;case 5:o.ledgerId=e.bytes();break;case 6:o.spenderId=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenNftInfo"},e}(),t.TokenGetNftInfoResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.nft=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.nft&&Object.hasOwnProperty.call(e,"nft")&&i.proto.TokenNftInfo.encode(e.nft,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenGetNftInfoResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.nft=i.proto.TokenNftInfo.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenGetNftInfoResponse"},e}(),t.TokenGetNftInfosQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.tokenID=null,e.prototype.start=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.end=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.tokenID&&Object.hasOwnProperty.call(e,"tokenID")&&i.proto.TokenID.encode(e.tokenID,t.uint32(18).fork()).ldelim(),null!=e.start&&Object.hasOwnProperty.call(e,"start")&&t.uint32(24).int64(e.start),null!=e.end&&Object.hasOwnProperty.call(e,"end")&&t.uint32(32).int64(e.end),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenGetNftInfosQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.tokenID=i.proto.TokenID.decode(e,e.uint32());break;case 3:o.start=e.int64();break;case 4:o.end=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenGetNftInfosQuery"},e}(),t.TokenGetNftInfosResponse=function(){function e(e){if(this.nfts=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.tokenID=null,e.prototype.nfts=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.tokenID&&Object.hasOwnProperty.call(e,"tokenID")&&i.proto.TokenID.encode(e.tokenID,t.uint32(18).fork()).ldelim(),null!=e.nfts&&e.nfts.length)for(var r=0;r<e.nfts.length;++r)i.proto.TokenNftInfo.encode(e.nfts[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenGetNftInfosResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.tokenID=i.proto.TokenID.decode(e,e.uint32());break;case 3:o.nfts&&o.nfts.length||(o.nfts=[]),o.nfts.push(i.proto.TokenNftInfo.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenGetNftInfosResponse"},e}(),t.GetAccountDetailsQuery=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.accountId=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.QueryHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.accountId&&Object.hasOwnProperty.call(e,"accountId")&&i.proto.AccountID.encode(e.accountId,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.GetAccountDetailsQuery;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.QueryHeader.decode(e,e.uint32());break;case 2:o.accountId=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.GetAccountDetailsQuery"},e}(),t.GetAccountDetailsResponse=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.header=null,e.prototype.accountDetails=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.header&&Object.hasOwnProperty.call(e,"header")&&i.proto.ResponseHeader.encode(e.header,t.uint32(10).fork()).ldelim(),null!=e.accountDetails&&Object.hasOwnProperty.call(e,"accountDetails")&&i.proto.GetAccountDetailsResponse.AccountDetails.encode(e.accountDetails,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.GetAccountDetailsResponse;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.header=i.proto.ResponseHeader.decode(e,e.uint32());break;case 2:o.accountDetails=i.proto.GetAccountDetailsResponse.AccountDetails.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.GetAccountDetailsResponse"},e.AccountDetails=function(){function e(e){if(this.tokenRelationships=[],this.grantedCryptoAllowances=[],this.grantedNftAllowances=[],this.grantedTokenAllowances=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.accountId=null,e.prototype.contractAccountId="",e.prototype.deleted=!1,e.prototype.proxyAccountId=null,e.prototype.proxyReceived=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.key=null,e.prototype.balance=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.receiverSigRequired=!1,e.prototype.expirationTime=null,e.prototype.autoRenewPeriod=null,e.prototype.tokenRelationships=o.emptyArray,e.prototype.memo="",e.prototype.ownedNfts=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.maxAutomaticTokenAssociations=0,e.prototype.alias=o.newBuffer([]),e.prototype.ledgerId=o.newBuffer([]),e.prototype.grantedCryptoAllowances=o.emptyArray,e.prototype.grantedNftAllowances=o.emptyArray,e.prototype.grantedTokenAllowances=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.accountId&&Object.hasOwnProperty.call(e,"accountId")&&i.proto.AccountID.encode(e.accountId,t.uint32(10).fork()).ldelim(),null!=e.contractAccountId&&Object.hasOwnProperty.call(e,"contractAccountId")&&t.uint32(18).string(e.contractAccountId),null!=e.deleted&&Object.hasOwnProperty.call(e,"deleted")&&t.uint32(24).bool(e.deleted),null!=e.proxyAccountId&&Object.hasOwnProperty.call(e,"proxyAccountId")&&i.proto.AccountID.encode(e.proxyAccountId,t.uint32(34).fork()).ldelim(),null!=e.proxyReceived&&Object.hasOwnProperty.call(e,"proxyReceived")&&t.uint32(40).int64(e.proxyReceived),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&i.proto.Key.encode(e.key,t.uint32(50).fork()).ldelim(),null!=e.balance&&Object.hasOwnProperty.call(e,"balance")&&t.uint32(56).uint64(e.balance),null!=e.receiverSigRequired&&Object.hasOwnProperty.call(e,"receiverSigRequired")&&t.uint32(64).bool(e.receiverSigRequired),null!=e.expirationTime&&Object.hasOwnProperty.call(e,"expirationTime")&&i.proto.Timestamp.encode(e.expirationTime,t.uint32(74).fork()).ldelim(),null!=e.autoRenewPeriod&&Object.hasOwnProperty.call(e,"autoRenewPeriod")&&i.proto.Duration.encode(e.autoRenewPeriod,t.uint32(82).fork()).ldelim(),null!=e.tokenRelationships&&e.tokenRelationships.length)for(var r=0;r<e.tokenRelationships.length;++r)i.proto.TokenRelationship.encode(e.tokenRelationships[r],t.uint32(90).fork()).ldelim();if(null!=e.memo&&Object.hasOwnProperty.call(e,"memo")&&t.uint32(98).string(e.memo),null!=e.ownedNfts&&Object.hasOwnProperty.call(e,"ownedNfts")&&t.uint32(104).int64(e.ownedNfts),null!=e.maxAutomaticTokenAssociations&&Object.hasOwnProperty.call(e,"maxAutomaticTokenAssociations")&&t.uint32(112).int32(e.maxAutomaticTokenAssociations),null!=e.alias&&Object.hasOwnProperty.call(e,"alias")&&t.uint32(122).bytes(e.alias),null!=e.ledgerId&&Object.hasOwnProperty.call(e,"ledgerId")&&t.uint32(130).bytes(e.ledgerId),null!=e.grantedCryptoAllowances&&e.grantedCryptoAllowances.length)for(r=0;r<e.grantedCryptoAllowances.length;++r)i.proto.GrantedCryptoAllowance.encode(e.grantedCryptoAllowances[r],t.uint32(138).fork()).ldelim();if(null!=e.grantedNftAllowances&&e.grantedNftAllowances.length)for(r=0;r<e.grantedNftAllowances.length;++r)i.proto.GrantedNftAllowance.encode(e.grantedNftAllowances[r],t.uint32(146).fork()).ldelim();if(null!=e.grantedTokenAllowances&&e.grantedTokenAllowances.length)for(r=0;r<e.grantedTokenAllowances.length;++r)i.proto.GrantedTokenAllowance.encode(e.grantedTokenAllowances[r],t.uint32(154).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.GetAccountDetailsResponse.AccountDetails;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.accountId=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.contractAccountId=e.string();break;case 3:o.deleted=e.bool();break;case 4:o.proxyAccountId=i.proto.AccountID.decode(e,e.uint32());break;case 5:o.proxyReceived=e.int64();break;case 6:o.key=i.proto.Key.decode(e,e.uint32());break;case 7:o.balance=e.uint64();break;case 8:o.receiverSigRequired=e.bool();break;case 9:o.expirationTime=i.proto.Timestamp.decode(e,e.uint32());break;case 10:o.autoRenewPeriod=i.proto.Duration.decode(e,e.uint32());break;case 11:o.tokenRelationships&&o.tokenRelationships.length||(o.tokenRelationships=[]),o.tokenRelationships.push(i.proto.TokenRelationship.decode(e,e.uint32()));break;case 12:o.memo=e.string();break;case 13:o.ownedNfts=e.int64();break;case 14:o.maxAutomaticTokenAssociations=e.int32();break;case 15:o.alias=e.bytes();break;case 16:o.ledgerId=e.bytes();break;case 17:o.grantedCryptoAllowances&&o.grantedCryptoAllowances.length||(o.grantedCryptoAllowances=[]),o.grantedCryptoAllowances.push(i.proto.GrantedCryptoAllowance.decode(e,e.uint32()));break;case 18:o.grantedNftAllowances&&o.grantedNftAllowances.length||(o.grantedNftAllowances=[]),o.grantedNftAllowances.push(i.proto.GrantedNftAllowance.decode(e,e.uint32()));break;case 19:o.grantedTokenAllowances&&o.grantedTokenAllowances.length||(o.grantedTokenAllowances=[]),o.grantedTokenAllowances.push(i.proto.GrantedTokenAllowance.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.GetAccountDetailsResponse.AccountDetails"},e}(),e}(),t.GrantedCryptoAllowance=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.spender=null,e.prototype.amount=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.spender&&Object.hasOwnProperty.call(e,"spender")&&i.proto.AccountID.encode(e.spender,t.uint32(10).fork()).ldelim(),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(16).int64(e.amount),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.GrantedCryptoAllowance;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.spender=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.amount=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.GrantedCryptoAllowance"},e}(),t.GrantedNftAllowance=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenId=null,e.prototype.spender=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.tokenId&&Object.hasOwnProperty.call(e,"tokenId")&&i.proto.TokenID.encode(e.tokenId,t.uint32(10).fork()).ldelim(),null!=e.spender&&Object.hasOwnProperty.call(e,"spender")&&i.proto.AccountID.encode(e.spender,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.GrantedNftAllowance;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.tokenId=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.spender=i.proto.AccountID.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.GrantedNftAllowance"},e}(),t.GrantedTokenAllowance=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenId=null,e.prototype.spender=null,e.prototype.amount=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.tokenId&&Object.hasOwnProperty.call(e,"tokenId")&&i.proto.TokenID.encode(e.tokenId,t.uint32(10).fork()).ldelim(),null!=e.spender&&Object.hasOwnProperty.call(e,"spender")&&i.proto.AccountID.encode(e.spender,t.uint32(18).fork()).ldelim(),null!=e.amount&&Object.hasOwnProperty.call(e,"amount")&&t.uint32(24).int64(e.amount),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.GrantedTokenAllowance;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.tokenId=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.spender=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.amount=e.int64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.GrantedTokenAllowance"},e}(),t.Response=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.getByKey=null,e.prototype.getBySolidityID=null,e.prototype.contractCallLocal=null,e.prototype.contractGetBytecodeResponse=null,e.prototype.contractGetInfo=null,e.prototype.contractGetRecordsResponse=null,e.prototype.cryptogetAccountBalance=null,e.prototype.cryptoGetAccountRecords=null,e.prototype.cryptoGetInfo=null,e.prototype.cryptoGetLiveHash=null,e.prototype.cryptoGetProxyStakers=null,e.prototype.fileGetContents=null,e.prototype.fileGetInfo=null,e.prototype.transactionGetReceipt=null,e.prototype.transactionGetRecord=null,e.prototype.transactionGetFastRecord=null,e.prototype.consensusGetTopicInfo=null,e.prototype.networkGetVersionInfo=null,e.prototype.tokenGetInfo=null,e.prototype.scheduleGetInfo=null,e.prototype.tokenGetAccountNftInfos=null,e.prototype.tokenGetNftInfo=null,e.prototype.tokenGetNftInfos=null,e.prototype.networkGetExecutionTime=null,e.prototype.accountDetails=null,Object.defineProperty(e.prototype,"response",{get:o.oneOfGetter(t=["getByKey","getBySolidityID","contractCallLocal","contractGetBytecodeResponse","contractGetInfo","contractGetRecordsResponse","cryptogetAccountBalance","cryptoGetAccountRecords","cryptoGetInfo","cryptoGetLiveHash","cryptoGetProxyStakers","fileGetContents","fileGetInfo","transactionGetReceipt","transactionGetRecord","transactionGetFastRecord","consensusGetTopicInfo","networkGetVersionInfo","tokenGetInfo","scheduleGetInfo","tokenGetAccountNftInfos","tokenGetNftInfo","tokenGetNftInfos","networkGetExecutionTime","accountDetails"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.getByKey&&Object.hasOwnProperty.call(e,"getByKey")&&i.proto.GetByKeyResponse.encode(e.getByKey,t.uint32(10).fork()).ldelim(),null!=e.getBySolidityID&&Object.hasOwnProperty.call(e,"getBySolidityID")&&i.proto.GetBySolidityIDResponse.encode(e.getBySolidityID,t.uint32(18).fork()).ldelim(),null!=e.contractCallLocal&&Object.hasOwnProperty.call(e,"contractCallLocal")&&i.proto.ContractCallLocalResponse.encode(e.contractCallLocal,t.uint32(26).fork()).ldelim(),null!=e.contractGetInfo&&Object.hasOwnProperty.call(e,"contractGetInfo")&&i.proto.ContractGetInfoResponse.encode(e.contractGetInfo,t.uint32(34).fork()).ldelim(),null!=e.contractGetBytecodeResponse&&Object.hasOwnProperty.call(e,"contractGetBytecodeResponse")&&i.proto.ContractGetBytecodeResponse.encode(e.contractGetBytecodeResponse,t.uint32(42).fork()).ldelim(),null!=e.contractGetRecordsResponse&&Object.hasOwnProperty.call(e,"contractGetRecordsResponse")&&i.proto.ContractGetRecordsResponse.encode(e.contractGetRecordsResponse,t.uint32(50).fork()).ldelim(),null!=e.cryptogetAccountBalance&&Object.hasOwnProperty.call(e,"cryptogetAccountBalance")&&i.proto.CryptoGetAccountBalanceResponse.encode(e.cryptogetAccountBalance,t.uint32(58).fork()).ldelim(),null!=e.cryptoGetAccountRecords&&Object.hasOwnProperty.call(e,"cryptoGetAccountRecords")&&i.proto.CryptoGetAccountRecordsResponse.encode(e.cryptoGetAccountRecords,t.uint32(66).fork()).ldelim(),null!=e.cryptoGetInfo&&Object.hasOwnProperty.call(e,"cryptoGetInfo")&&i.proto.CryptoGetInfoResponse.encode(e.cryptoGetInfo,t.uint32(74).fork()).ldelim(),null!=e.cryptoGetLiveHash&&Object.hasOwnProperty.call(e,"cryptoGetLiveHash")&&i.proto.CryptoGetLiveHashResponse.encode(e.cryptoGetLiveHash,t.uint32(82).fork()).ldelim(),null!=e.cryptoGetProxyStakers&&Object.hasOwnProperty.call(e,"cryptoGetProxyStakers")&&i.proto.CryptoGetStakersResponse.encode(e.cryptoGetProxyStakers,t.uint32(90).fork()).ldelim(),null!=e.fileGetContents&&Object.hasOwnProperty.call(e,"fileGetContents")&&i.proto.FileGetContentsResponse.encode(e.fileGetContents,t.uint32(98).fork()).ldelim(),null!=e.fileGetInfo&&Object.hasOwnProperty.call(e,"fileGetInfo")&&i.proto.FileGetInfoResponse.encode(e.fileGetInfo,t.uint32(106).fork()).ldelim(),null!=e.transactionGetReceipt&&Object.hasOwnProperty.call(e,"transactionGetReceipt")&&i.proto.TransactionGetReceiptResponse.encode(e.transactionGetReceipt,t.uint32(114).fork()).ldelim(),null!=e.transactionGetRecord&&Object.hasOwnProperty.call(e,"transactionGetRecord")&&i.proto.TransactionGetRecordResponse.encode(e.transactionGetRecord,t.uint32(122).fork()).ldelim(),null!=e.transactionGetFastRecord&&Object.hasOwnProperty.call(e,"transactionGetFastRecord")&&i.proto.TransactionGetFastRecordResponse.encode(e.transactionGetFastRecord,t.uint32(130).fork()).ldelim(),null!=e.consensusGetTopicInfo&&Object.hasOwnProperty.call(e,"consensusGetTopicInfo")&&i.proto.ConsensusGetTopicInfoResponse.encode(e.consensusGetTopicInfo,t.uint32(1202).fork()).ldelim(),null!=e.networkGetVersionInfo&&Object.hasOwnProperty.call(e,"networkGetVersionInfo")&&i.proto.NetworkGetVersionInfoResponse.encode(e.networkGetVersionInfo,t.uint32(1210).fork()).ldelim(),null!=e.tokenGetInfo&&Object.hasOwnProperty.call(e,"tokenGetInfo")&&i.proto.TokenGetInfoResponse.encode(e.tokenGetInfo,t.uint32(1218).fork()).ldelim(),null!=e.scheduleGetInfo&&Object.hasOwnProperty.call(e,"scheduleGetInfo")&&i.proto.ScheduleGetInfoResponse.encode(e.scheduleGetInfo,t.uint32(1226).fork()).ldelim(),null!=e.tokenGetAccountNftInfos&&Object.hasOwnProperty.call(e,"tokenGetAccountNftInfos")&&i.proto.TokenGetAccountNftInfosResponse.encode(e.tokenGetAccountNftInfos,t.uint32(1234).fork()).ldelim(),null!=e.tokenGetNftInfo&&Object.hasOwnProperty.call(e,"tokenGetNftInfo")&&i.proto.TokenGetNftInfoResponse.encode(e.tokenGetNftInfo,t.uint32(1242).fork()).ldelim(),null!=e.tokenGetNftInfos&&Object.hasOwnProperty.call(e,"tokenGetNftInfos")&&i.proto.TokenGetNftInfosResponse.encode(e.tokenGetNftInfos,t.uint32(1250).fork()).ldelim(),null!=e.networkGetExecutionTime&&Object.hasOwnProperty.call(e,"networkGetExecutionTime")&&i.proto.NetworkGetExecutionTimeResponse.encode(e.networkGetExecutionTime,t.uint32(1258).fork()).ldelim(),null!=e.accountDetails&&Object.hasOwnProperty.call(e,"accountDetails")&&i.proto.GetAccountDetailsResponse.encode(e.accountDetails,t.uint32(1266).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.Response;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.getByKey=i.proto.GetByKeyResponse.decode(e,e.uint32());break;case 2:o.getBySolidityID=i.proto.GetBySolidityIDResponse.decode(e,e.uint32());break;case 3:o.contractCallLocal=i.proto.ContractCallLocalResponse.decode(e,e.uint32());break;case 5:o.contractGetBytecodeResponse=i.proto.ContractGetBytecodeResponse.decode(e,e.uint32());break;case 4:o.contractGetInfo=i.proto.ContractGetInfoResponse.decode(e,e.uint32());break;case 6:o.contractGetRecordsResponse=i.proto.ContractGetRecordsResponse.decode(e,e.uint32());break;case 7:o.cryptogetAccountBalance=i.proto.CryptoGetAccountBalanceResponse.decode(e,e.uint32());break;case 8:o.cryptoGetAccountRecords=i.proto.CryptoGetAccountRecordsResponse.decode(e,e.uint32());break;case 9:o.cryptoGetInfo=i.proto.CryptoGetInfoResponse.decode(e,e.uint32());break;case 10:o.cryptoGetLiveHash=i.proto.CryptoGetLiveHashResponse.decode(e,e.uint32());break;case 11:o.cryptoGetProxyStakers=i.proto.CryptoGetStakersResponse.decode(e,e.uint32());break;case 12:o.fileGetContents=i.proto.FileGetContentsResponse.decode(e,e.uint32());break;case 13:o.fileGetInfo=i.proto.FileGetInfoResponse.decode(e,e.uint32());break;case 14:o.transactionGetReceipt=i.proto.TransactionGetReceiptResponse.decode(e,e.uint32());break;case 15:o.transactionGetRecord=i.proto.TransactionGetRecordResponse.decode(e,e.uint32());break;case 16:o.transactionGetFastRecord=i.proto.TransactionGetFastRecordResponse.decode(e,e.uint32());break;case 150:o.consensusGetTopicInfo=i.proto.ConsensusGetTopicInfoResponse.decode(e,e.uint32());break;case 151:o.networkGetVersionInfo=i.proto.NetworkGetVersionInfoResponse.decode(e,e.uint32());break;case 152:o.tokenGetInfo=i.proto.TokenGetInfoResponse.decode(e,e.uint32());break;case 153:o.scheduleGetInfo=i.proto.ScheduleGetInfoResponse.decode(e,e.uint32());break;case 154:o.tokenGetAccountNftInfos=i.proto.TokenGetAccountNftInfosResponse.decode(e,e.uint32());break;case 155:o.tokenGetNftInfo=i.proto.TokenGetNftInfoResponse.decode(e,e.uint32());break;case 156:o.tokenGetNftInfos=i.proto.TokenGetNftInfosResponse.decode(e,e.uint32());break;case 157:o.networkGetExecutionTime=i.proto.NetworkGetExecutionTimeResponse.decode(e,e.uint32());break;case 158:o.accountDetails=i.proto.GetAccountDetailsResponse.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.Response"},e}(),t.CryptoService=function(){function t(t,r,n){e.rpc.Service.call(this,t,r,n)}return(t.prototype=Object.create(e.rpc.Service.prototype)).constructor=t,t.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(t.prototype.createAccount=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"createAccount"}),Object.defineProperty(t.prototype.updateAccount=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"updateAccount"}),Object.defineProperty(t.prototype.cryptoTransfer=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"cryptoTransfer"}),Object.defineProperty(t.prototype.cryptoDelete=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"cryptoDelete"}),Object.defineProperty(t.prototype.approveAllowances=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"approveAllowances"}),Object.defineProperty(t.prototype.deleteAllowances=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"deleteAllowances"}),Object.defineProperty(t.prototype.addLiveHash=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"addLiveHash"}),Object.defineProperty(t.prototype.deleteLiveHash=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"deleteLiveHash"}),Object.defineProperty(t.prototype.getLiveHash=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getLiveHash"}),Object.defineProperty(t.prototype.getAccountRecords=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getAccountRecords"}),Object.defineProperty(t.prototype.cryptoGetBalance=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"cryptoGetBalance"}),Object.defineProperty(t.prototype.getAccountInfo=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getAccountInfo"}),Object.defineProperty(t.prototype.getTransactionReceipts=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getTransactionReceipts"}),Object.defineProperty(t.prototype.getTxRecordByTxID=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getTxRecordByTxID"}),t}(),t.FileService=function(){function t(t,r,n){e.rpc.Service.call(this,t,r,n)}return(t.prototype=Object.create(e.rpc.Service.prototype)).constructor=t,t.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(t.prototype.createFile=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"createFile"}),Object.defineProperty(t.prototype.updateFile=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"updateFile"}),Object.defineProperty(t.prototype.deleteFile=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"deleteFile"}),Object.defineProperty(t.prototype.appendContent=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"appendContent"}),Object.defineProperty(t.prototype.getFileContent=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getFileContent"}),Object.defineProperty(t.prototype.getFileInfo=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getFileInfo"}),Object.defineProperty(t.prototype.systemDelete=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"systemDelete"}),Object.defineProperty(t.prototype.systemUndelete=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"systemUndelete"}),t}(),t.FreezeService=function(){function t(t,r,n){e.rpc.Service.call(this,t,r,n)}return(t.prototype=Object.create(e.rpc.Service.prototype)).constructor=t,t.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(t.prototype.freeze=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"freeze"}),t}(),t.NetworkService=function(){function t(t,r,n){e.rpc.Service.call(this,t,r,n)}return(t.prototype=Object.create(e.rpc.Service.prototype)).constructor=t,t.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(t.prototype.getVersionInfo=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getVersionInfo"}),Object.defineProperty(t.prototype.getAccountDetails=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getAccountDetails"}),Object.defineProperty(t.prototype.getExecutionTime=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getExecutionTime"}),Object.defineProperty(t.prototype.uncheckedSubmit=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"uncheckedSubmit"}),t}(),t.ScheduleService=function(){function t(t,r,n){e.rpc.Service.call(this,t,r,n)}return(t.prototype=Object.create(e.rpc.Service.prototype)).constructor=t,t.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(t.prototype.createSchedule=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"createSchedule"}),Object.defineProperty(t.prototype.signSchedule=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"signSchedule"}),Object.defineProperty(t.prototype.deleteSchedule=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"deleteSchedule"}),Object.defineProperty(t.prototype.getScheduleInfo=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getScheduleInfo"}),t}(),t.SmartContractService=function(){function t(t,r,n){e.rpc.Service.call(this,t,r,n)}return(t.prototype=Object.create(e.rpc.Service.prototype)).constructor=t,t.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(t.prototype.createContract=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"createContract"}),Object.defineProperty(t.prototype.updateContract=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"updateContract"}),Object.defineProperty(t.prototype.contractCallMethod=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"contractCallMethod"}),Object.defineProperty(t.prototype.contractCallLocalMethod=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"contractCallLocalMethod"}),Object.defineProperty(t.prototype.getContractInfo=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getContractInfo"}),Object.defineProperty(t.prototype.contractGetBytecode=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"ContractGetBytecode"}),Object.defineProperty(t.prototype.getBySolidityID=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getBySolidityID"}),Object.defineProperty(t.prototype.getTxRecordByContractID=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getTxRecordByContractID"}),Object.defineProperty(t.prototype.deleteContract=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"deleteContract"}),Object.defineProperty(t.prototype.systemDelete=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"systemDelete"}),Object.defineProperty(t.prototype.systemUndelete=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"systemUndelete"}),Object.defineProperty(t.prototype.callEthereum=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"callEthereum"}),t}(),t.ThrottleGroup=function(){function e(e){if(this.operations=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.operations=o.emptyArray,e.prototype.milliOpsPerSec=o.Long?o.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.operations&&e.operations.length){t.uint32(10).fork();for(var r=0;r<e.operations.length;++r)t.int32(e.operations[r]);t.ldelim()}return null!=e.milliOpsPerSec&&Object.hasOwnProperty.call(e,"milliOpsPerSec")&&t.uint32(16).uint64(e.milliOpsPerSec),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ThrottleGroup;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:if(o.operations&&o.operations.length||(o.operations=[]),2==(7&s))for(var a=e.uint32()+e.pos;e.pos<a;)o.operations.push(e.int32());else o.operations.push(e.int32());break;case 2:o.milliOpsPerSec=e.uint64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ThrottleGroup"},e}(),t.ThrottleBucket=function(){function e(e){if(this.throttleGroups=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.name="",e.prototype.burstPeriodMs=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.throttleGroups=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(10).string(e.name),null!=e.burstPeriodMs&&Object.hasOwnProperty.call(e,"burstPeriodMs")&&t.uint32(16).uint64(e.burstPeriodMs),null!=e.throttleGroups&&e.throttleGroups.length)for(var r=0;r<e.throttleGroups.length;++r)i.proto.ThrottleGroup.encode(e.throttleGroups[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ThrottleBucket;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.name=e.string();break;case 2:o.burstPeriodMs=e.uint64();break;case 3:o.throttleGroups&&o.throttleGroups.length||(o.throttleGroups=[]),o.throttleGroups.push(i.proto.ThrottleGroup.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ThrottleBucket"},e}(),t.ThrottleDefinitions=function(){function e(e){if(this.throttleBuckets=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.throttleBuckets=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.throttleBuckets&&e.throttleBuckets.length)for(var r=0;r<e.throttleBuckets.length;++r)i.proto.ThrottleBucket.encode(e.throttleBuckets[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ThrottleDefinitions;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.throttleBuckets&&o.throttleBuckets.length||(o.throttleBuckets=[]),o.throttleBuckets.push(i.proto.ThrottleBucket.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ThrottleDefinitions"},e}(),t.TokenService=function(){function t(t,r,n){e.rpc.Service.call(this,t,r,n)}return(t.prototype=Object.create(e.rpc.Service.prototype)).constructor=t,t.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(t.prototype.createToken=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"createToken"}),Object.defineProperty(t.prototype.updateToken=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"updateToken"}),Object.defineProperty(t.prototype.mintToken=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"mintToken"}),Object.defineProperty(t.prototype.burnToken=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"burnToken"}),Object.defineProperty(t.prototype.deleteToken=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"deleteToken"}),Object.defineProperty(t.prototype.wipeTokenAccount=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"wipeTokenAccount"}),Object.defineProperty(t.prototype.freezeTokenAccount=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"freezeTokenAccount"}),Object.defineProperty(t.prototype.unfreezeTokenAccount=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"unfreezeTokenAccount"}),Object.defineProperty(t.prototype.grantKycToTokenAccount=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"grantKycToTokenAccount"}),Object.defineProperty(t.prototype.revokeKycFromTokenAccount=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"revokeKycFromTokenAccount"}),Object.defineProperty(t.prototype.associateTokens=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"associateTokens"}),Object.defineProperty(t.prototype.dissociateTokens=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"dissociateTokens"}),Object.defineProperty(t.prototype.updateTokenFeeSchedule=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"updateTokenFeeSchedule"}),Object.defineProperty(t.prototype.getTokenInfo=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getTokenInfo"}),Object.defineProperty(t.prototype.getTokenNftInfo=function e(t,r){return this.rpcCall(e,i.proto.Query,i.proto.Response,t,r)},"name",{value:"getTokenNftInfo"}),Object.defineProperty(t.prototype.pauseToken=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"pauseToken"}),Object.defineProperty(t.prototype.unpauseToken=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"unpauseToken"}),Object.defineProperty(t.prototype.updateNfts=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"updateNfts"}),Object.defineProperty(t.prototype.rejectToken=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"rejectToken"}),Object.defineProperty(t.prototype.airdropTokens=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"airdropTokens"}),Object.defineProperty(t.prototype.cancelAirdrop=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"cancelAirdrop"}),Object.defineProperty(t.prototype.claimAirdrop=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"claimAirdrop"}),t}(),t.SignedTransaction=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.bodyBytes=o.newBuffer([]),e.prototype.sigMap=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.bodyBytes&&Object.hasOwnProperty.call(e,"bodyBytes")&&t.uint32(10).bytes(e.bodyBytes),null!=e.sigMap&&Object.hasOwnProperty.call(e,"sigMap")&&i.proto.SignatureMap.encode(e.sigMap,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SignedTransaction;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.bodyBytes=e.bytes();break;case 2:o.sigMap=i.proto.SignatureMap.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SignedTransaction"},e}(),t.UtilService=function(){function t(t,r,n){e.rpc.Service.call(this,t,r,n)}return(t.prototype=Object.create(e.rpc.Service.prototype)).constructor=t,t.create=function(e,t,r){return new this(e,t,r)},Object.defineProperty(t.prototype.prng=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"prng"}),Object.defineProperty(t.prototype.atomicBatch=function e(t,r){return this.rpcCall(e,i.proto.Transaction,i.proto.TransactionResponse,t,r)},"name",{value:"atomicBatch"}),t}(),t.TokenUnitBalance=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.tokenId=null,e.prototype.balance=o.Long?o.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.tokenId&&Object.hasOwnProperty.call(e,"tokenId")&&i.proto.TokenID.encode(e.tokenId,t.uint32(10).fork()).ldelim(),null!=e.balance&&Object.hasOwnProperty.call(e,"balance")&&t.uint32(16).uint64(e.balance),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TokenUnitBalance;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.tokenId=i.proto.TokenID.decode(e,e.uint32());break;case 2:o.balance=e.uint64();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TokenUnitBalance"},e}(),t.SingleAccountBalances=function(){function e(e){if(this.tokenUnitBalances=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.accountID=null,e.prototype.hbarBalance=o.Long?o.Long.fromBits(0,0,!0):0,e.prototype.tokenUnitBalances=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.accountID&&Object.hasOwnProperty.call(e,"accountID")&&i.proto.AccountID.encode(e.accountID,t.uint32(10).fork()).ldelim(),null!=e.hbarBalance&&Object.hasOwnProperty.call(e,"hbarBalance")&&t.uint32(16).uint64(e.hbarBalance),null!=e.tokenUnitBalances&&e.tokenUnitBalances.length)for(var r=0;r<e.tokenUnitBalances.length;++r)i.proto.TokenUnitBalance.encode(e.tokenUnitBalances[r],t.uint32(26).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SingleAccountBalances;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.accountID=i.proto.AccountID.decode(e,e.uint32());break;case 2:o.hbarBalance=e.uint64();break;case 3:o.tokenUnitBalances&&o.tokenUnitBalances.length||(o.tokenUnitBalances=[]),o.tokenUnitBalances.push(i.proto.TokenUnitBalance.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SingleAccountBalances"},e}(),t.AllAccountBalances=function(){function e(e){if(this.allAccounts=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.consensusTimestamp=null,e.prototype.allAccounts=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.consensusTimestamp&&Object.hasOwnProperty.call(e,"consensusTimestamp")&&i.proto.Timestamp.encode(e.consensusTimestamp,t.uint32(10).fork()).ldelim(),null!=e.allAccounts&&e.allAccounts.length)for(var r=0;r<e.allAccounts.length;++r)i.proto.SingleAccountBalances.encode(e.allAccounts[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.AllAccountBalances;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.consensusTimestamp=i.proto.Timestamp.decode(e,e.uint32());break;case 2:o.allAccounts&&o.allAccounts.length||(o.allAccounts=[]),o.allAccounts.push(i.proto.SingleAccountBalances.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.AllAccountBalances"},e}(),t.ContractActions=function(){function e(e){if(this.contractActions=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.contractActions=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.contractActions&&e.contractActions.length)for(var r=0;r<e.contractActions.length;++r)i.proto.ContractAction.encode(e.contractActions[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractActions;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.contractActions&&o.contractActions.length||(o.contractActions=[]),o.contractActions.push(i.proto.ContractAction.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractActions"},e}(),t.ContractActionType=function(){const e={},t=Object.create(e);return t[e[0]="NO_ACTION"]=0,t[e[1]="CALL"]=1,t[e[2]="CREATE"]=2,t[e[3]="PRECOMPILE"]=3,t[e[4]="SYSTEM"]=4,t}(),t.CallOperationType=function(){const e={},t=Object.create(e);return t[e[0]="OP_UNKNOWN"]=0,t[e[1]="OP_CALL"]=1,t[e[2]="OP_CALLCODE"]=2,t[e[3]="OP_DELEGATECALL"]=3,t[e[4]="OP_STATICCALL"]=4,t[e[5]="OP_CREATE"]=5,t[e[6]="OP_CREATE2"]=6,t}(),t.ContractAction=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.callType=0,e.prototype.callingAccount=null,e.prototype.callingContract=null,e.prototype.gas=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.input=o.newBuffer([]),e.prototype.recipientAccount=null,e.prototype.recipientContract=null,e.prototype.targetedAddress=null,e.prototype.value=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.gasUsed=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.output=null,e.prototype.revertReason=null,e.prototype.error=null,e.prototype.callDepth=0,e.prototype.callOperationType=0,Object.defineProperty(e.prototype,"caller",{get:o.oneOfGetter(t=["callingAccount","callingContract"]),set:o.oneOfSetter(t)}),Object.defineProperty(e.prototype,"recipient",{get:o.oneOfGetter(t=["recipientAccount","recipientContract","targetedAddress"]),set:o.oneOfSetter(t)}),Object.defineProperty(e.prototype,"resultData",{get:o.oneOfGetter(t=["output","revertReason","error"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.callType&&Object.hasOwnProperty.call(e,"callType")&&t.uint32(8).int32(e.callType),null!=e.callingAccount&&Object.hasOwnProperty.call(e,"callingAccount")&&i.proto.AccountID.encode(e.callingAccount,t.uint32(18).fork()).ldelim(),null!=e.callingContract&&Object.hasOwnProperty.call(e,"callingContract")&&i.proto.ContractID.encode(e.callingContract,t.uint32(26).fork()).ldelim(),null!=e.gas&&Object.hasOwnProperty.call(e,"gas")&&t.uint32(32).int64(e.gas),null!=e.input&&Object.hasOwnProperty.call(e,"input")&&t.uint32(42).bytes(e.input),null!=e.recipientAccount&&Object.hasOwnProperty.call(e,"recipientAccount")&&i.proto.AccountID.encode(e.recipientAccount,t.uint32(50).fork()).ldelim(),null!=e.recipientContract&&Object.hasOwnProperty.call(e,"recipientContract")&&i.proto.ContractID.encode(e.recipientContract,t.uint32(58).fork()).ldelim(),null!=e.targetedAddress&&Object.hasOwnProperty.call(e,"targetedAddress")&&t.uint32(66).bytes(e.targetedAddress),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(72).int64(e.value),null!=e.gasUsed&&Object.hasOwnProperty.call(e,"gasUsed")&&t.uint32(80).int64(e.gasUsed),null!=e.output&&Object.hasOwnProperty.call(e,"output")&&t.uint32(90).bytes(e.output),null!=e.revertReason&&Object.hasOwnProperty.call(e,"revertReason")&&t.uint32(98).bytes(e.revertReason),null!=e.error&&Object.hasOwnProperty.call(e,"error")&&t.uint32(106).bytes(e.error),null!=e.callDepth&&Object.hasOwnProperty.call(e,"callDepth")&&t.uint32(112).int32(e.callDepth),null!=e.callOperationType&&Object.hasOwnProperty.call(e,"callOperationType")&&t.uint32(120).int32(e.callOperationType),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractAction;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.callType=e.int32();break;case 2:o.callingAccount=i.proto.AccountID.decode(e,e.uint32());break;case 3:o.callingContract=i.proto.ContractID.decode(e,e.uint32());break;case 4:o.gas=e.int64();break;case 5:o.input=e.bytes();break;case 6:o.recipientAccount=i.proto.AccountID.decode(e,e.uint32());break;case 7:o.recipientContract=i.proto.ContractID.decode(e,e.uint32());break;case 8:o.targetedAddress=e.bytes();break;case 9:o.value=e.int64();break;case 10:o.gasUsed=e.int64();break;case 11:o.output=e.bytes();break;case 12:o.revertReason=e.bytes();break;case 13:o.error=e.bytes();break;case 14:o.callDepth=e.int32();break;case 15:o.callOperationType=e.int32();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractAction"},e}(),t.ContractBytecode=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.contractId=null,e.prototype.initcode=o.newBuffer([]),e.prototype.runtimeBytecode=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.contractId&&Object.hasOwnProperty.call(e,"contractId")&&i.proto.ContractID.encode(e.contractId,t.uint32(10).fork()).ldelim(),null!=e.initcode&&Object.hasOwnProperty.call(e,"initcode")&&t.uint32(18).bytes(e.initcode),null!=e.runtimeBytecode&&Object.hasOwnProperty.call(e,"runtimeBytecode")&&t.uint32(26).bytes(e.runtimeBytecode),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractBytecode;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.contractId=i.proto.ContractID.decode(e,e.uint32());break;case 2:o.initcode=e.bytes();break;case 3:o.runtimeBytecode=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractBytecode"},e}(),t.ContractStateChanges=function(){function e(e){if(this.contractStateChanges=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.contractStateChanges=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.contractStateChanges&&e.contractStateChanges.length)for(var r=0;r<e.contractStateChanges.length;++r)i.proto.ContractStateChange.encode(e.contractStateChanges[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractStateChanges;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.contractStateChanges&&o.contractStateChanges.length||(o.contractStateChanges=[]),o.contractStateChanges.push(i.proto.ContractStateChange.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractStateChanges"},e}(),t.ContractStateChange=function(){function e(e){if(this.storageChanges=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.contractId=null,e.prototype.storageChanges=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.contractId&&Object.hasOwnProperty.call(e,"contractId")&&i.proto.ContractID.encode(e.contractId,t.uint32(10).fork()).ldelim(),null!=e.storageChanges&&e.storageChanges.length)for(var r=0;r<e.storageChanges.length;++r)i.proto.StorageChange.encode(e.storageChanges[r],t.uint32(18).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.ContractStateChange;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.contractId=i.proto.ContractID.decode(e,e.uint32());break;case 2:o.storageChanges&&o.storageChanges.length||(o.storageChanges=[]),o.storageChanges.push(i.proto.StorageChange.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.ContractStateChange"},e}(),t.StorageChange=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.slot=o.newBuffer([]),e.prototype.valueRead=o.newBuffer([]),e.prototype.valueWritten=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.slot&&Object.hasOwnProperty.call(e,"slot")&&t.uint32(10).bytes(e.slot),null!=e.valueRead&&Object.hasOwnProperty.call(e,"valueRead")&&t.uint32(18).bytes(e.valueRead),null!=e.valueWritten&&Object.hasOwnProperty.call(e,"valueWritten")&&i.google.protobuf.BytesValue.encode(e.valueWritten,t.uint32(26).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.StorageChange;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.slot=e.bytes();break;case 2:o.valueRead=e.bytes();break;case 3:o.valueWritten=i.google.protobuf.BytesValue.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.StorageChange"},e}(),t.HashAlgorithm=function(){const e={},t=Object.create(e);return t[e[0]="HASH_ALGORITHM_UNKNOWN"]=0,t[e[1]="SHA_384"]=1,t}(),t.HashObject=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.algorithm=0,e.prototype.length=0,e.prototype.hash=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.algorithm&&Object.hasOwnProperty.call(e,"algorithm")&&t.uint32(8).int32(e.algorithm),null!=e.length&&Object.hasOwnProperty.call(e,"length")&&t.uint32(16).int32(e.length),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(26).bytes(e.hash),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.HashObject;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.algorithm=e.int32();break;case 2:o.length=e.int32();break;case 3:o.hash=e.bytes();break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.HashObject"},e}(),t.RecordStreamFile=function(){function e(e){if(this.recordStreamItems=[],this.sidecars=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.hapiProtoVersion=null,e.prototype.startObjectRunningHash=null,e.prototype.recordStreamItems=o.emptyArray,e.prototype.endObjectRunningHash=null,e.prototype.blockNumber=o.Long?o.Long.fromBits(0,0,!1):0,e.prototype.sidecars=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.hapiProtoVersion&&Object.hasOwnProperty.call(e,"hapiProtoVersion")&&i.proto.SemanticVersion.encode(e.hapiProtoVersion,t.uint32(10).fork()).ldelim(),null!=e.startObjectRunningHash&&Object.hasOwnProperty.call(e,"startObjectRunningHash")&&i.proto.HashObject.encode(e.startObjectRunningHash,t.uint32(18).fork()).ldelim(),null!=e.recordStreamItems&&e.recordStreamItems.length)for(var r=0;r<e.recordStreamItems.length;++r)i.proto.RecordStreamItem.encode(e.recordStreamItems[r],t.uint32(26).fork()).ldelim();if(null!=e.endObjectRunningHash&&Object.hasOwnProperty.call(e,"endObjectRunningHash")&&i.proto.HashObject.encode(e.endObjectRunningHash,t.uint32(34).fork()).ldelim(),null!=e.blockNumber&&Object.hasOwnProperty.call(e,"blockNumber")&&t.uint32(40).int64(e.blockNumber),null!=e.sidecars&&e.sidecars.length)for(r=0;r<e.sidecars.length;++r)i.proto.SidecarMetadata.encode(e.sidecars[r],t.uint32(50).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.RecordStreamFile;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.hapiProtoVersion=i.proto.SemanticVersion.decode(e,e.uint32());break;case 2:o.startObjectRunningHash=i.proto.HashObject.decode(e,e.uint32());break;case 3:o.recordStreamItems&&o.recordStreamItems.length||(o.recordStreamItems=[]),o.recordStreamItems.push(i.proto.RecordStreamItem.decode(e,e.uint32()));break;case 4:o.endObjectRunningHash=i.proto.HashObject.decode(e,e.uint32());break;case 5:o.blockNumber=e.int64();break;case 6:o.sidecars&&o.sidecars.length||(o.sidecars=[]),o.sidecars.push(i.proto.SidecarMetadata.decode(e,e.uint32()));break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.RecordStreamFile"},e}(),t.RecordStreamItem=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.transaction=null,e.prototype.record=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.transaction&&Object.hasOwnProperty.call(e,"transaction")&&i.proto.Transaction.encode(e.transaction,t.uint32(10).fork()).ldelim(),null!=e.record&&Object.hasOwnProperty.call(e,"record")&&i.proto.TransactionRecord.encode(e.record,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.RecordStreamItem;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.transaction=i.proto.Transaction.decode(e,e.uint32());break;case 2:o.record=i.proto.TransactionRecord.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.RecordStreamItem"},e}(),t.SidecarMetadata=function(){function e(e){if(this.types=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.hash=null,e.prototype.id=0,e.prototype.types=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&i.proto.HashObject.encode(e.hash,t.uint32(10).fork()).ldelim(),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(16).int32(e.id),null!=e.types&&e.types.length){t.uint32(26).fork();for(var r=0;r<e.types.length;++r)t.int32(e.types[r]);t.ldelim()}return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SidecarMetadata;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.hash=i.proto.HashObject.decode(e,e.uint32());break;case 2:o.id=e.int32();break;case 3:if(o.types&&o.types.length||(o.types=[]),2==(7&s))for(var a=e.uint32()+e.pos;e.pos<a;)o.types.push(e.int32());else o.types.push(e.int32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SidecarMetadata"},e}(),t.SidecarType=function(){const e={},t=Object.create(e);return t[e[0]="SIDECAR_TYPE_UNKNOWN"]=0,t[e[1]="CONTRACT_STATE_CHANGE"]=1,t[e[2]="CONTRACT_ACTION"]=2,t[e[3]="CONTRACT_BYTECODE"]=3,t}(),t.SidecarFile=function(){function e(e){if(this.sidecarRecords=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.sidecarRecords=o.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=n.create()),null!=e.sidecarRecords&&e.sidecarRecords.length)for(var r=0;r<e.sidecarRecords.length;++r)i.proto.TransactionSidecarRecord.encode(e.sidecarRecords[r],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SidecarFile;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.sidecarRecords&&o.sidecarRecords.length||(o.sidecarRecords=[]),o.sidecarRecords.push(i.proto.TransactionSidecarRecord.decode(e,e.uint32()));else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SidecarFile"},e}(),t.TransactionSidecarRecord=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}let t;return e.prototype.consensusTimestamp=null,e.prototype.migration=!1,e.prototype.stateChanges=null,e.prototype.actions=null,e.prototype.bytecode=null,Object.defineProperty(e.prototype,"sidecarRecords",{get:o.oneOfGetter(t=["stateChanges","actions","bytecode"]),set:o.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.consensusTimestamp&&Object.hasOwnProperty.call(e,"consensusTimestamp")&&i.proto.Timestamp.encode(e.consensusTimestamp,t.uint32(10).fork()).ldelim(),null!=e.migration&&Object.hasOwnProperty.call(e,"migration")&&t.uint32(16).bool(e.migration),null!=e.stateChanges&&Object.hasOwnProperty.call(e,"stateChanges")&&i.proto.ContractStateChanges.encode(e.stateChanges,t.uint32(26).fork()).ldelim(),null!=e.actions&&Object.hasOwnProperty.call(e,"actions")&&i.proto.ContractActions.encode(e.actions,t.uint32(34).fork()).ldelim(),null!=e.bytecode&&Object.hasOwnProperty.call(e,"bytecode")&&i.proto.ContractBytecode.encode(e.bytecode,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.TransactionSidecarRecord;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.consensusTimestamp=i.proto.Timestamp.decode(e,e.uint32());break;case 2:o.migration=e.bool();break;case 3:o.stateChanges=i.proto.ContractStateChanges.decode(e,e.uint32());break;case 4:o.actions=i.proto.ContractActions.decode(e,e.uint32());break;case 5:o.bytecode=i.proto.ContractBytecode.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.TransactionSidecarRecord"},e}(),t.SignatureFile=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.fileSignature=null,e.prototype.metadataSignature=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.fileSignature&&Object.hasOwnProperty.call(e,"fileSignature")&&i.proto.SignatureObject.encode(e.fileSignature,t.uint32(10).fork()).ldelim(),null!=e.metadataSignature&&Object.hasOwnProperty.call(e,"metadataSignature")&&i.proto.SignatureObject.encode(e.metadataSignature,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SignatureFile;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.fileSignature=i.proto.SignatureObject.decode(e,e.uint32());break;case 2:o.metadataSignature=i.proto.SignatureObject.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SignatureFile"},e}(),t.SignatureObject=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.type=0,e.prototype.length=0,e.prototype.checksum=0,e.prototype.signature=o.newBuffer([]),e.prototype.hashObject=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(8).int32(e.type),null!=e.length&&Object.hasOwnProperty.call(e,"length")&&t.uint32(16).int32(e.length),null!=e.checksum&&Object.hasOwnProperty.call(e,"checksum")&&t.uint32(24).int32(e.checksum),null!=e.signature&&Object.hasOwnProperty.call(e,"signature")&&t.uint32(34).bytes(e.signature),null!=e.hashObject&&Object.hasOwnProperty.call(e,"hashObject")&&i.proto.HashObject.encode(e.hashObject,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.proto.SignatureObject;e.pos<n;){var s=e.uint32();switch(s>>>3){case 1:o.type=e.int32();break;case 2:o.length=e.int32();break;case 3:o.checksum=e.int32();break;case 4:o.signature=e.bytes();break;case 5:o.hashObject=i.proto.HashObject.decode(e,e.uint32());break;default:e.skipType(7&s)}}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/proto.SignatureObject"},e}(),t.SignatureType=function(){const e={},t=Object.create(e);return t[e[0]="SIGNATURE_TYPE_UNKNOWN"]=0,t[e[1]="SHA_384_WITH_RSA"]=1,t}(),t})();proto.proto=a;const c=i.google=(()=>{const e={};return e.protobuf=function(){const e={};return e.DoubleValue=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(9).double(e.value),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.google.protobuf.DoubleValue;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.value=e.double();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/google.protobuf.DoubleValue"},e}(),e.FloatValue=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(13).float(e.value),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.google.protobuf.FloatValue;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.value=e.float();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/google.protobuf.FloatValue"},e}(),e.Int64Value=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=o.Long?o.Long.fromBits(0,0,!1):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(8).int64(e.value),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.google.protobuf.Int64Value;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.value=e.int64();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/google.protobuf.Int64Value"},e}(),e.UInt64Value=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=o.Long?o.Long.fromBits(0,0,!0):0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(8).uint64(e.value),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.google.protobuf.UInt64Value;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.value=e.uint64();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/google.protobuf.UInt64Value"},e}(),e.Int32Value=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(8).int32(e.value),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.google.protobuf.Int32Value;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.value=e.int32();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/google.protobuf.Int32Value"},e}(),e.UInt32Value=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(8).uint32(e.value),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.google.protobuf.UInt32Value;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.value=e.uint32();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/google.protobuf.UInt32Value"},e}(),e.BoolValue=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(8).bool(e.value),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.google.protobuf.BoolValue;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.value=e.bool();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/google.protobuf.BoolValue"},e}(),e.StringValue=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(10).string(e.value),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.google.protobuf.StringValue;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.value=e.string();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/google.protobuf.StringValue"},e}(),e.BytesValue=function(){function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.value=o.newBuffer([]),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=n.create()),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(10).bytes(e.value),t},e.decode=function(e,t){e instanceof r||(e=r.create(e));for(var n=void 0===t?e.len:e.pos+t,o=new i.google.protobuf.BytesValue;e.pos<n;){var s=e.uint32();if(s>>>3==1)o.value=e.bytes();else e.skipType(7&s)}return o},e.getTypeUrl=function(e){return void 0===e&&(e="type.googleapis.com"),e+"/google.protobuf.BytesValue"},e}(),e}(),e})();return proto.google=c,proto}function requireLib(){if(hasRequiredLib)return lib;hasRequiredLib=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.proto=lib.google=lib.com=lib.Writer=lib.Reader=void 0;var e,t,r=s(requireMinimal()),n=(e=requireUmd())&&e.__esModule?e:{default:e},o=s(requireProto());function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(i=function(e){return e?r:t})(e)}function s(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=i(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=o?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(n,s,a):n[s]=e[s]}return n.default=e,r&&r.set(e,n),n}null==(t=r.util).Long&&(console.log("Patching Protobuf Long.js instance..."),t.Long=n.default,null!=r.Reader._configure&&r.Reader._configure(r.BufferReader));const a=r.Reader;lib.Reader=a;const c=r.Writer;lib.Writer=c;const u=o.proto;lib.proto=u;const l=o.com;lib.com=l;const d=o.google;return lib.google=d,lib}var libExports=requireLib();const index=getDefaultExportFromCjs(libExports),e$s=_mergeNamespaces({__proto__:null,default:index},[libExports]);class Key{}class BadKeyError extends Error{constructor(e){super(e instanceof Error?e.message:e),this.name="BadKeyError",e instanceof Error&&(this.cause=e,this.stack=e.stack)}}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var naclFast={exports:{}},cryptoBrowserify={},browser$c={exports:{}},safeBuffer$1={exports:{}},dist$1={},hasRequiredDist$1,hasRequiredSafeBuffer$1,hasRequiredBrowser$c;function requireDist$1(){return hasRequiredDist$1||(hasRequiredDist$1=1,function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});for(var t={},r={byteLength:function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},toByteArray:function(e){var t,r,n=c(e),s=n[0],a=n[1],u=new i(function(e,t,r){return 3*(t+r)/4-r}(0,s,a)),l=0,d=a>0?s-4:s;for(r=0;r<d;r+=4)t=o[e.charCodeAt(r)]<<18|o[e.charCodeAt(r+1)]<<12|o[e.charCodeAt(r+2)]<<6|o[e.charCodeAt(r+3)],u[l++]=t>>16&255,u[l++]=t>>8&255,u[l++]=255&t;2===a&&(t=o[e.charCodeAt(r)]<<2|o[e.charCodeAt(r+1)]>>4,u[l++]=255&t);1===a&&(t=o[e.charCodeAt(r)]<<10|o[e.charCodeAt(r+1)]<<4|o[e.charCodeAt(r+2)]>>2,u[l++]=t>>8&255,u[l++]=255&t);return u},fromByteArray:function(e){for(var t,r=e.length,o=r%3,i=[],s=16383,a=0,c=r-o;a<c;a+=s)i.push(l(e,a,a+s>c?c:a+s));1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return i.join("")}},n=[],o=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)n[a]=s[a],o[s.charCodeAt(a)]=a;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e){return n[e>>18&63]+n[e>>12&63]+n[e>>6&63]+n[63&e]}function l(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(u(n));return o.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63;var d={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,u=c>>1,l=-7,d=r?o-1:0,h=r?-1:1,f=e[t+d];for(d+=h,i=f&(1<<-l)-1,f>>=-l,l+=a;l>0;i=256*i+e[t+d],d+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+e[t+d],d+=h,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),i-=u}return(f?-1:1)*s*Math.pow(2,i-n)},write:function(e,t,r,n,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,d=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*c-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[r+f]=255&a,f+=p,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[r+f]=255&s,f+=p,s/=256,u-=8);e[r+f-p]|=128*m}};
/*!
       * The buffer module from node.js, for the browser.
       *
       * @author   Feross Aboukhadijeh <https://feross.org>
       * @license  MIT
       */
!function(e){const t=r,n=d,o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i;const{Uint8Array:s,ArrayBuffer:a,SharedArrayBuffer:c}=globalThis;function u(e){if(e>i)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new s(e);return Object.setPrototypeOf(t,l.prototype),t}function l(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return p(e)}return h(e,t,r)}function h(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!l.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|b(e,t);let n=u(r);const o=n.write(e,t);o!==r&&(n=n.slice(0,o));return n}(e,t);if(a.isView(e))return function(e){if(Q(e,s)){const t=new s(e);return y(t.buffer,t.byteOffset,t.byteLength)}return m(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,a)||e&&Q(e.buffer,a))return y(e,t,r);if(void 0!==c&&(Q(e,c)||e&&Q(e.buffer,c)))return y(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return l.from(n,t,r);const o=function(e){if(l.isBuffer(e)){const t=0|g(e.length),r=u(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||X(e.length)?u(0):m(e);if("Buffer"===e.type&&Array.isArray(e.data))return m(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return l.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function p(e){return f(e),u(e<0?0:0|g(e))}function m(e){const t=e.length<0?0:0|g(e.length),r=u(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function y(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new s(e):void 0===r?new s(e,t):new s(e,t,r),Object.setPrototypeOf(n,l.prototype),n}function g(e){if(e>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|e}function b(e,t){if(l.isBuffer(e))return e.length;if(a.isView(e)||Q(e,a))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return J(e).length;default:if(o)return n?-1:W(e).length;t=(""+t).toLowerCase(),o=!0}}function _(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,r);case"utf8":case"utf-8":return O(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return $(this,t,r);case"base64":return P(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function w(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),X(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:I(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof s.prototype.indexOf?o?s.prototype.indexOf.call(e,t,r):s.prototype.lastIndexOf.call(e,t,r):I(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function I(e,t,r,n,o){let i,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){let n=-1;for(i=r;i<a;i++)if(u(e,i)===u(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===c)return n*s}else-1!==n&&(i-=i-n),n=-1}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){let r=!0;for(let n=0;n<c;n++)if(u(e,i+n)!==u(t,n)){r=!1;break}if(r)return i}return-1}function k(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=t.length;let s;for(n>i/2&&(n=i/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(X(n))return s;e[r+s]=n}return s}function T(e,t,r,n){return Y(W(t,e.length-r),e,r,n)}function A(e,t,r,n){return Y(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function S(e,t,r,n){return Y(J(t),e,r,n)}function E(e,t,r,n){return Y(function(e,t){let r,n,o;const i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function P(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function O(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const t=e[o];let i=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=r){let r,n,a,c;switch(s){case 1:t<128&&(i=t);break;case 2:r=e[o+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(i=c));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:r=e[o+1],n=e[o+2],a=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=s}return function(e){const t=e.length;if(t<=R)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=R));return r}(n)}l.TYPED_ARRAY_SUPPORT=function(){try{const e=new s(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,s.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(e,t,r){return h(e,t,r)},Object.setPrototypeOf(l.prototype,s.prototype),Object.setPrototypeOf(l,s),l.alloc=function(e,t,r){return function(e,t,r){return f(e),e<=0?u(e):void 0!==t?"string"==typeof r?u(e).fill(t,r):u(e).fill(t):u(e)}(e,t,r)},l.allocUnsafe=function(e){return p(e)},l.allocUnsafeSlow=function(e){return p(e)},l.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==l.prototype},l.compare=function(e,t){if(Q(e,s)&&(e=l.from(e,e.offset,e.byteLength)),Q(t,s)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=l.allocUnsafe(t);let o=0;for(r=0;r<e.length;++r){let t=e[r];if(Q(t,s))o+t.length>n.length?(l.isBuffer(t)||(t=l.from(t)),t.copy(n,o)):s.prototype.set.call(n,t,o);else{if(!l.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},l.byteLength=b,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)w(this,t,t+1);return this},l.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)w(this,t,t+3),w(this,t+1,t+2);return this},l.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)w(this,t,t+7),w(this,t+1,t+6),w(this,t+2,t+5),w(this,t+3,t+4);return this},l.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?O(this,0,e):_.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(e,t,r,n,o){if(Q(e,s)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let i=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const c=Math.min(i,a),u=this.slice(n,o),d=e.slice(t,r);for(let s=0;s<c;++s)if(u[s]!==d[s]){i=u[s],a=d[s];break}return i<a?-1:a<i?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return k(this,e,t,r);case"utf8":case"utf-8":return T(this,e,t,r);case"ascii":case"latin1":case"binary":return A(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const R=4096;function C(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function $(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function N(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let i=t;i<r;++i)o+=ee[e[i]];return o}function M(e,t,r){const n=e.slice(t,r);let o="";for(let i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function x(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function B(e,t,r,n,o,i){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function D(e,t,r,n,o){G(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function L(e,t,r,n,o){G(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function F(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function j(e,t,r,o,i){return t=+t,r>>>=0,i||F(e,0,r,4),n.write(e,t,r,o,23,4),r+4}function U(e,t,r,o,i){return t=+t,r>>>=0,i||F(e,0,r,8),n.write(e,t,r,o,52,8),r+8}l.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},l.prototype.readUint8=l.prototype.readUInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),this[e]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(e,t){return e>>>=0,t||x(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readBigUInt64LE=te(function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))}),l.prototype.readBigUInt64BE=te(function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)}),l.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||x(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},l.prototype.readInt8=function(e,t){return e>>>=0,t||x(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){e>>>=0,t||x(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){e>>>=0,t||x(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return e>>>=0,t||x(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readBigInt64LE=te(function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),l.prototype.readBigInt64BE=te(function(e){z(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||V(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),l.prototype.readFloatLE=function(e,t){return e>>>=0,t||x(e,4,this.length),n.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return e>>>=0,t||x(e,4,this.length),n.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return e>>>=0,t||x(e,8,this.length),n.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return e>>>=0,t||x(e,8,this.length),n.read(this,e,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){B(this,e,t,r,Math.pow(2,8*r)-1,0)}let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){B(this,e,t,r,Math.pow(2,8*r)-1,0)}let o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,255,0),this[t]=255&e,t+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigUInt64LE=te(function(e,t=0){return D(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=te(function(e,t=0){return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let o=0,i=1,s=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i|0)-s&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,e,t,r,n-1,-n)}let o=r-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i|0)-s&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||B(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},l.prototype.writeBigInt64LE=te(function(e,t=0){return D(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=te(function(e,t=0){return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(e,t,r){return j(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return j(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return U(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return U(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(!l.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const o=n-r;return this===e&&"function"==typeof s.prototype.copyWithin?this.copyWithin(t,r,n):s.prototype.set.call(e,this.subarray(r,n),t),o},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{const i=l.isBuffer(e)?e:l.from(e,n),s=i.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=i[o%s]}return this};const q={};function K(e,t,r){q[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function H(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function G(e,t,r,n,o,i){if(e>r||e<t){const r="bigint"==typeof t?"n":"";let n;throw n=0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`,new q.ERR_OUT_OF_RANGE("value",n,e)}!function(e,t,r){z(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||V(t,e.length-(r+1))}(n,o,i)}function z(e,t){if("number"!=typeof e)throw new q.ERR_INVALID_ARG_TYPE(t,"number",e)}function V(e,t,r){if(Math.floor(e)!==e)throw z(e,r),new q.ERR_OUT_OF_RANGE("offset","an integer",e);if(t<0)throw new q.ERR_BUFFER_OUT_OF_BOUNDS;throw new q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}K("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),K("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),K("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=H(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=H(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n},RangeError);const Z=/[^+/0-9A-Za-z-_]/g;function W(e,t){let r;t=t||1/0;const n=e.length;let o=null;const i=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function J(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function X(e){return e!=e}const ee=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function te(e){return"undefined"==typeof BigInt?re:e}function re(){throw new Error("BigInt not supported")}}(t);const h=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=h,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode}(dist$1)),dist$1}
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */function requireSafeBuffer$1(){return hasRequiredSafeBuffer$1||(hasRequiredSafeBuffer$1=1,function(e,t){var r=requireDist$1(),n=r.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=i),i.prototype=Object.create(n.prototype),o(n,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=n(e);return void 0!==t?"string"==typeof r?o.fill(t,r):o.fill(t):o.fill(0),o},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(safeBuffer$1,safeBuffer$1.exports)),safeBuffer$1.exports}function requireBrowser$c(){if(hasRequiredBrowser$c)return browser$c.exports;hasRequiredBrowser$c=1;var e=65536,t=4294967295;var r=requireSafeBuffer$1().Buffer,n=commonjsGlobal.crypto||commonjsGlobal.msCrypto;return n&&n.getRandomValues?browser$c.exports=function(o,i){if(o>t)throw new RangeError("requested too many random bytes");var s=r.allocUnsafe(o);if(o>0)if(o>e)for(var a=0;a<o;a+=e)n.getRandomValues(s.slice(a,a+e));else n.getRandomValues(s);if("function"==typeof i)return process$1.nextTick(function(){i(null,s)});return s}:browser$c.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")},browser$c.exports}var inherits_browser={exports:{}},hasRequiredInherits_browser;function requireInherits_browser(){return hasRequiredInherits_browser||(hasRequiredInherits_browser=1,"function"==typeof Object.create?inherits_browser.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:inherits_browser.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}),inherits_browser.exports}var events={exports:{}},hasRequiredEvents,streamBrowser$1,hasRequiredStreamBrowser$1;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var e,t="object"==typeof Reflect?Reflect:null,r=t&&"function"==typeof t.apply?t.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var n=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}events.exports=o,events.exports.once=function(e,t){return new Promise(function(r,n){function o(r){e.removeListener(t,i),n(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}p(e,t,i,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&p(e,"error",t,r)}(e,o,{once:!0})})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var i=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function a(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function c(e,t,r,n){var o,i,c,u;if(s(r),void 0===(i=e._events)?(i=e._events=Object.create(null),e._eventsCount=0):(void 0!==i.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),i=e._events),c=i[t]),void 0===c)c=i[t]=r,++e._eventsCount;else if("function"==typeof c?c=i[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),(o=a(e))>0&&c.length>o&&!c.warned){c.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=c.length,u=l,console&&console.warn&&console.warn(u)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=u.bind(n);return o.listener=r,n.wrapFn=o,o}function d(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):f(o,o.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function f(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function p(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,function o(i){n.once&&e.removeEventListener(t,o),r(i)})}}return Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");i=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||n(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return a(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var o="error"===e,i=this._events;if(void 0!==i)o=o&&void 0===i.error;else if(!o)return!1;if(o){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=i[e];if(void 0===c)return!1;if("function"==typeof c)r(c,this,t);else{var u=c.length,l=f(c,u);for(n=0;n<u;++n)r(l[n],this,t)}return!0},o.prototype.addListener=function(e,t){return c(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return c(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,n,o,i,a;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){a=r[i].listener,o=i;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,i=Object.keys(r);for(n=0;n<i.length;++n)"removeListener"!==(o=i[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},o.prototype.listenerCount=h,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},events.exports}function requireStreamBrowser$1(){return hasRequiredStreamBrowser$1?streamBrowser$1:(hasRequiredStreamBrowser$1=1,streamBrowser$1=requireEvents().EventEmitter)}var util$3={},types={},shams$1,hasRequiredShams$1,shams,hasRequiredShams,esObjectAtoms,hasRequiredEsObjectAtoms,esErrors,hasRequiredEsErrors,_eval,hasRequired_eval,range$1,hasRequiredRange$1,ref,hasRequiredRef,syntax,hasRequiredSyntax,type,hasRequiredType,uri$1,hasRequiredUri,abs,hasRequiredAbs,floor,hasRequiredFloor,max,hasRequiredMax,min,hasRequiredMin,pow,hasRequiredPow,round,hasRequiredRound,_isNaN,hasRequired_isNaN,sign$2,hasRequiredSign$1,gOPD,hasRequiredGOPD,gopd,hasRequiredGopd,esDefineProperty,hasRequiredEsDefineProperty,hasSymbols,hasRequiredHasSymbols,Reflect_getPrototypeOf,hasRequiredReflect_getPrototypeOf,Object_getPrototypeOf,hasRequiredObject_getPrototypeOf,implementation,hasRequiredImplementation,functionBind,hasRequiredFunctionBind,functionCall,hasRequiredFunctionCall,functionApply,hasRequiredFunctionApply,reflectApply,hasRequiredReflectApply,actualApply,hasRequiredActualApply,callBindApplyHelpers,hasRequiredCallBindApplyHelpers,get,hasRequiredGet,getProto,hasRequiredGetProto,hasown,hasRequiredHasown,getIntrinsic,hasRequiredGetIntrinsic,callBound,hasRequiredCallBound,isArguments,hasRequiredIsArguments,isRegex,hasRequiredIsRegex,safeRegexTest,hasRequiredSafeRegexTest,isGeneratorFunction,hasRequiredIsGeneratorFunction,isCallable,hasRequiredIsCallable,forEach$1,hasRequiredForEach,possibleTypedArrayNames,hasRequiredPossibleTypedArrayNames,availableTypedArrays,hasRequiredAvailableTypedArrays;function requireShams$1(){return hasRequiredShams$1?shams$1:(hasRequiredShams$1=1,shams$1=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(var n in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var o=Object.getOwnPropertySymbols(e);if(1!==o.length||o[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var i=Object.getOwnPropertyDescriptor(e,t);if(42!==i.value||!0!==i.enumerable)return!1}return!0})}function requireShams(){if(hasRequiredShams)return shams;hasRequiredShams=1;var e=requireShams$1();return shams=function(){return e()&&!!Symbol.toStringTag}}function requireEsObjectAtoms(){return hasRequiredEsObjectAtoms?esObjectAtoms:(hasRequiredEsObjectAtoms=1,esObjectAtoms=Object)}function requireEsErrors(){return hasRequiredEsErrors?esErrors:(hasRequiredEsErrors=1,esErrors=Error)}function require_eval(){return hasRequired_eval?_eval:(hasRequired_eval=1,_eval=EvalError)}function requireRange$1(){return hasRequiredRange$1?range$1:(hasRequiredRange$1=1,range$1=RangeError)}function requireRef(){return hasRequiredRef?ref:(hasRequiredRef=1,ref=ReferenceError)}function requireSyntax(){return hasRequiredSyntax?syntax:(hasRequiredSyntax=1,syntax=SyntaxError)}function requireType(){return hasRequiredType?type:(hasRequiredType=1,type=TypeError)}function requireUri(){return hasRequiredUri?uri$1:(hasRequiredUri=1,uri$1=URIError)}function requireAbs(){return hasRequiredAbs?abs:(hasRequiredAbs=1,abs=Math.abs)}function requireFloor(){return hasRequiredFloor?floor:(hasRequiredFloor=1,floor=Math.floor)}function requireMax(){return hasRequiredMax?max:(hasRequiredMax=1,max=Math.max)}function requireMin(){return hasRequiredMin?min:(hasRequiredMin=1,min=Math.min)}function requirePow(){return hasRequiredPow?pow:(hasRequiredPow=1,pow=Math.pow)}function requireRound(){return hasRequiredRound?round:(hasRequiredRound=1,round=Math.round)}function require_isNaN(){return hasRequired_isNaN?_isNaN:(hasRequired_isNaN=1,_isNaN=Number.isNaN||function(e){return e!=e})}function requireSign$1(){if(hasRequiredSign$1)return sign$2;hasRequiredSign$1=1;var e=require_isNaN();return sign$2=function(t){return e(t)||0===t?t:t<0?-1:1}}function requireGOPD(){return hasRequiredGOPD?gOPD:(hasRequiredGOPD=1,gOPD=Object.getOwnPropertyDescriptor)}function requireGopd(){if(hasRequiredGopd)return gopd;hasRequiredGopd=1;var e=requireGOPD();if(e)try{e([],"length")}catch(t){e=null}return gopd=e}function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(t){e=!1}return esDefineProperty=e}function requireHasSymbols(){if(hasRequiredHasSymbols)return hasSymbols;hasRequiredHasSymbols=1;var e="undefined"!=typeof Symbol&&Symbol,t=requireShams$1();return hasSymbols=function(){return"function"==typeof e&&("function"==typeof Symbol&&("symbol"==typeof e("foo")&&("symbol"==typeof Symbol("bar")&&t())))}}function requireReflect_getPrototypeOf(){return hasRequiredReflect_getPrototypeOf?Reflect_getPrototypeOf:(hasRequiredReflect_getPrototypeOf=1,Reflect_getPrototypeOf="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null)}function requireObject_getPrototypeOf(){return hasRequiredObject_getPrototypeOf?Object_getPrototypeOf:(hasRequiredObject_getPrototypeOf=1,Object_getPrototypeOf=requireEsObjectAtoms().getPrototypeOf||null)}function requireImplementation(){if(hasRequiredImplementation)return implementation;hasRequiredImplementation=1;var e=Object.prototype.toString,t=Math.max,r=function(e,t){for(var r=[],n=0;n<e.length;n+=1)r[n]=e[n];for(var o=0;o<t.length;o+=1)r[o+e.length]=t[o];return r};return implementation=function(n){var o=this;if("function"!=typeof o||"[object Function]"!==e.apply(o))throw new TypeError("Function.prototype.bind called on incompatible "+o);for(var i,s=function(e,t){for(var r=[],n=t,o=0;n<e.length;n+=1,o+=1)r[o]=e[n];return r}(arguments,1),a=t(0,o.length-s.length),c=[],u=0;u<a;u++)c[u]="$"+u;if(i=Function("binder","return function ("+function(e,t){for(var r="",n=0;n<e.length;n+=1)r+=e[n],n+1<e.length&&(r+=t);return r}(c,",")+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof i){var e=o.apply(this,r(s,arguments));return Object(e)===e?e:this}return o.apply(n,r(s,arguments))}),o.prototype){var l=function(){};l.prototype=o.prototype,i.prototype=new l,l.prototype=null}return i},implementation}function requireFunctionBind(){if(hasRequiredFunctionBind)return functionBind;hasRequiredFunctionBind=1;var e=requireImplementation();return functionBind=Function.prototype.bind||e}function requireFunctionCall(){return hasRequiredFunctionCall?functionCall:(hasRequiredFunctionCall=1,functionCall=Function.prototype.call)}function requireFunctionApply(){return hasRequiredFunctionApply?functionApply:(hasRequiredFunctionApply=1,functionApply=Function.prototype.apply)}function requireReflectApply(){return hasRequiredReflectApply?reflectApply:(hasRequiredReflectApply=1,reflectApply="undefined"!=typeof Reflect&&Reflect&&Reflect.apply)}function requireActualApply(){if(hasRequiredActualApply)return actualApply;hasRequiredActualApply=1;var e=requireFunctionBind(),t=requireFunctionApply(),r=requireFunctionCall(),n=requireReflectApply();return actualApply=n||e.call(r,t)}function requireCallBindApplyHelpers(){if(hasRequiredCallBindApplyHelpers)return callBindApplyHelpers;hasRequiredCallBindApplyHelpers=1;var e=requireFunctionBind(),t=requireType(),r=requireFunctionCall(),n=requireActualApply();return callBindApplyHelpers=function(o){if(o.length<1||"function"!=typeof o[0])throw new t("a function is required");return n(e,r,o)}}function requireGet(){if(hasRequiredGet)return get;hasRequiredGet=1;var e,t=requireCallBindApplyHelpers(),r=requireGopd();try{e=[].__proto__===Array.prototype}catch(s){if(!s||"object"!=typeof s||!("code"in s)||"ERR_PROTO_ACCESS"!==s.code)throw s}var n=!!e&&r&&r(Object.prototype,"__proto__"),o=Object,i=o.getPrototypeOf;return get=n&&"function"==typeof n.get?t([n.get]):"function"==typeof i&&function(e){return i(null==e?e:o(e))}}function requireGetProto(){if(hasRequiredGetProto)return getProto;hasRequiredGetProto=1;var e=requireReflect_getPrototypeOf(),t=requireObject_getPrototypeOf(),r=requireGet();return getProto=e?function(t){return e(t)}:t?function(e){if(!e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("getProto: not an object");return t(e)}:r?function(e){return r(e)}:null}function requireHasown(){if(hasRequiredHasown)return hasown;hasRequiredHasown=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,r=requireFunctionBind();return hasown=r.call(e,t)}function requireGetIntrinsic(){if(hasRequiredGetIntrinsic)return getIntrinsic;var e;hasRequiredGetIntrinsic=1;var t=requireEsObjectAtoms(),r=requireEsErrors(),n=require_eval(),o=requireRange$1(),i=requireRef(),s=requireSyntax(),a=requireType(),c=requireUri(),u=requireAbs(),l=requireFloor(),d=requireMax(),h=requireMin(),f=requirePow(),p=requireRound(),m=requireSign$1(),y=Function,g=function(e){try{return y('"use strict"; return ('+e+").constructor;")()}catch(t){}},b=requireGopd(),_=requireEsDefineProperty(),w=function(){throw new a},v=b?function(){try{return w}catch(e){try{return b(arguments,"callee").get}catch(t){return w}}}():w,I=requireHasSymbols()(),k=requireGetProto(),T=requireObject_getPrototypeOf(),A=requireReflect_getPrototypeOf(),S=requireFunctionApply(),E=requireFunctionCall(),P={},O="undefined"!=typeof Uint8Array&&k?k(Uint8Array):e,R={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?e:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?e:ArrayBuffer,"%ArrayIteratorPrototype%":I&&k?k([][Symbol.iterator]()):e,"%AsyncFromSyncIteratorPrototype%":e,"%AsyncFunction%":P,"%AsyncGenerator%":P,"%AsyncGeneratorFunction%":P,"%AsyncIteratorPrototype%":P,"%Atomics%":"undefined"==typeof Atomics?e:Atomics,"%BigInt%":"undefined"==typeof BigInt?e:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?e:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?e:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?e:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":r,"%eval%":eval,"%EvalError%":n,"%Float16Array%":"undefined"==typeof Float16Array?e:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?e:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?e:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?e:FinalizationRegistry,"%Function%":y,"%GeneratorFunction%":P,"%Int8Array%":"undefined"==typeof Int8Array?e:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?e:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?e:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":I&&k?k(k([][Symbol.iterator]())):e,"%JSON%":"object"==typeof JSON?JSON:e,"%Map%":"undefined"==typeof Map?e:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&I&&k?k((new Map)[Symbol.iterator]()):e,"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":b,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?e:Promise,"%Proxy%":"undefined"==typeof Proxy?e:Proxy,"%RangeError%":o,"%ReferenceError%":i,"%Reflect%":"undefined"==typeof Reflect?e:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?e:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&I&&k?k((new Set)[Symbol.iterator]()):e,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?e:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":I&&k?k(""[Symbol.iterator]()):e,"%Symbol%":I?Symbol:e,"%SyntaxError%":s,"%ThrowTypeError%":v,"%TypedArray%":O,"%TypeError%":a,"%Uint8Array%":"undefined"==typeof Uint8Array?e:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?e:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?e:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?e:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"==typeof WeakMap?e:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?e:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?e:WeakSet,"%Function.prototype.call%":E,"%Function.prototype.apply%":S,"%Object.defineProperty%":_,"%Object.getPrototypeOf%":T,"%Math.abs%":u,"%Math.floor%":l,"%Math.max%":d,"%Math.min%":h,"%Math.pow%":f,"%Math.round%":p,"%Math.sign%":m,"%Reflect.getPrototypeOf%":A};if(k)try{null.error}catch(H){var C=k(k(H));R["%Error.prototype%"]=C}var $=function e(t){var r;if("%AsyncFunction%"===t)r=g("async function () {}");else if("%GeneratorFunction%"===t)r=g("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=g("async function* () {}");else if("%AsyncGenerator%"===t){var n=e("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if("%AsyncIteratorPrototype%"===t){var o=e("%AsyncGenerator%");o&&k&&(r=k(o.prototype))}return R[t]=r,r},N={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},M=requireFunctionBind(),x=requireHasown(),B=M.call(E,Array.prototype.concat),D=M.call(S,Array.prototype.splice),L=M.call(E,String.prototype.replace),F=M.call(E,String.prototype.slice),j=M.call(E,RegExp.prototype.exec),U=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,q=/\\(\\)?/g,K=function(e,t){var r,n=e;if(x(N,n)&&(n="%"+(r=N[n])[0]+"%"),x(R,n)){var o=R[n];if(o===P&&(o=$(n)),void 0===o&&!t)throw new a("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:o}}throw new s("intrinsic "+e+" does not exist!")};return getIntrinsic=function(e,t){if("string"!=typeof e||0===e.length)throw new a("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new a('"allowMissing" argument must be a boolean');if(null===j(/^%?[^%]*%?$/,e))throw new s("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=function(e){var t=F(e,0,1),r=F(e,-1);if("%"===t&&"%"!==r)throw new s("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new s("invalid intrinsic syntax, expected opening `%`");var n=[];return L(e,U,function(e,t,r,o){n[n.length]=r?L(o,q,"$1"):t||e}),n}(e),n=r.length>0?r[0]:"",o=K("%"+n+"%",t),i=o.name,c=o.value,u=!1,l=o.alias;l&&(n=l[0],D(r,B([0,1],l)));for(var d=1,h=!0;d<r.length;d+=1){var f=r[d],p=F(f,0,1),m=F(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===m||"'"===m||"`"===m)&&p!==m)throw new s("property names with quotes must have matching quotes");if("constructor"!==f&&h||(u=!0),x(R,i="%"+(n+="."+f)+"%"))c=R[i];else if(null!=c){if(!(f in c)){if(!t)throw new a("base intrinsic for "+e+" exists, but the property is not available.");return}if(b&&d+1>=r.length){var y=b(c,f);c=(h=!!y)&&"get"in y&&!("originalValue"in y.get)?y.get:c[f]}else h=x(c,f),c=c[f];h&&!u&&(R[i]=c)}}return c},getIntrinsic}function requireCallBound(){if(hasRequiredCallBound)return callBound;hasRequiredCallBound=1;var e=requireGetIntrinsic(),t=requireCallBindApplyHelpers(),r=t([e("%String.prototype.indexOf%")]);return callBound=function(n,o){var i=e(n,!!o);return"function"==typeof i&&r(n,".prototype.")>-1?t([i]):i}}function requireIsArguments(){if(hasRequiredIsArguments)return isArguments;hasRequiredIsArguments=1;var e=requireShams()(),t=requireCallBound()("Object.prototype.toString"),r=function(r){return!(e&&r&&"object"==typeof r&&Symbol.toStringTag in r)&&"[object Arguments]"===t(r)},n=function(e){return!!r(e)||null!==e&&"object"==typeof e&&"length"in e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==t(e)&&"callee"in e&&"[object Function]"===t(e.callee)},o=function(){return r(arguments)}();return r.isLegacyArguments=n,isArguments=o?r:n}function requireIsRegex(){if(hasRequiredIsRegex)return isRegex;hasRequiredIsRegex=1;var e,t=requireCallBound(),r=requireShams()(),n=requireHasown(),o=requireGopd();if(r){var i=t("RegExp.prototype.exec"),s={},a=function(){throw s},c={toString:a,valueOf:a};"symbol"==typeof Symbol.toPrimitive&&(c[Symbol.toPrimitive]=a),e=function(e){if(!e||"object"!=typeof e)return!1;var t=o(e,"lastIndex");if(!(t&&n(t,"value")))return!1;try{i(e,c)}catch(r){return r===s}}}else{var u=t("Object.prototype.toString");e=function(e){return!(!e||"object"!=typeof e&&"function"!=typeof e)&&"[object RegExp]"===u(e)}}return isRegex=e}function requireSafeRegexTest(){if(hasRequiredSafeRegexTest)return safeRegexTest;hasRequiredSafeRegexTest=1;var e=requireCallBound(),t=requireIsRegex(),r=e("RegExp.prototype.exec"),n=requireType();return safeRegexTest=function(e){if(!t(e))throw new n("`regex` must be a RegExp");return function(t){return null!==r(e,t)}}}function requireIsGeneratorFunction(){if(hasRequiredIsGeneratorFunction)return isGeneratorFunction;hasRequiredIsGeneratorFunction=1;var e,t=requireCallBound(),r=requireSafeRegexTest()(/^\s*(?:function)?\*/),n=requireShams()(),o=requireGetProto(),i=t("Object.prototype.toString"),s=t("Function.prototype.toString");return isGeneratorFunction=function(t){if("function"!=typeof t)return!1;if(r(s(t)))return!0;if(!n)return"[object GeneratorFunction]"===i(t);if(!o)return!1;if(void 0===e){var a=function(){if(!n)return!1;try{return Function("return function*() {}")()}catch(e){}}();e=!!a&&o(a)}return o(t)===e}}function requireIsCallable(){if(hasRequiredIsCallable)return isCallable;hasRequiredIsCallable=1;var e,t,r=Function.prototype.toString,n="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof n&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw t}}),t={},n(function(){throw 42},null,e)}catch(h){h!==t&&(n=null)}else n=null;var o=/^\s*class\b/,i=function(e){try{var t=r.call(e);return o.test(t)}catch(n){return!1}},s=function(e){try{return!i(e)&&(r.call(e),!0)}catch(t){return!1}},a=Object.prototype.toString,c="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),l=function(){return!1};if("object"==typeof document){var d=document.all;a.call(d)===a.call(document.all)&&(l=function(e){if((u||!e)&&(void 0===e||"object"==typeof e))try{var t=a.call(e);return("[object HTMLAllCollection]"===t||"[object HTML document.all class]"===t||"[object HTMLCollection]"===t||"[object Object]"===t)&&null==e("")}catch(r){}return!1})}return isCallable=n?function(r){if(l(r))return!0;if(!r)return!1;if("function"!=typeof r&&"object"!=typeof r)return!1;try{n(r,null,e)}catch(o){if(o!==t)return!1}return!i(r)&&s(r)}:function(e){if(l(e))return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if(c)return s(e);if(i(e))return!1;var t=a.call(e);return!("[object Function]"!==t&&"[object GeneratorFunction]"!==t&&!/^\[object HTML/.test(t))&&s(e)}}function requireForEach(){if(hasRequiredForEach)return forEach$1;hasRequiredForEach=1;var e=requireIsCallable(),t=Object.prototype.toString,r=Object.prototype.hasOwnProperty;return forEach$1=function(n,o,i){if(!e(o))throw new TypeError("iterator must be a function");var s,a;arguments.length>=3&&(s=i),a=n,"[object Array]"===t.call(a)?function(e,t,n){for(var o=0,i=e.length;o<i;o++)r.call(e,o)&&(null==n?t(e[o],o,e):t.call(n,e[o],o,e))}(n,o,s):"string"==typeof n?function(e,t,r){for(var n=0,o=e.length;n<o;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)}(n,o,s):function(e,t,n){for(var o in e)r.call(e,o)&&(null==n?t(e[o],o,e):t.call(n,e[o],o,e))}(n,o,s)},forEach$1}function requirePossibleTypedArrayNames(){return hasRequiredPossibleTypedArrayNames?possibleTypedArrayNames:(hasRequiredPossibleTypedArrayNames=1,possibleTypedArrayNames=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"])}function requireAvailableTypedArrays(){if(hasRequiredAvailableTypedArrays)return availableTypedArrays;hasRequiredAvailableTypedArrays=1;var e=requirePossibleTypedArrayNames(),t="undefined"==typeof globalThis?commonjsGlobal:globalThis;return availableTypedArrays=function(){for(var r=[],n=0;n<e.length;n++)"function"==typeof t[e[n]]&&(r[r.length]=e[n]);return r}}var callBind={exports:{}},defineDataProperty,hasRequiredDefineDataProperty,hasPropertyDescriptors_1,hasRequiredHasPropertyDescriptors,setFunctionLength,hasRequiredSetFunctionLength,applyBind,hasRequiredApplyBind,hasRequiredCallBind,whichTypedArray,hasRequiredWhichTypedArray,isTypedArray$1,hasRequiredIsTypedArray,hasRequiredTypes,isBufferBrowser,hasRequiredIsBufferBrowser,hasRequiredUtil$2,buffer_list,hasRequiredBuffer_list,destroy_1$1,hasRequiredDestroy$1;function requireDefineDataProperty(){if(hasRequiredDefineDataProperty)return defineDataProperty;hasRequiredDefineDataProperty=1;var e=requireEsDefineProperty(),t=requireSyntax(),r=requireType(),n=requireGopd();return defineDataProperty=function(o,i,s){if(!o||"object"!=typeof o&&"function"!=typeof o)throw new r("`obj` must be an object or a function`");if("string"!=typeof i&&"symbol"!=typeof i)throw new r("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new r("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new r("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new r("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new r("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,c=arguments.length>4?arguments[4]:null,u=arguments.length>5?arguments[5]:null,l=arguments.length>6&&arguments[6],d=!!n&&n(o,i);if(e)e(o,i,{configurable:null===u&&d?d.configurable:!u,enumerable:null===a&&d?d.enumerable:!a,value:s,writable:null===c&&d?d.writable:!c});else{if(!l&&(a||c||u))throw new t("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");o[i]=s}},defineDataProperty}function requireHasPropertyDescriptors(){if(hasRequiredHasPropertyDescriptors)return hasPropertyDescriptors_1;hasRequiredHasPropertyDescriptors=1;var e=requireEsDefineProperty(),t=function(){return!!e};return t.hasArrayLengthDefineBug=function(){if(!e)return null;try{return 1!==e([],"length",{value:1}).length}catch(t){return!0}},hasPropertyDescriptors_1=t}function requireSetFunctionLength(){if(hasRequiredSetFunctionLength)return setFunctionLength;hasRequiredSetFunctionLength=1;var e=requireGetIntrinsic(),t=requireDefineDataProperty(),r=requireHasPropertyDescriptors()(),n=requireGopd(),o=requireType(),i=e("%Math.floor%");return setFunctionLength=function(e,s){if("function"!=typeof e)throw new o("`fn` is not a function");if("number"!=typeof s||s<0||s>4294967295||i(s)!==s)throw new o("`length` must be a positive 32-bit integer");var a=arguments.length>2&&!!arguments[2],c=!0,u=!0;if("length"in e&&n){var l=n(e,"length");l&&!l.configurable&&(c=!1),l&&!l.writable&&(u=!1)}return(c||u||!a)&&(r?t(e,"length",s,!0,!0):t(e,"length",s)),e},setFunctionLength}function requireApplyBind(){if(hasRequiredApplyBind)return applyBind;hasRequiredApplyBind=1;var e=requireFunctionBind(),t=requireFunctionApply(),r=requireActualApply();return applyBind=function(){return r(e,t,arguments)},applyBind}function requireCallBind(){return hasRequiredCallBind||(hasRequiredCallBind=1,e=callBind,t=requireSetFunctionLength(),r=requireEsDefineProperty(),n=requireCallBindApplyHelpers(),o=requireApplyBind(),e.exports=function(e){var r=n(arguments),o=e.length-(arguments.length-1);return t(r,1+(o>0?o:0),!0)},r?r(e.exports,"apply",{value:o}):e.exports.apply=o),callBind.exports;var e,t,r,n,o}function requireWhichTypedArray(){if(hasRequiredWhichTypedArray)return whichTypedArray;hasRequiredWhichTypedArray=1;var e=requireForEach(),t=requireAvailableTypedArrays(),r=requireCallBind(),n=requireCallBound(),o=requireGopd(),i=requireGetProto(),s=n("Object.prototype.toString"),a=requireShams()(),c="undefined"==typeof globalThis?commonjsGlobal:globalThis,u=t(),l=n("String.prototype.slice"),d=n("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},h={__proto__:null};e(u,a&&o&&i?function(e){var t=new c[e];if(Symbol.toStringTag in t&&i){var n=i(t),s=o(n,Symbol.toStringTag);if(!s&&n){var a=i(n);s=o(a,Symbol.toStringTag)}h["$"+e]=r(s.get)}}:function(e){var t=new c[e],n=t.slice||t.set;n&&(h["$"+e]=r(n))});return whichTypedArray=function(t){if(!t||"object"!=typeof t)return!1;if(!a){var r=l(s(t),8,-1);return d(u,r)>-1?r:"Object"===r&&function(t){var r=!1;return e(h,function(e,n){if(!r)try{e(t),r=l(n,1)}catch(o){}}),r}(t)}return o?function(t){var r=!1;return e(h,function(e,n){if(!r)try{"$"+e(t)===n&&(r=l(n,1))}catch(o){}}),r}(t):null}}function requireIsTypedArray(){if(hasRequiredIsTypedArray)return isTypedArray$1;hasRequiredIsTypedArray=1;var e=requireWhichTypedArray();return isTypedArray$1=function(t){return!!e(t)}}function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,function(e){var t=requireIsArguments(),r=requireIsGeneratorFunction(),n=requireWhichTypedArray(),o=requireIsTypedArray();function i(e){return e.call.bind(e)}var s="undefined"!=typeof BigInt,a="undefined"!=typeof Symbol,c=i(Object.prototype.toString),u=i(Number.prototype.valueOf),l=i(String.prototype.valueOf),d=i(Boolean.prototype.valueOf);if(s)var h=i(BigInt.prototype.valueOf);if(a)var f=i(Symbol.prototype.valueOf);function p(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(r){return!1}}function m(e){return"[object Map]"===c(e)}function y(e){return"[object Set]"===c(e)}function g(e){return"[object WeakMap]"===c(e)}function b(e){return"[object WeakSet]"===c(e)}function _(e){return"[object ArrayBuffer]"===c(e)}function w(e){return"undefined"!=typeof ArrayBuffer&&(_.working?_(e):e instanceof ArrayBuffer)}function v(e){return"[object DataView]"===c(e)}function I(e){return"undefined"!=typeof DataView&&(v.working?v(e):e instanceof DataView)}e.isArgumentsObject=t,e.isGeneratorFunction=r,e.isTypedArray=o,e.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},e.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):o(e)||I(e)},e.isUint8Array=function(e){return"Uint8Array"===n(e)},e.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===n(e)},e.isUint16Array=function(e){return"Uint16Array"===n(e)},e.isUint32Array=function(e){return"Uint32Array"===n(e)},e.isInt8Array=function(e){return"Int8Array"===n(e)},e.isInt16Array=function(e){return"Int16Array"===n(e)},e.isInt32Array=function(e){return"Int32Array"===n(e)},e.isFloat32Array=function(e){return"Float32Array"===n(e)},e.isFloat64Array=function(e){return"Float64Array"===n(e)},e.isBigInt64Array=function(e){return"BigInt64Array"===n(e)},e.isBigUint64Array=function(e){return"BigUint64Array"===n(e)},m.working="undefined"!=typeof Map&&m(new Map),e.isMap=function(e){return"undefined"!=typeof Map&&(m.working?m(e):e instanceof Map)},y.working="undefined"!=typeof Set&&y(new Set),e.isSet=function(e){return"undefined"!=typeof Set&&(y.working?y(e):e instanceof Set)},g.working="undefined"!=typeof WeakMap&&g(new WeakMap),e.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(g.working?g(e):e instanceof WeakMap)},b.working="undefined"!=typeof WeakSet&&b(new WeakSet),e.isWeakSet=function(e){return b(e)},_.working="undefined"!=typeof ArrayBuffer&&_(new ArrayBuffer),e.isArrayBuffer=w,v.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&v(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=I;var k="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function T(e){return"[object SharedArrayBuffer]"===c(e)}function A(e){return void 0!==k&&(void 0===T.working&&(T.working=T(new k)),T.working?T(e):e instanceof k)}function S(e){return p(e,u)}function E(e){return p(e,l)}function P(e){return p(e,d)}function O(e){return s&&p(e,h)}function R(e){return a&&p(e,f)}e.isSharedArrayBuffer=A,e.isAsyncFunction=function(e){return"[object AsyncFunction]"===c(e)},e.isMapIterator=function(e){return"[object Map Iterator]"===c(e)},e.isSetIterator=function(e){return"[object Set Iterator]"===c(e)},e.isGeneratorObject=function(e){return"[object Generator]"===c(e)},e.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===c(e)},e.isNumberObject=S,e.isStringObject=E,e.isBooleanObject=P,e.isBigIntObject=O,e.isSymbolObject=R,e.isBoxedPrimitive=function(e){return S(e)||E(e)||P(e)||O(e)||R(e)},e.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(w(e)||A(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})}(types)),types}function requireIsBufferBrowser(){return hasRequiredIsBufferBrowser?isBufferBrowser:(hasRequiredIsBufferBrowser=1,isBufferBrowser=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8})}function requireUtil$2(){return hasRequiredUtil$2||(hasRequiredUtil$2=1,function(e){var t=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},r=/%[sdj%]/g;e.format=function(e){if(!y(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(s(arguments[n]));return t.join(" ")}n=1;for(var o=arguments,i=o.length,a=String(e).replace(r,function(e){if("%%"===e)return"%";if(n>=i)return e;switch(e){case"%s":return String(o[n++]);case"%d":return Number(o[n++]);case"%j":try{return JSON.stringify(o[n++])}catch(t){return"[Circular]"}default:return e}}),c=o[n];n<i;c=o[++n])p(c)||!_(c)?a+=" "+c:a+=" "+s(c);return a},e.deprecate=function(t,r){if(void 0!==process$1&&!0===process$1.noDeprecation)return t;if(void 0===process$1)return function(){return e.deprecate(t,r).apply(this,arguments)};var n=!1;return function(){if(!n){if(process$1.throwDeprecation)throw new Error(r);process$1.traceDeprecation?console.trace(r):console.error(r),n=!0}return t.apply(this,arguments)}};var n={},o=/^$/;if(process$1.env.NODE_DEBUG){var i=process$1.env.NODE_DEBUG;i=i.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),o=new RegExp("^"+i+"$","i")}function s(t,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),f(r)?n.showHidden=r:r&&e._extend(n,r),g(n.showHidden)&&(n.showHidden=!1),g(n.depth)&&(n.depth=2),g(n.colors)&&(n.colors=!1),g(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=a),u(n,t,n.depth)}function a(e,t){var r=s.styles[t];return r?"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m":e}function c(e,t){return e}function u(t,r,n){if(t.customInspect&&r&&I(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var o=r.inspect(n,t);return y(o)||(o=u(t,o,n)),o}var i=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(m(t))return e.stylize(""+t,"number");if(f(t))return e.stylize(""+t,"boolean");if(p(t))return e.stylize("null","null")}(t,r);if(i)return i;var s=Object.keys(r),a=function(e){var t={};return e.forEach(function(e,r){t[e]=!0}),t}(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(r)),v(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return l(r);if(0===s.length){if(I(r)){var c=r.name?": "+r.name:"";return t.stylize("[Function"+c+"]","special")}if(b(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(w(r))return t.stylize(Date.prototype.toString.call(r),"date");if(v(r))return l(r)}var _,k="",T=!1,A=["{","}"];(h(r)&&(T=!0,A=["[","]"]),I(r))&&(k=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(k=" "+RegExp.prototype.toString.call(r)),w(r)&&(k=" "+Date.prototype.toUTCString.call(r)),v(r)&&(k=" "+l(r)),0!==s.length||T&&0!=r.length?n<0?b(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),_=T?function(e,t,r,n,o){for(var i=[],s=0,a=t.length;s<a;++s)S(t,String(s))?i.push(d(e,t,r,n,String(s),!0)):i.push("");return o.forEach(function(o){o.match(/^\d+$/)||i.push(d(e,t,r,n,o,!0))}),i}(t,r,n,a,s):s.map(function(e){return d(t,r,n,a,e,T)}),t.seen.pop(),function(e,t,r){var n=e.reduce(function(e,t){return t.indexOf("\n"),e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);if(n>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(_,k,A)):A[0]+k+A[1]}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,r,n,o,i){var s,a,c;if((c=Object.getOwnPropertyDescriptor(t,o)||{value:t[o]}).get?a=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(a=e.stylize("[Setter]","special")),S(n,o)||(s="["+o+"]"),a||(e.seen.indexOf(c.value)<0?(a=p(r)?u(e,c.value,null):u(e,c.value,r-1)).indexOf("\n")>-1&&(a=i?a.split("\n").map(function(e){return"  "+e}).join("\n").slice(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),g(s)){if(i&&o.match(/^\d+$/))return a;(s=JSON.stringify(""+o)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.slice(1,-1),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function h(e){return Array.isArray(e)}function f(e){return"boolean"==typeof e}function p(e){return null===e}function m(e){return"number"==typeof e}function y(e){return"string"==typeof e}function g(e){return void 0===e}function b(e){return _(e)&&"[object RegExp]"===k(e)}function _(e){return"object"==typeof e&&null!==e}function w(e){return _(e)&&"[object Date]"===k(e)}function v(e){return _(e)&&("[object Error]"===k(e)||e instanceof Error)}function I(e){return"function"==typeof e}function k(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!n[t])if(o.test(t)){var r=process$1.pid;n[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,r,n)}}else n[t]=function(){};return n[t]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=requireTypes(),e.isArray=h,e.isBoolean=f,e.isNull=p,e.isNullOrUndefined=function(e){return null==e},e.isNumber=m,e.isString=y,e.isSymbol=function(e){return"symbol"==typeof e},e.isUndefined=g,e.isRegExp=b,e.types.isRegExp=b,e.isObject=_,e.isDate=w,e.types.isDate=w,e.isError=v,e.types.isNativeError=v,e.isFunction=I,e.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},e.isBuffer=requireIsBufferBrowser();var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.log=function(){var t,r;console.log("%s - %s",(r=[T((t=new Date).getHours()),T(t.getMinutes()),T(t.getSeconds())].join(":"),[t.getDate(),A[t.getMonth()],r].join(" ")),e.format.apply(e,arguments))},e.inherits=requireInherits_browser(),e._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var E="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}e.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(E&&e[E]){var r;if("function"!=typeof(r=e[E]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(r,E,{value:r,enumerable:!1,writable:!1,configurable:!0}),r}function r(){for(var t,r,n=new Promise(function(e,n){t=e,r=n}),o=[],i=0;i<arguments.length;i++)o.push(arguments[i]);o.push(function(e,n){e?r(e):t(n)});try{e.apply(this,o)}catch(s){r(s)}return n}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),E&&Object.defineProperty(r,E,{value:r,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(r,t(e))},e.promisify.custom=E,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var n=t.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return n.apply(o,arguments)};e.apply(this,t).then(function(e){process$1.nextTick(i.bind(null,null,e))},function(e){process$1.nextTick(P.bind(null,e,i))})}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,t(e)),r}}(util$3)),util$3}function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach(function(e){r(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function r(e,t,r){return(t=o(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,o(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}hasRequiredBuffer_list=1;var i=requireDist$1().Buffer,s=requireUtil$2().inspect,a=s&&s.custom||"inspect";function c(e,t,r){i.prototype.copy.call(e,t,r)}return buffer_list=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return n(e,[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return i.alloc(0);for(var t=i.allocUnsafe(e>>>0),r=this.head,n=0;r;)c(r.data,t,n),n+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var o=t.data,i=e>o.length?o.length:e;if(i===o.length?n+=o:n+=o.slice(0,e),0===(e-=i)){i===o.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=o.slice(i));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=i.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(t,t.length-e,0,s),0===(e-=s)){s===o.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=o.slice(s));break}++n}return this.length-=n,t}},{key:a,value:function(e,r){return s(this,t(t({},r),{},{depth:0,customInspect:!1}))}}]),e}()}function requireDestroy$1(){if(hasRequiredDestroy$1)return destroy_1$1;function e(e,n){r(e,n),t(e)}function t(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function r(e,t){e.emit("error",t)}return hasRequiredDestroy$1=1,destroy_1$1={destroy:function(n,o){var i=this,s=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return s||a?(o?o(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process$1.nextTick(r,this,n)):process$1.nextTick(r,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,function(r){!o&&r?i._writableState?i._writableState.errorEmitted?process$1.nextTick(t,i):(i._writableState.errorEmitted=!0,process$1.nextTick(e,i,r)):process$1.nextTick(e,i,r):o?(process$1.nextTick(t,i),o(r)):process$1.nextTick(t,i)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}}var errorsBrowser={},hasRequiredErrorsBrowser,state,hasRequiredState,browser$b,hasRequiredBrowser$b,_stream_writable$1,hasRequired_stream_writable$1,_stream_duplex$1,hasRequired_stream_duplex$1;function requireErrorsBrowser(){if(hasRequiredErrorsBrowser)return errorsBrowser;hasRequiredErrorsBrowser=1;var e={};function t(t,r,n){n||(n=Error);var o=function(e){var t,n;function o(t,n,o){return e.call(this,function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(t,n,o))||this}return n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,o}(n);o.prototype.name=n.name,o.prototype.code=t,e[t]=o}function r(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(e){return String(e)}),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}return t("ERR_INVALID_OPT_VALUE",function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(e,t,n){var o,i,s;if("string"==typeof t&&(i="not ",t.substr(0,i.length)===i)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))s="The ".concat(e," ").concat(o," ").concat(r(t,"type"));else{var a=function(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}(e,".")?"property":"argument";s='The "'.concat(e,'" ').concat(a," ").concat(o," ").concat(r(t,"type"))}return s+=". Received type ".concat(typeof n)},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),errorsBrowser.codes=e,errorsBrowser}function requireState(){if(hasRequiredState)return state;hasRequiredState=1;var e=requireErrorsBrowser().codes.ERR_INVALID_OPT_VALUE;return state={getHighWaterMark:function(t,r,n,o){var i=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(r,o,n);if(null!=i){if(!isFinite(i)||Math.floor(i)!==i||i<0)throw new e(o?n:"highWaterMark",i);return Math.floor(i)}return t.objectMode?16:16384}}}function requireBrowser$b(){if(hasRequiredBrowser$b)return browser$b;function e(e){try{if(!commonjsGlobal.localStorage)return!1}catch(r){return!1}var t=commonjsGlobal.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}return hasRequiredBrowser$b=1,browser$b=function(t,r){if(e("noDeprecation"))return t;var n=!1;return function(){if(!n){if(e("throwDeprecation"))throw new Error(r);e("traceDeprecation")?console.trace(r):console.warn(r),n=!0}return t.apply(this,arguments)}},browser$b}function require_stream_writable$1(){if(hasRequired_stream_writable$1)return _stream_writable$1;function e(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}var t;hasRequired_stream_writable$1=1,_stream_writable$1=v,v.WritableState=w;var r={deprecate:requireBrowser$b()},n=requireStreamBrowser$1(),o=requireDist$1().Buffer,i=(void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var s,a=requireDestroy$1(),c=requireState().getHighWaterMark,u=requireErrorsBrowser().codes,l=u.ERR_INVALID_ARG_TYPE,d=u.ERR_METHOD_NOT_IMPLEMENTED,h=u.ERR_MULTIPLE_CALLBACK,f=u.ERR_STREAM_CANNOT_PIPE,p=u.ERR_STREAM_DESTROYED,m=u.ERR_STREAM_NULL_VALUES,y=u.ERR_STREAM_WRITE_AFTER_END,g=u.ERR_UNKNOWN_ENCODING,b=a.errorOrDestroy;function _(){}function w(r,n,o){t=t||require_stream_duplex$1(),r=r||{},"boolean"!=typeof o&&(o=n instanceof t),this.objectMode=!!r.objectMode,o&&(this.objectMode=this.objectMode||!!r.writableObjectMode),this.highWaterMark=c(this,r,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=!1===r.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=r.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new h;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(process$1.nextTick(o,n),process$1.nextTick(E,e,t),e._writableState.errorEmitted=!0,b(e,n)):(o(n),e._writableState.errorEmitted=!0,b(e,n),E(e,t))}(e,r,n,t,o);else{var i=A(r)||e.destroyed;i||r.corked||r.bufferProcessing||!r.bufferedRequest||T(e,r),n?process$1.nextTick(k,e,r,i,o):k(e,r,i,o)}}(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==r.emitClose,this.autoDestroy=!!r.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new e(this)}function v(e){var r=this instanceof(t=t||require_stream_duplex$1());if(!r&&!s.call(v,this))return new v(e);this._writableState=new w(e,this,r),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),n.call(this)}function I(e,t,r,n,o,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new p("write")):r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function k(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),E(e,t)}function T(t,r){r.bufferProcessing=!0;var n=r.bufferedRequest;if(t._writev&&n&&n.next){var o=r.bufferedRequestCount,i=new Array(o),s=r.corkedRequestsFree;s.entry=n;for(var a=0,c=!0;n;)i[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;i.allBuffers=c,I(t,r,!0,r.length,i,"",s.finish),r.pendingcb++,r.lastBufferedRequest=null,s.next?(r.corkedRequestsFree=s.next,s.next=null):r.corkedRequestsFree=new e(r),r.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,d=n.callback;if(I(t,r,!1,r.objectMode?1:u.length,u,l,d),n=n.next,r.bufferedRequestCount--,r.writing)break}null===n&&(r.lastBufferedRequest=null)}r.bufferedRequest=n,r.bufferProcessing=!1}function A(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final(function(r){t.pendingcb--,r&&b(e,r),t.prefinished=!0,e.emit("prefinish"),E(e,t)})}function E(e,t){var r=A(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,process$1.nextTick(S,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}return requireInherits_browser()(v,n),w.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(w.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(s=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(e){return!!s.call(this,e)||this===v&&(e&&e._writableState instanceof w)}})):s=function(e){return e instanceof this},v.prototype.pipe=function(){b(this,new f)},v.prototype.write=function(e,t,r){var n,s=this._writableState,a=!1,c=!s.objectMode&&(n=e,o.isBuffer(n)||n instanceof i);return c&&!o.isBuffer(e)&&(e=function(e){return o.from(e)}(e)),"function"==typeof t&&(r=t,t=null),c?t="buffer":t||(t=s.defaultEncoding),"function"!=typeof r&&(r=_),s.ending?function(e,t){var r=new y;b(e,r),process$1.nextTick(t,r)}(this,r):(c||function(e,t,r,n){var o;return null===r?o=new m:"string"==typeof r||t.objectMode||(o=new l("chunk",["string","Buffer"],r)),!o||(b(e,o),process$1.nextTick(n,o),!1)}(this,s,e,r))&&(s.pendingcb++,a=function(e,t,r,n,i,s){if(!r){var a=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=o.from(t,r));return t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var c=t.objectMode?1:n.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else I(e,t,!1,c,n,i,s);return u}(this,s,c,e,t,r)),a},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},v.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new g(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(v.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(e,t,r){r(new d("_write()"))},v.prototype._writev=null,v.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,E(e,t),r&&(t.finished?process$1.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(v.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),v.prototype.destroy=a.destroy,v.prototype._undestroy=a.undestroy,v.prototype._destroy=function(e,t){t(e)},_stream_writable$1}function require_stream_duplex$1(){if(hasRequired_stream_duplex$1)return _stream_duplex$1;hasRequired_stream_duplex$1=1;var e=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};_stream_duplex$1=s;var t=require_stream_readable$1(),r=require_stream_writable$1();requireInherits_browser()(s,t);for(var n=e(r.prototype),o=0;o<n.length;o++){var i=n[o];s.prototype[i]||(s.prototype[i]=r.prototype[i])}function s(e){if(!(this instanceof s))return new s(e);t.call(this,e),r.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",a)))}function a(){this._writableState.ended||process$1.nextTick(c,this)}function c(e){e.end()}return Object.defineProperty(s.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(s.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(s.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(s.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),_stream_duplex$1}var string_decoder={},hasRequiredString_decoder,endOfStream,hasRequiredEndOfStream,async_iterator,hasRequiredAsync_iterator,fromBrowser,hasRequiredFromBrowser,_stream_readable$1,hasRequired_stream_readable$1,_stream_transform$1,hasRequired_stream_transform$1,_stream_passthrough$1,hasRequired_stream_passthrough$1,pipeline_1,hasRequiredPipeline,streamBrowserify,hasRequiredStreamBrowserify,hashBase$1,hasRequiredHashBase$1,md5_js,hasRequiredMd5_js,ripemd160$1,hasRequiredRipemd160$1;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var e=requireSafeBuffer$1().Buffer,t=e.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(r){var n;switch(this.encoding=function(r){var n=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(r);if("string"!=typeof n&&(e.isEncoding===t||!t(r)))throw new Error("Unknown encoding: "+r);return n||r}(r),this.encoding){case"utf16le":this.text=i,this.end=s,n=4;break;case"utf8":this.fillLast=o,n=4;break;case"base64":this.text=a,this.end=c,n=3;break;default:return this.write=u,void(this.end=l)}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(n)}function n(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,r=function(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"�";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"�";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,"�"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function i(e,t){if((e.length-t)%2==0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function s(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function a(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function u(e){return e.toString(this.encoding)}function l(e){return e&&e.length?this.write(e):""}return string_decoder.StringDecoder=r,r.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},r.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"�":t},r.prototype.text=function(e,t){var r=function(e,t,r){var o=t.length-1;if(o<r)return 0;var i=n(t[o]);if(i>=0)return i>0&&(e.lastNeed=i-1),i;if(--o<r||-2===i)return 0;if(i=n(t[o]),i>=0)return i>0&&(e.lastNeed=i-2),i;if(--o<r||-2===i)return 0;if(i=n(t[o]),i>=0)return i>0&&(2===i?i=0:e.lastNeed=i-3),i;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var o=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,o),e.toString("utf8",t,o)},r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length},string_decoder}function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream;hasRequiredEndOfStream=1;var e=requireErrorsBrowser().codes.ERR_STREAM_PREMATURE_CLOSE;function t(){}return endOfStream=function r(n,o,i){if("function"==typeof o)return r(n,null,o);o||(o={}),i=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];e.apply(this,n)}}}(i||t);var s=o.readable||!1!==o.readable&&n.readable,a=o.writable||!1!==o.writable&&n.writable,c=function(){n.writable||l()},u=n._writableState&&n._writableState.finished,l=function(){a=!1,u=!0,s||i.call(n)},d=n._readableState&&n._readableState.endEmitted,h=function(){s=!1,d=!0,a||i.call(n)},f=function(e){i.call(n,e)},p=function(){var t;return s&&!d?(n._readableState&&n._readableState.ended||(t=new e),i.call(n,t)):a&&!u?(n._writableState&&n._writableState.ended||(t=new e),i.call(n,t)):void 0},m=function(){n.req.on("finish",l)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(n)?a&&!n._writableState&&(n.on("end",c),n.on("close",c)):(n.on("complete",l),n.on("abort",p),n.req?m():n.on("request",m)),n.on("end",h),n.on("finish",l),!1!==o.error&&n.on("error",f),n.on("close",p),function(){n.removeListener("complete",l),n.removeListener("abort",p),n.removeListener("request",m),n.req&&n.req.removeListener("finish",l),n.removeListener("end",c),n.removeListener("close",c),n.removeListener("finish",l),n.removeListener("end",h),n.removeListener("error",f),n.removeListener("close",p)}},endOfStream}function requireAsync_iterator(){if(hasRequiredAsync_iterator)return async_iterator;var e;function t(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}hasRequiredAsync_iterator=1;var r=requireEndOfStream(),n=Symbol("lastResolve"),o=Symbol("lastReject"),i=Symbol("error"),s=Symbol("ended"),a=Symbol("lastPromise"),c=Symbol("handlePromise"),u=Symbol("stream");function l(e,t){return{value:e,done:t}}function d(e){var t=e[n];if(null!==t){var r=e[u].read();null!==r&&(e[a]=null,e[n]=null,e[o]=null,t(l(r,!1)))}}function h(e){process$1.nextTick(d,e)}var f=Object.getPrototypeOf(function(){}),p=Object.setPrototypeOf((t(e={get stream(){return this[u]},next:function(){var e=this,t=this[i];if(null!==t)return Promise.reject(t);if(this[s])return Promise.resolve(l(void 0,!0));if(this[u].destroyed)return new Promise(function(t,r){process$1.nextTick(function(){e[i]?r(e[i]):t(l(void 0,!0))})});var r,n=this[a];if(n)r=new Promise(function(e,t){return function(r,n){e.then(function(){t[s]?r(l(void 0,!0)):t[c](r,n)},n)}}(n,this));else{var o=this[u].read();if(null!==o)return Promise.resolve(l(o,!1));r=new Promise(this[c])}return this[a]=r,r}},Symbol.asyncIterator,function(){return this}),t(e,"return",function(){var e=this;return new Promise(function(t,r){e[u].destroy(null,function(e){e?r(e):t(l(void 0,!0))})})}),e),f);return async_iterator=function(e){var d,f=Object.create(p,(t(d={},u,{value:e,writable:!0}),t(d,n,{value:null,writable:!0}),t(d,o,{value:null,writable:!0}),t(d,i,{value:null,writable:!0}),t(d,s,{value:e._readableState.endEmitted,writable:!0}),t(d,c,{value:function(e,t){var r=f[u].read();r?(f[a]=null,f[n]=null,f[o]=null,e(l(r,!1))):(f[n]=e,f[o]=t)},writable:!0}),d));return f[a]=null,r(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=f[o];return null!==t&&(f[a]=null,f[n]=null,f[o]=null,t(e)),void(f[i]=e)}var r=f[n];null!==r&&(f[a]=null,f[n]=null,f[o]=null,r(l(void 0,!0))),f[s]=!0}),e.on("readable",h.bind(null,f)),f}}function requireFromBrowser(){return hasRequiredFromBrowser?fromBrowser:(hasRequiredFromBrowser=1,fromBrowser=function(){throw new Error("Readable.from is not available in the browser")})}function require_stream_readable$1(){if(hasRequired_stream_readable$1)return _stream_readable$1;var e;hasRequired_stream_readable$1=1,_stream_readable$1=v,v.ReadableState=w,requireEvents().EventEmitter;var t=function(e,t){return e.listeners(t).length},r=requireStreamBrowser$1(),n=requireDist$1().Buffer,o=(void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var i,s=requireUtil$2();i=s&&s.debuglog?s.debuglog("stream"):function(){};var a,c,u,l=requireBuffer_list(),d=requireDestroy$1(),h=requireState().getHighWaterMark,f=requireErrorsBrowser().codes,p=f.ERR_INVALID_ARG_TYPE,m=f.ERR_STREAM_PUSH_AFTER_EOF,y=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;requireInherits_browser()(v,r);var b=d.errorOrDestroy,_=["error","close","destroy","pause","resume"];function w(t,r,n){e=e||require_stream_duplex$1(),t=t||{},"boolean"!=typeof n&&(n=r instanceof e),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=h(this,t,"readableHighWaterMark",n),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(a||(a=requireString_decoder().StringDecoder),this.decoder=new a(t.encoding),this.encoding=t.encoding)}function v(t){if(e=e||require_stream_duplex$1(),!(this instanceof v))return new v(t);var n=this instanceof e;this._readableState=new w(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),r.call(this)}function I(e,t,r,s,a){i("readableAddChunk",t);var c,u=e._readableState;if(null===t)u.reading=!1,function(e,t){if(i("onEofChunk"),t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?S(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,E(e)))}(e,u);else if(a||(c=function(e,t){var r;i=t,n.isBuffer(i)||i instanceof o||"string"==typeof t||void 0===t||e.objectMode||(r=new p("chunk",["string","Buffer","Uint8Array"],t));var i;return r}(u,t)),c)b(e,c);else if(u.objectMode||t&&t.length>0)if("string"==typeof t||u.objectMode||Object.getPrototypeOf(t)===n.prototype||(t=function(e){return n.from(e)}(t)),s)u.endEmitted?b(e,new g):k(e,u,t,!0);else if(u.ended)b(e,new m);else{if(u.destroyed)return!1;u.reading=!1,u.decoder&&!r?(t=u.decoder.write(t),u.objectMode||0!==t.length?k(e,u,t,!1):P(e,u)):k(e,u,t,!1)}else s||(u.reading=!1,P(e,u));return!u.ended&&(u.length<u.highWaterMark||0===u.length)}function k(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&S(e)),P(e,t)}Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),v.prototype.destroy=d.destroy,v.prototype._undestroy=d.undestroy,v.prototype._destroy=function(e,t){t(e)},v.prototype.push=function(e,t){var r,o=this._readableState;return o.objectMode?r=!0:"string"==typeof e&&((t=t||o.defaultEncoding)!==o.encoding&&(e=n.from(e,t),t=""),r=!0),I(this,e,t,!1,r)},v.prototype.unshift=function(e){return I(this,e,null,!0,!1)},v.prototype.isPaused=function(){return!1===this._readableState.flowing},v.prototype.setEncoding=function(e){a||(a=requireString_decoder().StringDecoder);var t=new a(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=t.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var T=1073741824;function A(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function S(e){var t=e._readableState;i("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(i("emitReadable",t.flowing),t.emittedReadable=!0,process$1.nextTick(E,e))}function E(e){var t=e._readableState;i("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,N(e)}function P(e,t){t.readingMore||(t.readingMore=!0,process$1.nextTick(O,e,t))}function O(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(i("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function R(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function C(e){i("readable nexttick read 0"),e.read(0)}function $(e,t){i("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),N(e),t.flowing&&!t.reading&&e.read(0)}function N(e){var t=e._readableState;for(i("flow",t.flowing);t.flowing&&null!==e.read(););}function M(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function x(e){var t=e._readableState;i("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,process$1.nextTick(B,t,e))}function B(e,t){if(i("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function D(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}return v.prototype.read=function(e){i("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return i("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?x(this):S(this),null;if(0===(e=A(e,t))&&t.ended)return 0===t.length&&x(this),null;var n,o=t.needReadable;return i("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&i("length less than watermark",o=!0),t.ended||t.reading?i("reading or ended",o=!1):o&&(i("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=A(r,t))),null===(n=e>0?M(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&x(this)),null!==n&&this.emit("data",n),n},v.prototype._read=function(e){b(this,new y("_read()"))},v.prototype.pipe=function(e,r){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=e;break;case 1:o.pipes=[o.pipes,e];break;default:o.pipes.push(e)}o.pipesCount+=1,i("pipe count=%d opts=%j",o.pipesCount,r);var s=(!r||!1!==r.end)&&e!==process$1.stdout&&e!==process$1.stderr?c:m;function a(t,r){i("onunpipe"),t===n&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,i("cleanup"),e.removeListener("close",f),e.removeListener("finish",p),e.removeListener("drain",u),e.removeListener("error",h),e.removeListener("unpipe",a),n.removeListener("end",c),n.removeListener("end",m),n.removeListener("data",d),l=!0,!o.awaitDrain||e._writableState&&!e._writableState.needDrain||u())}function c(){i("onend"),e.end()}o.endEmitted?process$1.nextTick(s):n.once("end",s),e.on("unpipe",a);var u=function(e){return function(){var r=e._readableState;i("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,0===r.awaitDrain&&t(e,"data")&&(r.flowing=!0,N(e))}}(n);e.on("drain",u);var l=!1;function d(t){i("ondata");var r=e.write(t);i("dest.write",r),!1===r&&((1===o.pipesCount&&o.pipes===e||o.pipesCount>1&&-1!==D(o.pipes,e))&&!l&&(i("false write response, pause",o.awaitDrain),o.awaitDrain++),n.pause())}function h(r){i("onerror",r),m(),e.removeListener("error",h),0===t(e,"error")&&b(e,r)}function f(){e.removeListener("finish",p),m()}function p(){i("onfinish"),e.removeListener("close",f),m()}function m(){i("unpipe"),n.unpipe(e)}return n.on("data",d),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",h),e.once("close",f),e.once("finish",p),e.emit("pipe",n),o.flowing||(i("pipe resume"),n.resume()),e},v.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var s=D(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},v.prototype.on=function(e,t){var n=r.prototype.on.call(this,e,t),o=this._readableState;return"data"===e?(o.readableListening=this.listenerCount("readable")>0,!1!==o.flowing&&this.resume()):"readable"===e&&(o.endEmitted||o.readableListening||(o.readableListening=o.needReadable=!0,o.flowing=!1,o.emittedReadable=!1,i("on readable",o.length,o.reading),o.length?S(this):o.reading||process$1.nextTick(C,this))),n},v.prototype.addListener=v.prototype.on,v.prototype.removeListener=function(e,t){var n=r.prototype.removeListener.call(this,e,t);return"readable"===e&&process$1.nextTick(R,this),n},v.prototype.removeAllListeners=function(e){var t=r.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||process$1.nextTick(R,this),t},v.prototype.resume=function(){var e=this._readableState;return e.flowing||(i("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,process$1.nextTick($,e,t))}(this,e)),e.paused=!1,this},v.prototype.pause=function(){return i("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(i("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},v.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",function(){if(i("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(o){(i("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o)||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))}),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var s=0;s<_.length;s++)e.on(_[s],this.emit.bind(this,_[s]));return this._read=function(t){i("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(v.prototype[Symbol.asyncIterator]=function(){return void 0===c&&(c=requireAsync_iterator()),c(this)}),Object.defineProperty(v.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(v.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(v.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),v._fromList=M,Object.defineProperty(v.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(v.from=function(e,t){return void 0===u&&(u=requireFromBrowser()),u(v,e,t)}),_stream_readable$1}function require_stream_transform$1(){if(hasRequired_stream_transform$1)return _stream_transform$1;hasRequired_stream_transform$1=1,_stream_transform$1=a;var e=requireErrorsBrowser().codes,t=e.ERR_METHOD_NOT_IMPLEMENTED,r=e.ERR_MULTIPLE_CALLBACK,n=e.ERR_TRANSFORM_ALREADY_TRANSFORMING,o=e.ERR_TRANSFORM_WITH_LENGTH_0,i=require_stream_duplex$1();function s(e,t){var n=this._transformState;n.transforming=!1;var o=n.writecb;if(null===o)return this.emit("error",new r);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),o(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(e){if(!(this instanceof a))return new a(e);i.call(this,e),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",c)}function c(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?u(this,null,null):this._flush(function(t,r){u(e,t,r)})}function u(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new o;if(e._transformState.transforming)throw new n;return e.push(null)}return requireInherits_browser()(a,i),a.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},a.prototype._transform=function(e,r,n){n(new t("_transform()"))},a.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},a.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},a.prototype._destroy=function(e,t){i.prototype._destroy.call(this,e,function(e){t(e)})},_stream_transform$1}function require_stream_passthrough$1(){if(hasRequired_stream_passthrough$1)return _stream_passthrough$1;hasRequired_stream_passthrough$1=1,_stream_passthrough$1=t;var e=require_stream_transform$1();function t(r){if(!(this instanceof t))return new t(r);e.call(this,r)}return requireInherits_browser()(t,e),t.prototype._transform=function(e,t,r){r(null,e)},_stream_passthrough$1}function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;var e;hasRequiredPipeline=1;var t=requireErrorsBrowser().codes,r=t.ERR_MISSING_ARGS,n=t.ERR_STREAM_DESTROYED;function o(e){if(e)throw e}function i(e){e()}function s(e,t){return e.pipe(t)}return pipeline_1=function(){for(var t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];var u,l=function(e){return e.length?"function"!=typeof e[e.length-1]?o:e.pop():o}(a);if(Array.isArray(a[0])&&(a=a[0]),a.length<2)throw new r("streams");var d=a.map(function(t,r){var o=r<a.length-1;return function(t,r,o,i){i=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(i);var s=!1;t.on("close",function(){s=!0}),void 0===e&&(e=requireEndOfStream()),e(t,{readable:r,writable:o},function(e){if(e)return i(e);s=!0,i()});var a=!1;return function(e){if(!s&&!a)return a=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void i(e||new n("pipe"))}}(t,o,r>0,function(e){u||(u=e),e&&d.forEach(i),o||(d.forEach(i),l(u))})});return a.reduce(s)},pipeline_1}function requireStreamBrowserify(){if(hasRequiredStreamBrowserify)return streamBrowserify;hasRequiredStreamBrowserify=1,streamBrowserify=t;var e=requireEvents().EventEmitter;function t(){e.call(this)}return requireInherits_browser()(t,e),t.Readable=require_stream_readable$1(),t.Writable=require_stream_writable$1(),t.Duplex=require_stream_duplex$1(),t.Transform=require_stream_transform$1(),t.PassThrough=require_stream_passthrough$1(),t.finished=requireEndOfStream(),t.pipeline=requirePipeline(),t.Stream=t,t.prototype.pipe=function(t,r){var n=this;function o(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",o),t.on("drain",i),t._isStdio||r&&!1===r.end||(n.on("end",a),n.on("close",c));var s=!1;function a(){s||(s=!0,t.end())}function c(){s||(s=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(l(),0===e.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",o),t.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",c),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",u),t.on("error",u),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t},streamBrowserify}function requireHashBase$1(){if(hasRequiredHashBase$1)return hashBase$1;hasRequiredHashBase$1=1;var e=requireSafeBuffer$1().Buffer,t=requireStreamBrowserify().Transform;function r(r){t.call(this),this._block=e.allocUnsafe(r),this._blockSize=r,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}requireInherits_browser()(r,t),r.prototype._transform=function(e,t,r){var n=null;try{this.update(e,t)}catch(o){n=o}r(n)},r.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(r){t=r}e(t)};var n="undefined"!=typeof Uint8Array,o="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&ArrayBuffer.isView&&(e.prototype instanceof Uint8Array||e.TYPED_ARRAY_SUPPORT);return r.prototype.update=function(t,r){if(this._finalized)throw new Error("Digest already called");t=function(t,r){if(t instanceof e)return t;if("string"==typeof t)return e.from(t,r);if(o&&ArrayBuffer.isView(t)){if(0===t.byteLength)return e.alloc(0);var i=e.from(t.buffer,t.byteOffset,t.byteLength);if(i.byteLength===t.byteLength)return i}if(n&&t instanceof Uint8Array)return e.from(t);if(e.isBuffer(t)&&t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return e.from(t);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}(t,r);for(var i=this._block,s=0;this._blockOffset+t.length-s>=this._blockSize;){for(var a=this._blockOffset;a<this._blockSize;)i[a++]=t[s++];this._update(),this._blockOffset=0}for(;s<t.length;)i[this._blockOffset++]=t[s++];for(var c=0,u=8*t.length;u>0;++c)this._length[c]+=u,(u=this._length[c]/4294967296|0)>0&&(this._length[c]-=4294967296*u);return this},r.prototype._update=function(){throw new Error("_update is not implemented")},r.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();void 0!==e&&(t=t.toString(e)),this._block.fill(0),this._blockOffset=0;for(var r=0;r<4;++r)this._length[r]=0;return t},r.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase$1=r}function requireMd5_js(){if(hasRequiredMd5_js)return md5_js;hasRequiredMd5_js=1;var e=requireInherits_browser(),t=requireHashBase$1(),r=requireSafeBuffer$1().Buffer,n=new Array(16);function o(){t.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function i(e,t){return e<<t|e>>>32-t}function s(e,t,r,n,o,s,a){return i(e+(t&r|~t&n)+o+s|0,a)+t|0}function a(e,t,r,n,o,s,a){return i(e+(t&n|r&~n)+o+s|0,a)+t|0}function c(e,t,r,n,o,s,a){return i(e+(t^r^n)+o+s|0,a)+t|0}function u(e,t,r,n,o,s,a){return i(e+(r^(t|~n))+o+s|0,a)+t|0}return e(o,t),o.prototype._update=function(){for(var e=n,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,o=this._b,i=this._c,l=this._d;r=s(r,o,i,l,e[0],3614090360,7),l=s(l,r,o,i,e[1],3905402710,12),i=s(i,l,r,o,e[2],606105819,17),o=s(o,i,l,r,e[3],3250441966,22),r=s(r,o,i,l,e[4],4118548399,7),l=s(l,r,o,i,e[5],1200080426,12),i=s(i,l,r,o,e[6],2821735955,17),o=s(o,i,l,r,e[7],4249261313,22),r=s(r,o,i,l,e[8],1770035416,7),l=s(l,r,o,i,e[9],2336552879,12),i=s(i,l,r,o,e[10],4294925233,17),o=s(o,i,l,r,e[11],2304563134,22),r=s(r,o,i,l,e[12],1804603682,7),l=s(l,r,o,i,e[13],4254626195,12),i=s(i,l,r,o,e[14],2792965006,17),r=a(r,o=s(o,i,l,r,e[15],1236535329,22),i,l,e[1],4129170786,5),l=a(l,r,o,i,e[6],3225465664,9),i=a(i,l,r,o,e[11],643717713,14),o=a(o,i,l,r,e[0],3921069994,20),r=a(r,o,i,l,e[5],3593408605,5),l=a(l,r,o,i,e[10],38016083,9),i=a(i,l,r,o,e[15],3634488961,14),o=a(o,i,l,r,e[4],3889429448,20),r=a(r,o,i,l,e[9],568446438,5),l=a(l,r,o,i,e[14],3275163606,9),i=a(i,l,r,o,e[3],4107603335,14),o=a(o,i,l,r,e[8],1163531501,20),r=a(r,o,i,l,e[13],2850285829,5),l=a(l,r,o,i,e[2],4243563512,9),i=a(i,l,r,o,e[7],1735328473,14),r=c(r,o=a(o,i,l,r,e[12],2368359562,20),i,l,e[5],4294588738,4),l=c(l,r,o,i,e[8],2272392833,11),i=c(i,l,r,o,e[11],1839030562,16),o=c(o,i,l,r,e[14],4259657740,23),r=c(r,o,i,l,e[1],2763975236,4),l=c(l,r,o,i,e[4],1272893353,11),i=c(i,l,r,o,e[7],4139469664,16),o=c(o,i,l,r,e[10],3200236656,23),r=c(r,o,i,l,e[13],681279174,4),l=c(l,r,o,i,e[0],3936430074,11),i=c(i,l,r,o,e[3],3572445317,16),o=c(o,i,l,r,e[6],76029189,23),r=c(r,o,i,l,e[9],3654602809,4),l=c(l,r,o,i,e[12],3873151461,11),i=c(i,l,r,o,e[15],530742520,16),r=u(r,o=c(o,i,l,r,e[2],3299628645,23),i,l,e[0],4096336452,6),l=u(l,r,o,i,e[7],1126891415,10),i=u(i,l,r,o,e[14],2878612391,15),o=u(o,i,l,r,e[5],4237533241,21),r=u(r,o,i,l,e[12],1700485571,6),l=u(l,r,o,i,e[3],2399980690,10),i=u(i,l,r,o,e[10],4293915773,15),o=u(o,i,l,r,e[1],2240044497,21),r=u(r,o,i,l,e[8],1873313359,6),l=u(l,r,o,i,e[15],4264355552,10),i=u(i,l,r,o,e[6],2734768916,15),o=u(o,i,l,r,e[13],1309151649,21),r=u(r,o,i,l,e[4],4149444226,6),l=u(l,r,o,i,e[11],3174756917,10),i=u(i,l,r,o,e[2],718787259,15),o=u(o,i,l,r,e[9],3951481745,21),this._a=this._a+r|0,this._b=this._b+o|0,this._c=this._c+i|0,this._d=this._d+l|0},o.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=r.allocUnsafe(16);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e},md5_js=o}function requireRipemd160$1(){if(hasRequiredRipemd160$1)return ripemd160$1;hasRequiredRipemd160$1=1;var e=requireDist$1().Buffer,t=requireInherits_browser(),r=requireHashBase$1(),n=new Array(16),o=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],i=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],s=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],a=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],c=[0,1518500249,1859775393,2400959708,2840853838],u=[1352829926,1548603684,1836072691,2053994217,0];function l(){r.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function d(e,t){return e<<t|e>>>32-t}function h(e,t,r,n,o,i,s,a){return d(e+(t^r^n)+i+s|0,a)+o|0}function f(e,t,r,n,o,i,s,a){return d(e+(t&r|~t&n)+i+s|0,a)+o|0}function p(e,t,r,n,o,i,s,a){return d(e+((t|~r)^n)+i+s|0,a)+o|0}function m(e,t,r,n,o,i,s,a){return d(e+(t&n|r&~n)+i+s|0,a)+o|0}function y(e,t,r,n,o,i,s,a){return d(e+(t^(r|~n))+i+s|0,a)+o|0}return t(l,r),l.prototype._update=function(){for(var e=n,t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);for(var r=0|this._a,l=0|this._b,g=0|this._c,b=0|this._d,_=0|this._e,w=0|this._a,v=0|this._b,I=0|this._c,k=0|this._d,T=0|this._e,A=0;A<80;A+=1){var S,E;A<16?(S=h(r,l,g,b,_,e[o[A]],c[0],s[A]),E=y(w,v,I,k,T,e[i[A]],u[0],a[A])):A<32?(S=f(r,l,g,b,_,e[o[A]],c[1],s[A]),E=m(w,v,I,k,T,e[i[A]],u[1],a[A])):A<48?(S=p(r,l,g,b,_,e[o[A]],c[2],s[A]),E=p(w,v,I,k,T,e[i[A]],u[2],a[A])):A<64?(S=m(r,l,g,b,_,e[o[A]],c[3],s[A]),E=f(w,v,I,k,T,e[i[A]],u[3],a[A])):(S=y(r,l,g,b,_,e[o[A]],c[4],s[A]),E=h(w,v,I,k,T,e[i[A]],u[4],a[A])),r=_,_=b,b=d(g,10),g=l,l=S,w=T,T=k,k=d(I,10),I=v,v=E}var P=this._b+g+k|0;this._b=this._c+b+T|0,this._c=this._d+_+w|0,this._d=this._e+r+v|0,this._e=this._a+l+I|0,this._a=P},l.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=e.alloc?e.alloc(20):new e(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},ripemd160$1=l}var sha_js={exports:{}},isarray$1,hasRequiredIsarray$1,typedArrayBuffer,hasRequiredTypedArrayBuffer,toBuffer,hasRequiredToBuffer$1,hash$2,hasRequiredHash$1,sha$1,hasRequiredSha$1,sha1$1,hasRequiredSha1,sha256$2,hasRequiredSha256,sha224$1,hasRequiredSha224,sha512$1,hasRequiredSha512,sha384$1,hasRequiredSha384,hasRequiredSha_js,cipherBase,hasRequiredCipherBase,browser$a,hasRequiredBrowser$a,legacy$1,hasRequiredLegacy,md5$1,hasRequiredMd5$1,browser$9,hasRequiredBrowser$9;function requireIsarray$1(){if(hasRequiredIsarray$1)return isarray$1;hasRequiredIsarray$1=1;var e={}.toString;return isarray$1=Array.isArray||function(t){return"[object Array]"==e.call(t)}}function requireTypedArrayBuffer(){if(hasRequiredTypedArrayBuffer)return typedArrayBuffer;hasRequiredTypedArrayBuffer=1;var e=requireType(),t=requireCallBound()("TypedArray.prototype.buffer",!0),r=requireIsTypedArray();return typedArrayBuffer=t||function(t){if(!r(t))throw new e("Not a Typed Array");return t.buffer}}function requireToBuffer$1(){if(hasRequiredToBuffer$1)return toBuffer;hasRequiredToBuffer$1=1;var e=requireSafeBuffer$1().Buffer,t=requireIsarray$1(),r=requireTypedArrayBuffer(),n=ArrayBuffer.isView||function(e){try{return r(e),!0}catch(t){return!1}},o="undefined"!=typeof Uint8Array,i="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,s=i&&(e.prototype instanceof Uint8Array||e.TYPED_ARRAY_SUPPORT);return toBuffer=function(r,a){if(r instanceof e)return r;if("string"==typeof r)return e.from(r,a);if(i&&n(r)){if(0===r.byteLength)return e.alloc(0);if(s){var c=e.from(r.buffer,r.byteOffset,r.byteLength);if(c.byteLength===r.byteLength)return c}var u=r instanceof Uint8Array?r:new Uint8Array(r.buffer,r.byteOffset,r.byteLength),l=e.from(u);if(l.length===r.byteLength)return l}if(o&&r instanceof Uint8Array)return e.from(r);var d=t(r);if(d)for(var h=0;h<r.length;h+=1){var f=r[h];if("number"!=typeof f||f<0||f>255||~~f!==f)throw new RangeError("Array items must be numbers in the range 0-255.")}if(d||e.isBuffer(r)&&r.constructor&&"function"==typeof r.constructor.isBuffer&&r.constructor.isBuffer(r))return e.from(r);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')}}function requireHash$1(){if(hasRequiredHash$1)return hash$2;hasRequiredHash$1=1;var e=requireSafeBuffer$1().Buffer,t=requireToBuffer$1();function r(t,r){this._block=e.alloc(t),this._finalSize=r,this._blockSize=t,this._len=0}return r.prototype.update=function(e,r){e=t(e,r||"utf8");for(var n=this._block,o=this._blockSize,i=e.length,s=this._len,a=0;a<i;){for(var c=s%o,u=Math.min(i-a,o-c),l=0;l<u;l++)n[c+l]=e[a+l];a+=u,(s+=u)%o===0&&this._update(n)}return this._len+=i,this},r.prototype.digest=function(e){var t=this._len%this._blockSize;this._block[t]=128,this._block.fill(0,t+1),t>=this._finalSize&&(this._update(this._block),this._block.fill(0));var r=8*this._len;if(r<=4294967295)this._block.writeUInt32BE(r,this._blockSize-4);else{var n=(4294967295&r)>>>0,o=(r-n)/4294967296;this._block.writeUInt32BE(o,this._blockSize-8),this._block.writeUInt32BE(n,this._blockSize-4)}this._update(this._block);var i=this._hash();return e?i.toString(e):i},r.prototype._update=function(){throw new Error("_update must be implemented by subclass")},hash$2=r}function requireSha$1(){if(hasRequiredSha$1)return sha$1;hasRequiredSha$1=1;var e=requireInherits_browser(),t=requireHash$1(),r=requireSafeBuffer$1().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function i(){this.init(),this._w=o,t.call(this,64,56)}function s(e){return e<<5|e>>>27}function a(e){return e<<30|e>>>2}function c(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}return e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},i.prototype._update=function(e){for(var t=this._w,r=0|this._a,o=0|this._b,i=0|this._c,u=0|this._d,l=0|this._e,d=0;d<16;++d)t[d]=e.readInt32BE(4*d);for(;d<80;++d)t[d]=t[d-3]^t[d-8]^t[d-14]^t[d-16];for(var h=0;h<80;++h){var f=~~(h/20),p=s(r)+c(f,o,i,u)+l+t[h]+n[f]|0;l=u,u=i,i=a(o),o=r,r=p}this._a=r+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=u+this._d|0,this._e=l+this._e|0},i.prototype._hash=function(){var e=r.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},sha$1=i}function requireSha1(){if(hasRequiredSha1)return sha1$1;hasRequiredSha1=1;var e=requireInherits_browser(),t=requireHash$1(),r=requireSafeBuffer$1().Buffer,n=[1518500249,1859775393,-1894007588,-899497514],o=new Array(80);function i(){this.init(),this._w=o,t.call(this,64,56)}function s(e){return e<<1|e>>>31}function a(e){return e<<5|e>>>27}function c(e){return e<<30|e>>>2}function u(e,t,r,n){return 0===e?t&r|~t&n:2===e?t&r|t&n|r&n:t^r^n}return e(i,t),i.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},i.prototype._update=function(e){for(var t=this._w,r=0|this._a,o=0|this._b,i=0|this._c,l=0|this._d,d=0|this._e,h=0;h<16;++h)t[h]=e.readInt32BE(4*h);for(;h<80;++h)t[h]=s(t[h-3]^t[h-8]^t[h-14]^t[h-16]);for(var f=0;f<80;++f){var p=~~(f/20),m=a(r)+u(p,o,i,l)+d+t[f]+n[p]|0;d=l,l=i,i=c(o),o=r,r=m}this._a=r+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=l+this._d|0,this._e=d+this._e|0},i.prototype._hash=function(){var e=r.allocUnsafe(20);return e.writeInt32BE(0|this._a,0),e.writeInt32BE(0|this._b,4),e.writeInt32BE(0|this._c,8),e.writeInt32BE(0|this._d,12),e.writeInt32BE(0|this._e,16),e},sha1$1=i}function requireSha256(){if(hasRequiredSha256)return sha256$2;hasRequiredSha256=1;var e=requireInherits_browser(),t=requireHash$1(),r=requireSafeBuffer$1().Buffer,n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],o=new Array(64);function i(){this.init(),this._w=o,t.call(this,64,56)}function s(e,t,r){return r^e&(t^r)}function a(e,t,r){return e&t|r&(e|t)}function c(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function u(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}function l(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function d(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}return e(i,t),i.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},i.prototype._update=function(e){for(var t=this._w,r=0|this._a,o=0|this._b,i=0|this._c,h=0|this._d,f=0|this._e,p=0|this._f,m=0|this._g,y=0|this._h,g=0;g<16;++g)t[g]=e.readInt32BE(4*g);for(;g<64;++g)t[g]=d(t[g-2])+t[g-7]+l(t[g-15])+t[g-16]|0;for(var b=0;b<64;++b){var _=y+u(f)+s(f,p,m)+n[b]+t[b]|0,w=c(r)+a(r,o,i)|0;y=m,m=p,p=f,f=h+_|0,h=i,i=o,o=r,r=_+w|0}this._a=r+this._a|0,this._b=o+this._b|0,this._c=i+this._c|0,this._d=h+this._d|0,this._e=f+this._e|0,this._f=p+this._f|0,this._g=m+this._g|0,this._h=y+this._h|0},i.prototype._hash=function(){var e=r.allocUnsafe(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},sha256$2=i}function requireSha224(){if(hasRequiredSha224)return sha224$1;hasRequiredSha224=1;var e=requireInherits_browser(),t=requireSha256(),r=requireHash$1(),n=requireSafeBuffer$1().Buffer,o=new Array(64);function i(){this.init(),this._w=o,r.call(this,64,56)}return e(i,t),i.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},i.prototype._hash=function(){var e=n.allocUnsafe(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},sha224$1=i}function requireSha512(){if(hasRequiredSha512)return sha512$1;hasRequiredSha512=1;var e=requireInherits_browser(),t=requireHash$1(),r=requireSafeBuffer$1().Buffer,n=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],o=new Array(160);function i(){this.init(),this._w=o,t.call(this,128,112)}function s(e,t,r){return r^e&(t^r)}function a(e,t,r){return e&t|r&(e|t)}function c(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function u(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function l(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function d(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function h(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function f(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function p(e,t){return e>>>0<t>>>0?1:0}return e(i,t),i.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},i.prototype._update=function(e){for(var t=this._w,r=0|this._ah,o=0|this._bh,i=0|this._ch,m=0|this._dh,y=0|this._eh,g=0|this._fh,b=0|this._gh,_=0|this._hh,w=0|this._al,v=0|this._bl,I=0|this._cl,k=0|this._dl,T=0|this._el,A=0|this._fl,S=0|this._gl,E=0|this._hl,P=0;P<32;P+=2)t[P]=e.readInt32BE(4*P),t[P+1]=e.readInt32BE(4*P+4);for(;P<160;P+=2){var O=t[P-30],R=t[P-30+1],C=l(O,R),$=d(R,O),N=h(O=t[P-4],R=t[P-4+1]),M=f(R,O),x=t[P-14],B=t[P-14+1],D=t[P-32],L=t[P-32+1],F=$+B|0,j=C+x+p(F,$)|0;j=(j=j+N+p(F=F+M|0,M)|0)+D+p(F=F+L|0,L)|0,t[P]=j,t[P+1]=F}for(var U=0;U<160;U+=2){j=t[U],F=t[U+1];var q=a(r,o,i),K=a(w,v,I),H=c(r,w),G=c(w,r),z=u(y,T),V=u(T,y),Z=n[U],W=n[U+1],J=s(y,g,b),Y=s(T,A,S),Q=E+V|0,X=_+z+p(Q,E)|0;X=(X=(X=X+J+p(Q=Q+Y|0,Y)|0)+Z+p(Q=Q+W|0,W)|0)+j+p(Q=Q+F|0,F)|0;var ee=G+K|0,te=H+q+p(ee,G)|0;_=b,E=S,b=g,S=A,g=y,A=T,y=m+X+p(T=k+Q|0,k)|0,m=i,k=I,i=o,I=v,o=r,v=w,r=X+te+p(w=Q+ee|0,Q)|0}this._al=this._al+w|0,this._bl=this._bl+v|0,this._cl=this._cl+I|0,this._dl=this._dl+k|0,this._el=this._el+T|0,this._fl=this._fl+A|0,this._gl=this._gl+S|0,this._hl=this._hl+E|0,this._ah=this._ah+r+p(this._al,w)|0,this._bh=this._bh+o+p(this._bl,v)|0,this._ch=this._ch+i+p(this._cl,I)|0,this._dh=this._dh+m+p(this._dl,k)|0,this._eh=this._eh+y+p(this._el,T)|0,this._fh=this._fh+g+p(this._fl,A)|0,this._gh=this._gh+b+p(this._gl,S)|0,this._hh=this._hh+_+p(this._hl,E)|0},i.prototype._hash=function(){var e=r.allocUnsafe(64);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),t(this._gh,this._gl,48),t(this._hh,this._hl,56),e},sha512$1=i}function requireSha384(){if(hasRequiredSha384)return sha384$1;hasRequiredSha384=1;var e=requireInherits_browser(),t=requireSha512(),r=requireHash$1(),n=requireSafeBuffer$1().Buffer,o=new Array(160);function i(){this.init(),this._w=o,r.call(this,128,112)}return e(i,t),i.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},i.prototype._hash=function(){var e=n.allocUnsafe(48);function t(t,r,n){e.writeInt32BE(t,n),e.writeInt32BE(r,n+4)}return t(this._ah,this._al,0),t(this._bh,this._bl,8),t(this._ch,this._cl,16),t(this._dh,this._dl,24),t(this._eh,this._el,32),t(this._fh,this._fl,40),e},sha384$1=i}function requireSha_js(){return hasRequiredSha_js||(hasRequiredSha_js=1,(e=sha_js).exports=function(t){var r=t.toLowerCase(),n=e.exports[r];if(!n)throw new Error(r+" is not supported (we accept pull requests)");return new n},e.exports.sha=requireSha$1(),e.exports.sha1=requireSha1(),e.exports.sha224=requireSha224(),e.exports.sha256=requireSha256(),e.exports.sha384=requireSha384(),e.exports.sha512=requireSha512()),sha_js.exports;var e}function requireCipherBase(){if(hasRequiredCipherBase)return cipherBase;hasRequiredCipherBase=1;var e=requireSafeBuffer$1().Buffer,t=requireStreamBrowserify().Transform,r=requireString_decoder().StringDecoder;function n(e){t.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}requireInherits_browser()(n,t);var o="undefined"!=typeof Uint8Array,i="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&ArrayBuffer.isView&&(e.prototype instanceof Uint8Array||e.TYPED_ARRAY_SUPPORT);return n.prototype.update=function(t,r,n){var s=function(t,r){if(t instanceof e)return t;if("string"==typeof t)return e.from(t,r);if(i&&ArrayBuffer.isView(t)){if(0===t.byteLength)return e.alloc(0);var n=e.from(t.buffer,t.byteOffset,t.byteLength);if(n.byteLength===t.byteLength)return n}if(o&&t instanceof Uint8Array)return e.from(t);if(e.isBuffer(t)&&t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return e.from(t);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}(t,r),a=this._update(s);return this.hashMode?this:(n&&(a=this._toString(a,n)),a)},n.prototype.setAutoPadding=function(){},n.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},n.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},n.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},n.prototype._transform=function(e,t,r){var n;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(o){n=o}finally{r(n)}},n.prototype._flush=function(e){var t;try{this.push(this.__final())}catch(r){t=r}e(t)},n.prototype._finalOrDigest=function(t){var r=this.__final()||e.alloc(0);return t&&(r=this._toString(r,t,!0)),r},n.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new r(t),this._encoding=t),this._encoding!==t)throw new Error("can’t switch encodings");var o=this._decoder.write(e);return n&&(o+=this._decoder.end()),o},cipherBase=n}function requireBrowser$a(){if(hasRequiredBrowser$a)return browser$a;hasRequiredBrowser$a=1;var e=requireInherits_browser(),t=requireMd5_js(),r=requireRipemd160$1(),n=requireSha_js(),o=requireCipherBase();function i(e){o.call(this,"digest"),this._hash=e}return e(i,o),i.prototype._update=function(e){this._hash.update(e)},i.prototype._final=function(){return this._hash.digest()},browser$a=function(e){return"md5"===(e=e.toLowerCase())?new t:"rmd160"===e||"ripemd160"===e?new r:new i(n(e))}}function requireLegacy(){if(hasRequiredLegacy)return legacy$1;hasRequiredLegacy=1;var e=requireInherits_browser(),t=requireSafeBuffer$1().Buffer,r=requireCipherBase(),n=t.alloc(128),o=64;function i(e,i){r.call(this,"digest"),"string"==typeof i&&(i=t.from(i)),this._alg=e,this._key=i,i.length>o?i=e(i):i.length<o&&(i=t.concat([i,n],o));for(var s=this._ipad=t.allocUnsafe(o),a=this._opad=t.allocUnsafe(o),c=0;c<o;c++)s[c]=54^i[c],a[c]=92^i[c];this._hash=[s]}return e(i,r),i.prototype._update=function(e){this._hash.push(e)},i.prototype._final=function(){var e=this._alg(t.concat(this._hash));return this._alg(t.concat([this._opad,e]))},legacy$1=i}function requireMd5$1(){if(hasRequiredMd5$1)return md5$1;hasRequiredMd5$1=1;var e=requireMd5_js();return md5$1=function(t){return(new e).update(t).digest()}}function requireBrowser$9(){if(hasRequiredBrowser$9)return browser$9;hasRequiredBrowser$9=1;var e=requireInherits_browser(),t=requireLegacy(),r=requireCipherBase(),n=requireSafeBuffer$1().Buffer,o=requireMd5$1(),i=requireRipemd160$1(),s=requireSha_js(),a=n.alloc(128);function c(e,t){r.call(this,"digest"),"string"==typeof t&&(t=n.from(t));var o="sha512"===e||"sha384"===e?128:64;(this._alg=e,this._key=t,t.length>o)?t=("rmd160"===e?new i:s(e)).update(t).digest():t.length<o&&(t=n.concat([t,a],o));for(var c=this._ipad=n.allocUnsafe(o),u=this._opad=n.allocUnsafe(o),l=0;l<o;l++)c[l]=54^t[l],u[l]=92^t[l];this._hash="rmd160"===e?new i:s(e),this._hash.update(c)}return e(c,r),c.prototype._update=function(e){this._hash.update(e)},c.prototype._final=function(){var e=this._hash.digest();return("rmd160"===this._alg?new i:s(this._alg)).update(this._opad).update(e).digest()},browser$9=function(e,r){return"rmd160"===(e=e.toLowerCase())||"ripemd160"===e?new c("rmd160",r):"md5"===e?new t(o,r):new c(e,r)}}const sha224WithRSAEncryption={sign:"rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption={sign:"rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption={sign:"rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption={sign:"rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},sha256$1={sign:"ecdsa",hash:"sha256",id:""},sha224={sign:"ecdsa",hash:"sha224",id:""},sha384={sign:"ecdsa",hash:"sha384",id:""},sha512={sign:"ecdsa",hash:"sha512",id:""},DSA={sign:"dsa",hash:"sha1",id:""},ripemd160WithRSA={sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption={sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"},require$$6={sha224WithRSAEncryption:sha224WithRSAEncryption,"RSA-SHA224":{sign:"ecdsa/rsa",hash:"sha224",id:"302d300d06096086480165030402040500041c"},sha256WithRSAEncryption:sha256WithRSAEncryption,"RSA-SHA256":{sign:"ecdsa/rsa",hash:"sha256",id:"3031300d060960864801650304020105000420"},sha384WithRSAEncryption:sha384WithRSAEncryption,"RSA-SHA384":{sign:"ecdsa/rsa",hash:"sha384",id:"3041300d060960864801650304020205000430"},sha512WithRSAEncryption:sha512WithRSAEncryption,"RSA-SHA512":{sign:"ecdsa/rsa",hash:"sha512",id:"3051300d060960864801650304020305000440"},"RSA-SHA1":{sign:"rsa",hash:"sha1",id:"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{sign:"ecdsa",hash:"sha1",id:""},sha256:sha256$1,sha224:sha224,sha384:sha384,sha512:sha512,"DSA-SHA":{sign:"dsa",hash:"sha1",id:""},"DSA-SHA1":{sign:"dsa",hash:"sha1",id:""},DSA:DSA,"DSA-WITH-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-SHA224":{sign:"dsa",hash:"sha224",id:""},"DSA-WITH-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-SHA256":{sign:"dsa",hash:"sha256",id:""},"DSA-WITH-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-SHA384":{sign:"dsa",hash:"sha384",id:""},"DSA-WITH-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-SHA512":{sign:"dsa",hash:"sha512",id:""},"DSA-RIPEMD160":{sign:"dsa",hash:"rmd160",id:""},ripemd160WithRSA:ripemd160WithRSA,"RSA-RIPEMD160":{sign:"rsa",hash:"rmd160",id:"3021300906052b2403020105000414"},md5WithRSAEncryption:md5WithRSAEncryption,"RSA-MD5":{sign:"rsa",hash:"md5",id:"3020300c06082a864886f70d020505000410"}};var algos,hasRequiredAlgos;function requireAlgos(){return hasRequiredAlgos?algos:(hasRequiredAlgos=1,algos=require$$6)}var browser$8={},precondition,hasRequiredPrecondition,defaultEncoding_1,hasRequiredDefaultEncoding;function requirePrecondition(){if(hasRequiredPrecondition)return precondition;hasRequiredPrecondition=1;var e=Math.pow(2,30)-1;return precondition=function(t,r){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof r)throw new TypeError("Key length not a number");if(r<0||r>e||r!=r)throw new TypeError("Bad key length")}}function requireDefaultEncoding(){if(hasRequiredDefaultEncoding)return defaultEncoding_1;var e;if(hasRequiredDefaultEncoding=1,commonjsGlobal.process&&commonjsGlobal.process.browser)e="utf-8";else if(commonjsGlobal.process&&commonjsGlobal.process.version){e=parseInt(process$1.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary"}else e="utf-8";return defaultEncoding_1=e}var buffer$1={},base64Js$1={};base64Js$1.byteLength=byteLength,base64Js$1.toByteArray=toByteArray,base64Js$1.fromByteArray=fromByteArray;for(var lookup=[],revLookup=[],Arr="undefined"!=typeof Uint8Array?Uint8Array:Array,code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i$g=0,len=code.length;i$g<len;++i$g)lookup[i$g]=code[i$g],revLookup[code.charCodeAt(i$g)]=i$g;function getLens(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function byteLength(e){var t=getLens(e),r=t[0],n=t[1];return 3*(r+n)/4-n}function _byteLength(e,t,r){return 3*(t+r)/4-r}function toByteArray(e){var t,r,n=getLens(e),o=n[0],i=n[1],s=new Arr(_byteLength(e,o,i)),a=0,c=i>0?o-4:o;for(r=0;r<c;r+=4)t=revLookup[e.charCodeAt(r)]<<18|revLookup[e.charCodeAt(r+1)]<<12|revLookup[e.charCodeAt(r+2)]<<6|revLookup[e.charCodeAt(r+3)],s[a++]=t>>16&255,s[a++]=t>>8&255,s[a++]=255&t;return 2===i&&(t=revLookup[e.charCodeAt(r)]<<2|revLookup[e.charCodeAt(r+1)]>>4,s[a++]=255&t),1===i&&(t=revLookup[e.charCodeAt(r)]<<10|revLookup[e.charCodeAt(r+1)]<<4|revLookup[e.charCodeAt(r+2)]>>2,s[a++]=t>>8&255,s[a++]=255&t),s}function tripletToBase64(e){return lookup[e>>18&63]+lookup[e>>12&63]+lookup[e>>6&63]+lookup[63&e]}function encodeChunk(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(tripletToBase64(n));return o.join("")}function fromByteArray(e){for(var t,r=e.length,n=r%3,o=[],i=16383,s=0,a=r-n;s<a;s+=i)o.push(encodeChunk(e,s,s+i>a?a:s+i));return 1===n?(t=e[r-1],o.push(lookup[t>>2]+lookup[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],o.push(lookup[t>>10]+lookup[t>>4&63]+lookup[t<<2&63]+"=")),o.join("")}revLookup["-".charCodeAt(0)]=62,revLookup["_".charCodeAt(0)]=63;var ieee754={
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
read:function(e,t,r,n,o){var i,s,a=8*o-n-1,c=(1<<a)-1,u=c>>1,l=-7,d=r?o-1:0,h=r?-1:1,f=e[t+d];for(d+=h,i=f&(1<<-l)-1,f>>=-l,l+=a;l>0;i=256*i+e[t+d],d+=h,l-=8);for(s=i&(1<<-l)-1,i>>=-l,l+=n;l>0;s=256*s+e[t+d],d+=h,l-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,n),i-=u}return(f?-1:1)*s*Math.pow(2,i-n)},write:function(e,t,r,n,o,i){var s,a,c,u=8*i-o-1,l=(1<<u)-1,d=l>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:i-1,p=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+d>=1?h/c:h*Math.pow(2,1-d))*c>=2&&(s++,c/=2),s+d>=l?(a=0,s=l):s+d>=1?(a=(t*c-1)*Math.pow(2,o),s+=d):(a=t*Math.pow(2,d-1)*Math.pow(2,o),s=0));o>=8;e[r+f]=255&a,f+=p,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[r+f]=255&s,f+=p,s/=256,u-=8);e[r+f-p]|=128*m}};
/*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   */
!function(e){const t=base64Js$1,r=ieee754,n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=u,e.SlowBuffer=function(e){+e!=e&&(e=0);return u.alloc(+e)},e.INSPECT_MAX_BYTES=50;const o=2147483647;e.kMaxLength=o;const{Uint8Array:i,ArrayBuffer:s,SharedArrayBuffer:a}=globalThis;function c(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new i(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return h(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|y(e,t);let n=c(r);const o=n.write(e,t);o!==r&&(n=n.slice(0,o));return n}(e,t);if(s.isView(e))return function(e){if(J(e,i)){const t=new i(e);return p(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(J(e,s)||e&&J(e.buffer,s))return p(e,t,r);if(void 0!==a&&(J(e,a)||e&&J(e.buffer,a)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return u.from(n,t,r);const o=function(e){if(u.isBuffer(e)){const t=0|m(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||Y(e.length)?c(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function d(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function h(e){return d(e),c(e<0?0:0|m(e))}function f(e){const t=e.length<0?0:0|m(e.length),r=c(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new i(e):void 0===r?new i(e,t):new i(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function m(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function y(e,t){if(u.isBuffer(e))return e.length;if(s.isView(e)||J(e,s))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Z(e).length;default:if(o)return n?-1:V(e).length;t=(""+t).toLowerCase(),o=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return C(this,t,r);case"utf8":case"utf-8":return E(this,t,r);case"ascii":return O(this,t,r);case"latin1":case"binary":return R(this,t,r);case"base64":return S(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return $(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function _(e,t,r,n,o){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0){if(!o)return-1;r=0}if("string"==typeof t&&(t=u.from(t,n)),u.isBuffer(t))return 0===t.length?-1:w(e,t,r,n,o);if("number"==typeof t)return t&=255,"function"==typeof i.prototype.indexOf?o?i.prototype.indexOf.call(e,t,r):i.prototype.lastIndexOf.call(e,t,r):w(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function w(e,t,r,n,o){let i,s=1,a=e.length,c=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){let n=-1;for(i=r;i<a;i++)if(u(e,i)===u(t,-1===n?0:i-n)){if(-1===n&&(n=i),i-n+1===c)return n*s}else-1!==n&&(i-=i-n),n=-1}else for(r+c>a&&(r=a-c),i=r;i>=0;i--){let r=!0;for(let n=0;n<c;n++)if(u(e,i+n)!==u(t,n)){r=!1;break}if(r)return i}return-1}function v(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;const i=t.length;let s;for(n>i/2&&(n=i/2),s=0;s<n;++s){const n=parseInt(t.substr(2*s,2),16);if(Y(n))return s;e[r+s]=n}return s}function I(e,t,r,n){return W(V(t,e.length-r),e,r,n)}function k(e,t,r,n){return W(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function T(e,t,r,n){return W(Z(t),e,r,n)}function A(e,t,r,n){return W(function(e,t){let r,n,o;const i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)r=e.charCodeAt(s),n=r>>8,o=r%256,i.push(o),i.push(n);return i}(t,e.length-r),e,r,n)}function S(e,r,n){return 0===r&&n===e.length?t.fromByteArray(e):t.fromByteArray(e.slice(r,n))}function E(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const t=e[o];let i=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=r){let r,n,a,c;switch(s){case 1:t<128&&(i=t);break;case 2:r=e[o+1],128==(192&r)&&(c=(31&t)<<6|63&r,c>127&&(i=c));break;case 3:r=e[o+1],n=e[o+2],128==(192&r)&&128==(192&n)&&(c=(15&t)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:r=e[o+1],n=e[o+2],a=e[o+3],128==(192&r)&&128==(192&n)&&128==(192&a)&&(c=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|1023&i),n.push(i),o+=s}return function(e){const t=e.length;if(t<=P)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=P));return r}(n)}u.TYPED_ARRAY_SUPPORT=function(){try{const e=new i(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,i.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),u.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}}),u.poolSize=8192,u.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(u.prototype,i.prototype),Object.setPrototypeOf(u,i),u.alloc=function(e,t,r){return function(e,t,r){return d(e),e<=0?c(e):void 0!==t?"string"==typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}(e,t,r)},u.allocUnsafe=function(e){return h(e)},u.allocUnsafeSlow=function(e){return h(e)},u.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==u.prototype},u.compare=function(e,t){if(J(e,i)&&(e=u.from(e,e.offset,e.byteLength)),J(t,i)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(e)||!u.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let o=0,i=Math.min(r,n);o<i;++o)if(e[o]!==t[o]){r=e[o],n=t[o];break}return r<n?-1:n<r?1:0},u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return u.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=u.allocUnsafe(t);let o=0;for(r=0;r<e.length;++r){let t=e[r];if(J(t,i))o+t.length>n.length?(u.isBuffer(t)||(t=u.from(t)),t.copy(n,o)):i.prototype.set.call(n,t,o);else{if(!u.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,o)}o+=t.length}return n},u.byteLength=y,u.prototype._isBuffer=!0,u.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)b(this,t,t+1);return this},u.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},u.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},u.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(e){if(!u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===u.compare(this,e)},u.prototype.inspect=function(){let t="";const r=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},n&&(u.prototype[n]=u.prototype.inspect),u.prototype.compare=function(e,t,r,n,o){if(J(e,i)&&(e=u.from(e,e.offset,e.byteLength)),!u.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===o&&(o=this.length),t<0||r>e.length||n<0||o>this.length)throw new RangeError("out of range index");if(n>=o&&t>=r)return 0;if(n>=o)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(o>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const c=Math.min(s,a),l=this.slice(n,o),d=e.slice(t,r);for(let i=0;i<c;++i)if(l[i]!==d[i]){s=l[i],a=d[i];break}return s<a?-1:a<s?1:0},u.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},u.prototype.indexOf=function(e,t,r){return _(this,e,t,r,!0)},u.prototype.lastIndexOf=function(e,t,r){return _(this,e,t,r,!1)},u.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const o=this.length-t;if((void 0===r||r>o)&&(r=o),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let i=!1;for(;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return I(this,e,t,r);case"ascii":case"latin1":case"binary":return k(this,e,t,r);case"base64":return T(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),i=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const P=4096;function O(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(127&e[o]);return n}function R(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function C(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let i=t;i<r;++i)o+=Q[e[i]];return o}function $(e,t,r){const n=e.slice(t,r);let o="";for(let i=0;i<n.length-1;i+=2)o+=String.fromCharCode(n[i]+256*n[i+1]);return o}function N(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,r,n,o,i){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function x(e,t,r,n,o){K(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i,i>>=8,e[r++]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function B(e,t,r,n,o){K(t,n,o,e,r,7);let i=Number(t&BigInt(4294967295));e[r+7]=i,i>>=8,e[r+6]=i,i>>=8,e[r+5]=i,i>>=8,e[r+4]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function D(e,t,r,n,o,i){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,n,o,i){return t=+t,n>>>=0,i||D(e,0,n,4),r.write(e,t,n,o,23,4),n+4}function F(e,t,n,o,i){return t=+t,n>>>=0,i||D(e,0,n,8),r.write(e,t,n,o,52,8),n+8}u.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,u.prototype),n},u.prototype.readUintLE=u.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return n},u.prototype.readUintBE=u.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e+--t],o=1;for(;t>0&&(o*=256);)n+=this[e+--t]*o;return n},u.prototype.readUint8=u.prototype.readUInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),this[e]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]|this[e+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||N(e,2,this.length),this[e]<<8|this[e+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},u.prototype.readBigUInt64LE=X(function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||G(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(o)<<BigInt(32))}),u.prototype.readBigUInt64BE=X(function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||G(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(o)}),u.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=this[e],o=1,i=0;for(;++i<t&&(o*=256);)n+=this[e+i]*o;return o*=128,n>=o&&(n-=Math.pow(2,8*t)),n},u.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||N(e,t,this.length);let n=t,o=1,i=this[e+--n];for(;n>0&&(o*=256);)i+=this[e+--n]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},u.prototype.readInt8=function(e,t){return e>>>=0,t||N(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},u.prototype.readInt16LE=function(e,t){e>>>=0,t||N(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt16BE=function(e,t){e>>>=0,t||N(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},u.prototype.readInt32LE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},u.prototype.readInt32BE=function(e,t){return e>>>=0,t||N(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},u.prototype.readBigInt64LE=X(function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||G(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)}),u.prototype.readBigInt64BE=X(function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||G(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)}),u.prototype.readFloatLE=function(e,t){return e>>>=0,t||N(e,4,this.length),r.read(this,e,!0,23,4)},u.prototype.readFloatBE=function(e,t){return e>>>=0,t||N(e,4,this.length),r.read(this,e,!1,23,4)},u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||N(e,8,this.length),r.read(this,e,!0,52,8)},u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||N(e,8,this.length),r.read(this,e,!1,52,8)},u.prototype.writeUintLE=u.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}let o=1,i=0;for(this[t]=255&e;++i<r&&(o*=256);)this[t+i]=e/o&255;return t+r},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){M(this,e,t,r,Math.pow(2,8*r)-1,0)}let o=r-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+r},u.prototype.writeUint8=u.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,255,0),this[t]=255&e,t+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigUInt64LE=X(function(e,t=0){return x(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=X(function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);M(this,e,t,r,n-1,-n)}let o=0,i=1,s=0;for(this[t]=255&e;++o<r&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i|0)-s&255;return t+r},u.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);M(this,e,t,r,n-1,-n)}let o=r-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i|0)-s&255;return t+r},u.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},u.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},u.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},u.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},u.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},u.prototype.writeBigInt64LE=X(function(e,t=0){return x(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=X(function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},u.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},u.prototype.writeDoubleLE=function(e,t,r){return F(this,e,t,!0,r)},u.prototype.writeDoubleBE=function(e,t,r){return F(this,e,t,!1,r)},u.prototype.copy=function(e,t,r,n){if(!u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const o=n-r;return this===e&&"function"==typeof i.prototype.copyWithin?this.copyWithin(t,r,n):i.prototype.set.call(e,this.subarray(r,n),t),o},u.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!u.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{const i=u.isBuffer(e)?e:u.from(e,n),s=i.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<r-t;++o)this[o+t]=i[o%s]}return this};const j={};function U(e,t,r){j[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function K(e,t,r,n,o,i){if(e>r||e<t){const r="bigint"==typeof t?"n":"";let n;throw n=0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`,new j.ERR_OUT_OF_RANGE("value",n,e)}!function(e,t,r){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||G(t,e.length-(r+1))}(n,o,i)}function H(e,t){if("number"!=typeof e)throw new j.ERR_INVALID_ARG_TYPE(t,"number",e)}function G(e,t,r){if(Math.floor(e)!==e)throw H(e,r),new j.ERR_OUT_OF_RANGE("offset","an integer",e);if(t<0)throw new j.ERR_BUFFER_OUT_OF_BOUNDS;throw new j.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}U("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),U("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=q(String(r)):"bigint"==typeof r&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=q(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n},RangeError);const z=/[^+/0-9A-Za-z-_]/g;function V(e,t){let r;t=t||1/0;const n=e.length;let o=null;const i=[];for(let s=0;s<n;++s){if(r=e.charCodeAt(s),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===n){(t-=3)>-1&&i.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&i.push(239,191,189),o=r;continue}r=65536+(o-55296<<10|r-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;i.push(r)}else if(r<2048){if((t-=2)<0)break;i.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;i.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return i}function Z(e){return t.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function W(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function J(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const Q=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function X(e){return"undefined"==typeof BigInt?ee:e}function ee(){throw new Error("BigInt not supported")}}(buffer$1);const Buffer=buffer$1.Buffer,Buffer$1=buffer$1.Buffer;var makeHash,hasRequiredMakeHash,md5,hasRequiredMd5,hashBase,hasRequiredHashBase,ripemd160,hasRequiredRipemd160,toBuffer_1,hasRequiredToBuffer,syncBrowser,hasRequiredSyncBrowser,async,hasRequiredAsync,hasRequiredBrowser$8;function requireMakeHash(){if(hasRequiredMakeHash)return makeHash;hasRequiredMakeHash=1;var e=new Buffer(4);e.fill(0);return makeHash=function(t,r){var n=r(function(t){if(t.length%4!=0){var r=t.length+(4-t.length%4);t=Buffer.concat([t,e],r)}for(var n=new Array(t.length>>>2),o=0,i=0;o<t.length;o+=4,i++)n[i]=t.readInt32LE(o);return n}(t),8*t.length);t=new Buffer(16);for(var o=0;o<n.length;o++)t.writeInt32LE(n[o],o<<2,!0);return t}}function requireMd5(){if(hasRequiredMd5)return md5;hasRequiredMd5=1;var e=requireMakeHash();function t(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var r=1732584193,c=-271733879,u=-1732584194,l=271733878,d=0;d<e.length;d+=16){var h=r,f=c,p=u,m=l;r=n(r,c,u,l,e[d+0],7,-680876936),l=n(l,r,c,u,e[d+1],12,-389564586),u=n(u,l,r,c,e[d+2],17,606105819),c=n(c,u,l,r,e[d+3],22,-1044525330),r=n(r,c,u,l,e[d+4],7,-176418897),l=n(l,r,c,u,e[d+5],12,1200080426),u=n(u,l,r,c,e[d+6],17,-1473231341),c=n(c,u,l,r,e[d+7],22,-45705983),r=n(r,c,u,l,e[d+8],7,1770035416),l=n(l,r,c,u,e[d+9],12,-1958414417),u=n(u,l,r,c,e[d+10],17,-42063),c=n(c,u,l,r,e[d+11],22,-1990404162),r=n(r,c,u,l,e[d+12],7,1804603682),l=n(l,r,c,u,e[d+13],12,-40341101),u=n(u,l,r,c,e[d+14],17,-1502002290),r=o(r,c=n(c,u,l,r,e[d+15],22,1236535329),u,l,e[d+1],5,-165796510),l=o(l,r,c,u,e[d+6],9,-1069501632),u=o(u,l,r,c,e[d+11],14,643717713),c=o(c,u,l,r,e[d+0],20,-373897302),r=o(r,c,u,l,e[d+5],5,-701558691),l=o(l,r,c,u,e[d+10],9,38016083),u=o(u,l,r,c,e[d+15],14,-660478335),c=o(c,u,l,r,e[d+4],20,-405537848),r=o(r,c,u,l,e[d+9],5,568446438),l=o(l,r,c,u,e[d+14],9,-1019803690),u=o(u,l,r,c,e[d+3],14,-187363961),c=o(c,u,l,r,e[d+8],20,1163531501),r=o(r,c,u,l,e[d+13],5,-1444681467),l=o(l,r,c,u,e[d+2],9,-51403784),u=o(u,l,r,c,e[d+7],14,1735328473),r=i(r,c=o(c,u,l,r,e[d+12],20,-1926607734),u,l,e[d+5],4,-378558),l=i(l,r,c,u,e[d+8],11,-2022574463),u=i(u,l,r,c,e[d+11],16,1839030562),c=i(c,u,l,r,e[d+14],23,-35309556),r=i(r,c,u,l,e[d+1],4,-1530992060),l=i(l,r,c,u,e[d+4],11,1272893353),u=i(u,l,r,c,e[d+7],16,-155497632),c=i(c,u,l,r,e[d+10],23,-1094730640),r=i(r,c,u,l,e[d+13],4,681279174),l=i(l,r,c,u,e[d+0],11,-358537222),u=i(u,l,r,c,e[d+3],16,-722521979),c=i(c,u,l,r,e[d+6],23,76029189),r=i(r,c,u,l,e[d+9],4,-640364487),l=i(l,r,c,u,e[d+12],11,-421815835),u=i(u,l,r,c,e[d+15],16,530742520),r=s(r,c=i(c,u,l,r,e[d+2],23,-995338651),u,l,e[d+0],6,-198630844),l=s(l,r,c,u,e[d+7],10,1126891415),u=s(u,l,r,c,e[d+14],15,-1416354905),c=s(c,u,l,r,e[d+5],21,-57434055),r=s(r,c,u,l,e[d+12],6,1700485571),l=s(l,r,c,u,e[d+3],10,-1894986606),u=s(u,l,r,c,e[d+10],15,-1051523),c=s(c,u,l,r,e[d+1],21,-2054922799),r=s(r,c,u,l,e[d+8],6,1873313359),l=s(l,r,c,u,e[d+15],10,-30611744),u=s(u,l,r,c,e[d+6],15,-1560198380),c=s(c,u,l,r,e[d+13],21,1309151649),r=s(r,c,u,l,e[d+4],6,-145523070),l=s(l,r,c,u,e[d+11],10,-1120210379),u=s(u,l,r,c,e[d+2],15,718787259),c=s(c,u,l,r,e[d+9],21,-343485551),r=a(r,h),c=a(c,f),u=a(u,p),l=a(l,m)}return[r,c,u,l]}function r(e,t,r,n,o,i){return a((s=a(a(t,e),a(n,i)))<<(c=o)|s>>>32-c,r);var s,c}function n(e,t,n,o,i,s,a){return r(t&n|~t&o,e,t,i,s,a)}function o(e,t,n,o,i,s,a){return r(t&o|n&~o,e,t,i,s,a)}function i(e,t,n,o,i,s,a){return r(t^n^o,e,t,i,s,a)}function s(e,t,n,o,i,s,a){return r(n^(t|~o),e,t,i,s,a)}function a(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return md5=function(r){return e(r,t)}}function requireHashBase(){if(hasRequiredHashBase)return hashBase;hasRequiredHashBase=1;var e=requireStreamBrowserify().Transform;function t(t){e.call(this),this._block=new Buffer(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}return requireInherits_browser()(t,e),t.prototype._transform=function(e,t,r){var n=null;try{"buffer"!==t&&(e=new Buffer(e,t)),this.update(e)}catch(o){n=o}r(n)},t.prototype._flush=function(e){var t=null;try{this.push(this._digest())}catch(r){t=r}e(t)},t.prototype.update=function(e,t){if(!Buffer.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");Buffer.isBuffer(e)||(e=new Buffer(e,t||"binary"));for(var r=this._block,n=0;this._blockOffset+e.length-n>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=e[n++];this._update(),this._blockOffset=0}for(;n<e.length;)r[this._blockOffset++]=e[n++];for(var i=0,s=8*e.length;s>0;++i)this._length[i]+=s,(s=this._length[i]/4294967296|0)>0&&(this._length[i]-=4294967296*s);return this},t.prototype._update=function(e){throw new Error("_update is not implemented")},t.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();return void 0!==e&&(t=t.toString(e)),t},t.prototype._digest=function(){throw new Error("_digest is not implemented")},hashBase=t}function requireRipemd160(){if(hasRequiredRipemd160)return ripemd160;hasRequiredRipemd160=1;var e=requireInherits_browser(),t=requireHashBase();function r(){t.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function n(e,t){return e<<t|e>>>32-t}function o(e,t,r,o,i,s,a,c){return n(e+(t^r^o)+s+a|0,c)+i|0}function i(e,t,r,o,i,s,a,c){return n(e+(t&r|~t&o)+s+a|0,c)+i|0}function s(e,t,r,o,i,s,a,c){return n(e+((t|~r)^o)+s+a|0,c)+i|0}function a(e,t,r,o,i,s,a,c){return n(e+(t&o|r&~o)+s+a|0,c)+i|0}function c(e,t,r,o,i,s,a,c){return n(e+(t^(r|~o))+s+a|0,c)+i|0}return e(r,t),r.prototype._update=function(){for(var e=new Array(16),t=0;t<16;++t)e[t]=this._block.readInt32LE(4*t);var r=this._a,u=this._b,l=this._c,d=this._d,h=this._e;r=o(r,u,l,d,h,e[0],0,11),h=o(h,r,u,l=n(l,10),d,e[1],0,14),d=o(d,h,r,u=n(u,10),l,e[2],0,15),l=o(l,d,h,r=n(r,10),u,e[3],0,12),u=o(u,l,d,h=n(h,10),r,e[4],0,5),r=o(r,u,l,d=n(d,10),h,e[5],0,8),h=o(h,r,u,l=n(l,10),d,e[6],0,7),d=o(d,h,r,u=n(u,10),l,e[7],0,9),l=o(l,d,h,r=n(r,10),u,e[8],0,11),u=o(u,l,d,h=n(h,10),r,e[9],0,13),r=o(r,u,l,d=n(d,10),h,e[10],0,14),h=o(h,r,u,l=n(l,10),d,e[11],0,15),d=o(d,h,r,u=n(u,10),l,e[12],0,6),l=o(l,d,h,r=n(r,10),u,e[13],0,7),u=o(u,l,d,h=n(h,10),r,e[14],0,9),h=i(h,r=o(r,u,l,d=n(d,10),h,e[15],0,8),u,l=n(l,10),d,e[7],1518500249,7),d=i(d,h,r,u=n(u,10),l,e[4],1518500249,6),l=i(l,d,h,r=n(r,10),u,e[13],1518500249,8),u=i(u,l,d,h=n(h,10),r,e[1],1518500249,13),r=i(r,u,l,d=n(d,10),h,e[10],1518500249,11),h=i(h,r,u,l=n(l,10),d,e[6],1518500249,9),d=i(d,h,r,u=n(u,10),l,e[15],1518500249,7),l=i(l,d,h,r=n(r,10),u,e[3],1518500249,15),u=i(u,l,d,h=n(h,10),r,e[12],1518500249,7),r=i(r,u,l,d=n(d,10),h,e[0],1518500249,12),h=i(h,r,u,l=n(l,10),d,e[9],1518500249,15),d=i(d,h,r,u=n(u,10),l,e[5],1518500249,9),l=i(l,d,h,r=n(r,10),u,e[2],1518500249,11),u=i(u,l,d,h=n(h,10),r,e[14],1518500249,7),r=i(r,u,l,d=n(d,10),h,e[11],1518500249,13),d=s(d,h=i(h,r,u,l=n(l,10),d,e[8],1518500249,12),r,u=n(u,10),l,e[3],1859775393,11),l=s(l,d,h,r=n(r,10),u,e[10],1859775393,13),u=s(u,l,d,h=n(h,10),r,e[14],1859775393,6),r=s(r,u,l,d=n(d,10),h,e[4],1859775393,7),h=s(h,r,u,l=n(l,10),d,e[9],1859775393,14),d=s(d,h,r,u=n(u,10),l,e[15],1859775393,9),l=s(l,d,h,r=n(r,10),u,e[8],1859775393,13),u=s(u,l,d,h=n(h,10),r,e[1],1859775393,15),r=s(r,u,l,d=n(d,10),h,e[2],1859775393,14),h=s(h,r,u,l=n(l,10),d,e[7],1859775393,8),d=s(d,h,r,u=n(u,10),l,e[0],1859775393,13),l=s(l,d,h,r=n(r,10),u,e[6],1859775393,6),u=s(u,l,d,h=n(h,10),r,e[13],1859775393,5),r=s(r,u,l,d=n(d,10),h,e[11],1859775393,12),h=s(h,r,u,l=n(l,10),d,e[5],1859775393,7),l=a(l,d=s(d,h,r,u=n(u,10),l,e[12],1859775393,5),h,r=n(r,10),u,e[1],2400959708,11),u=a(u,l,d,h=n(h,10),r,e[9],2400959708,12),r=a(r,u,l,d=n(d,10),h,e[11],2400959708,14),h=a(h,r,u,l=n(l,10),d,e[10],2400959708,15),d=a(d,h,r,u=n(u,10),l,e[0],2400959708,14),l=a(l,d,h,r=n(r,10),u,e[8],2400959708,15),u=a(u,l,d,h=n(h,10),r,e[12],2400959708,9),r=a(r,u,l,d=n(d,10),h,e[4],2400959708,8),h=a(h,r,u,l=n(l,10),d,e[13],2400959708,9),d=a(d,h,r,u=n(u,10),l,e[3],2400959708,14),l=a(l,d,h,r=n(r,10),u,e[7],2400959708,5),u=a(u,l,d,h=n(h,10),r,e[15],2400959708,6),r=a(r,u,l,d=n(d,10),h,e[14],2400959708,8),h=a(h,r,u,l=n(l,10),d,e[5],2400959708,6),d=a(d,h,r,u=n(u,10),l,e[6],2400959708,5),u=c(u,l=a(l,d,h,r=n(r,10),u,e[2],2400959708,12),d,h=n(h,10),r,e[4],2840853838,9),r=c(r,u,l,d=n(d,10),h,e[0],2840853838,15),h=c(h,r,u,l=n(l,10),d,e[5],2840853838,5),d=c(d,h,r,u=n(u,10),l,e[9],2840853838,11),l=c(l,d,h,r=n(r,10),u,e[7],2840853838,6),u=c(u,l,d,h=n(h,10),r,e[12],2840853838,8),r=c(r,u,l,d=n(d,10),h,e[2],2840853838,13),h=c(h,r,u,l=n(l,10),d,e[10],2840853838,12),d=c(d,h,r,u=n(u,10),l,e[14],2840853838,5),l=c(l,d,h,r=n(r,10),u,e[1],2840853838,12),u=c(u,l,d,h=n(h,10),r,e[3],2840853838,13),r=c(r,u,l,d=n(d,10),h,e[8],2840853838,14),h=c(h,r,u,l=n(l,10),d,e[11],2840853838,11),d=c(d,h,r,u=n(u,10),l,e[6],2840853838,8),l=c(l,d,h,r=n(r,10),u,e[15],2840853838,5),u=c(u,l,d,h=n(h,10),r,e[13],2840853838,6),d=n(d,10);var f=this._a,p=this._b,m=this._c,y=this._d,g=this._e;f=c(f,p,m,y,g,e[5],1352829926,8),g=c(g,f,p,m=n(m,10),y,e[14],1352829926,9),y=c(y,g,f,p=n(p,10),m,e[7],1352829926,9),m=c(m,y,g,f=n(f,10),p,e[0],1352829926,11),p=c(p,m,y,g=n(g,10),f,e[9],1352829926,13),f=c(f,p,m,y=n(y,10),g,e[2],1352829926,15),g=c(g,f,p,m=n(m,10),y,e[11],1352829926,15),y=c(y,g,f,p=n(p,10),m,e[4],1352829926,5),m=c(m,y,g,f=n(f,10),p,e[13],1352829926,7),p=c(p,m,y,g=n(g,10),f,e[6],1352829926,7),f=c(f,p,m,y=n(y,10),g,e[15],1352829926,8),g=c(g,f,p,m=n(m,10),y,e[8],1352829926,11),y=c(y,g,f,p=n(p,10),m,e[1],1352829926,14),m=c(m,y,g,f=n(f,10),p,e[10],1352829926,14),p=c(p,m,y,g=n(g,10),f,e[3],1352829926,12),g=a(g,f=c(f,p,m,y=n(y,10),g,e[12],1352829926,6),p,m=n(m,10),y,e[6],1548603684,9),y=a(y,g,f,p=n(p,10),m,e[11],1548603684,13),m=a(m,y,g,f=n(f,10),p,e[3],1548603684,15),p=a(p,m,y,g=n(g,10),f,e[7],1548603684,7),f=a(f,p,m,y=n(y,10),g,e[0],1548603684,12),g=a(g,f,p,m=n(m,10),y,e[13],1548603684,8),y=a(y,g,f,p=n(p,10),m,e[5],1548603684,9),m=a(m,y,g,f=n(f,10),p,e[10],1548603684,11),p=a(p,m,y,g=n(g,10),f,e[14],1548603684,7),f=a(f,p,m,y=n(y,10),g,e[15],1548603684,7),g=a(g,f,p,m=n(m,10),y,e[8],1548603684,12),y=a(y,g,f,p=n(p,10),m,e[12],1548603684,7),m=a(m,y,g,f=n(f,10),p,e[4],1548603684,6),p=a(p,m,y,g=n(g,10),f,e[9],1548603684,15),f=a(f,p,m,y=n(y,10),g,e[1],1548603684,13),y=s(y,g=a(g,f,p,m=n(m,10),y,e[2],1548603684,11),f,p=n(p,10),m,e[15],1836072691,9),m=s(m,y,g,f=n(f,10),p,e[5],1836072691,7),p=s(p,m,y,g=n(g,10),f,e[1],1836072691,15),f=s(f,p,m,y=n(y,10),g,e[3],1836072691,11),g=s(g,f,p,m=n(m,10),y,e[7],1836072691,8),y=s(y,g,f,p=n(p,10),m,e[14],1836072691,6),m=s(m,y,g,f=n(f,10),p,e[6],1836072691,6),p=s(p,m,y,g=n(g,10),f,e[9],1836072691,14),f=s(f,p,m,y=n(y,10),g,e[11],1836072691,12),g=s(g,f,p,m=n(m,10),y,e[8],1836072691,13),y=s(y,g,f,p=n(p,10),m,e[12],1836072691,5),m=s(m,y,g,f=n(f,10),p,e[2],1836072691,14),p=s(p,m,y,g=n(g,10),f,e[10],1836072691,13),f=s(f,p,m,y=n(y,10),g,e[0],1836072691,13),g=s(g,f,p,m=n(m,10),y,e[4],1836072691,7),m=i(m,y=s(y,g,f,p=n(p,10),m,e[13],1836072691,5),g,f=n(f,10),p,e[8],2053994217,15),p=i(p,m,y,g=n(g,10),f,e[6],2053994217,5),f=i(f,p,m,y=n(y,10),g,e[4],2053994217,8),g=i(g,f,p,m=n(m,10),y,e[1],2053994217,11),y=i(y,g,f,p=n(p,10),m,e[3],2053994217,14),m=i(m,y,g,f=n(f,10),p,e[11],2053994217,14),p=i(p,m,y,g=n(g,10),f,e[15],2053994217,6),f=i(f,p,m,y=n(y,10),g,e[0],2053994217,14),g=i(g,f,p,m=n(m,10),y,e[5],2053994217,6),y=i(y,g,f,p=n(p,10),m,e[12],2053994217,9),m=i(m,y,g,f=n(f,10),p,e[2],2053994217,12),p=i(p,m,y,g=n(g,10),f,e[13],2053994217,9),f=i(f,p,m,y=n(y,10),g,e[9],2053994217,12),g=i(g,f,p,m=n(m,10),y,e[7],2053994217,5),y=i(y,g,f,p=n(p,10),m,e[10],2053994217,15),p=o(p,m=i(m,y,g,f=n(f,10),p,e[14],2053994217,8),y,g=n(g,10),f,e[12],0,8),f=o(f,p,m,y=n(y,10),g,e[15],0,5),g=o(g,f,p,m=n(m,10),y,e[10],0,12),y=o(y,g,f,p=n(p,10),m,e[4],0,9),m=o(m,y,g,f=n(f,10),p,e[1],0,12),p=o(p,m,y,g=n(g,10),f,e[5],0,5),f=o(f,p,m,y=n(y,10),g,e[8],0,14),g=o(g,f,p,m=n(m,10),y,e[7],0,6),y=o(y,g,f,p=n(p,10),m,e[6],0,8),m=o(m,y,g,f=n(f,10),p,e[2],0,13),p=o(p,m,y,g=n(g,10),f,e[13],0,6),f=o(f,p,m,y=n(y,10),g,e[14],0,5),g=o(g,f,p,m=n(m,10),y,e[0],0,15),y=o(y,g,f,p=n(p,10),m,e[3],0,13),m=o(m,y,g,f=n(f,10),p,e[9],0,11),p=o(p,m,y,g=n(g,10),f,e[11],0,11),y=n(y,10);var b=this._b+l+y|0;this._b=this._c+d+g|0,this._c=this._d+h+f|0,this._d=this._e+r+p|0,this._e=this._a+u+m|0,this._a=b},r.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var e=new Buffer(20);return e.writeInt32LE(this._a,0),e.writeInt32LE(this._b,4),e.writeInt32LE(this._c,8),e.writeInt32LE(this._d,12),e.writeInt32LE(this._e,16),e},ripemd160=r}function requireToBuffer(){if(hasRequiredToBuffer)return toBuffer_1;hasRequiredToBuffer=1;var e=requireSafeBuffer$1().Buffer,t=requireToBuffer$1(),r="undefined"!=typeof Uint8Array,n=r&&"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView;return toBuffer_1=function(o,i,s){if("string"==typeof o||e.isBuffer(o)||r&&o instanceof Uint8Array||n&&n(o))return t(o,i);throw new TypeError(s+" must be a string, a Buffer, a Uint8Array, or a DataView")}}function requireSyncBrowser(){if(hasRequiredSyncBrowser)return syncBrowser;hasRequiredSyncBrowser=1;var e=requireMd5(),t=requireRipemd160(),r=requireSha_js(),n=requireSafeBuffer$1().Buffer,o=requirePrecondition(),i=requireDefaultEncoding(),s=requireToBuffer(),a=n.alloc(128),c={__proto__:null,md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,"sha512-256":32,ripemd160:20,rmd160:20},u={__proto__:null,"sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512","ripemd-160":"ripemd160"};function l(e){return(new t).update(e).digest()}function d(t,o,i){var s=function(t){return"rmd160"===t||"ripemd160"===t?l:"md5"===t?e:function(e){return r(t).update(e).digest()}}(t),u="sha512"===t||"sha384"===t?128:64;o.length>u?o=s(o):o.length<u&&(o=n.concat([o,a],u));for(var d=n.allocUnsafe(u+c[t]),h=n.allocUnsafe(u+c[t]),f=0;f<u;f++)d[f]=54^o[f],h[f]=92^o[f];var p=n.allocUnsafe(u+i+4);d.copy(p,0,0,u),this.ipad1=p,this.ipad2=d,this.opad=h,this.alg=t,this.blocksize=u,this.hash=s,this.size=c[t]}return d.prototype.run=function(e,t){return e.copy(t,this.blocksize),this.hash(t).copy(this.opad,this.blocksize),this.hash(this.opad)},syncBrowser=function(e,t,r,a,l){o(r,a),e=s(e,i,"Password"),t=s(t,i,"Salt");var h=(l||"sha1").toLowerCase(),f=u[h]||h,p=c[f];if("number"!=typeof p||!p)throw new TypeError("Digest algorithm not supported: "+l);var m=new d(f,e,t.length),y=n.allocUnsafe(a),g=n.allocUnsafe(t.length+4);t.copy(g,0,0,t.length);for(var b=0,_=p,w=Math.ceil(a/_),v=1;v<=w;v++){g.writeUInt32BE(v,t.length);for(var I=m.run(g,m.ipad1),k=I,T=1;T<r;T++){k=m.run(k,m.ipad2);for(var A=0;A<_;A++)I[A]^=k[A]}I.copy(y,b),b+=_}return y}}function requireAsync(){if(hasRequiredAsync)return async;hasRequiredAsync=1;var e,t,r=requireSafeBuffer$1().Buffer,n=requirePrecondition(),o=requireDefaultEncoding(),i=requireSyncBrowser(),s=requireToBuffer(),a=commonjsGlobal.crypto&&commonjsGlobal.crypto.subtle,c={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},u=[];function l(){return t||(t=commonjsGlobal.process&&commonjsGlobal.process.nextTick?commonjsGlobal.process.nextTick:commonjsGlobal.queueMicrotask?commonjsGlobal.queueMicrotask:commonjsGlobal.setImmediate?commonjsGlobal.setImmediate:commonjsGlobal.setTimeout)}function d(e,t,n,o,i){return a.importKey("raw",e,{name:"PBKDF2"},!1,["deriveBits"]).then(function(e){return a.deriveBits({name:"PBKDF2",salt:t,iterations:n,hash:{name:i}},e,o<<3)}).then(function(e){return r.from(e)})}return async=function(t,h,f,p,m,y){"function"==typeof m&&(y=m,m=void 0);var g=c[(m=m||"sha1").toLowerCase()];if(g&&"function"==typeof commonjsGlobal.Promise){if(n(f,p),t=s(t,o,"Password"),h=s(h,o,"Salt"),"function"!=typeof y)throw new Error("No callback provided to pbkdf2");!function(e,t){e.then(function(e){l()(function(){t(null,e)})},function(e){l()(function(){t(e)})})}(function(t){if(commonjsGlobal.process&&!commonjsGlobal.process.browser)return Promise.resolve(!1);if(!a||!a.importKey||!a.deriveBits)return Promise.resolve(!1);if(void 0!==u[t])return u[t];var n=d(e=e||r.alloc(8),e,10,128,t).then(function(){return!0},function(){return!1});return u[t]=n,n}(g).then(function(e){return e?d(t,h,f,p,g):i(t,h,f,p,m)}),y)}else l()(function(){var e;try{e=i(t,h,f,p,m)}catch(r){return void y(r)}y(null,e)})}}function requireBrowser$8(){return hasRequiredBrowser$8||(hasRequiredBrowser$8=1,browser$8.pbkdf2=requireAsync(),browser$8.pbkdf2Sync=requireSyncBrowser()),browser$8}var browser$7={},des$1={},utils$5={},hasRequiredUtils$3,minimalisticAssert,hasRequiredMinimalisticAssert,cipher,hasRequiredCipher,des,hasRequiredDes$1;function requireUtils$3(){if(hasRequiredUtils$3)return utils$5;hasRequiredUtils$3=1,utils$5.readUInt32BE=function(e,t){return(e[0+t]<<24|e[1+t]<<16|e[2+t]<<8|e[3+t])>>>0},utils$5.writeUInt32BE=function(e,t,r){e[0+r]=t>>>24,e[1+r]=t>>>16&255,e[2+r]=t>>>8&255,e[3+r]=255&t},utils$5.ip=function(e,t,r,n){for(var o=0,i=0,s=6;s>=0;s-=2){for(var a=0;a<=24;a+=8)o<<=1,o|=t>>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=e>>>a+s&1}for(s=6;s>=0;s-=2){for(a=1;a<=25;a+=8)i<<=1,i|=t>>>a+s&1;for(a=1;a<=25;a+=8)i<<=1,i|=e>>>a+s&1}r[n+0]=o>>>0,r[n+1]=i>>>0},utils$5.rip=function(e,t,r,n){for(var o=0,i=0,s=0;s<4;s++)for(var a=24;a>=0;a-=8)o<<=1,o|=t>>>a+s&1,o<<=1,o|=e>>>a+s&1;for(s=4;s<8;s++)for(a=24;a>=0;a-=8)i<<=1,i|=t>>>a+s&1,i<<=1,i|=e>>>a+s&1;r[n+0]=o>>>0,r[n+1]=i>>>0},utils$5.pc1=function(e,t,r,n){for(var o=0,i=0,s=7;s>=5;s--){for(var a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;for(a=0;a<=24;a+=8)o<<=1,o|=e>>a+s&1}for(a=0;a<=24;a+=8)o<<=1,o|=t>>a+s&1;for(s=1;s<=3;s++){for(a=0;a<=24;a+=8)i<<=1,i|=t>>a+s&1;for(a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1}for(a=0;a<=24;a+=8)i<<=1,i|=e>>a+s&1;r[n+0]=o>>>0,r[n+1]=i>>>0},utils$5.r28shl=function(e,t){return e<<t&268435455|e>>>28-t};var e=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];utils$5.pc2=function(t,r,n,o){for(var i=0,s=0,a=e.length>>>1,c=0;c<a;c++)i<<=1,i|=t>>>e[c]&1;for(c=a;c<e.length;c++)s<<=1,s|=r>>>e[c]&1;n[o+0]=i>>>0,n[o+1]=s>>>0},utils$5.expand=function(e,t,r){var n=0,o=0;n=(1&e)<<5|e>>>27;for(var i=23;i>=15;i-=4)n<<=6,n|=e>>>i&63;for(i=11;i>=3;i-=4)o|=e>>>i&63,o<<=6;o|=(31&e)<<1|e>>>31,t[r+0]=n>>>0,t[r+1]=o>>>0};var t=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];utils$5.substitute=function(e,r){for(var n=0,o=0;o<4;o++){n<<=4,n|=t[64*o+(e>>>18-6*o&63)]}for(o=0;o<4;o++){n<<=4,n|=t[256+64*o+(r>>>18-6*o&63)]}return n>>>0};var r=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];return utils$5.permute=function(e){for(var t=0,n=0;n<r.length;n++)t<<=1,t|=e>>>r[n]&1;return t>>>0},utils$5.padSplit=function(e,t,r){for(var n=e.toString(2);n.length<t;)n="0"+n;for(var o=[],i=0;i<t;i+=r)o.push(n.slice(i,i+r));return o.join(" ")},utils$5}function requireMinimalisticAssert(){if(hasRequiredMinimalisticAssert)return minimalisticAssert;function e(e,t){if(!e)throw new Error(t||"Assertion failed")}return hasRequiredMinimalisticAssert=1,minimalisticAssert=e,e.equal=function(e,t,r){if(e!=t)throw new Error(r||"Assertion failed: "+e+" != "+t)},minimalisticAssert}function requireCipher(){if(hasRequiredCipher)return cipher;hasRequiredCipher=1;var e=requireMinimalisticAssert();function t(e){this.options=e,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=!1!==e.padding}return cipher=t,t.prototype._init=function(){},t.prototype.update=function(e){return 0===e.length?[]:"decrypt"===this.type?this._updateDecrypt(e):this._updateEncrypt(e)},t.prototype._buffer=function(e,t){for(var r=Math.min(this.buffer.length-this.bufferOff,e.length-t),n=0;n<r;n++)this.buffer[this.bufferOff+n]=e[t+n];return this.bufferOff+=r,r},t.prototype._flushBuffer=function(e,t){return this._update(this.buffer,0,e,t),this.bufferOff=0,this.blockSize},t.prototype._updateEncrypt=function(e){var t=0,r=0,n=(this.bufferOff+e.length)/this.blockSize|0,o=new Array(n*this.blockSize);0!==this.bufferOff&&(t+=this._buffer(e,t),this.bufferOff===this.buffer.length&&(r+=this._flushBuffer(o,r)));for(var i=e.length-(e.length-t)%this.blockSize;t<i;t+=this.blockSize)this._update(e,t,o,r),r+=this.blockSize;for(;t<e.length;t++,this.bufferOff++)this.buffer[this.bufferOff]=e[t];return o},t.prototype._updateDecrypt=function(e){for(var t=0,r=0,n=Math.ceil((this.bufferOff+e.length)/this.blockSize)-1,o=new Array(n*this.blockSize);n>0;n--)t+=this._buffer(e,t),r+=this._flushBuffer(o,r);return t+=this._buffer(e,t),o},t.prototype.final=function(e){var t,r;return e&&(t=this.update(e)),r="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),t?t.concat(r):r},t.prototype._pad=function(e,t){if(0===t)return!1;for(;t<e.length;)e[t++]=0;return!0},t.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var e=new Array(this.blockSize);return this._update(this.buffer,0,e,0),e},t.prototype._unpad=function(e){return e},t.prototype._finalDecrypt=function(){e.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)},cipher}function requireDes$1(){if(hasRequiredDes$1)return des;hasRequiredDes$1=1;var e=requireMinimalisticAssert(),t=requireInherits_browser(),r=requireUtils$3(),n=requireCipher();function o(){this.tmp=new Array(2),this.keys=null}function i(e){n.call(this,e);var t=new o;this._desState=t,this.deriveKeys(t,e.key)}t(i,n),des=i,i.create=function(e){return new i(e)};var s=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];return i.prototype.deriveKeys=function(t,n){t.keys=new Array(32),e.equal(n.length,this.blockSize,"Invalid key length");var o=r.readUInt32BE(n,0),i=r.readUInt32BE(n,4);r.pc1(o,i,t.tmp,0),o=t.tmp[0],i=t.tmp[1];for(var a=0;a<t.keys.length;a+=2){var c=s[a>>>1];o=r.r28shl(o,c),i=r.r28shl(i,c),r.pc2(o,i,t.keys,a)}},i.prototype._update=function(e,t,n,o){var i=this._desState,s=r.readUInt32BE(e,t),a=r.readUInt32BE(e,t+4);r.ip(s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],"encrypt"===this.type?this._encrypt(i,s,a,i.tmp,0):this._decrypt(i,s,a,i.tmp,0),s=i.tmp[0],a=i.tmp[1],r.writeUInt32BE(n,s,o),r.writeUInt32BE(n,a,o+4)},i.prototype._pad=function(e,t){if(!1===this.padding)return!1;for(var r=e.length-t,n=t;n<e.length;n++)e[n]=r;return!0},i.prototype._unpad=function(t){if(!1===this.padding)return t;for(var r=t[t.length-1],n=t.length-r;n<t.length;n++)e.equal(t[n],r);return t.slice(0,t.length-r)},i.prototype._encrypt=function(e,t,n,o,i){for(var s=t,a=n,c=0;c<e.keys.length;c+=2){var u=e.keys[c],l=e.keys[c+1];r.expand(a,e.tmp,0),u^=e.tmp[0],l^=e.tmp[1];var d=r.substitute(u,l),h=a;a=(s^r.permute(d))>>>0,s=h}r.rip(a,s,o,i)},i.prototype._decrypt=function(e,t,n,o,i){for(var s=n,a=t,c=e.keys.length-2;c>=0;c-=2){var u=e.keys[c],l=e.keys[c+1];r.expand(s,e.tmp,0),u^=e.tmp[0],l^=e.tmp[1];var d=r.substitute(u,l),h=s;s=(a^r.permute(d))>>>0,a=h}r.rip(s,a,o,i)},des}var cbc$1={},hasRequiredCbc$1,ede,hasRequiredEde,hasRequiredDes,browserifyDes,hasRequiredBrowserifyDes;function requireCbc$1(){if(hasRequiredCbc$1)return cbc$1;hasRequiredCbc$1=1;var e=requireMinimalisticAssert(),t=requireInherits_browser(),r={};function n(t){e.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var r=0;r<this.iv.length;r++)this.iv[r]=t[r]}return cbc$1.instantiate=function(e){function n(t){e.call(this,t),this._cbcInit()}t(n,e);for(var o=Object.keys(r),i=0;i<o.length;i++){var s=o[i];n.prototype[s]=r[s]}return n.create=function(e){return new n(e)},n},r._cbcInit=function(){var e=new n(this.options.iv);this._cbcState=e},r._update=function(e,t,r,n){var o=this._cbcState,i=this.constructor.super_.prototype,s=o.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)s[a]^=e[t+a];i._update.call(this,s,0,r,n);for(a=0;a<this.blockSize;a++)s[a]=r[n+a]}else{i._update.call(this,e,t,r,n);for(a=0;a<this.blockSize;a++)r[n+a]^=s[a];for(a=0;a<this.blockSize;a++)s[a]=e[t+a]}},cbc$1}function requireEde(){if(hasRequiredEde)return ede;hasRequiredEde=1;var e=requireMinimalisticAssert(),t=requireInherits_browser(),r=requireCipher(),n=requireDes$1();function o(t,r){e.equal(r.length,24,"Invalid key length");var o=r.slice(0,8),i=r.slice(8,16),s=r.slice(16,24);this.ciphers="encrypt"===t?[n.create({type:"encrypt",key:o}),n.create({type:"decrypt",key:i}),n.create({type:"encrypt",key:s})]:[n.create({type:"decrypt",key:s}),n.create({type:"encrypt",key:i}),n.create({type:"decrypt",key:o})]}function i(e){r.call(this,e);var t=new o(this.type,this.options.key);this._edeState=t}return t(i,r),ede=i,i.create=function(e){return new i(e)},i.prototype._update=function(e,t,r,n){var o=this._edeState;o.ciphers[0]._update(e,t,r,n),o.ciphers[1]._update(r,n,r,n),o.ciphers[2]._update(r,n,r,n)},i.prototype._pad=n.prototype._pad,i.prototype._unpad=n.prototype._unpad,ede}function requireDes(){return hasRequiredDes||(hasRequiredDes=1,des$1.utils=requireUtils$3(),des$1.Cipher=requireCipher(),des$1.DES=requireDes$1(),des$1.CBC=requireCbc$1(),des$1.EDE=requireEde()),des$1}function requireBrowserifyDes(){if(hasRequiredBrowserifyDes)return browserifyDes;hasRequiredBrowserifyDes=1;var e=requireCipherBase(),t=requireDes(),r=requireInherits_browser(),n=requireSafeBuffer$1().Buffer,o={"des-ede3-cbc":t.CBC.instantiate(t.EDE),"des-ede3":t.EDE,"des-ede-cbc":t.CBC.instantiate(t.EDE),"des-ede":t.EDE,"des-cbc":t.CBC.instantiate(t.DES),"des-ecb":t.DES};function i(t){e.call(this);var r,i=t.mode.toLowerCase(),s=o[i];r=t.decrypt?"decrypt":"encrypt";var a=t.key;n.isBuffer(a)||(a=n.from(a)),"des-ede"!==i&&"des-ede-cbc"!==i||(a=n.concat([a,a.slice(0,8)]));var c=t.iv;n.isBuffer(c)||(c=n.from(c)),this._des=s.create({key:a,iv:c,type:r})}return o.des=o["des-cbc"],o.des3=o["des-ede3-cbc"],browserifyDes=i,r(i,e),i.prototype._update=function(e){return n.from(this._des.update(e))},i.prototype._final=function(){return n.from(this._des.final())},browserifyDes}var browser$6={},encrypter={},ecb={},hasRequiredEcb;function requireEcb(){return hasRequiredEcb||(hasRequiredEcb=1,ecb.encrypt=function(e,t){return e._cipher.encryptBlock(t)},ecb.decrypt=function(e,t){return e._cipher.decryptBlock(t)}),ecb}var cbc={},bufferXor,hasRequiredBufferXor,hasRequiredCbc;function requireBufferXor(){return hasRequiredBufferXor?bufferXor:(hasRequiredBufferXor=1,bufferXor=function(e,t){for(var r=Math.min(e.length,t.length),n=new Buffer(r),o=0;o<r;++o)n[o]=e[o]^t[o];return n})}function requireCbc(){if(hasRequiredCbc)return cbc;hasRequiredCbc=1;var e=requireBufferXor();return cbc.encrypt=function(t,r){var n=e(r,t._prev);return t._prev=t._cipher.encryptBlock(n),t._prev},cbc.decrypt=function(t,r){var n=t._prev;t._prev=r;var o=t._cipher.decryptBlock(r);return e(o,n)},cbc}var cfb={},hasRequiredCfb;function requireCfb(){if(hasRequiredCfb)return cfb;hasRequiredCfb=1;var e=requireSafeBuffer$1().Buffer,t=requireBufferXor();function r(r,n,o){var i=n.length,s=t(n,r._cache);return r._cache=r._cache.slice(i),r._prev=e.concat([r._prev,o?n:s]),s}return cfb.encrypt=function(t,n,o){for(var i,s=e.allocUnsafe(0);n.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=e.allocUnsafe(0)),!(t._cache.length<=n.length)){s=e.concat([s,r(t,n,o)]);break}i=t._cache.length,s=e.concat([s,r(t,n.slice(0,i),o)]),n=n.slice(i)}return s},cfb}var cfb8={},hasRequiredCfb8;function requireCfb8(){if(hasRequiredCfb8)return cfb8;hasRequiredCfb8=1;var e=requireSafeBuffer$1().Buffer;function t(t,r,n){var o=t._cipher.encryptBlock(t._prev)[0]^r;return t._prev=e.concat([t._prev.slice(1),e.from([n?r:o])]),o}return cfb8.encrypt=function(r,n,o){for(var i=n.length,s=e.allocUnsafe(i),a=-1;++a<i;)s[a]=t(r,n[a],o);return s},cfb8}var cfb1={},hasRequiredCfb1;function requireCfb1(){if(hasRequiredCfb1)return cfb1;hasRequiredCfb1=1;var e=requireSafeBuffer$1().Buffer;function t(e,t,n){for(var o,i,s=-1,a=0;++s<8;)o=t&1<<7-s?128:0,a+=(128&(i=e._cipher.encryptBlock(e._prev)[0]^o))>>s%8,e._prev=r(e._prev,n?o:i);return a}function r(t,r){var n=t.length,o=-1,i=e.allocUnsafe(t.length);for(t=e.concat([t,e.from([r])]);++o<n;)i[o]=t[o]<<1|t[o+1]>>7;return i}return cfb1.encrypt=function(r,n,o){for(var i=n.length,s=e.allocUnsafe(i),a=-1;++a<i;)s[a]=t(r,n[a],o);return s},cfb1}var ofb={},hasRequiredOfb;function requireOfb(){if(hasRequiredOfb)return ofb;hasRequiredOfb=1;var e=requireBufferXor();function t(e){return e._prev=e._cipher.encryptBlock(e._prev),e._prev}return ofb.encrypt=function(r,n){for(;r._cache.length<n.length;)r._cache=Buffer.concat([r._cache,t(r)]);var o=r._cache.slice(0,n.length);return r._cache=r._cache.slice(n.length),e(n,o)},ofb}var ctr={},incr32_1,hasRequiredIncr32,hasRequiredCtr;function requireIncr32(){if(hasRequiredIncr32)return incr32_1;return hasRequiredIncr32=1,incr32_1=function(e){for(var t,r=e.length;r--;){if(255!==(t=e.readUInt8(r))){t++,e.writeUInt8(t,r);break}e.writeUInt8(0,r)}}}function requireCtr(){if(hasRequiredCtr)return ctr;hasRequiredCtr=1;var e=requireBufferXor(),t=requireSafeBuffer$1().Buffer,r=requireIncr32();function n(e){var t=e._cipher.encryptBlockRaw(e._prev);return r(e._prev),t}return ctr.encrypt=function(r,o){var i=Math.ceil(o.length/16),s=r._cache.length;r._cache=t.concat([r._cache,t.allocUnsafe(16*i)]);for(var a=0;a<i;a++){var c=n(r),u=s+16*a;r._cache.writeUInt32BE(c[0],u+0),r._cache.writeUInt32BE(c[1],u+4),r._cache.writeUInt32BE(c[2],u+8),r._cache.writeUInt32BE(c[3],u+12)}var l=r._cache.slice(0,o.length);return r._cache=r._cache.slice(o.length),e(o,l)},ctr}const aes128={cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},aes192={cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},aes256={cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},require$$2={"aes-128-ecb":{cipher:"AES",key:128,iv:0,mode:"ECB",type:"block"},"aes-192-ecb":{cipher:"AES",key:192,iv:0,mode:"ECB",type:"block"},"aes-256-ecb":{cipher:"AES",key:256,iv:0,mode:"ECB",type:"block"},"aes-128-cbc":{cipher:"AES",key:128,iv:16,mode:"CBC",type:"block"},"aes-192-cbc":{cipher:"AES",key:192,iv:16,mode:"CBC",type:"block"},"aes-256-cbc":{cipher:"AES",key:256,iv:16,mode:"CBC",type:"block"},aes128:aes128,aes192:aes192,aes256:aes256,"aes-128-cfb":{cipher:"AES",key:128,iv:16,mode:"CFB",type:"stream"},"aes-192-cfb":{cipher:"AES",key:192,iv:16,mode:"CFB",type:"stream"},"aes-256-cfb":{cipher:"AES",key:256,iv:16,mode:"CFB",type:"stream"},"aes-128-cfb8":{cipher:"AES",key:128,iv:16,mode:"CFB8",type:"stream"},"aes-192-cfb8":{cipher:"AES",key:192,iv:16,mode:"CFB8",type:"stream"},"aes-256-cfb8":{cipher:"AES",key:256,iv:16,mode:"CFB8",type:"stream"},"aes-128-cfb1":{cipher:"AES",key:128,iv:16,mode:"CFB1",type:"stream"},"aes-192-cfb1":{cipher:"AES",key:192,iv:16,mode:"CFB1",type:"stream"},"aes-256-cfb1":{cipher:"AES",key:256,iv:16,mode:"CFB1",type:"stream"},"aes-128-ofb":{cipher:"AES",key:128,iv:16,mode:"OFB",type:"stream"},"aes-192-ofb":{cipher:"AES",key:192,iv:16,mode:"OFB",type:"stream"},"aes-256-ofb":{cipher:"AES",key:256,iv:16,mode:"OFB",type:"stream"},"aes-128-ctr":{cipher:"AES",key:128,iv:16,mode:"CTR",type:"stream"},"aes-192-ctr":{cipher:"AES",key:192,iv:16,mode:"CTR",type:"stream"},"aes-256-ctr":{cipher:"AES",key:256,iv:16,mode:"CTR",type:"stream"},"aes-128-gcm":{cipher:"AES",key:128,iv:12,mode:"GCM",type:"auth"},"aes-192-gcm":{cipher:"AES",key:192,iv:12,mode:"GCM",type:"auth"},"aes-256-gcm":{cipher:"AES",key:256,iv:12,mode:"GCM",type:"auth"}};var modes_1,hasRequiredModes$1;function requireModes$1(){if(hasRequiredModes$1)return modes_1;hasRequiredModes$1=1;var e={ECB:requireEcb(),CBC:requireCbc(),CFB:requireCfb(),CFB8:requireCfb8(),CFB1:requireCfb1(),OFB:requireOfb(),CTR:requireCtr(),GCM:requireCtr()},t=require$$2;for(var r in t)t[r].module=e[t[r].mode];return modes_1=t}var aes={},hasRequiredAes,ghash,hasRequiredGhash,authCipher,hasRequiredAuthCipher,streamCipher,hasRequiredStreamCipher,evp_bytestokey,hasRequiredEvp_bytestokey,hasRequiredEncrypter;function requireAes(){if(hasRequiredAes)return aes;hasRequiredAes=1;var e=requireSafeBuffer$1().Buffer;function t(t){e.isBuffer(t)||(t=e.from(t));for(var r=t.length/4|0,n=new Array(r),o=0;o<r;o++)n[o]=t.readUInt32BE(4*o);return n}function r(e){for(;0<e.length;e++)e[0]=0}function n(e,t,r,n,o){for(var i,s,a,c,u=r[0],l=r[1],d=r[2],h=r[3],f=e[0]^t[0],p=e[1]^t[1],m=e[2]^t[2],y=e[3]^t[3],g=4,b=1;b<o;b++)i=u[f>>>24]^l[p>>>16&255]^d[m>>>8&255]^h[255&y]^t[g++],s=u[p>>>24]^l[m>>>16&255]^d[y>>>8&255]^h[255&f]^t[g++],a=u[m>>>24]^l[y>>>16&255]^d[f>>>8&255]^h[255&p]^t[g++],c=u[y>>>24]^l[f>>>16&255]^d[p>>>8&255]^h[255&m]^t[g++],f=i,p=s,m=a,y=c;return i=(n[f>>>24]<<24|n[p>>>16&255]<<16|n[m>>>8&255]<<8|n[255&y])^t[g++],s=(n[p>>>24]<<24|n[m>>>16&255]<<16|n[y>>>8&255]<<8|n[255&f])^t[g++],a=(n[m>>>24]<<24|n[y>>>16&255]<<16|n[f>>>8&255]<<8|n[255&p])^t[g++],c=(n[y>>>24]<<24|n[f>>>16&255]<<16|n[p>>>8&255]<<8|n[255&m])^t[g++],[i>>>=0,s>>>=0,a>>>=0,c>>>=0]}var o=[0,1,2,4,8,16,32,64,128,27,54],i=function(){for(var e=new Array(256),t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;for(var r=[],n=[],o=[[],[],[],[]],i=[[],[],[],[]],s=0,a=0,c=0;c<256;++c){var u=a^a<<1^a<<2^a<<3^a<<4;u=u>>>8^255&u^99,r[s]=u,n[u]=s;var l=e[s],d=e[l],h=e[d],f=257*e[u]^16843008*u;o[0][s]=f<<24|f>>>8,o[1][s]=f<<16|f>>>16,o[2][s]=f<<8|f>>>24,o[3][s]=f,f=16843009*h^65537*d^257*l^16843008*s,i[0][u]=f<<24|f>>>8,i[1][u]=f<<16|f>>>16,i[2][u]=f<<8|f>>>24,i[3][u]=f,0===s?s=a=1:(s=l^e[e[e[h^l]]],a^=e[e[a]])}return{SBOX:r,INV_SBOX:n,SUB_MIX:o,INV_SUB_MIX:i}}();function s(e){this._key=t(e),this._reset()}return s.blockSize=16,s.keySize=32,s.prototype.blockSize=s.blockSize,s.prototype.keySize=s.keySize,s.prototype._reset=function(){for(var e=this._key,t=e.length,r=t+6,n=4*(r+1),s=[],a=0;a<t;a++)s[a]=e[a];for(a=t;a<n;a++){var c=s[a-1];a%t===0?(c=c<<8|c>>>24,c=i.SBOX[c>>>24]<<24|i.SBOX[c>>>16&255]<<16|i.SBOX[c>>>8&255]<<8|i.SBOX[255&c],c^=o[a/t|0]<<24):t>6&&a%t===4&&(c=i.SBOX[c>>>24]<<24|i.SBOX[c>>>16&255]<<16|i.SBOX[c>>>8&255]<<8|i.SBOX[255&c]),s[a]=s[a-t]^c}for(var u=[],l=0;l<n;l++){var d=n-l,h=s[d-(l%4?0:4)];u[l]=l<4||d<=4?h:i.INV_SUB_MIX[0][i.SBOX[h>>>24]]^i.INV_SUB_MIX[1][i.SBOX[h>>>16&255]]^i.INV_SUB_MIX[2][i.SBOX[h>>>8&255]]^i.INV_SUB_MIX[3][i.SBOX[255&h]]}this._nRounds=r,this._keySchedule=s,this._invKeySchedule=u},s.prototype.encryptBlockRaw=function(e){return n(e=t(e),this._keySchedule,i.SUB_MIX,i.SBOX,this._nRounds)},s.prototype.encryptBlock=function(t){var r=this.encryptBlockRaw(t),n=e.allocUnsafe(16);return n.writeUInt32BE(r[0],0),n.writeUInt32BE(r[1],4),n.writeUInt32BE(r[2],8),n.writeUInt32BE(r[3],12),n},s.prototype.decryptBlock=function(r){var o=(r=t(r))[1];r[1]=r[3],r[3]=o;var s=n(r,this._invKeySchedule,i.INV_SUB_MIX,i.INV_SBOX,this._nRounds),a=e.allocUnsafe(16);return a.writeUInt32BE(s[0],0),a.writeUInt32BE(s[3],4),a.writeUInt32BE(s[2],8),a.writeUInt32BE(s[1],12),a},s.prototype.scrub=function(){r(this._keySchedule),r(this._invKeySchedule),r(this._key)},aes.AES=s,aes}function requireGhash(){if(hasRequiredGhash)return ghash;hasRequiredGhash=1;var e=requireSafeBuffer$1().Buffer,t=e.alloc(16,0);function r(t){var r=e.allocUnsafe(16);return r.writeUInt32BE(t[0]>>>0,0),r.writeUInt32BE(t[1]>>>0,4),r.writeUInt32BE(t[2]>>>0,8),r.writeUInt32BE(t[3]>>>0,12),r}function n(t){this.h=t,this.state=e.alloc(16,0),this.cache=e.allocUnsafe(0)}return n.prototype.ghash=function(e){for(var t=-1;++t<e.length;)this.state[t]^=e[t];this._multiply()},n.prototype._multiply=function(){for(var e,t,n,o=[(e=this.h).readUInt32BE(0),e.readUInt32BE(4),e.readUInt32BE(8),e.readUInt32BE(12)],i=[0,0,0,0],s=-1;++s<128;){for(!!(this.state[~~(s/8)]&1<<7-s%8)&&(i[0]^=o[0],i[1]^=o[1],i[2]^=o[2],i[3]^=o[3]),n=!!(1&o[3]),t=3;t>0;t--)o[t]=o[t]>>>1|(1&o[t-1])<<31;o[0]=o[0]>>>1,n&&(o[0]=o[0]^225<<24)}this.state=r(i)},n.prototype.update=function(t){var r;for(this.cache=e.concat([this.cache,t]);this.cache.length>=16;)r=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(r)},n.prototype.final=function(n,o){return this.cache.length&&this.ghash(e.concat([this.cache,t],16)),this.ghash(r([0,n,0,o])),this.state},ghash=n}function requireAuthCipher(){if(hasRequiredAuthCipher)return authCipher;hasRequiredAuthCipher=1;var e=requireAes(),t=requireSafeBuffer$1().Buffer,r=requireCipherBase(),n=requireInherits_browser(),o=requireGhash(),i=requireBufferXor(),s=requireIncr32();function a(n,i,a,c){r.call(this);var u=t.alloc(4,0);this._cipher=new e.AES(i);var l=this._cipher.encryptBlock(u);this._ghash=new o(l),a=function(e,r,n){if(12===r.length)return e._finID=t.concat([r,t.from([0,0,0,1])]),t.concat([r,t.from([0,0,0,2])]);var i=new o(n),a=r.length,c=a%16;i.update(r),c&&(c=16-c,i.update(t.alloc(c,0))),i.update(t.alloc(8,0));var u=8*a,l=t.alloc(8);l.writeUIntBE(u,0,8),i.update(l),e._finID=i.state;var d=t.from(e._finID);return s(d),d}(this,a,l),this._prev=t.from(a),this._cache=t.allocUnsafe(0),this._secCache=t.allocUnsafe(0),this._decrypt=c,this._alen=0,this._len=0,this._mode=n,this._authTag=null,this._called=!1}return n(a,r),a.prototype._update=function(e){if(!this._called&&this._alen){var r=16-this._alen%16;r<16&&(r=t.alloc(r,0),this._ghash.update(r))}this._called=!0;var n=this._mode.encrypt(this,e);return this._decrypt?this._ghash.update(e):this._ghash.update(n),this._len+=e.length,n},a.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var e=i(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(e,t){var r=0;e.length!==t.length&&r++;for(var n=Math.min(e.length,t.length),o=0;o<n;++o)r+=e[o]^t[o];return r}(e,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=e,this._cipher.scrub()},a.prototype.getAuthTag=function(){if(this._decrypt||!t.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},a.prototype.setAuthTag=function(e){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=e},a.prototype.setAAD=function(e){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(e),this._alen+=e.length},authCipher=a}function requireStreamCipher(){if(hasRequiredStreamCipher)return streamCipher;hasRequiredStreamCipher=1;var e=requireAes(),t=requireSafeBuffer$1().Buffer,r=requireCipherBase();function n(n,o,i,s){r.call(this),this._cipher=new e.AES(o),this._prev=t.from(i),this._cache=t.allocUnsafe(0),this._secCache=t.allocUnsafe(0),this._decrypt=s,this._mode=n}return requireInherits_browser()(n,r),n.prototype._update=function(e){return this._mode.encrypt(this,e,this._decrypt)},n.prototype._final=function(){this._cipher.scrub()},streamCipher=n}function requireEvp_bytestokey(){if(hasRequiredEvp_bytestokey)return evp_bytestokey;hasRequiredEvp_bytestokey=1;var e=requireSafeBuffer$1().Buffer,t=requireMd5_js();return evp_bytestokey=function(r,n,o,i){if(e.isBuffer(r)||(r=e.from(r,"binary")),n&&(e.isBuffer(n)||(n=e.from(n,"binary")),8!==n.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var s=o/8,a=e.alloc(s),c=e.alloc(i||0),u=e.alloc(0);s>0||i>0;){var l=new t;l.update(u),l.update(r),n&&l.update(n),u=l.digest();var d=0;if(s>0){var h=a.length-s;d=Math.min(s,u.length),u.copy(a,h,0,d),s-=d}if(d<u.length&&i>0){var f=c.length-i,p=Math.min(i,u.length-d);u.copy(c,f,d,d+p),i-=p}}return u.fill(0),{key:a,iv:c}}}function requireEncrypter(){if(hasRequiredEncrypter)return encrypter;hasRequiredEncrypter=1;var e=requireModes$1(),t=requireAuthCipher(),r=requireSafeBuffer$1().Buffer,n=requireStreamCipher(),o=requireCipherBase(),i=requireAes(),s=requireEvp_bytestokey();function a(e,t,n){o.call(this),this._cache=new u,this._cipher=new i.AES(t),this._prev=r.from(n),this._mode=e,this._autopadding=!0}requireInherits_browser()(a,o),a.prototype._update=function(e){var t,n;this._cache.add(e);for(var o=[];t=this._cache.get();)n=this._mode.encrypt(this,t),o.push(n);return r.concat(o)};var c=r.alloc(16,16);function u(){this.cache=r.allocUnsafe(0)}function l(o,i,s){var c=e[o.toLowerCase()];if(!c)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=r.from(i)),i.length!==c.key/8)throw new TypeError("invalid key length "+i.length);if("string"==typeof s&&(s=r.from(s)),"GCM"!==c.mode&&s.length!==c.iv)throw new TypeError("invalid iv length "+s.length);return"stream"===c.type?new n(c.module,i,s):"auth"===c.type?new t(c.module,i,s):new a(c.module,i,s)}return a.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return e=this._mode.encrypt(this,e),this._cipher.scrub(),e;if(!e.equals(c))throw this._cipher.scrub(),new Error("data not multiple of block length")},a.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},u.prototype.add=function(e){this.cache=r.concat([this.cache,e])},u.prototype.get=function(){if(this.cache.length>15){var e=this.cache.slice(0,16);return this.cache=this.cache.slice(16),e}return null},u.prototype.flush=function(){for(var e=16-this.cache.length,t=r.allocUnsafe(e),n=-1;++n<e;)t.writeUInt8(e,n);return r.concat([this.cache,t])},encrypter.createCipheriv=l,encrypter.createCipher=function(t,r){var n=e[t.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var o=s(r,!1,n.key,n.iv);return l(t,o.key,o.iv)},encrypter}var decrypter={},hasRequiredDecrypter,hasRequiredBrowser$7;function requireDecrypter(){if(hasRequiredDecrypter)return decrypter;hasRequiredDecrypter=1;var e=requireAuthCipher(),t=requireSafeBuffer$1().Buffer,r=requireModes$1(),n=requireStreamCipher(),o=requireCipherBase(),i=requireAes(),s=requireEvp_bytestokey();function a(e,r,n){o.call(this),this._cache=new c,this._last=void 0,this._cipher=new i.AES(r),this._prev=t.from(n),this._mode=e,this._autopadding=!0}function c(){this.cache=t.allocUnsafe(0)}function u(o,i,s){var c=r[o.toLowerCase()];if(!c)throw new TypeError("invalid suite type");if("string"==typeof s&&(s=t.from(s)),"GCM"!==c.mode&&s.length!==c.iv)throw new TypeError("invalid iv length "+s.length);if("string"==typeof i&&(i=t.from(i)),i.length!==c.key/8)throw new TypeError("invalid key length "+i.length);return"stream"===c.type?new n(c.module,i,s,!0):"auth"===c.type?new e(c.module,i,s,!0):new a(c.module,i,s)}return requireInherits_browser()(a,o),a.prototype._update=function(e){var r,n;this._cache.add(e);for(var o=[];r=this._cache.get(this._autopadding);)n=this._mode.decrypt(this,r),o.push(n);return t.concat(o)},a.prototype._final=function(){var e=this._cache.flush();if(this._autopadding)return function(e){var t=e[15];if(t<1||t>16)throw new Error("unable to decrypt data");var r=-1;for(;++r<t;)if(e[r+(16-t)]!==t)throw new Error("unable to decrypt data");if(16===t)return;return e.slice(0,16-t)}(this._mode.decrypt(this,e));if(e)throw new Error("data not multiple of block length")},a.prototype.setAutoPadding=function(e){return this._autopadding=!!e,this},c.prototype.add=function(e){this.cache=t.concat([this.cache,e])},c.prototype.get=function(e){var t;if(e){if(this.cache.length>16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t}else if(this.cache.length>=16)return t=this.cache.slice(0,16),this.cache=this.cache.slice(16),t;return null},c.prototype.flush=function(){if(this.cache.length)return this.cache},decrypter.createDecipher=function(e,t){var n=r[e.toLowerCase()];if(!n)throw new TypeError("invalid suite type");var o=s(t,!1,n.key,n.iv);return u(e,o.key,o.iv)},decrypter.createDecipheriv=u,decrypter}function requireBrowser$7(){if(hasRequiredBrowser$7)return browser$6;hasRequiredBrowser$7=1;var e=requireEncrypter(),t=requireDecrypter(),r=require$$2;return browser$6.createCipher=browser$6.Cipher=e.createCipher,browser$6.createCipheriv=browser$6.Cipheriv=e.createCipheriv,browser$6.createDecipher=browser$6.Decipher=t.createDecipher,browser$6.createDecipheriv=browser$6.Decipheriv=t.createDecipheriv,browser$6.listCiphers=browser$6.getCiphers=function(){return Object.keys(r)},browser$6}var modes={},hasRequiredModes,hasRequiredBrowser$6;function requireModes(){return hasRequiredModes||(hasRequiredModes=1,(e=modes)["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}),modes;var e}function requireBrowser$6(){if(hasRequiredBrowser$6)return browser$7;hasRequiredBrowser$6=1;var e=requireBrowserifyDes(),t=requireBrowser$7(),r=requireModes$1(),n=requireModes(),o=requireEvp_bytestokey();function i(o,i,s){if(o=o.toLowerCase(),r[o])return t.createCipheriv(o,i,s);if(n[o])return new e({key:i,iv:s,mode:o});throw new TypeError("invalid suite type")}function s(o,i,s){if(o=o.toLowerCase(),r[o])return t.createDecipheriv(o,i,s);if(n[o])return new e({key:i,iv:s,mode:o,decrypt:!0});throw new TypeError("invalid suite type")}return browser$7.createCipher=browser$7.Cipher=function(e,t){var s,a;if(e=e.toLowerCase(),r[e])s=r[e].key,a=r[e].iv;else{if(!n[e])throw new TypeError("invalid suite type");s=8*n[e].key,a=n[e].iv}var c=o(t,!1,s,a);return i(e,c.key,c.iv)},browser$7.createCipheriv=browser$7.Cipheriv=i,browser$7.createDecipher=browser$7.Decipher=function(e,t){var i,a;if(e=e.toLowerCase(),r[e])i=r[e].key,a=r[e].iv;else{if(!n[e])throw new TypeError("invalid suite type");i=8*n[e].key,a=n[e].iv}var c=o(t,!1,i,a);return s(e,c.key,c.iv)},browser$7.createDecipheriv=browser$7.Decipheriv=s,browser$7.listCiphers=browser$7.getCiphers=function(){return Object.keys(n).concat(t.getCiphers())},browser$7}var browser$5={},bn$d={exports:{}},bn$c=bn$d.exports,hasRequiredBn$6;function requireBn$6(){return hasRequiredBn$6||(hasRequiredBn$6=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var i;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$1().Buffer}catch(T){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,n){for(var o=0,i=Math.min(e.length,r),s=t;s<i;s++){var a=e.charCodeAt(s)-48;o*=n,o+=a>=49?a-49+10:a>=17?a-17+10:a}return o}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var o=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(o++,this.negative=1),o<e.length&&(16===t?this._parseHex(e,o,n):(this._parseBase(e,t,o),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var i,s,a=0;if("be"===n)for(o=e.length-1,i=0;o>=0;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===n)for(o=0,i=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this.strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,i=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;this.strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,o=1;o<=67108863;o*=t)n++;n--,o=o/t|0;for(var i=e.length-r,s=i%n,a=Math.min(i,i-s)+r,u=0,l=r;l<a;l+=n)u=c(e,l,l+n,t),this.imuln(o),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var d=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)d*=t;this.imuln(d),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var o=0|e.words[0],i=0|t.words[0],s=o*i,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,d=67108863&c,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;l+=(s=(o=0|e.words[p])*(i=0|t.words[f])+d)/67108864|0,d=67108863&s}r.words[u]=0|d,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var o=0,i=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<o|i)).toString(16);i=a>>>24-o&16777215,(o+=2)>=26&&(o-=26,s--),n=0!==i||s!==this.length-1?u[6-c.length]+c+n:c+n}for(0!==i&&(n=i.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=l[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:u[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==i),this.toArrayLike(i,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var o=this.byteLength(),i=n||Math.max(1,o);r(o<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===t,u=new e(i),l=this.clone();if(c){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[a]=s;for(;a<i;a++)u[a]=0}else{for(a=0;a<i-o;a++)u[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[i-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var o=0;o<t;o++)this.words[o]=67108863&~this.words[o];return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,o=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<o:this.words[n]&~(1<<o),this.strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var o=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+o,this.words[i]=67108863&t,o=t>>>26;for(;0!==o&&i<r.length;i++)t=(0|r.words[i])+o,this.words[i]=67108863&t,o=t>>>26;if(this.length=r.length,0!==o)this.words[this.length]=o,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,o=this.cmp(e);if(0===o)return this.negative=0,this.length=1,this.words[0]=0,this;o>0?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)i=(t=(0|r.words[s])-(0|n.words[s])+i)>>26,this.words[s]=67108863&t;for(;0!==i&&s<r.length;s++)i=(t=(0|r.words[s])+i)>>26,this.words[s]=67108863&t;if(0===i&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var n,o,i,s=e.words,a=t.words,c=r.words,u=0,l=0|s[0],d=8191&l,h=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,y=0|s[2],g=8191&y,b=y>>>13,_=0|s[3],w=8191&_,v=_>>>13,I=0|s[4],k=8191&I,T=I>>>13,A=0|s[5],S=8191&A,E=A>>>13,P=0|s[6],O=8191&P,R=P>>>13,C=0|s[7],$=8191&C,N=C>>>13,M=0|s[8],x=8191&M,B=M>>>13,D=0|s[9],L=8191&D,F=D>>>13,j=0|a[0],U=8191&j,q=j>>>13,K=0|a[1],H=8191&K,G=K>>>13,z=0|a[2],V=8191&z,Z=z>>>13,W=0|a[3],J=8191&W,Y=W>>>13,Q=0|a[4],X=8191&Q,ee=Q>>>13,te=0|a[5],re=8191&te,ne=te>>>13,oe=0|a[6],ie=8191&oe,se=oe>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],de=8191&le,he=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(u+(n=Math.imul(d,U))|0)+((8191&(o=(o=Math.imul(d,q))+Math.imul(h,U)|0))<<13)|0;u=((i=Math.imul(h,q))+(o>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,U),o=(o=Math.imul(p,q))+Math.imul(m,U)|0,i=Math.imul(m,q);var ge=(u+(n=n+Math.imul(d,H)|0)|0)+((8191&(o=(o=o+Math.imul(d,G)|0)+Math.imul(h,H)|0))<<13)|0;u=((i=i+Math.imul(h,G)|0)+(o>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,U),o=(o=Math.imul(g,q))+Math.imul(b,U)|0,i=Math.imul(b,q),n=n+Math.imul(p,H)|0,o=(o=o+Math.imul(p,G)|0)+Math.imul(m,H)|0,i=i+Math.imul(m,G)|0;var be=(u+(n=n+Math.imul(d,V)|0)|0)+((8191&(o=(o=o+Math.imul(d,Z)|0)+Math.imul(h,V)|0))<<13)|0;u=((i=i+Math.imul(h,Z)|0)+(o>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,U),o=(o=Math.imul(w,q))+Math.imul(v,U)|0,i=Math.imul(v,q),n=n+Math.imul(g,H)|0,o=(o=o+Math.imul(g,G)|0)+Math.imul(b,H)|0,i=i+Math.imul(b,G)|0,n=n+Math.imul(p,V)|0,o=(o=o+Math.imul(p,Z)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,Z)|0;var _e=(u+(n=n+Math.imul(d,J)|0)|0)+((8191&(o=(o=o+Math.imul(d,Y)|0)+Math.imul(h,J)|0))<<13)|0;u=((i=i+Math.imul(h,Y)|0)+(o>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(k,U),o=(o=Math.imul(k,q))+Math.imul(T,U)|0,i=Math.imul(T,q),n=n+Math.imul(w,H)|0,o=(o=o+Math.imul(w,G)|0)+Math.imul(v,H)|0,i=i+Math.imul(v,G)|0,n=n+Math.imul(g,V)|0,o=(o=o+Math.imul(g,Z)|0)+Math.imul(b,V)|0,i=i+Math.imul(b,Z)|0,n=n+Math.imul(p,J)|0,o=(o=o+Math.imul(p,Y)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,Y)|0;var we=(u+(n=n+Math.imul(d,X)|0)|0)+((8191&(o=(o=o+Math.imul(d,ee)|0)+Math.imul(h,X)|0))<<13)|0;u=((i=i+Math.imul(h,ee)|0)+(o>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(S,U),o=(o=Math.imul(S,q))+Math.imul(E,U)|0,i=Math.imul(E,q),n=n+Math.imul(k,H)|0,o=(o=o+Math.imul(k,G)|0)+Math.imul(T,H)|0,i=i+Math.imul(T,G)|0,n=n+Math.imul(w,V)|0,o=(o=o+Math.imul(w,Z)|0)+Math.imul(v,V)|0,i=i+Math.imul(v,Z)|0,n=n+Math.imul(g,J)|0,o=(o=o+Math.imul(g,Y)|0)+Math.imul(b,J)|0,i=i+Math.imul(b,Y)|0,n=n+Math.imul(p,X)|0,o=(o=o+Math.imul(p,ee)|0)+Math.imul(m,X)|0,i=i+Math.imul(m,ee)|0;var ve=(u+(n=n+Math.imul(d,re)|0)|0)+((8191&(o=(o=o+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;u=((i=i+Math.imul(h,ne)|0)+(o>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(O,U),o=(o=Math.imul(O,q))+Math.imul(R,U)|0,i=Math.imul(R,q),n=n+Math.imul(S,H)|0,o=(o=o+Math.imul(S,G)|0)+Math.imul(E,H)|0,i=i+Math.imul(E,G)|0,n=n+Math.imul(k,V)|0,o=(o=o+Math.imul(k,Z)|0)+Math.imul(T,V)|0,i=i+Math.imul(T,Z)|0,n=n+Math.imul(w,J)|0,o=(o=o+Math.imul(w,Y)|0)+Math.imul(v,J)|0,i=i+Math.imul(v,Y)|0,n=n+Math.imul(g,X)|0,o=(o=o+Math.imul(g,ee)|0)+Math.imul(b,X)|0,i=i+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,o=(o=o+Math.imul(p,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var Ie=(u+(n=n+Math.imul(d,ie)|0)|0)+((8191&(o=(o=o+Math.imul(d,se)|0)+Math.imul(h,ie)|0))<<13)|0;u=((i=i+Math.imul(h,se)|0)+(o>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,U),o=(o=Math.imul($,q))+Math.imul(N,U)|0,i=Math.imul(N,q),n=n+Math.imul(O,H)|0,o=(o=o+Math.imul(O,G)|0)+Math.imul(R,H)|0,i=i+Math.imul(R,G)|0,n=n+Math.imul(S,V)|0,o=(o=o+Math.imul(S,Z)|0)+Math.imul(E,V)|0,i=i+Math.imul(E,Z)|0,n=n+Math.imul(k,J)|0,o=(o=o+Math.imul(k,Y)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,Y)|0,n=n+Math.imul(w,X)|0,o=(o=o+Math.imul(w,ee)|0)+Math.imul(v,X)|0,i=i+Math.imul(v,ee)|0,n=n+Math.imul(g,re)|0,o=(o=o+Math.imul(g,ne)|0)+Math.imul(b,re)|0,i=i+Math.imul(b,ne)|0,n=n+Math.imul(p,ie)|0,o=(o=o+Math.imul(p,se)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,se)|0;var ke=(u+(n=n+Math.imul(d,ce)|0)|0)+((8191&(o=(o=o+Math.imul(d,ue)|0)+Math.imul(h,ce)|0))<<13)|0;u=((i=i+Math.imul(h,ue)|0)+(o>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(x,U),o=(o=Math.imul(x,q))+Math.imul(B,U)|0,i=Math.imul(B,q),n=n+Math.imul($,H)|0,o=(o=o+Math.imul($,G)|0)+Math.imul(N,H)|0,i=i+Math.imul(N,G)|0,n=n+Math.imul(O,V)|0,o=(o=o+Math.imul(O,Z)|0)+Math.imul(R,V)|0,i=i+Math.imul(R,Z)|0,n=n+Math.imul(S,J)|0,o=(o=o+Math.imul(S,Y)|0)+Math.imul(E,J)|0,i=i+Math.imul(E,Y)|0,n=n+Math.imul(k,X)|0,o=(o=o+Math.imul(k,ee)|0)+Math.imul(T,X)|0,i=i+Math.imul(T,ee)|0,n=n+Math.imul(w,re)|0,o=(o=o+Math.imul(w,ne)|0)+Math.imul(v,re)|0,i=i+Math.imul(v,ne)|0,n=n+Math.imul(g,ie)|0,o=(o=o+Math.imul(g,se)|0)+Math.imul(b,ie)|0,i=i+Math.imul(b,se)|0,n=n+Math.imul(p,ce)|0,o=(o=o+Math.imul(p,ue)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,ue)|0;var Te=(u+(n=n+Math.imul(d,de)|0)|0)+((8191&(o=(o=o+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;u=((i=i+Math.imul(h,he)|0)+(o>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(L,U),o=(o=Math.imul(L,q))+Math.imul(F,U)|0,i=Math.imul(F,q),n=n+Math.imul(x,H)|0,o=(o=o+Math.imul(x,G)|0)+Math.imul(B,H)|0,i=i+Math.imul(B,G)|0,n=n+Math.imul($,V)|0,o=(o=o+Math.imul($,Z)|0)+Math.imul(N,V)|0,i=i+Math.imul(N,Z)|0,n=n+Math.imul(O,J)|0,o=(o=o+Math.imul(O,Y)|0)+Math.imul(R,J)|0,i=i+Math.imul(R,Y)|0,n=n+Math.imul(S,X)|0,o=(o=o+Math.imul(S,ee)|0)+Math.imul(E,X)|0,i=i+Math.imul(E,ee)|0,n=n+Math.imul(k,re)|0,o=(o=o+Math.imul(k,ne)|0)+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,n=n+Math.imul(w,ie)|0,o=(o=o+Math.imul(w,se)|0)+Math.imul(v,ie)|0,i=i+Math.imul(v,se)|0,n=n+Math.imul(g,ce)|0,o=(o=o+Math.imul(g,ue)|0)+Math.imul(b,ce)|0,i=i+Math.imul(b,ue)|0,n=n+Math.imul(p,de)|0,o=(o=o+Math.imul(p,he)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,he)|0;var Ae=(u+(n=n+Math.imul(d,pe)|0)|0)+((8191&(o=(o=o+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;u=((i=i+Math.imul(h,me)|0)+(o>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(L,H),o=(o=Math.imul(L,G))+Math.imul(F,H)|0,i=Math.imul(F,G),n=n+Math.imul(x,V)|0,o=(o=o+Math.imul(x,Z)|0)+Math.imul(B,V)|0,i=i+Math.imul(B,Z)|0,n=n+Math.imul($,J)|0,o=(o=o+Math.imul($,Y)|0)+Math.imul(N,J)|0,i=i+Math.imul(N,Y)|0,n=n+Math.imul(O,X)|0,o=(o=o+Math.imul(O,ee)|0)+Math.imul(R,X)|0,i=i+Math.imul(R,ee)|0,n=n+Math.imul(S,re)|0,o=(o=o+Math.imul(S,ne)|0)+Math.imul(E,re)|0,i=i+Math.imul(E,ne)|0,n=n+Math.imul(k,ie)|0,o=(o=o+Math.imul(k,se)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,se)|0,n=n+Math.imul(w,ce)|0,o=(o=o+Math.imul(w,ue)|0)+Math.imul(v,ce)|0,i=i+Math.imul(v,ue)|0,n=n+Math.imul(g,de)|0,o=(o=o+Math.imul(g,he)|0)+Math.imul(b,de)|0,i=i+Math.imul(b,he)|0;var Se=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(o=(o=o+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((i=i+Math.imul(m,me)|0)+(o>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,V),o=(o=Math.imul(L,Z))+Math.imul(F,V)|0,i=Math.imul(F,Z),n=n+Math.imul(x,J)|0,o=(o=o+Math.imul(x,Y)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,Y)|0,n=n+Math.imul($,X)|0,o=(o=o+Math.imul($,ee)|0)+Math.imul(N,X)|0,i=i+Math.imul(N,ee)|0,n=n+Math.imul(O,re)|0,o=(o=o+Math.imul(O,ne)|0)+Math.imul(R,re)|0,i=i+Math.imul(R,ne)|0,n=n+Math.imul(S,ie)|0,o=(o=o+Math.imul(S,se)|0)+Math.imul(E,ie)|0,i=i+Math.imul(E,se)|0,n=n+Math.imul(k,ce)|0,o=(o=o+Math.imul(k,ue)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,ue)|0,n=n+Math.imul(w,de)|0,o=(o=o+Math.imul(w,he)|0)+Math.imul(v,de)|0,i=i+Math.imul(v,he)|0;var Ee=(u+(n=n+Math.imul(g,pe)|0)|0)+((8191&(o=(o=o+Math.imul(g,me)|0)+Math.imul(b,pe)|0))<<13)|0;u=((i=i+Math.imul(b,me)|0)+(o>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,J),o=(o=Math.imul(L,Y))+Math.imul(F,J)|0,i=Math.imul(F,Y),n=n+Math.imul(x,X)|0,o=(o=o+Math.imul(x,ee)|0)+Math.imul(B,X)|0,i=i+Math.imul(B,ee)|0,n=n+Math.imul($,re)|0,o=(o=o+Math.imul($,ne)|0)+Math.imul(N,re)|0,i=i+Math.imul(N,ne)|0,n=n+Math.imul(O,ie)|0,o=(o=o+Math.imul(O,se)|0)+Math.imul(R,ie)|0,i=i+Math.imul(R,se)|0,n=n+Math.imul(S,ce)|0,o=(o=o+Math.imul(S,ue)|0)+Math.imul(E,ce)|0,i=i+Math.imul(E,ue)|0,n=n+Math.imul(k,de)|0,o=(o=o+Math.imul(k,he)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,he)|0;var Pe=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(o=(o=o+Math.imul(w,me)|0)+Math.imul(v,pe)|0))<<13)|0;u=((i=i+Math.imul(v,me)|0)+(o>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(L,X),o=(o=Math.imul(L,ee))+Math.imul(F,X)|0,i=Math.imul(F,ee),n=n+Math.imul(x,re)|0,o=(o=o+Math.imul(x,ne)|0)+Math.imul(B,re)|0,i=i+Math.imul(B,ne)|0,n=n+Math.imul($,ie)|0,o=(o=o+Math.imul($,se)|0)+Math.imul(N,ie)|0,i=i+Math.imul(N,se)|0,n=n+Math.imul(O,ce)|0,o=(o=o+Math.imul(O,ue)|0)+Math.imul(R,ce)|0,i=i+Math.imul(R,ue)|0,n=n+Math.imul(S,de)|0,o=(o=o+Math.imul(S,he)|0)+Math.imul(E,de)|0,i=i+Math.imul(E,he)|0;var Oe=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(o=(o=o+Math.imul(k,me)|0)+Math.imul(T,pe)|0))<<13)|0;u=((i=i+Math.imul(T,me)|0)+(o>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(L,re),o=(o=Math.imul(L,ne))+Math.imul(F,re)|0,i=Math.imul(F,ne),n=n+Math.imul(x,ie)|0,o=(o=o+Math.imul(x,se)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,se)|0,n=n+Math.imul($,ce)|0,o=(o=o+Math.imul($,ue)|0)+Math.imul(N,ce)|0,i=i+Math.imul(N,ue)|0,n=n+Math.imul(O,de)|0,o=(o=o+Math.imul(O,he)|0)+Math.imul(R,de)|0,i=i+Math.imul(R,he)|0;var Re=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(o=(o=o+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;u=((i=i+Math.imul(E,me)|0)+(o>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(L,ie),o=(o=Math.imul(L,se))+Math.imul(F,ie)|0,i=Math.imul(F,se),n=n+Math.imul(x,ce)|0,o=(o=o+Math.imul(x,ue)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,ue)|0,n=n+Math.imul($,de)|0,o=(o=o+Math.imul($,he)|0)+Math.imul(N,de)|0,i=i+Math.imul(N,he)|0;var Ce=(u+(n=n+Math.imul(O,pe)|0)|0)+((8191&(o=(o=o+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;u=((i=i+Math.imul(R,me)|0)+(o>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(L,ce),o=(o=Math.imul(L,ue))+Math.imul(F,ce)|0,i=Math.imul(F,ue),n=n+Math.imul(x,de)|0,o=(o=o+Math.imul(x,he)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,he)|0;var $e=(u+(n=n+Math.imul($,pe)|0)|0)+((8191&(o=(o=o+Math.imul($,me)|0)+Math.imul(N,pe)|0))<<13)|0;u=((i=i+Math.imul(N,me)|0)+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,n=Math.imul(L,de),o=(o=Math.imul(L,he))+Math.imul(F,de)|0,i=Math.imul(F,he);var Ne=(u+(n=n+Math.imul(x,pe)|0)|0)+((8191&(o=(o=o+Math.imul(x,me)|0)+Math.imul(B,pe)|0))<<13)|0;u=((i=i+Math.imul(B,me)|0)+(o>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Me=(u+(n=Math.imul(L,pe))|0)+((8191&(o=(o=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return u=((i=Math.imul(F,me))+(o>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=ye,c[1]=ge,c[2]=be,c[3]=_e,c[4]=we,c[5]=ve,c[6]=Ie,c[7]=ke,c[8]=Te,c[9]=Ae,c[10]=Se,c[11]=Ee,c[12]=Pe,c[13]=Oe,c[14]=Re,c[15]=Ce,c[16]=$e,c[17]=Ne,c[18]=Me,0!==u&&(c[19]=u,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=h),o.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?f(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,o=0,i=0;i<r.length-1;i++){var s=o;o=0;for(var a=67108863&n,c=Math.min(i,t.length-1),u=Math.max(0,i-e.length+1);u<=c;u++){var l=i-u,d=(0|e.words[l])*(0|t.words[u]),h=67108863&d;a=67108863&(h=h+a|0),o+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[i]=a,n=s,s=o}return 0!==n?r.words[i]=n:r.length--,r.strip()}(this,e,t):p(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,o=0;o<t;o++)n|=(1&e)<<t-o-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,o,i){for(var s=0;s<i;s++)n[s]=t[e[s]],o[s]=r[e[s]]},m.prototype.transform=function(e,t,r,n,o,i){this.permute(i,e,t,r,n,o);for(var s=1;s<o;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<o;l+=a)for(var d=c,h=u,f=0;f<s;f++){var p=r[l+f],m=n[l+f],y=r[l+f+s],g=n[l+f+s],b=d*y-h*g;g=d*g+h*y,y=b,r[l+f]=p+y,n[l+f]=m+g,r[l+f+s]=p-y,n[l+f+s]=m-g,f!==a&&(b=c*d-u*h,h=c*h+u*d,d=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,o=0;for(r=r/2|0;r;r>>>=1)o++;return 1<<o+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var o=e[n];e[n]=e[r-n-1],e[r-n-1]=o,o=t[n],t[n]=-t[r-n-1],t[r-n-1]=-o}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var o=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&o,r=o<67108864?0:o/67108864|0}return e},m.prototype.convert13b=function(e,t,n,o){for(var i=0,s=0;s<t;s++)i+=0|e[s],n[2*s]=8191&i,i>>>=13,n[2*s+1]=8191&i,i>>>=13;for(s=2*t;s<o;++s)n[s]=0;r(0===i),r(!(-8192&i))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),o=this.makeRBT(n),i=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,i,a,c,n,o),this.transform(u,i,l,d,n,o);for(var f=0;f<n;f++){var p=a[f]*l[f]-c[f]*d[f];c[f]=a[f]*d[f]+c[f]*l[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,h,i,n,o),this.conjugate(h,i,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),p(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var o=(0|this.words[n])*e,i=(67108863&o)+(67108863&t);t>>=26,t+=o/67108864|0,t+=i>>>26,this.words[n]=67108863&i}return 0!==t&&(this.words[n]=t,this.length++),this.length=0===e?1:this.length,this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=(e.words[n]&1<<o)>>>o}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,o=(e-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&i,c=(0|this.words[t])-a<<n;this.words[t]=c|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==o){for(t=this.length-1;t>=0;t--)this.words[t+o]=this.words[t];for(t=0;t<o;t++)this.words[t]=0;this.length+=o}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var o;r("number"==typeof e&&e>=0),o=t?(t-t%26)/26:0;var i=e%26,s=Math.min((e-i)/26,this.length),a=67108863^67108863>>>i<<i,c=n;if(o-=s,o=Math.max(0,o),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=o);u--){var d=0|this.words[u];this.words[u]=l<<26-i|d>>>i,l=d&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,o=1<<t;return!(this.length<=n||!(this.words[n]&o))},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var o=67108863^67108863>>>t<<t;this.words[this.length-1]&=o}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var o,i,s=e.length+n;this._expand(s);var a=0;for(o=0;o<e.length;o++){i=(0|this.words[o+n])+a;var c=(0|e.words[o])*t;a=((i-=67108863&c)>>26)-(c/67108864|0),this.words[o+n]=67108863&i}for(;o<this.length-n;o++)a=(i=(0|this.words[o+n])+a)>>26,this.words[o+n]=67108863&i;if(0===a)return this.strip();for(r(-1===a),a=0,o=0;o<this.length;o++)a=(i=-(0|this.words[o])+a)>>26,this.words[o]=67108863&i;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!=(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(i,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);a&&(a.words[d]=h)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),o=e.andln(1),i=r.cmp(n);return i<0||1===o&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,o=this.length-1;o>=0;o--)n=(t*n+(0|this.words[o]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*t;this.words[n]=o/e|0,t=o%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var l=n.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0===(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(d)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(c)):(n.isub(t),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:n.iushln(u)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,l=1;0===(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0===(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var o=t.cmp(r);if(o<0){var i=t;t=r,r=i}else if(0===o||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return!(1&this.words[0])},o.prototype.isOdd=function(){return!(1&~this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,o=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var i=o,s=n;0!==i&&s<this.length;s++){var a=0|this.words[s];i=(a+=i)>>>26,a&=67108863,this.words[s]=a}return 0!==i&&(this.words[s]=i,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var o=0|this.words[0];t=o===e?0:o<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],o=0|e.words[r];if(n!==o){n<o?t=-1:n>o&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new I(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){I.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},n(b,g),b.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),o=0;o<n;o++)t.words[o]=e.words[o];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=i&r,o=10;o<e.length;o++){var s=0|e.words[o];e.words[o-10]=(s&r)<<4|i>>>22,i=s}i>>>=22,e.words[o-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(_,g),n(w,g),n(v,g),v.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,o=67108863&n;n>>>=26,e.words[r]=o,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new v}return y[e]=t,t},I.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},I.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},I.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},I.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},I.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},I.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},I.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},I.prototype.isqr=function(e){return this.imul(e,e.clone())},I.prototype.sqr=function(e){return this.mul(e,e)},I.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var d=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,y=0;0!==m.cmp(a);y++)m=m.redSqr();r(y<p);var g=this.pow(d,new o(1).iushln(p-y-1));h=h.redMul(g),d=g.redSqr(),f=f.redMul(d),p=y}return h},I.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},I.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],l=c-1;l>=0;l--){var d=u>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==d||0!==s?(s<<=1,s|=d,(4===++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},I.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},I.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new k(e)},n(k,I),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),i=o;return o.cmp(this.m)>=0?i=o.isub(this.m):o.cmpn(0)<0&&(i=o.iadd(this.m)),i._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$d,bn$c)),bn$d.exports}var bn$b={exports:{}},bn$a=bn$b.exports,hasRequiredBn$5;function requireBn$5(){return hasRequiredBn$5||(hasRequiredBn$5=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var i;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$1().Buffer}catch(T){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,n){for(var o=0,i=Math.min(e.length,r),s=t;s<i;s++){var a=e.charCodeAt(s)-48;o*=n,o+=a>=49?a-49+10:a>=17?a-17+10:a}return o}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var o=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(o++,this.negative=1),o<e.length&&(16===t?this._parseHex(e,o,n):(this._parseBase(e,t,o),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var i,s,a=0;if("be"===n)for(o=e.length-1,i=0;o>=0;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===n)for(o=0,i=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this.strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,i=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;this.strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,o=1;o<=67108863;o*=t)n++;n--,o=o/t|0;for(var i=e.length-r,s=i%n,a=Math.min(i,i-s)+r,u=0,l=r;l<a;l+=n)u=c(e,l,l+n,t),this.imuln(o),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var d=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)d*=t;this.imuln(d),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var o=0|e.words[0],i=0|t.words[0],s=o*i,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,d=67108863&c,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;l+=(s=(o=0|e.words[p])*(i=0|t.words[f])+d)/67108864|0,d=67108863&s}r.words[u]=0|d,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var o=0,i=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<o|i)).toString(16);i=a>>>24-o&16777215,(o+=2)>=26&&(o-=26,s--),n=0!==i||s!==this.length-1?u[6-c.length]+c+n:c+n}for(0!==i&&(n=i.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=l[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:u[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==i),this.toArrayLike(i,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var o=this.byteLength(),i=n||Math.max(1,o);r(o<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===t,u=new e(i),l=this.clone();if(c){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[a]=s;for(;a<i;a++)u[a]=0}else{for(a=0;a<i-o;a++)u[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[i-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var o=0;o<t;o++)this.words[o]=67108863&~this.words[o];return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,o=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<o:this.words[n]&~(1<<o),this.strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var o=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+o,this.words[i]=67108863&t,o=t>>>26;for(;0!==o&&i<r.length;i++)t=(0|r.words[i])+o,this.words[i]=67108863&t,o=t>>>26;if(this.length=r.length,0!==o)this.words[this.length]=o,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,o=this.cmp(e);if(0===o)return this.negative=0,this.length=1,this.words[0]=0,this;o>0?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)i=(t=(0|r.words[s])-(0|n.words[s])+i)>>26,this.words[s]=67108863&t;for(;0!==i&&s<r.length;s++)i=(t=(0|r.words[s])+i)>>26,this.words[s]=67108863&t;if(0===i&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var n,o,i,s=e.words,a=t.words,c=r.words,u=0,l=0|s[0],d=8191&l,h=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,y=0|s[2],g=8191&y,b=y>>>13,_=0|s[3],w=8191&_,v=_>>>13,I=0|s[4],k=8191&I,T=I>>>13,A=0|s[5],S=8191&A,E=A>>>13,P=0|s[6],O=8191&P,R=P>>>13,C=0|s[7],$=8191&C,N=C>>>13,M=0|s[8],x=8191&M,B=M>>>13,D=0|s[9],L=8191&D,F=D>>>13,j=0|a[0],U=8191&j,q=j>>>13,K=0|a[1],H=8191&K,G=K>>>13,z=0|a[2],V=8191&z,Z=z>>>13,W=0|a[3],J=8191&W,Y=W>>>13,Q=0|a[4],X=8191&Q,ee=Q>>>13,te=0|a[5],re=8191&te,ne=te>>>13,oe=0|a[6],ie=8191&oe,se=oe>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],de=8191&le,he=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(u+(n=Math.imul(d,U))|0)+((8191&(o=(o=Math.imul(d,q))+Math.imul(h,U)|0))<<13)|0;u=((i=Math.imul(h,q))+(o>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,U),o=(o=Math.imul(p,q))+Math.imul(m,U)|0,i=Math.imul(m,q);var ge=(u+(n=n+Math.imul(d,H)|0)|0)+((8191&(o=(o=o+Math.imul(d,G)|0)+Math.imul(h,H)|0))<<13)|0;u=((i=i+Math.imul(h,G)|0)+(o>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,U),o=(o=Math.imul(g,q))+Math.imul(b,U)|0,i=Math.imul(b,q),n=n+Math.imul(p,H)|0,o=(o=o+Math.imul(p,G)|0)+Math.imul(m,H)|0,i=i+Math.imul(m,G)|0;var be=(u+(n=n+Math.imul(d,V)|0)|0)+((8191&(o=(o=o+Math.imul(d,Z)|0)+Math.imul(h,V)|0))<<13)|0;u=((i=i+Math.imul(h,Z)|0)+(o>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,U),o=(o=Math.imul(w,q))+Math.imul(v,U)|0,i=Math.imul(v,q),n=n+Math.imul(g,H)|0,o=(o=o+Math.imul(g,G)|0)+Math.imul(b,H)|0,i=i+Math.imul(b,G)|0,n=n+Math.imul(p,V)|0,o=(o=o+Math.imul(p,Z)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,Z)|0;var _e=(u+(n=n+Math.imul(d,J)|0)|0)+((8191&(o=(o=o+Math.imul(d,Y)|0)+Math.imul(h,J)|0))<<13)|0;u=((i=i+Math.imul(h,Y)|0)+(o>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(k,U),o=(o=Math.imul(k,q))+Math.imul(T,U)|0,i=Math.imul(T,q),n=n+Math.imul(w,H)|0,o=(o=o+Math.imul(w,G)|0)+Math.imul(v,H)|0,i=i+Math.imul(v,G)|0,n=n+Math.imul(g,V)|0,o=(o=o+Math.imul(g,Z)|0)+Math.imul(b,V)|0,i=i+Math.imul(b,Z)|0,n=n+Math.imul(p,J)|0,o=(o=o+Math.imul(p,Y)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,Y)|0;var we=(u+(n=n+Math.imul(d,X)|0)|0)+((8191&(o=(o=o+Math.imul(d,ee)|0)+Math.imul(h,X)|0))<<13)|0;u=((i=i+Math.imul(h,ee)|0)+(o>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(S,U),o=(o=Math.imul(S,q))+Math.imul(E,U)|0,i=Math.imul(E,q),n=n+Math.imul(k,H)|0,o=(o=o+Math.imul(k,G)|0)+Math.imul(T,H)|0,i=i+Math.imul(T,G)|0,n=n+Math.imul(w,V)|0,o=(o=o+Math.imul(w,Z)|0)+Math.imul(v,V)|0,i=i+Math.imul(v,Z)|0,n=n+Math.imul(g,J)|0,o=(o=o+Math.imul(g,Y)|0)+Math.imul(b,J)|0,i=i+Math.imul(b,Y)|0,n=n+Math.imul(p,X)|0,o=(o=o+Math.imul(p,ee)|0)+Math.imul(m,X)|0,i=i+Math.imul(m,ee)|0;var ve=(u+(n=n+Math.imul(d,re)|0)|0)+((8191&(o=(o=o+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;u=((i=i+Math.imul(h,ne)|0)+(o>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(O,U),o=(o=Math.imul(O,q))+Math.imul(R,U)|0,i=Math.imul(R,q),n=n+Math.imul(S,H)|0,o=(o=o+Math.imul(S,G)|0)+Math.imul(E,H)|0,i=i+Math.imul(E,G)|0,n=n+Math.imul(k,V)|0,o=(o=o+Math.imul(k,Z)|0)+Math.imul(T,V)|0,i=i+Math.imul(T,Z)|0,n=n+Math.imul(w,J)|0,o=(o=o+Math.imul(w,Y)|0)+Math.imul(v,J)|0,i=i+Math.imul(v,Y)|0,n=n+Math.imul(g,X)|0,o=(o=o+Math.imul(g,ee)|0)+Math.imul(b,X)|0,i=i+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,o=(o=o+Math.imul(p,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var Ie=(u+(n=n+Math.imul(d,ie)|0)|0)+((8191&(o=(o=o+Math.imul(d,se)|0)+Math.imul(h,ie)|0))<<13)|0;u=((i=i+Math.imul(h,se)|0)+(o>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,U),o=(o=Math.imul($,q))+Math.imul(N,U)|0,i=Math.imul(N,q),n=n+Math.imul(O,H)|0,o=(o=o+Math.imul(O,G)|0)+Math.imul(R,H)|0,i=i+Math.imul(R,G)|0,n=n+Math.imul(S,V)|0,o=(o=o+Math.imul(S,Z)|0)+Math.imul(E,V)|0,i=i+Math.imul(E,Z)|0,n=n+Math.imul(k,J)|0,o=(o=o+Math.imul(k,Y)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,Y)|0,n=n+Math.imul(w,X)|0,o=(o=o+Math.imul(w,ee)|0)+Math.imul(v,X)|0,i=i+Math.imul(v,ee)|0,n=n+Math.imul(g,re)|0,o=(o=o+Math.imul(g,ne)|0)+Math.imul(b,re)|0,i=i+Math.imul(b,ne)|0,n=n+Math.imul(p,ie)|0,o=(o=o+Math.imul(p,se)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,se)|0;var ke=(u+(n=n+Math.imul(d,ce)|0)|0)+((8191&(o=(o=o+Math.imul(d,ue)|0)+Math.imul(h,ce)|0))<<13)|0;u=((i=i+Math.imul(h,ue)|0)+(o>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(x,U),o=(o=Math.imul(x,q))+Math.imul(B,U)|0,i=Math.imul(B,q),n=n+Math.imul($,H)|0,o=(o=o+Math.imul($,G)|0)+Math.imul(N,H)|0,i=i+Math.imul(N,G)|0,n=n+Math.imul(O,V)|0,o=(o=o+Math.imul(O,Z)|0)+Math.imul(R,V)|0,i=i+Math.imul(R,Z)|0,n=n+Math.imul(S,J)|0,o=(o=o+Math.imul(S,Y)|0)+Math.imul(E,J)|0,i=i+Math.imul(E,Y)|0,n=n+Math.imul(k,X)|0,o=(o=o+Math.imul(k,ee)|0)+Math.imul(T,X)|0,i=i+Math.imul(T,ee)|0,n=n+Math.imul(w,re)|0,o=(o=o+Math.imul(w,ne)|0)+Math.imul(v,re)|0,i=i+Math.imul(v,ne)|0,n=n+Math.imul(g,ie)|0,o=(o=o+Math.imul(g,se)|0)+Math.imul(b,ie)|0,i=i+Math.imul(b,se)|0,n=n+Math.imul(p,ce)|0,o=(o=o+Math.imul(p,ue)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,ue)|0;var Te=(u+(n=n+Math.imul(d,de)|0)|0)+((8191&(o=(o=o+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;u=((i=i+Math.imul(h,he)|0)+(o>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(L,U),o=(o=Math.imul(L,q))+Math.imul(F,U)|0,i=Math.imul(F,q),n=n+Math.imul(x,H)|0,o=(o=o+Math.imul(x,G)|0)+Math.imul(B,H)|0,i=i+Math.imul(B,G)|0,n=n+Math.imul($,V)|0,o=(o=o+Math.imul($,Z)|0)+Math.imul(N,V)|0,i=i+Math.imul(N,Z)|0,n=n+Math.imul(O,J)|0,o=(o=o+Math.imul(O,Y)|0)+Math.imul(R,J)|0,i=i+Math.imul(R,Y)|0,n=n+Math.imul(S,X)|0,o=(o=o+Math.imul(S,ee)|0)+Math.imul(E,X)|0,i=i+Math.imul(E,ee)|0,n=n+Math.imul(k,re)|0,o=(o=o+Math.imul(k,ne)|0)+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,n=n+Math.imul(w,ie)|0,o=(o=o+Math.imul(w,se)|0)+Math.imul(v,ie)|0,i=i+Math.imul(v,se)|0,n=n+Math.imul(g,ce)|0,o=(o=o+Math.imul(g,ue)|0)+Math.imul(b,ce)|0,i=i+Math.imul(b,ue)|0,n=n+Math.imul(p,de)|0,o=(o=o+Math.imul(p,he)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,he)|0;var Ae=(u+(n=n+Math.imul(d,pe)|0)|0)+((8191&(o=(o=o+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;u=((i=i+Math.imul(h,me)|0)+(o>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(L,H),o=(o=Math.imul(L,G))+Math.imul(F,H)|0,i=Math.imul(F,G),n=n+Math.imul(x,V)|0,o=(o=o+Math.imul(x,Z)|0)+Math.imul(B,V)|0,i=i+Math.imul(B,Z)|0,n=n+Math.imul($,J)|0,o=(o=o+Math.imul($,Y)|0)+Math.imul(N,J)|0,i=i+Math.imul(N,Y)|0,n=n+Math.imul(O,X)|0,o=(o=o+Math.imul(O,ee)|0)+Math.imul(R,X)|0,i=i+Math.imul(R,ee)|0,n=n+Math.imul(S,re)|0,o=(o=o+Math.imul(S,ne)|0)+Math.imul(E,re)|0,i=i+Math.imul(E,ne)|0,n=n+Math.imul(k,ie)|0,o=(o=o+Math.imul(k,se)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,se)|0,n=n+Math.imul(w,ce)|0,o=(o=o+Math.imul(w,ue)|0)+Math.imul(v,ce)|0,i=i+Math.imul(v,ue)|0,n=n+Math.imul(g,de)|0,o=(o=o+Math.imul(g,he)|0)+Math.imul(b,de)|0,i=i+Math.imul(b,he)|0;var Se=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(o=(o=o+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((i=i+Math.imul(m,me)|0)+(o>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,V),o=(o=Math.imul(L,Z))+Math.imul(F,V)|0,i=Math.imul(F,Z),n=n+Math.imul(x,J)|0,o=(o=o+Math.imul(x,Y)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,Y)|0,n=n+Math.imul($,X)|0,o=(o=o+Math.imul($,ee)|0)+Math.imul(N,X)|0,i=i+Math.imul(N,ee)|0,n=n+Math.imul(O,re)|0,o=(o=o+Math.imul(O,ne)|0)+Math.imul(R,re)|0,i=i+Math.imul(R,ne)|0,n=n+Math.imul(S,ie)|0,o=(o=o+Math.imul(S,se)|0)+Math.imul(E,ie)|0,i=i+Math.imul(E,se)|0,n=n+Math.imul(k,ce)|0,o=(o=o+Math.imul(k,ue)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,ue)|0,n=n+Math.imul(w,de)|0,o=(o=o+Math.imul(w,he)|0)+Math.imul(v,de)|0,i=i+Math.imul(v,he)|0;var Ee=(u+(n=n+Math.imul(g,pe)|0)|0)+((8191&(o=(o=o+Math.imul(g,me)|0)+Math.imul(b,pe)|0))<<13)|0;u=((i=i+Math.imul(b,me)|0)+(o>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,J),o=(o=Math.imul(L,Y))+Math.imul(F,J)|0,i=Math.imul(F,Y),n=n+Math.imul(x,X)|0,o=(o=o+Math.imul(x,ee)|0)+Math.imul(B,X)|0,i=i+Math.imul(B,ee)|0,n=n+Math.imul($,re)|0,o=(o=o+Math.imul($,ne)|0)+Math.imul(N,re)|0,i=i+Math.imul(N,ne)|0,n=n+Math.imul(O,ie)|0,o=(o=o+Math.imul(O,se)|0)+Math.imul(R,ie)|0,i=i+Math.imul(R,se)|0,n=n+Math.imul(S,ce)|0,o=(o=o+Math.imul(S,ue)|0)+Math.imul(E,ce)|0,i=i+Math.imul(E,ue)|0,n=n+Math.imul(k,de)|0,o=(o=o+Math.imul(k,he)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,he)|0;var Pe=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(o=(o=o+Math.imul(w,me)|0)+Math.imul(v,pe)|0))<<13)|0;u=((i=i+Math.imul(v,me)|0)+(o>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(L,X),o=(o=Math.imul(L,ee))+Math.imul(F,X)|0,i=Math.imul(F,ee),n=n+Math.imul(x,re)|0,o=(o=o+Math.imul(x,ne)|0)+Math.imul(B,re)|0,i=i+Math.imul(B,ne)|0,n=n+Math.imul($,ie)|0,o=(o=o+Math.imul($,se)|0)+Math.imul(N,ie)|0,i=i+Math.imul(N,se)|0,n=n+Math.imul(O,ce)|0,o=(o=o+Math.imul(O,ue)|0)+Math.imul(R,ce)|0,i=i+Math.imul(R,ue)|0,n=n+Math.imul(S,de)|0,o=(o=o+Math.imul(S,he)|0)+Math.imul(E,de)|0,i=i+Math.imul(E,he)|0;var Oe=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(o=(o=o+Math.imul(k,me)|0)+Math.imul(T,pe)|0))<<13)|0;u=((i=i+Math.imul(T,me)|0)+(o>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(L,re),o=(o=Math.imul(L,ne))+Math.imul(F,re)|0,i=Math.imul(F,ne),n=n+Math.imul(x,ie)|0,o=(o=o+Math.imul(x,se)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,se)|0,n=n+Math.imul($,ce)|0,o=(o=o+Math.imul($,ue)|0)+Math.imul(N,ce)|0,i=i+Math.imul(N,ue)|0,n=n+Math.imul(O,de)|0,o=(o=o+Math.imul(O,he)|0)+Math.imul(R,de)|0,i=i+Math.imul(R,he)|0;var Re=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(o=(o=o+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;u=((i=i+Math.imul(E,me)|0)+(o>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(L,ie),o=(o=Math.imul(L,se))+Math.imul(F,ie)|0,i=Math.imul(F,se),n=n+Math.imul(x,ce)|0,o=(o=o+Math.imul(x,ue)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,ue)|0,n=n+Math.imul($,de)|0,o=(o=o+Math.imul($,he)|0)+Math.imul(N,de)|0,i=i+Math.imul(N,he)|0;var Ce=(u+(n=n+Math.imul(O,pe)|0)|0)+((8191&(o=(o=o+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;u=((i=i+Math.imul(R,me)|0)+(o>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(L,ce),o=(o=Math.imul(L,ue))+Math.imul(F,ce)|0,i=Math.imul(F,ue),n=n+Math.imul(x,de)|0,o=(o=o+Math.imul(x,he)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,he)|0;var $e=(u+(n=n+Math.imul($,pe)|0)|0)+((8191&(o=(o=o+Math.imul($,me)|0)+Math.imul(N,pe)|0))<<13)|0;u=((i=i+Math.imul(N,me)|0)+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,n=Math.imul(L,de),o=(o=Math.imul(L,he))+Math.imul(F,de)|0,i=Math.imul(F,he);var Ne=(u+(n=n+Math.imul(x,pe)|0)|0)+((8191&(o=(o=o+Math.imul(x,me)|0)+Math.imul(B,pe)|0))<<13)|0;u=((i=i+Math.imul(B,me)|0)+(o>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Me=(u+(n=Math.imul(L,pe))|0)+((8191&(o=(o=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return u=((i=Math.imul(F,me))+(o>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=ye,c[1]=ge,c[2]=be,c[3]=_e,c[4]=we,c[5]=ve,c[6]=Ie,c[7]=ke,c[8]=Te,c[9]=Ae,c[10]=Se,c[11]=Ee,c[12]=Pe,c[13]=Oe,c[14]=Re,c[15]=Ce,c[16]=$e,c[17]=Ne,c[18]=Me,0!==u&&(c[19]=u,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=h),o.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?f(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,o=0,i=0;i<r.length-1;i++){var s=o;o=0;for(var a=67108863&n,c=Math.min(i,t.length-1),u=Math.max(0,i-e.length+1);u<=c;u++){var l=i-u,d=(0|e.words[l])*(0|t.words[u]),h=67108863&d;a=67108863&(h=h+a|0),o+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[i]=a,n=s,s=o}return 0!==n?r.words[i]=n:r.length--,r.strip()}(this,e,t):p(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,o=0;o<t;o++)n|=(1&e)<<t-o-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,o,i){for(var s=0;s<i;s++)n[s]=t[e[s]],o[s]=r[e[s]]},m.prototype.transform=function(e,t,r,n,o,i){this.permute(i,e,t,r,n,o);for(var s=1;s<o;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<o;l+=a)for(var d=c,h=u,f=0;f<s;f++){var p=r[l+f],m=n[l+f],y=r[l+f+s],g=n[l+f+s],b=d*y-h*g;g=d*g+h*y,y=b,r[l+f]=p+y,n[l+f]=m+g,r[l+f+s]=p-y,n[l+f+s]=m-g,f!==a&&(b=c*d-u*h,h=c*h+u*d,d=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,o=0;for(r=r/2|0;r;r>>>=1)o++;return 1<<o+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var o=e[n];e[n]=e[r-n-1],e[r-n-1]=o,o=t[n],t[n]=-t[r-n-1],t[r-n-1]=-o}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var o=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&o,r=o<67108864?0:o/67108864|0}return e},m.prototype.convert13b=function(e,t,n,o){for(var i=0,s=0;s<t;s++)i+=0|e[s],n[2*s]=8191&i,i>>>=13,n[2*s+1]=8191&i,i>>>=13;for(s=2*t;s<o;++s)n[s]=0;r(0===i),r(!(-8192&i))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),o=this.makeRBT(n),i=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,i,a,c,n,o),this.transform(u,i,l,d,n,o);for(var f=0;f<n;f++){var p=a[f]*l[f]-c[f]*d[f];c[f]=a[f]*d[f]+c[f]*l[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,h,i,n,o),this.conjugate(h,i,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),p(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var o=(0|this.words[n])*e,i=(67108863&o)+(67108863&t);t>>=26,t+=o/67108864|0,t+=i>>>26,this.words[n]=67108863&i}return 0!==t&&(this.words[n]=t,this.length++),this.length=0===e?1:this.length,this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=(e.words[n]&1<<o)>>>o}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,o=(e-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&i,c=(0|this.words[t])-a<<n;this.words[t]=c|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==o){for(t=this.length-1;t>=0;t--)this.words[t+o]=this.words[t];for(t=0;t<o;t++)this.words[t]=0;this.length+=o}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var o;r("number"==typeof e&&e>=0),o=t?(t-t%26)/26:0;var i=e%26,s=Math.min((e-i)/26,this.length),a=67108863^67108863>>>i<<i,c=n;if(o-=s,o=Math.max(0,o),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=o);u--){var d=0|this.words[u];this.words[u]=l<<26-i|d>>>i,l=d&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,o=1<<t;return!(this.length<=n||!(this.words[n]&o))},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var o=67108863^67108863>>>t<<t;this.words[this.length-1]&=o}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var o,i,s=e.length+n;this._expand(s);var a=0;for(o=0;o<e.length;o++){i=(0|this.words[o+n])+a;var c=(0|e.words[o])*t;a=((i-=67108863&c)>>26)-(c/67108864|0),this.words[o+n]=67108863&i}for(;o<this.length-n;o++)a=(i=(0|this.words[o+n])+a)>>26,this.words[o+n]=67108863&i;if(0===a)return this.strip();for(r(-1===a),a=0,o=0;o<this.length;o++)a=(i=-(0|this.words[o])+a)>>26,this.words[o]=67108863&i;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!=(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(i,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);a&&(a.words[d]=h)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),o=e.andln(1),i=r.cmp(n);return i<0||1===o&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,o=this.length-1;o>=0;o--)n=(t*n+(0|this.words[o]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*t;this.words[n]=o/e|0,t=o%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var l=n.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0===(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(d)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(c)):(n.isub(t),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:n.iushln(u)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,l=1;0===(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0===(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var o=t.cmp(r);if(o<0){var i=t;t=r,r=i}else if(0===o||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return!(1&this.words[0])},o.prototype.isOdd=function(){return!(1&~this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,o=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var i=o,s=n;0!==i&&s<this.length;s++){var a=0|this.words[s];i=(a+=i)>>>26,a&=67108863,this.words[s]=a}return 0!==i&&(this.words[s]=i,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var o=0|this.words[0];t=o===e?0:o<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],o=0|e.words[r];if(n!==o){n<o?t=-1:n>o&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new I(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){I.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},n(b,g),b.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),o=0;o<n;o++)t.words[o]=e.words[o];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=i&r,o=10;o<e.length;o++){var s=0|e.words[o];e.words[o-10]=(s&r)<<4|i>>>22,i=s}i>>>=22,e.words[o-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(_,g),n(w,g),n(v,g),v.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,o=67108863&n;n>>>=26,e.words[r]=o,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new v}return y[e]=t,t},I.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},I.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},I.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},I.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},I.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},I.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},I.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},I.prototype.isqr=function(e){return this.imul(e,e.clone())},I.prototype.sqr=function(e){return this.mul(e,e)},I.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var d=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,y=0;0!==m.cmp(a);y++)m=m.redSqr();r(y<p);var g=this.pow(d,new o(1).iushln(p-y-1));h=h.redMul(g),d=g.redSqr(),f=f.redMul(d),p=y}return h},I.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},I.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],l=c-1;l>=0;l--){var d=u>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==d||0!==s?(s<<=1,s|=d,(4===++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},I.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},I.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new k(e)},n(k,I),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),i=o;return o.cmp(this.m)>=0?i=o.isub(this.m):o.cmpn(0)<0&&(i=o.iadd(this.m)),i._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$b,bn$a)),bn$b.exports}var brorand={exports:{}},hasRequiredBrorand,mr,hasRequiredMr,generatePrime,hasRequiredGeneratePrime;function requireBrorand(){if(hasRequiredBrorand)return brorand.exports;var e;function t(e){this.rand=e}if(hasRequiredBrorand=1,brorand.exports=function(r){return e||(e=new t(null)),e.generate(r)},brorand.exports.Rand=t,t.prototype.generate=function(e){return this._rand(e)},t.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),r=0;r<t.length;r++)t[r]=this.rand.getByte();return t},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?t.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?t.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:"object"==typeof window&&(t.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var r=requireCryptoBrowserify();if("function"!=typeof r.randomBytes)throw new Error("Not supported");t.prototype._rand=function(e){return r.randomBytes(e)}}catch(n){}return brorand.exports}function requireMr(){if(hasRequiredMr)return mr;hasRequiredMr=1;var e=requireBn$5(),t=requireBrorand();function r(e){this.rand=e||new t.Rand}return mr=r,r.create=function(e){return new r(e)},r.prototype._randbelow=function(t){var r=t.bitLength(),n=Math.ceil(r/8);do{var o=new e(this.rand.generate(n))}while(o.cmp(t)>=0);return o},r.prototype._randrange=function(e,t){var r=t.sub(e);return e.add(this._randbelow(r))},r.prototype.test=function(t,r,n){var o=t.bitLength(),i=e.mont(t),s=new e(1).toRed(i);r||(r=Math.max(1,o/48|0));for(var a=t.subn(1),c=0;!a.testn(c);c++);for(var u=t.shrn(c),l=a.toRed(i);r>0;r--){var d=this._randrange(new e(2),a);n&&n(d);var h=d.toRed(i).redPow(u);if(0!==h.cmp(s)&&0!==h.cmp(l)){for(var f=1;f<c;f++){if(0===(h=h.redSqr()).cmp(s))return!1;if(0===h.cmp(l))break}if(f===c)return!1}}return!0},r.prototype.getDivisor=function(t,r){var n=t.bitLength(),o=e.mont(t),i=new e(1).toRed(o);r||(r=Math.max(1,n/48|0));for(var s=t.subn(1),a=0;!s.testn(a);a++);for(var c=t.shrn(a),u=s.toRed(o);r>0;r--){var l=this._randrange(new e(2),s),d=t.gcd(l);if(0!==d.cmpn(1))return d;var h=l.toRed(o).redPow(c);if(0!==h.cmp(i)&&0!==h.cmp(u)){for(var f=1;f<a;f++){if(0===(h=h.redSqr()).cmp(i))return h.fromRed().subn(1).gcd(t);if(0===h.cmp(u))break}if(f===a)return(h=h.redSqr()).fromRed().subn(1).gcd(t)}}return!1},mr}function requireGeneratePrime(){if(hasRequiredGeneratePrime)return generatePrime;hasRequiredGeneratePrime=1;var e=requireBrowser$c();generatePrime=p,p.simpleSieve=h,p.fermatTest=f;var t=requireBn$6(),r=new t(24),n=new(requireMr()),o=new t(1),i=new t(2),s=new t(5);new t(16),new t(8);var a=new t(10),c=new t(3);new t(7);var u=new t(11),l=new t(4);new t(12);var d=null;function h(e){for(var t=function(){if(null!==d)return d;var e=[];e[0]=2;for(var t=1,r=3;r<1048576;r+=2){for(var n=Math.ceil(Math.sqrt(r)),o=0;o<t&&e[o]<=n&&r%e[o]!==0;o++);t!==o&&e[o]<=n||(e[t++]=r)}return d=e,e}(),r=0;r<t.length;r++)if(0===e.modn(t[r]))return 0===e.cmpn(t[r]);return!0}function f(e){var r=t.mont(e);return 0===i.toRed(r).redPow(e.subn(1)).fromRed().cmpn(1)}function p(d,p){if(d<16)return new t(2===p||5===p?[140,123]:[140,39]);var m,y;for(p=new t(p);;){for(m=new t(e(Math.ceil(d/8)));m.bitLength()>d;)m.ishrn(1);if(m.isEven()&&m.iadd(o),m.testn(1)||m.iadd(i),p.cmp(i)){if(!p.cmp(s))for(;m.mod(a).cmp(c);)m.iadd(l)}else for(;m.mod(r).cmp(u);)m.iadd(l);if(h(y=m.shrn(1))&&h(m)&&f(y)&&f(m)&&n.test(y)&&n.test(m))return m}}return generatePrime}const modp1={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},modp2={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},modp5={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},modp14={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},modp15={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},modp16={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},modp17={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},modp18={gen:"02",prime:"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"},require$$1$1={modp1:modp1,modp2:modp2,modp5:modp5,modp14:modp14,modp15:modp15,modp16:modp16,modp17:modp17,modp18:modp18};var dh,hasRequiredDh,hasRequiredBrowser$5;function requireDh(){if(hasRequiredDh)return dh;hasRequiredDh=1;var e=requireBn$6(),t=new(requireMr()),r=new e(24),n=new e(11),o=new e(10),i=new e(3),s=new e(7),a=requireGeneratePrime(),c=requireBrowser$c();function u(t,r){return r=r||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,r)),this._pub=new e(t),this}function l(t,r){return r=r||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,r)),this._priv=new e(t),this}dh=h;var d={};function h(t,r,n){this.setGenerator(r),this.__prime=new e(t),this._prime=e.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,n?(this.setPublicKey=u,this.setPrivateKey=l):this._primeCode=8}function f(e,t){var r=new Buffer(e.toArray());return t?r.toString(t):r}return Object.defineProperty(h.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(e,c){var u=c.toString("hex"),l=[u,e.toString(16)].join("_");if(l in d)return d[l];var h,f=0;if(e.isEven()||!a.simpleSieve||!a.fermatTest(e)||!t.test(e))return f+=1,f+="02"===u||"05"===u?8:4,d[l]=f,f;switch(t.test(e.shrn(1))||(f+=2),u){case"02":e.mod(r).cmp(n)&&(f+=8);break;case"05":(h=e.mod(o)).cmp(i)&&h.cmp(s)&&(f+=8);break;default:f+=4}return d[l]=f,f}(this.__prime,this.__gen)),this._primeCode}}),h.prototype.generateKeys=function(){return this._priv||(this._priv=new e(c(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},h.prototype.computeSecret=function(t){var r=(t=(t=new e(t)).toRed(this._prime)).redPow(this._priv).fromRed(),n=new Buffer(r.toArray()),o=this.getPrime();if(n.length<o.length){var i=new Buffer(o.length-n.length);i.fill(0),n=Buffer.concat([i,n])}return n},h.prototype.getPublicKey=function(e){return f(this._pub,e)},h.prototype.getPrivateKey=function(e){return f(this._priv,e)},h.prototype.getPrime=function(e){return f(this.__prime,e)},h.prototype.getGenerator=function(e){return f(this._gen,e)},h.prototype.setGenerator=function(t,r){return r=r||"utf8",Buffer.isBuffer(t)||(t=new Buffer(t,r)),this.__gen=t,this._gen=new e(t),this},dh}function requireBrowser$5(){if(hasRequiredBrowser$5)return browser$5;hasRequiredBrowser$5=1;var e=requireGeneratePrime(),t=require$$1$1,r=requireDh();var n={binary:!0,hex:!0,base64:!0};return browser$5.DiffieHellmanGroup=browser$5.createDiffieHellmanGroup=browser$5.getDiffieHellman=function(e){var n=new Buffer(t[e].prime,"hex"),o=new Buffer(t[e].gen,"hex");return new r(n,o)},browser$5.createDiffieHellman=browser$5.DiffieHellman=function t(o,i,s,a){return Buffer.isBuffer(i)||void 0===n[i]?t(o,"binary",i,s):(i=i||"binary",a=a||"binary",s=s||new Buffer([2]),Buffer.isBuffer(s)||(s=new Buffer(s,a)),"number"==typeof o?new r(e(o,s),s,!0):(Buffer.isBuffer(o)||(o=new Buffer(o,i)),new r(o,s,!0)))},browser$5}var readableBrowser={exports:{}},processNextickArgs={exports:{}},hasRequiredProcessNextickArgs,isarray,hasRequiredIsarray,streamBrowser,hasRequiredStreamBrowser;function requireProcessNextickArgs(){if(hasRequiredProcessNextickArgs)return processNextickArgs.exports;return hasRequiredProcessNextickArgs=1,void 0===process$1||!process$1.version||0===process$1.version.indexOf("v0.")||0===process$1.version.indexOf("v1.")&&0!==process$1.version.indexOf("v1.8.")?processNextickArgs.exports={nextTick:function(e,t,r,n){if("function"!=typeof e)throw new TypeError('"callback" argument must be a function');var o,i,s=arguments.length;switch(s){case 0:case 1:return process$1.nextTick(e);case 2:return process$1.nextTick(function(){e.call(null,t)});case 3:return process$1.nextTick(function(){e.call(null,t,r)});case 4:return process$1.nextTick(function(){e.call(null,t,r,n)});default:for(o=new Array(s-1),i=0;i<o.length;)o[i++]=arguments[i];return process$1.nextTick(function(){e.apply(null,o)})}}}:processNextickArgs.exports=process$1,processNextickArgs.exports}function requireIsarray(){if(hasRequiredIsarray)return isarray;hasRequiredIsarray=1;var e={}.toString;return isarray=Array.isArray||function(t){return"[object Array]"==e.call(t)}}function requireStreamBrowser(){return hasRequiredStreamBrowser?streamBrowser:(hasRequiredStreamBrowser=1,streamBrowser=requireEvents().EventEmitter)}var safeBuffer={exports:{}},hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,function(e,t){var r=requireDist$1(),n=r.Buffer;function o(e,t){for(var r in e)t[r]=e[r]}function i(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(o(r,t),t.Buffer=i),o(n,i),i.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},i.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=n(e);return void 0!==t?"string"==typeof r?o.fill(t,r):o.fill(t):o.fill(0),o},i.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return n(e)},i.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)}}(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var util$2={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return util$2;function e(e){return Object.prototype.toString.call(e)}return hasRequiredUtil$1=1,util$2.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===e(t)},util$2.isBoolean=function(e){return"boolean"==typeof e},util$2.isNull=function(e){return null===e},util$2.isNullOrUndefined=function(e){return null==e},util$2.isNumber=function(e){return"number"==typeof e},util$2.isString=function(e){return"string"==typeof e},util$2.isSymbol=function(e){return"symbol"==typeof e},util$2.isUndefined=function(e){return void 0===e},util$2.isRegExp=function(t){return"[object RegExp]"===e(t)},util$2.isObject=function(e){return"object"==typeof e&&null!==e},util$2.isDate=function(t){return"[object Date]"===e(t)},util$2.isError=function(t){return"[object Error]"===e(t)||t instanceof Error},util$2.isFunction=function(e){return"function"==typeof e},util$2.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},util$2.isBuffer=requireDist$1().Buffer.isBuffer,util$2}var BufferList={exports:{}},hasRequiredBufferList,destroy_1,hasRequiredDestroy,_stream_writable,hasRequired_stream_writable,_stream_duplex,hasRequired_stream_duplex,_stream_readable,hasRequired_stream_readable,_stream_transform,hasRequired_stream_transform,_stream_passthrough,hasRequired_stream_passthrough,hasRequiredReadableBrowser;function requireBufferList(){return hasRequiredBufferList||(hasRequiredBufferList=1,function(e){var t=requireSafeBuffer().Buffer,r=requireUtil$2();function n(e,t,r){e.copy(t,r)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return t.alloc(0);for(var r=t.allocUnsafe(e>>>0),o=this.head,i=0;o;)n(o.data,r,i),i+=o.data.length,o=o.next;return r},e}(),r&&r.inspect&&r.inspect.custom&&(e.exports.prototype[r.inspect.custom]=function(){var e=r.inspect({length:this.length});return this.constructor.name+" "+e})}(BufferList)),BufferList.exports}function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;var e=requireProcessNextickArgs();function t(e,t){e.emit("error",t)}return destroy_1={destroy:function(r,n){var o=this,i=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return i||s?(n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,e.nextTick(t,this,r)):e.nextTick(t,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(r){!n&&r?o._writableState?o._writableState.errorEmitted||(o._writableState.errorEmitted=!0,e.nextTick(t,o,r)):e.nextTick(t,o,r):n&&n(r)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}}function require_stream_writable(){if(hasRequired_stream_writable)return _stream_writable;hasRequired_stream_writable=1;var e=requireProcessNextickArgs();function t(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;e.entry=null;for(;n;){var o=n.callback;t.pendingcb--,o(r),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}_stream_writable=f;var r,n=!process$1.browser&&["v0.10","v0.9."].indexOf(process$1.version.slice(0,5))>-1?setImmediate:e.nextTick;f.WritableState=h;var o=Object.create(requireUtil$1());o.inherits=requireInherits_browser();var i={deprecate:requireBrowser$b()},s=requireStreamBrowser(),a=requireSafeBuffer().Buffer,c=(void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var u,l=requireDestroy();function d(){}function h(o,i){r=r||require_stream_duplex(),o=o||{};var s=i instanceof r;this.objectMode=!!o.objectMode,s&&(this.objectMode=this.objectMode||!!o.writableObjectMode);var a=o.highWaterMark,c=o.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=a||0===a?a:s&&(c||0===c)?c:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=!1===o.decodeStrings;this.decodeStrings=!l,this.defaultEncoding=o.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,r){var o=t._writableState,i=o.sync,s=o.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(o),r)!function(t,r,n,o,i){--r.pendingcb,n?(e.nextTick(i,o),e.nextTick(_,t,r),t._writableState.errorEmitted=!0,t.emit("error",o)):(i(o),t._writableState.errorEmitted=!0,t.emit("error",o),_(t,r))}(t,o,i,r,s);else{var a=g(o);a||o.corked||o.bufferProcessing||!o.bufferedRequest||y(t,o),i?n(m,t,o,a,s):m(t,o,a,s)}}(i,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new t(this)}function f(e){if(r=r||require_stream_duplex(),!(u.call(f,this)||this instanceof r))return new f(e);this._writableState=new h(e,this),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),s.call(this)}function p(e,t,r,n,o,i,s){t.writelen=n,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(o,t.onwrite):e._write(o,i,t.onwrite),t.sync=!1}function m(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),_(e,t)}function y(e,r){r.bufferProcessing=!0;var n=r.bufferedRequest;if(e._writev&&n&&n.next){var o=r.bufferedRequestCount,i=new Array(o),s=r.corkedRequestsFree;s.entry=n;for(var a=0,c=!0;n;)i[a]=n,n.isBuf||(c=!1),n=n.next,a+=1;i.allBuffers=c,p(e,r,!0,r.length,i,"",s.finish),r.pendingcb++,r.lastBufferedRequest=null,s.next?(r.corkedRequestsFree=s.next,s.next=null):r.corkedRequestsFree=new t(r),r.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,d=n.callback;if(p(e,r,!1,r.objectMode?1:u.length,u,l,d),n=n.next,r.bufferedRequestCount--,r.writing)break}null===n&&(r.lastBufferedRequest=null)}r.bufferedRequest=n,r.bufferProcessing=!1}function g(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function b(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),_(e,t)})}function _(t,r){var n=g(r);return n&&(!function(t,r){r.prefinished||r.finalCalled||("function"==typeof t._final?(r.pendingcb++,r.finalCalled=!0,e.nextTick(b,t,r)):(r.prefinished=!0,t.emit("prefinish")))}(t,r),0===r.pendingcb&&(r.finished=!0,t.emit("finish"))),n}return o.inherits(f,s),h.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(h.prototype,"buffer",{get:i.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(u=Function.prototype[Symbol.hasInstance],Object.defineProperty(f,Symbol.hasInstance,{value:function(e){return!!u.call(this,e)||this===f&&(e&&e._writableState instanceof h)}})):u=function(e){return e instanceof this},f.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},f.prototype.write=function(t,r,n){var o,i=this._writableState,s=!1,u=!i.objectMode&&(o=t,a.isBuffer(o)||o instanceof c);return u&&!a.isBuffer(t)&&(t=function(e){return a.from(e)}(t)),"function"==typeof r&&(n=r,r=null),u?r="buffer":r||(r=i.defaultEncoding),"function"!=typeof n&&(n=d),i.ended?function(t,r){var n=new Error("write after end");t.emit("error",n),e.nextTick(r,n)}(this,n):(u||function(t,r,n,o){var i=!0,s=!1;return null===n?s=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||r.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(t.emit("error",s),e.nextTick(o,s),i=!1),i}(this,i,t,n))&&(i.pendingcb++,s=function(e,t,r,n,o,i){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=a.from(t,r));return t}(t,n,o);n!==s&&(r=!0,o="buffer",n=s)}var c=t.objectMode?1:n.length;t.length+=c;var u=t.length<t.highWaterMark;u||(t.needDrain=!0);if(t.writing||t.corked){var l=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:o,isBuf:r,callback:i,next:null},l?l.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else p(e,t,!1,c,n,o,i);return u}(this,i,u,t,r,n)),s},f.prototype.cork=function(){this._writableState.corked++},f.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||y(this,e))},f.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(f.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),f.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},f.prototype._writev=null,f.prototype.end=function(t,r,n){var o=this._writableState;"function"==typeof t?(n=t,t=null,r=null):"function"==typeof r&&(n=r,r=null),null!=t&&this.write(t,r),o.corked&&(o.corked=1,this.uncork()),o.ending||function(t,r,n){r.ending=!0,_(t,r),n&&(r.finished?e.nextTick(n):t.once("finish",n));r.ended=!0,t.writable=!1}(this,o,n)},Object.defineProperty(f.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),f.prototype.destroy=l.destroy,f.prototype._undestroy=l.undestroy,f.prototype._destroy=function(e,t){this.end(),t(e)},_stream_writable}function require_stream_duplex(){if(hasRequired_stream_duplex)return _stream_duplex;hasRequired_stream_duplex=1;var e=requireProcessNextickArgs(),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};_stream_duplex=c;var r=Object.create(requireUtil$1());r.inherits=requireInherits_browser();var n=require_stream_readable(),o=require_stream_writable();r.inherits(c,n);for(var i=t(o.prototype),s=0;s<i.length;s++){var a=i[s];c.prototype[a]||(c.prototype[a]=o.prototype[a])}function c(e){if(!(this instanceof c))return new c(e);n.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",u)}function u(){this.allowHalfOpen||this._writableState.ended||e.nextTick(l,this)}function l(e){e.end()}return Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),c.prototype._destroy=function(t,r){this.push(null),this.end(),e.nextTick(r,t)},_stream_duplex}function require_stream_readable(){if(hasRequired_stream_readable)return _stream_readable;hasRequired_stream_readable=1;var e=requireProcessNextickArgs();_stream_readable=m;var t,r=requireIsarray();m.ReadableState=p,requireEvents().EventEmitter;var n=function(e,t){return e.listeners(t).length},o=requireStreamBrowser(),i=requireSafeBuffer().Buffer,s=(void 0!==commonjsGlobal?commonjsGlobal:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){};var a=Object.create(requireUtil$1());a.inherits=requireInherits_browser();var c=requireUtil$2(),u=void 0;u=c&&c.debuglog?c.debuglog("stream"):function(){};var l,d=requireBufferList(),h=requireDestroy();a.inherits(m,o);var f=["error","close","destroy","pause","resume"];function p(e,r){e=e||{};var n=r instanceof(t=t||require_stream_duplex());this.objectMode=!!e.objectMode,n&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var o=e.highWaterMark,i=e.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=o||0===o?o:n&&(i||0===i)?i:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(l||(l=requireString_decoder().StringDecoder),this.decoder=new l(e.encoding),this.encoding=e.encoding)}function m(e){if(t=t||require_stream_duplex(),!(this instanceof m))return new m(e);this._readableState=new p(e,this),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),o.call(this)}function y(e,t,r,n,o){var a,c=e._readableState;null===t?(c.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,w(e)}(e,c)):(o||(a=function(e,t){var r;n=t,i.isBuffer(n)||n instanceof s||"string"==typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var n;return r}(c,t)),a?e.emit("error",a):c.objectMode||t&&t.length>0?("string"==typeof t||c.objectMode||Object.getPrototypeOf(t)===i.prototype||(t=function(e){return i.from(e)}(t)),n?c.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):g(e,c,t,!0):c.ended?e.emit("error",new Error("stream.push() after EOF")):(c.reading=!1,c.decoder&&!r?(t=c.decoder.write(t),c.objectMode||0!==t.length?g(e,c,t,!1):I(e,c)):g(e,c,t,!1))):n||(c.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(c)}function g(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&w(e)),I(e,t)}Object.defineProperty(m.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),m.prototype.destroy=h.destroy,m.prototype._undestroy=h.undestroy,m.prototype._destroy=function(e,t){this.push(null),t(e)},m.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=i.from(e,t),t=""),r=!0),y(this,e,t,!1,r)},m.prototype.unshift=function(e){return y(this,e,null,!0,!1)},m.prototype.isPaused=function(){return!1===this._readableState.flowing},m.prototype.setEncoding=function(e){return l||(l=requireString_decoder().StringDecoder),this._readableState.decoder=new l(e),this._readableState.encoding=e,this};var b=8388608;function _(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=b?e=b:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function w(t){var r=t._readableState;r.needReadable=!1,r.emittedReadable||(u("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?e.nextTick(v,t):v(t))}function v(e){u("emit readable"),e.emit("readable"),S(e)}function I(t,r){r.readingMore||(r.readingMore=!0,e.nextTick(k,t,r))}function k(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(u("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function T(e){u("readable nexttick read 0"),e.read(0)}function A(e,t){t.reading||(u("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),S(e),t.flowing&&!t.reading&&e.read(0)}function S(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function E(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var n;e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):n=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,n=1,o=r.data;e-=o.length;for(;r=r.next;){var i=r.data,s=e>i.length?i.length:e;if(s===i.length?o+=i:o+=i.slice(0,e),0===(e-=s)){s===i.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=i.slice(s));break}++n}return t.length-=n,o}(e,t):function(e,t){var r=i.allocUnsafe(e),n=t.head,o=1;n.data.copy(r),e-=n.data.length;for(;n=n.next;){var s=n.data,a=e>s.length?s.length:e;if(s.copy(r,r.length-e,0,a),0===(e-=a)){a===s.length?(++o,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=s.slice(a));break}++o}return t.length-=o,r}(e,t);return n}(e,t.buffer,t.decoder),r);var r}function P(t){var r=t._readableState;if(r.length>0)throw new Error('"endReadable()" called on non-empty stream');r.endEmitted||(r.ended=!0,e.nextTick(O,r,t))}function O(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function R(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}return m.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?P(this):w(this),null;if(0===(e=_(e,t))&&t.ended)return 0===t.length&&P(this),null;var n,o=t.needReadable;return u("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",o=!0),t.ended||t.reading?u("reading or ended",o=!1):o&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=_(r,t))),null===(n=e>0?E(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&P(this)),null!==n&&this.emit("data",n),n},m.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},m.prototype.pipe=function(t,o){var i=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1,u("pipe count=%d opts=%j",s.pipesCount,o);var a=(!o||!1!==o.end)&&t!==process$1.stdout&&t!==process$1.stderr?l:b;function c(e,r){u("onunpipe"),e===i&&r&&!1===r.hasUnpiped&&(r.hasUnpiped=!0,u("cleanup"),t.removeListener("close",y),t.removeListener("finish",g),t.removeListener("drain",d),t.removeListener("error",m),t.removeListener("unpipe",c),i.removeListener("end",l),i.removeListener("end",b),i.removeListener("data",p),h=!0,!s.awaitDrain||t._writableState&&!t._writableState.needDrain||d())}function l(){u("onend"),t.end()}s.endEmitted?e.nextTick(a):i.once("end",a),t.on("unpipe",c);var d=function(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&n(e,"data")&&(t.flowing=!0,S(e))}}(i);t.on("drain",d);var h=!1;var f=!1;function p(e){u("ondata"),f=!1,!1!==t.write(e)||f||((1===s.pipesCount&&s.pipes===t||s.pipesCount>1&&-1!==R(s.pipes,t))&&!h&&(u("false write response, pause",s.awaitDrain),s.awaitDrain++,f=!0),i.pause())}function m(e){u("onerror",e),b(),t.removeListener("error",m),0===n(t,"error")&&t.emit("error",e)}function y(){t.removeListener("finish",g),b()}function g(){u("onfinish"),t.removeListener("close",y),b()}function b(){u("unpipe"),i.unpipe(t)}return i.on("data",p),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?r(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}(t,"error",m),t.once("close",y),t.once("finish",g),t.emit("pipe",i),s.flowing||(u("pipe resume"),i.resume()),t},m.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,o=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;i<o;i++)n[i].emit("unpipe",this,{hasUnpiped:!1});return this}var s=R(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},m.prototype.on=function(t,r){var n=o.prototype.on.call(this,t,r);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&w(this):e.nextTick(T,this))}return n},m.prototype.addListener=m.prototype.on,m.prototype.resume=function(){var t=this._readableState;return t.flowing||(u("resume"),t.flowing=!0,function(t,r){r.resumeScheduled||(r.resumeScheduled=!0,e.nextTick(A,t,r))}(this,t)),this},m.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this},m.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var o in e.on("end",function(){if(u("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(o){(u("wrapped data"),r.decoder&&(o=r.decoder.write(o)),r.objectMode&&null==o)||(r.objectMode||o&&o.length)&&(t.push(o)||(n=!0,e.pause()))}),e)void 0===this[o]&&"function"==typeof e[o]&&(this[o]=function(t){return function(){return e[t].apply(e,arguments)}}(o));for(var i=0;i<f.length;i++)e.on(f[i],this.emit.bind(this,f[i]));return this._read=function(t){u("wrapped _read",t),n&&(n=!1,e.resume())},this},Object.defineProperty(m.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),m._fromList=E,_stream_readable}function require_stream_transform(){if(hasRequired_stream_transform)return _stream_transform;hasRequired_stream_transform=1,_stream_transform=n;var e=require_stream_duplex(),t=Object.create(requireUtil$1());function r(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var o=this._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}function n(t){if(!(this instanceof n))return new n(t);e.call(this,t),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",o)}function o(){var e=this;"function"==typeof this._flush?this._flush(function(t,r){i(e,t,r)}):i(this,null,null)}function i(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}return t.inherits=requireInherits_browser(),t.inherits(n,e),n.prototype.push=function(t,r){return this._transformState.needTransform=!1,e.prototype.push.call(this,t,r)},n.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},n.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var o=this._readableState;(n.needTransform||o.needReadable||o.length<o.highWaterMark)&&this._read(o.highWaterMark)}},n.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},n.prototype._destroy=function(t,r){var n=this;e.prototype._destroy.call(this,t,function(e){r(e),n.emit("close")})},_stream_transform}function require_stream_passthrough(){if(hasRequired_stream_passthrough)return _stream_passthrough;hasRequired_stream_passthrough=1,_stream_passthrough=r;var e=require_stream_transform(),t=Object.create(requireUtil$1());function r(t){if(!(this instanceof r))return new r(t);e.call(this,t)}return t.inherits=requireInherits_browser(),t.inherits(r,e),r.prototype._transform=function(e,t,r){r(null,e)},_stream_passthrough}function requireReadableBrowser(){return hasRequiredReadableBrowser||(hasRequiredReadableBrowser=1,e=readableBrowser,t=readableBrowser.exports,(t=e.exports=require_stream_readable()).Stream=t,t.Readable=t,t.Writable=require_stream_writable(),t.Duplex=require_stream_duplex(),t.Transform=require_stream_transform(),t.PassThrough=require_stream_passthrough()),readableBrowser.exports;var e,t}var sign$1={exports:{}},bn$9={exports:{}},bn$8=bn$9.exports,hasRequiredBn$4,browserifyRsa,hasRequiredBrowserifyRsa;function requireBn$4(){return hasRequiredBn$4||(hasRequiredBn$4=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var i;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$1().Buffer}catch(S){}function s(e,t){var n=e.charCodeAt(t);return n>=48&&n<=57?n-48:n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:void r(!1,"Invalid character in "+e)}function a(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,n,o){for(var i=0,s=0,a=Math.min(e.length,n),c=t;c<a;c++){var u=e.charCodeAt(c)-48;i*=o,s=u>=49?u-49+10:u>=17?u-17+10:u,r(u>=0&&s<o,"Invalid character"),i+=s}return i}function u(e,t){e.words=t.words,e.length=t.length,e.negative=t.negative,e.red=t.red}if(o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var o=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(o++,this.negative=1),o<e.length&&(16===t?this._parseHex(e,o,n):(this._parseBase(e,t,o),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var i,s,a=0;if("be"===n)for(o=e.length-1,i=0;o>=0;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===n)for(o=0,i=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this._strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,i=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;this._strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,o=1;o<=67108863;o*=t)n++;n--,o=o/t|0;for(var i=e.length-r,s=i%n,a=Math.min(i,i-s)+r,u=0,l=r;l<a;l+=n)u=c(e,l,l+n,t),this.imuln(o),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var d=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)d*=t;this.imuln(d),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this._strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype._move=function(e){u(e,this)},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=l}catch(S){o.prototype.inspect=l}else o.prototype.inspect=l;function l(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var o=0|e.words[0],i=0|t.words[0],s=o*i,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,d=67108863&c,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;l+=(s=(o=0|e.words[p])*(i=0|t.words[f])+d)/67108864|0,d=67108863&s}r.words[u]=0|d,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var o=0,i=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<o|i)).toString(16);i=a>>>24-o&16777215,(o+=2)>=26&&(o-=26,s--),n=0!==i||s!==this.length-1?d[6-c.length]+c+n:c+n}for(0!==i&&(n=i.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var u=h[e],l=f[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modrn(l).toString(e);n=(p=p.idivn(l)).isZero()?m+n:d[u-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16,2)},i&&(o.prototype.toBuffer=function(e,t){return this.toArrayLike(i,e,t)}),o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){this._strip();var o=this.byteLength(),i=n||Math.max(1,o);r(o<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,i);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,o),s},o.prototype._toArrayLikeLE=function(e,t){for(var r=0,n=0,o=0,i=0;o<this.length;o++){var s=this.words[o]<<i|n;e[r++]=255&s,r<e.length&&(e[r++]=s>>8&255),r<e.length&&(e[r++]=s>>16&255),6===i?(r<e.length&&(e[r++]=s>>24&255),n=0,i=0):(n=s>>>24,i+=2)}if(r<e.length)for(e[r++]=n;r<e.length;)e[r++]=0},o.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,n=0,o=0,i=0;o<this.length;o++){var s=this.words[o]<<i|n;e[r--]=255&s,r>=0&&(e[r--]=s>>8&255),r>=0&&(e[r--]=s>>16&255),6===i?(r>=0&&(e[r--]=s>>24&255),n=0,i=0):(n=s>>>24,i+=2)}if(r>=0)for(e[r--]=n;r>=0;)e[r--]=0},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},o.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},o.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this._strip()},o.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var o=0;o<t;o++)this.words[o]=67108863&~this.words[o];return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this._strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,o=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<o:this.words[n]&~(1<<o),this._strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var o=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+o,this.words[i]=67108863&t,o=t>>>26;for(;0!==o&&i<r.length;i++)t=(0|r.words[i])+o,this.words[i]=67108863&t,o=t>>>26;if(this.length=r.length,0!==o)this.words[this.length]=o,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,o=this.cmp(e);if(0===o)return this.negative=0,this.length=1,this.words[0]=0,this;o>0?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)i=(t=(0|r.words[s])-(0|n.words[s])+i)>>26,this.words[s]=67108863&t;for(;0!==i&&s<r.length;s++)i=(t=(0|r.words[s])+i)>>26,this.words[s]=67108863&t;if(0===i&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var m=function(e,t,r){var n,o,i,s=e.words,a=t.words,c=r.words,u=0,l=0|s[0],d=8191&l,h=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,y=0|s[2],g=8191&y,b=y>>>13,_=0|s[3],w=8191&_,v=_>>>13,I=0|s[4],k=8191&I,T=I>>>13,A=0|s[5],S=8191&A,E=A>>>13,P=0|s[6],O=8191&P,R=P>>>13,C=0|s[7],$=8191&C,N=C>>>13,M=0|s[8],x=8191&M,B=M>>>13,D=0|s[9],L=8191&D,F=D>>>13,j=0|a[0],U=8191&j,q=j>>>13,K=0|a[1],H=8191&K,G=K>>>13,z=0|a[2],V=8191&z,Z=z>>>13,W=0|a[3],J=8191&W,Y=W>>>13,Q=0|a[4],X=8191&Q,ee=Q>>>13,te=0|a[5],re=8191&te,ne=te>>>13,oe=0|a[6],ie=8191&oe,se=oe>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],de=8191&le,he=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(u+(n=Math.imul(d,U))|0)+((8191&(o=(o=Math.imul(d,q))+Math.imul(h,U)|0))<<13)|0;u=((i=Math.imul(h,q))+(o>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,U),o=(o=Math.imul(p,q))+Math.imul(m,U)|0,i=Math.imul(m,q);var ge=(u+(n=n+Math.imul(d,H)|0)|0)+((8191&(o=(o=o+Math.imul(d,G)|0)+Math.imul(h,H)|0))<<13)|0;u=((i=i+Math.imul(h,G)|0)+(o>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,U),o=(o=Math.imul(g,q))+Math.imul(b,U)|0,i=Math.imul(b,q),n=n+Math.imul(p,H)|0,o=(o=o+Math.imul(p,G)|0)+Math.imul(m,H)|0,i=i+Math.imul(m,G)|0;var be=(u+(n=n+Math.imul(d,V)|0)|0)+((8191&(o=(o=o+Math.imul(d,Z)|0)+Math.imul(h,V)|0))<<13)|0;u=((i=i+Math.imul(h,Z)|0)+(o>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,U),o=(o=Math.imul(w,q))+Math.imul(v,U)|0,i=Math.imul(v,q),n=n+Math.imul(g,H)|0,o=(o=o+Math.imul(g,G)|0)+Math.imul(b,H)|0,i=i+Math.imul(b,G)|0,n=n+Math.imul(p,V)|0,o=(o=o+Math.imul(p,Z)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,Z)|0;var _e=(u+(n=n+Math.imul(d,J)|0)|0)+((8191&(o=(o=o+Math.imul(d,Y)|0)+Math.imul(h,J)|0))<<13)|0;u=((i=i+Math.imul(h,Y)|0)+(o>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(k,U),o=(o=Math.imul(k,q))+Math.imul(T,U)|0,i=Math.imul(T,q),n=n+Math.imul(w,H)|0,o=(o=o+Math.imul(w,G)|0)+Math.imul(v,H)|0,i=i+Math.imul(v,G)|0,n=n+Math.imul(g,V)|0,o=(o=o+Math.imul(g,Z)|0)+Math.imul(b,V)|0,i=i+Math.imul(b,Z)|0,n=n+Math.imul(p,J)|0,o=(o=o+Math.imul(p,Y)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,Y)|0;var we=(u+(n=n+Math.imul(d,X)|0)|0)+((8191&(o=(o=o+Math.imul(d,ee)|0)+Math.imul(h,X)|0))<<13)|0;u=((i=i+Math.imul(h,ee)|0)+(o>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(S,U),o=(o=Math.imul(S,q))+Math.imul(E,U)|0,i=Math.imul(E,q),n=n+Math.imul(k,H)|0,o=(o=o+Math.imul(k,G)|0)+Math.imul(T,H)|0,i=i+Math.imul(T,G)|0,n=n+Math.imul(w,V)|0,o=(o=o+Math.imul(w,Z)|0)+Math.imul(v,V)|0,i=i+Math.imul(v,Z)|0,n=n+Math.imul(g,J)|0,o=(o=o+Math.imul(g,Y)|0)+Math.imul(b,J)|0,i=i+Math.imul(b,Y)|0,n=n+Math.imul(p,X)|0,o=(o=o+Math.imul(p,ee)|0)+Math.imul(m,X)|0,i=i+Math.imul(m,ee)|0;var ve=(u+(n=n+Math.imul(d,re)|0)|0)+((8191&(o=(o=o+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;u=((i=i+Math.imul(h,ne)|0)+(o>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(O,U),o=(o=Math.imul(O,q))+Math.imul(R,U)|0,i=Math.imul(R,q),n=n+Math.imul(S,H)|0,o=(o=o+Math.imul(S,G)|0)+Math.imul(E,H)|0,i=i+Math.imul(E,G)|0,n=n+Math.imul(k,V)|0,o=(o=o+Math.imul(k,Z)|0)+Math.imul(T,V)|0,i=i+Math.imul(T,Z)|0,n=n+Math.imul(w,J)|0,o=(o=o+Math.imul(w,Y)|0)+Math.imul(v,J)|0,i=i+Math.imul(v,Y)|0,n=n+Math.imul(g,X)|0,o=(o=o+Math.imul(g,ee)|0)+Math.imul(b,X)|0,i=i+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,o=(o=o+Math.imul(p,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var Ie=(u+(n=n+Math.imul(d,ie)|0)|0)+((8191&(o=(o=o+Math.imul(d,se)|0)+Math.imul(h,ie)|0))<<13)|0;u=((i=i+Math.imul(h,se)|0)+(o>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,U),o=(o=Math.imul($,q))+Math.imul(N,U)|0,i=Math.imul(N,q),n=n+Math.imul(O,H)|0,o=(o=o+Math.imul(O,G)|0)+Math.imul(R,H)|0,i=i+Math.imul(R,G)|0,n=n+Math.imul(S,V)|0,o=(o=o+Math.imul(S,Z)|0)+Math.imul(E,V)|0,i=i+Math.imul(E,Z)|0,n=n+Math.imul(k,J)|0,o=(o=o+Math.imul(k,Y)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,Y)|0,n=n+Math.imul(w,X)|0,o=(o=o+Math.imul(w,ee)|0)+Math.imul(v,X)|0,i=i+Math.imul(v,ee)|0,n=n+Math.imul(g,re)|0,o=(o=o+Math.imul(g,ne)|0)+Math.imul(b,re)|0,i=i+Math.imul(b,ne)|0,n=n+Math.imul(p,ie)|0,o=(o=o+Math.imul(p,se)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,se)|0;var ke=(u+(n=n+Math.imul(d,ce)|0)|0)+((8191&(o=(o=o+Math.imul(d,ue)|0)+Math.imul(h,ce)|0))<<13)|0;u=((i=i+Math.imul(h,ue)|0)+(o>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(x,U),o=(o=Math.imul(x,q))+Math.imul(B,U)|0,i=Math.imul(B,q),n=n+Math.imul($,H)|0,o=(o=o+Math.imul($,G)|0)+Math.imul(N,H)|0,i=i+Math.imul(N,G)|0,n=n+Math.imul(O,V)|0,o=(o=o+Math.imul(O,Z)|0)+Math.imul(R,V)|0,i=i+Math.imul(R,Z)|0,n=n+Math.imul(S,J)|0,o=(o=o+Math.imul(S,Y)|0)+Math.imul(E,J)|0,i=i+Math.imul(E,Y)|0,n=n+Math.imul(k,X)|0,o=(o=o+Math.imul(k,ee)|0)+Math.imul(T,X)|0,i=i+Math.imul(T,ee)|0,n=n+Math.imul(w,re)|0,o=(o=o+Math.imul(w,ne)|0)+Math.imul(v,re)|0,i=i+Math.imul(v,ne)|0,n=n+Math.imul(g,ie)|0,o=(o=o+Math.imul(g,se)|0)+Math.imul(b,ie)|0,i=i+Math.imul(b,se)|0,n=n+Math.imul(p,ce)|0,o=(o=o+Math.imul(p,ue)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,ue)|0;var Te=(u+(n=n+Math.imul(d,de)|0)|0)+((8191&(o=(o=o+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;u=((i=i+Math.imul(h,he)|0)+(o>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(L,U),o=(o=Math.imul(L,q))+Math.imul(F,U)|0,i=Math.imul(F,q),n=n+Math.imul(x,H)|0,o=(o=o+Math.imul(x,G)|0)+Math.imul(B,H)|0,i=i+Math.imul(B,G)|0,n=n+Math.imul($,V)|0,o=(o=o+Math.imul($,Z)|0)+Math.imul(N,V)|0,i=i+Math.imul(N,Z)|0,n=n+Math.imul(O,J)|0,o=(o=o+Math.imul(O,Y)|0)+Math.imul(R,J)|0,i=i+Math.imul(R,Y)|0,n=n+Math.imul(S,X)|0,o=(o=o+Math.imul(S,ee)|0)+Math.imul(E,X)|0,i=i+Math.imul(E,ee)|0,n=n+Math.imul(k,re)|0,o=(o=o+Math.imul(k,ne)|0)+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,n=n+Math.imul(w,ie)|0,o=(o=o+Math.imul(w,se)|0)+Math.imul(v,ie)|0,i=i+Math.imul(v,se)|0,n=n+Math.imul(g,ce)|0,o=(o=o+Math.imul(g,ue)|0)+Math.imul(b,ce)|0,i=i+Math.imul(b,ue)|0,n=n+Math.imul(p,de)|0,o=(o=o+Math.imul(p,he)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,he)|0;var Ae=(u+(n=n+Math.imul(d,pe)|0)|0)+((8191&(o=(o=o+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;u=((i=i+Math.imul(h,me)|0)+(o>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(L,H),o=(o=Math.imul(L,G))+Math.imul(F,H)|0,i=Math.imul(F,G),n=n+Math.imul(x,V)|0,o=(o=o+Math.imul(x,Z)|0)+Math.imul(B,V)|0,i=i+Math.imul(B,Z)|0,n=n+Math.imul($,J)|0,o=(o=o+Math.imul($,Y)|0)+Math.imul(N,J)|0,i=i+Math.imul(N,Y)|0,n=n+Math.imul(O,X)|0,o=(o=o+Math.imul(O,ee)|0)+Math.imul(R,X)|0,i=i+Math.imul(R,ee)|0,n=n+Math.imul(S,re)|0,o=(o=o+Math.imul(S,ne)|0)+Math.imul(E,re)|0,i=i+Math.imul(E,ne)|0,n=n+Math.imul(k,ie)|0,o=(o=o+Math.imul(k,se)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,se)|0,n=n+Math.imul(w,ce)|0,o=(o=o+Math.imul(w,ue)|0)+Math.imul(v,ce)|0,i=i+Math.imul(v,ue)|0,n=n+Math.imul(g,de)|0,o=(o=o+Math.imul(g,he)|0)+Math.imul(b,de)|0,i=i+Math.imul(b,he)|0;var Se=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(o=(o=o+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((i=i+Math.imul(m,me)|0)+(o>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,V),o=(o=Math.imul(L,Z))+Math.imul(F,V)|0,i=Math.imul(F,Z),n=n+Math.imul(x,J)|0,o=(o=o+Math.imul(x,Y)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,Y)|0,n=n+Math.imul($,X)|0,o=(o=o+Math.imul($,ee)|0)+Math.imul(N,X)|0,i=i+Math.imul(N,ee)|0,n=n+Math.imul(O,re)|0,o=(o=o+Math.imul(O,ne)|0)+Math.imul(R,re)|0,i=i+Math.imul(R,ne)|0,n=n+Math.imul(S,ie)|0,o=(o=o+Math.imul(S,se)|0)+Math.imul(E,ie)|0,i=i+Math.imul(E,se)|0,n=n+Math.imul(k,ce)|0,o=(o=o+Math.imul(k,ue)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,ue)|0,n=n+Math.imul(w,de)|0,o=(o=o+Math.imul(w,he)|0)+Math.imul(v,de)|0,i=i+Math.imul(v,he)|0;var Ee=(u+(n=n+Math.imul(g,pe)|0)|0)+((8191&(o=(o=o+Math.imul(g,me)|0)+Math.imul(b,pe)|0))<<13)|0;u=((i=i+Math.imul(b,me)|0)+(o>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,J),o=(o=Math.imul(L,Y))+Math.imul(F,J)|0,i=Math.imul(F,Y),n=n+Math.imul(x,X)|0,o=(o=o+Math.imul(x,ee)|0)+Math.imul(B,X)|0,i=i+Math.imul(B,ee)|0,n=n+Math.imul($,re)|0,o=(o=o+Math.imul($,ne)|0)+Math.imul(N,re)|0,i=i+Math.imul(N,ne)|0,n=n+Math.imul(O,ie)|0,o=(o=o+Math.imul(O,se)|0)+Math.imul(R,ie)|0,i=i+Math.imul(R,se)|0,n=n+Math.imul(S,ce)|0,o=(o=o+Math.imul(S,ue)|0)+Math.imul(E,ce)|0,i=i+Math.imul(E,ue)|0,n=n+Math.imul(k,de)|0,o=(o=o+Math.imul(k,he)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,he)|0;var Pe=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(o=(o=o+Math.imul(w,me)|0)+Math.imul(v,pe)|0))<<13)|0;u=((i=i+Math.imul(v,me)|0)+(o>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(L,X),o=(o=Math.imul(L,ee))+Math.imul(F,X)|0,i=Math.imul(F,ee),n=n+Math.imul(x,re)|0,o=(o=o+Math.imul(x,ne)|0)+Math.imul(B,re)|0,i=i+Math.imul(B,ne)|0,n=n+Math.imul($,ie)|0,o=(o=o+Math.imul($,se)|0)+Math.imul(N,ie)|0,i=i+Math.imul(N,se)|0,n=n+Math.imul(O,ce)|0,o=(o=o+Math.imul(O,ue)|0)+Math.imul(R,ce)|0,i=i+Math.imul(R,ue)|0,n=n+Math.imul(S,de)|0,o=(o=o+Math.imul(S,he)|0)+Math.imul(E,de)|0,i=i+Math.imul(E,he)|0;var Oe=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(o=(o=o+Math.imul(k,me)|0)+Math.imul(T,pe)|0))<<13)|0;u=((i=i+Math.imul(T,me)|0)+(o>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(L,re),o=(o=Math.imul(L,ne))+Math.imul(F,re)|0,i=Math.imul(F,ne),n=n+Math.imul(x,ie)|0,o=(o=o+Math.imul(x,se)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,se)|0,n=n+Math.imul($,ce)|0,o=(o=o+Math.imul($,ue)|0)+Math.imul(N,ce)|0,i=i+Math.imul(N,ue)|0,n=n+Math.imul(O,de)|0,o=(o=o+Math.imul(O,he)|0)+Math.imul(R,de)|0,i=i+Math.imul(R,he)|0;var Re=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(o=(o=o+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;u=((i=i+Math.imul(E,me)|0)+(o>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(L,ie),o=(o=Math.imul(L,se))+Math.imul(F,ie)|0,i=Math.imul(F,se),n=n+Math.imul(x,ce)|0,o=(o=o+Math.imul(x,ue)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,ue)|0,n=n+Math.imul($,de)|0,o=(o=o+Math.imul($,he)|0)+Math.imul(N,de)|0,i=i+Math.imul(N,he)|0;var Ce=(u+(n=n+Math.imul(O,pe)|0)|0)+((8191&(o=(o=o+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;u=((i=i+Math.imul(R,me)|0)+(o>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(L,ce),o=(o=Math.imul(L,ue))+Math.imul(F,ce)|0,i=Math.imul(F,ue),n=n+Math.imul(x,de)|0,o=(o=o+Math.imul(x,he)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,he)|0;var $e=(u+(n=n+Math.imul($,pe)|0)|0)+((8191&(o=(o=o+Math.imul($,me)|0)+Math.imul(N,pe)|0))<<13)|0;u=((i=i+Math.imul(N,me)|0)+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,n=Math.imul(L,de),o=(o=Math.imul(L,he))+Math.imul(F,de)|0,i=Math.imul(F,he);var Ne=(u+(n=n+Math.imul(x,pe)|0)|0)+((8191&(o=(o=o+Math.imul(x,me)|0)+Math.imul(B,pe)|0))<<13)|0;u=((i=i+Math.imul(B,me)|0)+(o>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Me=(u+(n=Math.imul(L,pe))|0)+((8191&(o=(o=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return u=((i=Math.imul(F,me))+(o>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=ye,c[1]=ge,c[2]=be,c[3]=_e,c[4]=we,c[5]=ve,c[6]=Ie,c[7]=ke,c[8]=Te,c[9]=Ae,c[10]=Se,c[11]=Ee,c[12]=Pe,c[13]=Oe,c[14]=Re,c[15]=Ce,c[16]=$e,c[17]=Ne,c[18]=Me,0!==u&&(c[19]=u,r.length++),r};function y(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,o=0,i=0;i<r.length-1;i++){var s=o;o=0;for(var a=67108863&n,c=Math.min(i,t.length-1),u=Math.max(0,i-e.length+1);u<=c;u++){var l=i-u,d=(0|e.words[l])*(0|t.words[u]),h=67108863&d;a=67108863&(h=h+a|0),o+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[i]=a,n=s,s=o}return 0!==n?r.words[i]=n:r.length--,r._strip()}function g(e,t,r){return y(e,t,r)}Math.imul||(m=p),o.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?m(this,e,t):r<63?p(this,e,t):r<1024?y(this,e,t):g(this,e,t)},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),g(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){var t=e<0;t&&(e=-e),r("number"==typeof e),r(e<67108864);for(var n=0,o=0;o<this.length;o++){var i=(0|this.words[o])*e,s=(67108863&i)+(67108863&n);n>>=26,n+=i/67108864|0,n+=s>>>26,this.words[o]=67108863&s}return 0!==n&&(this.words[o]=n,this.length++),this.length=0===e?1:this.length,t?this.ineg():this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=e.words[n]>>>o&1}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,o=(e-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&i,c=(0|this.words[t])-a<<n;this.words[t]=c|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==o){for(t=this.length-1;t>=0;t--)this.words[t+o]=this.words[t];for(t=0;t<o;t++)this.words[t]=0;this.length+=o}return this._strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var o;r("number"==typeof e&&e>=0),o=t?(t-t%26)/26:0;var i=e%26,s=Math.min((e-i)/26,this.length),a=67108863^67108863>>>i<<i,c=n;if(o-=s,o=Math.max(0,o),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=o);u--){var d=0|this.words[u];this.words[u]=l<<26-i|d>>>i,l=d&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,o=1<<t;return!(this.length<=n||!(this.words[n]&o))},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var o=67108863^67108863>>>t<<t;this.words[this.length-1]&=o}return this._strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var o,i,s=e.length+n;this._expand(s);var a=0;for(o=0;o<e.length;o++){i=(0|this.words[o+n])+a;var c=(0|e.words[o])*t;a=((i-=67108863&c)>>26)-(c/67108864|0),this.words[o+n]=67108863&i}for(;o<this.length-n;o++)a=(i=(0|this.words[o+n])+a)>>26,this.words[o+n]=67108863&i;if(0===a)return this._strip();for(r(-1===a),a=0,o=0;o<this.length;o++)a=(i=-(0|this.words[o])+a)>>26,this.words[o]=67108863&i;return this.negative=1,this._strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!=(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(i,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);a&&(a.words[d]=h)}return a&&a._strip(),n._strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modrn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),o=e.andln(1),i=r.cmp(n);return i<0||1===o&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modrn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=(1<<26)%e,o=0,i=this.length-1;i>=0;i--)o=(n*o+(0|this.words[i]))%e;return t?-o:o},o.prototype.modn=function(e){return this.modrn(e)},o.prototype.idivn=function(e){var t=e<0;t&&(e=-e),r(e<=67108863);for(var n=0,o=this.length-1;o>=0;o--){var i=(0|this.words[o])+67108864*n;this.words[o]=i/e|0,n=i%e}return this._strip(),t?this.ineg():this},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var l=n.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0===(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(d)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(c)):(n.isub(t),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:n.iushln(u)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,l=1;0===(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0===(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var o=t.cmp(r);if(o<0){var i=t;t=r,r=i}else if(0===o||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return!(1&this.words[0])},o.prototype.isOdd=function(){return!(1&~this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,o=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var i=o,s=n;0!==i&&s<this.length;s++){var a=0|this.words[s];i=(a+=i)>>>26,a&=67108863,this.words[s]=a}return 0!==i&&(this.words[s]=i,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this._strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var o=0|this.words[0];t=o===e?0:o<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],o=0|e.words[r];if(n!==o){n<o?t=-1:n>o&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new T(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var b={k256:null,p224:null,p192:null,p25519:null};function _(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){_.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function v(){_.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function I(){_.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function k(){_.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function T(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function A(e){T.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}_.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},_.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},_.prototype.split=function(e,t){e.iushrn(this.n,0,t)},_.prototype.imulK=function(e){return e.imul(this.k)},n(w,_),w.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),o=0;o<n;o++)t.words[o]=e.words[o];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=i&r,o=10;o<e.length;o++){var s=0|e.words[o];e.words[o-10]=(s&r)<<4|i>>>22,i=s}i>>>=22,e.words[o-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(v,_),n(I,_),n(k,_),k.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,o=67108863&n;n>>>=26,e.words[r]=o,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(b[e])return b[e];var t;if("k256"===e)t=new w;else if("p224"===e)t=new v;else if("p192"===e)t=new I;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new k}return b[e]=t,t},T.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},T.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},T.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(u(e,e.umod(this.m)._forceRed(this)),e)},T.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},T.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},T.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},T.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},T.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},T.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},T.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},T.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},T.prototype.isqr=function(e){return this.imul(e,e.clone())},T.prototype.sqr=function(e){return this.mul(e,e)},T.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var d=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,y=0;0!==m.cmp(a);y++)m=m.redSqr();r(y<p);var g=this.pow(d,new o(1).iushln(p-y-1));h=h.redMul(g),d=g.redSqr(),f=f.redMul(d),p=y}return h},T.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},T.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],l=c-1;l>=0;l--){var d=u>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==d||0!==s?(s<<=1,s|=d,(4===++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},T.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},T.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new A(e)},n(A,T),A.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},A.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},A.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),i=o;return o.cmp(this.m)>=0?i=o.isub(this.m):o.cmpn(0)<0&&(i=o.iadd(this.m)),i._forceRed(this)},A.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},A.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$9,bn$8)),bn$9.exports}function requireBrowserifyRsa(){if(hasRequiredBrowserifyRsa)return browserifyRsa;hasRequiredBrowserifyRsa=1;var e=requireBn$4(),t=requireBrowser$c(),r=requireSafeBuffer$1().Buffer;function n(r){var n,o=r.modulus.byteLength();do{n=new e(t(o))}while(n.cmp(r.modulus)>=0||!n.umod(r.prime1)||!n.umod(r.prime2));return n}function o(t,o){var i=function(t){var r=n(t);return{blinder:r.toRed(e.mont(t.modulus)).redPow(new e(t.publicExponent)).fromRed(),unblinder:r.invm(t.modulus)}}(o),s=o.modulus.byteLength(),a=new e(t).mul(i.blinder).umod(o.modulus),c=a.toRed(e.mont(o.prime1)),u=a.toRed(e.mont(o.prime2)),l=o.coefficient,d=o.prime1,h=o.prime2,f=c.redPow(o.exponent1).fromRed(),p=u.redPow(o.exponent2).fromRed(),m=f.isub(p).imul(l).umod(d).imul(h);return p.iadd(m).imul(i.unblinder).umod(o.modulus).toArrayLike(r,"be",s)}return o.getr=n,browserifyRsa=o}var elliptic={};const version$8="6.6.1",require$$0={version:version$8};var utils$4={},bn$7={exports:{}},bn$6=bn$7.exports,hasRequiredBn$3;function requireBn$3(){return hasRequiredBn$3||(hasRequiredBn$3=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var i;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$1().Buffer}catch(T){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,n){for(var o=0,i=Math.min(e.length,r),s=t;s<i;s++){var a=e.charCodeAt(s)-48;o*=n,o+=a>=49?a-49+10:a>=17?a-17+10:a}return o}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var o=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(o++,this.negative=1),o<e.length&&(16===t?this._parseHex(e,o,n):(this._parseBase(e,t,o),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var i,s,a=0;if("be"===n)for(o=e.length-1,i=0;o>=0;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===n)for(o=0,i=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this.strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,i=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;this.strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,o=1;o<=67108863;o*=t)n++;n--,o=o/t|0;for(var i=e.length-r,s=i%n,a=Math.min(i,i-s)+r,u=0,l=r;l<a;l+=n)u=c(e,l,l+n,t),this.imuln(o),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var d=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)d*=t;this.imuln(d),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var o=0|e.words[0],i=0|t.words[0],s=o*i,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,d=67108863&c,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;l+=(s=(o=0|e.words[p])*(i=0|t.words[f])+d)/67108864|0,d=67108863&s}r.words[u]=0|d,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var o=0,i=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<o|i)).toString(16);i=a>>>24-o&16777215,(o+=2)>=26&&(o-=26,s--),n=0!==i||s!==this.length-1?u[6-c.length]+c+n:c+n}for(0!==i&&(n=i.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=l[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:u[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==i),this.toArrayLike(i,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var o=this.byteLength(),i=n||Math.max(1,o);r(o<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===t,u=new e(i),l=this.clone();if(c){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[a]=s;for(;a<i;a++)u[a]=0}else{for(a=0;a<i-o;a++)u[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[i-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var o=0;o<t;o++)this.words[o]=67108863&~this.words[o];return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,o=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<o:this.words[n]&~(1<<o),this.strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var o=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+o,this.words[i]=67108863&t,o=t>>>26;for(;0!==o&&i<r.length;i++)t=(0|r.words[i])+o,this.words[i]=67108863&t,o=t>>>26;if(this.length=r.length,0!==o)this.words[this.length]=o,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,o=this.cmp(e);if(0===o)return this.negative=0,this.length=1,this.words[0]=0,this;o>0?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)i=(t=(0|r.words[s])-(0|n.words[s])+i)>>26,this.words[s]=67108863&t;for(;0!==i&&s<r.length;s++)i=(t=(0|r.words[s])+i)>>26,this.words[s]=67108863&t;if(0===i&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var n,o,i,s=e.words,a=t.words,c=r.words,u=0,l=0|s[0],d=8191&l,h=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,y=0|s[2],g=8191&y,b=y>>>13,_=0|s[3],w=8191&_,v=_>>>13,I=0|s[4],k=8191&I,T=I>>>13,A=0|s[5],S=8191&A,E=A>>>13,P=0|s[6],O=8191&P,R=P>>>13,C=0|s[7],$=8191&C,N=C>>>13,M=0|s[8],x=8191&M,B=M>>>13,D=0|s[9],L=8191&D,F=D>>>13,j=0|a[0],U=8191&j,q=j>>>13,K=0|a[1],H=8191&K,G=K>>>13,z=0|a[2],V=8191&z,Z=z>>>13,W=0|a[3],J=8191&W,Y=W>>>13,Q=0|a[4],X=8191&Q,ee=Q>>>13,te=0|a[5],re=8191&te,ne=te>>>13,oe=0|a[6],ie=8191&oe,se=oe>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],de=8191&le,he=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(u+(n=Math.imul(d,U))|0)+((8191&(o=(o=Math.imul(d,q))+Math.imul(h,U)|0))<<13)|0;u=((i=Math.imul(h,q))+(o>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,U),o=(o=Math.imul(p,q))+Math.imul(m,U)|0,i=Math.imul(m,q);var ge=(u+(n=n+Math.imul(d,H)|0)|0)+((8191&(o=(o=o+Math.imul(d,G)|0)+Math.imul(h,H)|0))<<13)|0;u=((i=i+Math.imul(h,G)|0)+(o>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,U),o=(o=Math.imul(g,q))+Math.imul(b,U)|0,i=Math.imul(b,q),n=n+Math.imul(p,H)|0,o=(o=o+Math.imul(p,G)|0)+Math.imul(m,H)|0,i=i+Math.imul(m,G)|0;var be=(u+(n=n+Math.imul(d,V)|0)|0)+((8191&(o=(o=o+Math.imul(d,Z)|0)+Math.imul(h,V)|0))<<13)|0;u=((i=i+Math.imul(h,Z)|0)+(o>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,U),o=(o=Math.imul(w,q))+Math.imul(v,U)|0,i=Math.imul(v,q),n=n+Math.imul(g,H)|0,o=(o=o+Math.imul(g,G)|0)+Math.imul(b,H)|0,i=i+Math.imul(b,G)|0,n=n+Math.imul(p,V)|0,o=(o=o+Math.imul(p,Z)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,Z)|0;var _e=(u+(n=n+Math.imul(d,J)|0)|0)+((8191&(o=(o=o+Math.imul(d,Y)|0)+Math.imul(h,J)|0))<<13)|0;u=((i=i+Math.imul(h,Y)|0)+(o>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(k,U),o=(o=Math.imul(k,q))+Math.imul(T,U)|0,i=Math.imul(T,q),n=n+Math.imul(w,H)|0,o=(o=o+Math.imul(w,G)|0)+Math.imul(v,H)|0,i=i+Math.imul(v,G)|0,n=n+Math.imul(g,V)|0,o=(o=o+Math.imul(g,Z)|0)+Math.imul(b,V)|0,i=i+Math.imul(b,Z)|0,n=n+Math.imul(p,J)|0,o=(o=o+Math.imul(p,Y)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,Y)|0;var we=(u+(n=n+Math.imul(d,X)|0)|0)+((8191&(o=(o=o+Math.imul(d,ee)|0)+Math.imul(h,X)|0))<<13)|0;u=((i=i+Math.imul(h,ee)|0)+(o>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(S,U),o=(o=Math.imul(S,q))+Math.imul(E,U)|0,i=Math.imul(E,q),n=n+Math.imul(k,H)|0,o=(o=o+Math.imul(k,G)|0)+Math.imul(T,H)|0,i=i+Math.imul(T,G)|0,n=n+Math.imul(w,V)|0,o=(o=o+Math.imul(w,Z)|0)+Math.imul(v,V)|0,i=i+Math.imul(v,Z)|0,n=n+Math.imul(g,J)|0,o=(o=o+Math.imul(g,Y)|0)+Math.imul(b,J)|0,i=i+Math.imul(b,Y)|0,n=n+Math.imul(p,X)|0,o=(o=o+Math.imul(p,ee)|0)+Math.imul(m,X)|0,i=i+Math.imul(m,ee)|0;var ve=(u+(n=n+Math.imul(d,re)|0)|0)+((8191&(o=(o=o+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;u=((i=i+Math.imul(h,ne)|0)+(o>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(O,U),o=(o=Math.imul(O,q))+Math.imul(R,U)|0,i=Math.imul(R,q),n=n+Math.imul(S,H)|0,o=(o=o+Math.imul(S,G)|0)+Math.imul(E,H)|0,i=i+Math.imul(E,G)|0,n=n+Math.imul(k,V)|0,o=(o=o+Math.imul(k,Z)|0)+Math.imul(T,V)|0,i=i+Math.imul(T,Z)|0,n=n+Math.imul(w,J)|0,o=(o=o+Math.imul(w,Y)|0)+Math.imul(v,J)|0,i=i+Math.imul(v,Y)|0,n=n+Math.imul(g,X)|0,o=(o=o+Math.imul(g,ee)|0)+Math.imul(b,X)|0,i=i+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,o=(o=o+Math.imul(p,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var Ie=(u+(n=n+Math.imul(d,ie)|0)|0)+((8191&(o=(o=o+Math.imul(d,se)|0)+Math.imul(h,ie)|0))<<13)|0;u=((i=i+Math.imul(h,se)|0)+(o>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,U),o=(o=Math.imul($,q))+Math.imul(N,U)|0,i=Math.imul(N,q),n=n+Math.imul(O,H)|0,o=(o=o+Math.imul(O,G)|0)+Math.imul(R,H)|0,i=i+Math.imul(R,G)|0,n=n+Math.imul(S,V)|0,o=(o=o+Math.imul(S,Z)|0)+Math.imul(E,V)|0,i=i+Math.imul(E,Z)|0,n=n+Math.imul(k,J)|0,o=(o=o+Math.imul(k,Y)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,Y)|0,n=n+Math.imul(w,X)|0,o=(o=o+Math.imul(w,ee)|0)+Math.imul(v,X)|0,i=i+Math.imul(v,ee)|0,n=n+Math.imul(g,re)|0,o=(o=o+Math.imul(g,ne)|0)+Math.imul(b,re)|0,i=i+Math.imul(b,ne)|0,n=n+Math.imul(p,ie)|0,o=(o=o+Math.imul(p,se)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,se)|0;var ke=(u+(n=n+Math.imul(d,ce)|0)|0)+((8191&(o=(o=o+Math.imul(d,ue)|0)+Math.imul(h,ce)|0))<<13)|0;u=((i=i+Math.imul(h,ue)|0)+(o>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(x,U),o=(o=Math.imul(x,q))+Math.imul(B,U)|0,i=Math.imul(B,q),n=n+Math.imul($,H)|0,o=(o=o+Math.imul($,G)|0)+Math.imul(N,H)|0,i=i+Math.imul(N,G)|0,n=n+Math.imul(O,V)|0,o=(o=o+Math.imul(O,Z)|0)+Math.imul(R,V)|0,i=i+Math.imul(R,Z)|0,n=n+Math.imul(S,J)|0,o=(o=o+Math.imul(S,Y)|0)+Math.imul(E,J)|0,i=i+Math.imul(E,Y)|0,n=n+Math.imul(k,X)|0,o=(o=o+Math.imul(k,ee)|0)+Math.imul(T,X)|0,i=i+Math.imul(T,ee)|0,n=n+Math.imul(w,re)|0,o=(o=o+Math.imul(w,ne)|0)+Math.imul(v,re)|0,i=i+Math.imul(v,ne)|0,n=n+Math.imul(g,ie)|0,o=(o=o+Math.imul(g,se)|0)+Math.imul(b,ie)|0,i=i+Math.imul(b,se)|0,n=n+Math.imul(p,ce)|0,o=(o=o+Math.imul(p,ue)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,ue)|0;var Te=(u+(n=n+Math.imul(d,de)|0)|0)+((8191&(o=(o=o+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;u=((i=i+Math.imul(h,he)|0)+(o>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(L,U),o=(o=Math.imul(L,q))+Math.imul(F,U)|0,i=Math.imul(F,q),n=n+Math.imul(x,H)|0,o=(o=o+Math.imul(x,G)|0)+Math.imul(B,H)|0,i=i+Math.imul(B,G)|0,n=n+Math.imul($,V)|0,o=(o=o+Math.imul($,Z)|0)+Math.imul(N,V)|0,i=i+Math.imul(N,Z)|0,n=n+Math.imul(O,J)|0,o=(o=o+Math.imul(O,Y)|0)+Math.imul(R,J)|0,i=i+Math.imul(R,Y)|0,n=n+Math.imul(S,X)|0,o=(o=o+Math.imul(S,ee)|0)+Math.imul(E,X)|0,i=i+Math.imul(E,ee)|0,n=n+Math.imul(k,re)|0,o=(o=o+Math.imul(k,ne)|0)+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,n=n+Math.imul(w,ie)|0,o=(o=o+Math.imul(w,se)|0)+Math.imul(v,ie)|0,i=i+Math.imul(v,se)|0,n=n+Math.imul(g,ce)|0,o=(o=o+Math.imul(g,ue)|0)+Math.imul(b,ce)|0,i=i+Math.imul(b,ue)|0,n=n+Math.imul(p,de)|0,o=(o=o+Math.imul(p,he)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,he)|0;var Ae=(u+(n=n+Math.imul(d,pe)|0)|0)+((8191&(o=(o=o+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;u=((i=i+Math.imul(h,me)|0)+(o>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(L,H),o=(o=Math.imul(L,G))+Math.imul(F,H)|0,i=Math.imul(F,G),n=n+Math.imul(x,V)|0,o=(o=o+Math.imul(x,Z)|0)+Math.imul(B,V)|0,i=i+Math.imul(B,Z)|0,n=n+Math.imul($,J)|0,o=(o=o+Math.imul($,Y)|0)+Math.imul(N,J)|0,i=i+Math.imul(N,Y)|0,n=n+Math.imul(O,X)|0,o=(o=o+Math.imul(O,ee)|0)+Math.imul(R,X)|0,i=i+Math.imul(R,ee)|0,n=n+Math.imul(S,re)|0,o=(o=o+Math.imul(S,ne)|0)+Math.imul(E,re)|0,i=i+Math.imul(E,ne)|0,n=n+Math.imul(k,ie)|0,o=(o=o+Math.imul(k,se)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,se)|0,n=n+Math.imul(w,ce)|0,o=(o=o+Math.imul(w,ue)|0)+Math.imul(v,ce)|0,i=i+Math.imul(v,ue)|0,n=n+Math.imul(g,de)|0,o=(o=o+Math.imul(g,he)|0)+Math.imul(b,de)|0,i=i+Math.imul(b,he)|0;var Se=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(o=(o=o+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((i=i+Math.imul(m,me)|0)+(o>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,V),o=(o=Math.imul(L,Z))+Math.imul(F,V)|0,i=Math.imul(F,Z),n=n+Math.imul(x,J)|0,o=(o=o+Math.imul(x,Y)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,Y)|0,n=n+Math.imul($,X)|0,o=(o=o+Math.imul($,ee)|0)+Math.imul(N,X)|0,i=i+Math.imul(N,ee)|0,n=n+Math.imul(O,re)|0,o=(o=o+Math.imul(O,ne)|0)+Math.imul(R,re)|0,i=i+Math.imul(R,ne)|0,n=n+Math.imul(S,ie)|0,o=(o=o+Math.imul(S,se)|0)+Math.imul(E,ie)|0,i=i+Math.imul(E,se)|0,n=n+Math.imul(k,ce)|0,o=(o=o+Math.imul(k,ue)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,ue)|0,n=n+Math.imul(w,de)|0,o=(o=o+Math.imul(w,he)|0)+Math.imul(v,de)|0,i=i+Math.imul(v,he)|0;var Ee=(u+(n=n+Math.imul(g,pe)|0)|0)+((8191&(o=(o=o+Math.imul(g,me)|0)+Math.imul(b,pe)|0))<<13)|0;u=((i=i+Math.imul(b,me)|0)+(o>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,J),o=(o=Math.imul(L,Y))+Math.imul(F,J)|0,i=Math.imul(F,Y),n=n+Math.imul(x,X)|0,o=(o=o+Math.imul(x,ee)|0)+Math.imul(B,X)|0,i=i+Math.imul(B,ee)|0,n=n+Math.imul($,re)|0,o=(o=o+Math.imul($,ne)|0)+Math.imul(N,re)|0,i=i+Math.imul(N,ne)|0,n=n+Math.imul(O,ie)|0,o=(o=o+Math.imul(O,se)|0)+Math.imul(R,ie)|0,i=i+Math.imul(R,se)|0,n=n+Math.imul(S,ce)|0,o=(o=o+Math.imul(S,ue)|0)+Math.imul(E,ce)|0,i=i+Math.imul(E,ue)|0,n=n+Math.imul(k,de)|0,o=(o=o+Math.imul(k,he)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,he)|0;var Pe=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(o=(o=o+Math.imul(w,me)|0)+Math.imul(v,pe)|0))<<13)|0;u=((i=i+Math.imul(v,me)|0)+(o>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(L,X),o=(o=Math.imul(L,ee))+Math.imul(F,X)|0,i=Math.imul(F,ee),n=n+Math.imul(x,re)|0,o=(o=o+Math.imul(x,ne)|0)+Math.imul(B,re)|0,i=i+Math.imul(B,ne)|0,n=n+Math.imul($,ie)|0,o=(o=o+Math.imul($,se)|0)+Math.imul(N,ie)|0,i=i+Math.imul(N,se)|0,n=n+Math.imul(O,ce)|0,o=(o=o+Math.imul(O,ue)|0)+Math.imul(R,ce)|0,i=i+Math.imul(R,ue)|0,n=n+Math.imul(S,de)|0,o=(o=o+Math.imul(S,he)|0)+Math.imul(E,de)|0,i=i+Math.imul(E,he)|0;var Oe=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(o=(o=o+Math.imul(k,me)|0)+Math.imul(T,pe)|0))<<13)|0;u=((i=i+Math.imul(T,me)|0)+(o>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(L,re),o=(o=Math.imul(L,ne))+Math.imul(F,re)|0,i=Math.imul(F,ne),n=n+Math.imul(x,ie)|0,o=(o=o+Math.imul(x,se)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,se)|0,n=n+Math.imul($,ce)|0,o=(o=o+Math.imul($,ue)|0)+Math.imul(N,ce)|0,i=i+Math.imul(N,ue)|0,n=n+Math.imul(O,de)|0,o=(o=o+Math.imul(O,he)|0)+Math.imul(R,de)|0,i=i+Math.imul(R,he)|0;var Re=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(o=(o=o+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;u=((i=i+Math.imul(E,me)|0)+(o>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(L,ie),o=(o=Math.imul(L,se))+Math.imul(F,ie)|0,i=Math.imul(F,se),n=n+Math.imul(x,ce)|0,o=(o=o+Math.imul(x,ue)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,ue)|0,n=n+Math.imul($,de)|0,o=(o=o+Math.imul($,he)|0)+Math.imul(N,de)|0,i=i+Math.imul(N,he)|0;var Ce=(u+(n=n+Math.imul(O,pe)|0)|0)+((8191&(o=(o=o+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;u=((i=i+Math.imul(R,me)|0)+(o>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(L,ce),o=(o=Math.imul(L,ue))+Math.imul(F,ce)|0,i=Math.imul(F,ue),n=n+Math.imul(x,de)|0,o=(o=o+Math.imul(x,he)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,he)|0;var $e=(u+(n=n+Math.imul($,pe)|0)|0)+((8191&(o=(o=o+Math.imul($,me)|0)+Math.imul(N,pe)|0))<<13)|0;u=((i=i+Math.imul(N,me)|0)+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,n=Math.imul(L,de),o=(o=Math.imul(L,he))+Math.imul(F,de)|0,i=Math.imul(F,he);var Ne=(u+(n=n+Math.imul(x,pe)|0)|0)+((8191&(o=(o=o+Math.imul(x,me)|0)+Math.imul(B,pe)|0))<<13)|0;u=((i=i+Math.imul(B,me)|0)+(o>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Me=(u+(n=Math.imul(L,pe))|0)+((8191&(o=(o=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return u=((i=Math.imul(F,me))+(o>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=ye,c[1]=ge,c[2]=be,c[3]=_e,c[4]=we,c[5]=ve,c[6]=Ie,c[7]=ke,c[8]=Te,c[9]=Ae,c[10]=Se,c[11]=Ee,c[12]=Pe,c[13]=Oe,c[14]=Re,c[15]=Ce,c[16]=$e,c[17]=Ne,c[18]=Me,0!==u&&(c[19]=u,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=h),o.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?f(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,o=0,i=0;i<r.length-1;i++){var s=o;o=0;for(var a=67108863&n,c=Math.min(i,t.length-1),u=Math.max(0,i-e.length+1);u<=c;u++){var l=i-u,d=(0|e.words[l])*(0|t.words[u]),h=67108863&d;a=67108863&(h=h+a|0),o+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[i]=a,n=s,s=o}return 0!==n?r.words[i]=n:r.length--,r.strip()}(this,e,t):p(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,o=0;o<t;o++)n|=(1&e)<<t-o-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,o,i){for(var s=0;s<i;s++)n[s]=t[e[s]],o[s]=r[e[s]]},m.prototype.transform=function(e,t,r,n,o,i){this.permute(i,e,t,r,n,o);for(var s=1;s<o;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<o;l+=a)for(var d=c,h=u,f=0;f<s;f++){var p=r[l+f],m=n[l+f],y=r[l+f+s],g=n[l+f+s],b=d*y-h*g;g=d*g+h*y,y=b,r[l+f]=p+y,n[l+f]=m+g,r[l+f+s]=p-y,n[l+f+s]=m-g,f!==a&&(b=c*d-u*h,h=c*h+u*d,d=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,o=0;for(r=r/2|0;r;r>>>=1)o++;return 1<<o+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var o=e[n];e[n]=e[r-n-1],e[r-n-1]=o,o=t[n],t[n]=-t[r-n-1],t[r-n-1]=-o}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var o=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&o,r=o<67108864?0:o/67108864|0}return e},m.prototype.convert13b=function(e,t,n,o){for(var i=0,s=0;s<t;s++)i+=0|e[s],n[2*s]=8191&i,i>>>=13,n[2*s+1]=8191&i,i>>>=13;for(s=2*t;s<o;++s)n[s]=0;r(0===i),r(!(-8192&i))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),o=this.makeRBT(n),i=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,i,a,c,n,o),this.transform(u,i,l,d,n,o);for(var f=0;f<n;f++){var p=a[f]*l[f]-c[f]*d[f];c[f]=a[f]*d[f]+c[f]*l[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,h,i,n,o),this.conjugate(h,i,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),p(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var o=(0|this.words[n])*e,i=(67108863&o)+(67108863&t);t>>=26,t+=o/67108864|0,t+=i>>>26,this.words[n]=67108863&i}return 0!==t&&(this.words[n]=t,this.length++),this.length=0===e?1:this.length,this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=(e.words[n]&1<<o)>>>o}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,o=(e-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&i,c=(0|this.words[t])-a<<n;this.words[t]=c|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==o){for(t=this.length-1;t>=0;t--)this.words[t+o]=this.words[t];for(t=0;t<o;t++)this.words[t]=0;this.length+=o}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var o;r("number"==typeof e&&e>=0),o=t?(t-t%26)/26:0;var i=e%26,s=Math.min((e-i)/26,this.length),a=67108863^67108863>>>i<<i,c=n;if(o-=s,o=Math.max(0,o),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=o);u--){var d=0|this.words[u];this.words[u]=l<<26-i|d>>>i,l=d&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,o=1<<t;return!(this.length<=n||!(this.words[n]&o))},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var o=67108863^67108863>>>t<<t;this.words[this.length-1]&=o}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var o,i,s=e.length+n;this._expand(s);var a=0;for(o=0;o<e.length;o++){i=(0|this.words[o+n])+a;var c=(0|e.words[o])*t;a=((i-=67108863&c)>>26)-(c/67108864|0),this.words[o+n]=67108863&i}for(;o<this.length-n;o++)a=(i=(0|this.words[o+n])+a)>>26,this.words[o+n]=67108863&i;if(0===a)return this.strip();for(r(-1===a),a=0,o=0;o<this.length;o++)a=(i=-(0|this.words[o])+a)>>26,this.words[o]=67108863&i;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!=(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(i,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);a&&(a.words[d]=h)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),o=e.andln(1),i=r.cmp(n);return i<0||1===o&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,o=this.length-1;o>=0;o--)n=(t*n+(0|this.words[o]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*t;this.words[n]=o/e|0,t=o%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var l=n.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0===(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(d)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(c)):(n.isub(t),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:n.iushln(u)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,l=1;0===(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0===(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var o=t.cmp(r);if(o<0){var i=t;t=r,r=i}else if(0===o||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return!(1&this.words[0])},o.prototype.isOdd=function(){return!(1&~this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,o=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var i=o,s=n;0!==i&&s<this.length;s++){var a=0|this.words[s];i=(a+=i)>>>26,a&=67108863,this.words[s]=a}return 0!==i&&(this.words[s]=i,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var o=0|this.words[0];t=o===e?0:o<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],o=0|e.words[r];if(n!==o){n<o?t=-1:n>o&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new I(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){I.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},n(b,g),b.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),o=0;o<n;o++)t.words[o]=e.words[o];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=i&r,o=10;o<e.length;o++){var s=0|e.words[o];e.words[o-10]=(s&r)<<4|i>>>22,i=s}i>>>=22,e.words[o-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(_,g),n(w,g),n(v,g),v.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,o=67108863&n;n>>>=26,e.words[r]=o,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new v}return y[e]=t,t},I.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},I.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},I.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},I.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},I.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},I.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},I.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},I.prototype.isqr=function(e){return this.imul(e,e.clone())},I.prototype.sqr=function(e){return this.mul(e,e)},I.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var d=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,y=0;0!==m.cmp(a);y++)m=m.redSqr();r(y<p);var g=this.pow(d,new o(1).iushln(p-y-1));h=h.redMul(g),d=g.redSqr(),f=f.redMul(d),p=y}return h},I.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},I.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],l=c-1;l>=0;l--){var d=u>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==d||0!==s?(s<<=1,s|=d,(4===++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},I.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},I.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new k(e)},n(k,I),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),i=o;return o.cmp(this.m)>=0?i=o.isub(this.m):o.cmpn(0)<0&&(i=o.iadd(this.m)),i._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$7,bn$6)),bn$7.exports}var utils$3={},hasRequiredUtils$2,hasRequiredUtils$1;function requireUtils$2(){return hasRequiredUtils$2||(hasRequiredUtils$2=1,function(e){var t=e;function r(e){return 1===e.length?"0"+e:e}function n(e){for(var t="",n=0;n<e.length;n++)t+=r(e[n].toString(16));return t}t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var n=0;n<e.length;n++)r[n]=0|e[n];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e);for(n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(n=0;n<e.length;n++){var o=e.charCodeAt(n),i=o>>8,s=255&o;i?r.push(i,s):r.push(s)}return r},t.zero2=r,t.toHex=n,t.encode=function(e,t){return"hex"===t?n(e):e}}(utils$3)),utils$3}function requireUtils$1(){return hasRequiredUtils$1||(hasRequiredUtils$1=1,e=utils$4,t=requireBn$3(),r=requireMinimalisticAssert(),n=requireUtils$2(),e.assert=r,e.toArray=n.toArray,e.zero2=n.zero2,e.toHex=n.toHex,e.encode=n.encode,e.getNAF=function(e,t,r){var n,o=new Array(Math.max(e.bitLength(),r)+1);for(n=0;n<o.length;n+=1)o[n]=0;var i=1<<t+1,s=e.clone();for(n=0;n<o.length;n++){var a,c=s.andln(i-1);s.isOdd()?(a=c>(i>>1)-1?(i>>1)-c:c,s.isubn(a)):a=0,o[n]=a,s.iushrn(1)}return o},e.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var n,o=0,i=0;e.cmpn(-o)>0||t.cmpn(-i)>0;){var s,a,c=e.andln(3)+o&3,u=t.andln(3)+i&3;3===c&&(c=-1),3===u&&(u=-1),s=1&c?3!=(n=e.andln(7)+o&7)&&5!==n||2!==u?c:-c:0,r[0].push(s),a=1&u?3!=(n=t.andln(7)+i&7)&&5!==n||2!==c?u:-u:0,r[1].push(a),2*o===s+1&&(o=1-o),2*i===a+1&&(i=1-i),e.iushrn(1),t.iushrn(1)}return r},e.cachedProperty=function(e,t,r){var n="_"+t;e.prototype[t]=function(){return void 0!==this[n]?this[n]:this[n]=r.call(this)}},e.parseBytes=function(t){return"string"==typeof t?e.toArray(t,"hex"):t},e.intFromLE=function(e){return new t(e,"hex","le")}),utils$4;var e,t,r,n}var curve={},base$1,hasRequiredBase$1,short,hasRequiredShort,mont,hasRequiredMont,edwards,hasRequiredEdwards,hasRequiredCurve;function requireBase$1(){if(hasRequiredBase$1)return base$1;hasRequiredBase$1=1;var e=requireBn$3(),t=requireUtils$1(),r=t.getNAF,n=t.getJSF,o=t.assert;function i(t,r){this.type=t,this.p=new e(r.p,16),this.red=r.prime?e.red(r.prime):e.mont(this.p),this.zero=new e(0).toRed(this.red),this.one=new e(1).toRed(this.red),this.two=new e(2).toRed(this.red),this.n=r.n&&new e(r.n,16),this.g=r.g&&this.pointFromJSON(r.g,r.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var n=this.n&&this.p.div(this.n);!n||n.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function s(e,t){this.curve=e,this.type=t,this.precomputed=null}return base$1=i,i.prototype.point=function(){throw new Error("Not implemented")},i.prototype.validate=function(){throw new Error("Not implemented")},i.prototype._fixedNafMul=function(e,t){o(e.precomputed);var n=e._getDoubles(),i=r(t,1,this._bitLength),s=(1<<n.step+1)-(n.step%2==0?2:1);s/=3;var a,c,u=[];for(a=0;a<i.length;a+=n.step){c=0;for(var l=a+n.step-1;l>=a;l--)c=(c<<1)+i[l];u.push(c)}for(var d=this.jpoint(null,null,null),h=this.jpoint(null,null,null),f=s;f>0;f--){for(a=0;a<u.length;a++)(c=u[a])===f?h=h.mixedAdd(n.points[a]):c===-f&&(h=h.mixedAdd(n.points[a].neg()));d=d.add(h)}return d.toP()},i.prototype._wnafMul=function(e,t){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,a=r(t,n,this._bitLength),c=this.jpoint(null,null,null),u=a.length-1;u>=0;u--){for(var l=0;u>=0&&0===a[u];u--)l++;if(u>=0&&l++,c=c.dblp(l),u<0)break;var d=a[u];o(0!==d),c="affine"===e.type?d>0?c.mixedAdd(s[d-1>>1]):c.mixedAdd(s[-d-1>>1].neg()):d>0?c.add(s[d-1>>1]):c.add(s[-d-1>>1].neg())}return"affine"===e.type?c.toP():c},i.prototype._wnafMulAdd=function(e,t,o,i,s){var a,c,u,l=this._wnafT1,d=this._wnafT2,h=this._wnafT3,f=0;for(a=0;a<i;a++){var p=(u=t[a])._getNAFPoints(e);l[a]=p.wnd,d[a]=p.points}for(a=i-1;a>=1;a-=2){var m=a-1,y=a;if(1===l[m]&&1===l[y]){var g=[t[m],null,null,t[y]];0===t[m].y.cmp(t[y].y)?(g[1]=t[m].add(t[y]),g[2]=t[m].toJ().mixedAdd(t[y].neg())):0===t[m].y.cmp(t[y].y.redNeg())?(g[1]=t[m].toJ().mixedAdd(t[y]),g[2]=t[m].add(t[y].neg())):(g[1]=t[m].toJ().mixedAdd(t[y]),g[2]=t[m].toJ().mixedAdd(t[y].neg()));var b=[-3,-1,-5,-7,0,7,5,1,3],_=n(o[m],o[y]);for(f=Math.max(_[0].length,f),h[m]=new Array(f),h[y]=new Array(f),c=0;c<f;c++){var w=0|_[0][c],v=0|_[1][c];h[m][c]=b[3*(w+1)+(v+1)],h[y][c]=0,d[m]=g}}else h[m]=r(o[m],l[m],this._bitLength),h[y]=r(o[y],l[y],this._bitLength),f=Math.max(h[m].length,f),f=Math.max(h[y].length,f)}var I=this.jpoint(null,null,null),k=this._wnafT4;for(a=f;a>=0;a--){for(var T=0;a>=0;){var A=!0;for(c=0;c<i;c++)k[c]=0|h[c][a],0!==k[c]&&(A=!1);if(!A)break;T++,a--}if(a>=0&&T++,I=I.dblp(T),a<0)break;for(c=0;c<i;c++){var S=k[c];0!==S&&(S>0?u=d[c][S-1>>1]:S<0&&(u=d[c][-S-1>>1].neg()),I="affine"===u.type?I.mixedAdd(u):I.add(u))}}for(a=0;a<i;a++)d[a]=null;return s?I:I.toP()},i.BasePoint=s,s.prototype.eq=function(){throw new Error("Not implemented")},s.prototype.validate=function(){return this.curve.validate(this)},i.prototype.decodePoint=function(e,r){e=t.toArray(e,r);var n=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*n)return 6===e[0]?o(e[e.length-1]%2==0):7===e[0]&&o(e[e.length-1]%2==1),this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));if((2===e[0]||3===e[0])&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),3===e[0]);throw new Error("Unknown point format")},s.prototype.encodeCompressed=function(e){return this.encode(e,!0)},s.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},s.prototype.encode=function(e,r){return t.encode(this._encode(r),e)},s.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},s.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},s.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],n=this,o=0;o<t;o+=e){for(var i=0;i<e;i++)n=n.dbl();r.push(n)}return{step:e,points:r}},s.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,n=1===r?null:this.dbl(),o=1;o<r;o++)t[o]=t[o-1].add(n);return{wnd:e,points:t}},s.prototype._getBeta=function(){return null},s.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t},base$1}function requireShort(){if(hasRequiredShort)return short;hasRequiredShort=1;var e=requireUtils$1(),t=requireBn$3(),r=requireInherits_browser(),n=requireBase$1(),o=e.assert;function i(e){n.call(this,"short",e),this.a=new t(e.a,16).toRed(this.red),this.b=new t(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function s(e,r,o,i){n.BasePoint.call(this,e,"affine"),null===r&&null===o?(this.x=null,this.y=null,this.inf=!0):(this.x=new t(r,16),this.y=new t(o,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function a(e,r,o,i){n.BasePoint.call(this,e,"jacobian"),null===r&&null===o&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new t(0)):(this.x=new t(r,16),this.y=new t(o,16),this.z=new t(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}return r(i,n),short=i,i.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var r,n;if(e.beta)r=new t(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=(r=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)n=new t(e.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))?n=s[0]:(n=s[1],o(0===this.g.mul(n).x.cmp(this.g.x.redMul(r))))}return{beta:r,lambda:n,basis:e.basis?e.basis.map(function(e){return{a:new t(e.a,16),b:new t(e.b,16)}}):this._getEndoBasis(n)}}},i.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:t.mont(e),n=new t(2).toRed(r).redInvm(),o=n.redNeg(),i=new t(3).toRed(r).redNeg().redSqrt().redMul(n);return[o.redAdd(i).fromRed(),o.redSub(i).fromRed()]},i.prototype._getEndoBasis=function(e){for(var r,n,o,i,s,a,c,u,l,d=this.n.ushrn(Math.floor(this.n.bitLength()/2)),h=e,f=this.n.clone(),p=new t(1),m=new t(0),y=new t(0),g=new t(1),b=0;0!==h.cmpn(0);){var _=f.div(h);u=f.sub(_.mul(h)),l=y.sub(_.mul(p));var w=g.sub(_.mul(m));if(!o&&u.cmp(d)<0)r=c.neg(),n=p,o=u.neg(),i=l;else if(o&&2===++b)break;c=u,f=h,h=u,y=p,p=l,g=m,m=w}s=u.neg(),a=l;var v=o.sqr().add(i.sqr());return s.sqr().add(a.sqr()).cmp(v)>=0&&(s=r,a=n),o.negative&&(o=o.neg(),i=i.neg()),s.negative&&(s=s.neg(),a=a.neg()),[{a:o,b:i},{a:s,b:a}]},i.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],n=t[1],o=n.b.mul(e).divRound(this.n),i=r.b.neg().mul(e).divRound(this.n),s=o.mul(r.a),a=i.mul(n.a),c=o.mul(r.b),u=i.mul(n.b);return{k1:e.sub(s).sub(a),k2:c.add(u).neg()}},i.prototype.pointFromX=function(e,r){(e=new t(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),o=n.redSqrt();if(0!==o.redSqr().redSub(n).cmp(this.zero))throw new Error("invalid point");var i=o.fromRed().isOdd();return(r&&!i||!r&&i)&&(o=o.redNeg()),this.point(e,o)},i.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,n=this.a.redMul(t),o=t.redSqr().redMul(t).redIAdd(n).redIAdd(this.b);return 0===r.redSqr().redISub(o).cmpn(0)},i.prototype._endoWnafMulAdd=function(e,t,r){for(var n=this._endoWnafT1,o=this._endoWnafT2,i=0;i<e.length;i++){var s=this._endoSplit(t[i]),a=e[i],c=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),n[2*i]=a,n[2*i+1]=c,o[2*i]=s.k1,o[2*i+1]=s.k2}for(var u=this._wnafMulAdd(1,n,o,2*i,r),l=0;l<2*i;l++)n[l]=null,o[l]=null;return u},r(s,n.BasePoint),i.prototype.point=function(e,t,r){return new s(this,e,t,r)},i.prototype.pointFromJSON=function(e,t){return s.fromJSON(this,e,t)},s.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,n=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(n)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(n)}}}return t}},s.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},s.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var n=e.point(t[0],t[1],r);if(!t[2])return n;function o(t){return e.point(t[0],t[1],r)}var i=t[2];return n.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[n].concat(i.doubles.points.map(o))},naf:i.naf&&{wnd:i.naf.wnd,points:[n].concat(i.naf.points.map(o))}},n},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return this.inf},s.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),n=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,n)},s.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),n=e.redInvm(),o=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(n),i=o.redSqr().redISub(this.x.redAdd(this.x)),s=o.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)},s.prototype.getX=function(){return this.x.fromRed()},s.prototype.getY=function(){return this.y.fromRed()},s.prototype.mul=function(e){return e=new t(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},s.prototype.mulAdd=function(e,t,r){var n=[this,t],o=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,o):this.curve._wnafMulAdd(1,n,o,2)},s.prototype.jmulAdd=function(e,t,r){var n=[this,t],o=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(n,o,!0):this.curve._wnafMulAdd(1,n,o,2,!0)},s.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},s.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,n=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(n)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(n)}}}return t},s.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},r(a,n.BasePoint),i.prototype.jpoint=function(e,t,r){return new a(this,e,t,r)},a.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),n=this.y.redMul(t).redMul(e);return this.curve.point(r,n)},a.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},a.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),n=this.x.redMul(t),o=e.x.redMul(r),i=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=n.redSub(o),c=i.redSub(s);if(0===a.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),l=u.redMul(a),d=n.redMul(u),h=c.redSqr().redIAdd(l).redISub(d).redISub(d),f=c.redMul(d.redISub(h)).redISub(i.redMul(l)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(h,f,p)},a.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,n=e.x.redMul(t),o=this.y,i=e.y.redMul(t).redMul(this.z),s=r.redSub(n),a=o.redSub(i);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),l=r.redMul(c),d=a.redSqr().redIAdd(u).redISub(l).redISub(l),h=a.redMul(l.redISub(d)).redISub(o.redMul(u)),f=this.z.redMul(s);return this.curve.jpoint(d,h,f)},a.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var r=this;for(t=0;t<e;t++)r=r.dbl();return r}var n=this.curve.a,o=this.curve.tinv,i=this.x,s=this.y,a=this.z,c=a.redSqr().redSqr(),u=s.redAdd(s);for(t=0;t<e;t++){var l=i.redSqr(),d=u.redSqr(),h=d.redSqr(),f=l.redAdd(l).redIAdd(l).redIAdd(n.redMul(c)),p=i.redMul(d),m=f.redSqr().redISub(p.redAdd(p)),y=p.redISub(m),g=f.redMul(y);g=g.redIAdd(g).redISub(h);var b=u.redMul(a);t+1<e&&(c=c.redMul(h)),i=m,a=b,u=g}return this.curve.jpoint(i,u.redMul(o),a)},a.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},a.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),o=this.y.redSqr(),i=o.redSqr(),s=this.x.redAdd(o).redSqr().redISub(n).redISub(i);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n),c=a.redSqr().redISub(s).redISub(s),u=i.redIAdd(i);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var l=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),f=this.x.redAdd(d).redSqr().redISub(l).redISub(h);f=f.redIAdd(f);var p=l.redAdd(l).redIAdd(l),m=p.redSqr(),y=h.redIAdd(h);y=(y=y.redIAdd(y)).redIAdd(y),e=m.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(y),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},a.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var n=this.x.redSqr(),o=this.y.redSqr(),i=o.redSqr(),s=this.x.redAdd(o).redSqr().redISub(n).redISub(i);s=s.redIAdd(s);var a=n.redAdd(n).redIAdd(n).redIAdd(this.curve.a),c=a.redSqr().redISub(s).redISub(s);e=c;var u=i.redIAdd(i);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var l=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),f=this.x.redSub(l).redMul(this.x.redAdd(l));f=f.redAdd(f).redIAdd(f);var p=h.redIAdd(h),m=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(m),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(l);var y=d.redSqr();y=(y=(y=y.redIAdd(y)).redIAdd(y)).redIAdd(y),t=f.redMul(p.redISub(e)).redISub(y)}return this.curve.jpoint(e,t,r)},a.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,n=this.z,o=n.redSqr().redSqr(),i=t.redSqr(),s=r.redSqr(),a=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(o)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(s),l=a.redSqr().redISub(u.redAdd(u)),d=u.redISub(l),h=s.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var f=a.redMul(d).redISub(h),p=r.redAdd(r).redMul(n);return this.curve.jpoint(l,f,p)},a.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),n=t.redSqr(),o=e.redAdd(e).redIAdd(e),i=o.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(n),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(i)).redSqr(),c=n.redIAdd(n);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=o.redIAdd(s).redSqr().redISub(i).redISub(a).redISub(c),l=t.redMul(u);l=(l=l.redIAdd(l)).redIAdd(l);var d=this.x.redMul(a).redISub(l);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.y.redMul(u.redMul(c.redISub(u)).redISub(s.redMul(a)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var f=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(d,h,f)},a.prototype.mul=function(e,r){return e=new t(e,r),this.curve._wnafMul(this,e)},a.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var n=t.redMul(this.z),o=r.redMul(e.z);return 0===this.y.redMul(o).redISub(e.y.redMul(n)).cmpn(0)},a.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var n=e.clone(),o=this.curve.redN.redMul(t);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(o),0===this.x.cmp(r))return!0}},a.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},a.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},short}function requireMont(){if(hasRequiredMont)return mont;hasRequiredMont=1;var e=requireBn$3(),t=requireInherits_browser(),r=requireBase$1(),n=requireUtils$1();function o(t){r.call(this,"mont",t),this.a=new e(t.a,16).toRed(this.red),this.b=new e(t.b,16).toRed(this.red),this.i4=new e(4).toRed(this.red).redInvm(),this.two=new e(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function i(t,n,o){r.BasePoint.call(this,t,"projective"),null===n&&null===o?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new e(n,16),this.z=new e(o,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}return t(o,r),mont=o,o.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),n=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===n.redSqrt().redSqr().cmp(n)},t(i,r.BasePoint),o.prototype.decodePoint=function(e,t){return this.point(n.toArray(e,t),1)},o.prototype.point=function(e,t){return new i(this,e,t)},o.prototype.pointFromJSON=function(e){return i.fromJSON(this,e)},i.prototype.precompute=function(){},i.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},i.fromJSON=function(e,t){return new i(e,t[0],t[1]||e.one)},i.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},i.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},i.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),n=e.redMul(t),o=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(n,o)},i.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),n=this.x.redSub(this.z),o=e.x.redAdd(e.z),i=e.x.redSub(e.z).redMul(r),s=o.redMul(n),a=t.z.redMul(i.redAdd(s).redSqr()),c=t.x.redMul(i.redISub(s).redSqr());return this.curve.point(a,c)},i.prototype.mul=function(e){for(var t=e.clone(),r=this,n=this.curve.point(null,null),o=[];0!==t.cmpn(0);t.iushrn(1))o.push(t.andln(1));for(var i=o.length-1;i>=0;i--)0===o[i]?(r=r.diffAdd(n,this),n=n.dbl()):(n=r.diffAdd(n,this),r=r.dbl());return n},i.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},i.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},i.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},i.prototype.getX=function(){return this.normalize(),this.x.fromRed()},mont}function requireEdwards(){if(hasRequiredEdwards)return edwards;hasRequiredEdwards=1;var e=requireUtils$1(),t=requireBn$3(),r=requireInherits_browser(),n=requireBase$1(),o=e.assert;function i(e){this.twisted=1!=(0|e.a),this.mOneA=this.twisted&&-1==(0|e.a),this.extended=this.mOneA,n.call(this,"edwards",e),this.a=new t(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new t(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new t(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),o(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|e.c)}function s(e,r,o,i,s){n.BasePoint.call(this,e,"projective"),null===r&&null===o&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new t(r,16),this.y=new t(o,16),this.z=i?new t(i,16):this.curve.one,this.t=s&&new t(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}return r(i,n),edwards=i,i.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},i.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},i.prototype.jpoint=function(e,t,r,n){return this.point(e,t,r,n)},i.prototype.pointFromX=function(e,r){(e=new t(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),o=this.c2.redSub(this.a.redMul(n)),i=this.one.redSub(this.c2.redMul(this.d).redMul(n)),s=o.redMul(i.redInvm()),a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var c=a.fromRed().isOdd();return(r&&!c||!r&&c)&&(a=a.redNeg()),this.point(e,a)},i.prototype.pointFromY=function(e,r){(e=new t(e,16)).red||(e=e.toRed(this.red));var n=e.redSqr(),o=n.redSub(this.c2),i=n.redMul(this.d).redMul(this.c2).redSub(this.a),s=o.redMul(i.redInvm());if(0===s.cmp(this.zero)){if(r)throw new Error("invalid point");return this.point(this.zero,e)}var a=s.redSqrt();if(0!==a.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==r&&(a=a.redNeg()),this.point(a,e)},i.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),n=t.redMul(this.a).redAdd(r),o=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===n.cmp(o)},r(s,n.BasePoint),i.prototype.pointFromJSON=function(e){return s.fromJSON(this,e)},i.prototype.point=function(e,t,r,n){return new s(this,e,t,r,n)},s.fromJSON=function(e,t){return new s(e,t[0],t[1],t[2])},s.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},s.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},s.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var n=this.curve._mulA(e),o=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),i=n.redAdd(t),s=i.redSub(r),a=n.redSub(t),c=o.redMul(s),u=i.redMul(a),l=o.redMul(a),d=s.redMul(i);return this.curve.point(c,u,d,l)},s.prototype._projDbl=function(){var e,t,r,n,o,i,s=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),c=this.y.redSqr();if(this.curve.twisted){var u=(n=this.curve._mulA(a)).redAdd(c);this.zOne?(e=s.redSub(a).redSub(c).redMul(u.redSub(this.curve.two)),t=u.redMul(n.redSub(c)),r=u.redSqr().redSub(u).redSub(u)):(o=this.z.redSqr(),i=u.redSub(o).redISub(o),e=s.redSub(a).redISub(c).redMul(i),t=u.redMul(n.redSub(c)),r=u.redMul(i))}else n=a.redAdd(c),o=this.curve._mulC(this.z).redSqr(),i=n.redSub(o).redSub(o),e=this.curve._mulC(s.redISub(n)).redMul(i),t=this.curve._mulC(n).redMul(a.redISub(c)),r=n.redMul(i);return this.curve.point(e,t,r)},s.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},s.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),n=this.t.redMul(this.curve.dd).redMul(e.t),o=this.z.redMul(e.z.redAdd(e.z)),i=r.redSub(t),s=o.redSub(n),a=o.redAdd(n),c=r.redAdd(t),u=i.redMul(s),l=a.redMul(c),d=i.redMul(c),h=s.redMul(a);return this.curve.point(u,l,h,d)},s.prototype._projAdd=function(e){var t,r,n=this.z.redMul(e.z),o=n.redSqr(),i=this.x.redMul(e.x),s=this.y.redMul(e.y),a=this.curve.d.redMul(i).redMul(s),c=o.redSub(a),u=o.redAdd(a),l=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(i).redISub(s),d=n.redMul(c).redMul(l);return this.curve.twisted?(t=n.redMul(u).redMul(s.redSub(this.curve._mulA(i))),r=c.redMul(u)):(t=n.redMul(u).redMul(s.redSub(i)),r=this.curve._mulC(c).redMul(u)),this.curve.point(d,t,r)},s.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},s.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},s.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},s.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},s.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},s.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},s.prototype.getX=function(){return this.normalize(),this.x.fromRed()},s.prototype.getY=function(){return this.normalize(),this.y.fromRed()},s.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},s.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),n=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(n),0===this.x.cmp(t))return!0}},s.prototype.toP=s.prototype.normalize,s.prototype.mixedAdd=s.prototype.add,edwards}function requireCurve(){return hasRequiredCurve||(hasRequiredCurve=1,(e=curve).base=requireBase$1(),e.short=requireShort(),e.mont=requireMont(),e.edwards=requireEdwards()),curve;var e}var curves={},hash$1={},utils$2={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils$2;hasRequiredUtils=1;var e=requireMinimalisticAssert(),t=requireInherits_browser();function r(e,t){return 55296==(64512&e.charCodeAt(t))&&(!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1)))}function n(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function o(e){return 1===e.length?"0"+e:e}function i(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}return utils$2.inherits=t,utils$2.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var n=[];if("string"==typeof e)if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)n.push(parseInt(e[i]+e[i+1],16))}else for(var o=0,i=0;i<e.length;i++){var s=e.charCodeAt(i);s<128?n[o++]=s:s<2048?(n[o++]=s>>6|192,n[o++]=63&s|128):r(e,i)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++i)),n[o++]=s>>18|240,n[o++]=s>>12&63|128,n[o++]=s>>6&63|128,n[o++]=63&s|128):(n[o++]=s>>12|224,n[o++]=s>>6&63|128,n[o++]=63&s|128)}else for(i=0;i<e.length;i++)n[i]=0|e[i];return n},utils$2.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=o(e[r].toString(16));return t},utils$2.htonl=n,utils$2.toHex32=function(e,t){for(var r="",o=0;o<e.length;o++){var s=e[o];"little"===t&&(s=n(s)),r+=i(s.toString(16))}return r},utils$2.zero2=o,utils$2.zero8=i,utils$2.join32=function(t,r,n,o){var i=n-r;e(i%4==0);for(var s=new Array(i/4),a=0,c=r;a<s.length;a++,c+=4){var u;u="big"===o?t[c]<<24|t[c+1]<<16|t[c+2]<<8|t[c+3]:t[c+3]<<24|t[c+2]<<16|t[c+1]<<8|t[c],s[a]=u>>>0}return s},utils$2.split32=function(e,t){for(var r=new Array(4*e.length),n=0,o=0;n<e.length;n++,o+=4){var i=e[n];"big"===t?(r[o]=i>>>24,r[o+1]=i>>>16&255,r[o+2]=i>>>8&255,r[o+3]=255&i):(r[o+3]=i>>>24,r[o+2]=i>>>16&255,r[o+1]=i>>>8&255,r[o]=255&i)}return r},utils$2.rotr32=function(e,t){return e>>>t|e<<32-t},utils$2.rotl32=function(e,t){return e<<t|e>>>32-t},utils$2.sum32=function(e,t){return e+t>>>0},utils$2.sum32_3=function(e,t,r){return e+t+r>>>0},utils$2.sum32_4=function(e,t,r,n){return e+t+r+n>>>0},utils$2.sum32_5=function(e,t,r,n,o){return e+t+r+n+o>>>0},utils$2.sum64=function(e,t,r,n){var o=e[t],i=n+e[t+1]>>>0,s=(i<n?1:0)+r+o;e[t]=s>>>0,e[t+1]=i},utils$2.sum64_hi=function(e,t,r,n){return(t+n>>>0<t?1:0)+e+r>>>0},utils$2.sum64_lo=function(e,t,r,n){return t+n>>>0},utils$2.sum64_4_hi=function(e,t,r,n,o,i,s,a){var c=0,u=t;return c+=(u=u+n>>>0)<t?1:0,c+=(u=u+i>>>0)<i?1:0,e+r+o+s+(c+=(u=u+a>>>0)<a?1:0)>>>0},utils$2.sum64_4_lo=function(e,t,r,n,o,i,s,a){return t+n+i+a>>>0},utils$2.sum64_5_hi=function(e,t,r,n,o,i,s,a,c,u){var l=0,d=t;return l+=(d=d+n>>>0)<t?1:0,l+=(d=d+i>>>0)<i?1:0,l+=(d=d+a>>>0)<a?1:0,e+r+o+s+c+(l+=(d=d+u>>>0)<u?1:0)>>>0},utils$2.sum64_5_lo=function(e,t,r,n,o,i,s,a,c,u){return t+n+i+a+u>>>0},utils$2.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},utils$2.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},utils$2.shr64_hi=function(e,t,r){return e>>>r},utils$2.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},utils$2}var common$1={},hasRequiredCommon$1;function requireCommon$1(){if(hasRequiredCommon$1)return common$1;hasRequiredCommon$1=1;var e=requireUtils(),t=requireMinimalisticAssert();function r(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return common$1.BlockHash=r,r.prototype.update=function(t,r){if(t=e.toArray(t,r),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var n=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-n,t.length),0===this.pending.length&&(this.pending=null),t=e.join32(t,0,t.length-n,this.endian);for(var o=0;o<t.length;o+=this._delta32)this._update(t,o,o+this._delta32)}return this},r.prototype.digest=function(e){return this.update(this._pad()),t(null===this.pending),this._digest(e)},r.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,n=new Array(r+this.padLength);n[0]=128;for(var o=1;o<r;o++)n[o]=0;if(e<<=3,"big"===this.endian){for(var i=8;i<this.padLength;i++)n[o++]=0;n[o++]=0,n[o++]=0,n[o++]=0,n[o++]=0,n[o++]=e>>>24&255,n[o++]=e>>>16&255,n[o++]=e>>>8&255,n[o++]=255&e}else for(n[o++]=255&e,n[o++]=e>>>8&255,n[o++]=e>>>16&255,n[o++]=e>>>24&255,n[o++]=0,n[o++]=0,n[o++]=0,n[o++]=0,i=8;i<this.padLength;i++)n[o++]=0;return n},common$1}var sha={},common={},hasRequiredCommon,_1,hasRequired_1,_256,hasRequired_256,_224,hasRequired_224,_512,hasRequired_512,_384,hasRequired_384,hasRequiredSha;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;var e=requireUtils().rotr32;function t(e,t,r){return e&t^~e&r}function r(e,t,r){return e&t^e&r^t&r}function n(e,t,r){return e^t^r}return common.ft_1=function(e,o,i,s){return 0===e?t(o,i,s):1===e||3===e?n(o,i,s):2===e?r(o,i,s):void 0},common.ch32=t,common.maj32=r,common.p32=n,common.s0_256=function(t){return e(t,2)^e(t,13)^e(t,22)},common.s1_256=function(t){return e(t,6)^e(t,11)^e(t,25)},common.g0_256=function(t){return e(t,7)^e(t,18)^t>>>3},common.g1_256=function(t){return e(t,17)^e(t,19)^t>>>10},common}function require_1(){if(hasRequired_1)return _1;hasRequired_1=1;var e=requireUtils(),t=requireCommon$1(),r=requireCommon(),n=e.rotl32,o=e.sum32,i=e.sum32_5,s=r.ft_1,a=t.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function u(){if(!(this instanceof u))return new u;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return e.inherits(u,a),_1=u,u.blockSize=512,u.outSize=160,u.hmacStrength=80,u.padLength=64,u.prototype._update=function(e,t){for(var r=this.W,a=0;a<16;a++)r[a]=e[t+a];for(;a<r.length;a++)r[a]=n(r[a-3]^r[a-8]^r[a-14]^r[a-16],1);var u=this.h[0],l=this.h[1],d=this.h[2],h=this.h[3],f=this.h[4];for(a=0;a<r.length;a++){var p=~~(a/20),m=i(n(u,5),s(p,l,d,h),f,r[a],c[p]);f=h,h=d,d=n(l,30),l=u,u=m}this.h[0]=o(this.h[0],u),this.h[1]=o(this.h[1],l),this.h[2]=o(this.h[2],d),this.h[3]=o(this.h[3],h),this.h[4]=o(this.h[4],f)},u.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h,"big"):e.split32(this.h,"big")},_1}function require_256(){if(hasRequired_256)return _256;hasRequired_256=1;var e=requireUtils(),t=requireCommon$1(),r=requireCommon(),n=requireMinimalisticAssert(),o=e.sum32,i=e.sum32_4,s=e.sum32_5,a=r.ch32,c=r.maj32,u=r.s0_256,l=r.s1_256,d=r.g0_256,h=r.g1_256,f=t.BlockHash,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function m(){if(!(this instanceof m))return new m;f.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=p,this.W=new Array(64)}return e.inherits(m,f),_256=m,m.blockSize=512,m.outSize=256,m.hmacStrength=192,m.padLength=64,m.prototype._update=function(e,t){for(var r=this.W,f=0;f<16;f++)r[f]=e[t+f];for(;f<r.length;f++)r[f]=i(h(r[f-2]),r[f-7],d(r[f-15]),r[f-16]);var p=this.h[0],m=this.h[1],y=this.h[2],g=this.h[3],b=this.h[4],_=this.h[5],w=this.h[6],v=this.h[7];for(n(this.k.length===r.length),f=0;f<r.length;f++){var I=s(v,l(b),a(b,_,w),this.k[f],r[f]),k=o(u(p),c(p,m,y));v=w,w=_,_=b,b=o(g,I),g=y,y=m,m=p,p=o(I,k)}this.h[0]=o(this.h[0],p),this.h[1]=o(this.h[1],m),this.h[2]=o(this.h[2],y),this.h[3]=o(this.h[3],g),this.h[4]=o(this.h[4],b),this.h[5]=o(this.h[5],_),this.h[6]=o(this.h[6],w),this.h[7]=o(this.h[7],v)},m.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h,"big"):e.split32(this.h,"big")},_256}function require_224(){if(hasRequired_224)return _224;hasRequired_224=1;var e=requireUtils(),t=require_256();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return e.inherits(r,t),_224=r,r.blockSize=512,r.outSize=224,r.hmacStrength=192,r.padLength=64,r.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h.slice(0,7),"big"):e.split32(this.h.slice(0,7),"big")},_224}function require_512(){if(hasRequired_512)return _512;hasRequired_512=1;var e=requireUtils(),t=requireCommon$1(),r=requireMinimalisticAssert(),n=e.rotr64_hi,o=e.rotr64_lo,i=e.shr64_hi,s=e.shr64_lo,a=e.sum64,c=e.sum64_hi,u=e.sum64_lo,l=e.sum64_4_hi,d=e.sum64_4_lo,h=e.sum64_5_hi,f=e.sum64_5_lo,p=t.BlockHash,m=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function y(){if(!(this instanceof y))return new y;p.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=m,this.W=new Array(160)}function g(e,t,r,n,o){var i=e&r^~e&o;return i<0&&(i+=4294967296),i}function b(e,t,r,n,o,i){var s=t&n^~t&i;return s<0&&(s+=4294967296),s}function _(e,t,r,n,o){var i=e&r^e&o^r&o;return i<0&&(i+=4294967296),i}function w(e,t,r,n,o,i){var s=t&n^t&i^n&i;return s<0&&(s+=4294967296),s}function v(e,t){var r=n(e,t,28)^n(t,e,2)^n(t,e,7);return r<0&&(r+=4294967296),r}function I(e,t){var r=o(e,t,28)^o(t,e,2)^o(t,e,7);return r<0&&(r+=4294967296),r}function k(e,t){var r=n(e,t,14)^n(e,t,18)^n(t,e,9);return r<0&&(r+=4294967296),r}function T(e,t){var r=o(e,t,14)^o(e,t,18)^o(t,e,9);return r<0&&(r+=4294967296),r}function A(e,t){var r=n(e,t,1)^n(e,t,8)^i(e,t,7);return r<0&&(r+=4294967296),r}function S(e,t){var r=o(e,t,1)^o(e,t,8)^s(e,t,7);return r<0&&(r+=4294967296),r}function E(e,t){var r=n(e,t,19)^n(t,e,29)^i(e,t,6);return r<0&&(r+=4294967296),r}function P(e,t){var r=o(e,t,19)^o(t,e,29)^s(e,t,6);return r<0&&(r+=4294967296),r}return e.inherits(y,p),_512=y,y.blockSize=1024,y.outSize=512,y.hmacStrength=192,y.padLength=128,y.prototype._prepareBlock=function(e,t){for(var r=this.W,n=0;n<32;n++)r[n]=e[t+n];for(;n<r.length;n+=2){var o=E(r[n-4],r[n-3]),i=P(r[n-4],r[n-3]),s=r[n-14],a=r[n-13],c=A(r[n-30],r[n-29]),u=S(r[n-30],r[n-29]),h=r[n-32],f=r[n-31];r[n]=l(o,i,s,a,c,u,h,f),r[n+1]=d(o,i,s,a,c,u,h,f)}},y.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,o=this.h[0],i=this.h[1],s=this.h[2],l=this.h[3],d=this.h[4],p=this.h[5],m=this.h[6],y=this.h[7],A=this.h[8],S=this.h[9],E=this.h[10],P=this.h[11],O=this.h[12],R=this.h[13],C=this.h[14],$=this.h[15];r(this.k.length===n.length);for(var N=0;N<n.length;N+=2){var M=C,x=$,B=k(A,S),D=T(A,S),L=g(A,S,E,P,O),F=b(A,S,E,P,O,R),j=this.k[N],U=this.k[N+1],q=n[N],K=n[N+1],H=h(M,x,B,D,L,F,j,U,q,K),G=f(M,x,B,D,L,F,j,U,q,K);M=v(o,i),x=I(o,i),B=_(o,i,s,l,d),D=w(o,i,s,l,d,p);var z=c(M,x,B,D),V=u(M,x,B,D);C=O,$=R,O=E,R=P,E=A,P=S,A=c(m,y,H,G),S=u(y,y,H,G),m=d,y=p,d=s,p=l,s=o,l=i,o=c(H,G,z,V),i=u(H,G,z,V)}a(this.h,0,o,i),a(this.h,2,s,l),a(this.h,4,d,p),a(this.h,6,m,y),a(this.h,8,A,S),a(this.h,10,E,P),a(this.h,12,O,R),a(this.h,14,C,$)},y.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h,"big"):e.split32(this.h,"big")},_512}function require_384(){if(hasRequired_384)return _384;hasRequired_384=1;var e=requireUtils(),t=require_512();function r(){if(!(this instanceof r))return new r;t.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return e.inherits(r,t),_384=r,r.blockSize=1024,r.outSize=384,r.hmacStrength=192,r.padLength=128,r.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h.slice(0,12),"big"):e.split32(this.h.slice(0,12),"big")},_384}function requireSha(){return hasRequiredSha||(hasRequiredSha=1,sha.sha1=require_1(),sha.sha224=require_224(),sha.sha256=require_256(),sha.sha384=require_384(),sha.sha512=require_512()),sha}var ripemd={},hasRequiredRipemd,hmac$1,hasRequiredHmac,hasRequiredHash,secp256k1$1,hasRequiredSecp256k1,hasRequiredCurves,hmacDrbg,hasRequiredHmacDrbg,key$1,hasRequiredKey$1,signature$1,hasRequiredSignature$1,ec,hasRequiredEc,key,hasRequiredKey,signature,hasRequiredSignature,eddsa,hasRequiredEddsa,hasRequiredElliptic;function requireRipemd(){if(hasRequiredRipemd)return ripemd;hasRequiredRipemd=1;var e=requireUtils(),t=requireCommon$1(),r=e.rotl32,n=e.sum32,o=e.sum32_3,i=e.sum32_4,s=t.BlockHash;function a(){if(!(this instanceof a))return new a;s.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function c(e,t,r,n){return e<=15?t^r^n:e<=31?t&r|~t&n:e<=47?(t|~r)^n:e<=63?t&n|r&~n:t^(r|~n)}function u(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function l(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}e.inherits(a,s),ripemd.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(e,t){for(var s=this.h[0],a=this.h[1],m=this.h[2],y=this.h[3],g=this.h[4],b=s,_=a,w=m,v=y,I=g,k=0;k<80;k++){var T=n(r(i(s,c(k,a,m,y),e[d[k]+t],u(k)),f[k]),g);s=g,g=y,y=r(m,10),m=a,a=T,T=n(r(i(b,c(79-k,_,w,v),e[h[k]+t],l(k)),p[k]),I),b=I,I=v,v=r(w,10),w=_,_=T}T=o(this.h[1],m,v),this.h[1]=o(this.h[2],y,I),this.h[2]=o(this.h[3],g,b),this.h[3]=o(this.h[4],s,_),this.h[4]=o(this.h[0],a,w),this.h[0]=T},a.prototype._digest=function(t){return"hex"===t?e.toHex32(this.h,"little"):e.split32(this.h,"little")};var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],f=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return ripemd}function requireHmac(){if(hasRequiredHmac)return hmac$1;hasRequiredHmac=1;var e=requireUtils(),t=requireMinimalisticAssert();function r(t,n,o){if(!(this instanceof r))return new r(t,n,o);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(e.toArray(n,o))}return hmac$1=r,r.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),t(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=(new this.Hash).update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=(new this.Hash).update(e)},r.prototype.update=function(e,t){return this.inner.update(e,t),this},r.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)},hmac$1}function requireHash(){return hasRequiredHash||(hasRequiredHash=1,(e=hash$1).utils=requireUtils(),e.common=requireCommon$1(),e.sha=requireSha(),e.ripemd=requireRipemd(),e.hmac=requireHmac(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160),hash$1;var e}function requireSecp256k1(){return hasRequiredSecp256k1?secp256k1$1:(hasRequiredSecp256k1=1,secp256k1$1={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}})}function requireCurves(){return hasRequiredCurves||(hasRequiredCurves=1,function(e){var t,r=e,n=requireHash(),o=requireCurve(),i=requireUtils$1().assert;function s(e){"short"===e.type?this.curve=new o.short(e):"edwards"===e.type?this.curve=new o.edwards(e):this.curve=new o.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function a(e,t){Object.defineProperty(r,e,{configurable:!0,enumerable:!0,get:function(){var n=new s(t);return Object.defineProperty(r,e,{configurable:!0,enumerable:!0,value:n}),n}})}r.PresetCurve=s,a("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:n.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),a("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:n.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),a("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:n.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),a("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:n.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),a("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:n.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),a("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["9"]}),a("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:n.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{t=requireSecp256k1()}catch(c){t=void 0}a("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:n.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",t]})}(curves)),curves}function requireHmacDrbg(){if(hasRequiredHmacDrbg)return hmacDrbg;hasRequiredHmacDrbg=1;var e=requireHash(),t=requireUtils$2(),r=requireMinimalisticAssert();function n(e){if(!(this instanceof n))return new n(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var o=t.toArray(e.entropy,e.entropyEnc||"hex"),i=t.toArray(e.nonce,e.nonceEnc||"hex"),s=t.toArray(e.pers,e.persEnc||"hex");r(o.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(o,i,s)}return hmacDrbg=n,n.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(n),this._reseed=1,this.reseedInterval=281474976710656},n.prototype._hmac=function(){return new e.hmac(this.hash,this.K)},n.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},n.prototype.reseed=function(e,n,o,i){"string"!=typeof n&&(i=o,o=n,n=null),e=t.toArray(e,n),o=t.toArray(o,i),r(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(o||[])),this._reseed=1},n.prototype.generate=function(e,r,n,o){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof r&&(o=n,n=r,r=null),n&&(n=t.toArray(n,o||"hex"),this._update(n));for(var i=[];i.length<e;)this.V=this._hmac().update(this.V).digest(),i=i.concat(this.V);var s=i.slice(0,e);return this._update(n),this._reseed++,t.encode(s,r)},hmacDrbg}function requireKey$1(){if(hasRequiredKey$1)return key$1;hasRequiredKey$1=1;var e=requireBn$3(),t=requireUtils$1().assert;function r(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}return key$1=r,r.fromPublic=function(e,t,n){return t instanceof r?t:new r(e,{pub:t,pubEnc:n})},r.fromPrivate=function(e,t,n){return t instanceof r?t:new r(e,{priv:t,privEnc:n})},r.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},r.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},r.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},r.prototype._importPrivate=function(t,r){this.priv=new e(t,r||16),this.priv=this.priv.umod(this.ec.curve.n)},r.prototype._importPublic=function(e,r){if(e.x||e.y)return"mont"===this.ec.curve.type?t(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||t(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,r)},r.prototype.derive=function(e){return e.validate()||t(e.validate(),"public point not validated"),e.mul(this.priv).getX()},r.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},r.prototype.verify=function(e,t,r){return this.ec.verify(e,t,this,void 0,r)},r.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"},key$1}function requireSignature$1(){if(hasRequiredSignature$1)return signature$1;hasRequiredSignature$1=1;var e=requireBn$3(),t=requireUtils$1(),r=t.assert;function n(t,o){if(t instanceof n)return t;this._importDER(t,o)||(r(t.r&&t.s,"Signature without r or s"),this.r=new e(t.r,16),this.s=new e(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function o(){this.place=0}function i(e,t){var r=e[t.place++];if(!(128&r))return r;var n=15&r;if(0===n||n>4)return!1;if(0===e[t.place])return!1;for(var o=0,i=0,s=t.place;i<n;i++,s++)o<<=8,o|=e[s],o>>>=0;return!(o<=127)&&(t.place=s,o)}function s(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function a(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}return signature$1=n,n.prototype._importDER=function(r,n){r=t.toArray(r,n);var s=new o;if(48!==r[s.place++])return!1;var a=i(r,s);if(!1===a)return!1;if(a+s.place!==r.length)return!1;if(2!==r[s.place++])return!1;var c=i(r,s);if(!1===c)return!1;if(128&r[s.place])return!1;var u=r.slice(s.place,c+s.place);if(s.place+=c,2!==r[s.place++])return!1;var l=i(r,s);if(!1===l)return!1;if(r.length!==l+s.place)return!1;if(128&r[s.place])return!1;var d=r.slice(s.place,l+s.place);if(0===u[0]){if(!(128&u[1]))return!1;u=u.slice(1)}if(0===d[0]){if(!(128&d[1]))return!1;d=d.slice(1)}return this.r=new e(u),this.s=new e(d),this.recoveryParam=null,!0},n.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(128&r[0]&&(r=[0].concat(r)),128&n[0]&&(n=[0].concat(n)),r=s(r),n=s(n);!(n[0]||128&n[1]);)n=n.slice(1);var o=[2];a(o,r.length),(o=o.concat(r)).push(2),a(o,n.length);var i=o.concat(n),c=[48];return a(c,i.length),c=c.concat(i),t.encode(c,e)},signature$1}function requireEc(){if(hasRequiredEc)return ec;hasRequiredEc=1;var e=requireBn$3(),t=requireHmacDrbg(),r=requireUtils$1(),n=requireCurves(),o=requireBrorand(),i=r.assert,s=requireKey$1(),a=requireSignature$1();function c(e){if(!(this instanceof c))return new c(e);"string"==typeof e&&(i(Object.prototype.hasOwnProperty.call(n,e),"Unknown curve "+e),e=n[e]),e instanceof n.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}return ec=c,c.prototype.keyPair=function(e){return new s(this,e)},c.prototype.keyFromPrivate=function(e,t){return s.fromPrivate(this,e,t)},c.prototype.keyFromPublic=function(e,t){return s.fromPublic(this,e,t)},c.prototype.genKeyPair=function(r){r||(r={});for(var n=new t({hash:this.hash,pers:r.pers,persEnc:r.persEnc||"utf8",entropy:r.entropy||o(this.hash.hmacStrength),entropyEnc:r.entropy&&r.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),s=this.n.sub(new e(2));;){var a=new e(n.generate(i));if(!(a.cmp(s)>0))return a.iaddn(1),this.keyFromPrivate(a)}},c.prototype._truncateToN=function(t,r,n){var o;if(e.isBN(t)||"number"==typeof t)o=(t=new e(t,16)).byteLength();else if("object"==typeof t)o=t.length,t=new e(t,16);else{var i=t.toString();o=i.length+1>>>1,t=new e(i,16)}"number"!=typeof n&&(n=8*o);var s=n-this.n.bitLength();return s>0&&(t=t.ushrn(s)),!r&&t.cmp(this.n)>=0?t.sub(this.n):t},c.prototype.sign=function(r,n,o,s){if("object"==typeof o&&(s=o,o=null),s||(s={}),"string"!=typeof r&&"number"!=typeof r&&!e.isBN(r)){i("object"==typeof r&&r&&"number"==typeof r.length,"Expected message to be an array-like, a hex string, or a BN instance"),i(r.length>>>0===r.length);for(var c=0;c<r.length;c++)i((255&r[c])===r[c])}n=this.keyFromPrivate(n,o),r=this._truncateToN(r,!1,s.msgBitLength),i(!r.isNeg(),"Can not sign a negative message");var u=this.n.byteLength(),l=n.getPrivate().toArray("be",u),d=r.toArray("be",u);i(new e(d).eq(r),"Can not sign message");for(var h=new t({hash:this.hash,entropy:l,nonce:d,pers:s.pers,persEnc:s.persEnc||"utf8"}),f=this.n.sub(new e(1)),p=0;;p++){var m=s.k?s.k(p):new e(h.generate(this.n.byteLength()));if(!((m=this._truncateToN(m,!0)).cmpn(1)<=0||m.cmp(f)>=0)){var y=this.g.mul(m);if(!y.isInfinity()){var g=y.getX(),b=g.umod(this.n);if(0!==b.cmpn(0)){var _=m.invm(this.n).mul(b.mul(n.getPrivate()).iadd(r));if(0!==(_=_.umod(this.n)).cmpn(0)){var w=(y.getY().isOdd()?1:0)|(0!==g.cmp(b)?2:0);return s.canonical&&_.cmp(this.nh)>0&&(_=this.n.sub(_),w^=1),new a({r:b,s:_,recoveryParam:w})}}}}}},c.prototype.verify=function(e,t,r,n,o){o||(o={}),e=this._truncateToN(e,!1,o.msgBitLength),r=this.keyFromPublic(r,n);var i=(t=new a(t,"hex")).r,s=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var c,u=s.invm(this.n),l=u.mul(e).umod(this.n),d=u.mul(i).umod(this.n);return this.curve._maxwellTrick?!(c=this.g.jmulAdd(l,r.getPublic(),d)).isInfinity()&&c.eqXToP(i):!(c=this.g.mulAdd(l,r.getPublic(),d)).isInfinity()&&0===c.getX().umod(this.n).cmp(i)},c.prototype.recoverPubKey=function(t,r,n,o){i((3&n)===n,"The recovery param is more than two bits"),r=new a(r,o);var s=this.n,c=new e(t),u=r.r,l=r.s,d=1&n,h=n>>1;if(u.cmp(this.curve.p.umod(this.curve.n))>=0&&h)throw new Error("Unable to find sencond key candinate");u=h?this.curve.pointFromX(u.add(this.curve.n),d):this.curve.pointFromX(u,d);var f=r.r.invm(s),p=s.sub(c).mul(f).umod(s),m=l.mul(f).umod(s);return this.g.mulAdd(p,u,m)},c.prototype.getKeyRecoveryParam=function(e,t,r,n){if(null!==(t=new a(t,n)).recoveryParam)return t.recoveryParam;for(var o=0;o<4;o++){var i;try{i=this.recoverPubKey(e,t,o)}catch(s){continue}if(i.eq(r))return o}throw new Error("Unable to find valid recovery factor")},ec}function requireKey(){if(hasRequiredKey)return key;hasRequiredKey=1;var e=requireUtils$1(),t=e.assert,r=e.parseBytes,n=e.cachedProperty;function o(e,t){this.eddsa=e,this._secret=r(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=r(t.pub)}return o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},n(o,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),n(o,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),n(o,"privBytes",function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,n=t.slice(0,e.encodingLength);return n[0]&=248,n[r]&=127,n[r]|=64,n}),n(o,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),n(o,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),n(o,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),o.prototype.sign=function(e){return t(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(r){return t(this._secret,"KeyPair is public only"),e.encode(this.secret(),r)},o.prototype.getPublic=function(t){return e.encode(this.pubBytes(),t)},key=o}function requireSignature(){if(hasRequiredSignature)return signature;hasRequiredSignature=1;var e=requireBn$3(),t=requireUtils$1(),r=t.assert,n=t.cachedProperty,o=t.parseBytes;function i(t,n){this.eddsa=t,"object"!=typeof n&&(n=o(n)),Array.isArray(n)&&(r(n.length===2*t.encodingLength,"Signature has invalid size"),n={R:n.slice(0,t.encodingLength),S:n.slice(t.encodingLength)}),r(n.R&&n.S,"Signature without R or S"),t.isPoint(n.R)&&(this._R=n.R),n.S instanceof e&&(this._S=n.S),this._Rencoded=Array.isArray(n.R)?n.R:n.Rencoded,this._Sencoded=Array.isArray(n.S)?n.S:n.Sencoded}return n(i,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),n(i,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),n(i,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),n(i,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),i.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},i.prototype.toHex=function(){return t.encode(this.toBytes(),"hex").toUpperCase()},signature=i}function requireEddsa(){if(hasRequiredEddsa)return eddsa;hasRequiredEddsa=1;var e=requireHash(),t=requireCurves(),r=requireUtils$1(),n=r.assert,o=r.parseBytes,i=requireKey(),s=requireSignature();function a(r){if(n("ed25519"===r,"only tested with ed25519 so far"),!(this instanceof a))return new a(r);r=t[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=e.sha512}return eddsa=a,a.prototype.sign=function(e,t){e=o(e);var r=this.keyFromSecret(t),n=this.hashInt(r.messagePrefix(),e),i=this.g.mul(n),s=this.encodePoint(i),a=this.hashInt(s,r.pubBytes(),e).mul(r.priv()),c=n.add(a).umod(this.curve.n);return this.makeSignature({R:i,S:c,Rencoded:s})},a.prototype.verify=function(e,t,r){if(e=o(e),(t=this.makeSignature(t)).S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var n=this.keyFromPublic(r),i=this.hashInt(t.Rencoded(),n.pubBytes(),e),s=this.g.mul(t.S());return t.R().add(n.pub().mul(i)).eq(s)},a.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return r.intFromLE(e.digest()).umod(this.curve.n)},a.prototype.keyFromPublic=function(e){return i.fromPublic(this,e)},a.prototype.keyFromSecret=function(e){return i.fromSecret(this,e)},a.prototype.makeSignature=function(e){return e instanceof s?e:new s(this,e)},a.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},a.prototype.decodePoint=function(e){var t=(e=r.parseBytes(e)).length-1,n=e.slice(0,t).concat(-129&e[t]),o=!!(128&e[t]),i=r.intFromLE(n);return this.curve.pointFromY(i,o)},a.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},a.prototype.decodeInt=function(e){return r.intFromLE(e)},a.prototype.isPoint=function(e){return e instanceof this.pointClass},eddsa}function requireElliptic(){return hasRequiredElliptic||(hasRequiredElliptic=1,(e=elliptic).version=require$$0.version,e.utils=requireUtils$1(),e.rand=requireBrorand(),e.curve=requireCurve(),e.curves=requireCurves(),e.ec=requireEc(),e.eddsa=requireEddsa()),elliptic;var e}var asn1$1={},asn1={},bn$5={exports:{}},bn$4=bn$5.exports,hasRequiredBn$2;function requireBn$2(){return hasRequiredBn$2||(hasRequiredBn$2=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var i;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$1().Buffer}catch(T){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,n){for(var o=0,i=Math.min(e.length,r),s=t;s<i;s++){var a=e.charCodeAt(s)-48;o*=n,o+=a>=49?a-49+10:a>=17?a-17+10:a}return o}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var o=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(o++,this.negative=1),o<e.length&&(16===t?this._parseHex(e,o,n):(this._parseBase(e,t,o),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var i,s,a=0;if("be"===n)for(o=e.length-1,i=0;o>=0;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===n)for(o=0,i=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this.strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,i=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;this.strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,o=1;o<=67108863;o*=t)n++;n--,o=o/t|0;for(var i=e.length-r,s=i%n,a=Math.min(i,i-s)+r,u=0,l=r;l<a;l+=n)u=c(e,l,l+n,t),this.imuln(o),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var d=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)d*=t;this.imuln(d),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var o=0|e.words[0],i=0|t.words[0],s=o*i,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,d=67108863&c,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;l+=(s=(o=0|e.words[p])*(i=0|t.words[f])+d)/67108864|0,d=67108863&s}r.words[u]=0|d,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var o=0,i=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<o|i)).toString(16);i=a>>>24-o&16777215,(o+=2)>=26&&(o-=26,s--),n=0!==i||s!==this.length-1?u[6-c.length]+c+n:c+n}for(0!==i&&(n=i.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=l[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:u[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==i),this.toArrayLike(i,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var o=this.byteLength(),i=n||Math.max(1,o);r(o<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===t,u=new e(i),l=this.clone();if(c){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[a]=s;for(;a<i;a++)u[a]=0}else{for(a=0;a<i-o;a++)u[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[i-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var o=0;o<t;o++)this.words[o]=67108863&~this.words[o];return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,o=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<o:this.words[n]&~(1<<o),this.strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var o=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+o,this.words[i]=67108863&t,o=t>>>26;for(;0!==o&&i<r.length;i++)t=(0|r.words[i])+o,this.words[i]=67108863&t,o=t>>>26;if(this.length=r.length,0!==o)this.words[this.length]=o,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,o=this.cmp(e);if(0===o)return this.negative=0,this.length=1,this.words[0]=0,this;o>0?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)i=(t=(0|r.words[s])-(0|n.words[s])+i)>>26,this.words[s]=67108863&t;for(;0!==i&&s<r.length;s++)i=(t=(0|r.words[s])+i)>>26,this.words[s]=67108863&t;if(0===i&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var n,o,i,s=e.words,a=t.words,c=r.words,u=0,l=0|s[0],d=8191&l,h=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,y=0|s[2],g=8191&y,b=y>>>13,_=0|s[3],w=8191&_,v=_>>>13,I=0|s[4],k=8191&I,T=I>>>13,A=0|s[5],S=8191&A,E=A>>>13,P=0|s[6],O=8191&P,R=P>>>13,C=0|s[7],$=8191&C,N=C>>>13,M=0|s[8],x=8191&M,B=M>>>13,D=0|s[9],L=8191&D,F=D>>>13,j=0|a[0],U=8191&j,q=j>>>13,K=0|a[1],H=8191&K,G=K>>>13,z=0|a[2],V=8191&z,Z=z>>>13,W=0|a[3],J=8191&W,Y=W>>>13,Q=0|a[4],X=8191&Q,ee=Q>>>13,te=0|a[5],re=8191&te,ne=te>>>13,oe=0|a[6],ie=8191&oe,se=oe>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],de=8191&le,he=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(u+(n=Math.imul(d,U))|0)+((8191&(o=(o=Math.imul(d,q))+Math.imul(h,U)|0))<<13)|0;u=((i=Math.imul(h,q))+(o>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,U),o=(o=Math.imul(p,q))+Math.imul(m,U)|0,i=Math.imul(m,q);var ge=(u+(n=n+Math.imul(d,H)|0)|0)+((8191&(o=(o=o+Math.imul(d,G)|0)+Math.imul(h,H)|0))<<13)|0;u=((i=i+Math.imul(h,G)|0)+(o>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,U),o=(o=Math.imul(g,q))+Math.imul(b,U)|0,i=Math.imul(b,q),n=n+Math.imul(p,H)|0,o=(o=o+Math.imul(p,G)|0)+Math.imul(m,H)|0,i=i+Math.imul(m,G)|0;var be=(u+(n=n+Math.imul(d,V)|0)|0)+((8191&(o=(o=o+Math.imul(d,Z)|0)+Math.imul(h,V)|0))<<13)|0;u=((i=i+Math.imul(h,Z)|0)+(o>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,U),o=(o=Math.imul(w,q))+Math.imul(v,U)|0,i=Math.imul(v,q),n=n+Math.imul(g,H)|0,o=(o=o+Math.imul(g,G)|0)+Math.imul(b,H)|0,i=i+Math.imul(b,G)|0,n=n+Math.imul(p,V)|0,o=(o=o+Math.imul(p,Z)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,Z)|0;var _e=(u+(n=n+Math.imul(d,J)|0)|0)+((8191&(o=(o=o+Math.imul(d,Y)|0)+Math.imul(h,J)|0))<<13)|0;u=((i=i+Math.imul(h,Y)|0)+(o>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(k,U),o=(o=Math.imul(k,q))+Math.imul(T,U)|0,i=Math.imul(T,q),n=n+Math.imul(w,H)|0,o=(o=o+Math.imul(w,G)|0)+Math.imul(v,H)|0,i=i+Math.imul(v,G)|0,n=n+Math.imul(g,V)|0,o=(o=o+Math.imul(g,Z)|0)+Math.imul(b,V)|0,i=i+Math.imul(b,Z)|0,n=n+Math.imul(p,J)|0,o=(o=o+Math.imul(p,Y)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,Y)|0;var we=(u+(n=n+Math.imul(d,X)|0)|0)+((8191&(o=(o=o+Math.imul(d,ee)|0)+Math.imul(h,X)|0))<<13)|0;u=((i=i+Math.imul(h,ee)|0)+(o>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(S,U),o=(o=Math.imul(S,q))+Math.imul(E,U)|0,i=Math.imul(E,q),n=n+Math.imul(k,H)|0,o=(o=o+Math.imul(k,G)|0)+Math.imul(T,H)|0,i=i+Math.imul(T,G)|0,n=n+Math.imul(w,V)|0,o=(o=o+Math.imul(w,Z)|0)+Math.imul(v,V)|0,i=i+Math.imul(v,Z)|0,n=n+Math.imul(g,J)|0,o=(o=o+Math.imul(g,Y)|0)+Math.imul(b,J)|0,i=i+Math.imul(b,Y)|0,n=n+Math.imul(p,X)|0,o=(o=o+Math.imul(p,ee)|0)+Math.imul(m,X)|0,i=i+Math.imul(m,ee)|0;var ve=(u+(n=n+Math.imul(d,re)|0)|0)+((8191&(o=(o=o+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;u=((i=i+Math.imul(h,ne)|0)+(o>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(O,U),o=(o=Math.imul(O,q))+Math.imul(R,U)|0,i=Math.imul(R,q),n=n+Math.imul(S,H)|0,o=(o=o+Math.imul(S,G)|0)+Math.imul(E,H)|0,i=i+Math.imul(E,G)|0,n=n+Math.imul(k,V)|0,o=(o=o+Math.imul(k,Z)|0)+Math.imul(T,V)|0,i=i+Math.imul(T,Z)|0,n=n+Math.imul(w,J)|0,o=(o=o+Math.imul(w,Y)|0)+Math.imul(v,J)|0,i=i+Math.imul(v,Y)|0,n=n+Math.imul(g,X)|0,o=(o=o+Math.imul(g,ee)|0)+Math.imul(b,X)|0,i=i+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,o=(o=o+Math.imul(p,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var Ie=(u+(n=n+Math.imul(d,ie)|0)|0)+((8191&(o=(o=o+Math.imul(d,se)|0)+Math.imul(h,ie)|0))<<13)|0;u=((i=i+Math.imul(h,se)|0)+(o>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,U),o=(o=Math.imul($,q))+Math.imul(N,U)|0,i=Math.imul(N,q),n=n+Math.imul(O,H)|0,o=(o=o+Math.imul(O,G)|0)+Math.imul(R,H)|0,i=i+Math.imul(R,G)|0,n=n+Math.imul(S,V)|0,o=(o=o+Math.imul(S,Z)|0)+Math.imul(E,V)|0,i=i+Math.imul(E,Z)|0,n=n+Math.imul(k,J)|0,o=(o=o+Math.imul(k,Y)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,Y)|0,n=n+Math.imul(w,X)|0,o=(o=o+Math.imul(w,ee)|0)+Math.imul(v,X)|0,i=i+Math.imul(v,ee)|0,n=n+Math.imul(g,re)|0,o=(o=o+Math.imul(g,ne)|0)+Math.imul(b,re)|0,i=i+Math.imul(b,ne)|0,n=n+Math.imul(p,ie)|0,o=(o=o+Math.imul(p,se)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,se)|0;var ke=(u+(n=n+Math.imul(d,ce)|0)|0)+((8191&(o=(o=o+Math.imul(d,ue)|0)+Math.imul(h,ce)|0))<<13)|0;u=((i=i+Math.imul(h,ue)|0)+(o>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(x,U),o=(o=Math.imul(x,q))+Math.imul(B,U)|0,i=Math.imul(B,q),n=n+Math.imul($,H)|0,o=(o=o+Math.imul($,G)|0)+Math.imul(N,H)|0,i=i+Math.imul(N,G)|0,n=n+Math.imul(O,V)|0,o=(o=o+Math.imul(O,Z)|0)+Math.imul(R,V)|0,i=i+Math.imul(R,Z)|0,n=n+Math.imul(S,J)|0,o=(o=o+Math.imul(S,Y)|0)+Math.imul(E,J)|0,i=i+Math.imul(E,Y)|0,n=n+Math.imul(k,X)|0,o=(o=o+Math.imul(k,ee)|0)+Math.imul(T,X)|0,i=i+Math.imul(T,ee)|0,n=n+Math.imul(w,re)|0,o=(o=o+Math.imul(w,ne)|0)+Math.imul(v,re)|0,i=i+Math.imul(v,ne)|0,n=n+Math.imul(g,ie)|0,o=(o=o+Math.imul(g,se)|0)+Math.imul(b,ie)|0,i=i+Math.imul(b,se)|0,n=n+Math.imul(p,ce)|0,o=(o=o+Math.imul(p,ue)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,ue)|0;var Te=(u+(n=n+Math.imul(d,de)|0)|0)+((8191&(o=(o=o+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;u=((i=i+Math.imul(h,he)|0)+(o>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(L,U),o=(o=Math.imul(L,q))+Math.imul(F,U)|0,i=Math.imul(F,q),n=n+Math.imul(x,H)|0,o=(o=o+Math.imul(x,G)|0)+Math.imul(B,H)|0,i=i+Math.imul(B,G)|0,n=n+Math.imul($,V)|0,o=(o=o+Math.imul($,Z)|0)+Math.imul(N,V)|0,i=i+Math.imul(N,Z)|0,n=n+Math.imul(O,J)|0,o=(o=o+Math.imul(O,Y)|0)+Math.imul(R,J)|0,i=i+Math.imul(R,Y)|0,n=n+Math.imul(S,X)|0,o=(o=o+Math.imul(S,ee)|0)+Math.imul(E,X)|0,i=i+Math.imul(E,ee)|0,n=n+Math.imul(k,re)|0,o=(o=o+Math.imul(k,ne)|0)+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,n=n+Math.imul(w,ie)|0,o=(o=o+Math.imul(w,se)|0)+Math.imul(v,ie)|0,i=i+Math.imul(v,se)|0,n=n+Math.imul(g,ce)|0,o=(o=o+Math.imul(g,ue)|0)+Math.imul(b,ce)|0,i=i+Math.imul(b,ue)|0,n=n+Math.imul(p,de)|0,o=(o=o+Math.imul(p,he)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,he)|0;var Ae=(u+(n=n+Math.imul(d,pe)|0)|0)+((8191&(o=(o=o+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;u=((i=i+Math.imul(h,me)|0)+(o>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(L,H),o=(o=Math.imul(L,G))+Math.imul(F,H)|0,i=Math.imul(F,G),n=n+Math.imul(x,V)|0,o=(o=o+Math.imul(x,Z)|0)+Math.imul(B,V)|0,i=i+Math.imul(B,Z)|0,n=n+Math.imul($,J)|0,o=(o=o+Math.imul($,Y)|0)+Math.imul(N,J)|0,i=i+Math.imul(N,Y)|0,n=n+Math.imul(O,X)|0,o=(o=o+Math.imul(O,ee)|0)+Math.imul(R,X)|0,i=i+Math.imul(R,ee)|0,n=n+Math.imul(S,re)|0,o=(o=o+Math.imul(S,ne)|0)+Math.imul(E,re)|0,i=i+Math.imul(E,ne)|0,n=n+Math.imul(k,ie)|0,o=(o=o+Math.imul(k,se)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,se)|0,n=n+Math.imul(w,ce)|0,o=(o=o+Math.imul(w,ue)|0)+Math.imul(v,ce)|0,i=i+Math.imul(v,ue)|0,n=n+Math.imul(g,de)|0,o=(o=o+Math.imul(g,he)|0)+Math.imul(b,de)|0,i=i+Math.imul(b,he)|0;var Se=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(o=(o=o+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((i=i+Math.imul(m,me)|0)+(o>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,V),o=(o=Math.imul(L,Z))+Math.imul(F,V)|0,i=Math.imul(F,Z),n=n+Math.imul(x,J)|0,o=(o=o+Math.imul(x,Y)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,Y)|0,n=n+Math.imul($,X)|0,o=(o=o+Math.imul($,ee)|0)+Math.imul(N,X)|0,i=i+Math.imul(N,ee)|0,n=n+Math.imul(O,re)|0,o=(o=o+Math.imul(O,ne)|0)+Math.imul(R,re)|0,i=i+Math.imul(R,ne)|0,n=n+Math.imul(S,ie)|0,o=(o=o+Math.imul(S,se)|0)+Math.imul(E,ie)|0,i=i+Math.imul(E,se)|0,n=n+Math.imul(k,ce)|0,o=(o=o+Math.imul(k,ue)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,ue)|0,n=n+Math.imul(w,de)|0,o=(o=o+Math.imul(w,he)|0)+Math.imul(v,de)|0,i=i+Math.imul(v,he)|0;var Ee=(u+(n=n+Math.imul(g,pe)|0)|0)+((8191&(o=(o=o+Math.imul(g,me)|0)+Math.imul(b,pe)|0))<<13)|0;u=((i=i+Math.imul(b,me)|0)+(o>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,J),o=(o=Math.imul(L,Y))+Math.imul(F,J)|0,i=Math.imul(F,Y),n=n+Math.imul(x,X)|0,o=(o=o+Math.imul(x,ee)|0)+Math.imul(B,X)|0,i=i+Math.imul(B,ee)|0,n=n+Math.imul($,re)|0,o=(o=o+Math.imul($,ne)|0)+Math.imul(N,re)|0,i=i+Math.imul(N,ne)|0,n=n+Math.imul(O,ie)|0,o=(o=o+Math.imul(O,se)|0)+Math.imul(R,ie)|0,i=i+Math.imul(R,se)|0,n=n+Math.imul(S,ce)|0,o=(o=o+Math.imul(S,ue)|0)+Math.imul(E,ce)|0,i=i+Math.imul(E,ue)|0,n=n+Math.imul(k,de)|0,o=(o=o+Math.imul(k,he)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,he)|0;var Pe=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(o=(o=o+Math.imul(w,me)|0)+Math.imul(v,pe)|0))<<13)|0;u=((i=i+Math.imul(v,me)|0)+(o>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(L,X),o=(o=Math.imul(L,ee))+Math.imul(F,X)|0,i=Math.imul(F,ee),n=n+Math.imul(x,re)|0,o=(o=o+Math.imul(x,ne)|0)+Math.imul(B,re)|0,i=i+Math.imul(B,ne)|0,n=n+Math.imul($,ie)|0,o=(o=o+Math.imul($,se)|0)+Math.imul(N,ie)|0,i=i+Math.imul(N,se)|0,n=n+Math.imul(O,ce)|0,o=(o=o+Math.imul(O,ue)|0)+Math.imul(R,ce)|0,i=i+Math.imul(R,ue)|0,n=n+Math.imul(S,de)|0,o=(o=o+Math.imul(S,he)|0)+Math.imul(E,de)|0,i=i+Math.imul(E,he)|0;var Oe=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(o=(o=o+Math.imul(k,me)|0)+Math.imul(T,pe)|0))<<13)|0;u=((i=i+Math.imul(T,me)|0)+(o>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(L,re),o=(o=Math.imul(L,ne))+Math.imul(F,re)|0,i=Math.imul(F,ne),n=n+Math.imul(x,ie)|0,o=(o=o+Math.imul(x,se)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,se)|0,n=n+Math.imul($,ce)|0,o=(o=o+Math.imul($,ue)|0)+Math.imul(N,ce)|0,i=i+Math.imul(N,ue)|0,n=n+Math.imul(O,de)|0,o=(o=o+Math.imul(O,he)|0)+Math.imul(R,de)|0,i=i+Math.imul(R,he)|0;var Re=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(o=(o=o+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;u=((i=i+Math.imul(E,me)|0)+(o>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(L,ie),o=(o=Math.imul(L,se))+Math.imul(F,ie)|0,i=Math.imul(F,se),n=n+Math.imul(x,ce)|0,o=(o=o+Math.imul(x,ue)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,ue)|0,n=n+Math.imul($,de)|0,o=(o=o+Math.imul($,he)|0)+Math.imul(N,de)|0,i=i+Math.imul(N,he)|0;var Ce=(u+(n=n+Math.imul(O,pe)|0)|0)+((8191&(o=(o=o+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;u=((i=i+Math.imul(R,me)|0)+(o>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(L,ce),o=(o=Math.imul(L,ue))+Math.imul(F,ce)|0,i=Math.imul(F,ue),n=n+Math.imul(x,de)|0,o=(o=o+Math.imul(x,he)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,he)|0;var $e=(u+(n=n+Math.imul($,pe)|0)|0)+((8191&(o=(o=o+Math.imul($,me)|0)+Math.imul(N,pe)|0))<<13)|0;u=((i=i+Math.imul(N,me)|0)+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,n=Math.imul(L,de),o=(o=Math.imul(L,he))+Math.imul(F,de)|0,i=Math.imul(F,he);var Ne=(u+(n=n+Math.imul(x,pe)|0)|0)+((8191&(o=(o=o+Math.imul(x,me)|0)+Math.imul(B,pe)|0))<<13)|0;u=((i=i+Math.imul(B,me)|0)+(o>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Me=(u+(n=Math.imul(L,pe))|0)+((8191&(o=(o=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return u=((i=Math.imul(F,me))+(o>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=ye,c[1]=ge,c[2]=be,c[3]=_e,c[4]=we,c[5]=ve,c[6]=Ie,c[7]=ke,c[8]=Te,c[9]=Ae,c[10]=Se,c[11]=Ee,c[12]=Pe,c[13]=Oe,c[14]=Re,c[15]=Ce,c[16]=$e,c[17]=Ne,c[18]=Me,0!==u&&(c[19]=u,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=h),o.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?f(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,o=0,i=0;i<r.length-1;i++){var s=o;o=0;for(var a=67108863&n,c=Math.min(i,t.length-1),u=Math.max(0,i-e.length+1);u<=c;u++){var l=i-u,d=(0|e.words[l])*(0|t.words[u]),h=67108863&d;a=67108863&(h=h+a|0),o+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[i]=a,n=s,s=o}return 0!==n?r.words[i]=n:r.length--,r.strip()}(this,e,t):p(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,o=0;o<t;o++)n|=(1&e)<<t-o-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,o,i){for(var s=0;s<i;s++)n[s]=t[e[s]],o[s]=r[e[s]]},m.prototype.transform=function(e,t,r,n,o,i){this.permute(i,e,t,r,n,o);for(var s=1;s<o;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<o;l+=a)for(var d=c,h=u,f=0;f<s;f++){var p=r[l+f],m=n[l+f],y=r[l+f+s],g=n[l+f+s],b=d*y-h*g;g=d*g+h*y,y=b,r[l+f]=p+y,n[l+f]=m+g,r[l+f+s]=p-y,n[l+f+s]=m-g,f!==a&&(b=c*d-u*h,h=c*h+u*d,d=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,o=0;for(r=r/2|0;r;r>>>=1)o++;return 1<<o+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var o=e[n];e[n]=e[r-n-1],e[r-n-1]=o,o=t[n],t[n]=-t[r-n-1],t[r-n-1]=-o}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var o=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&o,r=o<67108864?0:o/67108864|0}return e},m.prototype.convert13b=function(e,t,n,o){for(var i=0,s=0;s<t;s++)i+=0|e[s],n[2*s]=8191&i,i>>>=13,n[2*s+1]=8191&i,i>>>=13;for(s=2*t;s<o;++s)n[s]=0;r(0===i),r(!(-8192&i))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),o=this.makeRBT(n),i=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,i,a,c,n,o),this.transform(u,i,l,d,n,o);for(var f=0;f<n;f++){var p=a[f]*l[f]-c[f]*d[f];c[f]=a[f]*d[f]+c[f]*l[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,h,i,n,o),this.conjugate(h,i,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),p(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var o=(0|this.words[n])*e,i=(67108863&o)+(67108863&t);t>>=26,t+=o/67108864|0,t+=i>>>26,this.words[n]=67108863&i}return 0!==t&&(this.words[n]=t,this.length++),this.length=0===e?1:this.length,this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=(e.words[n]&1<<o)>>>o}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,o=(e-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&i,c=(0|this.words[t])-a<<n;this.words[t]=c|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==o){for(t=this.length-1;t>=0;t--)this.words[t+o]=this.words[t];for(t=0;t<o;t++)this.words[t]=0;this.length+=o}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var o;r("number"==typeof e&&e>=0),o=t?(t-t%26)/26:0;var i=e%26,s=Math.min((e-i)/26,this.length),a=67108863^67108863>>>i<<i,c=n;if(o-=s,o=Math.max(0,o),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=o);u--){var d=0|this.words[u];this.words[u]=l<<26-i|d>>>i,l=d&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,o=1<<t;return!(this.length<=n||!(this.words[n]&o))},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var o=67108863^67108863>>>t<<t;this.words[this.length-1]&=o}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var o,i,s=e.length+n;this._expand(s);var a=0;for(o=0;o<e.length;o++){i=(0|this.words[o+n])+a;var c=(0|e.words[o])*t;a=((i-=67108863&c)>>26)-(c/67108864|0),this.words[o+n]=67108863&i}for(;o<this.length-n;o++)a=(i=(0|this.words[o+n])+a)>>26,this.words[o+n]=67108863&i;if(0===a)return this.strip();for(r(-1===a),a=0,o=0;o<this.length;o++)a=(i=-(0|this.words[o])+a)>>26,this.words[o]=67108863&i;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!=(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(i,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);a&&(a.words[d]=h)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),o=e.andln(1),i=r.cmp(n);return i<0||1===o&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,o=this.length-1;o>=0;o--)n=(t*n+(0|this.words[o]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*t;this.words[n]=o/e|0,t=o%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var l=n.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0===(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(d)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(c)):(n.isub(t),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:n.iushln(u)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,l=1;0===(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0===(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var o=t.cmp(r);if(o<0){var i=t;t=r,r=i}else if(0===o||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return!(1&this.words[0])},o.prototype.isOdd=function(){return!(1&~this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,o=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var i=o,s=n;0!==i&&s<this.length;s++){var a=0|this.words[s];i=(a+=i)>>>26,a&=67108863,this.words[s]=a}return 0!==i&&(this.words[s]=i,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var o=0|this.words[0];t=o===e?0:o<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],o=0|e.words[r];if(n!==o){n<o?t=-1:n>o&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new I(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){I.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},n(b,g),b.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),o=0;o<n;o++)t.words[o]=e.words[o];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=i&r,o=10;o<e.length;o++){var s=0|e.words[o];e.words[o-10]=(s&r)<<4|i>>>22,i=s}i>>>=22,e.words[o-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(_,g),n(w,g),n(v,g),v.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,o=67108863&n;n>>>=26,e.words[r]=o,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new v}return y[e]=t,t},I.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},I.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},I.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},I.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},I.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},I.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},I.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},I.prototype.isqr=function(e){return this.imul(e,e.clone())},I.prototype.sqr=function(e){return this.mul(e,e)},I.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var d=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,y=0;0!==m.cmp(a);y++)m=m.redSqr();r(y<p);var g=this.pow(d,new o(1).iushln(p-y-1));h=h.redMul(g),d=g.redSqr(),f=f.redMul(d),p=y}return h},I.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},I.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],l=c-1;l>=0;l--){var d=u>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==d||0!==s?(s<<=1,s|=d,(4===++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},I.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},I.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new k(e)},n(k,I),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),i=o;return o.cmp(this.m)>=0?i=o.isub(this.m):o.cmpn(0)<0&&(i=o.iadd(this.m)),i._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$5,bn$4)),bn$5.exports}var api={},vmBrowserify={},hasRequiredVmBrowserify,hasRequiredApi;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1},Object_keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var r in e)t.push(r);return t},forEach=function(e,t){if(e.forEach)return e.forEach(t);for(var r=0;r<e.length;r++)t(e[r],r,e)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(e,t,r){Object.defineProperty(e,t,{writable:!0,enumerable:!1,configurable:!0,value:r})}}catch(e){return function(e,t,r){e[t]=r}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(e){if(!(this instanceof Script))return new Script(e);this.code=e};Script.prototype.runInContext=function(e){if(!(e instanceof Context))throw new TypeError("needs a 'context' argument.");var t=document.createElement("iframe");t.style||(t.style={}),t.style.display="none",document.body.appendChild(t);var r=t.contentWindow,n=r.eval,o=r.execScript;!n&&o&&(o.call(r,"null"),n=r.eval),forEach(Object_keys(e),function(t){r[t]=e[t]}),forEach(globals,function(t){e[t]&&(r[t]=e[t])});var i=Object_keys(r),s=n.call(r,this.code);return forEach(Object_keys(r),function(t){(t in e||-1===indexOf(i,t))&&(e[t]=r[t])}),forEach(globals,function(t){t in e||defineProp(e,t,r[t])}),document.body.removeChild(t),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(e){var t=Script.createContext(e),r=this.runInContext(t);return e&&forEach(Object_keys(t),function(r){e[r]=t[r]}),r},forEach(Object_keys(Script.prototype),function(e){exports[e]=Script[e]=function(t){var r=Script(t);return r[e].apply(r,[].slice.call(arguments,1))}}),exports.isContext=function(e){return e instanceof Context},exports.createScript=function(e){return exports.Script(e)},exports.createContext=Script.createContext=function(e){var t=new Context;return"object"==typeof e&&forEach(Object_keys(e),function(r){t[r]=e[r]}),t}}(vmBrowserify)),vmBrowserify}function requireApi(){return hasRequiredApi||(hasRequiredApi=1,function(e){var t=requireAsn1$1(),r=requireInherits_browser();function n(e,t){this.name=e,this.body=t,this.decoders={},this.encoders={}}e.define=function(e,t){return new n(e,t)},n.prototype._createNamed=function(e){var t;try{t=requireVmBrowserify().runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(n){t=function(e){this._initNamed(e)}}return r(t,e),t.prototype._initNamed=function(t){e.call(this,t)},new t(this)},n.prototype._getDecoder=function(e){return e=e||"der",this.decoders.hasOwnProperty(e)||(this.decoders[e]=this._createNamed(t.decoders[e])),this.decoders[e]},n.prototype.decode=function(e,t,r){return this._getDecoder(t).decode(e,r)},n.prototype._getEncoder=function(e){return e=e||"der",this.encoders.hasOwnProperty(e)||(this.encoders[e]=this._createNamed(t.encoders[e])),this.encoders[e]},n.prototype.encode=function(e,t,r){return this._getEncoder(t).encode(e,r)}}(api)),api}var base={},reporter={},hasRequiredReporter;function requireReporter(){if(hasRequiredReporter)return reporter;hasRequiredReporter=1;var e=requireInherits_browser();function t(e){this._reporterState={obj:null,path:[],options:e||{},errors:[]}}function r(e,t){this.path=e,this.rethrow(t)}return reporter.Reporter=t,t.prototype.isError=function(e){return e instanceof r},t.prototype.save=function(){var e=this._reporterState;return{obj:e.obj,pathLen:e.path.length}},t.prototype.restore=function(e){var t=this._reporterState;t.obj=e.obj,t.path=t.path.slice(0,e.pathLen)},t.prototype.enterKey=function(e){return this._reporterState.path.push(e)},t.prototype.exitKey=function(e){var t=this._reporterState;t.path=t.path.slice(0,e-1)},t.prototype.leaveKey=function(e,t,r){var n=this._reporterState;this.exitKey(e),null!==n.obj&&(n.obj[t]=r)},t.prototype.path=function(){return this._reporterState.path.join("/")},t.prototype.enterObject=function(){var e=this._reporterState,t=e.obj;return e.obj={},t},t.prototype.leaveObject=function(e){var t=this._reporterState,r=t.obj;return t.obj=e,r},t.prototype.error=function(e){var t,n=this._reporterState,o=e instanceof r;if(t=o?e:new r(n.path.map(function(e){return"["+JSON.stringify(e)+"]"}).join(""),e.message||e,e.stack),!n.options.partial)throw t;return o||n.errors.push(t),t},t.prototype.wrapResult=function(e){var t=this._reporterState;return t.options.partial?{result:this.isError(e)?null:e,errors:t.errors}:e},e(r,Error),r.prototype.rethrow=function(e){if(this.message=e+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,r),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this},reporter}var buffer={},hasRequiredBuffer,node,hasRequiredNode,hasRequiredBase;function requireBuffer(){if(hasRequiredBuffer)return buffer;hasRequiredBuffer=1;var e=requireInherits_browser(),t=requireBase().Reporter,r=requireDist$1().Buffer;function n(e,n){t.call(this,n),r.isBuffer(e)?(this.base=e,this.offset=0,this.length=e.length):this.error("Input not Buffer")}function o(e,t){if(Array.isArray(e))this.length=0,this.value=e.map(function(e){return e instanceof o||(e=new o(e,t)),this.length+=e.length,e},this);else if("number"==typeof e){if(!(0<=e&&e<=255))return t.error("non-byte EncoderBuffer value");this.value=e,this.length=1}else if("string"==typeof e)this.value=e,this.length=r.byteLength(e);else{if(!r.isBuffer(e))return t.error("Unsupported type: "+typeof e);this.value=e,this.length=e.length}}return e(n,t),buffer.DecoderBuffer=n,n.prototype.save=function(){return{offset:this.offset,reporter:t.prototype.save.call(this)}},n.prototype.restore=function(e){var r=new n(this.base);return r.offset=e.offset,r.length=this.offset,this.offset=e.offset,t.prototype.restore.call(this,e.reporter),r},n.prototype.isEmpty=function(){return this.offset===this.length},n.prototype.readUInt8=function(e){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(e||"DecoderBuffer overrun")},n.prototype.skip=function(e,t){if(!(this.offset+e<=this.length))return this.error(t||"DecoderBuffer overrun");var r=new n(this.base);return r._reporterState=this._reporterState,r.offset=this.offset,r.length=this.offset+e,this.offset+=e,r},n.prototype.raw=function(e){return this.base.slice(e?e.offset:this.offset,this.length)},buffer.EncoderBuffer=o,o.prototype.join=function(e,t){return e||(e=new r(this.length)),t||(t=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(r){r.join(e,t),t+=r.length}):("number"==typeof this.value?e[t]=this.value:"string"==typeof this.value?e.write(this.value,t):r.isBuffer(this.value)&&this.value.copy(e,t),t+=this.length)),e},buffer}function requireNode(){if(hasRequiredNode)return node;hasRequiredNode=1;var e=requireBase().Reporter,t=requireBase().EncoderBuffer,r=requireBase().DecoderBuffer,n=requireMinimalisticAssert(),o=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],i=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(o);function s(e,t){var r={};this._baseState=r,r.enc=e,r.parent=t||null,r.children=null,r.tag=null,r.args=null,r.reverseArgs=null,r.choice=null,r.optional=!1,r.any=!1,r.obj=!1,r.use=null,r.useDecoder=null,r.key=null,r.default=null,r.explicit=null,r.implicit=null,r.contains=null,r.parent||(r.children=[],this._wrap())}node=s;var a=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];return s.prototype.clone=function(){var e=this._baseState,t={};a.forEach(function(r){t[r]=e[r]});var r=new this.constructor(t.parent);return r._baseState=t,r},s.prototype._wrap=function(){var e=this._baseState;i.forEach(function(t){this[t]=function(){var r=new this.constructor(this);return e.children.push(r),r[t].apply(r,arguments)}},this)},s.prototype._init=function(e){var t=this._baseState;n(null===t.parent),e.call(this),t.children=t.children.filter(function(e){return e._baseState.parent===this},this),n.equal(t.children.length,1,"Root node can have only one child")},s.prototype._useArgs=function(e){var t=this._baseState,r=e.filter(function(e){return e instanceof this.constructor},this);e=e.filter(function(e){return!(e instanceof this.constructor)},this),0!==r.length&&(n(null===t.children),t.children=r,r.forEach(function(e){e._baseState.parent=this},this)),0!==e.length&&(n(null===t.args),t.args=e,t.reverseArgs=e.map(function(e){if("object"!=typeof e||e.constructor!==Object)return e;var t={};return Object.keys(e).forEach(function(r){r==(0|r)&&(r|=0);var n=e[r];t[n]=r}),t}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(e){s.prototype[e]=function(){var t=this._baseState;throw new Error(e+" not implemented for encoding: "+t.enc)}}),o.forEach(function(e){s.prototype[e]=function(){var t=this._baseState,r=Array.prototype.slice.call(arguments);return n(null===t.tag),t.tag=e,this._useArgs(r),this}}),s.prototype.use=function(e){n(e);var t=this._baseState;return n(null===t.use),t.use=e,this},s.prototype.optional=function(){return this._baseState.optional=!0,this},s.prototype.def=function(e){var t=this._baseState;return n(null===t.default),t.default=e,t.optional=!0,this},s.prototype.explicit=function(e){var t=this._baseState;return n(null===t.explicit&&null===t.implicit),t.explicit=e,this},s.prototype.implicit=function(e){var t=this._baseState;return n(null===t.explicit&&null===t.implicit),t.implicit=e,this},s.prototype.obj=function(){var e=this._baseState,t=Array.prototype.slice.call(arguments);return e.obj=!0,0!==t.length&&this._useArgs(t),this},s.prototype.key=function(e){var t=this._baseState;return n(null===t.key),t.key=e,this},s.prototype.any=function(){return this._baseState.any=!0,this},s.prototype.choice=function(e){var t=this._baseState;return n(null===t.choice),t.choice=e,this._useArgs(Object.keys(e).map(function(t){return e[t]})),this},s.prototype.contains=function(e){var t=this._baseState;return n(null===t.use),t.contains=e,this},s.prototype._decode=function(e,t){var n=this._baseState;if(null===n.parent)return e.wrapResult(n.children[0]._decode(e,t));var o,i=n.default,s=!0,a=null;if(null!==n.key&&(a=e.enterKey(n.key)),n.optional){var c=null;if(null!==n.explicit?c=n.explicit:null!==n.implicit?c=n.implicit:null!==n.tag&&(c=n.tag),null!==c||n.any){if(s=this._peekTag(e,c,n.any),e.isError(s))return s}else{var u=e.save();try{null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t),s=!0}catch(p){s=!1}e.restore(u)}}if(n.obj&&s&&(o=e.enterObject()),s){if(null!==n.explicit){var l=this._decodeTag(e,n.explicit);if(e.isError(l))return l;e=l}var d=e.offset;if(null===n.use&&null===n.choice){if(n.any)u=e.save();var h=this._decodeTag(e,null!==n.implicit?n.implicit:n.tag,n.any);if(e.isError(h))return h;n.any?i=e.raw(u):e=h}if(t&&t.track&&null!==n.tag&&t.track(e.path(),d,e.length,"tagged"),t&&t.track&&null!==n.tag&&t.track(e.path(),e.offset,e.length,"content"),n.any||(i=null===n.choice?this._decodeGeneric(n.tag,e,t):this._decodeChoice(e,t)),e.isError(i))return i;if(n.any||null!==n.choice||null===n.children||n.children.forEach(function(r){r._decode(e,t)}),n.contains&&("octstr"===n.tag||"bitstr"===n.tag)){var f=new r(i);i=this._getUse(n.contains,e._reporterState.obj)._decode(f,t)}}return n.obj&&s&&(i=e.leaveObject(o)),null===n.key||null===i&&!0!==s?null!==a&&e.exitKey(a):e.leaveKey(a,n.key,i),i},s.prototype._decodeGeneric=function(e,t,r){var n=this._baseState;return"seq"===e||"set"===e?null:"seqof"===e||"setof"===e?this._decodeList(t,e,n.args[0],r):/str$/.test(e)?this._decodeStr(t,e,r):"objid"===e&&n.args?this._decodeObjid(t,n.args[0],n.args[1],r):"objid"===e?this._decodeObjid(t,null,null,r):"gentime"===e||"utctime"===e?this._decodeTime(t,e,r):"null_"===e?this._decodeNull(t,r):"bool"===e?this._decodeBool(t,r):"objDesc"===e?this._decodeStr(t,e,r):"int"===e||"enum"===e?this._decodeInt(t,n.args&&n.args[0],r):null!==n.use?this._getUse(n.use,t._reporterState.obj)._decode(t,r):t.error("unknown tag: "+e)},s.prototype._getUse=function(e,t){var r=this._baseState;return r.useDecoder=this._use(e,t),n(null===r.useDecoder._baseState.parent),r.useDecoder=r.useDecoder._baseState.children[0],r.implicit!==r.useDecoder._baseState.implicit&&(r.useDecoder=r.useDecoder.clone(),r.useDecoder._baseState.implicit=r.implicit),r.useDecoder},s.prototype._decodeChoice=function(e,t){var r=this._baseState,n=null,o=!1;return Object.keys(r.choice).some(function(i){var s=e.save(),a=r.choice[i];try{var c=a._decode(e,t);if(e.isError(c))return!1;n={type:i,value:c},o=!0}catch(u){return e.restore(s),!1}return!0},this),o?n:e.error("Choice not matched")},s.prototype._createEncoderBuffer=function(e){return new t(e,this.reporter)},s.prototype._encode=function(e,t,r){var n=this._baseState;if(null===n.default||n.default!==e){var o=this._encodeValue(e,t,r);if(void 0!==o&&!this._skipDefault(o,t,r))return o}},s.prototype._encodeValue=function(t,r,n){var o=this._baseState;if(null===o.parent)return o.children[0]._encode(t,r||new e);var i=null;if(this.reporter=r,o.optional&&void 0===t){if(null===o.default)return;t=o.default}var s=null,a=!1;if(o.any)i=this._createEncoderBuffer(t);else if(o.choice)i=this._encodeChoice(t,r);else if(o.contains)s=this._getUse(o.contains,n)._encode(t,r),a=!0;else if(o.children)s=o.children.map(function(e){if("null_"===e._baseState.tag)return e._encode(null,r,t);if(null===e._baseState.key)return r.error("Child should have a key");var n=r.enterKey(e._baseState.key);if("object"!=typeof t)return r.error("Child expected, but input is not object");var o=e._encode(t[e._baseState.key],r,t);return r.leaveKey(n),o},this).filter(function(e){return e}),s=this._createEncoderBuffer(s);else if("seqof"===o.tag||"setof"===o.tag){if(!o.args||1!==o.args.length)return r.error("Too many args for : "+o.tag);if(!Array.isArray(t))return r.error("seqof/setof, but data is not Array");var c=this.clone();c._baseState.implicit=null,s=this._createEncoderBuffer(t.map(function(e){var n=this._baseState;return this._getUse(n.args[0],t)._encode(e,r)},c))}else null!==o.use?i=this._getUse(o.use,n)._encode(t,r):(s=this._encodePrimitive(o.tag,t),a=!0);if(!o.any&&null===o.choice){var u=null!==o.implicit?o.implicit:o.tag,l=null===o.implicit?"universal":"context";null===u?null===o.use&&r.error("Tag could be omitted only for .use()"):null===o.use&&(i=this._encodeComposite(u,a,l,s))}return null!==o.explicit&&(i=this._encodeComposite(o.explicit,!1,"context",i)),i},s.prototype._encodeChoice=function(e,t){var r=this._baseState,o=r.choice[e.type];return o||n(!1,e.type+" not found in "+JSON.stringify(Object.keys(r.choice))),o._encode(e.value,t)},s.prototype._encodePrimitive=function(e,t){var r=this._baseState;if(/str$/.test(e))return this._encodeStr(t,e);if("objid"===e&&r.args)return this._encodeObjid(t,r.reverseArgs[0],r.args[1]);if("objid"===e)return this._encodeObjid(t,null,null);if("gentime"===e||"utctime"===e)return this._encodeTime(t,e);if("null_"===e)return this._encodeNull();if("int"===e||"enum"===e)return this._encodeInt(t,r.args&&r.reverseArgs[0]);if("bool"===e)return this._encodeBool(t);if("objDesc"===e)return this._encodeStr(t,e);throw new Error("Unsupported tag: "+e)},s.prototype._isNumstr=function(e){return/^[0-9 ]*$/.test(e)},s.prototype._isPrintstr=function(e){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(e)},node}function requireBase(){return hasRequiredBase||(hasRequiredBase=1,(e=base).Reporter=requireReporter().Reporter,e.DecoderBuffer=requireBuffer().DecoderBuffer,e.EncoderBuffer=requireBuffer().EncoderBuffer,e.Node=requireNode()),base;var e}var constants$1={},der={},hasRequiredDer$2,hasRequiredConstants$1;function requireDer$2(){return hasRequiredDer$2||(hasRequiredDer$2=1,e=der,t=requireConstants$1(),e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=t._reverse(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=t._reverse(e.tag)),der;var e,t}function requireConstants$1(){return hasRequiredConstants$1||(hasRequiredConstants$1=1,(e=constants$1)._reverse=function(e){var t={};return Object.keys(e).forEach(function(r){(0|r)==r&&(r|=0);var n=e[r];t[n]=r}),t},e.der=requireDer$2()),constants$1;var e}var decoders={},der_1$1,hasRequiredDer$1,pem$2,hasRequiredPem$2,hasRequiredDecoders;function requireDer$1(){if(hasRequiredDer$1)return der_1$1;hasRequiredDer$1=1;var e=requireInherits_browser(),t=requireAsn1$1(),r=t.base,n=t.bignum,o=t.constants.der;function i(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new s,this.tree._init(e.body)}function s(e){r.Node.call(this,"der",e)}function a(e,t){var r=e.readUInt8(t);if(e.isError(r))return r;var n=o.tagClass[r>>6],i=!(32&r);if(31&~r)r&=31;else{var s=r;for(r=0;!(128&~s);){if(s=e.readUInt8(t),e.isError(s))return s;r<<=7,r|=127&s}}return{cls:n,primitive:i,tag:r,tagStr:o.tag[r]}}function c(e,t,r){var n=e.readUInt8(r);if(e.isError(n))return n;if(!t&&128===n)return null;if(!(128&n))return n;var o=127&n;if(o>4)return e.error("length octect is too long");n=0;for(var i=0;i<o;i++){n<<=8;var s=e.readUInt8(r);if(e.isError(s))return s;n|=s}return n}return der_1$1=i,i.prototype.decode=function(e,t){return e instanceof r.DecoderBuffer||(e=new r.DecoderBuffer(e,t)),this.tree._decode(e,t)},e(s,r.Node),s.prototype._peekTag=function(e,t,r){if(e.isEmpty())return!1;var n=e.save(),o=a(e,'Failed to peek tag: "'+t+'"');return e.isError(o)?o:(e.restore(n),o.tag===t||o.tagStr===t||o.tagStr+"of"===t||r)},s.prototype._decodeTag=function(e,t,r){var n=a(e,'Failed to decode tag of "'+t+'"');if(e.isError(n))return n;var o=c(e,n.primitive,'Failed to get length of "'+t+'"');if(e.isError(o))return o;if(!r&&n.tag!==t&&n.tagStr!==t&&n.tagStr+"of"!==t)return e.error('Failed to match tag: "'+t+'"');if(n.primitive||null!==o)return e.skip(o,'Failed to match body of: "'+t+'"');var i=e.save(),s=this._skipUntilEnd(e,'Failed to skip indefinite length body: "'+this.tag+'"');return e.isError(s)?s:(o=e.offset-i.offset,e.restore(i),e.skip(o,'Failed to match body of: "'+t+'"'))},s.prototype._skipUntilEnd=function(e,t){for(;;){var r=a(e,t);if(e.isError(r))return r;var n,o=c(e,r.primitive,t);if(e.isError(o))return o;if(n=r.primitive||null!==o?e.skip(o):this._skipUntilEnd(e,t),e.isError(n))return n;if("end"===r.tagStr)break}},s.prototype._decodeList=function(e,t,r,n){for(var o=[];!e.isEmpty();){var i=this._peekTag(e,"end");if(e.isError(i))return i;var s=r.decode(e,"der",n);if(e.isError(s)&&i)break;o.push(s)}return o},s.prototype._decodeStr=function(e,t){if("bitstr"===t){var r=e.readUInt8();return e.isError(r)?r:{unused:r,data:e.raw()}}if("bmpstr"===t){var n=e.raw();if(n.length%2==1)return e.error("Decoding of string type: bmpstr length mismatch");for(var o="",i=0;i<n.length/2;i++)o+=String.fromCharCode(n.readUInt16BE(2*i));return o}if("numstr"===t){var s=e.raw().toString("ascii");return this._isNumstr(s)?s:e.error("Decoding of string type: numstr unsupported characters")}if("octstr"===t)return e.raw();if("objDesc"===t)return e.raw();if("printstr"===t){var a=e.raw().toString("ascii");return this._isPrintstr(a)?a:e.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(t)?e.raw().toString():e.error("Decoding of string type: "+t+" unsupported")},s.prototype._decodeObjid=function(e,t,r){for(var n,o=[],i=0;!e.isEmpty();){var s=e.readUInt8();i<<=7,i|=127&s,128&s||(o.push(i),i=0)}128&s&&o.push(i);var a=o[0]/40|0,c=o[0]%40;if(n=r?o:[a,c].concat(o.slice(1)),t){var u=t[n.join(" ")];void 0===u&&(u=t[n.join(".")]),void 0!==u&&(n=u)}return n},s.prototype._decodeTime=function(e,t){var r=e.raw().toString();if("gentime"===t)var n=0|r.slice(0,4),o=0|r.slice(4,6),i=0|r.slice(6,8),s=0|r.slice(8,10),a=0|r.slice(10,12),c=0|r.slice(12,14);else{if("utctime"!==t)return e.error("Decoding "+t+" time is not supported yet");n=0|r.slice(0,2),o=0|r.slice(2,4),i=0|r.slice(4,6),s=0|r.slice(6,8),a=0|r.slice(8,10),c=0|r.slice(10,12);n=n<70?2e3+n:1900+n}return Date.UTC(n,o-1,i,s,a,c,0)},s.prototype._decodeNull=function(e){return null},s.prototype._decodeBool=function(e){var t=e.readUInt8();return e.isError(t)?t:0!==t},s.prototype._decodeInt=function(e,t){var r=e.raw(),o=new n(r);return t&&(o=t[o.toString(10)]||o),o},s.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getDecoder("der").tree},der_1$1}function requirePem$2(){if(hasRequiredPem$2)return pem$2;hasRequiredPem$2=1;var e=requireInherits_browser(),t=requireDist$1().Buffer,r=requireDer$1();function n(e){r.call(this,e),this.enc="pem"}return e(n,r),pem$2=n,n.prototype.decode=function(e,n){for(var o=e.toString().split(/[\r\n]+/g),i=n.label.toUpperCase(),s=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,c=-1,u=0;u<o.length;u++){var l=o[u].match(s);if(null!==l&&l[2]===i){if(-1!==a){if("END"!==l[1])break;c=u;break}if("BEGIN"!==l[1])break;a=u}}if(-1===a||-1===c)throw new Error("PEM section not found for: "+i);var d=o.slice(a+1,c).join("");d.replace(/[^a-z0-9\+\/=]+/gi,"");var h=new t(d,"base64");return r.prototype.decode.call(this,h,n)},pem$2}function requireDecoders(){return hasRequiredDecoders||(hasRequiredDecoders=1,(e=decoders).der=requireDer$1(),e.pem=requirePem$2()),decoders;var e}var encoders={},der_1,hasRequiredDer,pem$1,hasRequiredPem$1,hasRequiredEncoders,hasRequiredAsn1$1,certificate,hasRequiredCertificate,hasRequiredAsn1;function requireDer(){if(hasRequiredDer)return der_1;hasRequiredDer=1;var e=requireInherits_browser(),t=requireDist$1().Buffer,r=requireAsn1$1(),n=r.base,o=r.constants.der;function i(e){this.enc="der",this.name=e.name,this.entity=e,this.tree=new s,this.tree._init(e.body)}function s(e){n.Node.call(this,"der",e)}function a(e){return e<10?"0"+e:e}return der_1=i,i.prototype.encode=function(e,t){return this.tree._encode(e,t).join()},e(s,n.Node),s.prototype._encodeComposite=function(e,r,n,i){var s,a=function(e,t,r,n){var i;"seqof"===e?e="seq":"setof"===e&&(e="set");if(o.tagByName.hasOwnProperty(e))i=o.tagByName[e];else{if("number"!=typeof e||(0|e)!==e)return n.error("Unknown tag: "+e);i=e}if(i>=31)return n.error("Multi-octet tag encoding unsupported");t||(i|=32);return i|=o.tagClassByName[r||"universal"]<<6,i}(e,r,n,this.reporter);if(i.length<128)return(s=new t(2))[0]=a,s[1]=i.length,this._createEncoderBuffer([s,i]);for(var c=1,u=i.length;u>=256;u>>=8)c++;(s=new t(2+c))[0]=a,s[1]=128|c;u=1+c;for(var l=i.length;l>0;u--,l>>=8)s[u]=255&l;return this._createEncoderBuffer([s,i])},s.prototype._encodeStr=function(e,r){if("bitstr"===r)return this._createEncoderBuffer([0|e.unused,e.data]);if("bmpstr"===r){for(var n=new t(2*e.length),o=0;o<e.length;o++)n.writeUInt16BE(e.charCodeAt(o),2*o);return this._createEncoderBuffer(n)}return"numstr"===r?this._isNumstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===r?this._isPrintstr(e)?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(r)||"objDesc"===r?this._createEncoderBuffer(e):this.reporter.error("Encoding of string type: "+r+" unsupported")},s.prototype._encodeObjid=function(e,r,n){if("string"==typeof e){if(!r)return this.reporter.error("string objid given, but no values map found");if(!r.hasOwnProperty(e))return this.reporter.error("objid not found in values map");e=r[e].split(/[\s\.]+/g);for(var o=0;o<e.length;o++)e[o]|=0}else if(Array.isArray(e)){e=e.slice();for(o=0;o<e.length;o++)e[o]|=0}if(!Array.isArray(e))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(e));if(!n){if(e[1]>=40)return this.reporter.error("Second objid identifier OOB");e.splice(0,2,40*e[0]+e[1])}var i=0;for(o=0;o<e.length;o++){var s=e[o];for(i++;s>=128;s>>=7)i++}var a=new t(i),c=a.length-1;for(o=e.length-1;o>=0;o--){s=e[o];for(a[c--]=127&s;(s>>=7)>0;)a[c--]=128|127&s}return this._createEncoderBuffer(a)},s.prototype._encodeTime=function(e,t){var r,n=new Date(e);return"gentime"===t?r=[a(n.getFullYear()),a(n.getUTCMonth()+1),a(n.getUTCDate()),a(n.getUTCHours()),a(n.getUTCMinutes()),a(n.getUTCSeconds()),"Z"].join(""):"utctime"===t?r=[a(n.getFullYear()%100),a(n.getUTCMonth()+1),a(n.getUTCDate()),a(n.getUTCHours()),a(n.getUTCMinutes()),a(n.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+t+" time is not supported yet"),this._encodeStr(r,"octstr")},s.prototype._encodeNull=function(){return this._createEncoderBuffer("")},s.prototype._encodeInt=function(e,r){if("string"==typeof e){if(!r)return this.reporter.error("String int or enum given, but no values map");if(!r.hasOwnProperty(e))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(e));e=r[e]}if("number"!=typeof e&&!t.isBuffer(e)){var n=e.toArray();!e.sign&&128&n[0]&&n.unshift(0),e=new t(n)}if(t.isBuffer(e)){var o=e.length;0===e.length&&o++;var i=new t(o);return e.copy(i),0===e.length&&(i[0]=0),this._createEncoderBuffer(i)}if(e<128)return this._createEncoderBuffer(e);if(e<256)return this._createEncoderBuffer([0,e]);o=1;for(var s=e;s>=256;s>>=8)o++;for(s=(i=new Array(o)).length-1;s>=0;s--)i[s]=255&e,e>>=8;return 128&i[0]&&i.unshift(0),this._createEncoderBuffer(new t(i))},s.prototype._encodeBool=function(e){return this._createEncoderBuffer(e?255:0)},s.prototype._use=function(e,t){return"function"==typeof e&&(e=e(t)),e._getEncoder("der").tree},s.prototype._skipDefault=function(e,t,r){var n,o=this._baseState;if(null===o.default)return!1;var i=e.join();if(void 0===o.defaultBuffer&&(o.defaultBuffer=this._encodeValue(o.default,t,r).join()),i.length!==o.defaultBuffer.length)return!1;for(n=0;n<i.length;n++)if(i[n]!==o.defaultBuffer[n])return!1;return!0},der_1}function requirePem$1(){if(hasRequiredPem$1)return pem$1;hasRequiredPem$1=1;var e=requireInherits_browser(),t=requireDer();function r(e){t.call(this,e),this.enc="pem"}return e(r,t),pem$1=r,r.prototype.encode=function(e,r){for(var n=t.prototype.encode.call(this,e).toString("base64"),o=["-----BEGIN "+r.label+"-----"],i=0;i<n.length;i+=64)o.push(n.slice(i,i+64));return o.push("-----END "+r.label+"-----"),o.join("\n")},pem$1}function requireEncoders(){return hasRequiredEncoders||(hasRequiredEncoders=1,(e=encoders).der=requireDer(),e.pem=requirePem$1()),encoders;var e}function requireAsn1$1(){return hasRequiredAsn1$1||(hasRequiredAsn1$1=1,(e=asn1).bignum=requireBn$2(),e.define=requireApi().define,e.base=requireBase(),e.constants=requireConstants$1(),e.decoders=requireDecoders(),e.encoders=requireEncoders()),asn1;var e}function requireCertificate(){if(hasRequiredCertificate)return certificate;hasRequiredCertificate=1;var e=requireAsn1$1(),t=e.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),r=e.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),n=e.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),o=e.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())}),i=e.define("RelativeDistinguishedName",function(){this.setof(r)}),s=e.define("RDNSequence",function(){this.seqof(i)}),a=e.define("Name",function(){this.choice({rdnSequence:this.use(s)})}),c=e.define("Validity",function(){this.seq().obj(this.key("notBefore").use(t),this.key("notAfter").use(t))}),u=e.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),l=e.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(n),this.key("issuer").use(a),this.key("validity").use(c),this.key("subject").use(a),this.key("subjectPublicKeyInfo").use(o),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(u).optional())}),d=e.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(l),this.key("signatureAlgorithm").use(n),this.key("signatureValue").bitstr())});return certificate=d}function requireAsn1(){if(hasRequiredAsn1)return asn1$1;hasRequiredAsn1=1;var e=requireAsn1$1();asn1$1.certificate=requireCertificate();var t=e.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});asn1$1.RSAPrivateKey=t;var r=e.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});asn1$1.RSAPublicKey=r;var n=e.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),o=e.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(n),this.key("subjectPublicKey").bitstr())});asn1$1.PublicKey=o;var i=e.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(n),this.key("subjectPrivateKey").octstr())});asn1$1.PrivateKey=i;var s=e.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});asn1$1.EncryptedPrivateKey=s;var a=e.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});asn1$1.DSAPrivateKey=a,asn1$1.DSAparam=e.define("DSAparam",function(){this.int()});var c=e.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),u=e.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(c),this.key("publicKey").optional().explicit(1).bitstr())});return asn1$1.ECPrivateKey=u,asn1$1.signature=e.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())}),asn1$1}const require$$1={"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"};var fixProc,hasRequiredFixProc,parseAsn1,hasRequiredParseAsn1;function requireFixProc(){if(hasRequiredFixProc)return fixProc;hasRequiredFixProc=1;var e=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,t=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,r=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,n=requireEvp_bytestokey(),o=requireBrowser$7(),i=requireSafeBuffer$1().Buffer;return fixProc=function(s,a){var c,u=s.toString(),l=u.match(e);if(l){var d="aes"+l[1],h=i.from(l[2],"hex"),f=i.from(l[3].replace(/[\r\n]/g,""),"base64"),p=n(a,h.slice(0,8),parseInt(l[1],10)).key,m=[],y=o.createDecipheriv(d,p,h);m.push(y.update(f)),m.push(y.final()),c=i.concat(m)}else{var g=u.match(r);c=i.from(g[2].replace(/[\r\n]/g,""),"base64")}return{tag:u.match(t)[1],data:c}}}function requireParseAsn1(){if(hasRequiredParseAsn1)return parseAsn1;hasRequiredParseAsn1=1;var e=requireAsn1(),t=require$$1,r=requireFixProc(),n=requireBrowser$7(),o=requireBrowser$8(),i=requireSafeBuffer$1().Buffer;function s(s){var a;"object"!=typeof s||i.isBuffer(s)||(a=s.passphrase,s=s.key),"string"==typeof s&&(s=i.from(s));var c,u,l=r(s,a),d=l.tag,h=l.data;switch(d){case"CERTIFICATE":u=e.certificate.decode(h,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(u||(u=e.PublicKey.decode(h,"der")),c=u.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return e.RSAPublicKey.decode(u.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return u.subjectPrivateKey=u.subjectPublicKey,{type:"ec",data:u};case"1.2.840.10040.4.1":return u.algorithm.params.pub_key=e.DSAparam.decode(u.subjectPublicKey.data,"der"),{type:"dsa",data:u.algorithm.params};default:throw new Error("unknown key id "+c)}case"ENCRYPTED PRIVATE KEY":h=function(e,r){var s=e.algorithm.decrypt.kde.kdeparams.salt,a=parseInt(e.algorithm.decrypt.kde.kdeparams.iters.toString(),10),c=t[e.algorithm.decrypt.cipher.algo.join(".")],u=e.algorithm.decrypt.cipher.iv,l=e.subjectPrivateKey,d=parseInt(c.split("-")[1],10)/8,h=o.pbkdf2Sync(r,s,a,d,"sha1"),f=n.createDecipheriv(c,h,u),p=[];return p.push(f.update(l)),p.push(f.final()),i.concat(p)}(h=e.EncryptedPrivateKey.decode(h,"der"),a);case"PRIVATE KEY":switch(c=(u=e.PrivateKey.decode(h,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return e.RSAPrivateKey.decode(u.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:u.algorithm.curve,privateKey:e.ECPrivateKey.decode(u.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return u.algorithm.params.priv_key=e.DSAparam.decode(u.subjectPrivateKey,"der"),{type:"dsa",params:u.algorithm.params};default:throw new Error("unknown key id "+c)}case"RSA PUBLIC KEY":return e.RSAPublicKey.decode(h,"der");case"RSA PRIVATE KEY":return e.RSAPrivateKey.decode(h,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:e.DSAPrivateKey.decode(h,"der")};case"EC PRIVATE KEY":return{curve:(h=e.ECPrivateKey.decode(h,"der")).parameters.value,privateKey:h.privateKey};default:throw new Error("unknown key type "+d)}}return s.signature=e.signature,parseAsn1=s}const require$$4={"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"};var hasRequiredSign,verify_1,hasRequiredVerify,browser$4,hasRequiredBrowser$4;function requireSign(){if(hasRequiredSign)return sign$1.exports;hasRequiredSign=1;var e=requireSafeBuffer$1().Buffer,t=requireBrowser$9(),r=requireBrowserifyRsa(),n=requireElliptic().ec,o=requireBn$4(),i=requireParseAsn1(),s=require$$4;function a(r,n,o,i){if((r=e.from(r.toArray())).length<n.byteLength()){var s=e.alloc(n.byteLength()-r.length);r=e.concat([s,r])}var a=o.length,u=function(t,r){t=c(t,r),t=t.mod(r);var n=e.from(t.toArray());if(n.length<r.byteLength()){var o=e.alloc(r.byteLength()-n.length);n=e.concat([o,n])}return n}(o,n),l=e.alloc(a);l.fill(1);var d=e.alloc(a);return d=t(i,d).update(l).update(e.from([0])).update(r).update(u).digest(),l=t(i,d).update(l).digest(),{k:d=t(i,d).update(l).update(e.from([1])).update(r).update(u).digest(),v:l=t(i,d).update(l).digest()}}function c(e,t){var r=new o(e),n=(e.length<<3)-t.bitLength();return n>0&&r.ishrn(n),r}function u(r,n,o){var i,s;do{for(i=e.alloc(0);8*i.length<r.bitLength();)n.v=t(o,n.k).update(n.v).digest(),i=e.concat([i,n.v]);s=c(i,r),n.k=t(o,n.k).update(n.v).update(e.from([0])).digest(),n.v=t(o,n.k).update(n.v).digest()}while(-1!==s.cmp(r));return s}function l(e,t,r,n){return e.toRed(o.mont(r)).redPow(t).fromRed().mod(n)}return sign$1.exports=function(t,d,h,f,p){var m=i(d);if(m.curve){if("ecdsa"!==f&&"ecdsa/rsa"!==f)throw new Error("wrong private key type");return function(t,r){var o=s[r.curve.join(".")];if(!o)throw new Error("unknown curve "+r.curve.join("."));var i=new n(o).keyFromPrivate(r.privateKey),a=i.sign(t);return e.from(a.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==f)throw new Error("wrong private key type");return function(t,r,n){var i,s=r.params.priv_key,d=r.params.p,h=r.params.q,f=r.params.g,p=new o(0),m=c(t,h).mod(h),y=!1,g=a(s,h,t,n);for(;!1===y;)p=l(f,i=u(h,g,n),d,h),0===(y=i.invm(h).imul(m.add(s.mul(p))).mod(h)).cmpn(0)&&(y=!1,p=new o(0));return function(t,r){t=t.toArray(),r=r.toArray(),128&t[0]&&(t=[0].concat(t));128&r[0]&&(r=[0].concat(r));var n=t.length+r.length+4,o=[48,n,2,t.length];return o=o.concat(t,[2,r.length],r),e.from(o)}(p,y)}(t,m,h)}if("rsa"!==f&&"ecdsa/rsa"!==f)throw new Error("wrong private key type");if(void 0!==d.padding&&1!==d.padding)throw new Error("illegal or unsupported padding mode");t=e.concat([p,t]);for(var y=m.modulus.byteLength(),g=[0,1];t.length+g.length+1<y;)g.push(255);g.push(0);for(var b=-1;++b<t.length;)g.push(t[b]);return r(g,m)},sign$1.exports.getKey=a,sign$1.exports.makeKey=u,sign$1.exports}function requireVerify(){if(hasRequiredVerify)return verify_1;hasRequiredVerify=1;var e=requireSafeBuffer$1().Buffer,t=requireBn$4(),r=requireElliptic().ec,n=requireParseAsn1(),o=require$$4;function i(e,t){if(e.cmpn(0)<=0)throw new Error("invalid sig");if(e.cmp(t)>=0)throw new Error("invalid sig")}return verify_1=function(s,a,c,u,l){var d=n(c);if("ec"===d.type){if("ecdsa"!==u&&"ecdsa/rsa"!==u)throw new Error("wrong public key type");return function(e,t,n){var i=o[n.data.algorithm.curve.join(".")];if(!i)throw new Error("unknown curve "+n.data.algorithm.curve.join("."));var s=new r(i),a=n.data.subjectPrivateKey.data;return s.verify(t,e,a)}(s,a,d)}if("dsa"===d.type){if("dsa"!==u)throw new Error("wrong public key type");return function(e,r,o){var s=o.data.p,a=o.data.q,c=o.data.g,u=o.data.pub_key,l=n.signature.decode(e,"der"),d=l.s,h=l.r;i(d,a),i(h,a);var f=t.mont(s),p=d.invm(a),m=c.toRed(f).redPow(new t(r).mul(p).mod(a)).fromRed().mul(u.toRed(f).redPow(h.mul(p).mod(a)).fromRed()).mod(s).mod(a);return 0===m.cmp(h)}(s,a,d)}if("rsa"!==u&&"ecdsa/rsa"!==u)throw new Error("wrong public key type");a=e.concat([l,a]);for(var h=d.modulus.byteLength(),f=[1],p=0;a.length+f.length+2<h;)f.push(255),p+=1;f.push(0);for(var m=-1;++m<a.length;)f.push(a[m]);f=e.from(f);var y=t.mont(d.modulus);s=(s=new t(s).toRed(y)).redPow(new t(d.publicExponent)),s=e.from(s.fromRed().toArray());var g=p<8?1:0;for(h=Math.min(s.length,f.length),s.length!==f.length&&(g=1),m=-1;++m<h;)g|=s[m]^f[m];return 0===g}}function requireBrowser$4(){if(hasRequiredBrowser$4)return browser$4;hasRequiredBrowser$4=1;var e=requireSafeBuffer$1().Buffer,t=requireBrowser$a(),r=requireReadableBrowser(),n=requireInherits_browser(),o=requireSign(),i=requireVerify(),s=require$$6;function a(e){r.Writable.call(this);var n=s[e];if(!n)throw new Error("Unknown message digest");this._hashType=n.hash,this._hash=t(n.hash),this._tag=n.id,this._signType=n.sign}function c(e){r.Writable.call(this);var n=s[e];if(!n)throw new Error("Unknown message digest");this._hash=t(n.hash),this._tag=n.id,this._signType=n.sign}function u(e){return new a(e)}function l(e){return new c(e)}return Object.keys(s).forEach(function(t){s[t].id=e.from(s[t].id,"hex"),s[t.toLowerCase()]=s[t]}),n(a,r.Writable),a.prototype._write=function(e,t,r){this._hash.update(e),r()},a.prototype.update=function(t,r){return this._hash.update("string"==typeof t?e.from(t,r):t),this},a.prototype.sign=function(e,t){this.end();var r=this._hash.digest(),n=o(r,e,this._hashType,this._signType,this._tag);return t?n.toString(t):n},n(c,r.Writable),c.prototype._write=function(e,t,r){this._hash.update(e),r()},c.prototype.update=function(t,r){return this._hash.update("string"==typeof t?e.from(t,r):t),this},c.prototype.verify=function(t,r,n){var o="string"==typeof r?e.from(r,n):r;this.end();var s=this._hash.digest();return i(o,s,t,this._signType,this._tag)},browser$4={Sign:u,Verify:l,createSign:u,createVerify:l}}var bn$3={exports:{}},bn$2=bn$3.exports,hasRequiredBn$1,browser$3,hasRequiredBrowser$3;function requireBn$1(){return hasRequiredBn$1||(hasRequiredBn$1=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var i;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$1().Buffer}catch(T){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,n){for(var o=0,i=Math.min(e.length,r),s=t;s<i;s++){var a=e.charCodeAt(s)-48;o*=n,o+=a>=49?a-49+10:a>=17?a-17+10:a}return o}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var o=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(o++,this.negative=1),o<e.length&&(16===t?this._parseHex(e,o,n):(this._parseBase(e,t,o),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var i,s,a=0;if("be"===n)for(o=e.length-1,i=0;o>=0;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===n)for(o=0,i=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this.strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,i=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;this.strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,o=1;o<=67108863;o*=t)n++;n--,o=o/t|0;for(var i=e.length-r,s=i%n,a=Math.min(i,i-s)+r,u=0,l=r;l<a;l+=n)u=c(e,l,l+n,t),this.imuln(o),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var d=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)d*=t;this.imuln(d),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var o=0|e.words[0],i=0|t.words[0],s=o*i,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,d=67108863&c,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;l+=(s=(o=0|e.words[p])*(i=0|t.words[f])+d)/67108864|0,d=67108863&s}r.words[u]=0|d,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var o=0,i=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<o|i)).toString(16);i=a>>>24-o&16777215,(o+=2)>=26&&(o-=26,s--),n=0!==i||s!==this.length-1?u[6-c.length]+c+n:c+n}for(0!==i&&(n=i.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=l[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:u[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==i),this.toArrayLike(i,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var o=this.byteLength(),i=n||Math.max(1,o);r(o<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===t,u=new e(i),l=this.clone();if(c){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[a]=s;for(;a<i;a++)u[a]=0}else{for(a=0;a<i-o;a++)u[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[i-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var o=0;o<t;o++)this.words[o]=67108863&~this.words[o];return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,o=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<o:this.words[n]&~(1<<o),this.strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var o=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+o,this.words[i]=67108863&t,o=t>>>26;for(;0!==o&&i<r.length;i++)t=(0|r.words[i])+o,this.words[i]=67108863&t,o=t>>>26;if(this.length=r.length,0!==o)this.words[this.length]=o,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,o=this.cmp(e);if(0===o)return this.negative=0,this.length=1,this.words[0]=0,this;o>0?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)i=(t=(0|r.words[s])-(0|n.words[s])+i)>>26,this.words[s]=67108863&t;for(;0!==i&&s<r.length;s++)i=(t=(0|r.words[s])+i)>>26,this.words[s]=67108863&t;if(0===i&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var n,o,i,s=e.words,a=t.words,c=r.words,u=0,l=0|s[0],d=8191&l,h=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,y=0|s[2],g=8191&y,b=y>>>13,_=0|s[3],w=8191&_,v=_>>>13,I=0|s[4],k=8191&I,T=I>>>13,A=0|s[5],S=8191&A,E=A>>>13,P=0|s[6],O=8191&P,R=P>>>13,C=0|s[7],$=8191&C,N=C>>>13,M=0|s[8],x=8191&M,B=M>>>13,D=0|s[9],L=8191&D,F=D>>>13,j=0|a[0],U=8191&j,q=j>>>13,K=0|a[1],H=8191&K,G=K>>>13,z=0|a[2],V=8191&z,Z=z>>>13,W=0|a[3],J=8191&W,Y=W>>>13,Q=0|a[4],X=8191&Q,ee=Q>>>13,te=0|a[5],re=8191&te,ne=te>>>13,oe=0|a[6],ie=8191&oe,se=oe>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],de=8191&le,he=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(u+(n=Math.imul(d,U))|0)+((8191&(o=(o=Math.imul(d,q))+Math.imul(h,U)|0))<<13)|0;u=((i=Math.imul(h,q))+(o>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,U),o=(o=Math.imul(p,q))+Math.imul(m,U)|0,i=Math.imul(m,q);var ge=(u+(n=n+Math.imul(d,H)|0)|0)+((8191&(o=(o=o+Math.imul(d,G)|0)+Math.imul(h,H)|0))<<13)|0;u=((i=i+Math.imul(h,G)|0)+(o>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,U),o=(o=Math.imul(g,q))+Math.imul(b,U)|0,i=Math.imul(b,q),n=n+Math.imul(p,H)|0,o=(o=o+Math.imul(p,G)|0)+Math.imul(m,H)|0,i=i+Math.imul(m,G)|0;var be=(u+(n=n+Math.imul(d,V)|0)|0)+((8191&(o=(o=o+Math.imul(d,Z)|0)+Math.imul(h,V)|0))<<13)|0;u=((i=i+Math.imul(h,Z)|0)+(o>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,U),o=(o=Math.imul(w,q))+Math.imul(v,U)|0,i=Math.imul(v,q),n=n+Math.imul(g,H)|0,o=(o=o+Math.imul(g,G)|0)+Math.imul(b,H)|0,i=i+Math.imul(b,G)|0,n=n+Math.imul(p,V)|0,o=(o=o+Math.imul(p,Z)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,Z)|0;var _e=(u+(n=n+Math.imul(d,J)|0)|0)+((8191&(o=(o=o+Math.imul(d,Y)|0)+Math.imul(h,J)|0))<<13)|0;u=((i=i+Math.imul(h,Y)|0)+(o>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(k,U),o=(o=Math.imul(k,q))+Math.imul(T,U)|0,i=Math.imul(T,q),n=n+Math.imul(w,H)|0,o=(o=o+Math.imul(w,G)|0)+Math.imul(v,H)|0,i=i+Math.imul(v,G)|0,n=n+Math.imul(g,V)|0,o=(o=o+Math.imul(g,Z)|0)+Math.imul(b,V)|0,i=i+Math.imul(b,Z)|0,n=n+Math.imul(p,J)|0,o=(o=o+Math.imul(p,Y)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,Y)|0;var we=(u+(n=n+Math.imul(d,X)|0)|0)+((8191&(o=(o=o+Math.imul(d,ee)|0)+Math.imul(h,X)|0))<<13)|0;u=((i=i+Math.imul(h,ee)|0)+(o>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(S,U),o=(o=Math.imul(S,q))+Math.imul(E,U)|0,i=Math.imul(E,q),n=n+Math.imul(k,H)|0,o=(o=o+Math.imul(k,G)|0)+Math.imul(T,H)|0,i=i+Math.imul(T,G)|0,n=n+Math.imul(w,V)|0,o=(o=o+Math.imul(w,Z)|0)+Math.imul(v,V)|0,i=i+Math.imul(v,Z)|0,n=n+Math.imul(g,J)|0,o=(o=o+Math.imul(g,Y)|0)+Math.imul(b,J)|0,i=i+Math.imul(b,Y)|0,n=n+Math.imul(p,X)|0,o=(o=o+Math.imul(p,ee)|0)+Math.imul(m,X)|0,i=i+Math.imul(m,ee)|0;var ve=(u+(n=n+Math.imul(d,re)|0)|0)+((8191&(o=(o=o+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;u=((i=i+Math.imul(h,ne)|0)+(o>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(O,U),o=(o=Math.imul(O,q))+Math.imul(R,U)|0,i=Math.imul(R,q),n=n+Math.imul(S,H)|0,o=(o=o+Math.imul(S,G)|0)+Math.imul(E,H)|0,i=i+Math.imul(E,G)|0,n=n+Math.imul(k,V)|0,o=(o=o+Math.imul(k,Z)|0)+Math.imul(T,V)|0,i=i+Math.imul(T,Z)|0,n=n+Math.imul(w,J)|0,o=(o=o+Math.imul(w,Y)|0)+Math.imul(v,J)|0,i=i+Math.imul(v,Y)|0,n=n+Math.imul(g,X)|0,o=(o=o+Math.imul(g,ee)|0)+Math.imul(b,X)|0,i=i+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,o=(o=o+Math.imul(p,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var Ie=(u+(n=n+Math.imul(d,ie)|0)|0)+((8191&(o=(o=o+Math.imul(d,se)|0)+Math.imul(h,ie)|0))<<13)|0;u=((i=i+Math.imul(h,se)|0)+(o>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,U),o=(o=Math.imul($,q))+Math.imul(N,U)|0,i=Math.imul(N,q),n=n+Math.imul(O,H)|0,o=(o=o+Math.imul(O,G)|0)+Math.imul(R,H)|0,i=i+Math.imul(R,G)|0,n=n+Math.imul(S,V)|0,o=(o=o+Math.imul(S,Z)|0)+Math.imul(E,V)|0,i=i+Math.imul(E,Z)|0,n=n+Math.imul(k,J)|0,o=(o=o+Math.imul(k,Y)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,Y)|0,n=n+Math.imul(w,X)|0,o=(o=o+Math.imul(w,ee)|0)+Math.imul(v,X)|0,i=i+Math.imul(v,ee)|0,n=n+Math.imul(g,re)|0,o=(o=o+Math.imul(g,ne)|0)+Math.imul(b,re)|0,i=i+Math.imul(b,ne)|0,n=n+Math.imul(p,ie)|0,o=(o=o+Math.imul(p,se)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,se)|0;var ke=(u+(n=n+Math.imul(d,ce)|0)|0)+((8191&(o=(o=o+Math.imul(d,ue)|0)+Math.imul(h,ce)|0))<<13)|0;u=((i=i+Math.imul(h,ue)|0)+(o>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(x,U),o=(o=Math.imul(x,q))+Math.imul(B,U)|0,i=Math.imul(B,q),n=n+Math.imul($,H)|0,o=(o=o+Math.imul($,G)|0)+Math.imul(N,H)|0,i=i+Math.imul(N,G)|0,n=n+Math.imul(O,V)|0,o=(o=o+Math.imul(O,Z)|0)+Math.imul(R,V)|0,i=i+Math.imul(R,Z)|0,n=n+Math.imul(S,J)|0,o=(o=o+Math.imul(S,Y)|0)+Math.imul(E,J)|0,i=i+Math.imul(E,Y)|0,n=n+Math.imul(k,X)|0,o=(o=o+Math.imul(k,ee)|0)+Math.imul(T,X)|0,i=i+Math.imul(T,ee)|0,n=n+Math.imul(w,re)|0,o=(o=o+Math.imul(w,ne)|0)+Math.imul(v,re)|0,i=i+Math.imul(v,ne)|0,n=n+Math.imul(g,ie)|0,o=(o=o+Math.imul(g,se)|0)+Math.imul(b,ie)|0,i=i+Math.imul(b,se)|0,n=n+Math.imul(p,ce)|0,o=(o=o+Math.imul(p,ue)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,ue)|0;var Te=(u+(n=n+Math.imul(d,de)|0)|0)+((8191&(o=(o=o+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;u=((i=i+Math.imul(h,he)|0)+(o>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(L,U),o=(o=Math.imul(L,q))+Math.imul(F,U)|0,i=Math.imul(F,q),n=n+Math.imul(x,H)|0,o=(o=o+Math.imul(x,G)|0)+Math.imul(B,H)|0,i=i+Math.imul(B,G)|0,n=n+Math.imul($,V)|0,o=(o=o+Math.imul($,Z)|0)+Math.imul(N,V)|0,i=i+Math.imul(N,Z)|0,n=n+Math.imul(O,J)|0,o=(o=o+Math.imul(O,Y)|0)+Math.imul(R,J)|0,i=i+Math.imul(R,Y)|0,n=n+Math.imul(S,X)|0,o=(o=o+Math.imul(S,ee)|0)+Math.imul(E,X)|0,i=i+Math.imul(E,ee)|0,n=n+Math.imul(k,re)|0,o=(o=o+Math.imul(k,ne)|0)+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,n=n+Math.imul(w,ie)|0,o=(o=o+Math.imul(w,se)|0)+Math.imul(v,ie)|0,i=i+Math.imul(v,se)|0,n=n+Math.imul(g,ce)|0,o=(o=o+Math.imul(g,ue)|0)+Math.imul(b,ce)|0,i=i+Math.imul(b,ue)|0,n=n+Math.imul(p,de)|0,o=(o=o+Math.imul(p,he)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,he)|0;var Ae=(u+(n=n+Math.imul(d,pe)|0)|0)+((8191&(o=(o=o+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;u=((i=i+Math.imul(h,me)|0)+(o>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(L,H),o=(o=Math.imul(L,G))+Math.imul(F,H)|0,i=Math.imul(F,G),n=n+Math.imul(x,V)|0,o=(o=o+Math.imul(x,Z)|0)+Math.imul(B,V)|0,i=i+Math.imul(B,Z)|0,n=n+Math.imul($,J)|0,o=(o=o+Math.imul($,Y)|0)+Math.imul(N,J)|0,i=i+Math.imul(N,Y)|0,n=n+Math.imul(O,X)|0,o=(o=o+Math.imul(O,ee)|0)+Math.imul(R,X)|0,i=i+Math.imul(R,ee)|0,n=n+Math.imul(S,re)|0,o=(o=o+Math.imul(S,ne)|0)+Math.imul(E,re)|0,i=i+Math.imul(E,ne)|0,n=n+Math.imul(k,ie)|0,o=(o=o+Math.imul(k,se)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,se)|0,n=n+Math.imul(w,ce)|0,o=(o=o+Math.imul(w,ue)|0)+Math.imul(v,ce)|0,i=i+Math.imul(v,ue)|0,n=n+Math.imul(g,de)|0,o=(o=o+Math.imul(g,he)|0)+Math.imul(b,de)|0,i=i+Math.imul(b,he)|0;var Se=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(o=(o=o+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((i=i+Math.imul(m,me)|0)+(o>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,V),o=(o=Math.imul(L,Z))+Math.imul(F,V)|0,i=Math.imul(F,Z),n=n+Math.imul(x,J)|0,o=(o=o+Math.imul(x,Y)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,Y)|0,n=n+Math.imul($,X)|0,o=(o=o+Math.imul($,ee)|0)+Math.imul(N,X)|0,i=i+Math.imul(N,ee)|0,n=n+Math.imul(O,re)|0,o=(o=o+Math.imul(O,ne)|0)+Math.imul(R,re)|0,i=i+Math.imul(R,ne)|0,n=n+Math.imul(S,ie)|0,o=(o=o+Math.imul(S,se)|0)+Math.imul(E,ie)|0,i=i+Math.imul(E,se)|0,n=n+Math.imul(k,ce)|0,o=(o=o+Math.imul(k,ue)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,ue)|0,n=n+Math.imul(w,de)|0,o=(o=o+Math.imul(w,he)|0)+Math.imul(v,de)|0,i=i+Math.imul(v,he)|0;var Ee=(u+(n=n+Math.imul(g,pe)|0)|0)+((8191&(o=(o=o+Math.imul(g,me)|0)+Math.imul(b,pe)|0))<<13)|0;u=((i=i+Math.imul(b,me)|0)+(o>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,J),o=(o=Math.imul(L,Y))+Math.imul(F,J)|0,i=Math.imul(F,Y),n=n+Math.imul(x,X)|0,o=(o=o+Math.imul(x,ee)|0)+Math.imul(B,X)|0,i=i+Math.imul(B,ee)|0,n=n+Math.imul($,re)|0,o=(o=o+Math.imul($,ne)|0)+Math.imul(N,re)|0,i=i+Math.imul(N,ne)|0,n=n+Math.imul(O,ie)|0,o=(o=o+Math.imul(O,se)|0)+Math.imul(R,ie)|0,i=i+Math.imul(R,se)|0,n=n+Math.imul(S,ce)|0,o=(o=o+Math.imul(S,ue)|0)+Math.imul(E,ce)|0,i=i+Math.imul(E,ue)|0,n=n+Math.imul(k,de)|0,o=(o=o+Math.imul(k,he)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,he)|0;var Pe=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(o=(o=o+Math.imul(w,me)|0)+Math.imul(v,pe)|0))<<13)|0;u=((i=i+Math.imul(v,me)|0)+(o>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(L,X),o=(o=Math.imul(L,ee))+Math.imul(F,X)|0,i=Math.imul(F,ee),n=n+Math.imul(x,re)|0,o=(o=o+Math.imul(x,ne)|0)+Math.imul(B,re)|0,i=i+Math.imul(B,ne)|0,n=n+Math.imul($,ie)|0,o=(o=o+Math.imul($,se)|0)+Math.imul(N,ie)|0,i=i+Math.imul(N,se)|0,n=n+Math.imul(O,ce)|0,o=(o=o+Math.imul(O,ue)|0)+Math.imul(R,ce)|0,i=i+Math.imul(R,ue)|0,n=n+Math.imul(S,de)|0,o=(o=o+Math.imul(S,he)|0)+Math.imul(E,de)|0,i=i+Math.imul(E,he)|0;var Oe=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(o=(o=o+Math.imul(k,me)|0)+Math.imul(T,pe)|0))<<13)|0;u=((i=i+Math.imul(T,me)|0)+(o>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(L,re),o=(o=Math.imul(L,ne))+Math.imul(F,re)|0,i=Math.imul(F,ne),n=n+Math.imul(x,ie)|0,o=(o=o+Math.imul(x,se)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,se)|0,n=n+Math.imul($,ce)|0,o=(o=o+Math.imul($,ue)|0)+Math.imul(N,ce)|0,i=i+Math.imul(N,ue)|0,n=n+Math.imul(O,de)|0,o=(o=o+Math.imul(O,he)|0)+Math.imul(R,de)|0,i=i+Math.imul(R,he)|0;var Re=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(o=(o=o+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;u=((i=i+Math.imul(E,me)|0)+(o>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(L,ie),o=(o=Math.imul(L,se))+Math.imul(F,ie)|0,i=Math.imul(F,se),n=n+Math.imul(x,ce)|0,o=(o=o+Math.imul(x,ue)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,ue)|0,n=n+Math.imul($,de)|0,o=(o=o+Math.imul($,he)|0)+Math.imul(N,de)|0,i=i+Math.imul(N,he)|0;var Ce=(u+(n=n+Math.imul(O,pe)|0)|0)+((8191&(o=(o=o+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;u=((i=i+Math.imul(R,me)|0)+(o>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(L,ce),o=(o=Math.imul(L,ue))+Math.imul(F,ce)|0,i=Math.imul(F,ue),n=n+Math.imul(x,de)|0,o=(o=o+Math.imul(x,he)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,he)|0;var $e=(u+(n=n+Math.imul($,pe)|0)|0)+((8191&(o=(o=o+Math.imul($,me)|0)+Math.imul(N,pe)|0))<<13)|0;u=((i=i+Math.imul(N,me)|0)+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,n=Math.imul(L,de),o=(o=Math.imul(L,he))+Math.imul(F,de)|0,i=Math.imul(F,he);var Ne=(u+(n=n+Math.imul(x,pe)|0)|0)+((8191&(o=(o=o+Math.imul(x,me)|0)+Math.imul(B,pe)|0))<<13)|0;u=((i=i+Math.imul(B,me)|0)+(o>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Me=(u+(n=Math.imul(L,pe))|0)+((8191&(o=(o=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return u=((i=Math.imul(F,me))+(o>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=ye,c[1]=ge,c[2]=be,c[3]=_e,c[4]=we,c[5]=ve,c[6]=Ie,c[7]=ke,c[8]=Te,c[9]=Ae,c[10]=Se,c[11]=Ee,c[12]=Pe,c[13]=Oe,c[14]=Re,c[15]=Ce,c[16]=$e,c[17]=Ne,c[18]=Me,0!==u&&(c[19]=u,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=h),o.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?f(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,o=0,i=0;i<r.length-1;i++){var s=o;o=0;for(var a=67108863&n,c=Math.min(i,t.length-1),u=Math.max(0,i-e.length+1);u<=c;u++){var l=i-u,d=(0|e.words[l])*(0|t.words[u]),h=67108863&d;a=67108863&(h=h+a|0),o+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[i]=a,n=s,s=o}return 0!==n?r.words[i]=n:r.length--,r.strip()}(this,e,t):p(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,o=0;o<t;o++)n|=(1&e)<<t-o-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,o,i){for(var s=0;s<i;s++)n[s]=t[e[s]],o[s]=r[e[s]]},m.prototype.transform=function(e,t,r,n,o,i){this.permute(i,e,t,r,n,o);for(var s=1;s<o;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<o;l+=a)for(var d=c,h=u,f=0;f<s;f++){var p=r[l+f],m=n[l+f],y=r[l+f+s],g=n[l+f+s],b=d*y-h*g;g=d*g+h*y,y=b,r[l+f]=p+y,n[l+f]=m+g,r[l+f+s]=p-y,n[l+f+s]=m-g,f!==a&&(b=c*d-u*h,h=c*h+u*d,d=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,o=0;for(r=r/2|0;r;r>>>=1)o++;return 1<<o+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var o=e[n];e[n]=e[r-n-1],e[r-n-1]=o,o=t[n],t[n]=-t[r-n-1],t[r-n-1]=-o}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var o=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&o,r=o<67108864?0:o/67108864|0}return e},m.prototype.convert13b=function(e,t,n,o){for(var i=0,s=0;s<t;s++)i+=0|e[s],n[2*s]=8191&i,i>>>=13,n[2*s+1]=8191&i,i>>>=13;for(s=2*t;s<o;++s)n[s]=0;r(0===i),r(!(-8192&i))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),o=this.makeRBT(n),i=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,i,a,c,n,o),this.transform(u,i,l,d,n,o);for(var f=0;f<n;f++){var p=a[f]*l[f]-c[f]*d[f];c[f]=a[f]*d[f]+c[f]*l[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,h,i,n,o),this.conjugate(h,i,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),p(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var o=(0|this.words[n])*e,i=(67108863&o)+(67108863&t);t>>=26,t+=o/67108864|0,t+=i>>>26,this.words[n]=67108863&i}return 0!==t&&(this.words[n]=t,this.length++),this.length=0===e?1:this.length,this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=(e.words[n]&1<<o)>>>o}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,o=(e-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&i,c=(0|this.words[t])-a<<n;this.words[t]=c|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==o){for(t=this.length-1;t>=0;t--)this.words[t+o]=this.words[t];for(t=0;t<o;t++)this.words[t]=0;this.length+=o}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var o;r("number"==typeof e&&e>=0),o=t?(t-t%26)/26:0;var i=e%26,s=Math.min((e-i)/26,this.length),a=67108863^67108863>>>i<<i,c=n;if(o-=s,o=Math.max(0,o),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=o);u--){var d=0|this.words[u];this.words[u]=l<<26-i|d>>>i,l=d&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,o=1<<t;return!(this.length<=n||!(this.words[n]&o))},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var o=67108863^67108863>>>t<<t;this.words[this.length-1]&=o}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var o,i,s=e.length+n;this._expand(s);var a=0;for(o=0;o<e.length;o++){i=(0|this.words[o+n])+a;var c=(0|e.words[o])*t;a=((i-=67108863&c)>>26)-(c/67108864|0),this.words[o+n]=67108863&i}for(;o<this.length-n;o++)a=(i=(0|this.words[o+n])+a)>>26,this.words[o+n]=67108863&i;if(0===a)return this.strip();for(r(-1===a),a=0,o=0;o<this.length;o++)a=(i=-(0|this.words[o])+a)>>26,this.words[o]=67108863&i;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!=(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(i,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);a&&(a.words[d]=h)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),o=e.andln(1),i=r.cmp(n);return i<0||1===o&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,o=this.length-1;o>=0;o--)n=(t*n+(0|this.words[o]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*t;this.words[n]=o/e|0,t=o%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var l=n.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0===(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(d)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(c)):(n.isub(t),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:n.iushln(u)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,l=1;0===(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0===(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var o=t.cmp(r);if(o<0){var i=t;t=r,r=i}else if(0===o||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return!(1&this.words[0])},o.prototype.isOdd=function(){return!(1&~this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,o=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var i=o,s=n;0!==i&&s<this.length;s++){var a=0|this.words[s];i=(a+=i)>>>26,a&=67108863,this.words[s]=a}return 0!==i&&(this.words[s]=i,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var o=0|this.words[0];t=o===e?0:o<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],o=0|e.words[r];if(n!==o){n<o?t=-1:n>o&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new I(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){I.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},n(b,g),b.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),o=0;o<n;o++)t.words[o]=e.words[o];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=i&r,o=10;o<e.length;o++){var s=0|e.words[o];e.words[o-10]=(s&r)<<4|i>>>22,i=s}i>>>=22,e.words[o-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(_,g),n(w,g),n(v,g),v.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,o=67108863&n;n>>>=26,e.words[r]=o,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new v}return y[e]=t,t},I.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},I.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},I.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},I.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},I.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},I.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},I.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},I.prototype.isqr=function(e){return this.imul(e,e.clone())},I.prototype.sqr=function(e){return this.mul(e,e)},I.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var d=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,y=0;0!==m.cmp(a);y++)m=m.redSqr();r(y<p);var g=this.pow(d,new o(1).iushln(p-y-1));h=h.redMul(g),d=g.redSqr(),f=f.redMul(d),p=y}return h},I.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},I.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],l=c-1;l>=0;l--){var d=u>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==d||0!==s?(s<<=1,s|=d,(4===++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},I.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},I.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new k(e)},n(k,I),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),i=o;return o.cmp(this.m)>=0?i=o.isub(this.m):o.cmpn(0)<0&&(i=o.iadd(this.m)),i._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$3,bn$2)),bn$3.exports}function requireBrowser$3(){if(hasRequiredBrowser$3)return browser$3;hasRequiredBrowser$3=1;var e=requireElliptic(),t=requireBn$1();browser$3=function(e){return new n(e)};var r={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function n(t){this.curveType=r[t],this.curveType||(this.curveType={name:t}),this.curve=new e.ec(this.curveType.name),this.keys=void 0}function o(e,t,r){Array.isArray(e)||(e=e.toArray());var n=new Buffer(e);if(r&&n.length<r){var o=new Buffer(r-n.length);o.fill(0),n=Buffer.concat([o,n])}return t?n.toString(t):n}return r.p224=r.secp224r1,r.p256=r.secp256r1=r.prime256v1,r.p192=r.secp192r1=r.prime192v1,r.p384=r.secp384r1,r.p521=r.secp521r1,n.prototype.generateKeys=function(e,t){return this.keys=this.curve.genKeyPair(),this.getPublicKey(e,t)},n.prototype.computeSecret=function(e,t,r){return t=t||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,t)),o(this.curve.keyFromPublic(e).getPublic().mul(this.keys.getPrivate()).getX(),r,this.curveType.byteLength)},n.prototype.getPublicKey=function(e,t){var r=this.keys.getPublic("compressed"===t,!0);return"hybrid"===t&&(r[r.length-1]%2?r[0]=7:r[0]=6),o(r,e)},n.prototype.getPrivateKey=function(e){return o(this.keys.getPrivate(),e)},n.prototype.setPublicKey=function(e,t){return t=t||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,t)),this.keys._importPublic(e),this},n.prototype.setPrivateKey=function(e,r){r=r||"utf8",Buffer.isBuffer(e)||(e=new Buffer(e,r));var n=new t(e);return n=n.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(n),this},browser$3}var browser$2={},mgf,hasRequiredMgf,xor,hasRequiredXor;function requireMgf(){if(hasRequiredMgf)return mgf;hasRequiredMgf=1;var e=requireBrowser$a(),t=requireSafeBuffer$1().Buffer;function r(e){var r=t.allocUnsafe(4);return r.writeUInt32BE(e,0),r}return mgf=function(n,o){for(var i,s=t.alloc(0),a=0;s.length<o;)i=r(a++),s=t.concat([s,e("sha1").update(n).update(i).digest()]);return s.slice(0,o)}}function requireXor(){return hasRequiredXor?xor:(hasRequiredXor=1,xor=function(e,t){for(var r=e.length,n=-1;++n<r;)e[n]^=t[n];return e})}var bn$1={exports:{}},bn=bn$1.exports,hasRequiredBn,withPublic_1,hasRequiredWithPublic,publicEncrypt,hasRequiredPublicEncrypt,privateDecrypt,hasRequiredPrivateDecrypt,hasRequiredBrowser$2;function requireBn(){return hasRequiredBn||(hasRequiredBn=1,function(e,t){function r(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var i;"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{i="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:requireDist$1().Buffer}catch(T){}function s(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function a(e,t,r){var n=s(e,r);return r-1>=t&&(n|=s(e,r-1)<<4),n}function c(e,t,r,n){for(var o=0,i=Math.min(e.length,r),s=t;s<i;s++){var a=e.charCodeAt(s)-48;o*=n,o+=a>=49?a-49+10:a>=17?a-17+10:a}return o}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return e.cmp(t)<0?e:t},o.prototype._init=function(e,t,n){if("number"==typeof e)return this._initNumber(e,t,n);if("object"==typeof e)return this._initArray(e,t,n);"hex"===t&&(t=16),r(t===(0|t)&&t>=2&&t<=36);var o=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(o++,this.negative=1),o<e.length&&(16===t?this._parseHex(e,o,n):(this._parseBase(e,t,o),"le"===n&&this._initArray(this.toArray(),t,n)))},o.prototype._initNumber=function(e,t,n){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(r(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===n&&this._initArray(this.toArray(),t,n)},o.prototype._initArray=function(e,t,n){if(r("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var i,s,a=0;if("be"===n)for(o=e.length-1,i=0;o>=0;o-=3)s=e[o]|e[o-1]<<8|e[o-2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);else if("le"===n)for(o=0,i=0;o<e.length;o+=3)s=e[o]|e[o+1]<<8|e[o+2]<<16,this.words[i]|=s<<a&67108863,this.words[i+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,i++);return this.strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,i=0,s=0;if("be"===r)for(n=e.length-1;n>=t;n-=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;else for(n=(e.length-t)%2==0?t+1:t;n<e.length;n+=2)o=a(e,t,n)<<i,this.words[s]|=67108863&o,i>=18?(i-=18,s+=1,this.words[s]|=o>>>26):i+=8;this.strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var n=0,o=1;o<=67108863;o*=t)n++;n--,o=o/t|0;for(var i=e.length-r,s=i%n,a=Math.min(i,i-s)+r,u=0,l=r;l<a;l+=n)u=c(e,l,l+n,t),this.imuln(o),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var d=1;for(u=c(e,l,e.length,t),l=0;l<s;l++)d*=t;this.imuln(d),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}this.strip()},o.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function h(e,t,r){r.negative=t.negative^e.negative;var n=e.length+t.length|0;r.length=n,n=n-1|0;var o=0|e.words[0],i=0|t.words[0],s=o*i,a=67108863&s,c=s/67108864|0;r.words[0]=a;for(var u=1;u<n;u++){for(var l=c>>>26,d=67108863&c,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;l+=(s=(o=0|e.words[p])*(i=0|t.words[f])+d)/67108864|0,d=67108863&s}r.words[u]=0|d,c=0|l}return 0!==c?r.words[u]=0|c:r.length--,r.strip()}o.prototype.toString=function(e,t){var n;if(t=0|t||1,16===(e=e||10)||"hex"===e){n="";for(var o=0,i=0,s=0;s<this.length;s++){var a=this.words[s],c=(16777215&(a<<o|i)).toString(16);i=a>>>24-o&16777215,(o+=2)>=26&&(o-=26,s--),n=0!==i||s!==this.length-1?u[6-c.length]+c+n:c+n}for(0!==i&&(n=i.toString(16)+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}if(e===(0|e)&&e>=2&&e<=36){var h=l[e],f=d[e];n="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(e);n=(p=p.idivn(f)).isZero()?m+n:u[h-m.length]+m+n}for(this.isZero()&&(n="0"+n);n.length%t!==0;)n="0"+n;return 0!==this.negative&&(n="-"+n),n}r(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return r(void 0!==i),this.toArrayLike(i,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,n){var o=this.byteLength(),i=n||Math.max(1,o);r(o<=i,"byte array longer than desired length"),r(i>0,"Requested array length <= 0"),this.strip();var s,a,c="le"===t,u=new e(i),l=this.clone();if(c){for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[a]=s;for(;a<i;a++)u[a]=0}else{for(a=0;a<i-o;a++)u[a]=0;for(a=0;!l.isZero();a++)s=l.andln(255),l.iushrn(8),u[i-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 8191&t||(r+=13,t>>>=13),127&t||(r+=7,t>>>=7),15&t||(r+=4,t>>>=4),3&t||(r+=2,t>>>=2),1&t||r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return r(0===(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return r(0===(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var n=0;n<r.length;n++)this.words[n]=t.words[n]^r.words[n];if(this!==t)for(;n<t.length;n++)this.words[n]=t.words[n];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return r(0===(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){r("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),n=e%26;this._expand(t),n>0&&t--;for(var o=0;o<t;o++)this.words[o]=67108863&~this.words[o];return n>0&&(this.words[o]=~this.words[o]&67108863>>26-n),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){r("number"==typeof e&&e>=0);var n=e/26|0,o=e%26;return this._expand(n+1),this.words[n]=t?this.words[n]|1<<o:this.words[n]&~(1<<o),this.strip()},o.prototype.iadd=function(e){var t,r,n;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,n=e):(r=e,n=this);for(var o=0,i=0;i<n.length;i++)t=(0|r.words[i])+(0|n.words[i])+o,this.words[i]=67108863&t,o=t>>>26;for(;0!==o&&i<r.length;i++)t=(0|r.words[i])+o,this.words[i]=67108863&t,o=t>>>26;if(this.length=r.length,0!==o)this.words[this.length]=o,this.length++;else if(r!==this)for(;i<r.length;i++)this.words[i]=r.words[i];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,n,o=this.cmp(e);if(0===o)return this.negative=0,this.length=1,this.words[0]=0,this;o>0?(r=this,n=e):(r=e,n=this);for(var i=0,s=0;s<n.length;s++)i=(t=(0|r.words[s])-(0|n.words[s])+i)>>26,this.words[s]=67108863&t;for(;0!==i&&s<r.length;s++)i=(t=(0|r.words[s])+i)>>26,this.words[s]=67108863&t;if(0===i&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var f=function(e,t,r){var n,o,i,s=e.words,a=t.words,c=r.words,u=0,l=0|s[0],d=8191&l,h=l>>>13,f=0|s[1],p=8191&f,m=f>>>13,y=0|s[2],g=8191&y,b=y>>>13,_=0|s[3],w=8191&_,v=_>>>13,I=0|s[4],k=8191&I,T=I>>>13,A=0|s[5],S=8191&A,E=A>>>13,P=0|s[6],O=8191&P,R=P>>>13,C=0|s[7],$=8191&C,N=C>>>13,M=0|s[8],x=8191&M,B=M>>>13,D=0|s[9],L=8191&D,F=D>>>13,j=0|a[0],U=8191&j,q=j>>>13,K=0|a[1],H=8191&K,G=K>>>13,z=0|a[2],V=8191&z,Z=z>>>13,W=0|a[3],J=8191&W,Y=W>>>13,Q=0|a[4],X=8191&Q,ee=Q>>>13,te=0|a[5],re=8191&te,ne=te>>>13,oe=0|a[6],ie=8191&oe,se=oe>>>13,ae=0|a[7],ce=8191&ae,ue=ae>>>13,le=0|a[8],de=8191&le,he=le>>>13,fe=0|a[9],pe=8191&fe,me=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var ye=(u+(n=Math.imul(d,U))|0)+((8191&(o=(o=Math.imul(d,q))+Math.imul(h,U)|0))<<13)|0;u=((i=Math.imul(h,q))+(o>>>13)|0)+(ye>>>26)|0,ye&=67108863,n=Math.imul(p,U),o=(o=Math.imul(p,q))+Math.imul(m,U)|0,i=Math.imul(m,q);var ge=(u+(n=n+Math.imul(d,H)|0)|0)+((8191&(o=(o=o+Math.imul(d,G)|0)+Math.imul(h,H)|0))<<13)|0;u=((i=i+Math.imul(h,G)|0)+(o>>>13)|0)+(ge>>>26)|0,ge&=67108863,n=Math.imul(g,U),o=(o=Math.imul(g,q))+Math.imul(b,U)|0,i=Math.imul(b,q),n=n+Math.imul(p,H)|0,o=(o=o+Math.imul(p,G)|0)+Math.imul(m,H)|0,i=i+Math.imul(m,G)|0;var be=(u+(n=n+Math.imul(d,V)|0)|0)+((8191&(o=(o=o+Math.imul(d,Z)|0)+Math.imul(h,V)|0))<<13)|0;u=((i=i+Math.imul(h,Z)|0)+(o>>>13)|0)+(be>>>26)|0,be&=67108863,n=Math.imul(w,U),o=(o=Math.imul(w,q))+Math.imul(v,U)|0,i=Math.imul(v,q),n=n+Math.imul(g,H)|0,o=(o=o+Math.imul(g,G)|0)+Math.imul(b,H)|0,i=i+Math.imul(b,G)|0,n=n+Math.imul(p,V)|0,o=(o=o+Math.imul(p,Z)|0)+Math.imul(m,V)|0,i=i+Math.imul(m,Z)|0;var _e=(u+(n=n+Math.imul(d,J)|0)|0)+((8191&(o=(o=o+Math.imul(d,Y)|0)+Math.imul(h,J)|0))<<13)|0;u=((i=i+Math.imul(h,Y)|0)+(o>>>13)|0)+(_e>>>26)|0,_e&=67108863,n=Math.imul(k,U),o=(o=Math.imul(k,q))+Math.imul(T,U)|0,i=Math.imul(T,q),n=n+Math.imul(w,H)|0,o=(o=o+Math.imul(w,G)|0)+Math.imul(v,H)|0,i=i+Math.imul(v,G)|0,n=n+Math.imul(g,V)|0,o=(o=o+Math.imul(g,Z)|0)+Math.imul(b,V)|0,i=i+Math.imul(b,Z)|0,n=n+Math.imul(p,J)|0,o=(o=o+Math.imul(p,Y)|0)+Math.imul(m,J)|0,i=i+Math.imul(m,Y)|0;var we=(u+(n=n+Math.imul(d,X)|0)|0)+((8191&(o=(o=o+Math.imul(d,ee)|0)+Math.imul(h,X)|0))<<13)|0;u=((i=i+Math.imul(h,ee)|0)+(o>>>13)|0)+(we>>>26)|0,we&=67108863,n=Math.imul(S,U),o=(o=Math.imul(S,q))+Math.imul(E,U)|0,i=Math.imul(E,q),n=n+Math.imul(k,H)|0,o=(o=o+Math.imul(k,G)|0)+Math.imul(T,H)|0,i=i+Math.imul(T,G)|0,n=n+Math.imul(w,V)|0,o=(o=o+Math.imul(w,Z)|0)+Math.imul(v,V)|0,i=i+Math.imul(v,Z)|0,n=n+Math.imul(g,J)|0,o=(o=o+Math.imul(g,Y)|0)+Math.imul(b,J)|0,i=i+Math.imul(b,Y)|0,n=n+Math.imul(p,X)|0,o=(o=o+Math.imul(p,ee)|0)+Math.imul(m,X)|0,i=i+Math.imul(m,ee)|0;var ve=(u+(n=n+Math.imul(d,re)|0)|0)+((8191&(o=(o=o+Math.imul(d,ne)|0)+Math.imul(h,re)|0))<<13)|0;u=((i=i+Math.imul(h,ne)|0)+(o>>>13)|0)+(ve>>>26)|0,ve&=67108863,n=Math.imul(O,U),o=(o=Math.imul(O,q))+Math.imul(R,U)|0,i=Math.imul(R,q),n=n+Math.imul(S,H)|0,o=(o=o+Math.imul(S,G)|0)+Math.imul(E,H)|0,i=i+Math.imul(E,G)|0,n=n+Math.imul(k,V)|0,o=(o=o+Math.imul(k,Z)|0)+Math.imul(T,V)|0,i=i+Math.imul(T,Z)|0,n=n+Math.imul(w,J)|0,o=(o=o+Math.imul(w,Y)|0)+Math.imul(v,J)|0,i=i+Math.imul(v,Y)|0,n=n+Math.imul(g,X)|0,o=(o=o+Math.imul(g,ee)|0)+Math.imul(b,X)|0,i=i+Math.imul(b,ee)|0,n=n+Math.imul(p,re)|0,o=(o=o+Math.imul(p,ne)|0)+Math.imul(m,re)|0,i=i+Math.imul(m,ne)|0;var Ie=(u+(n=n+Math.imul(d,ie)|0)|0)+((8191&(o=(o=o+Math.imul(d,se)|0)+Math.imul(h,ie)|0))<<13)|0;u=((i=i+Math.imul(h,se)|0)+(o>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,n=Math.imul($,U),o=(o=Math.imul($,q))+Math.imul(N,U)|0,i=Math.imul(N,q),n=n+Math.imul(O,H)|0,o=(o=o+Math.imul(O,G)|0)+Math.imul(R,H)|0,i=i+Math.imul(R,G)|0,n=n+Math.imul(S,V)|0,o=(o=o+Math.imul(S,Z)|0)+Math.imul(E,V)|0,i=i+Math.imul(E,Z)|0,n=n+Math.imul(k,J)|0,o=(o=o+Math.imul(k,Y)|0)+Math.imul(T,J)|0,i=i+Math.imul(T,Y)|0,n=n+Math.imul(w,X)|0,o=(o=o+Math.imul(w,ee)|0)+Math.imul(v,X)|0,i=i+Math.imul(v,ee)|0,n=n+Math.imul(g,re)|0,o=(o=o+Math.imul(g,ne)|0)+Math.imul(b,re)|0,i=i+Math.imul(b,ne)|0,n=n+Math.imul(p,ie)|0,o=(o=o+Math.imul(p,se)|0)+Math.imul(m,ie)|0,i=i+Math.imul(m,se)|0;var ke=(u+(n=n+Math.imul(d,ce)|0)|0)+((8191&(o=(o=o+Math.imul(d,ue)|0)+Math.imul(h,ce)|0))<<13)|0;u=((i=i+Math.imul(h,ue)|0)+(o>>>13)|0)+(ke>>>26)|0,ke&=67108863,n=Math.imul(x,U),o=(o=Math.imul(x,q))+Math.imul(B,U)|0,i=Math.imul(B,q),n=n+Math.imul($,H)|0,o=(o=o+Math.imul($,G)|0)+Math.imul(N,H)|0,i=i+Math.imul(N,G)|0,n=n+Math.imul(O,V)|0,o=(o=o+Math.imul(O,Z)|0)+Math.imul(R,V)|0,i=i+Math.imul(R,Z)|0,n=n+Math.imul(S,J)|0,o=(o=o+Math.imul(S,Y)|0)+Math.imul(E,J)|0,i=i+Math.imul(E,Y)|0,n=n+Math.imul(k,X)|0,o=(o=o+Math.imul(k,ee)|0)+Math.imul(T,X)|0,i=i+Math.imul(T,ee)|0,n=n+Math.imul(w,re)|0,o=(o=o+Math.imul(w,ne)|0)+Math.imul(v,re)|0,i=i+Math.imul(v,ne)|0,n=n+Math.imul(g,ie)|0,o=(o=o+Math.imul(g,se)|0)+Math.imul(b,ie)|0,i=i+Math.imul(b,se)|0,n=n+Math.imul(p,ce)|0,o=(o=o+Math.imul(p,ue)|0)+Math.imul(m,ce)|0,i=i+Math.imul(m,ue)|0;var Te=(u+(n=n+Math.imul(d,de)|0)|0)+((8191&(o=(o=o+Math.imul(d,he)|0)+Math.imul(h,de)|0))<<13)|0;u=((i=i+Math.imul(h,he)|0)+(o>>>13)|0)+(Te>>>26)|0,Te&=67108863,n=Math.imul(L,U),o=(o=Math.imul(L,q))+Math.imul(F,U)|0,i=Math.imul(F,q),n=n+Math.imul(x,H)|0,o=(o=o+Math.imul(x,G)|0)+Math.imul(B,H)|0,i=i+Math.imul(B,G)|0,n=n+Math.imul($,V)|0,o=(o=o+Math.imul($,Z)|0)+Math.imul(N,V)|0,i=i+Math.imul(N,Z)|0,n=n+Math.imul(O,J)|0,o=(o=o+Math.imul(O,Y)|0)+Math.imul(R,J)|0,i=i+Math.imul(R,Y)|0,n=n+Math.imul(S,X)|0,o=(o=o+Math.imul(S,ee)|0)+Math.imul(E,X)|0,i=i+Math.imul(E,ee)|0,n=n+Math.imul(k,re)|0,o=(o=o+Math.imul(k,ne)|0)+Math.imul(T,re)|0,i=i+Math.imul(T,ne)|0,n=n+Math.imul(w,ie)|0,o=(o=o+Math.imul(w,se)|0)+Math.imul(v,ie)|0,i=i+Math.imul(v,se)|0,n=n+Math.imul(g,ce)|0,o=(o=o+Math.imul(g,ue)|0)+Math.imul(b,ce)|0,i=i+Math.imul(b,ue)|0,n=n+Math.imul(p,de)|0,o=(o=o+Math.imul(p,he)|0)+Math.imul(m,de)|0,i=i+Math.imul(m,he)|0;var Ae=(u+(n=n+Math.imul(d,pe)|0)|0)+((8191&(o=(o=o+Math.imul(d,me)|0)+Math.imul(h,pe)|0))<<13)|0;u=((i=i+Math.imul(h,me)|0)+(o>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,n=Math.imul(L,H),o=(o=Math.imul(L,G))+Math.imul(F,H)|0,i=Math.imul(F,G),n=n+Math.imul(x,V)|0,o=(o=o+Math.imul(x,Z)|0)+Math.imul(B,V)|0,i=i+Math.imul(B,Z)|0,n=n+Math.imul($,J)|0,o=(o=o+Math.imul($,Y)|0)+Math.imul(N,J)|0,i=i+Math.imul(N,Y)|0,n=n+Math.imul(O,X)|0,o=(o=o+Math.imul(O,ee)|0)+Math.imul(R,X)|0,i=i+Math.imul(R,ee)|0,n=n+Math.imul(S,re)|0,o=(o=o+Math.imul(S,ne)|0)+Math.imul(E,re)|0,i=i+Math.imul(E,ne)|0,n=n+Math.imul(k,ie)|0,o=(o=o+Math.imul(k,se)|0)+Math.imul(T,ie)|0,i=i+Math.imul(T,se)|0,n=n+Math.imul(w,ce)|0,o=(o=o+Math.imul(w,ue)|0)+Math.imul(v,ce)|0,i=i+Math.imul(v,ue)|0,n=n+Math.imul(g,de)|0,o=(o=o+Math.imul(g,he)|0)+Math.imul(b,de)|0,i=i+Math.imul(b,he)|0;var Se=(u+(n=n+Math.imul(p,pe)|0)|0)+((8191&(o=(o=o+Math.imul(p,me)|0)+Math.imul(m,pe)|0))<<13)|0;u=((i=i+Math.imul(m,me)|0)+(o>>>13)|0)+(Se>>>26)|0,Se&=67108863,n=Math.imul(L,V),o=(o=Math.imul(L,Z))+Math.imul(F,V)|0,i=Math.imul(F,Z),n=n+Math.imul(x,J)|0,o=(o=o+Math.imul(x,Y)|0)+Math.imul(B,J)|0,i=i+Math.imul(B,Y)|0,n=n+Math.imul($,X)|0,o=(o=o+Math.imul($,ee)|0)+Math.imul(N,X)|0,i=i+Math.imul(N,ee)|0,n=n+Math.imul(O,re)|0,o=(o=o+Math.imul(O,ne)|0)+Math.imul(R,re)|0,i=i+Math.imul(R,ne)|0,n=n+Math.imul(S,ie)|0,o=(o=o+Math.imul(S,se)|0)+Math.imul(E,ie)|0,i=i+Math.imul(E,se)|0,n=n+Math.imul(k,ce)|0,o=(o=o+Math.imul(k,ue)|0)+Math.imul(T,ce)|0,i=i+Math.imul(T,ue)|0,n=n+Math.imul(w,de)|0,o=(o=o+Math.imul(w,he)|0)+Math.imul(v,de)|0,i=i+Math.imul(v,he)|0;var Ee=(u+(n=n+Math.imul(g,pe)|0)|0)+((8191&(o=(o=o+Math.imul(g,me)|0)+Math.imul(b,pe)|0))<<13)|0;u=((i=i+Math.imul(b,me)|0)+(o>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,n=Math.imul(L,J),o=(o=Math.imul(L,Y))+Math.imul(F,J)|0,i=Math.imul(F,Y),n=n+Math.imul(x,X)|0,o=(o=o+Math.imul(x,ee)|0)+Math.imul(B,X)|0,i=i+Math.imul(B,ee)|0,n=n+Math.imul($,re)|0,o=(o=o+Math.imul($,ne)|0)+Math.imul(N,re)|0,i=i+Math.imul(N,ne)|0,n=n+Math.imul(O,ie)|0,o=(o=o+Math.imul(O,se)|0)+Math.imul(R,ie)|0,i=i+Math.imul(R,se)|0,n=n+Math.imul(S,ce)|0,o=(o=o+Math.imul(S,ue)|0)+Math.imul(E,ce)|0,i=i+Math.imul(E,ue)|0,n=n+Math.imul(k,de)|0,o=(o=o+Math.imul(k,he)|0)+Math.imul(T,de)|0,i=i+Math.imul(T,he)|0;var Pe=(u+(n=n+Math.imul(w,pe)|0)|0)+((8191&(o=(o=o+Math.imul(w,me)|0)+Math.imul(v,pe)|0))<<13)|0;u=((i=i+Math.imul(v,me)|0)+(o>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,n=Math.imul(L,X),o=(o=Math.imul(L,ee))+Math.imul(F,X)|0,i=Math.imul(F,ee),n=n+Math.imul(x,re)|0,o=(o=o+Math.imul(x,ne)|0)+Math.imul(B,re)|0,i=i+Math.imul(B,ne)|0,n=n+Math.imul($,ie)|0,o=(o=o+Math.imul($,se)|0)+Math.imul(N,ie)|0,i=i+Math.imul(N,se)|0,n=n+Math.imul(O,ce)|0,o=(o=o+Math.imul(O,ue)|0)+Math.imul(R,ce)|0,i=i+Math.imul(R,ue)|0,n=n+Math.imul(S,de)|0,o=(o=o+Math.imul(S,he)|0)+Math.imul(E,de)|0,i=i+Math.imul(E,he)|0;var Oe=(u+(n=n+Math.imul(k,pe)|0)|0)+((8191&(o=(o=o+Math.imul(k,me)|0)+Math.imul(T,pe)|0))<<13)|0;u=((i=i+Math.imul(T,me)|0)+(o>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,n=Math.imul(L,re),o=(o=Math.imul(L,ne))+Math.imul(F,re)|0,i=Math.imul(F,ne),n=n+Math.imul(x,ie)|0,o=(o=o+Math.imul(x,se)|0)+Math.imul(B,ie)|0,i=i+Math.imul(B,se)|0,n=n+Math.imul($,ce)|0,o=(o=o+Math.imul($,ue)|0)+Math.imul(N,ce)|0,i=i+Math.imul(N,ue)|0,n=n+Math.imul(O,de)|0,o=(o=o+Math.imul(O,he)|0)+Math.imul(R,de)|0,i=i+Math.imul(R,he)|0;var Re=(u+(n=n+Math.imul(S,pe)|0)|0)+((8191&(o=(o=o+Math.imul(S,me)|0)+Math.imul(E,pe)|0))<<13)|0;u=((i=i+Math.imul(E,me)|0)+(o>>>13)|0)+(Re>>>26)|0,Re&=67108863,n=Math.imul(L,ie),o=(o=Math.imul(L,se))+Math.imul(F,ie)|0,i=Math.imul(F,se),n=n+Math.imul(x,ce)|0,o=(o=o+Math.imul(x,ue)|0)+Math.imul(B,ce)|0,i=i+Math.imul(B,ue)|0,n=n+Math.imul($,de)|0,o=(o=o+Math.imul($,he)|0)+Math.imul(N,de)|0,i=i+Math.imul(N,he)|0;var Ce=(u+(n=n+Math.imul(O,pe)|0)|0)+((8191&(o=(o=o+Math.imul(O,me)|0)+Math.imul(R,pe)|0))<<13)|0;u=((i=i+Math.imul(R,me)|0)+(o>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,n=Math.imul(L,ce),o=(o=Math.imul(L,ue))+Math.imul(F,ce)|0,i=Math.imul(F,ue),n=n+Math.imul(x,de)|0,o=(o=o+Math.imul(x,he)|0)+Math.imul(B,de)|0,i=i+Math.imul(B,he)|0;var $e=(u+(n=n+Math.imul($,pe)|0)|0)+((8191&(o=(o=o+Math.imul($,me)|0)+Math.imul(N,pe)|0))<<13)|0;u=((i=i+Math.imul(N,me)|0)+(o>>>13)|0)+($e>>>26)|0,$e&=67108863,n=Math.imul(L,de),o=(o=Math.imul(L,he))+Math.imul(F,de)|0,i=Math.imul(F,he);var Ne=(u+(n=n+Math.imul(x,pe)|0)|0)+((8191&(o=(o=o+Math.imul(x,me)|0)+Math.imul(B,pe)|0))<<13)|0;u=((i=i+Math.imul(B,me)|0)+(o>>>13)|0)+(Ne>>>26)|0,Ne&=67108863;var Me=(u+(n=Math.imul(L,pe))|0)+((8191&(o=(o=Math.imul(L,me))+Math.imul(F,pe)|0))<<13)|0;return u=((i=Math.imul(F,me))+(o>>>13)|0)+(Me>>>26)|0,Me&=67108863,c[0]=ye,c[1]=ge,c[2]=be,c[3]=_e,c[4]=we,c[5]=ve,c[6]=Ie,c[7]=ke,c[8]=Te,c[9]=Ae,c[10]=Se,c[11]=Ee,c[12]=Pe,c[13]=Oe,c[14]=Re,c[15]=Ce,c[16]=$e,c[17]=Ne,c[18]=Me,0!==u&&(c[19]=u,r.length++),r};function p(e,t,r){return(new m).mulp(e,t,r)}function m(e,t){this.x=e,this.y=t}Math.imul||(f=h),o.prototype.mulTo=function(e,t){var r,n=this.length+e.length;return r=10===this.length&&10===e.length?f(this,e,t):n<63?h(this,e,t):n<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var n=0,o=0,i=0;i<r.length-1;i++){var s=o;o=0;for(var a=67108863&n,c=Math.min(i,t.length-1),u=Math.max(0,i-e.length+1);u<=c;u++){var l=i-u,d=(0|e.words[l])*(0|t.words[u]),h=67108863&d;a=67108863&(h=h+a|0),o+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[i]=a,n=s,s=o}return 0!==n?r.words[i]=n:r.length--,r.strip()}(this,e,t):p(this,e,t),r},m.prototype.makeRBT=function(e){for(var t=new Array(e),r=o.prototype._countBits(e)-1,n=0;n<e;n++)t[n]=this.revBin(n,r,e);return t},m.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var n=0,o=0;o<t;o++)n|=(1&e)<<t-o-1,e>>=1;return n},m.prototype.permute=function(e,t,r,n,o,i){for(var s=0;s<i;s++)n[s]=t[e[s]],o[s]=r[e[s]]},m.prototype.transform=function(e,t,r,n,o,i){this.permute(i,e,t,r,n,o);for(var s=1;s<o;s<<=1)for(var a=s<<1,c=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),l=0;l<o;l+=a)for(var d=c,h=u,f=0;f<s;f++){var p=r[l+f],m=n[l+f],y=r[l+f+s],g=n[l+f+s],b=d*y-h*g;g=d*g+h*y,y=b,r[l+f]=p+y,n[l+f]=m+g,r[l+f+s]=p-y,n[l+f+s]=m-g,f!==a&&(b=c*d-u*h,h=c*h+u*d,d=b)}},m.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),n=1&r,o=0;for(r=r/2|0;r;r>>>=1)o++;return 1<<o+1+n},m.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var n=0;n<r/2;n++){var o=e[n];e[n]=e[r-n-1],e[r-n-1]=o,o=t[n],t[n]=-t[r-n-1],t[r-n-1]=-o}},m.prototype.normalize13b=function(e,t){for(var r=0,n=0;n<t/2;n++){var o=8192*Math.round(e[2*n+1]/t)+Math.round(e[2*n]/t)+r;e[n]=67108863&o,r=o<67108864?0:o/67108864|0}return e},m.prototype.convert13b=function(e,t,n,o){for(var i=0,s=0;s<t;s++)i+=0|e[s],n[2*s]=8191&i,i>>>=13,n[2*s+1]=8191&i,i>>>=13;for(s=2*t;s<o;++s)n[s]=0;r(0===i),r(!(-8192&i))},m.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},m.prototype.mulp=function(e,t,r){var n=2*this.guessLen13b(e.length,t.length),o=this.makeRBT(n),i=this.stub(n),s=new Array(n),a=new Array(n),c=new Array(n),u=new Array(n),l=new Array(n),d=new Array(n),h=r.words;h.length=n,this.convert13b(e.words,e.length,s,n),this.convert13b(t.words,t.length,u,n),this.transform(s,i,a,c,n,o),this.transform(u,i,l,d,n,o);for(var f=0;f<n;f++){var p=a[f]*l[f]-c[f]*d[f];c[f]=a[f]*d[f]+c[f]*l[f],a[f]=p}return this.conjugate(a,c,n),this.transform(a,c,h,i,n,o),this.conjugate(h,i,n),this.normalize13b(h,n),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=new Array(this.length+e.length),p(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){r("number"==typeof e),r(e<67108864);for(var t=0,n=0;n<this.length;n++){var o=(0|this.words[n])*e,i=(67108863&o)+(67108863&t);t>>=26,t+=o/67108864|0,t+=i>>>26,this.words[n]=67108863&i}return 0!==t&&(this.words[n]=t,this.length++),this.length=0===e?1:this.length,this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var n=r/26|0,o=r%26;t[r]=(e.words[n]&1<<o)>>>o}return t}(e);if(0===t.length)return new o(1);for(var r=this,n=0;n<t.length&&0===t[n];n++,r=r.sqr());if(++n<t.length)for(var i=r.sqr();n<t.length;n++,i=i.sqr())0!==t[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(e){r("number"==typeof e&&e>=0);var t,n=e%26,o=(e-n)/26,i=67108863>>>26-n<<26-n;if(0!==n){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&i,c=(0|this.words[t])-a<<n;this.words[t]=c|s,s=a>>>26-n}s&&(this.words[t]=s,this.length++)}if(0!==o){for(t=this.length-1;t>=0;t--)this.words[t+o]=this.words[t];for(t=0;t<o;t++)this.words[t]=0;this.length+=o}return this.strip()},o.prototype.ishln=function(e){return r(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,n){var o;r("number"==typeof e&&e>=0),o=t?(t-t%26)/26:0;var i=e%26,s=Math.min((e-i)/26,this.length),a=67108863^67108863>>>i<<i,c=n;if(o-=s,o=Math.max(0,o),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var l=0;for(u=this.length-1;u>=0&&(0!==l||u>=o);u--){var d=0|this.words[u];this.words[u]=l<<26-i|d>>>i,l=d&a}return c&&0!==l&&(c.words[c.length++]=l),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,n){return r(0===this.negative),this.iushrn(e,t,n)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26,o=1<<t;return!(this.length<=n||!(this.words[n]&o))},o.prototype.imaskn=function(e){r("number"==typeof e&&e>=0);var t=e%26,n=(e-t)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=n)return this;if(0!==t&&n++,this.length=Math.min(n,this.length),0!==t){var o=67108863^67108863>>>t<<t;this.words[this.length-1]&=o}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return r("number"==typeof e),r(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(r("number"==typeof e),r(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,n){var o,i,s=e.length+n;this._expand(s);var a=0;for(o=0;o<e.length;o++){i=(0|this.words[o+n])+a;var c=(0|e.words[o])*t;a=((i-=67108863&c)>>26)-(c/67108864|0),this.words[o+n]=67108863&i}for(;o<this.length-n;o++)a=(i=(0|this.words[o+n])+a)>>26,this.words[o+n]=67108863&i;if(0===a)return this.strip();for(r(-1===a),a=0,o=0;o<this.length;o++)a=(i=-(0|this.words[o])+a)>>26,this.words[o]=67108863&i;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),n=this.clone(),i=e,s=0|i.words[i.length-1];0!=(r=26-this._countBits(s))&&(i=i.ushln(r),n.iushln(r),s=0|i.words[i.length-1]);var a,c=n.length-i.length;if("mod"!==t){(a=new o(null)).length=c+1,a.words=new Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var l=n.clone()._ishlnsubmul(i,1,c);0===l.negative&&(n=l,a&&(a.words[c]=1));for(var d=c-1;d>=0;d--){var h=67108864*(0|n.words[i.length+d])+(0|n.words[i.length+d-1]);for(h=Math.min(h/s|0,67108863),n._ishlnsubmul(i,h,d);0!==n.negative;)h--,n.negative=0,n._ishlnsubmul(i,1,d),n.isZero()||(n.negative^=1);a&&(a.words[d]=h)}return a&&a.strip(),n.strip(),"div"!==t&&0!==r&&n.iushrn(r),{div:a||null,mod:n}},o.prototype.divmod=function(e,t,n){return r(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(i=a.div.neg()),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.iadd(e)),{div:i,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(i=a.div.neg()),{div:i,mod:a.mod}):0!==(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),n&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t);var i,s,a},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,n=e.ushrn(1),o=e.andln(1),i=r.cmp(n);return i<0||1===o&&0===i?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){r(e<=67108863);for(var t=(1<<26)%e,n=0,o=this.length-1;o>=0;o--)n=(t*n+(0|this.words[o]))%e;return n},o.prototype.idivn=function(e){r(e<=67108863);for(var t=0,n=this.length-1;n>=0;n--){var o=(0|this.words[n])+67108864*t;this.words[n]=o/e|0,t=o%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i=new o(1),s=new o(0),a=new o(0),c=new o(1),u=0;t.isEven()&&n.isEven();)t.iushrn(1),n.iushrn(1),++u;for(var l=n.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0===(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(i.isOdd()||s.isOdd())&&(i.iadd(l),s.isub(d)),i.iushrn(1),s.iushrn(1);for(var p=0,m=1;0===(n.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(n.iushrn(p);p-- >0;)(a.isOdd()||c.isOdd())&&(a.iadd(l),c.isub(d)),a.iushrn(1),c.iushrn(1);t.cmp(n)>=0?(t.isub(n),i.isub(a),s.isub(c)):(n.isub(t),a.isub(i),c.isub(s))}return{a:a,b:c,gcd:n.iushln(u)}},o.prototype._invmp=function(e){r(0===e.negative),r(!e.isZero());var t=this,n=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var i,s=new o(1),a=new o(0),c=n.clone();t.cmpn(1)>0&&n.cmpn(1)>0;){for(var u=0,l=1;0===(t.words[0]&l)&&u<26;++u,l<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var d=0,h=1;0===(n.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(n.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(c),a.iushrn(1);t.cmp(n)>=0?(t.isub(n),s.isub(a)):(n.isub(t),a.isub(s))}return(i=0===t.cmpn(1)?s:a).cmpn(0)<0&&i.iadd(e),i},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var n=0;t.isEven()&&r.isEven();n++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var o=t.cmp(r);if(o<0){var i=t;t=r,r=i}else if(0===o||0===r.cmpn(1))break;t.isub(r)}return r.iushln(n)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return!(1&this.words[0])},o.prototype.isOdd=function(){return!(1&~this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){r("number"==typeof e);var t=e%26,n=(e-t)/26,o=1<<t;if(this.length<=n)return this._expand(n+1),this.words[n]|=o,this;for(var i=o,s=n;0!==i&&s<this.length;s++){var a=0|this.words[s];i=(a+=i)>>>26,a&=67108863,this.words[s]=a}return 0!==i&&(this.words[s]=i,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,n=e<0;if(0!==this.negative&&!n)return-1;if(0===this.negative&&n)return 1;if(this.strip(),this.length>1)t=1;else{n&&(e=-e),r(e<=67108863,"Number is too big");var o=0|this.words[0];t=o===e?0:o<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],o=0|e.words[r];if(n!==o){n<o?t=-1:n>o&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return-1===this.cmpn(e)},o.prototype.lt=function(e){return-1===this.cmp(e)},o.prototype.lten=function(e){return this.cmpn(e)<=0},o.prototype.lte=function(e){return this.cmp(e)<=0},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new I(e)},o.prototype.toRed=function(e){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return r(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return r(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var y={k256:null,p224:null,p192:null,p25519:null};function g(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){g.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){g.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){g.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function v(){g.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function I(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else r(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function k(e){I.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}g.prototype._tmp=function(){var e=new o(null);return e.words=new Array(Math.ceil(this.n/13)),e},g.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var n=t<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},g.prototype.split=function(e,t){e.iushrn(this.n,0,t)},g.prototype.imulK=function(e){return e.imul(this.k)},n(b,g),b.prototype.split=function(e,t){for(var r=4194303,n=Math.min(e.length,9),o=0;o<n;o++)t.words[o]=e.words[o];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=i&r,o=10;o<e.length;o++){var s=0|e.words[o];e.words[o-10]=(s&r)<<4|i>>>22,i=s}i>>>=22,e.words[o-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},b.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var n=0|e.words[r];t+=977*n,e.words[r]=67108863&t,t=64*n+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(_,g),n(w,g),n(v,g),v.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var n=19*(0|e.words[r])+t,o=67108863&n;n>>>=26,e.words[r]=o,t=n}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){if(y[e])return y[e];var t;if("k256"===e)t=new b;else if("p224"===e)t=new _;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new v}return y[e]=t,t},I.prototype._verify1=function(e){r(0===e.negative,"red works only with positives"),r(e.red,"red works only with red numbers")},I.prototype._verify2=function(e,t){r(0===(e.negative|t.negative),"red works only with positives"),r(e.red&&e.red===t.red,"red works only with red numbers")},I.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},I.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},I.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},I.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},I.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},I.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},I.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},I.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},I.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},I.prototype.isqr=function(e){return this.imul(e,e.clone())},I.prototype.sqr=function(e){return this.mul(e,e)},I.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(r(t%2==1),3===t){var n=this.m.add(new o(1)).iushrn(2);return this.pow(e,n)}for(var i=this.m.subn(1),s=0;!i.isZero()&&0===i.andln(1);)s++,i.iushrn(1);r(!i.isZero());var a=new o(1).toRed(this),c=a.redNeg(),u=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);0!==this.pow(l,u).cmp(c);)l.redIAdd(c);for(var d=this.pow(l,i),h=this.pow(e,i.addn(1).iushrn(1)),f=this.pow(e,i),p=s;0!==f.cmp(a);){for(var m=f,y=0;0!==m.cmp(a);y++)m=m.redSqr();r(y<p);var g=this.pow(d,new o(1).iushln(p-y-1));h=h.redMul(g),d=g.redSqr(),f=f.redMul(d),p=y}return h},I.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},I.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],e);var i=r[0],s=0,a=0,c=t.bitLength()%26;for(0===c&&(c=26),n=t.length-1;n>=0;n--){for(var u=t.words[n],l=c-1;l>=0;l--){var d=u>>l&1;i!==r[0]&&(i=this.sqr(i)),0!==d||0!==s?(s<<=1,s|=d,(4===++a||0===n&&0===l)&&(i=this.mul(i,r[s]),a=0,s=0)):a=0}c=26}return i},I.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},I.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new k(e)},n(k,I),k.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},k.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},k.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),o=r.isub(n).iushrn(this.shift),i=o;return o.cmp(this.m)>=0?i=o.isub(this.m):o.cmpn(0)<0&&(i=o.iadd(this.m)),i._forceRed(this)},k.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),s=i;return i.cmp(this.m)>=0?s=i.isub(this.m):i.cmpn(0)<0&&(s=i.iadd(this.m)),s._forceRed(this)},k.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(bn$1,bn)),bn$1.exports}function requireWithPublic(){if(hasRequiredWithPublic)return withPublic_1;hasRequiredWithPublic=1;var e=requireBn(),t=requireSafeBuffer$1().Buffer;return withPublic_1=function(r,n){return t.from(r.toRed(e.mont(n.modulus)).redPow(new e(n.publicExponent)).fromRed().toArray())}}function requirePublicEncrypt(){if(hasRequiredPublicEncrypt)return publicEncrypt;hasRequiredPublicEncrypt=1;var e=requireParseAsn1(),t=requireBrowser$c(),r=requireBrowser$a(),n=requireMgf(),o=requireXor(),i=requireBn(),s=requireWithPublic(),a=requireBrowserifyRsa(),c=requireSafeBuffer$1().Buffer;return publicEncrypt=function(u,l,d){var h;h=u.padding?u.padding:d?1:4;var f,p=e(u);if(4===h)f=function(e,s){var a=e.modulus.byteLength(),u=s.length,l=r("sha1").update(c.alloc(0)).digest(),d=l.length,h=2*d;if(u>a-h-2)throw new Error("message too long");var f=c.alloc(a-u-h-2),p=a-d-1,m=t(d),y=o(c.concat([l,f,c.alloc(1,1),s],p),n(m,p)),g=o(m,n(y,d));return new i(c.concat([c.alloc(1),g,y],a))}(p,l);else if(1===h)f=function(e,r,n){var o,s=r.length,a=e.modulus.byteLength();if(s>a-11)throw new Error("message too long");o=n?c.alloc(a-s-3,255):function(e){var r,n=c.allocUnsafe(e),o=0,i=t(2*e),s=0;for(;o<e;)s===i.length&&(i=t(2*e),s=0),(r=i[s++])&&(n[o++]=r);return n}(a-s-3);return new i(c.concat([c.from([0,n?1:2]),o,c.alloc(1),r],a))}(p,l,d);else{if(3!==h)throw new Error("unknown padding");if((f=new i(l)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return d?a(f,p):s(f,p)}}function requirePrivateDecrypt(){if(hasRequiredPrivateDecrypt)return privateDecrypt;hasRequiredPrivateDecrypt=1;var e=requireParseAsn1(),t=requireMgf(),r=requireXor(),n=requireBn(),o=requireBrowserifyRsa(),i=requireBrowser$a(),s=requireWithPublic(),a=requireSafeBuffer$1().Buffer;return privateDecrypt=function(c,u,l){var d;d=c.padding?c.padding:l?1:4;var h,f=e(c),p=f.modulus.byteLength();if(u.length>p||new n(u).cmp(f.modulus)>=0)throw new Error("decryption error");h=l?s(new n(u),f):o(u,f);var m=a.alloc(p-h.length);if(h=a.concat([m,h],p),4===d)return function(e,n){var o=e.modulus.byteLength(),s=i("sha1").update(a.alloc(0)).digest(),c=s.length;if(0!==n[0])throw new Error("decryption error");var u=n.slice(1,c+1),l=n.slice(c+1),d=r(u,t(l,c)),h=r(l,t(d,o-c-1));if(function(e,t){e=a.from(e),t=a.from(t);var r=0,n=e.length;e.length!==t.length&&(r++,n=Math.min(e.length,t.length));var o=-1;for(;++o<n;)r+=e[o]^t[o];return r}(s,h.slice(0,c)))throw new Error("decryption error");var f=c;for(;0===h[f];)f++;if(1!==h[f++])throw new Error("decryption error");return h.slice(f)}(f,h);if(1===d)return function(e,t,r){var n=t.slice(0,2),o=2,i=0;for(;0!==t[o++];)if(o>=t.length){i++;break}var s=t.slice(2,o-1);("0002"!==n.toString("hex")&&!r||"0001"!==n.toString("hex")&&r)&&i++;s.length<8&&i++;if(i)throw new Error("decryption error");return t.slice(o)}(0,h,l);if(3===d)return h;throw new Error("unknown padding")}}function requireBrowser$2(){return hasRequiredBrowser$2||(hasRequiredBrowser$2=1,(e=browser$2).publicEncrypt=requirePublicEncrypt(),e.privateDecrypt=requirePrivateDecrypt(),e.privateEncrypt=function(t,r){return e.publicEncrypt(t,r,!0)},e.publicDecrypt=function(t,r){return e.privateDecrypt(t,r,!0)}),browser$2;var e}var browser$1={},hasRequiredBrowser$1,hasRequiredCryptoBrowserify,hasRequiredNaclFast;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser$1;function e(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}hasRequiredBrowser$1=1;var t=requireSafeBuffer$1(),r=requireBrowser$c(),n=t.Buffer,o=t.kMaxLength,i=commonjsGlobal.crypto||commonjsGlobal.msCrypto,s=Math.pow(2,32)-1;function a(e,t){if("number"!=typeof e||e!=e)throw new TypeError("offset must be a number");if(e>s||e<0)throw new TypeError("offset must be a uint32");if(e>o||e>t)throw new RangeError("offset out of range")}function c(e,t,r){if("number"!=typeof e||e!=e)throw new TypeError("size must be a number");if(e>s||e<0)throw new TypeError("size must be a uint32");if(e+t>r||e>o)throw new RangeError("buffer too small")}function u(e,t,n,o){if(process$1.browser){var s=e.buffer,a=new Uint8Array(s,t,n);return i.getRandomValues(a),o?void process$1.nextTick(function(){o(null,e)}):e}if(!o)return r(n).copy(e,t),e;r(n,function(r,n){if(r)return o(r);n.copy(e,t),o(null,e)})}return i&&i.getRandomValues||!process$1.browser?(browser$1.randomFill=function(e,t,r,o){if(!(n.isBuffer(e)||e instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof t)o=t,t=0,r=e.length;else if("function"==typeof r)o=r,r=e.length-t;else if("function"!=typeof o)throw new TypeError('"cb" argument must be a function');return a(t,e.length),c(r,t,e.length),u(e,t,r,o)},browser$1.randomFillSync=function(e,t,r){void 0===t&&(t=0);if(!(n.isBuffer(e)||e instanceof commonjsGlobal.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');a(t,e.length),void 0===r&&(r=e.length-t);return c(r,t,e.length),u(e,t,r)}):(browser$1.randomFill=e,browser$1.randomFillSync=e),browser$1}function requireCryptoBrowserify(){if(hasRequiredCryptoBrowserify)return cryptoBrowserify;hasRequiredCryptoBrowserify=1,cryptoBrowserify.randomBytes=cryptoBrowserify.rng=cryptoBrowserify.pseudoRandomBytes=cryptoBrowserify.prng=requireBrowser$c(),cryptoBrowserify.createHash=cryptoBrowserify.Hash=requireBrowser$a(),cryptoBrowserify.createHmac=cryptoBrowserify.Hmac=requireBrowser$9();var e=requireAlgos(),t=Object.keys(e),r=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(t);cryptoBrowserify.getHashes=function(){return r};var n=requireBrowser$8();cryptoBrowserify.pbkdf2=n.pbkdf2,cryptoBrowserify.pbkdf2Sync=n.pbkdf2Sync;var o=requireBrowser$6();cryptoBrowserify.Cipher=o.Cipher,cryptoBrowserify.createCipher=o.createCipher,cryptoBrowserify.Cipheriv=o.Cipheriv,cryptoBrowserify.createCipheriv=o.createCipheriv,cryptoBrowserify.Decipher=o.Decipher,cryptoBrowserify.createDecipher=o.createDecipher,cryptoBrowserify.Decipheriv=o.Decipheriv,cryptoBrowserify.createDecipheriv=o.createDecipheriv,cryptoBrowserify.getCiphers=o.getCiphers,cryptoBrowserify.listCiphers=o.listCiphers;var i=requireBrowser$5();cryptoBrowserify.DiffieHellmanGroup=i.DiffieHellmanGroup,cryptoBrowserify.createDiffieHellmanGroup=i.createDiffieHellmanGroup,cryptoBrowserify.getDiffieHellman=i.getDiffieHellman,cryptoBrowserify.createDiffieHellman=i.createDiffieHellman,cryptoBrowserify.DiffieHellman=i.DiffieHellman;var s=requireBrowser$4();cryptoBrowserify.createSign=s.createSign,cryptoBrowserify.Sign=s.Sign,cryptoBrowserify.createVerify=s.createVerify,cryptoBrowserify.Verify=s.Verify,cryptoBrowserify.createECDH=requireBrowser$3();var a=requireBrowser$2();cryptoBrowserify.publicEncrypt=a.publicEncrypt,cryptoBrowserify.privateEncrypt=a.privateEncrypt,cryptoBrowserify.publicDecrypt=a.publicDecrypt,cryptoBrowserify.privateDecrypt=a.privateDecrypt;var c=requireBrowser$1();return cryptoBrowserify.randomFill=c.randomFill,cryptoBrowserify.randomFillSync=c.randomFillSync,cryptoBrowserify.createCredentials=function(){throw new Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/browserify/crypto-browserify")},cryptoBrowserify.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6},cryptoBrowserify}function requireNaclFast(){return hasRequiredNaclFast||(hasRequiredNaclFast=1,function(e){var t=function(e){var t,r=new Float64Array(16);if(e)for(t=0;t<e.length;t++)r[t]=e[t];return r},r=function(){throw new Error("no PRNG")},n=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var i=t(),s=t([1]),a=t([56129,1]),c=t([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),u=t([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),l=t([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),d=t([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),h=t([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function f(e,t,r,n){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r,e[t+4]=n>>24&255,e[t+5]=n>>16&255,e[t+6]=n>>8&255,e[t+7]=255&n}function p(e,t,r,n,o){var i,s=0;for(i=0;i<o;i++)s|=e[t+i]^r[n+i];return(1&s-1>>>8)-1}function m(e,t,r,n){return p(e,t,r,n,16)}function y(e,t,r,n){return p(e,t,r,n,32)}function g(e,t,r,n){!function(e,t,r,n){for(var o,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,g=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,v=i,I=s,k=a,T=c,A=u,S=l,E=d,P=h,O=f,R=p,C=m,$=y,N=g,M=b,x=_,B=w,D=0;D<20;D+=2)v^=(o=(N^=(o=(O^=(o=(A^=(o=v+N|0)<<7|o>>>25)+v|0)<<9|o>>>23)+A|0)<<13|o>>>19)+O|0)<<18|o>>>14,S^=(o=(I^=(o=(M^=(o=(R^=(o=S+I|0)<<7|o>>>25)+S|0)<<9|o>>>23)+R|0)<<13|o>>>19)+M|0)<<18|o>>>14,C^=(o=(E^=(o=(k^=(o=(x^=(o=C+E|0)<<7|o>>>25)+C|0)<<9|o>>>23)+x|0)<<13|o>>>19)+k|0)<<18|o>>>14,B^=(o=($^=(o=(P^=(o=(T^=(o=B+$|0)<<7|o>>>25)+B|0)<<9|o>>>23)+T|0)<<13|o>>>19)+P|0)<<18|o>>>14,v^=(o=(T^=(o=(k^=(o=(I^=(o=v+T|0)<<7|o>>>25)+v|0)<<9|o>>>23)+I|0)<<13|o>>>19)+k|0)<<18|o>>>14,S^=(o=(A^=(o=(P^=(o=(E^=(o=S+A|0)<<7|o>>>25)+S|0)<<9|o>>>23)+E|0)<<13|o>>>19)+P|0)<<18|o>>>14,C^=(o=(R^=(o=(O^=(o=($^=(o=C+R|0)<<7|o>>>25)+C|0)<<9|o>>>23)+$|0)<<13|o>>>19)+O|0)<<18|o>>>14,B^=(o=(x^=(o=(M^=(o=(N^=(o=B+x|0)<<7|o>>>25)+B|0)<<9|o>>>23)+N|0)<<13|o>>>19)+M|0)<<18|o>>>14;v=v+i|0,I=I+s|0,k=k+a|0,T=T+c|0,A=A+u|0,S=S+l|0,E=E+d|0,P=P+h|0,O=O+f|0,R=R+p|0,C=C+m|0,$=$+y|0,N=N+g|0,M=M+b|0,x=x+_|0,B=B+w|0,e[0]=v>>>0&255,e[1]=v>>>8&255,e[2]=v>>>16&255,e[3]=v>>>24&255,e[4]=I>>>0&255,e[5]=I>>>8&255,e[6]=I>>>16&255,e[7]=I>>>24&255,e[8]=k>>>0&255,e[9]=k>>>8&255,e[10]=k>>>16&255,e[11]=k>>>24&255,e[12]=T>>>0&255,e[13]=T>>>8&255,e[14]=T>>>16&255,e[15]=T>>>24&255,e[16]=A>>>0&255,e[17]=A>>>8&255,e[18]=A>>>16&255,e[19]=A>>>24&255,e[20]=S>>>0&255,e[21]=S>>>8&255,e[22]=S>>>16&255,e[23]=S>>>24&255,e[24]=E>>>0&255,e[25]=E>>>8&255,e[26]=E>>>16&255,e[27]=E>>>24&255,e[28]=P>>>0&255,e[29]=P>>>8&255,e[30]=P>>>16&255,e[31]=P>>>24&255,e[32]=O>>>0&255,e[33]=O>>>8&255,e[34]=O>>>16&255,e[35]=O>>>24&255,e[36]=R>>>0&255,e[37]=R>>>8&255,e[38]=R>>>16&255,e[39]=R>>>24&255,e[40]=C>>>0&255,e[41]=C>>>8&255,e[42]=C>>>16&255,e[43]=C>>>24&255,e[44]=$>>>0&255,e[45]=$>>>8&255,e[46]=$>>>16&255,e[47]=$>>>24&255,e[48]=N>>>0&255,e[49]=N>>>8&255,e[50]=N>>>16&255,e[51]=N>>>24&255,e[52]=M>>>0&255,e[53]=M>>>8&255,e[54]=M>>>16&255,e[55]=M>>>24&255,e[56]=x>>>0&255,e[57]=x>>>8&255,e[58]=x>>>16&255,e[59]=x>>>24&255,e[60]=B>>>0&255,e[61]=B>>>8&255,e[62]=B>>>16&255,e[63]=B>>>24&255}(e,t,r,n)}function b(e,t,r,n){!function(e,t,r,n){for(var o,i=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,s=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,a=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,c=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,u=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,l=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,d=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,m=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&r[16]|(255&r[17])<<8|(255&r[18])<<16|(255&r[19])<<24,g=255&r[20]|(255&r[21])<<8|(255&r[22])<<16|(255&r[23])<<24,b=255&r[24]|(255&r[25])<<8|(255&r[26])<<16|(255&r[27])<<24,_=255&r[28]|(255&r[29])<<8|(255&r[30])<<16|(255&r[31])<<24,w=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,v=0;v<20;v+=2)i^=(o=(g^=(o=(f^=(o=(u^=(o=i+g|0)<<7|o>>>25)+i|0)<<9|o>>>23)+u|0)<<13|o>>>19)+f|0)<<18|o>>>14,l^=(o=(s^=(o=(b^=(o=(p^=(o=l+s|0)<<7|o>>>25)+l|0)<<9|o>>>23)+p|0)<<13|o>>>19)+b|0)<<18|o>>>14,m^=(o=(d^=(o=(a^=(o=(_^=(o=m+d|0)<<7|o>>>25)+m|0)<<9|o>>>23)+_|0)<<13|o>>>19)+a|0)<<18|o>>>14,w^=(o=(y^=(o=(h^=(o=(c^=(o=w+y|0)<<7|o>>>25)+w|0)<<9|o>>>23)+c|0)<<13|o>>>19)+h|0)<<18|o>>>14,i^=(o=(c^=(o=(a^=(o=(s^=(o=i+c|0)<<7|o>>>25)+i|0)<<9|o>>>23)+s|0)<<13|o>>>19)+a|0)<<18|o>>>14,l^=(o=(u^=(o=(h^=(o=(d^=(o=l+u|0)<<7|o>>>25)+l|0)<<9|o>>>23)+d|0)<<13|o>>>19)+h|0)<<18|o>>>14,m^=(o=(p^=(o=(f^=(o=(y^=(o=m+p|0)<<7|o>>>25)+m|0)<<9|o>>>23)+y|0)<<13|o>>>19)+f|0)<<18|o>>>14,w^=(o=(_^=(o=(b^=(o=(g^=(o=w+_|0)<<7|o>>>25)+w|0)<<9|o>>>23)+g|0)<<13|o>>>19)+b|0)<<18|o>>>14;e[0]=i>>>0&255,e[1]=i>>>8&255,e[2]=i>>>16&255,e[3]=i>>>24&255,e[4]=l>>>0&255,e[5]=l>>>8&255,e[6]=l>>>16&255,e[7]=l>>>24&255,e[8]=m>>>0&255,e[9]=m>>>8&255,e[10]=m>>>16&255,e[11]=m>>>24&255,e[12]=w>>>0&255,e[13]=w>>>8&255,e[14]=w>>>16&255,e[15]=w>>>24&255,e[16]=d>>>0&255,e[17]=d>>>8&255,e[18]=d>>>16&255,e[19]=d>>>24&255,e[20]=h>>>0&255,e[21]=h>>>8&255,e[22]=h>>>16&255,e[23]=h>>>24&255,e[24]=f>>>0&255,e[25]=f>>>8&255,e[26]=f>>>16&255,e[27]=f>>>24&255,e[28]=p>>>0&255,e[29]=p>>>8&255,e[30]=p>>>16&255,e[31]=p>>>24&255}(e,t,r,n)}var _=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]);function w(e,t,r,n,o,i,s){var a,c,u=new Uint8Array(16),l=new Uint8Array(64);for(c=0;c<16;c++)u[c]=0;for(c=0;c<8;c++)u[c]=i[c];for(;o>=64;){for(g(l,u,s,_),c=0;c<64;c++)e[t+c]=r[n+c]^l[c];for(a=1,c=8;c<16;c++)a=a+(255&u[c])|0,u[c]=255&a,a>>>=8;o-=64,t+=64,n+=64}if(o>0)for(g(l,u,s,_),c=0;c<o;c++)e[t+c]=r[n+c]^l[c];return 0}function v(e,t,r,n,o){var i,s,a=new Uint8Array(16),c=new Uint8Array(64);for(s=0;s<16;s++)a[s]=0;for(s=0;s<8;s++)a[s]=n[s];for(;r>=64;){for(g(c,a,o,_),s=0;s<64;s++)e[t+s]=c[s];for(i=1,s=8;s<16;s++)i=i+(255&a[s])|0,a[s]=255&i,i>>>=8;r-=64,t+=64}if(r>0)for(g(c,a,o,_),s=0;s<r;s++)e[t+s]=c[s];return 0}function I(e,t,r,n,o){var i=new Uint8Array(32);b(i,n,o,_);for(var s=new Uint8Array(8),a=0;a<8;a++)s[a]=n[a+16];return v(e,t,r,s,i)}function k(e,t,r,n,o,i,s){var a=new Uint8Array(32);b(a,i,s,_);for(var c=new Uint8Array(8),u=0;u<8;u++)c[u]=i[u+16];return w(e,t,r,n,o,c,a)}var T=function(e){var t,r,n,o,i,s,a,c;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,r=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|r<<3),n=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(r>>>10|n<<6),o=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(n>>>7|o<<9),i=255&e[8]|(255&e[9])<<8,this.r[4]=255&(o>>>4|i<<12),this.r[5]=i>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(i>>>14|s<<2),a=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|a<<5),c=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(a>>>8|c<<8),this.r[9]=c>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};function A(e,t,r,n,o,i){var s=new T(i);return s.update(r,n,o),s.finish(e,t),0}function S(e,t,r,n,o,i){var s=new Uint8Array(16);return A(s,0,r,n,o,i),m(e,t,s,0)}function E(e,t,r,n,o){var i;if(r<32)return-1;for(k(e,0,t,0,r,n,o),A(e,16,e,32,r-32,e),i=0;i<16;i++)e[i]=0;return 0}function P(e,t,r,n,o){var i,s=new Uint8Array(32);if(r<32)return-1;if(I(s,0,32,n,o),0!==S(t,16,t,32,r-32,s))return-1;for(k(e,0,t,0,r,n,o),i=0;i<32;i++)e[i]=0;return 0}function O(e,t){var r;for(r=0;r<16;r++)e[r]=0|t[r]}function R(e){var t,r,n=1;for(t=0;t<16;t++)r=e[t]+n+65535,n=Math.floor(r/65536),e[t]=r-65536*n;e[0]+=n-1+37*(n-1)}function C(e,t,r){for(var n,o=~(r-1),i=0;i<16;i++)n=o&(e[i]^t[i]),e[i]^=n,t[i]^=n}function $(e,r){var n,o,i,s=t(),a=t();for(n=0;n<16;n++)a[n]=r[n];for(R(a),R(a),R(a),o=0;o<2;o++){for(s[0]=a[0]-65517,n=1;n<15;n++)s[n]=a[n]-65535-(s[n-1]>>16&1),s[n-1]&=65535;s[15]=a[15]-32767-(s[14]>>16&1),i=s[15]>>16&1,s[14]&=65535,C(a,s,1-i)}for(n=0;n<16;n++)e[2*n]=255&a[n],e[2*n+1]=a[n]>>8}function N(e,t){var r=new Uint8Array(32),n=new Uint8Array(32);return $(r,e),$(n,t),y(r,0,n,0)}function M(e){var t=new Uint8Array(32);return $(t,e),1&t[0]}function x(e,t){var r;for(r=0;r<16;r++)e[r]=t[2*r]+(t[2*r+1]<<8);e[15]&=32767}function B(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]+r[n]}function D(e,t,r){for(var n=0;n<16;n++)e[n]=t[n]-r[n]}function L(e,t,r){var n,o,i=0,s=0,a=0,c=0,u=0,l=0,d=0,h=0,f=0,p=0,m=0,y=0,g=0,b=0,_=0,w=0,v=0,I=0,k=0,T=0,A=0,S=0,E=0,P=0,O=0,R=0,C=0,$=0,N=0,M=0,x=0,B=r[0],D=r[1],L=r[2],F=r[3],j=r[4],U=r[5],q=r[6],K=r[7],H=r[8],G=r[9],z=r[10],V=r[11],Z=r[12],W=r[13],J=r[14],Y=r[15];i+=(n=t[0])*B,s+=n*D,a+=n*L,c+=n*F,u+=n*j,l+=n*U,d+=n*q,h+=n*K,f+=n*H,p+=n*G,m+=n*z,y+=n*V,g+=n*Z,b+=n*W,_+=n*J,w+=n*Y,s+=(n=t[1])*B,a+=n*D,c+=n*L,u+=n*F,l+=n*j,d+=n*U,h+=n*q,f+=n*K,p+=n*H,m+=n*G,y+=n*z,g+=n*V,b+=n*Z,_+=n*W,w+=n*J,v+=n*Y,a+=(n=t[2])*B,c+=n*D,u+=n*L,l+=n*F,d+=n*j,h+=n*U,f+=n*q,p+=n*K,m+=n*H,y+=n*G,g+=n*z,b+=n*V,_+=n*Z,w+=n*W,v+=n*J,I+=n*Y,c+=(n=t[3])*B,u+=n*D,l+=n*L,d+=n*F,h+=n*j,f+=n*U,p+=n*q,m+=n*K,y+=n*H,g+=n*G,b+=n*z,_+=n*V,w+=n*Z,v+=n*W,I+=n*J,k+=n*Y,u+=(n=t[4])*B,l+=n*D,d+=n*L,h+=n*F,f+=n*j,p+=n*U,m+=n*q,y+=n*K,g+=n*H,b+=n*G,_+=n*z,w+=n*V,v+=n*Z,I+=n*W,k+=n*J,T+=n*Y,l+=(n=t[5])*B,d+=n*D,h+=n*L,f+=n*F,p+=n*j,m+=n*U,y+=n*q,g+=n*K,b+=n*H,_+=n*G,w+=n*z,v+=n*V,I+=n*Z,k+=n*W,T+=n*J,A+=n*Y,d+=(n=t[6])*B,h+=n*D,f+=n*L,p+=n*F,m+=n*j,y+=n*U,g+=n*q,b+=n*K,_+=n*H,w+=n*G,v+=n*z,I+=n*V,k+=n*Z,T+=n*W,A+=n*J,S+=n*Y,h+=(n=t[7])*B,f+=n*D,p+=n*L,m+=n*F,y+=n*j,g+=n*U,b+=n*q,_+=n*K,w+=n*H,v+=n*G,I+=n*z,k+=n*V,T+=n*Z,A+=n*W,S+=n*J,E+=n*Y,f+=(n=t[8])*B,p+=n*D,m+=n*L,y+=n*F,g+=n*j,b+=n*U,_+=n*q,w+=n*K,v+=n*H,I+=n*G,k+=n*z,T+=n*V,A+=n*Z,S+=n*W,E+=n*J,P+=n*Y,p+=(n=t[9])*B,m+=n*D,y+=n*L,g+=n*F,b+=n*j,_+=n*U,w+=n*q,v+=n*K,I+=n*H,k+=n*G,T+=n*z,A+=n*V,S+=n*Z,E+=n*W,P+=n*J,O+=n*Y,m+=(n=t[10])*B,y+=n*D,g+=n*L,b+=n*F,_+=n*j,w+=n*U,v+=n*q,I+=n*K,k+=n*H,T+=n*G,A+=n*z,S+=n*V,E+=n*Z,P+=n*W,O+=n*J,R+=n*Y,y+=(n=t[11])*B,g+=n*D,b+=n*L,_+=n*F,w+=n*j,v+=n*U,I+=n*q,k+=n*K,T+=n*H,A+=n*G,S+=n*z,E+=n*V,P+=n*Z,O+=n*W,R+=n*J,C+=n*Y,g+=(n=t[12])*B,b+=n*D,_+=n*L,w+=n*F,v+=n*j,I+=n*U,k+=n*q,T+=n*K,A+=n*H,S+=n*G,E+=n*z,P+=n*V,O+=n*Z,R+=n*W,C+=n*J,$+=n*Y,b+=(n=t[13])*B,_+=n*D,w+=n*L,v+=n*F,I+=n*j,k+=n*U,T+=n*q,A+=n*K,S+=n*H,E+=n*G,P+=n*z,O+=n*V,R+=n*Z,C+=n*W,$+=n*J,N+=n*Y,_+=(n=t[14])*B,w+=n*D,v+=n*L,I+=n*F,k+=n*j,T+=n*U,A+=n*q,S+=n*K,E+=n*H,P+=n*G,O+=n*z,R+=n*V,C+=n*Z,$+=n*W,N+=n*J,M+=n*Y,w+=(n=t[15])*B,s+=38*(I+=n*L),a+=38*(k+=n*F),c+=38*(T+=n*j),u+=38*(A+=n*U),l+=38*(S+=n*q),d+=38*(E+=n*K),h+=38*(P+=n*H),f+=38*(O+=n*G),p+=38*(R+=n*z),m+=38*(C+=n*V),y+=38*($+=n*Z),g+=38*(N+=n*W),b+=38*(M+=n*J),_+=38*(x+=n*Y),i=(n=(i+=38*(v+=n*D))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),_=(n=_+o+65535)-65536*(o=Math.floor(n/65536)),w=(n=w+o+65535)-65536*(o=Math.floor(n/65536)),i=(n=(i+=o-1+37*(o-1))+(o=1)+65535)-65536*(o=Math.floor(n/65536)),s=(n=s+o+65535)-65536*(o=Math.floor(n/65536)),a=(n=a+o+65535)-65536*(o=Math.floor(n/65536)),c=(n=c+o+65535)-65536*(o=Math.floor(n/65536)),u=(n=u+o+65535)-65536*(o=Math.floor(n/65536)),l=(n=l+o+65535)-65536*(o=Math.floor(n/65536)),d=(n=d+o+65535)-65536*(o=Math.floor(n/65536)),h=(n=h+o+65535)-65536*(o=Math.floor(n/65536)),f=(n=f+o+65535)-65536*(o=Math.floor(n/65536)),p=(n=p+o+65535)-65536*(o=Math.floor(n/65536)),m=(n=m+o+65535)-65536*(o=Math.floor(n/65536)),y=(n=y+o+65535)-65536*(o=Math.floor(n/65536)),g=(n=g+o+65535)-65536*(o=Math.floor(n/65536)),b=(n=b+o+65535)-65536*(o=Math.floor(n/65536)),_=(n=_+o+65535)-65536*(o=Math.floor(n/65536)),w=(n=w+o+65535)-65536*(o=Math.floor(n/65536)),i+=o-1+37*(o-1),e[0]=i,e[1]=s,e[2]=a,e[3]=c,e[4]=u,e[5]=l,e[6]=d,e[7]=h,e[8]=f,e[9]=p,e[10]=m,e[11]=y,e[12]=g,e[13]=b,e[14]=_,e[15]=w}function F(e,t){L(e,t,t)}function j(e,r){var n,o=t();for(n=0;n<16;n++)o[n]=r[n];for(n=253;n>=0;n--)F(o,o),2!==n&&4!==n&&L(o,o,r);for(n=0;n<16;n++)e[n]=o[n]}function U(e,r){var n,o=t();for(n=0;n<16;n++)o[n]=r[n];for(n=250;n>=0;n--)F(o,o),1!==n&&L(o,o,r);for(n=0;n<16;n++)e[n]=o[n]}function q(e,r,n){var o,i,s=new Uint8Array(32),c=new Float64Array(80),u=t(),l=t(),d=t(),h=t(),f=t(),p=t();for(i=0;i<31;i++)s[i]=r[i];for(s[31]=127&r[31]|64,s[0]&=248,x(c,n),i=0;i<16;i++)l[i]=c[i],h[i]=u[i]=d[i]=0;for(u[0]=h[0]=1,i=254;i>=0;--i)C(u,l,o=s[i>>>3]>>>(7&i)&1),C(d,h,o),B(f,u,d),D(u,u,d),B(d,l,h),D(l,l,h),F(h,f),F(p,u),L(u,d,u),L(d,l,f),B(f,u,d),D(u,u,d),F(l,u),D(d,h,p),L(u,d,a),B(u,u,h),L(d,d,u),L(u,h,p),L(h,l,c),F(l,f),C(u,l,o),C(d,h,o);for(i=0;i<16;i++)c[i+16]=u[i],c[i+32]=d[i],c[i+48]=l[i],c[i+64]=h[i];var m=c.subarray(32),y=c.subarray(16);return j(m,m),L(y,y,m),$(e,y),0}function K(e,t){return q(e,t,o)}function H(e,t){return r(t,32),K(e,t)}function G(e,t,r){var o=new Uint8Array(32);return q(o,r,t),b(e,n,o,_)}T.prototype.blocks=function(e,t,r){for(var n,o,i,s,a,c,u,l,d,h,f,p,m,y,g,b,_,w,v,I=this.fin?0:2048,k=this.h[0],T=this.h[1],A=this.h[2],S=this.h[3],E=this.h[4],P=this.h[5],O=this.h[6],R=this.h[7],C=this.h[8],$=this.h[9],N=this.r[0],M=this.r[1],x=this.r[2],B=this.r[3],D=this.r[4],L=this.r[5],F=this.r[6],j=this.r[7],U=this.r[8],q=this.r[9];r>=16;)h=d=0,h+=(k+=8191&(n=255&e[t+0]|(255&e[t+1])<<8))*N,h+=(T+=8191&(n>>>13|(o=255&e[t+2]|(255&e[t+3])<<8)<<3))*(5*q),h+=(A+=8191&(o>>>10|(i=255&e[t+4]|(255&e[t+5])<<8)<<6))*(5*U),h+=(S+=8191&(i>>>7|(s=255&e[t+6]|(255&e[t+7])<<8)<<9))*(5*j),d=(h+=(E+=8191&(s>>>4|(a=255&e[t+8]|(255&e[t+9])<<8)<<12))*(5*F))>>>13,h&=8191,h+=(P+=a>>>1&8191)*(5*L),h+=(O+=8191&(a>>>14|(c=255&e[t+10]|(255&e[t+11])<<8)<<2))*(5*D),h+=(R+=8191&(c>>>11|(u=255&e[t+12]|(255&e[t+13])<<8)<<5))*(5*B),h+=(C+=8191&(u>>>8|(l=255&e[t+14]|(255&e[t+15])<<8)<<8))*(5*x),f=d+=(h+=($+=l>>>5|I)*(5*M))>>>13,f+=k*M,f+=T*N,f+=A*(5*q),f+=S*(5*U),d=(f+=E*(5*j))>>>13,f&=8191,f+=P*(5*F),f+=O*(5*L),f+=R*(5*D),f+=C*(5*B),d+=(f+=$*(5*x))>>>13,f&=8191,p=d,p+=k*x,p+=T*M,p+=A*N,p+=S*(5*q),d=(p+=E*(5*U))>>>13,p&=8191,p+=P*(5*j),p+=O*(5*F),p+=R*(5*L),p+=C*(5*D),m=d+=(p+=$*(5*B))>>>13,m+=k*B,m+=T*x,m+=A*M,m+=S*N,d=(m+=E*(5*q))>>>13,m&=8191,m+=P*(5*U),m+=O*(5*j),m+=R*(5*F),m+=C*(5*L),y=d+=(m+=$*(5*D))>>>13,y+=k*D,y+=T*B,y+=A*x,y+=S*M,d=(y+=E*N)>>>13,y&=8191,y+=P*(5*q),y+=O*(5*U),y+=R*(5*j),y+=C*(5*F),g=d+=(y+=$*(5*L))>>>13,g+=k*L,g+=T*D,g+=A*B,g+=S*x,d=(g+=E*M)>>>13,g&=8191,g+=P*N,g+=O*(5*q),g+=R*(5*U),g+=C*(5*j),b=d+=(g+=$*(5*F))>>>13,b+=k*F,b+=T*L,b+=A*D,b+=S*B,d=(b+=E*x)>>>13,b&=8191,b+=P*M,b+=O*N,b+=R*(5*q),b+=C*(5*U),_=d+=(b+=$*(5*j))>>>13,_+=k*j,_+=T*F,_+=A*L,_+=S*D,d=(_+=E*B)>>>13,_&=8191,_+=P*x,_+=O*M,_+=R*N,_+=C*(5*q),w=d+=(_+=$*(5*U))>>>13,w+=k*U,w+=T*j,w+=A*F,w+=S*L,d=(w+=E*D)>>>13,w&=8191,w+=P*B,w+=O*x,w+=R*M,w+=C*N,v=d+=(w+=$*(5*q))>>>13,v+=k*q,v+=T*U,v+=A*j,v+=S*F,d=(v+=E*L)>>>13,v&=8191,v+=P*D,v+=O*B,v+=R*x,v+=C*M,k=h=8191&(d=(d=((d+=(v+=$*N)>>>13)<<2)+d|0)+(h&=8191)|0),T=f+=d>>>=13,A=p&=8191,S=m&=8191,E=y&=8191,P=g&=8191,O=b&=8191,R=_&=8191,C=w&=8191,$=v&=8191,t+=16,r-=16;this.h[0]=k,this.h[1]=T,this.h[2]=A,this.h[3]=S,this.h[4]=E,this.h[5]=P,this.h[6]=O,this.h[7]=R,this.h[8]=C,this.h[9]=$},T.prototype.finish=function(e,t){var r,n,o,i,s=new Uint16Array(10);if(this.leftover){for(i=this.leftover,this.buffer[i++]=1;i<16;i++)this.buffer[i]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(r=this.h[1]>>>13,this.h[1]&=8191,i=2;i<10;i++)this.h[i]+=r,r=this.h[i]>>>13,this.h[i]&=8191;for(this.h[0]+=5*r,r=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=r,r=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=r,s[0]=this.h[0]+5,r=s[0]>>>13,s[0]&=8191,i=1;i<10;i++)s[i]=this.h[i]+r,r=s[i]>>>13,s[i]&=8191;for(s[9]-=8192,n=(1^r)-1,i=0;i<10;i++)s[i]&=n;for(n=~n,i=0;i<10;i++)this.h[i]=this.h[i]&n|s[i];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),o=this.h[0]+this.pad[0],this.h[0]=65535&o,i=1;i<8;i++)o=(this.h[i]+this.pad[i]|0)+(o>>>16)|0,this.h[i]=65535&o;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},T.prototype.update=function(e,t,r){var n,o;if(this.leftover){for((o=16-this.leftover)>r&&(o=r),n=0;n<o;n++)this.buffer[this.leftover+n]=e[t+n];if(r-=o,t+=o,this.leftover+=o,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(r>=16&&(o=r-r%16,this.blocks(e,t,o),t+=o,r-=o),r){for(n=0;n<r;n++)this.buffer[this.leftover+n]=e[t+n];this.leftover+=r}};var z=E,V=P,Z=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function W(e,t,r,n){for(var o,i,s,a,c,u,l,d,h,f,p,m,y,g,b,_,w,v,I,k,T,A,S,E,P,O,R=new Int32Array(16),C=new Int32Array(16),$=e[0],N=e[1],M=e[2],x=e[3],B=e[4],D=e[5],L=e[6],F=e[7],j=t[0],U=t[1],q=t[2],K=t[3],H=t[4],G=t[5],z=t[6],V=t[7],W=0;n>=128;){for(I=0;I<16;I++)k=8*I+W,R[I]=r[k+0]<<24|r[k+1]<<16|r[k+2]<<8|r[k+3],C[I]=r[k+4]<<24|r[k+5]<<16|r[k+6]<<8|r[k+7];for(I=0;I<80;I++)if(o=$,i=N,s=M,a=x,c=B,u=D,l=L,h=j,f=U,p=q,m=K,y=H,g=G,b=z,S=65535&(A=V),E=A>>>16,P=65535&(T=F),O=T>>>16,S+=65535&(A=(H>>>14|B<<18)^(H>>>18|B<<14)^(B>>>9|H<<23)),E+=A>>>16,P+=65535&(T=(B>>>14|H<<18)^(B>>>18|H<<14)^(H>>>9|B<<23)),O+=T>>>16,S+=65535&(A=H&G^~H&z),E+=A>>>16,P+=65535&(T=B&D^~B&L),O+=T>>>16,S+=65535&(A=Z[2*I+1]),E+=A>>>16,P+=65535&(T=Z[2*I]),O+=T>>>16,T=R[I%16],E+=(A=C[I%16])>>>16,P+=65535&T,O+=T>>>16,P+=(E+=(S+=65535&A)>>>16)>>>16,S=65535&(A=v=65535&S|E<<16),E=A>>>16,P=65535&(T=w=65535&P|(O+=P>>>16)<<16),O=T>>>16,S+=65535&(A=(j>>>28|$<<4)^($>>>2|j<<30)^($>>>7|j<<25)),E+=A>>>16,P+=65535&(T=($>>>28|j<<4)^(j>>>2|$<<30)^(j>>>7|$<<25)),O+=T>>>16,E+=(A=j&U^j&q^U&q)>>>16,P+=65535&(T=$&N^$&M^N&M),O+=T>>>16,d=65535&(P+=(E+=(S+=65535&A)>>>16)>>>16)|(O+=P>>>16)<<16,_=65535&S|E<<16,S=65535&(A=m),E=A>>>16,P=65535&(T=a),O=T>>>16,E+=(A=v)>>>16,P+=65535&(T=w),O+=T>>>16,N=o,M=i,x=s,B=a=65535&(P+=(E+=(S+=65535&A)>>>16)>>>16)|(O+=P>>>16)<<16,D=c,L=u,F=l,$=d,U=h,q=f,K=p,H=m=65535&S|E<<16,G=y,z=g,V=b,j=_,I%16==15)for(k=0;k<16;k++)T=R[k],S=65535&(A=C[k]),E=A>>>16,P=65535&T,O=T>>>16,T=R[(k+9)%16],S+=65535&(A=C[(k+9)%16]),E+=A>>>16,P+=65535&T,O+=T>>>16,w=R[(k+1)%16],S+=65535&(A=((v=C[(k+1)%16])>>>1|w<<31)^(v>>>8|w<<24)^(v>>>7|w<<25)),E+=A>>>16,P+=65535&(T=(w>>>1|v<<31)^(w>>>8|v<<24)^w>>>7),O+=T>>>16,w=R[(k+14)%16],E+=(A=((v=C[(k+14)%16])>>>19|w<<13)^(w>>>29|v<<3)^(v>>>6|w<<26))>>>16,P+=65535&(T=(w>>>19|v<<13)^(v>>>29|w<<3)^w>>>6),O+=T>>>16,O+=(P+=(E+=(S+=65535&A)>>>16)>>>16)>>>16,R[k]=65535&P|O<<16,C[k]=65535&S|E<<16;S=65535&(A=j),E=A>>>16,P=65535&(T=$),O=T>>>16,T=e[0],E+=(A=t[0])>>>16,P+=65535&T,O+=T>>>16,O+=(P+=(E+=(S+=65535&A)>>>16)>>>16)>>>16,e[0]=$=65535&P|O<<16,t[0]=j=65535&S|E<<16,S=65535&(A=U),E=A>>>16,P=65535&(T=N),O=T>>>16,T=e[1],E+=(A=t[1])>>>16,P+=65535&T,O+=T>>>16,O+=(P+=(E+=(S+=65535&A)>>>16)>>>16)>>>16,e[1]=N=65535&P|O<<16,t[1]=U=65535&S|E<<16,S=65535&(A=q),E=A>>>16,P=65535&(T=M),O=T>>>16,T=e[2],E+=(A=t[2])>>>16,P+=65535&T,O+=T>>>16,O+=(P+=(E+=(S+=65535&A)>>>16)>>>16)>>>16,e[2]=M=65535&P|O<<16,t[2]=q=65535&S|E<<16,S=65535&(A=K),E=A>>>16,P=65535&(T=x),O=T>>>16,T=e[3],E+=(A=t[3])>>>16,P+=65535&T,O+=T>>>16,O+=(P+=(E+=(S+=65535&A)>>>16)>>>16)>>>16,e[3]=x=65535&P|O<<16,t[3]=K=65535&S|E<<16,S=65535&(A=H),E=A>>>16,P=65535&(T=B),O=T>>>16,T=e[4],E+=(A=t[4])>>>16,P+=65535&T,O+=T>>>16,O+=(P+=(E+=(S+=65535&A)>>>16)>>>16)>>>16,e[4]=B=65535&P|O<<16,t[4]=H=65535&S|E<<16,S=65535&(A=G),E=A>>>16,P=65535&(T=D),O=T>>>16,T=e[5],E+=(A=t[5])>>>16,P+=65535&T,O+=T>>>16,O+=(P+=(E+=(S+=65535&A)>>>16)>>>16)>>>16,e[5]=D=65535&P|O<<16,t[5]=G=65535&S|E<<16,S=65535&(A=z),E=A>>>16,P=65535&(T=L),O=T>>>16,T=e[6],E+=(A=t[6])>>>16,P+=65535&T,O+=T>>>16,O+=(P+=(E+=(S+=65535&A)>>>16)>>>16)>>>16,e[6]=L=65535&P|O<<16,t[6]=z=65535&S|E<<16,S=65535&(A=V),E=A>>>16,P=65535&(T=F),O=T>>>16,T=e[7],E+=(A=t[7])>>>16,P+=65535&T,O+=T>>>16,O+=(P+=(E+=(S+=65535&A)>>>16)>>>16)>>>16,e[7]=F=65535&P|O<<16,t[7]=V=65535&S|E<<16,W+=128,n-=128}return n}function J(e,t,r){var n,o=new Int32Array(8),i=new Int32Array(8),s=new Uint8Array(256),a=r;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,i[0]=4089235720,i[1]=2227873595,i[2]=4271175723,i[3]=1595750129,i[4]=2917565137,i[5]=725511199,i[6]=4215389547,i[7]=327033209,W(o,i,t,r),r%=128,n=0;n<r;n++)s[n]=t[a-r+n];for(s[r]=128,s[(r=256-128*(r<112?1:0))-9]=0,f(s,r-8,a/536870912|0,a<<3),W(o,i,s,r),n=0;n<8;n++)f(e,8*n,o[n],i[n]);return 0}function Y(e,r){var n=t(),o=t(),i=t(),s=t(),a=t(),c=t(),l=t(),d=t(),h=t();D(n,e[1],e[0]),D(h,r[1],r[0]),L(n,n,h),B(o,e[0],e[1]),B(h,r[0],r[1]),L(o,o,h),L(i,e[3],r[3]),L(i,i,u),L(s,e[2],r[2]),B(s,s,s),D(a,o,n),D(c,s,i),B(l,s,i),B(d,o,n),L(e[0],a,c),L(e[1],d,l),L(e[2],l,c),L(e[3],a,d)}function Q(e,t,r){var n;for(n=0;n<4;n++)C(e[n],t[n],r)}function X(e,r){var n=t(),o=t(),i=t();j(i,r[2]),L(n,r[0],i),L(o,r[1],i),$(e,o),e[31]^=M(n)<<7}function ee(e,t,r){var n,o;for(O(e[0],i),O(e[1],s),O(e[2],s),O(e[3],i),o=255;o>=0;--o)Q(e,t,n=r[o/8|0]>>(7&o)&1),Y(t,e),Y(e,e),Q(e,t,n)}function te(e,r){var n=[t(),t(),t(),t()];O(n[0],l),O(n[1],d),O(n[2],s),L(n[3],l,d),ee(e,n,r)}function re(e,n,o){var i,s=new Uint8Array(64),a=[t(),t(),t(),t()];for(o||r(n,32),J(s,n,32),s[0]&=248,s[31]&=127,s[31]|=64,te(a,s),X(e,a),i=0;i<32;i++)n[i+32]=e[i];return 0}var ne=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function oe(e,t){var r,n,o,i;for(n=63;n>=32;--n){for(r=0,o=n-32,i=n-12;o<i;++o)t[o]+=r-16*t[n]*ne[o-(n-32)],r=Math.floor((t[o]+128)/256),t[o]-=256*r;t[o]+=r,t[n]=0}for(r=0,o=0;o<32;o++)t[o]+=r-(t[31]>>4)*ne[o],r=t[o]>>8,t[o]&=255;for(o=0;o<32;o++)t[o]-=r*ne[o];for(n=0;n<32;n++)t[n+1]+=t[n]>>8,e[n]=255&t[n]}function ie(e){var t,r=new Float64Array(64);for(t=0;t<64;t++)r[t]=e[t];for(t=0;t<64;t++)e[t]=0;oe(e,r)}function se(e,r,n,o){var i,s,a=new Uint8Array(64),c=new Uint8Array(64),u=new Uint8Array(64),l=new Float64Array(64),d=[t(),t(),t(),t()];J(a,o,32),a[0]&=248,a[31]&=127,a[31]|=64;var h=n+64;for(i=0;i<n;i++)e[64+i]=r[i];for(i=0;i<32;i++)e[32+i]=a[32+i];for(J(u,e.subarray(32),n+32),ie(u),te(d,u),X(e,d),i=32;i<64;i++)e[i]=o[i];for(J(c,e,n+64),ie(c),i=0;i<64;i++)l[i]=0;for(i=0;i<32;i++)l[i]=u[i];for(i=0;i<32;i++)for(s=0;s<32;s++)l[i+s]+=c[i]*a[s];return oe(e.subarray(32),l),h}function ae(e,r,n,o){var a,u=new Uint8Array(32),l=new Uint8Array(64),d=[t(),t(),t(),t()],f=[t(),t(),t(),t()];if(n<64)return-1;if(function(e,r){var n=t(),o=t(),a=t(),u=t(),l=t(),d=t(),f=t();return O(e[2],s),x(e[1],r),F(a,e[1]),L(u,a,c),D(a,a,e[2]),B(u,e[2],u),F(l,u),F(d,l),L(f,d,l),L(n,f,a),L(n,n,u),U(n,n),L(n,n,a),L(n,n,u),L(n,n,u),L(e[0],n,u),F(o,e[0]),L(o,o,u),N(o,a)&&L(e[0],e[0],h),F(o,e[0]),L(o,o,u),N(o,a)?-1:(M(e[0])===r[31]>>7&&D(e[0],i,e[0]),L(e[3],e[0],e[1]),0)}(f,o))return-1;for(a=0;a<n;a++)e[a]=r[a];for(a=0;a<32;a++)e[a+32]=o[a];if(J(l,e,n),ie(l),ee(d,f,l),te(f,r.subarray(32)),Y(d,f),X(u,d),n-=64,y(r,0,u,0)){for(a=0;a<n;a++)e[a]=0;return-1}for(a=0;a<n;a++)e[a]=r[a+64];return n}var ce,ue=16,le=64,de=32,he=64;function fe(e,t){if(32!==e.length)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function pe(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function me(e){for(var t=0;t<e.length;t++)e[t]=0}e.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:k,crypto_stream:I,crypto_stream_salsa20_xor:w,crypto_stream_salsa20:v,crypto_onetimeauth:A,crypto_onetimeauth_verify:S,crypto_verify_16:m,crypto_verify_32:y,crypto_secretbox:E,crypto_secretbox_open:P,crypto_scalarmult:q,crypto_scalarmult_base:K,crypto_box_beforenm:G,crypto_box_afternm:z,crypto_box:function(e,t,r,n,o,i){var s=new Uint8Array(32);return G(s,o,i),z(e,t,r,n,s)},crypto_box_open:function(e,t,r,n,o,i){var s=new Uint8Array(32);return G(s,o,i),V(e,t,r,n,s)},crypto_box_keypair:H,crypto_hash:J,crypto_sign:se,crypto_sign_keypair:re,crypto_sign_open:ae,crypto_secretbox_KEYBYTES:32,crypto_secretbox_NONCEBYTES:24,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:ue,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:32,crypto_box_SECRETKEYBYTES:32,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:24,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:le,crypto_sign_PUBLICKEYBYTES:de,crypto_sign_SECRETKEYBYTES:he,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64,gf:t,D:c,L:ne,pack25519:$,unpack25519:x,M:L,A:B,S:F,Z:D,pow2523:U,add:Y,set25519:O,modL:oe,scalarmult:ee,scalarbase:te},e.randomBytes=function(e){var t=new Uint8Array(e);return r(t,e),t},e.secretbox=function(e,t,r){pe(e,t,r),fe(r,t);for(var n=new Uint8Array(32+e.length),o=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+32]=e[i];return E(o,n,n.length,t,r),o.subarray(ue)},e.secretbox.open=function(e,t,r){pe(e,t,r),fe(r,t);for(var n=new Uint8Array(ue+e.length),o=new Uint8Array(n.length),i=0;i<e.length;i++)n[i+ue]=e[i];return n.length<32||0!==P(o,n,n.length,t,r)?null:o.subarray(32)},e.secretbox.keyLength=32,e.secretbox.nonceLength=24,e.secretbox.overheadLength=ue,e.scalarMult=function(e,t){if(pe(e,t),32!==e.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var r=new Uint8Array(32);return q(r,e,t),r},e.scalarMult.base=function(e){if(pe(e),32!==e.length)throw new Error("bad n size");var t=new Uint8Array(32);return K(t,e),t},e.scalarMult.scalarLength=32,e.scalarMult.groupElementLength=32,e.box=function(t,r,n,o){var i=e.box.before(n,o);return e.secretbox(t,r,i)},e.box.before=function(e,t){pe(e,t),function(e,t){if(32!==e.length)throw new Error("bad public key size");if(32!==t.length)throw new Error("bad secret key size")}(e,t);var r=new Uint8Array(32);return G(r,e,t),r},e.box.after=e.secretbox,e.box.open=function(t,r,n,o){var i=e.box.before(n,o);return e.secretbox.open(t,r,i)},e.box.open.after=e.secretbox.open,e.box.keyPair=function(){var e=new Uint8Array(32),t=new Uint8Array(32);return H(e,t),{publicKey:e,secretKey:t}},e.box.keyPair.fromSecretKey=function(e){if(pe(e),32!==e.length)throw new Error("bad secret key size");var t=new Uint8Array(32);return K(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},e.box.publicKeyLength=32,e.box.secretKeyLength=32,e.box.sharedKeyLength=32,e.box.nonceLength=24,e.box.overheadLength=e.secretbox.overheadLength,e.sign=function(e,t){if(pe(e,t),t.length!==he)throw new Error("bad secret key size");var r=new Uint8Array(le+e.length);return se(r,e,e.length,t),r},e.sign.open=function(e,t){if(pe(e,t),t.length!==de)throw new Error("bad public key size");var r=new Uint8Array(e.length),n=ae(r,e,e.length,t);if(n<0)return null;for(var o=new Uint8Array(n),i=0;i<o.length;i++)o[i]=r[i];return o},e.sign.detached=function(t,r){for(var n=e.sign(t,r),o=new Uint8Array(le),i=0;i<o.length;i++)o[i]=n[i];return o},e.sign.detached.verify=function(e,t,r){if(pe(e,t,r),t.length!==le)throw new Error("bad signature size");if(r.length!==de)throw new Error("bad public key size");var n,o=new Uint8Array(le+e.length),i=new Uint8Array(le+e.length);for(n=0;n<le;n++)o[n]=t[n];for(n=0;n<e.length;n++)o[n+le]=e[n];return ae(i,o,o.length,r)>=0},e.sign.keyPair=function(){var e=new Uint8Array(de),t=new Uint8Array(he);return re(e,t),{publicKey:e,secretKey:t}},e.sign.keyPair.fromSecretKey=function(e){if(pe(e),e.length!==he)throw new Error("bad secret key size");for(var t=new Uint8Array(de),r=0;r<t.length;r++)t[r]=e[32+r];return{publicKey:t,secretKey:new Uint8Array(e)}},e.sign.keyPair.fromSeed=function(e){if(pe(e),32!==e.length)throw new Error("bad seed size");for(var t=new Uint8Array(de),r=new Uint8Array(he),n=0;n<32;n++)r[n]=e[n];return re(t,r,!0),{publicKey:t,secretKey:r}},e.sign.publicKeyLength=de,e.sign.secretKeyLength=he,e.sign.seedLength=32,e.sign.signatureLength=le,e.hash=function(e){pe(e);var t=new Uint8Array(64);return J(t,e,e.length),t},e.hash.hashLength=64,e.verify=function(e,t){return pe(e,t),0!==e.length&&0!==t.length&&e.length===t.length&&0===p(e,0,t,0,e.length)},e.setPRNG=function(e){r=e},(ce="undefined"!=typeof self?self.crypto||self.msCrypto:null)&&ce.getRandomValues?e.setPRNG(function(e,t){var r,n=new Uint8Array(t);for(r=0;r<t;r+=65536)ce.getRandomValues(n.subarray(r,r+Math.min(t-r,65536)));for(r=0;r<t;r++)e[r]=n[r];me(n)}):void 0!==commonjsRequire&&(ce=requireCryptoBrowserify())&&ce.randomBytes&&e.setPRNG(function(e,t){var r,n=ce.randomBytes(t);for(r=0;r<t;r++)e[r]=n[r];me(n)})}((e=naclFast).exports?e.exports:self.nacl=self.nacl||{})),naclFast.exports;var e}var naclFastExports=requireNaclFast();const nacl=getDefaultExportFromCjs(naclFastExports);function arrayEqual(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=new DataView(t.buffer,t.byteOffset,t.byteLength);let o=e.byteLength;for(;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0}function arrayStartsWith(e,t){if(e.byteLength<t.byteLength)return!1;let r=t.byteLength;for(;r--;)if(e[r]!==t[r])return!1;return!0}const byteToHex$1=[];for(let O=0;O<=255;O+=1)byteToHex$1.push(O.toString(16).padStart(2,"0"));function encode$5(e){let t="";for(const r of e)t+=byteToHex$1[r];return t}function decode$4(e){const t=(e.startsWith("0x")?e.substring(2):e).match(/.{1,2}/gu);return new Uint8Array((null==t?[]:t).map(e=>parseInt(e,16)))}const derPrefix$3="302a300506032b6570032100",derPrefixBytes$3=decode$4(derPrefix$3);class Ed25519PublicKey extends Key{constructor(e){super(),this._keyData=e}get _type(){return"ED25519"}static fromBytes(e){switch(e.length){case 32:return Ed25519PublicKey.fromBytesRaw(e);case 44:return Ed25519PublicKey.fromBytesDer(e);default:throw new BadKeyError(`invalid public key length: ${e.length} bytes`)}}static fromBytesDer(e){try{if(44!==e.length)throw new Error(`invalid length: ${e.length} bytes`);if(!e.subarray(0,12).every((e,t)=>e===derPrefixBytes$3[t]))throw new Error("invalid DER prefix");const t=e.subarray(12);return new Ed25519PublicKey(t)}catch(t){throw new BadKeyError(`cannot decode ED25519 public key data from DER format: ${t instanceof Error?t.message:"unknown error"}`)}}static fromBytesRaw(e){if(32!=e.length)throw new BadKeyError(`invalid public key length: ${e.length} bytes`);return new Ed25519PublicKey(e)}static fromString(e){return Ed25519PublicKey.fromBytes(decode$4(e))}verify(e,t){return nacl.sign.detached.verify(e,t,this._keyData)}toBytesDer(){const e=new Uint8Array(derPrefixBytes$3.length+32);return e.set(derPrefixBytes$3,0),e.set(this._keyData.subarray(0,32),derPrefixBytes$3.length),e}toBytesRaw(){return this._keyData.slice()}equals(e){return arrayEqual(this._keyData,e._keyData)}}function bytes(e){return nacl.randomBytes(e)}function bytesAsync(e){return Promise.resolve(nacl.randomBytes(e))}function decode$3(e){return(new TextDecoder).decode(e)}function encode$4(e){return(new TextEncoder).encode(e)}const HashAlgorithm={Sha256:"SHA-256",Sha384:"SHA-384",Sha512:"SHA-512"};async function hash(e,t,r){const n="string"==typeof t?encode$4(t):t,o="string"==typeof r?encode$4(r):r;try{const t=await window.crypto.subtle.importKey("raw",n,{name:"HMAC",hash:e},!1,["sign"]);return new Uint8Array(await window.crypto.subtle.sign("HMAC",t,o))}catch{throw new Error("Fallback if SubtleCrypto fails is not implemented")}}const crypto$1="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0;
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes$1(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function anumber(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function abytes(e,...t){if(!isBytes$1(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function ahash(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.createHasher");anumber(e.outputLen),anumber(e.blockLen)}function aexists(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function aoutput(e,t){abytes(e);const r=t.outputLen;if(e.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}function clean(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function createView(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function rotr(e,t){return e<<32-t|e>>>t}const hasHexBuiltin=(()=>"function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex)(),hexes=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function bytesToHex(e){if(abytes(e),hasHexBuiltin)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=hexes[e[r]];return t}const asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(e){return e>=asciis._0&&e<=asciis._9?e-asciis._0:e>=asciis.A&&e<=asciis.F?e-(asciis.A-10):e>=asciis.a&&e<=asciis.f?e-(asciis.a-10):void 0}function hexToBytes(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);if(hasHexBuiltin)return Uint8Array.fromHex(e);const t=e.length,r=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(r);for(let o=0,i=0;o<r;o++,i+=2){const t=asciiToBase16(e.charCodeAt(i)),r=asciiToBase16(e.charCodeAt(i+1));if(void 0===t||void 0===r){const t=e[i]+e[i+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+i)}n[o]=16*t+r}return n}function utf8ToBytes(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function toBytes(e){return"string"==typeof e&&(e=utf8ToBytes(e)),abytes(e),e}function concatBytes$1(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];abytes(r),t+=r.length}const r=new Uint8Array(t);for(let n=0,o=0;n<e.length;n++){const t=e[n];r.set(t,o),o+=t.length}return r}class Hash{}function createHasher(e){const t=t=>e().update(toBytes(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function randomBytes(e=32){if(crypto$1&&"function"==typeof crypto$1.getRandomValues)return crypto$1.getRandomValues(new Uint8Array(e));if(crypto$1&&"function"==typeof crypto$1.randomBytes)return Uint8Array.from(crypto$1.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);const o=BigInt(32),i=BigInt(4294967295),s=Number(r>>o&i),a=Number(r&i),c=n?4:0,u=n?0:4;e.setUint32(t+c,s,n),e.setUint32(t+u,a,n)}function Chi(e,t,r){return e&t^~e&r}function Maj(e,t,r){return e&t^e&r^t&r}class HashMD extends Hash{constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){aexists(this),abytes(e=toBytes(e));const{view:t,buffer:r,blockLen:n}=this,o=e.length;for(let i=0;i<o;){const s=Math.min(n-this.pos,o-i);if(s===n){const t=createView(e);for(;n<=o-i;i+=n)this.process(t,i);continue}r.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aexists(this),aoutput(e,this),this.finished=!0;const{buffer:t,view:r,blockLen:n,isLE:o}=this;let{pos:i}=this;t[i++]=128,clean(this.buffer.subarray(i)),this.padOffset>n-i&&(this.process(r,0),i=0);for(let l=i;l<n;l++)t[l]=0;setBigUint64(r,n-8,BigInt(8*this.length),o),this.process(r,0);const s=createView(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<c;l++)s.setUint32(4*l,u[l],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:r,length:n,finished:o,destroyed:i,pos:s}=this;return e.destroyed=i,e.finished=o,e.length=n,e.pos=s,n%t&&e.buffer.set(r),e}clone(){return this._cloneInto()}}const SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_K=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_W=new Uint32Array(64);class SHA256 extends HashMD{constructor(e=32){super(64,e,8,!1),this.A=0|SHA256_IV[0],this.B=0|SHA256_IV[1],this.C=0|SHA256_IV[2],this.D=0|SHA256_IV[3],this.E=0|SHA256_IV[4],this.F=0|SHA256_IV[5],this.G=0|SHA256_IV[6],this.H=0|SHA256_IV[7]}get(){const{A:e,B:t,C:r,D:n,E:o,F:i,G:s,H:a}=this;return[e,t,r,n,o,i,s,a]}set(e,t,r,n,o,i,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,t){for(let l=0;l<16;l++,t+=4)SHA256_W[l]=e.getUint32(t,!1);for(let l=16;l<64;l++){const e=SHA256_W[l-15],t=SHA256_W[l-2],r=rotr(e,7)^rotr(e,18)^e>>>3,n=rotr(t,17)^rotr(t,19)^t>>>10;SHA256_W[l]=n+SHA256_W[l-7]+r+SHA256_W[l-16]|0}let{A:r,B:n,C:o,D:i,E:s,F:a,G:c,H:u}=this;for(let l=0;l<64;l++){const e=u+(rotr(s,6)^rotr(s,11)^rotr(s,25))+Chi(s,a,c)+SHA256_K[l]+SHA256_W[l]|0,t=(rotr(r,2)^rotr(r,13)^rotr(r,22))+Maj(r,n,o)|0;u=c,c=a,a=s,s=i+e|0,i=o,o=n,n=r,r=e+t|0}r=r+this.A|0,n=n+this.B|0,o=o+this.C|0,i=i+this.D|0,s=s+this.E|0,a=a+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(r,n,o,i,s,a,c,u)}roundClean(){clean(SHA256_W)}destroy(){this.set(0,0,0,0,0,0,0,0),clean(this.buffer)}}const sha256=createHasher(()=>new SHA256);class HMAC extends Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ahash(e);const r=toBytes(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const n=this.blockLen,o=new Uint8Array(n);o.set(r.length>n?e.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),clean(o)}update(e){return aexists(this),this.iHash.update(e),this}digestInto(e){aexists(this),abytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:r,finished:n,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=n,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(e,t,r)=>new HMAC(e,t).update(r).digest();hmac.create=(e,t)=>new HMAC(e,t);
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const _0n$3=BigInt(0),_1n$4=BigInt(1);function abool(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)}function numberToHexUnpadded(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function hexToNumber(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?_0n$3:BigInt("0x"+e)}function bytesToNumberBE(e){return hexToNumber(bytesToHex(e))}function bytesToNumberLE(e){return abytes(e),hexToNumber(bytesToHex(Uint8Array.from(e).reverse()))}function numberToBytesBE(e,t){return hexToBytes(e.toString(16).padStart(2*t,"0"))}function numberToBytesLE(e,t){return numberToBytesBE(e,t).reverse()}function ensureBytes(e,t,r){let n;if("string"==typeof t)try{n=hexToBytes(t)}catch(i){throw new Error(e+" must be hex string or Uint8Array, cause: "+i)}else{if(!isBytes$1(t))throw new Error(e+" must be hex string or Uint8Array");n=Uint8Array.from(t)}const o=n.length;if("number"==typeof r&&o!==r)throw new Error(e+" of length "+r+" expected, got "+o);return n}const isPosBig=e=>"bigint"==typeof e&&_0n$3<=e;function inRange(e,t,r){return isPosBig(e)&&isPosBig(t)&&isPosBig(r)&&t<=e&&e<r}function aInRange(e,t,r,n){if(!inRange(t,r,n))throw new Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function bitLen(e){let t;for(t=0;e>_0n$3;e>>=_1n$4,t+=1);return t}const bitMask=e=>(_1n$4<<BigInt(e))-_1n$4;function createHmacDrbg(e,t,r){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof r)throw new Error("hmacFn must be a function");const n=e=>new Uint8Array(e),o=e=>Uint8Array.of(e);let i=n(e),s=n(e),a=0;const c=()=>{i.fill(1),s.fill(0),a=0},u=(...e)=>r(s,i,...e),l=(e=n(0))=>{s=u(o(0),e),i=u(),0!==e.length&&(s=u(o(1),e),i=u())},d=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const r=[];for(;e<t;){i=u();const t=i.slice();r.push(t),e+=i.length}return concatBytes$1(...r)};return(e,t)=>{let r;for(c(),l(e);!(r=t(d()));)l();return c(),r}}function _validateObject(e,t,r={}){if(!e||"object"!=typeof e)throw new Error("expected valid options object");function n(t,r,n){const o=e[t];if(n&&void 0===o)return;const i=typeof o;if(i!==r||null===o)throw new Error(`param "${t}" is invalid: expected ${r}, got ${i}`)}Object.entries(t).forEach(([e,t])=>n(e,t,!1)),Object.entries(r).forEach(([e,t])=>n(e,t,!0))}function memoized(e){const t=new WeakMap;return(r,...n)=>{const o=t.get(r);if(void 0!==o)return o;const i=e(r,...n);return t.set(r,i),i}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$3=BigInt(1),_2n$2=BigInt(2),_3n$1=BigInt(3),_4n$1=BigInt(4),_5n=BigInt(5),_8n=BigInt(8);function mod(e,t){const r=e%t;return r>=_0n$2?r:t+r}function pow2(e,t,r){let n=e;for(;t-- >_0n$2;)n*=n,n%=r;return n}function invert(e,t){if(e===_0n$2)throw new Error("invert: expected non-zero number");if(t<=_0n$2)throw new Error("invert: expected positive modulus, got "+t);let r=mod(e,t),n=t,o=_0n$2,i=_1n$3;for(;r!==_0n$2;){const e=n%r,t=o-i*(n/r);n=r,r=e,o=i,i=t}if(n!==_1n$3)throw new Error("invert: does not exist");return mod(o,t)}function sqrt3mod4(e,t){const r=(e.ORDER+_1n$3)/_4n$1,n=e.pow(t,r);if(!e.eql(e.sqr(n),t))throw new Error("Cannot find square root");return n}function sqrt5mod8(e,t){const r=(e.ORDER-_5n)/_8n,n=e.mul(t,_2n$2),o=e.pow(n,r),i=e.mul(t,o),s=e.mul(e.mul(i,_2n$2),o),a=e.mul(i,e.sub(s,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function tonelliShanks(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-_1n$3,r=0;for(;t%_2n$2===_0n$2;)t/=_2n$2,r++;let n=_2n$2;const o=Field(e);for(;1===FpLegendre(o,n);)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(1===r)return sqrt3mod4;let i=o.pow(n,t);const s=(t+_1n$3)/_2n$2;return function(e,n){if(e.is0(n))return n;if(1!==FpLegendre(e,n))throw new Error("Cannot find square root");let o=r,a=e.mul(e.ONE,i),c=e.pow(n,t),u=e.pow(n,s);for(;!e.eql(c,e.ONE);){if(e.is0(c))return e.ZERO;let t=1,r=e.sqr(c);for(;!e.eql(r,e.ONE);)if(t++,r=e.sqr(r),t===o)throw new Error("Cannot find square root");const n=_1n$3<<BigInt(o-t-1),i=e.pow(a,n);o=t,a=e.sqr(i),c=e.mul(c,a),u=e.mul(u,i)}return u}}function FpSqrt(e){return e%_4n$1===_3n$1?sqrt3mod4:e%_8n===_5n?sqrt5mod8:tonelliShanks(e)}const FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(e){return _validateObject(e,FIELD_FIELDS.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"})),e}function FpPow(e,t,r){if(r<_0n$2)throw new Error("invalid exponent, negatives unsupported");if(r===_0n$2)return e.ONE;if(r===_1n$3)return t;let n=e.ONE,o=t;for(;r>_0n$2;)r&_1n$3&&(n=e.mul(n,o)),o=e.sqr(o),r>>=_1n$3;return n}function FpInvertBatch(e,t,r=!1){const n=new Array(t.length).fill(r?e.ZERO:void 0),o=t.reduce((t,r,o)=>e.is0(r)?t:(n[o]=t,e.mul(t,r)),e.ONE),i=e.inv(o);return t.reduceRight((t,r,o)=>e.is0(r)?t:(n[o]=e.mul(t,n[o]),e.mul(t,r)),i),n}function FpLegendre(e,t){const r=(e.ORDER-_1n$3)/_2n$2,n=e.pow(t,r),o=e.eql(n,e.ONE),i=e.eql(n,e.ZERO),s=e.eql(n,e.neg(e.ONE));if(!o&&!i&&!s)throw new Error("invalid Legendre symbol result");return o?1:i?0:-1}function nLength(e,t){void 0!==t&&anumber(t);const r=void 0!==t?t:e.toString(2).length;return{nBitLength:r,nByteLength:Math.ceil(r/8)}}function Field(e,t,r=!1,n={}){if(e<=_0n$2)throw new Error("invalid field: expected ORDER > 0, got "+e);let o,i;if("object"==typeof t&&null!=t){if(n.sqrt||r)throw new Error("cannot specify opts in two arguments");const e=t;e.BITS&&(o=e.BITS),e.sqrt&&(i=e.sqrt),"boolean"==typeof e.isLE&&(r=e.isLE)}else"number"==typeof t&&(o=t),n.sqrt&&(i=n.sqrt);const{nBitLength:s,nByteLength:a}=nLength(e,o);if(a>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let c;const u=Object.freeze({ORDER:e,isLE:r,BITS:s,BYTES:a,MASK:bitMask(s),ZERO:_0n$2,ONE:_1n$3,create:t=>mod(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return _0n$2<=t&&t<e},is0:e=>e===_0n$2,isValidNot0:e=>!u.is0(e)&&u.isValid(e),isOdd:e=>(e&_1n$3)===_1n$3,neg:t=>mod(-t,e),eql:(e,t)=>e===t,sqr:t=>mod(t*t,e),add:(t,r)=>mod(t+r,e),sub:(t,r)=>mod(t-r,e),mul:(t,r)=>mod(t*r,e),pow:(e,t)=>FpPow(u,e,t),div:(t,r)=>mod(t*invert(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>invert(t,e),sqrt:i||(t=>(c||(c=FpSqrt(e)),c(u,t))),toBytes:e=>r?numberToBytesLE(e,a):numberToBytesBE(e,a),fromBytes:e=>{if(e.length!==a)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+e.length);return r?bytesToNumberLE(e):bytesToNumberBE(e)},invertBatch:e=>FpInvertBatch(u,e),cmov:(e,t,r)=>r?t:e});return Object.freeze(u)}function getFieldBytesLength(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function getMinHashLength(e){const t=getFieldBytesLength(e);return t+Math.ceil(t/2)}function mapHashToField(e,t,r=!1){const n=e.length,o=getFieldBytesLength(t),i=getMinHashLength(t);if(n<16||n<i||n>1024)throw new Error("expected "+i+"-1024 bytes of input, got "+n);const s=mod(r?bytesToNumberLE(e):bytesToNumberBE(e),t-_1n$3)+_1n$3;return r?numberToBytesLE(s,o):numberToBytesBE(s,o)}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$1=BigInt(0),_1n$2=BigInt(1);function negateCt(e,t){const r=t.negate();return e?r:t}function normalizeZ(e,t,r){const n=FpInvertBatch(e.Fp,r.map(e=>e.pz));return r.map((e,t)=>e.toAffine(n[t])).map(e.fromAffine)}function validateW(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function calcWOpts(e,t){validateW(e,t);const r=2**e;return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1),mask:bitMask(e),maxNumber:r,shiftBy:BigInt(e)}}function calcOffsets(e,t,r){const{windowSize:n,mask:o,maxNumber:i,shiftBy:s}=r;let a=Number(e&o),c=e>>s;a>n&&(a-=i,c+=_1n$2);const u=t*n;return{nextN:c,offset:u+Math.abs(a)-1,isZero:0===a,isNeg:a<0,isNegF:t%2!=0,offsetF:u}}function validateMSMPoints(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw new Error("invalid point at index "+r)})}function validateMSMScalars(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+r)})}const pointPrecomputes=new WeakMap,pointWindowSizes=new WeakMap;function getW(e){return pointWindowSizes.get(e)||1}function assert0(e){if(e!==_0n$1)throw new Error("invalid wNAF")}function wNAF(e,t){return{constTimeNegate:negateCt,hasPrecomputes:e=>1!==getW(e),unsafeLadder(t,r,n=e.ZERO){let o=t;for(;r>_0n$1;)r&_1n$2&&(n=n.add(o)),o=o.double(),r>>=_1n$2;return n},precomputeWindow(e,r){const{windows:n,windowSize:o}=calcWOpts(r,t),i=[];let s=e,a=s;for(let t=0;t<n;t++){a=s,i.push(a);for(let e=1;e<o;e++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(r,n,o){let i=e.ZERO,s=e.BASE;const a=calcWOpts(r,t);for(let e=0;e<a.windows;e++){const{nextN:t,offset:r,isZero:c,isNeg:u,isNegF:l,offsetF:d}=calcOffsets(o,e,a);o=t,c?s=s.add(negateCt(l,n[d])):i=i.add(negateCt(u,n[r]))}return assert0(o),{p:i,f:s}},wNAFUnsafe(r,n,o,i=e.ZERO){const s=calcWOpts(r,t);for(let e=0;e<s.windows&&o!==_0n$1;e++){const{nextN:t,offset:r,isZero:a,isNeg:c}=calcOffsets(o,e,s);if(o=t,!a){const e=n[r];i=i.add(c?e.negate():e)}}return assert0(o),i},getPrecomputes(e,t,r){let n=pointPrecomputes.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&("function"==typeof r&&(n=r(n)),pointPrecomputes.set(t,n))),n},wNAFCached(e,t,r){const n=getW(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){const o=getW(e);return 1===o?this.unsafeLadder(e,t,n):this.wNAFUnsafe(o,this.getPrecomputes(o,e,r),t,n)},setWindowSize(e,r){validateW(r,t),pointWindowSizes.set(e,r),pointPrecomputes.delete(e)}}}function mulEndoUnsafe(e,t,r,n){let o=t,i=e.ZERO,s=e.ZERO;for(;r>_0n$1||n>_0n$1;)r&_1n$2&&(i=i.add(o)),n&_1n$2&&(s=s.add(o)),o=o.double(),r>>=_1n$2,n>>=_1n$2;return{p1:i,p2:s}}function pippenger(e,t,r,n){validateMSMPoints(r,e),validateMSMScalars(n,t);const o=r.length,i=n.length;if(o!==i)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,a=bitLen(BigInt(o));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const u=bitMask(c),l=new Array(Number(u)+1).fill(s);let d=s;for(let h=Math.floor((t.BITS-1)/c)*c;h>=0;h-=c){l.fill(s);for(let t=0;t<i;t++){const e=n[t],o=Number(e>>BigInt(h)&u);l[o]=l[o].add(r[t])}let e=s;for(let t=l.length-1,r=s;t>0;t--)r=r.add(l[t]),e=e.add(r);if(d=d.add(e),0!==h)for(let t=0;t<c;t++)d=d.double()}return d}function createField(e,t){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return validateField(t),t}return Field(e)}function _createCurveFields(e,t,r={}){if(!t||"object"!=typeof t)throw new Error(`expected valid ${e} CURVE object`);for(const s of["p","n","h"]){const e=t[s];if(!("bigint"==typeof e&&e>_0n$1))throw new Error(`CURVE.${s} must be positive bigint`)}const n=createField(t.p,r.Fp),o=createField(t.n,r.Fn),i=["Gx","Gy","a","b"];for(const s of i)if(!n.isValid(t[s]))throw new Error(`CURVE.${s} must be valid field element of CURVE.Fp`);return{Fp:n,Fn:o}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validateSigVerOpts(e){void 0!==e.lowS&&abool("lowS",e.lowS),void 0!==e.prehash&&abool("prehash",e.prehash)}class DERErr extends Error{constructor(e=""){super(e)}}const DER={Err:DERErr,_tlv:{encode:(e,t)=>{const{Err:r}=DER;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const n=t.length/2,o=numberToHexUnpadded(n);if(o.length/2&128)throw new r("tlv.encode: long form length too big");const i=n>127?numberToHexUnpadded(o.length/2|128):"";return numberToHexUnpadded(e)+i+o+t},decode(e,t){const{Err:r}=DER;let n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");const o=t[n++];let i=0;if(!!(128&o)){const e=127&o;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(const t of s)i=i<<8|t;if(n+=e,i<128)throw new r("tlv.decode(long): not minimal encoding")}else i=o;const s=t.subarray(n,n+i);if(s.length!==i)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+i)}}},_int:{encode(e){const{Err:t}=DER;if(e<_0n)throw new t("integer: negative integers are not allowed");let r=numberToHexUnpadded(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=DER;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return bytesToNumberBE(e)}},toSig(e){const{Err:t,_int:r,_tlv:n}=DER,o=ensureBytes("signature",e),{v:i,l:s}=n.decode(48,o);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=n.decode(2,i),{v:u,l:l}=n.decode(2,c);if(l.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(a),s:r.decode(u)}},hexFromSig(e){const{_tlv:t,_int:r}=DER,n=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,n)}},_0n=BigInt(0),_1n$1=BigInt(1),_2n$1=BigInt(2),_3n=BigInt(3),_4n=BigInt(4);function _legacyHelperEquat(e,t,r){return function(n){const o=e.sqr(n),i=e.mul(o,n);return e.add(e.add(i,e.mul(n,t)),r)}}function _legacyHelperNormPriv(e,t,r){const{BYTES:n}=e;return function(o){let i;if("bigint"==typeof o)i=o;else{let r=ensureBytes("private key",o);if(t){if(!t.includes(2*r.length))throw new Error("invalid private key");const e=new Uint8Array(n);e.set(r,e.length-r.length),r=e}try{i=e.fromBytes(r)}catch(s){throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof o}`)}}if(r&&(i=e.create(i)),!e.isValidNot0(i))throw new Error("invalid private key: out of range [1..N-1]");return i}}function weierstrassN(e,t={}){const{Fp:r,Fn:n}=_createCurveFields("weierstrass",e,t),{h:o,n:i}=e;_validateObject(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:s}=t;if(s&&(!r.is0(e.a)||"bigint"!=typeof s.beta||"function"!=typeof s.splitScalar))throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function');function a(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}const c=t.toBytes||function(e,t,n){const{x:o,y:i}=t.toAffine(),s=r.toBytes(o);if(abool("isCompressed",n),n){a();return concatBytes$1(pprefix(!r.isOdd(i)),s)}return concatBytes$1(Uint8Array.of(4),s,r.toBytes(i))},u=t.fromBytes||function(e){abytes(e);const t=r.BYTES,n=t+1,o=2*t+1,i=e.length,s=e[0],c=e.subarray(1);if(i!==n||2!==s&&3!==s){if(i===o&&4===s){const e=r.fromBytes(c.subarray(0*t,1*t)),n=r.fromBytes(c.subarray(1*t,2*t));if(!d(e,n))throw new Error("bad point: is not on curve");return{x:e,y:n}}throw new Error(`bad point: got length ${i}, expected compressed=${n} or uncompressed=${o}`)}{const e=r.fromBytes(c);if(!r.isValid(e))throw new Error("bad point: is not on curve, wrong x");const t=l(e);let n;try{n=r.sqrt(t)}catch(u){const e=u instanceof Error?": "+u.message:"";throw new Error("bad point: is not on curve, sqrt error"+e)}a();return!(1&~s)!==r.isOdd(n)&&(n=r.neg(n)),{x:e,y:n}}},l=_legacyHelperEquat(r,e.a,e.b);function d(e,t){const n=r.sqr(t),o=l(e);return r.eql(n,o)}if(!d(e.Gx,e.Gy))throw new Error("bad curve params: generator point");const h=r.mul(r.pow(e.a,_3n),_4n),f=r.mul(r.sqr(e.b),BigInt(27));if(r.is0(r.add(h,f)))throw new Error("bad curve params: a or b");function p(e,t,n=!1){if(!r.isValid(t)||n&&r.is0(t))throw new Error(`bad point coordinate ${e}`);return t}function m(e){if(!(e instanceof _))throw new Error("ProjectivePoint expected")}const y=memoized((e,t)=>{const{px:n,py:o,pz:i}=e;if(r.eql(i,r.ONE))return{x:n,y:o};const s=e.is0();null==t&&(t=s?r.ONE:r.inv(i));const a=r.mul(n,t),c=r.mul(o,t),u=r.mul(i,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(u,r.ONE))throw new Error("invZ was invalid");return{x:a,y:c}}),g=memoized(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:n,y:o}=e.toAffine();if(!r.isValid(n)||!r.isValid(o))throw new Error("bad point: x or y not field elements");if(!d(n,o))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function b(e,t,n,o,i){return n=new _(r.mul(n.px,e),n.py,n.pz),t=negateCt(o,t),n=negateCt(i,n),t.add(n)}class _{constructor(e,t,r){this.px=p("x",e),this.py=p("y",t,!0),this.pz=p("z",r),Object.freeze(this)}static fromAffine(e){const{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw new Error("invalid affine point");if(e instanceof _)throw new Error("projective point not allowed");return r.is0(t)&&r.is0(n)?_.ZERO:new _(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){return normalizeZ(_,"pz",e)}static fromBytes(e){return abytes(e),_.fromHex(e)}static fromHex(e){const t=_.fromAffine(u(ensureBytes("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){const r=_legacyHelperNormPriv(n,t.allowedPrivateKeyLengths,t.wrapPrivateKey);return _.BASE.multiply(r(e))}static msm(e,t){return pippenger(_,n,e,t)}precompute(e=8,t=!0){return v.setWindowSize(this,e),t||this.multiply(_3n),this}_setWindowSize(e){this.precompute(e)}assertValidity(){g(this)}hasEvenY(){const{y:e}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(e)}equals(e){m(e);const{px:t,py:n,pz:o}=this,{px:i,py:s,pz:a}=e,c=r.eql(r.mul(t,a),r.mul(i,o)),u=r.eql(r.mul(n,a),r.mul(s,o));return c&&u}negate(){return new _(this.px,r.neg(this.py),this.pz)}double(){const{a:t,b:n}=e,o=r.mul(n,_3n),{px:i,py:s,pz:a}=this;let c=r.ZERO,u=r.ZERO,l=r.ZERO,d=r.mul(i,i),h=r.mul(s,s),f=r.mul(a,a),p=r.mul(i,s);return p=r.add(p,p),l=r.mul(i,a),l=r.add(l,l),c=r.mul(t,l),u=r.mul(o,f),u=r.add(c,u),c=r.sub(h,u),u=r.add(h,u),u=r.mul(c,u),c=r.mul(p,c),l=r.mul(o,l),f=r.mul(t,f),p=r.sub(d,f),p=r.mul(t,p),p=r.add(p,l),l=r.add(d,d),d=r.add(l,d),d=r.add(d,f),d=r.mul(d,p),u=r.add(u,d),f=r.mul(s,a),f=r.add(f,f),d=r.mul(f,p),c=r.sub(c,d),l=r.mul(f,h),l=r.add(l,l),l=r.add(l,l),new _(c,u,l)}add(t){m(t);const{px:n,py:o,pz:i}=this,{px:s,py:a,pz:c}=t;let u=r.ZERO,l=r.ZERO,d=r.ZERO;const h=e.a,f=r.mul(e.b,_3n);let p=r.mul(n,s),y=r.mul(o,a),g=r.mul(i,c),b=r.add(n,o),w=r.add(s,a);b=r.mul(b,w),w=r.add(p,y),b=r.sub(b,w),w=r.add(n,i);let v=r.add(s,c);return w=r.mul(w,v),v=r.add(p,g),w=r.sub(w,v),v=r.add(o,i),u=r.add(a,c),v=r.mul(v,u),u=r.add(y,g),v=r.sub(v,u),d=r.mul(h,w),u=r.mul(f,g),d=r.add(u,d),u=r.sub(y,d),d=r.add(y,d),l=r.mul(u,d),y=r.add(p,p),y=r.add(y,p),g=r.mul(h,g),w=r.mul(f,w),y=r.add(y,g),g=r.sub(p,g),g=r.mul(h,g),w=r.add(w,g),p=r.mul(y,w),l=r.add(l,p),p=r.mul(v,w),u=r.mul(b,u),u=r.sub(u,p),p=r.mul(b,y),d=r.mul(v,d),d=r.add(d,p),new _(u,l,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(_.ZERO)}multiply(e){const{endo:r}=t;if(!n.isValidNot0(e))throw new Error("invalid scalar: out of range");let o,i;const s=e=>v.wNAFCached(this,e,_.normalizeZ);if(r){const{k1neg:t,k1:n,k2neg:a,k2:c}=r.splitScalar(e),{p:u,f:l}=s(n),{p:d,f:h}=s(c);i=l.add(h),o=b(r.beta,u,d,t,a)}else{const{p:t,f:r}=s(e);o=t,i=r}return _.normalizeZ([o,i])[0]}multiplyUnsafe(e){const{endo:r}=t,o=this;if(!n.isValid(e))throw new Error("invalid scalar: out of range");if(e===_0n||o.is0())return _.ZERO;if(e===_1n$1)return o;if(v.hasPrecomputes(this))return this.multiply(e);if(r){const{k1neg:t,k1:n,k2neg:i,k2:s}=r.splitScalar(e),{p1:a,p2:c}=mulEndoUnsafe(_,o,n,s);return b(r.beta,a,c,t,i)}return v.wNAFCachedUnsafe(o,e)}multiplyAndAddUnsafe(e,t,r){const n=this.multiplyUnsafe(t).add(e.multiplyUnsafe(r));return n.is0()?void 0:n}toAffine(e){return y(this,e)}isTorsionFree(){const{isTorsionFree:e}=t;return o===_1n$1||(e?e(_,this):v.wNAFCachedUnsafe(this,i).is0())}clearCofactor(){const{clearCofactor:e}=t;return o===_1n$1?this:e?e(_,this):this.multiplyUnsafe(o)}toBytes(e=!0){return abool("isCompressed",e),this.assertValidity(),c(_,this,e)}toRawBytes(e=!0){return this.toBytes(e)}toHex(e=!0){return bytesToHex(this.toBytes(e))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}}_.BASE=new _(e.Gx,e.Gy,r.ONE),_.ZERO=new _(r.ZERO,r.ONE,r.ZERO),_.Fp=r,_.Fn=n;const w=n.BITS,v=wNAF(_,t.endo?Math.ceil(w/2):w);return _}function pprefix(e){return Uint8Array.of(e?2:3)}function ecdsa(e,t,r={}){_validateObject(t,{hash:"function"},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const n=t.randomBytes||randomBytes,o=t.hmac||((e,...r)=>hmac(t.hash,e,concatBytes$1(...r))),{Fp:i,Fn:s}=e,{ORDER:a,BITS:c}=s;function u(e){return e>a>>_1n$1}function l(e,t){if(!s.isValidNot0(t))throw new Error(`invalid signature ${e}: out of range 1..CURVE.n`)}class d{constructor(e,t,r){l("r",e),l("s",t),this.r=e,this.s=t,null!=r&&(this.recovery=r),Object.freeze(this)}static fromCompact(e){const t=s.BYTES,r=ensureBytes("compactSignature",e,2*t);return new d(s.fromBytes(r.subarray(0,t)),s.fromBytes(r.subarray(t,2*t)))}static fromDER(e){const{r:t,s:r}=DER.toSig(ensureBytes("DER",e));return new d(t,r)}assertValidity(){}addRecoveryBit(e){return new d(this.r,this.s,e)}recoverPublicKey(t){const r=i.ORDER,{r:n,s:o,recovery:c}=this;if(null==c||![0,1,2,3].includes(c))throw new Error("recovery id invalid");if(a*_2n$1<r&&c>1)throw new Error("recovery id is ambiguous for h>1 curve");const u=2===c||3===c?n+a:n;if(!i.isValid(u))throw new Error("recovery id 2 or 3 invalid");const l=i.toBytes(u),d=e.fromHex(concatBytes$1(pprefix(!(1&c)),l)),h=s.inv(u),f=y(ensureBytes("msgHash",t)),p=s.create(-f*h),m=s.create(o*h),g=e.BASE.multiplyUnsafe(p).add(d.multiplyUnsafe(m));if(g.is0())throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return u(this.s)}normalizeS(){return this.hasHighS()?new d(this.r,s.neg(this.s),this.recovery):this}toBytes(e){if("compact"===e)return concatBytes$1(s.toBytes(this.r),s.toBytes(this.s));if("der"===e)return hexToBytes(DER.hexFromSig(this));throw new Error("invalid format")}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return bytesToHex(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return bytesToHex(this.toBytes("compact"))}}const h=_legacyHelperNormPriv(s,r.allowedPrivateKeyLengths,r.wrapPrivateKey),f={isValidPrivateKey(e){try{return h(e),!0}catch(t){return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const e=a;return mapHashToField(n(getMinHashLength(e)),e)},precompute:(t=8,r=e.BASE)=>r.precompute(t,!1)};function p(t){if("bigint"==typeof t)return!1;if(t instanceof e)return!0;const n=ensureBytes("key",t).length,o=i.BYTES,a=o+1,c=2*o+1;return r.allowedPrivateKeyLengths||s.BYTES===a?void 0:n===a||n===c}const m=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const t=bytesToNumberBE(e),r=8*e.length-c;return r>0?t>>BigInt(r):t},y=t.bits2int_modN||function(e){return s.create(m(e))},g=bitMask(c);function b(e){return aInRange("num < 2^"+c,e,_0n,g),s.toBytes(e)}function _(r,o,a=w){if(["recovered","canonical"].some(e=>e in a))throw new Error("sign() legacy options not supported");const{hash:c}=t;let{lowS:l,prehash:f,extraEntropy:p}=a;null==l&&(l=!0),r=ensureBytes("msgHash",r),validateSigVerOpts(a),f&&(r=ensureBytes("prehashed msgHash",c(r)));const g=y(r),_=h(o),v=[b(_),b(g)];if(null!=p&&!1!==p){const e=!0===p?n(i.BYTES):p;v.push(ensureBytes("extraEntropy",e))}const I=concatBytes$1(...v),k=g;return{seed:I,k2sig:function(t){const r=m(t);if(!s.isValidNot0(r))return;const n=s.inv(r),o=e.BASE.multiply(r).toAffine(),i=s.create(o.x);if(i===_0n)return;const a=s.create(n*s.create(k+i*_));if(a===_0n)return;let c=(o.x===i?0:2)|Number(o.y&_1n$1),h=a;return l&&u(a)&&(h=function(e){return u(e)?s.neg(e):e}(a),c^=1),new d(i,h,c)}}}const w={lowS:t.lowS,prehash:!1},v={lowS:t.lowS,prehash:!1};return e.BASE.precompute(8),Object.freeze({getPublicKey:function(t,r=!0){return e.fromPrivateKey(t).toBytes(r)},getSharedSecret:function(t,r,n=!0){if(!0===p(t))throw new Error("first arg must be private key");if(!1===p(r))throw new Error("second arg must be public key");return e.fromHex(r).multiply(h(t)).toBytes(n)},sign:function(e,r,n=w){const{seed:i,k2sig:a}=_(e,r,n);return createHmacDrbg(t.hash.outputLen,s.BYTES,o)(i,a)},verify:function(r,n,o,i=v){const a=r;n=ensureBytes("msgHash",n),o=ensureBytes("publicKey",o),validateSigVerOpts(i);const{lowS:c,prehash:u,format:l}=i;if("strict"in i)throw new Error("options.strict was renamed to lowS");if(void 0!==l&&!["compact","der","js"].includes(l))throw new Error('format must be "compact", "der" or "js"');const h="string"==typeof a||isBytes$1(a),f=!h&&!l&&"object"==typeof a&&null!==a&&"bigint"==typeof a.r&&"bigint"==typeof a.s;if(!h&&!f)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let p,m;try{if(f){if(void 0!==l&&"js"!==l)throw new Error("invalid format");p=new d(a.r,a.s)}if(h){try{"compact"!==l&&(p=d.fromDER(a))}catch(A){if(!(A instanceof DER.Err))throw A}p||"der"===l||(p=d.fromCompact(a))}m=e.fromHex(o)}catch(S){return!1}if(!p)return!1;if(c&&p.hasHighS())return!1;u&&(n=t.hash(n));const{r:g,s:b}=p,_=y(n),w=s.inv(b),I=s.create(_*w),k=s.create(g*w),T=e.BASE.multiplyUnsafe(I).add(m.multiplyUnsafe(k));return!T.is0()&&s.create(T.x)===g},utils:f,Point:e,Signature:d})}function _weierstrass_legacy_opts_to_new(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy};return{CURVE:t,curveOpts:{Fp:e.Fp,Fn:Field(t.n,e.nBitLength),allowedPrivateKeyLengths:e.allowedPrivateKeyLengths,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,wrapPrivateKey:e.wrapPrivateKey,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes}}}function _ecdsa_legacy_opts_to_new(e){const{CURVE:t,curveOpts:r}=_weierstrass_legacy_opts_to_new(e);return{CURVE:t,curveOpts:r,ecdsaOpts:{hash:e.hash,hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN}}}function _ecdsa_new_output_to_legacy(e,t){return Object.assign({},t,{ProjectivePoint:t.Point,CURVE:e})}function weierstrass(e){const{CURVE:t,curveOpts:r,ecdsaOpts:n}=_ecdsa_legacy_opts_to_new(e);return _ecdsa_new_output_to_legacy(e,ecdsa(weierstrassN(t,r),n,r))}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function createCurve(e,t){const r=t=>weierstrass({...e,hash:t});return{...r(t),create:r}}
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1_CURVE={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")};BigInt(0);const _1n=BigInt(1),_2n=BigInt(2),divNearest=(e,t)=>(e+t/_2n)/t;function sqrtMod(e){const t=secp256k1_CURVE.p,r=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),a=BigInt(44),c=BigInt(88),u=e*e*e%t,l=u*u*e%t,d=pow2(l,r,t)*l%t,h=pow2(d,r,t)*l%t,f=pow2(h,_2n,t)*u%t,p=pow2(f,o,t)*f%t,m=pow2(p,i,t)*p%t,y=pow2(m,a,t)*m%t,g=pow2(y,c,t)*y%t,b=pow2(g,a,t)*m%t,_=pow2(b,r,t)*l%t,w=pow2(_,s,t)*p%t,v=pow2(w,n,t)*u%t,I=pow2(v,_2n,t);if(!Fpk1.eql(Fpk1.sqr(I),e))throw new Error("Cannot find square root");return I}const Fpk1=Field(secp256k1_CURVE.p,void 0,void 0,{sqrt:sqrtMod}),secp256k1=createCurve({...secp256k1_CURVE,Fp:Fpk1,lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=secp256k1_CURVE.n,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-_1n*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,s=BigInt("0x100000000000000000000000000000000"),a=divNearest(i*e,t),c=divNearest(-n*e,t);let u=mod(e-a*r-c*o,t),l=mod(-a*n-c*i,t);const d=u>s,h=l>s;if(d&&(u=t-u),h&&(l=t-l),u>s||l>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:d,k1:u,k2neg:h,k2:l}}}},sha256),N$1=secp256k1.CURVE.n,HARDENED_BIT=2147483648;async function derive$1(e,t,r){const n=isHardenedIndex(r),o=new Uint8Array(37),i=secp256k1.getPublicKey(e,!0);n?(o[0]=0,o.set(e,1)):o.set(i,0),new DataView(o.buffer,o.byteOffset,o.byteLength).setUint32(33,r,!1);const s=await hash(HashAlgorithm.Sha512,t,o),a=s.subarray(0,32),c=s.subarray(32);try{const n=bytesToNumberBE(e),o=(n+bytesToNumberBE(a))%N$1;if(0n===o)return derive$1(e,t,r+1);return{keyData:numberToBytesBE(o,32),chainCode:c}}catch{return derive$1(e,t,r+1)}}async function fromSeed$1(e){if(e.length<16)throw new TypeError("Seed should be at least 128 bits");if(e.length>64)throw new TypeError("Seed should be at most 512 bits");const t=await hash(HashAlgorithm.Sha512,"Bitcoin seed",e);return{keyData:t.subarray(0,32),chainCode:t.subarray(32)}}function toHardenedIndex(e){return e|HARDENED_BIT}function isHardenedIndex(e){return 0!==(e&HARDENED_BIT)}async function derive(e,t,r){if(isHardenedIndex(r))throw new Error("the index should not be pre-hardened");const n=new Uint8Array(37);n[0]=0,n.set(e,1),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(33,r,!1),n[33]|=128;const o=await hash(HashAlgorithm.Sha512,t,n);return{keyData:o.subarray(0,32),chainCode:o.subarray(32)}}async function fromSeed(e){const t=await hash(HashAlgorithm.Sha512,"ed25519 seed",e);return{keyData:t.subarray(0,32),chainCode:t.subarray(32)}}const derPrefix$2="302e020100300506032b657004220420",derPrefixBytes$2=decode$4(derPrefix$2);class Ed25519PrivateKey{constructor(e,t){this._keyPair=e instanceof Uint8Array?nacl.sign.keyPair.fromSeed(e):e,this._chainCode=null!=t?t:null}get _type(){return"ED25519"}static generate(){const e=bytes(64);return new Ed25519PrivateKey(nacl.sign.keyPair.fromSeed(e.subarray(0,32)),e.subarray(32))}static async generateAsync(){const e=await bytesAsync(64);return new Ed25519PrivateKey(nacl.sign.keyPair.fromSeed(e.subarray(0,32)),e.subarray(32))}static fromBytes(e){switch(e.length){case 48:return Ed25519PrivateKey.fromBytesDer(e);case 32:case 64:return Ed25519PrivateKey.fromBytesRaw(e);default:throw new BadKeyError(`invalid private key length: ${e.length} bytes`)}}static fromBytesDer(e){let t;try{const r=new Uint8Array(e),n=r.subarray(0,e.length-32);if(!n.every((e,t)=>derPrefixBytes$2[t]===e))throw new BadKeyError("invalid DER prefix for ED25519 private key");t=r.slice(e.length-32)}catch(n){const e=null!=n&&null!=n.message?n.message:"";throw new BadKeyError(`cannot decode ED25519 private key data from DER format: ${e}`)}const r=nacl.sign.keyPair.fromSeed(t);return new Ed25519PrivateKey(r)}static fromBytesRaw(e){switch(e.length){case 32:return new Ed25519PrivateKey(nacl.sign.keyPair.fromSeed(e));case 64:return new Ed25519PrivateKey(nacl.sign.keyPair.fromSecretKey(e))}throw new BadKeyError(`invalid private key length: ${e.length} bytes`)}static fromString(e){return Ed25519PrivateKey.fromBytes(decode$4(e))}static fromStringDer(e){return Ed25519PrivateKey.fromBytesDer(decode$4(e))}static fromStringRaw(e){return Ed25519PrivateKey.fromBytesRaw(decode$4(e))}static async fromSeed(e){const{keyData:t,chainCode:r}=await fromSeed(e);return new Ed25519PrivateKey(t,r)}get publicKey(){return new Ed25519PublicKey(this._keyPair.publicKey)}sign(e){return nacl.sign.detached(e,this._keyPair.secretKey)}toBytesDer(){const e=new Uint8Array(derPrefixBytes$2.length+32),t=this._keyPair.secretKey.subarray(0,32),r=32-t.length,n=derPrefixBytes$2.length+r;return e.set(derPrefixBytes$2,0),e.set(t,n),e}toBytesRaw(){return this._keyPair.secretKey.slice(0,32)}}const HEX_CHARS$1="0123456789abcdef".split(""),KECCAK_PADDING=[1,256,65536,16777216],SHIFT$1=[0,8,16,24],RC=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],Keccak=e=>{return{blocks:[],reset:!0,block:0,start:0,blockCount:1600-(e<<1)>>5,outputBlocks:e>>5,s:(t=[0,0,0,0,0,0,0,0,0,0],[].concat(t,t,t,t,t))};var t},update=(e,t)=>{for(var r,n,o=t.length,i=e.blocks,s=e.blockCount<<2,a=e.blockCount,c=e.outputBlocks,u=e.s,l=0;l<o;){if(e.reset)for(e.reset=!1,i[0]=e.block,r=1;r<a+1;++r)i[r]=0;if("string"!=typeof t)for(r=e.start;l<o&&r<s;++l)i[r>>2]|=t[l]<<SHIFT$1[3&r++];else for(r=e.start;l<o&&r<s;++l)(n=t.charCodeAt(l))<128?i[r>>2]|=n<<SHIFT$1[3&r++]:n<2048?(i[r>>2]|=(192|n>>6)<<SHIFT$1[3&r++],i[r>>2]|=(128|63&n)<<SHIFT$1[3&r++]):n<55296||n>=57344?(i[r>>2]|=(224|n>>12)<<SHIFT$1[3&r++],i[r>>2]|=(128|n>>6&63)<<SHIFT$1[3&r++],i[r>>2]|=(128|63&n)<<SHIFT$1[3&r++]):(n=65536+((1023&n)<<10|1023&t.charCodeAt(++l)),i[r>>2]|=(240|n>>18)<<SHIFT$1[3&r++],i[r>>2]|=(128|n>>12&63)<<SHIFT$1[3&r++],i[r>>2]|=(128|n>>6&63)<<SHIFT$1[3&r++],i[r>>2]|=(128|63&n)<<SHIFT$1[3&r++]);if(e.lastByteIndex=r,r>=s){for(e.start=r-s,e.block=i[a],r=0;r<a;++r)u[r]^=i[r];f$5(u),e.reset=!0}else e.start=r}if(i[(r=e.lastByteIndex)>>2]|=KECCAK_PADDING[3&r],e.lastByteIndex===s)for(i[0]=i[a],r=1;r<a+1;++r)i[r]=0;for(i[a-1]|=2147483648,r=0;r<a;++r)u[r]^=i[r];f$5(u);var d,h="",f=0;for(r=0;f<c;){for(r=0;r<a&&f<c;++r,++f)d=u[r],h+=HEX_CHARS$1[d>>4&15]+HEX_CHARS$1[15&d]+HEX_CHARS$1[d>>12&15]+HEX_CHARS$1[d>>8&15]+HEX_CHARS$1[d>>20&15]+HEX_CHARS$1[d>>16&15]+HEX_CHARS$1[d>>28&15]+HEX_CHARS$1[d>>24&15];f%a===0&&(f$5(u),r=0)}return"0x"+h},f$5=e=>{var t,r,n,o,i,s,a,c,u,l,d,h,f,p,m,y,g,b,_,w,v,I,k,T,A,S,E,P,O,R,C,$,N,M,x,B,D,L,F,j,U,q,K,H,G,z,V,Z,W,J,Y,Q,X,ee,te,re,ne,oe,ie,se,ae,ce,ue;for(n=0;n<48;n+=2)o=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(f=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=o^(c<<1|u>>>31),r=i^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|f>>>31),r=u^(f<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(o<<1|i>>>31),r=d^(i<<1|o>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,p=e[0],m=e[1],z=e[11]<<4|e[10]>>>28,V=e[10]<<4|e[11]>>>28,P=e[20]<<3|e[21]>>>29,O=e[21]<<3|e[20]>>>29,se=e[31]<<9|e[30]>>>23,ae=e[30]<<9|e[31]>>>23,q=e[40]<<18|e[41]>>>14,K=e[41]<<18|e[40]>>>14,M=e[2]<<1|e[3]>>>31,x=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,g=e[12]<<12|e[13]>>>20,Z=e[22]<<10|e[23]>>>22,W=e[23]<<10|e[22]>>>22,R=e[33]<<13|e[32]>>>19,C=e[32]<<13|e[33]>>>19,ce=e[42]<<2|e[43]>>>30,ue=e[43]<<2|e[42]>>>30,ee=e[5]<<30|e[4]>>>2,te=e[4]<<30|e[5]>>>2,B=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,b=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,J=e[34]<<15|e[35]>>>17,Y=e[35]<<15|e[34]>>>17,$=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,T=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,re=e[17]<<23|e[16]>>>9,ne=e[16]<<23|e[17]>>>9,L=e[26]<<25|e[27]>>>7,F=e[27]<<25|e[26]>>>7,w=e[36]<<21|e[37]>>>11,v=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,X=e[46]<<24|e[47]>>>8,H=e[8]<<27|e[9]>>>5,G=e[9]<<27|e[8]>>>5,S=e[18]<<20|e[19]>>>12,E=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,ie=e[28]<<7|e[29]>>>25,j=e[38]<<8|e[39]>>>24,U=e[39]<<8|e[38]>>>24,I=e[48]<<14|e[49]>>>18,k=e[49]<<14|e[48]>>>18,e[0]=p^~y&b,e[1]=m^~g&_,e[10]=T^~S&P,e[11]=A^~E&O,e[20]=M^~B&L,e[21]=x^~D&F,e[30]=H^~z&Z,e[31]=G^~V&W,e[40]=ee^~re&oe,e[41]=te^~ne&ie,e[2]=y^~b&w,e[3]=g^~_&v,e[12]=S^~P&R,e[13]=E^~O&C,e[22]=B^~L&j,e[23]=D^~F&U,e[32]=z^~Z&J,e[33]=V^~W&Y,e[42]=re^~oe&se,e[43]=ne^~ie&ae,e[4]=b^~w&I,e[5]=_^~v&k,e[14]=P^~R&$,e[15]=O^~C&N,e[24]=L^~j&q,e[25]=F^~U&K,e[34]=Z^~J&Q,e[35]=W^~Y&X,e[44]=oe^~se&ce,e[45]=ie^~ae&ue,e[6]=w^~I&p,e[7]=v^~k&m,e[16]=R^~$&T,e[17]=C^~N&A,e[26]=j^~q&M,e[27]=U^~K&x,e[36]=J^~Q&H,e[37]=Y^~X&G,e[46]=se^~ce&ee,e[47]=ae^~ue&te,e[8]=I^~p&y,e[9]=k^~m&g,e[18]=$^~T&S,e[19]=N^~A&E,e[28]=q^~M&B,e[29]=K^~x&D,e[38]=Q^~H&z,e[39]=X^~G&V,e[48]=ce^~ee&re,e[49]=ue^~te&ne,e[0]^=RC[n],e[1]^=RC[n+1]},keccak=e=>t=>{var r;if("0x"===t.slice(0,2)){r=[];for(var n=2,o=t.length;n<o;n+=2)r.push(parseInt(t.slice(n,n+2),16))}else r=t;return update(Keccak(e),r)},keccak256$1=keccak(256);function equalBytes(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function generate(){const e=secp256k1.utils.randomPrivateKey();return{privateKey:e,publicKey:secp256k1.getPublicKey(e,!0)}}async function generateAsync(){return Promise.resolve(generate())}function fromBytes(e){const t=new Uint8Array(e);return{privateKey:t,publicKey:secp256k1.getPublicKey(t,!0)}}function sign(e,t){const r=encode$5(t),n=decode$4(keccak256$1(`0x${r}`));return secp256k1.sign(n,e).toCompactRawBytes()}function verify(e,t,r){const n=encode$5(t),o=decode$4(keccak256$1(`0x${n}`)),i=BigInt("0x"+encode$5(r.subarray(0,32))),s=BigInt("0x"+encode$5(r.subarray(32,64)));return secp256k1.verify({r:i,s:s},o,e)}function getRecoveryId(e,t,r){const n=secp256k1.getPublicKey(e,!1),o=decode$4(keccak256$1(`0x${encode$5(r)}`));for(let i=0;i<4;i++)try{const e=secp256k1.Signature.fromCompact(t).addRecoveryBit(i);if(equalBytes(e.recoverPublicKey(o).toRawBytes(!1),n))return i}catch{}throw new Error("Unexpected error: could not construct a recoverable key.")}const legacyDerPrefix="302d300706052b8104000a032200",legacyDerPrefixBytes=decode$4(legacyDerPrefix),derPrefix$1="3036301006072a8648ce3d020106052b8104000a032200",derPrefixBytes$1=decode$4(derPrefix$1);class EcdsaPublicKey extends Key{constructor(e){super(),this._keyData=e}get _type(){return"secp256k1"}static fromBytes(e){return 33===e.length?EcdsaPublicKey.fromBytesRaw(e):EcdsaPublicKey.fromBytesDer(e)}static fromBytesDer(e){let t;switch(e.length){case 47:t=e.subarray(legacyDerPrefixBytes.length);break;case 56:t=e.subarray(derPrefixBytes$1.length,derPrefixBytes$1.length+33);break;default:try{t=secp256k1.ProjectivePoint.fromHex(e.subarray(derPrefixBytes$1.length)).toRawBytes(!0)}catch(r){throw new BadKeyError("cannot decode ECDSA public key from this DER format")}}if(!t||0===t.length)throw new BadKeyError("cannot decode ECDSA public key from this DER format");return new EcdsaPublicKey(t)}static fromBytesRaw(e){if(33!==e.length)throw new BadKeyError(`invalid public key length: ${e.length} bytes`);return new EcdsaPublicKey(e)}static fromString(e){return EcdsaPublicKey.fromBytes(decode$4(e))}verify(e,t){return verify(this._keyData,e,t)}toBytesDer(){const e=new Uint8Array(legacyDerPrefixBytes.length+this._keyData.length);return e.set(legacyDerPrefixBytes,0),e.set(this._keyData,legacyDerPrefixBytes.length),e}toBytesRaw(){return new Uint8Array(this._keyData.subarray())}toEthereumAddress(){const e=secp256k1.ProjectivePoint.fromHex(this._keyData).toRawBytes(!1),t=decode$4(keccak256$1(`0x${encode$5(e.subarray(1))}`));return encode$5(t.subarray(12))}equals(e){return arrayEqual(this._keyData,e._keyData)}}const derPrefix="3030020100300706052b8104000a04220420",derPrefixBytes=decode$4(derPrefix),derPrefix2="30540201010420",derPrefixBytes2=decode$4(derPrefix2);class EcdsaPrivateKey{constructor(e,t){this._keyPair=e,this._chainCode=null!=t?t:null}get _type(){return"secp256k1"}static generate(){return new EcdsaPrivateKey(generate())}static async generateAsync(){return new EcdsaPrivateKey(await generateAsync())}static fromBytes(e){return 32===e.length?EcdsaPrivateKey.fromBytesRaw(e):EcdsaPrivateKey.fromBytesDer(e)}static fromBytesDer(e){let t=new Uint8Array;return t=arrayStartsWith(e,derPrefixBytes)?e.subarray(derPrefixBytes.length):e.subarray(derPrefixBytes2.length,derPrefixBytes2.length+32),new EcdsaPrivateKey(fromBytes(t))}static fromBytesRaw(e){return new EcdsaPrivateKey(fromBytes(e))}static fromString(e){return EcdsaPrivateKey.fromBytes(decode$4(e))}static fromStringDer(e){return EcdsaPrivateKey.fromBytesDer(decode$4(e))}static fromStringRaw(e){return EcdsaPrivateKey.fromBytesRaw(decode$4(e))}static async fromSeed(e){const{keyData:t,chainCode:r}=await fromSeed$1(e);return new EcdsaPrivateKey(fromBytes(t),r)}get publicKey(){return new EcdsaPublicKey(this._keyPair.publicKey)}sign(e){return sign(this._keyPair.privateKey,e)}toBytesDer(){const e=new Uint8Array(derPrefixBytes.length+32),t=this._keyPair.privateKey.subarray(0,32),r=32-t.length,n=derPrefixBytes.length+r;return e.set(derPrefixBytes,0),e.set(t,n),e}toBytesRaw(){const e=this._keyPair.privateKey.subarray(-32),t=32-e.length,r=new Uint8Array(32);return r.set(e,t),r}getRecoveryId(e,t){return getRecoveryId(this._keyPair.privateKey,e,t)}}class PublicKey extends Key{constructor(e){super(),this._key=e}get _type(){return this._key._type}static fromBytes(e){let t;try{return new PublicKey(Ed25519PublicKey.fromBytes(e))}catch(r){t=null!=r&&null!=r.message?r.message:""}try{return new PublicKey(EcdsaPublicKey.fromBytes(e))}catch(r){t=null!=r&&null!=r.message?r.message:""}throw new BadKeyError(`public key cannot be decoded from bytes: ${t}`)}static fromBytesED25519(e){return new PublicKey(Ed25519PublicKey.fromBytes(e))}static fromBytesECDSA(e){return new PublicKey(EcdsaPublicKey.fromBytes(e))}static fromString(e){return PublicKey.fromBytes(decode$4(e))}static fromStringED25519(e){return PublicKey.fromBytesED25519(decode$4(e))}static fromStringECDSA(e){return PublicKey.fromBytesECDSA(decode$4(e))}verify(e,t){return this._key.verify(e,t)}verifyTransaction(e){console.log("Deprecated: use `@hashgraph/sdk`.PublicKey instead"),e._requireFrozen(),e.isFrozen()||e.freeze();for(const t of e._signedTransactions)if(null!=t.sigMap&&null!=t.sigMap.sigPair){let e=!1;for(const r of t.sigMap.sigPair){if(arrayEqual(r.pubKeyPrefix,this.toBytesRaw())){e=!0;const n=t.bodyBytes,o=null!=r.ed25519?r.ed25519:r.ECDSASecp256k1;if(!this.verify(n,o))return!1}}if(!e)return!1}return!0}toBytes(){return this._key instanceof Ed25519PublicKey?this.toBytesRaw():this.toBytesDer()}toBytesDer(){return this._key.toBytesDer()}toBytesRaw(){return this._key.toBytesRaw()}toString(){return this.toStringDer()}toStringDer(){return encode$5(this.toBytesDer())}toStringRaw(){return encode$5(this.toBytesRaw())}toEthereumAddress(){if(this._key instanceof EcdsaPublicKey)return this._key.toEthereumAddress();throw new Error("unsupported operation on Ed25519PublicKey")}equals(e){return(this._key instanceof Ed25519PublicKey&&e._key instanceof Ed25519PublicKey||this._key instanceof EcdsaPublicKey&&e._key instanceof EcdsaPublicKey)&&this._key.equals(e._key)}}var sparkMd5={exports:{}},hasRequiredSparkMd5;function requireSparkMd5(){return hasRequiredSparkMd5||(hasRequiredSparkMd5=1,sparkMd5.exports=function(e){var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(e,t){var r=e[0],n=e[1],o=e[2],i=e[3];n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[0]-680876936|0)<<7|r>>>25)+n|0)&n|~r&o)+t[1]-389564586|0)<<12|i>>>20)+r|0)&r|~i&n)+t[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&r)+t[3]-1044525330|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[4]-176418897|0)<<7|r>>>25)+n|0)&n|~r&o)+t[5]+1200080426|0)<<12|i>>>20)+r|0)&r|~i&n)+t[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&r)+t[7]-45705983|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[8]+1770035416|0)<<7|r>>>25)+n|0)&n|~r&o)+t[9]-1958414417|0)<<12|i>>>20)+r|0)&r|~i&n)+t[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&r)+t[11]-1990404162|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&o|~n&i)+t[12]+1804603682|0)<<7|r>>>25)+n|0)&n|~r&o)+t[13]-40341101|0)<<12|i>>>20)+r|0)&r|~i&n)+t[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&r)+t[15]+1236535329|0)<<22|n>>>10)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[1]-165796510|0)<<5|r>>>27)+n|0)&o|n&~o)+t[6]-1069501632|0)<<9|i>>>23)+r|0)&n|r&~n)+t[11]+643717713|0)<<14|o>>>18)+i|0)&r|i&~r)+t[0]-373897302|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[5]-701558691|0)<<5|r>>>27)+n|0)&o|n&~o)+t[10]+38016083|0)<<9|i>>>23)+r|0)&n|r&~n)+t[15]-660478335|0)<<14|o>>>18)+i|0)&r|i&~r)+t[4]-405537848|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[9]+568446438|0)<<5|r>>>27)+n|0)&o|n&~o)+t[14]-1019803690|0)<<9|i>>>23)+r|0)&n|r&~n)+t[3]-187363961|0)<<14|o>>>18)+i|0)&r|i&~r)+t[8]+1163531501|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n&i|o&~i)+t[13]-1444681467|0)<<5|r>>>27)+n|0)&o|n&~o)+t[2]-51403784|0)<<9|i>>>23)+r|0)&n|r&~n)+t[7]+1735328473|0)<<14|o>>>18)+i|0)&r|i&~r)+t[12]-1926607734|0)<<20|n>>>12)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[5]-378558|0)<<4|r>>>28)+n|0)^n^o)+t[8]-2022574463|0)<<11|i>>>21)+r|0)^r^n)+t[11]+1839030562|0)<<16|o>>>16)+i|0)^i^r)+t[14]-35309556|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[1]-1530992060|0)<<4|r>>>28)+n|0)^n^o)+t[4]+1272893353|0)<<11|i>>>21)+r|0)^r^n)+t[7]-155497632|0)<<16|o>>>16)+i|0)^i^r)+t[10]-1094730640|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[13]+681279174|0)<<4|r>>>28)+n|0)^n^o)+t[0]-358537222|0)<<11|i>>>21)+r|0)^r^n)+t[3]-722521979|0)<<16|o>>>16)+i|0)^i^r)+t[6]+76029189|0)<<23|n>>>9)+o|0,n=((n+=((o=((o+=((i=((i+=((r=((r+=(n^o^i)+t[9]-640364487|0)<<4|r>>>28)+n|0)^n^o)+t[12]-421815835|0)<<11|i>>>21)+r|0)^r^n)+t[15]+530742520|0)<<16|o>>>16)+i|0)^i^r)+t[2]-995338651|0)<<23|n>>>9)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[0]-198630844|0)<<6|r>>>26)+n|0)|~o))+t[7]+1126891415|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[14]-1416354905|0)<<15|o>>>17)+i|0)|~r))+t[5]-57434055|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[12]+1700485571|0)<<6|r>>>26)+n|0)|~o))+t[3]-1894986606|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[10]-1051523|0)<<15|o>>>17)+i|0)|~r))+t[1]-2054922799|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[8]+1873313359|0)<<6|r>>>26)+n|0)|~o))+t[15]-30611744|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[6]-1560198380|0)<<15|o>>>17)+i|0)|~r))+t[13]+1309151649|0)<<21|n>>>11)+o|0,n=((n+=((i=((i+=(n^((r=((r+=(o^(n|~i))+t[4]-145523070|0)<<6|r>>>26)+n|0)|~o))+t[11]-1120210379|0)<<10|i>>>22)+r|0)^((o=((o+=(r^(i|~n))+t[2]+718787259|0)<<15|o>>>17)+i|0)|~r))+t[9]-343485551|0)<<21|n>>>11)+o|0,e[0]=r+e[0]|0,e[1]=n+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}function n(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}function o(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return r}function i(e){var t,o,i,s,a,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)r(l,n(e.substring(t-64,t)));for(o=(e=e.substring(t-64)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<o;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(r(l,i),t=0;t<16;t+=1)i[t]=0;return s=(s=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,i[14]=a,i[15]=c,r(l,i),l}function s(e){var t,n,i,s,a,c,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)r(l,o(e.subarray(t-64,t)));for(n=(e=t-64<u?e.subarray(t-64):new Uint8Array(0)).length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(r(l,i),t=0;t<16;t+=1)i[t]=0;return s=(s=8*u).toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(s[2],16),c=parseInt(s[1],16)||0,i[14]=a,i[15]=c,r(l,i),l}function a(e){var r,n="";for(r=0;r<4;r+=1)n+=t[e>>8*r+4&15]+t[e>>8*r&15];return n}function c(e){var t;for(t=0;t<e.length;t+=1)e[t]=a(e[t]);return e.join("")}function u(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function l(e,t){var r,n=e.length,o=new ArrayBuffer(n),i=new Uint8Array(o);for(r=0;r<n;r+=1)i[r]=e.charCodeAt(r);return t?i:o}function d(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function h(e,t,r){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e)),n.set(new Uint8Array(t),e.byteLength),n}function f(e){var t,r=[],n=e.length;for(t=0;t<n-1;t+=2)r.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,r)}function p(){this.reset()}return c(i("hello")),"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return(e=0|e||0)<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(r,n){var o,i,s,a,c=this.byteLength,u=t(r,c),l=c;return n!==e&&(l=t(n,c)),u>l?new ArrayBuffer(0):(o=l-u,i=new ArrayBuffer(o),s=new Uint8Array(i),a=new Uint8Array(this,u,o),s.set(a),i)}}(),p.prototype.append=function(e){return this.appendBinary(u(e)),this},p.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,o=this._buff.length;for(t=64;t<=o;t+=64)r(this._hash,n(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},p.prototype.end=function(e){var t,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=n.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),r=c(this._hash),e&&(r=f(r)),this.reset(),r},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},p.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(e,t){var n,o,i,s=t;if(e[s>>2]|=128<<(s%4<<3),s>55)for(r(this._hash,e),s=0;s<16;s+=1)e[s]=0;n=(n=8*this._length).toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=o,e[15]=i,r(this._hash,e)},p.hash=function(e,t){return p.hashBinary(u(e),t)},p.hashBinary=function(e,t){var r=c(i(e));return t?f(r):r},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(e){var t,n=h(this._buff.buffer,e),i=n.length;for(this._length+=e.byteLength,t=64;t<=i;t+=64)r(this._hash,o(n.subarray(t-64,t)));return this._buff=t-64<i?new Uint8Array(n.buffer.slice(t-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(e){var t,r,n=this._buff,o=n.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=n[t]<<(t%4<<3);return this._finish(i,o),r=c(this._hash),e&&(r=f(r)),this.reset(),r},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var e=p.prototype.getState.call(this);return e.buff=d(e.buff),e},p.ArrayBuffer.prototype.setState=function(e){return e.buff=l(e.buff,!0),p.prototype.setState.call(this,e)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(e,t){var r=c(s(new Uint8Array(e)));return t?f(r):r},p}()),sparkMd5.exports}var sparkMd5Exports=requireSparkMd5();const SparkMD5=getDefaultExportFromCjs(sparkMd5Exports),CipherAlgorithm={Aes128Ctr:"AES-128-CTR",Aes128Cbc:"AES-128-CBC"};async function createCipheriv(e,t,r,n){let o;switch(e.toUpperCase()){case CipherAlgorithm.Aes128Ctr:o={name:"AES-CTR",counter:r,length:128};break;case CipherAlgorithm.Aes128Cbc:o={name:"AES-CBC",iv:r};break;default:throw new Error("(BUG) non-exhaustive switch statement for CipherAlgorithm")}const i=await window.crypto.subtle.importKey("raw",t,o.name,!1,["encrypt"]);return new Uint8Array(await window.crypto.subtle.encrypt(o,i,n))}async function createDecipheriv(e,t,r,n){let o;switch(e.toUpperCase()){case CipherAlgorithm.Aes128Ctr:o={name:"AES-CTR",counter:r,length:128};break;case CipherAlgorithm.Aes128Cbc:o={name:"AES-CBC",iv:r};break;default:throw new Error("(BUG) non-exhaustive switch statement for CipherAlgorithm")}const i=await window.crypto.subtle.importKey("raw",t,o.name,!1,["decrypt"]);let s;try{s=await window.crypto.subtle.decrypt(o,i,n)}catch(a){const e=null!=a&&null!=a.message?a.message:"";throw new Error(`Unable to decrypt: ${e}`)}return new Uint8Array(s)}async function messageDigest(e,t){const r=encode$4(e),n=decode$4(t).slice(0,8),o=SparkMD5.ArrayBuffer.hash(Buffer$1.concat([Buffer$1.from(r),Buffer$1.from(n)]));return Promise.resolve(decode$4(o))}async function deriveKey(e,t,r,n,o){const i="string"==typeof t?encode$4(t):t,s="string"==typeof r?encode$4(r):r;try{const t=await window.crypto.subtle.importKey("raw",i,{name:"PBKDF2",hash:e},!1,["deriveBits"]);return new Uint8Array(await window.crypto.subtle.deriveBits({name:"PBKDF2",hash:e,salt:s,iterations:n},t,o<<3))}catch{throw new Error("(BUG) Non-Exhaustive switch statement for algorithms")}}const HMAC_SHA256="hmac-sha256";async function createKeystore(e,t){const r=262144,n=await bytesAsync(32),o=await deriveKey(HashAlgorithm.Sha256,t,n,r,32),i=await bytesAsync(16),s=await createCipheriv(CipherAlgorithm.Aes128Ctr,o.slice(0,16),i,e),a=await hash(HashAlgorithm.Sha384,o.slice(16),s),c={version:1,crypto:{ciphertext:encode$5(s),cipherparams:{iv:encode$5(i)},cipher:CipherAlgorithm.Aes128Ctr,kdf:"pbkdf2",kdfparams:{dkLen:32,salt:encode$5(n),c:r,prf:HMAC_SHA256},mac:encode$5(a)}};return encode$4(JSON.stringify(c))}async function loadKeystore(e,t){const r=JSON.parse(decode$3(e));if(1!==r.version)throw new BadKeyError(`unsupported keystore version: ${r.version}`);const{ciphertext:n,cipherparams:{iv:o},cipher:i,kdf:s,kdfparams:{dkLen:a,salt:c,c:u,prf:l},mac:d}=r.crypto;if("pbkdf2"!==s)throw new BadKeyError(`unsupported key derivation function:" + ${s}`);if(l!==HMAC_SHA256)throw new BadKeyError(`unsupported key derivation hash function: ${l}`);const h=decode$4(c),f=decode$4(o),p=decode$4(n),m=await deriveKey(HashAlgorithm.Sha256,t,h,u,a),y=decode$4(d),g=await hash(HashAlgorithm.Sha384,m.slice(16),p);if(!y.every((e,t)=>e===g[t]))throw new BadKeyError("HMAC mismatch; passphrase is incorrect");return createDecipheriv(i,m.slice(0,16),f,p)}function decode$2(e){return decodeIncremental(e)[0]}function decodeIncremental(e){const[t,r]=decodeLength(e.subarray(1)),n=r.subarray(0,t),o=r.subarray(t);switch(e[0]){case 2:return[{int:decodeInt(n)},o];case 4:return[{bytes:n},o];case 5:return[{},o];case 6:return[{ident:decodeObjectIdent(n)},o];case 48:return[{seq:decodeSeq(n)},o];default:throw new Error(`unsupported DER type tag: ${e[0]}`)}}function decodeSeq(e){let t=e;const r=[];for(;0!==t.length;){const[e,n]=decodeIncremental(t);r.push(e),t=n}return r}function decodeObjectIdent(e){const t=[Math.floor(e[0]/40),e[0]%40];let r=0;for(const n of e.subarray(1))r*=128,n<128?(r+=n,t.push(r),r=0):r+=127&n;return t.join(".")}function decodeLength(e){if(e[0]<128)return[e[0],e.subarray(1)];const t=e[0]-128,r=e.subarray(1,t+1),n=e.subarray(t+1);return[decodeInt(r),n]}function decodeInt(e){const t=e.length;if(1===t)return e[0];let r=new DataView(e.buffer,e.byteOffset,e.byteLength);if(2===t)return r.getUint16(0,!1);if(3===t){const t=Uint8Array.of(0,...e);r=new DataView(t.buffer,t.byteOffset,t.byteLength)}if(t>4)throw new Error(`unsupported DER integer length of ${t} bytes`);return r.getUint32(0,!1)}class AlgorithmIdentifier{constructor(e){if(!("seq"in e&&e.seq.length>=1&&"ident"in e.seq[0]))throw new Error(`error parsing AlgorithmIdentifier from ${JSON.stringify(e)}`);this.algIdent=e.seq[0].ident,this.parameters=e.seq[1]}toString(){return JSON.stringify(this)}}class PBES2Params{constructor(e){if(!("seq"in e)||2!==e.seq.length)throw new Error(`error parsing PBES2Params from ${JSON.stringify(e)}`);this.kdf=new AlgorithmIdentifier(e.seq[0]),this.encScheme=new AlgorithmIdentifier(e.seq[1])}}class PBKDF2Params{constructor(e){if("seq"in e&&e.seq.length>=2&&"bytes"in e.seq[0]&&"int"in e.seq[1]&&(this.salt=e.seq[0].bytes,this.iterCount=e.seq[1].int,e.seq.length>2))return"seq"in e.seq[2]?void(this.prf=new AlgorithmIdentifier(e.seq[2])):("int"in e.seq[2]&&(this.keyLength=e.seq[2].int),void(4===e.seq.length&&(this.prf=new AlgorithmIdentifier(e.seq[3]))));throw new Error(`error parsing PBKDF2Params from ${JSON.stringify(e)}`)}}class PrivateKeyInfo{constructor(e){if(!("seq"in e)||3!==e.seq.length)throw new Error(`error parsing PrivateKeyInfo from ${JSON.stringify(e)}`);if(!("int"in e.seq[0])||0!==e.seq[0].int)throw new Error(`expected version = 0, got ${JSON.stringify(e.seq[0])}`);if(this.version=0,this.algId=new AlgorithmIdentifier(e.seq[1]),!("bytes"in e.seq[2]))throw new Error(`expected octet string as 3rd element, got ${JSON.stringify(e.seq[2])}`);this.privateKey=e.seq[2].bytes}static parse(e){return new PrivateKeyInfo(decode$2(e))}}class EncryptedPrivateKeyInfo{constructor(e){if("seq"in e&&2===e.seq.length&&"bytes"in e.seq[1])return this.algId=new AlgorithmIdentifier(e.seq[0]),void(this.data=e.seq[1].bytes);throw new Error(`error parsing EncryptedPrivateKeyInfo from ${JSON.stringify(e)}`)}static parse(e){return new EncryptedPrivateKeyInfo(decode$2(e))}async decrypt(e){if("1.2.840.113549.1.5.13"!==this.algId.algIdent||!this.algId.parameters)throw new Error(`unsupported key encryption algorithm: ${this.algId.toString()}`);const t=new PBES2Params(this.algId.parameters);if("1.2.840.113549.1.5.12"!==t.kdf.algIdent||!t.kdf.parameters)throw new Error(`unsupported key derivation function: ${t.kdf.toString()}`);const r=new PBKDF2Params(t.kdf.parameters);if(!r.prf)throw new Error("unsupported PRF HMAC-SHA-1");if("1.2.840.113549.2.9"!==r.prf.algIdent)throw new Error(`unsupported PRF ${r.prf.toString()}`);if("2.16.840.1.101.3.4.1.2"!==t.encScheme.algIdent)throw new Error(`unsupported encryption scheme: ${t.encScheme.toString()}`);if(!t.encScheme.parameters||!("bytes"in t.encScheme.parameters))throw new Error(`expected IV as bytes for AES-128-CBC, got: ${JSON.stringify(t.encScheme.parameters)}`);const n=r.keyLength||16,o=t.encScheme.parameters.bytes,i=await deriveKey(HashAlgorithm.Sha256,e,r.salt,r.iterCount,n),s=await createDecipheriv(CipherAlgorithm.Aes128Cbc,i,o,this.data);return PrivateKeyInfo.parse(s)}}function decode$1(e){return Uint8Array.from(Buffer$1.from(e,"base64"))}
/*!
   * MIT License
   * 
   * Copyright (c) 2017-2024 Peculiar Ventures, LLC
   * 
   * Permission is hereby granted, free of charge, to any person obtaining a copy
   * of this software and associated documentation files (the "Software"), to deal
   * in the Software without restriction, including without limitation the rights
   * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
   * copies of the Software, and to permit persons to whom the Software is
   * furnished to do so, subject to the following conditions:
   * 
   * The above copyright notice and this permission notice shall be included in all
   * copies or substantial portions of the Software.
   * 
   * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
   * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
   * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
   * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
   * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
   * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
   * SOFTWARE.
   * 
   */const ARRAY_BUFFER_NAME="[object ArrayBuffer]";class BufferSourceConverter{static isArrayBuffer(e){return Object.prototype.toString.call(e)===ARRAY_BUFFER_NAME}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const r=BufferSourceConverter.toUint8Array(e),n=BufferSourceConverter.toUint8Array(t);if(r.length!==n.byteLength)return!1;for(let o=0;o<r.length;o++)if(r[o]!==n[o])return!1;return!0}static concat(...e){let t;t=!Array.isArray(e[0])||e[1]instanceof Function?Array.isArray(e[0])&&e[1]instanceof Function?e[0]:e[e.length-1]instanceof Function?e.slice(0,e.length-1):e:e[0];let r=0;for(const i of t)r+=i.byteLength;const n=new Uint8Array(r);let o=0;for(const i of t){const e=this.toUint8Array(i);n.set(e,o),o+=e.length}return e[e.length-1]instanceof Function?this.toView(n,e[e.length-1]):n.buffer}}const STRING_TYPE="string",HEX_REGEX=/^[0-9a-f\s]+$/i,BASE64_REGEX=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,BASE64URL_REGEX=/^[a-zA-Z0-9-_]+$/;class Utf8Converter{static fromString(e){const t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r.buffer}static toString(e){const t=BufferSourceConverter.toUint8Array(e);let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);return decodeURIComponent(escape(r))}}class Utf16Converter{static toString(e,t=!1){const r=BufferSourceConverter.toArrayBuffer(e),n=new DataView(r);let o="";for(let i=0;i<r.byteLength;i+=2){const e=n.getUint16(i,t);o+=String.fromCharCode(e)}return o}static fromString(e,t=!1){const r=new ArrayBuffer(2*e.length),n=new DataView(r);for(let o=0;o<e.length;o++)n.setUint16(2*o,e.charCodeAt(o),t);return r}}class Convert{static isHex(e){return typeof e===STRING_TYPE&&HEX_REGEX.test(e)}static isBase64(e){return typeof e===STRING_TYPE&&BASE64_REGEX.test(e)}static isBase64Url(e){return typeof e===STRING_TYPE&&BASE64URL_REGEX.test(e)}static ToString(e,t="utf8"){const r=BufferSourceConverter.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(r);case"binary":return this.ToBinary(r);case"hex":return this.ToHex(r);case"base64":return this.ToBase64(r);case"base64url":return this.ToBase64Url(r);case"utf16le":return Utf16Converter.toString(r,!0);case"utf16":case"utf16be":return Utf16Converter.toString(r);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromString(e,t="utf8"){if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return Utf16Converter.fromString(e,!0);case"utf16":case"utf16be":return Utf16Converter.fromString(e);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToBase64(e){const t=BufferSourceConverter.toUint8Array(e);if("undefined"!=typeof btoa){const e=this.ToString(t,"binary");return btoa(e)}return Buffer.from(t).toString("base64")}static FromBase64(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Convert.isBase64(t))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Convert.isBase64Url(t))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,t=Convert.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.FromBinary(e);case"utf8":return Utf8Converter.fromString(e);case"utf16":case"utf16be":return Utf16Converter.fromString(e);case"utf16le":case"usc2":return Utf16Converter.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static ToUtf8String(e,t=Convert.DEFAULT_UTF8_ENCODING){switch(t){case"ascii":return this.ToBinary(e);case"utf8":return Utf8Converter.toString(e);case"utf16":case"utf16be":return Utf16Converter.toString(e);case"utf16le":case"usc2":return Utf16Converter.toString(e,!0);default:throw new Error(`Unknown type of encoding '${t}'`)}}static FromBinary(e){const t=e.length,r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);return r.buffer}static ToBinary(e){const t=BufferSourceConverter.toUint8Array(e);let r="";for(let n=0;n<t.length;n++)r+=String.fromCharCode(t[n]);return r}static ToHex(e){const t=BufferSourceConverter.toUint8Array(e);let r="";const n=t.length;for(let o=0;o<n;o++){const e=t[o];e<16&&(r+="0"),r+=e.toString(16)}return r}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!Convert.isHex(t))throw new TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t=`0${t}`);const r=new Uint8Array(t.length/2);for(let n=0;n<t.length;n+=2){const e=t.slice(n,n+2);r[n/2]=parseInt(e,16)}return r.buffer}static ToUtf16String(e,t=!1){return Utf16Converter.toString(e,t)}static FromUtf16String(e,t=!1){return Utf16Converter.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4)for(let r=0;r<t;r++)e+="=";return e}static formatString(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}
/*!
   Copyright (c) Peculiar Ventures, LLC
  */
function utilFromBase(e,t){let r=0;if(1===e.length)return e[0];for(let n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function utilToBase(e,t,r=-1){const n=r;let o=e,i=0,s=Math.pow(2,t);for(let a=1;a<8;a++){if(e<s){let e;if(n<0)e=new ArrayBuffer(a),i=a;else{if(n<a)return new ArrayBuffer(0);e=new ArrayBuffer(n),i=n}const r=new Uint8Array(e);for(let n=a-1;n>=0;n--){const e=Math.pow(2,n*t);r[i-n-1]=Math.floor(o/e),o-=r[i-n-1]*e}return e}s*=Math.pow(2,t)}return new ArrayBuffer(0)}function utilConcatView(...e){let t=0,r=0;for(const i of e)t+=i.length;const n=new ArrayBuffer(t),o=new Uint8Array(n);for(const i of e)o.set(i,r),r+=i.length;return o}function utilDecodeTC(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=255===e[0]&&128&e[1],r=0===e[0]&&!(128&e[1]);(t||r)&&this.warnings.push("Needlessly long format")}const t=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(t);for(let s=0;s<this.valueHex.byteLength;s++)r[s]=0;r[0]=128&e[0];const n=utilFromBase(r,8),o=new ArrayBuffer(this.valueHex.byteLength),i=new Uint8Array(o);for(let s=0;s<this.valueHex.byteLength;s++)i[s]=e[s];i[0]&=127;return utilFromBase(i,8)-n}function utilEncodeTC(e){const t=e<0?-1*e:e;let r=128;for(let n=1;n<8;n++){if(t<=r){if(e<0){const e=utilToBase(r-t,8,n);return new Uint8Array(e)[0]|=128,e}let o=utilToBase(t,8,n),i=new Uint8Array(o);if(128&i[0]){const e=o.slice(0),t=new Uint8Array(e);o=new ArrayBuffer(o.byteLength+1),i=new Uint8Array(o);for(let r=0;r<e.byteLength;r++)i[r+1]=t[r];i[0]=0}return o}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function isEqualBuffer(e,t){if(e.byteLength!==t.byteLength)return!1;const r=new Uint8Array(e),n=new Uint8Array(t);for(let o=0;o<r.length;o++)if(r[o]!==n[o])return!1;return!0}function padNumber(e,t){const r=e.toString(10);if(t<r.length)return"";const n=t-r.length,o=new Array(n);for(let i=0;i<n;i++)o[i]="0";return o.join("").concat(r)}
/*!
   * Copyright (c) 2014, GMO GlobalSign
   * Copyright (c) 2015-2022, Peculiar Ventures
   * All rights reserved.
   * 
   * Author 2014-2019, Yury Strozhevsky
   * 
   * Redistribution and use in source and binary forms, with or without modification,
   * are permitted provided that the following conditions are met:
   * 
   * * Redistributions of source code must retain the above copyright notice, this
   *   list of conditions and the following disclaimer.
   * 
   * * Redistributions in binary form must reproduce the above copyright notice, this
   *   list of conditions and the following disclaimer in the documentation and/or
   *   other materials provided with the distribution.
   * 
   * * Neither the name of the copyright holder nor the names of its
   *   contributors may be used to endorse or promote products derived from
   *   this software without specific prior written permission.
   * 
   * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
   * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
   * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
   * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR
   * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
   * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
   * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON
   * ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
   * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
   * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
   * 
   */function assertBigInt(){if("undefined"==typeof BigInt)throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function concat$2(e){let t=0,r=0;for(let o=0;o<e.length;o++){t+=e[o].byteLength}const n=new Uint8Array(t);for(let o=0;o<e.length;o++){const t=e[o];n.set(new Uint8Array(t),r),r+=t.byteLength}return n.buffer}function checkBufferParams(e,t,r,n){return t instanceof Uint8Array?t.byteLength?r<0?(e.error="Wrong parameter: inputOffset less than zero",!1):n<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-r-n<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}Convert.DEFAULT_UTF8_ENCODING="utf8";class ViewWriter{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return concat$2(this.items)}}const powers2=[new Uint8Array([1])],digitsString="0123456789",EMPTY_STRING="",EMPTY_BUFFER=new ArrayBuffer(0),EMPTY_VIEW=new Uint8Array(0),END_OF_CONTENT_NAME="EndOfContent",OCTET_STRING_NAME="OCTET STRING",BIT_STRING_NAME="BIT STRING";function HexBlock(e){var t;return(t=class extends e{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}constructor(...e){var t;super(...e);const r=e[0]||{};this.isHexOnly=null!==(t=r.isHexOnly)&&void 0!==t&&t,this.valueHexView=r.valueHex?BufferSourceConverter.toUint8Array(r.valueHex):EMPTY_VIEW}fromBER(e,t,r){const n=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!checkBufferParams(this,n,t,r))return-1;const o=t+r;return this.valueHexView=n.subarray(t,o),this.valueHexView.length?(this.blockLength=r,o):(this.warnings.push("Zero buffer length"),t)}toBER(e=!1){return this.isHexOnly?e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",EMPTY_BUFFER)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:Convert.ToHex(this.valueHexView)}}}).NAME="hexBlock",t}class LocalBaseBlock{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}constructor({blockLength:e=0,error:t=EMPTY_STRING,warnings:r=[],valueBeforeDecode:n=EMPTY_VIEW}={}){this.blockLength=e,this.error=t,this.warnings=r,this.valueBeforeDecodeView=BufferSourceConverter.toUint8Array(n)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:Convert.ToHex(this.valueBeforeDecodeView)}}}LocalBaseBlock.NAME="baseBlock";class ValueBlock extends LocalBaseBlock{fromBER(e,t,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}ValueBlock.NAME="valueBlock";class LocalIdentificationBlock extends(HexBlock(LocalBaseBlock)){constructor({idBlock:e={}}={}){var t,r,n,o;super(),e?(this.isHexOnly=null!==(t=e.isHexOnly)&&void 0!==t&&t,this.valueHexView=e.valueHex?BufferSourceConverter.toUint8Array(e.valueHex):EMPTY_VIEW,this.tagClass=null!==(r=e.tagClass)&&void 0!==r?r:-1,this.tagNumber=null!==(n=e.tagNumber)&&void 0!==n?n:-1,this.isConstructed=null!==(o=e.isConstructed)&&void 0!==o&&o):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",EMPTY_BUFFER}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const r=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31,t|=e,r[0]=t}return r.buffer}if(!this.isHexOnly){const r=utilToBase(this.tagNumber,7),n=new Uint8Array(r),o=r.byteLength,i=new Uint8Array(o+1);if(i[0]=31|t,!e){for(let e=0;e<o-1;e++)i[e+1]=128|n[e];i[o]=n[o-1]}return i.buffer}const r=new Uint8Array(this.valueHexView.byteLength+1);if(r[0]=31|t,!e){const e=this.valueHexView;for(let t=0;t<e.length-1;t++)r[t+1]=128|e[t];r[this.valueHexView.byteLength]=e[e.length-1]}return r.buffer}fromBER(e,t,r){const n=BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r))return-1;const o=n.subarray(t,t+r);if(0===o.length)return this.error="Zero buffer length",-1;switch(192&o[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=!(32&~o[0]),this.isHexOnly=!1;const i=31&o[0];if(31!==i)this.tagNumber=i,this.blockLength=1;else{let e=1,t=this.valueHexView=new Uint8Array(255),r=255;for(;128&o[e];){if(t[e-1]=127&o[e],e++,e>=o.length)return this.error="End of input reached before message was fully decoded",-1;if(e===r){r+=255;const e=new Uint8Array(r);for(let r=0;r<t.length;r++)e[r]=t[r];t=this.valueHexView=new Uint8Array(r)}}this.blockLength=e+1,t[e-1]=127&o[e];const n=new Uint8Array(e);for(let o=0;o<e;o++)n[o]=t[o];t=this.valueHexView=new Uint8Array(e),t.set(n),this.blockLength<=9?this.tagNumber=utilFromBase(t,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}LocalIdentificationBlock.NAME="identificationBlock";class LocalLengthBlock extends LocalBaseBlock{constructor({lenBlock:e={}}={}){var t,r,n;super(),this.isIndefiniteForm=null!==(t=e.isIndefiniteForm)&&void 0!==t&&t,this.longFormUsed=null!==(r=e.longFormUsed)&&void 0!==r&&r,this.length=null!==(n=e.length)&&void 0!==n?n:0}fromBER(e,t,r){const n=BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r))return-1;const o=n.subarray(t,t+r);if(0===o.length)return this.error="Zero buffer length",-1;if(255===o[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===o[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&o[0]),!1===this.longFormUsed)return this.length=o[0],this.blockLength=1,t+this.blockLength;const i=127&o[0];if(i>8)return this.error="Too big integer",-1;if(i+1>o.length)return this.error="End of input reached before message was fully decoded",-1;const s=t+1,a=n.subarray(s,s+i);return 0===a[i-1]&&this.warnings.push("Needlessly long encoded length"),this.length=utilFromBase(a,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=i+1,t+this.blockLength}toBER(e=!1){let t,r;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return t=new ArrayBuffer(1),!1===e&&(r=new Uint8Array(t),r[0]=128),t;if(this.longFormUsed){const n=utilToBase(this.length,8);if(n.byteLength>127)return this.error="Too big length",EMPTY_BUFFER;if(t=new ArrayBuffer(n.byteLength+1),e)return t;const o=new Uint8Array(n);r=new Uint8Array(t),r[0]=128|n.byteLength;for(let e=0;e<n.byteLength;e++)r[e+1]=o[e];return t}return t=new ArrayBuffer(1),!1===e&&(r=new Uint8Array(t),r[0]=this.length),t}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}LocalLengthBlock.NAME="lengthBlock";const typeStore={};class BaseBlock extends LocalBaseBlock{constructor({name:e=EMPTY_STRING,optional:t=!1,primitiveSchema:r,...n}={},o){super(n),this.name=e,this.optional=t,r&&(this.primitiveSchema=r),this.idBlock=new LocalIdentificationBlock(n),this.lenBlock=new LocalLengthBlock(n),this.valueBlock=o?new o(n):new ValueBlock(n)}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),n)}toBER(e,t){const r=t||new ViewWriter;t||prepareIndefiniteForm(this);const n=this.idBlock.toBER(e);if(r.write(n),this.lenBlock.isIndefiniteForm)r.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,r),r.write(new ArrayBuffer(2));else{const t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;const n=this.lenBlock.toBER(e);r.write(n),r.write(t)}return t?EMPTY_BUFFER:r.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return"ascii"===e?this.onAsciiEncoding():Convert.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${Convert.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;return isEqualBuffer(this.toBER(),e.toBER())}}function prepareIndefiniteForm(e){var t;if(e instanceof typeStore.Constructed)for(const r of e.valueBlock.value)prepareIndefiniteForm(r)&&(e.lenBlock.isIndefiniteForm=!0);return!!(null===(t=e.lenBlock)||void 0===t?void 0:t.isIndefiniteForm)}BaseBlock.NAME="BaseBlock";class BaseStringBlock extends BaseBlock{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor({value:e=EMPTY_STRING,...t}={},r){super(t,r),e&&this.fromString(e)}fromBER(e,t,r){const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),n)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}BaseStringBlock.NAME="BaseStringBlock";class LocalPrimitiveValueBlock extends(HexBlock(ValueBlock)){constructor({isHexOnly:e=!0,...t}={}){super(t),this.isHexOnly=e}}var _a$w,_a$v,_a$u,_a$t,_a$s;LocalPrimitiveValueBlock.NAME="PrimitiveValueBlock";class Primitive extends BaseBlock{constructor(e={}){super(e,LocalPrimitiveValueBlock),this.idBlock.isConstructed=!1}}function localChangeType(e,t){if(e instanceof t)return e;const r=new t;return r.idBlock=e.idBlock,r.lenBlock=e.lenBlock,r.warnings=e.warnings,r.valueBeforeDecodeView=e.valueBeforeDecodeView,r}function localFromBER(e,t=0,r=e.length){const n=t;let o=new BaseBlock({},ValueBlock);const i=new LocalBaseBlock;if(!checkBufferParams(i,e,t,r))return o.error=i.error,{offset:-1,result:o};if(!e.subarray(t,t+r).length)return o.error="Zero buffer length",{offset:-1,result:o};let s=o.idBlock.fromBER(e,t,r);if(o.idBlock.warnings.length&&o.warnings.concat(o.idBlock.warnings),-1===s)return o.error=o.idBlock.error,{offset:-1,result:o};if(t=s,r-=o.idBlock.blockLength,s=o.lenBlock.fromBER(e,t,r),o.lenBlock.warnings.length&&o.warnings.concat(o.lenBlock.warnings),-1===s)return o.error=o.lenBlock.error,{offset:-1,result:o};if(t=s,r-=o.lenBlock.blockLength,!o.idBlock.isConstructed&&o.lenBlock.isIndefiniteForm)return o.error="Indefinite length form used for primitive encoding form",{offset:-1,result:o};let a=BaseBlock;if(1===o.idBlock.tagClass){if(o.idBlock.tagNumber>=37&&!1===o.idBlock.isHexOnly)return o.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:o};switch(o.idBlock.tagNumber){case 0:if(o.idBlock.isConstructed&&o.lenBlock.length>0)return o.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:o};a=typeStore.EndOfContent;break;case 1:a=typeStore.Boolean;break;case 2:a=typeStore.Integer;break;case 3:a=typeStore.BitString;break;case 4:a=typeStore.OctetString;break;case 5:a=typeStore.Null;break;case 6:a=typeStore.ObjectIdentifier;break;case 10:a=typeStore.Enumerated;break;case 12:a=typeStore.Utf8String;break;case 13:a=typeStore.RelativeObjectIdentifier;break;case 14:a=typeStore.TIME;break;case 15:return o.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:o};case 16:a=typeStore.Sequence;break;case 17:a=typeStore.Set;break;case 18:a=typeStore.NumericString;break;case 19:a=typeStore.PrintableString;break;case 20:a=typeStore.TeletexString;break;case 21:a=typeStore.VideotexString;break;case 22:a=typeStore.IA5String;break;case 23:a=typeStore.UTCTime;break;case 24:a=typeStore.GeneralizedTime;break;case 25:a=typeStore.GraphicString;break;case 26:a=typeStore.VisibleString;break;case 27:a=typeStore.GeneralString;break;case 28:a=typeStore.UniversalString;break;case 29:a=typeStore.CharacterString;break;case 30:a=typeStore.BmpString;break;case 31:a=typeStore.DATE;break;case 32:a=typeStore.TimeOfDay;break;case 33:a=typeStore.DateTime;break;case 34:a=typeStore.Duration;break;default:{const e=o.idBlock.isConstructed?new typeStore.Constructed:new typeStore.Primitive;e.idBlock=o.idBlock,e.lenBlock=o.lenBlock,e.warnings=o.warnings,o=e}}}else a=o.idBlock.isConstructed?typeStore.Constructed:typeStore.Primitive;return o=localChangeType(o,a),s=o.fromBER(e,t,o.lenBlock.isIndefiniteForm?r:o.lenBlock.length),o.valueBeforeDecodeView=e.subarray(n,n+o.blockLength),{offset:s,result:o}}function fromBER(e){if(!e.byteLength){const e=new BaseBlock({},ValueBlock);return e.error="Input buffer has zero length",{offset:-1,result:e}}return localFromBER(BufferSourceConverter.toUint8Array(e).slice(),0,e.byteLength)}function checkLen(e,t){return e?1:t}_a$w=Primitive,typeStore.Primitive=_a$w,Primitive.NAME="PRIMITIVE";class LocalConstructedValueBlock extends ValueBlock{constructor({value:e=[],isIndefiniteForm:t=!1,...r}={}){super(r),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,r){const n=BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r))return-1;if(this.valueBeforeDecodeView=n.subarray(t,t+r),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let o=t;for(;checkLen(this.isIndefiniteForm,r)>0;){const e=localFromBER(n,o,r);if(-1===e.offset)return this.error=e.result.error,this.warnings.concat(e.result.warnings),-1;if(o=e.offset,this.blockLength+=e.result.blockLength,r-=e.result.blockLength,this.value.push(e.result),this.isIndefiniteForm&&e.result.constructor.NAME===END_OF_CONTENT_NAME)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===END_OF_CONTENT_NAME?this.value.pop():this.warnings.push("No EndOfContent block encoded")),o}toBER(e,t){const r=t||new ViewWriter;for(let n=0;n<this.value.length;n++)this.value[n].toBER(e,r);return t?EMPTY_BUFFER:r.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}LocalConstructedValueBlock.NAME="ConstructedValueBlock";class Constructed extends BaseBlock{constructor(e={}){super(e,LocalConstructedValueBlock),this.idBlock.isConstructed=!0}fromBER(e,t,r){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const n=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?r:this.lenBlock.length);return-1===n?(this.error=this.valueBlock.error,n):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),n)}onAsciiEncoding(){const e=[];for(const r of this.valueBlock.value)e.push(r.toString("ascii").split("\n").map(e=>`  ${e}`).join("\n"));const t=3===this.idBlock.tagClass?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${t} :\n${e.join("\n")}`:`${t} :`}}_a$v=Constructed,typeStore.Constructed=_a$v,Constructed.NAME="CONSTRUCTED";class LocalEndOfContentValueBlock extends ValueBlock{fromBER(e,t,r){return t}toBER(e){return EMPTY_BUFFER}}LocalEndOfContentValueBlock.override="EndOfContentValueBlock";class EndOfContent extends BaseBlock{constructor(e={}){super(e,LocalEndOfContentValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}_a$u=EndOfContent,typeStore.EndOfContent=_a$u,EndOfContent.NAME=END_OF_CONTENT_NAME;class Null extends BaseBlock{constructor(e={}){super(e,ValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,r){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=r,t+r>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+r}toBER(e,t){const r=new ArrayBuffer(2);if(!e){const e=new Uint8Array(r);e[0]=5,e[1]=0}return t&&t.write(r),r}onAsciiEncoding(){return`${this.constructor.NAME}`}}_a$t=Null,typeStore.Null=_a$t,Null.NAME="NULL";class LocalBooleanValueBlock extends(HexBlock(ValueBlock)){get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}constructor({value:e,...t}={}){super(t),t.valueHex?this.valueHexView=BufferSourceConverter.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}fromBER(e,t,r){const n=BufferSourceConverter.toUint8Array(e);return checkBufferParams(this,n,t,r)?(this.valueHexView=n.subarray(t,t+r),r>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,utilDecodeTC.call(this),this.blockLength=r,t+r):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}LocalBooleanValueBlock.NAME="BooleanValueBlock";let Boolean$1=class extends BaseBlock{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(e={}){super(e,LocalBooleanValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};_a$s=Boolean$1,typeStore.Boolean=_a$s,Boolean$1.NAME="BOOLEAN";class LocalOctetStringValueBlock extends(HexBlock(LocalConstructedValueBlock)){constructor({isConstructed:e=!1,...t}={}){super(t),this.isConstructed=e}fromBER(e,t,r){let n=0;if(this.isConstructed){if(this.isHexOnly=!1,n=LocalConstructedValueBlock.prototype.fromBER.call(this,e,t,r),-1===n)return n;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.NAME;if(t===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(t!==OCTET_STRING_NAME)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,n=super.fromBER(e,t,r),this.blockLength=r;return n}toBER(e,t){return this.isConstructed?LocalConstructedValueBlock.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}var _a$r,_a$q,_a$p,_a$o,_a$n,_a$m,_a$l,_a$k,_a$j;LocalOctetStringValueBlock.NAME="OctetStringValueBlock";class OctetString extends BaseBlock{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n,o;null!==(n=r.isConstructed)&&void 0!==n||(r.isConstructed=!!(null===(o=r.value)||void 0===o?void 0:o.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},LocalOctetStringValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,r){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===r)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){const n=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+r);try{if(n.byteLength){const e=localFromBER(n,0,n.byteLength);-1!==e.offset&&e.offset===r&&(this.valueBlock.value=[e.result])}}catch{}}return super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Constructed.prototype.onAsciiEncoding.call(this);return`${this.constructor.NAME} : ${Convert.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const t of this.valueBlock.value)t instanceof _a$r&&e.push(t.valueBlock.valueHexView);return BufferSourceConverter.concat(e)}}_a$r=OctetString,typeStore.OctetString=_a$r,OctetString.NAME=OCTET_STRING_NAME;class LocalBitStringValueBlock extends(HexBlock(LocalConstructedValueBlock)){constructor({unusedBits:e=0,isConstructed:t=!1,...r}={}){super(r),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,r){if(!r)return t;let n=-1;if(this.isConstructed){if(n=LocalConstructedValueBlock.prototype.fromBER.call(this,e,t,r),-1===n)return n;for(const e of this.value){const t=e.constructor.NAME;if(t===END_OF_CONTENT_NAME){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(t!==BIT_STRING_NAME)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const r=e.valueBlock;if(this.unusedBits>0&&r.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=r.unusedBits}return n}const o=BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,o,t,r))return-1;const i=o.subarray(t,t+r);if(this.unusedBits=i[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const e=i.subarray(1);try{if(e.byteLength){const t=localFromBER(e,0,e.byteLength);-1!==t.offset&&t.offset===r-1&&(this.value=[t.result])}}catch{}}return this.valueHexView=i.subarray(1),this.blockLength=i.length,t+r}toBER(e,t){if(this.isConstructed)return LocalConstructedValueBlock.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return EMPTY_BUFFER;const r=new Uint8Array(this.valueHexView.length+1);return r[0]=this.unusedBits,r.set(this.valueHexView,1),r.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}LocalBitStringValueBlock.NAME="BitStringValueBlock";class BitString extends BaseBlock{constructor({idBlock:e={},lenBlock:t={},...r}={}){var n,o;null!==(n=r.isConstructed)&&void 0!==n||(r.isConstructed=!!(null===(o=r.value)||void 0===o?void 0:o.length)),super({idBlock:{isConstructed:r.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!r.isIndefiniteForm},...r},LocalBitStringValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,r){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return Constructed.prototype.onAsciiEncoding.call(this);{const e=[],t=this.valueBlock.valueHexView;for(const n of t)e.push(n.toString(2).padStart(8,"0"));const r=e.join("");return`${this.constructor.NAME} : ${r.substring(0,r.length-this.valueBlock.unusedBits)}`}}}function viewAdd(e,t){const r=new Uint8Array([0]),n=new Uint8Array(e),o=new Uint8Array(t);let i=n.slice(0);const s=i.length-1,a=o.slice(0),c=a.length-1;let u=0;let l=0;for(let d=c<s?s:c;d>=0;d--,l++){if(!0==l<a.length)u=i[s-l]+a[c-l]+r[0];else u=i[s-l]+r[0];if(r[0]=u/10,!0==l>=i.length)i=utilConcatView(new Uint8Array([u%10]),i);else i[s-l]=u%10}return r[0]>0&&(i=utilConcatView(r,i)),i}function power2(e){if(e>=powers2.length)for(let t=powers2.length;t<=e;t++){const e=new Uint8Array([0]);let r=powers2[t-1].slice(0);for(let t=r.length-1;t>=0;t--){const n=new Uint8Array([(r[t]<<1)+e[0]]);e[0]=n[0]/10,r[t]=n[0]%10}e[0]>0&&(r=utilConcatView(e,r)),powers2.push(r)}return powers2[e]}function viewSub(e,t){let r=0;const n=new Uint8Array(e),o=new Uint8Array(t),i=n.slice(0),s=i.length-1,a=o.slice(0),c=a.length-1;let u,l=0;for(let d=c;d>=0;d--,l++)if(u=i[s-l]-a[c-l]-r,!0==u<0)r=1,i[s-l]=u+10;else r=0,i[s-l]=u;if(r>0)for(let d=s-c+1;d>=0;d--,l++){if(u=i[s-l]-r,!(u<0)){r=0,i[s-l]=u;break}r=1,i[s-l]=u+10}return i.slice()}_a$q=BitString,typeStore.BitString=_a$q,BitString.NAME=BIT_STRING_NAME;class LocalIntegerValueBlock extends(HexBlock(ValueBlock)){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=utilDecodeTC.call(this)))}constructor({value:e,...t}={}){super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),void 0!==e&&(this.valueDec=e)}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(utilEncodeTC(e))}get valueDec(){return this._valueDec}fromDER(e,t,r,n=0){const o=this.fromBER(e,t,r);if(-1===o)return o;const i=this.valueHexView;return 0===i[0]&&128&i[1]?this.valueHexView=i.subarray(1):0!==n&&i.length<n&&(n-i.length>1&&(n=i.length+1),this.valueHexView=i.subarray(n-i.length)),o}toDER(e=!1){const t=this.valueHexView;switch(!0){case!!(128&t[0]):{const e=new Uint8Array(this.valueHexView.length+1);e[0]=0,e.set(t,1),this.valueHexView=e}break;case 0===t[0]&&!(128&t[1]):this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(e)}fromBER(e,t,r){const n=super.fromBER(e,t,r);return-1===n||this.setValueHex(),n}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=8*this.valueHexView.length-1;let t,r=new Uint8Array(8*this.valueHexView.length/3),n=0;const o=this.valueHexView;let i="",s=!1;for(let a=o.byteLength-1;a>=0;a--){t=o[a];for(let o=0;o<8;o++){if(!(1&~t))if(n===e)r=viewSub(power2(n),r),i="-";else r=viewAdd(r,power2(n));n++,t>>=1}}for(let a=0;a<r.length;a++)r[a]&&(s=!0),s&&(i+=digitsString.charAt(r[a]));return!1===s&&(i+=digitsString.charAt(0)),i}}_a$p=LocalIntegerValueBlock,LocalIntegerValueBlock.NAME="IntegerValueBlock",Object.defineProperty(_a$p.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class Integer extends BaseBlock{constructor(e={}){super(e,LocalIntegerValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return assertBigInt(),BigInt(this.valueBlock.toString())}static fromBigInt(e){assertBigInt();const t=BigInt(e),r=new ViewWriter,n=t.toString(16).replace(/^-/,""),o=new Uint8Array(Convert.FromHex(n));if(t<0){const e=new Uint8Array(o.length+(128&o[0]?1:0));e[0]|=128;const n=BigInt(`0x${Convert.ToHex(e)}`)+t,i=BufferSourceConverter.toUint8Array(Convert.FromHex(n.toString(16)));i[0]|=128,r.write(i)}else 128&o[0]&&r.write(new Uint8Array([0])),r.write(o);return new _a$o({valueHex:r.final()})}convertToDER(){const e=new _a$o({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new _a$o({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}_a$o=Integer,typeStore.Integer=_a$o,Integer.NAME="INTEGER";class Enumerated extends Integer{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}_a$n=Enumerated,typeStore.Enumerated=_a$n,Enumerated.NAME="ENUMERATED";class LocalSidValueBlock extends(HexBlock(ValueBlock)){constructor({valueDec:e=-1,isFirstSid:t=!1,...r}={}){super(r),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,r){if(!r)return t;const n=BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r))return-1;const o=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let s=0;s<r&&(this.valueHexView[s]=127&o[s],this.blockLength++,128&o[s]);s++);const i=new Uint8Array(this.blockLength);for(let s=0;s<this.blockLength;s++)i[s]=this.valueHexView[s];return this.valueHexView=i,128&o[this.blockLength-1]?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){assertBigInt();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const r=new Uint8Array(t.length/7);for(let n=0;n<r.length;n++)r[n]=parseInt(t.slice(7*n,7*n+7),2)+(n+1<r.length?128:0);this.fromBER(r.buffer,0,r.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView,r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}const t=utilToBase(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",EMPTY_BUFFER;const r=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t),n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=128|e[t];r[n]=e[n]}return r}toString(){let e="";if(this.isHexOnly)e=Convert.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}LocalSidValueBlock.NAME="sidBlock";class LocalObjectIdentifierValueBlock extends ValueBlock{constructor({value:e=EMPTY_STRING,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let n=t;for(;r>0;){const t=new LocalSidValueBlock;if(n=t.fromBER(e,n,r),-1===n)return this.blockLength=0,this.error=t.error,n;0===this.value.length&&(t.isFirstSid=!0),this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return n}toBER(e){const t=[];for(let r=0;r<this.value.length;r++){const n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,EMPTY_BUFFER;t.push(n)}return concat$2(t)}fromString(e){this.value=[];let t=0,r=0,n="",o=!1;do{if(r=e.indexOf(".",t),n=-1===r?e.substring(t):e.substring(t,r),t=r+1,o){const e=this.value[0];let t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:return void(this.value=[])}const r=parseInt(n,10);if(isNaN(r))return;e.valueDec=r+t,o=!1}else{const e=new LocalSidValueBlock;if(n>Number.MAX_SAFE_INTEGER){assertBigInt();const t=BigInt(n);e.valueBigInt=t}else if(e.valueDec=parseInt(n,10),isNaN(e.valueDec))return;this.value.length||(e.isFirstSid=!0,o=!0),this.value.push(e)}}while(-1!==r)}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();0!==r&&(e=`${e}.`),t?(n=`{${n}}`,this.value[r].isFirstSid?e=`2.{${n} - 80}`:e+=n):e+=n}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}LocalObjectIdentifierValueBlock.NAME="ObjectIdentifierValueBlock";class ObjectIdentifier extends BaseBlock{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,LocalObjectIdentifierValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$m=ObjectIdentifier,typeStore.ObjectIdentifier=_a$m,ObjectIdentifier.NAME="OBJECT IDENTIFIER";class LocalRelativeSidValueBlock extends(HexBlock(LocalBaseBlock)){constructor({valueDec:e=0,...t}={}){super(t),this.valueDec=e}fromBER(e,t,r){if(0===r)return t;const n=BufferSourceConverter.toUint8Array(e);if(!checkBufferParams(this,n,t,r))return-1;const o=n.subarray(t,t+r);this.valueHexView=new Uint8Array(r);for(let s=0;s<r&&(this.valueHexView[s]=127&o[s],this.blockLength++,128&o[s]);s++);const i=new Uint8Array(this.blockLength);for(let s=0;s<this.blockLength;s++)i[s]=this.valueHexView[s];return this.valueHexView=i,128&o[this.blockLength-1]?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=utilFromBase(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView,r=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)r[e]=128|t[e];return r[this.blockLength-1]=t[this.blockLength-1],r.buffer}const t=utilToBase(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",EMPTY_BUFFER;const r=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t),n=t.byteLength-1;for(let t=0;t<n;t++)r[t]=128|e[t];r[n]=e[n]}return r.buffer}toString(){let e="";return e=this.isHexOnly?Convert.ToHex(this.valueHexView):this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}LocalRelativeSidValueBlock.NAME="relativeSidBlock";class LocalRelativeObjectIdentifierValueBlock extends ValueBlock{constructor({value:e=EMPTY_STRING,...t}={}){super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,r){let n=t;for(;r>0;){const t=new LocalRelativeSidValueBlock;if(n=t.fromBER(e,n,r),-1===n)return this.blockLength=0,this.error=t.error,n;this.blockLength+=t.blockLength,r-=t.blockLength,this.value.push(t)}return n}toBER(e,t){const r=[];for(let n=0;n<this.value.length;n++){const t=this.value[n].toBER(e);if(0===t.byteLength)return this.error=this.value[n].error,EMPTY_BUFFER;r.push(t)}return concat$2(r)}fromString(e){this.value=[];let t=0,r=0,n="";do{r=e.indexOf(".",t),n=-1===r?e.substring(t):e.substring(t,r),t=r+1;const o=new LocalRelativeSidValueBlock;if(o.valueDec=parseInt(n,10),isNaN(o.valueDec))return!0;this.value.push(o)}while(-1!==r);return!0}toString(){let e="",t=!1;for(let r=0;r<this.value.length;r++){t=this.value[r].isHexOnly;let n=this.value[r].toString();0!==r&&(e=`${e}.`),t?(n=`{${n}}`,e+=n):e+=n}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}LocalRelativeObjectIdentifierValueBlock.NAME="RelativeObjectIdentifierValueBlock";class RelativeObjectIdentifier extends BaseBlock{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(e={}){super(e,LocalRelativeObjectIdentifierValueBlock),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_a$l=RelativeObjectIdentifier,typeStore.RelativeObjectIdentifier=_a$l,RelativeObjectIdentifier.NAME="RelativeObjectIdentifier";class Sequence extends Constructed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}_a$k=Sequence,typeStore.Sequence=_a$k,Sequence.NAME="SEQUENCE";let Set$1=class extends Constructed{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};_a$j=Set$1,typeStore.Set=_a$j,Set$1.NAME="SET";class LocalStringValueBlock extends(HexBlock(ValueBlock)){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=EMPTY_STRING}toJSON(){return{...super.toJSON(),value:this.value}}}LocalStringValueBlock.NAME="StringValueBlock";class LocalSimpleStringValueBlock extends LocalStringValueBlock{}LocalSimpleStringValueBlock.NAME="SimpleStringValueBlock";class LocalSimpleStringBlock extends BaseStringBlock{constructor({...e}={}){super(e,LocalSimpleStringValueBlock)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,BufferSourceConverter.toUint8Array(e))}fromString(e){const t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e.charCodeAt(n);this.valueBlock.value=e}}LocalSimpleStringBlock.NAME="SIMPLE STRING";class LocalUtf8StringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){this.valueBlock.valueHexView=BufferSourceConverter.toUint8Array(e);try{this.valueBlock.value=Convert.ToUtf8String(e)}catch(t){this.warnings.push(`Error during "decodeURIComponent": ${t}, using raw string`),this.valueBlock.value=Convert.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(Convert.FromUtf8String(e)),this.valueBlock.value=e}}var _a$i,_a$h,_a$g,_a$f,_a$e,_a$d,_a$c,_a$b,_a$a,_a$9,_a$8,_a$7,_a$6,_a$5,_a$4;LocalUtf8StringValueBlock.NAME="Utf8StringValueBlock";class Utf8String extends LocalUtf8StringValueBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}_a$i=Utf8String,typeStore.Utf8String=_a$i,Utf8String.NAME="UTF8String";class LocalBmpStringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){this.valueBlock.value=Convert.ToUtf16String(e),this.valueBlock.valueHexView=BufferSourceConverter.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(Convert.FromUtf16String(e))}}LocalBmpStringValueBlock.NAME="BmpStringValueBlock";class BmpString extends LocalBmpStringValueBlock{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}_a$h=BmpString,typeStore.BmpString=_a$h,BmpString.NAME="BMPString";class LocalUniversalStringValueBlock extends LocalSimpleStringBlock{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),r=new Uint8Array(t);for(let n=0;n<r.length;n+=4)r[n]=r[n+3],r[n+1]=r[n+2],r[n+2]=0,r[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length,r=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let n=0;n<t;n++){const t=utilToBase(e.charCodeAt(n),8),o=new Uint8Array(t);if(o.length>4)continue;const i=4-o.length;for(let e=o.length-1;e>=0;e--)r[4*n+e+i]=o[e]}this.valueBlock.value=e}}LocalUniversalStringValueBlock.NAME="UniversalStringValueBlock";class UniversalString extends LocalUniversalStringValueBlock{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}_a$g=UniversalString,typeStore.UniversalString=_a$g,UniversalString.NAME="UniversalString";class NumericString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}_a$f=NumericString,typeStore.NumericString=_a$f,NumericString.NAME="NumericString";class PrintableString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}_a$e=PrintableString,typeStore.PrintableString=_a$e,PrintableString.NAME="PrintableString";class TeletexString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}_a$d=TeletexString,typeStore.TeletexString=_a$d,TeletexString.NAME="TeletexString";class VideotexString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}_a$c=VideotexString,typeStore.VideotexString=_a$c,VideotexString.NAME="VideotexString";class IA5String extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}_a$b=IA5String,typeStore.IA5String=_a$b,IA5String.NAME="IA5String";class GraphicString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}_a$a=GraphicString,typeStore.GraphicString=_a$a,GraphicString.NAME="GraphicString";class VisibleString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}_a$9=VisibleString,typeStore.VisibleString=_a$9,VisibleString.NAME="VisibleString";class GeneralString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}_a$8=GeneralString,typeStore.GeneralString=_a$8,GeneralString.NAME="GeneralString";class CharacterString extends LocalSimpleStringBlock{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}_a$7=CharacterString,typeStore.CharacterString=_a$7,CharacterString.NAME="CharacterString";class UTCTime extends VisibleString{constructor({value:e,valueDate:t,...r}={}){if(super(r),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,BufferSourceConverter.toUint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),r=new Uint8Array(t);for(let n=0;n<e.length;n++)r[n]=e.charCodeAt(n);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null===t)return void(this.error="Wrong input string for conversion");const r=parseInt(t[1],10);this.year=r>=50?1900+r:2e3+r,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(e="iso"){if("iso"===e){const e=new Array(7);return e[0]=padNumber(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=padNumber(this.month,2),e[2]=padNumber(this.day,2),e[3]=padNumber(this.hour,2),e[4]=padNumber(this.minute,2),e[5]=padNumber(this.second,2),e[6]="Z",e.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}_a$6=UTCTime,typeStore.UTCTime=_a$6,UTCTime.NAME="UTCTime";class GeneralizedTime extends UTCTime{constructor(e={}){var t;super(e),null!==(t=this.millisecond)&&void 0!==t||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){const e=Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond);return new Date(e)}fromString(e){let t,r=!1,n="",o="",i=0,s=0,a=0;if("Z"===e[e.length-1])n=e.substring(0,e.length-1),r=!0;else{const t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");n=e}if(r){if(-1!==n.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==n.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let e=1,t=n.indexOf("+"),r="";if(-1===t&&(t=n.indexOf("-"),e=-1),-1!==t){if(r=n.substring(t+1),n=n.substring(0,t),2!==r.length&&4!==r.length)throw new Error("Wrong input string for conversion");let o=parseInt(r.substring(0,2),10);if(isNaN(o.valueOf()))throw new Error("Wrong input string for conversion");if(s=e*o,4===r.length){if(o=parseInt(r.substring(2,4),10),isNaN(o.valueOf()))throw new Error("Wrong input string for conversion");a=e*o}}}let c=n.indexOf(".");if(-1===c&&(c=n.indexOf(",")),-1!==c){const e=new Number(`0${n.substring(c)}`);if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");i=e.valueOf(),o=n.substring(0,c)}else o=n;switch(!0){case 8===o.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==c)throw new Error("Wrong input string for conversion");break;case 10===o.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==c){let e=60*i;this.minute=Math.floor(e),e=60*(e-this.minute),this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 12===o.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==c){let e=60*i;this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 14===o.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==c){const e=1e3*i;this.millisecond=Math.floor(e)}break;default:throw new Error("Wrong input string for conversion")}const u=t.exec(o);if(null===u)throw new Error("Wrong input string for conversion");for(let l=1;l<u.length;l++)switch(l){case 1:this.year=parseInt(u[l],10);break;case 2:this.month=parseInt(u[l],10);break;case 3:this.day=parseInt(u[l],10);break;case 4:this.hour=parseInt(u[l],10)+s;break;case 5:this.minute=parseInt(u[l],10)+a;break;case 6:this.second=parseInt(u[l],10);break;default:throw new Error("Wrong input string for conversion")}if(!1===r){const e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDay(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}}toString(e="iso"){if("iso"===e){const e=[];return e.push(padNumber(this.year,4)),e.push(padNumber(this.month,2)),e.push(padNumber(this.day,2)),e.push(padNumber(this.hour,2)),e.push(padNumber(this.minute,2)),e.push(padNumber(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(padNumber(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}_a$5=GeneralizedTime,typeStore.GeneralizedTime=_a$5,GeneralizedTime.NAME="GeneralizedTime";let DATE$1=class extends Utf8String{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}};var _a$3,_a$2,_a$1$1,_a$x;_a$4=DATE$1,typeStore.DATE=_a$4,DATE$1.NAME="DATE";class TimeOfDay extends Utf8String{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}_a$3=TimeOfDay,typeStore.TimeOfDay=_a$3,TimeOfDay.NAME="TimeOfDay";class DateTime extends Utf8String{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}_a$2=DateTime,typeStore.DateTime=_a$2,DateTime.NAME="DateTime";class Duration extends Utf8String{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}_a$1$1=Duration,typeStore.Duration=_a$1$1,Duration.NAME="Duration";let TIME$1=class extends Utf8String{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}};_a$x=TIME$1,typeStore.TIME=_a$x,TIME$1.NAME="TIME";var pem={exports:{}},forge,hasRequiredForge;function requireForge(){return hasRequiredForge?forge:(hasRequiredForge=1,forge={options:{usePureJavaScript:!1}})}var util$1={exports:{}},baseN,hasRequiredBaseN,hasRequiredUtil,hasRequiredPem;function requireBaseN(){if(hasRequiredBaseN)return baseN;hasRequiredBaseN=1;var e={};baseN=e;var t={};return e.encode=function(e,t,r){if("string"!=typeof t)throw new TypeError('"alphabet" must be a string.');if(void 0!==r&&"number"!=typeof r)throw new TypeError('"maxline" must be a number.');var n="";if(e instanceof Uint8Array){var o=0,i=t.length,s=t.charAt(0),a=[0];for(o=0;o<e.length;++o){for(var c=0,u=e[o];c<a.length;++c)u+=a[c]<<8,a[c]=u%i,u=u/i|0;for(;u>0;)a.push(u%i),u=u/i|0}for(o=0;0===e[o]&&o<e.length-1;++o)n+=s;for(o=a.length-1;o>=0;--o)n+=t[a[o]]}else n=function(e,t){var r=0,n=t.length,o=t.charAt(0),i=[0];for(r=0;r<e.length();++r){for(var s=0,a=e.at(r);s<i.length;++s)a+=i[s]<<8,i[s]=a%n,a=a/n|0;for(;a>0;)i.push(a%n),a=a/n|0}var c="";for(r=0;0===e.at(r)&&r<e.length()-1;++r)c+=o;for(r=i.length-1;r>=0;--r)c+=t[i[r]];return c}(e,t);if(r){var l=new RegExp(".{1,"+r+"}","g");n=n.match(l).join("\r\n")}return n},e.decode=function(e,r){if("string"!=typeof e)throw new TypeError('"input" must be a string.');if("string"!=typeof r)throw new TypeError('"alphabet" must be a string.');var n=t[r];if(!n){n=t[r]=[];for(var o=0;o<r.length;++o)n[r.charCodeAt(o)]=o}e=e.replace(/\s/g,"");var i=r.length,s=r.charAt(0),a=[0];for(o=0;o<e.length;o++){var c=n[e.charCodeAt(o)];if(void 0===c)return;for(var u=0,l=c;u<a.length;++u)l+=a[u]*i,a[u]=255&l,l>>=8;for(;l>0;)a.push(255&l),l>>=8}for(var d=0;e[d]===s&&d<e.length-1;++d)a.push(0);return void 0!==Buffer?Buffer.from(a.reverse()):new Uint8Array(a.reverse())},baseN}function requireUtil(){if(hasRequiredUtil)return util$1.exports;hasRequiredUtil=1;var e=requireForge(),t=requireBaseN(),r=util$1.exports=e.util=e.util||{};function n(e){if(8!==e&&16!==e&&24!==e&&32!==e)throw new Error("Only 8, 16, 24, or 32 bits supported: "+e)}function o(e){if(this.data="",this.read=0,"string"==typeof e)this.data=e;else if(r.isArrayBuffer(e)||r.isArrayBufferView(e))if(void 0!==Buffer&&e instanceof Buffer)this.data=e.toString("binary");else{var t=new Uint8Array(e);try{this.data=String.fromCharCode.apply(null,t)}catch(i){for(var n=0;n<t.length;++n)this.putByte(t[n])}}else(e instanceof o||"object"==typeof e&&"string"==typeof e.data&&"number"==typeof e.read)&&(this.data=e.data,this.read=e.read);this._constructedStringLength=0}!function(){if(void 0!==process$1&&process$1.nextTick&&!process$1.browser)return r.nextTick=process$1.nextTick,void("function"==typeof setImmediate?r.setImmediate=setImmediate:r.setImmediate=r.nextTick);if("function"==typeof setImmediate)return r.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(r.nextTick=function(e){return setImmediate(e)});if(r.setImmediate=function(e){setTimeout(e,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){let n=function(r){if(r.source===window&&r.data===e){r.stopPropagation();var n=t.slice();t.length=0,n.forEach(function(e){e()})}};var e="forge.setImmediate",t=[];r.setImmediate=function(r){t.push(r),1===t.length&&window.postMessage(e,"*")},window.addEventListener("message",n,!0)}if("undefined"!=typeof MutationObserver){var n=Date.now(),o=!0,i=document.createElement("div");t=[];new MutationObserver(function(){var e=t.slice();t.length=0,e.forEach(function(e){e()})}).observe(i,{attributes:!0});var s=r.setImmediate;r.setImmediate=function(e){Date.now()-n>15?(n=Date.now(),s(e)):(t.push(e),1===t.length&&i.setAttribute("a",o=!o))}}r.nextTick=r.setImmediate}(),r.isNodejs=void 0!==process$1&&process$1.versions&&process$1.versions.node,r.globalScope=r.isNodejs?commonjsGlobal:"undefined"==typeof self?window:self,r.isArray=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r.isArrayBuffer=function(e){return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer},r.isArrayBufferView=function(e){return e&&r.isArrayBuffer(e.buffer)&&void 0!==e.byteLength},r.ByteBuffer=o,r.ByteStringBuffer=o;r.ByteStringBuffer.prototype._optimizeConstructedString=function(e){this._constructedStringLength+=e,this._constructedStringLength>4096&&(this.data.substr(0,1),this._constructedStringLength=0)},r.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},r.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},r.ByteStringBuffer.prototype.putByte=function(e){return this.putBytes(String.fromCharCode(e))},r.ByteStringBuffer.prototype.fillWithByte=function(e,t){e=String.fromCharCode(e);for(var r=this.data;t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return this.data=r,this._optimizeConstructedString(t),this},r.ByteStringBuffer.prototype.putBytes=function(e){return this.data+=e,this._optimizeConstructedString(e.length),this},r.ByteStringBuffer.prototype.putString=function(e){return this.putBytes(r.encodeUtf8(e))},r.ByteStringBuffer.prototype.putInt16=function(e){return this.putBytes(String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},r.ByteStringBuffer.prototype.putInt24=function(e){return this.putBytes(String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},r.ByteStringBuffer.prototype.putInt32=function(e){return this.putBytes(String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e))},r.ByteStringBuffer.prototype.putInt16Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255))},r.ByteStringBuffer.prototype.putInt24Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255))},r.ByteStringBuffer.prototype.putInt32Le=function(e){return this.putBytes(String.fromCharCode(255&e)+String.fromCharCode(e>>8&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>24&255))},r.ByteStringBuffer.prototype.putInt=function(e,t){n(t);var r="";do{t-=8,r+=String.fromCharCode(e>>t&255)}while(t>0);return this.putBytes(r)},r.ByteStringBuffer.prototype.putSignedInt=function(e,t){return e<0&&(e+=2<<t-1),this.putInt(e,t)},r.ByteStringBuffer.prototype.putBuffer=function(e){return this.putBytes(e.getBytes())},r.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},r.ByteStringBuffer.prototype.getInt16=function(){var e=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,e},r.ByteStringBuffer.prototype.getInt24=function(){var e=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,e},r.ByteStringBuffer.prototype.getInt32=function(){var e=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,e},r.ByteStringBuffer.prototype.getInt16Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,e},r.ByteStringBuffer.prototype.getInt24Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,e},r.ByteStringBuffer.prototype.getInt32Le=function(){var e=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,e},r.ByteStringBuffer.prototype.getInt=function(e){n(e);var t=0;do{t=(t<<8)+this.data.charCodeAt(this.read++),e-=8}while(e>0);return t},r.ByteStringBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},r.ByteStringBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},r.ByteStringBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},r.ByteStringBuffer.prototype.at=function(e){return this.data.charCodeAt(this.read+e)},r.ByteStringBuffer.prototype.setAt=function(e,t){return this.data=this.data.substr(0,this.read+e)+String.fromCharCode(t)+this.data.substr(this.read+e+1),this},r.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},r.ByteStringBuffer.prototype.copy=function(){var e=r.createBuffer(this.data);return e.read=this.read,e},r.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},r.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},r.ByteStringBuffer.prototype.truncate=function(e){var t=Math.max(0,this.length()-e);return this.data=this.data.substr(this.read,t),this.read=0,this},r.ByteStringBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.length;++t){var r=this.data.charCodeAt(t);r<16&&(e+="0"),e+=r.toString(16)}return e},r.ByteStringBuffer.prototype.toString=function(){return r.decodeUtf8(this.bytes())},r.DataBuffer=function(e,t){t=t||{},this.read=t.readOffset||0,this.growSize=t.growSize||1024;var n=r.isArrayBuffer(e),o=r.isArrayBufferView(e);if(n||o)return this.data=n?new DataView(e):new DataView(e.buffer,e.byteOffset,e.byteLength),void(this.write="writeOffset"in t?t.writeOffset:this.data.byteLength);this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!=e&&this.putBytes(e),"writeOffset"in t&&(this.write=t.writeOffset)},r.DataBuffer.prototype.length=function(){return this.write-this.read},r.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},r.DataBuffer.prototype.accommodate=function(e,t){if(this.length()>=e)return this;t=Math.max(t||this.growSize,e);var r=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),n=new Uint8Array(this.length()+t);return n.set(r),this.data=new DataView(n.buffer),this},r.DataBuffer.prototype.putByte=function(e){return this.accommodate(1),this.data.setUint8(this.write++,e),this},r.DataBuffer.prototype.fillWithByte=function(e,t){this.accommodate(t);for(var r=0;r<t;++r)this.data.setUint8(e);return this},r.DataBuffer.prototype.putBytes=function(e,t){if(r.isArrayBufferView(e)){var n=(o=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)).byteLength-o.byteOffset;return this.accommodate(n),new Uint8Array(this.data.buffer,this.write).set(o),this.write+=n,this}if(r.isArrayBuffer(e)){var o=new Uint8Array(e);return this.accommodate(o.byteLength),new Uint8Array(this.data.buffer).set(o,this.write),this.write+=o.byteLength,this}if(e instanceof r.DataBuffer||"object"==typeof e&&"number"==typeof e.read&&"number"==typeof e.write&&r.isArrayBufferView(e.data)){o=new Uint8Array(e.data.byteLength,e.read,e.length());return this.accommodate(o.byteLength),new Uint8Array(e.data.byteLength,this.write).set(o),this.write+=o.byteLength,this}if(e instanceof r.ByteStringBuffer&&(e=e.data,t="binary"),t=t||"binary","string"==typeof e){var i;if("hex"===t)return this.accommodate(Math.ceil(e.length/2)),i=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.hex.decode(e,i,this.write),this;if("base64"===t)return this.accommodate(3*Math.ceil(e.length/4)),i=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.base64.decode(e,i,this.write),this;if("utf8"===t&&(e=r.encodeUtf8(e),t="binary"),"binary"===t||"raw"===t)return this.accommodate(e.length),i=new Uint8Array(this.data.buffer,this.write),this.write+=r.binary.raw.decode(i),this;if("utf16"===t)return this.accommodate(2*e.length),i=new Uint16Array(this.data.buffer,this.write),this.write+=r.text.utf16.encode(i),this;throw new Error("Invalid encoding: "+t)}throw Error("Invalid parameter: "+e)},r.DataBuffer.prototype.putBuffer=function(e){return this.putBytes(e),e.clear(),this},r.DataBuffer.prototype.putString=function(e){return this.putBytes(e,"utf16")},r.DataBuffer.prototype.putInt16=function(e){return this.accommodate(2),this.data.setInt16(this.write,e),this.write+=2,this},r.DataBuffer.prototype.putInt24=function(e){return this.accommodate(3),this.data.setInt16(this.write,e>>8&65535),this.data.setInt8(this.write,e>>16&255),this.write+=3,this},r.DataBuffer.prototype.putInt32=function(e){return this.accommodate(4),this.data.setInt32(this.write,e),this.write+=4,this},r.DataBuffer.prototype.putInt16Le=function(e){return this.accommodate(2),this.data.setInt16(this.write,e,!0),this.write+=2,this},r.DataBuffer.prototype.putInt24Le=function(e){return this.accommodate(3),this.data.setInt8(this.write,e>>16&255),this.data.setInt16(this.write,e>>8&65535,!0),this.write+=3,this},r.DataBuffer.prototype.putInt32Le=function(e){return this.accommodate(4),this.data.setInt32(this.write,e,!0),this.write+=4,this},r.DataBuffer.prototype.putInt=function(e,t){n(t),this.accommodate(t/8);do{t-=8,this.data.setInt8(this.write++,e>>t&255)}while(t>0);return this},r.DataBuffer.prototype.putSignedInt=function(e,t){return n(t),this.accommodate(t/8),e<0&&(e+=2<<t-1),this.putInt(e,t)},r.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},r.DataBuffer.prototype.getInt16=function(){var e=this.data.getInt16(this.read);return this.read+=2,e},r.DataBuffer.prototype.getInt24=function(){var e=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,e},r.DataBuffer.prototype.getInt32=function(){var e=this.data.getInt32(this.read);return this.read+=4,e},r.DataBuffer.prototype.getInt16Le=function(){var e=this.data.getInt16(this.read,!0);return this.read+=2,e},r.DataBuffer.prototype.getInt24Le=function(){var e=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,e},r.DataBuffer.prototype.getInt32Le=function(){var e=this.data.getInt32(this.read,!0);return this.read+=4,e},r.DataBuffer.prototype.getInt=function(e){n(e);var t=0;do{t=(t<<8)+this.data.getInt8(this.read++),e-=8}while(e>0);return t},r.DataBuffer.prototype.getSignedInt=function(e){var t=this.getInt(e),r=2<<e-2;return t>=r&&(t-=r<<1),t},r.DataBuffer.prototype.getBytes=function(e){var t;return e?(e=Math.min(this.length(),e),t=this.data.slice(this.read,this.read+e),this.read+=e):0===e?t="":(t=0===this.read?this.data:this.data.slice(this.read),this.clear()),t},r.DataBuffer.prototype.bytes=function(e){return void 0===e?this.data.slice(this.read):this.data.slice(this.read,this.read+e)},r.DataBuffer.prototype.at=function(e){return this.data.getUint8(this.read+e)},r.DataBuffer.prototype.setAt=function(e,t){return this.data.setUint8(e,t),this},r.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},r.DataBuffer.prototype.copy=function(){return new r.DataBuffer(this)},r.DataBuffer.prototype.compact=function(){if(this.read>0){var e=new Uint8Array(this.data.buffer,this.read),t=new Uint8Array(e.byteLength);t.set(e),this.data=new DataView(t),this.write-=this.read,this.read=0}return this},r.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},r.DataBuffer.prototype.truncate=function(e){return this.write=Math.max(0,this.length()-e),this.read=Math.min(this.read,this.write),this},r.DataBuffer.prototype.toHex=function(){for(var e="",t=this.read;t<this.data.byteLength;++t){var r=this.data.getUint8(t);r<16&&(e+="0"),e+=r.toString(16)}return e},r.DataBuffer.prototype.toString=function(e){var t=new Uint8Array(this.data,this.read,this.length());if("binary"===(e=e||"utf8")||"raw"===e)return r.binary.raw.encode(t);if("hex"===e)return r.binary.hex.encode(t);if("base64"===e)return r.binary.base64.encode(t);if("utf8"===e)return r.text.utf8.decode(t);if("utf16"===e)return r.text.utf16.decode(t);throw new Error("Invalid encoding: "+e)},r.createBuffer=function(e,t){return t=t||"raw",void 0!==e&&"utf8"===t&&(e=r.encodeUtf8(e)),new r.ByteBuffer(e)},r.fillString=function(e,t){for(var r="";t>0;)1&t&&(r+=e),(t>>>=1)>0&&(e+=e);return r},r.xorBytes=function(e,t,r){for(var n="",o="",i="",s=0,a=0;r>0;--r,++s)o=e.charCodeAt(s)^t.charCodeAt(s),a>=10&&(n+=i,i="",a=0),i+=String.fromCharCode(o),++a;return n+=i},r.hexToBytes=function(e){var t="",r=0;for(!0&e.length&&(r=1,t+=String.fromCharCode(parseInt(e[0],16)));r<e.length;r+=2)t+=String.fromCharCode(parseInt(e.substr(r,2),16));return t},r.bytesToHex=function(e){return r.createBuffer(e).toHex()},r.int32ToBytes=function(e){return String.fromCharCode(e>>24&255)+String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)};var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";r.encode64=function(e,t){for(var r,n,o,s="",a="",c=0;c<e.length;)r=e.charCodeAt(c++),n=e.charCodeAt(c++),o=e.charCodeAt(c++),s+=i.charAt(r>>2),s+=i.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=i.charAt((15&n)<<2|o>>6),s+=isNaN(o)?"=":i.charAt(63&o)),t&&s.length>t&&(a+=s.substr(0,t)+"\r\n",s=s.substr(t));return a+=s},r.decode64=function(e){e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var t,r,n,o,i="",a=0;a<e.length;)t=s[e.charCodeAt(a++)-43],r=s[e.charCodeAt(a++)-43],n=s[e.charCodeAt(a++)-43],o=s[e.charCodeAt(a++)-43],i+=String.fromCharCode(t<<2|r>>4),64!==n&&(i+=String.fromCharCode((15&r)<<4|n>>2),64!==o&&(i+=String.fromCharCode((3&n)<<6|o)));return i},r.encodeUtf8=function(e){return unescape(encodeURIComponent(e))},r.decodeUtf8=function(e){return decodeURIComponent(escape(e))},r.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:t.encode,decode:t.decode}},r.binary.raw.encode=function(e){return String.fromCharCode.apply(null,e)},r.binary.raw.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(e.length));for(var o=r=r||0,i=0;i<e.length;++i)n[o++]=e.charCodeAt(i);return t?o-r:n},r.binary.hex.encode=r.bytesToHex,r.binary.hex.decode=function(e,t,r){var n=t;n||(n=new Uint8Array(Math.ceil(e.length/2)));var o=0,i=r=r||0;for(1&e.length&&(o=1,n[i++]=parseInt(e[0],16));o<e.length;o+=2)n[i++]=parseInt(e.substr(o,2),16);return t?i-r:n},r.binary.base64.encode=function(e,t){for(var r,n,o,s="",a="",c=0;c<e.byteLength;)r=e[c++],n=e[c++],o=e[c++],s+=i.charAt(r>>2),s+=i.charAt((3&r)<<4|n>>4),isNaN(n)?s+="==":(s+=i.charAt((15&n)<<2|o>>6),s+=isNaN(o)?"=":i.charAt(63&o)),t&&s.length>t&&(a+=s.substr(0,t)+"\r\n",s=s.substr(t));return a+=s},r.binary.base64.decode=function(e,t,r){var n,o,i,a,c=t;c||(c=new Uint8Array(3*Math.ceil(e.length/4))),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var u=0,l=r=r||0;u<e.length;)n=s[e.charCodeAt(u++)-43],o=s[e.charCodeAt(u++)-43],i=s[e.charCodeAt(u++)-43],a=s[e.charCodeAt(u++)-43],c[l++]=n<<2|o>>4,64!==i&&(c[l++]=(15&o)<<4|i>>2,64!==a&&(c[l++]=(3&i)<<6|a));return t?l-r:c.subarray(0,l)},r.binary.base58.encode=function(e,t){return r.binary.baseN.encode(e,a,t)},r.binary.base58.decode=function(e,t){return r.binary.baseN.decode(e,a,t)},r.text={utf8:{},utf16:{}},r.text.utf8.encode=function(e,t,n){e=r.encodeUtf8(e);var o=t;o||(o=new Uint8Array(e.length));for(var i=n=n||0,s=0;s<e.length;++s)o[i++]=e.charCodeAt(s);return t?i-n:o},r.text.utf8.decode=function(e){return r.decodeUtf8(String.fromCharCode.apply(null,e))},r.text.utf16.encode=function(e,t,r){var n=t;n||(n=new Uint8Array(2*e.length));for(var o=new Uint16Array(n.buffer),i=r=r||0,s=r,a=0;a<e.length;++a)o[s++]=e.charCodeAt(a),i+=2;return t?i-r:n},r.text.utf16.decode=function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))},r.deflate=function(e,t,n){if(t=r.decode64(e.deflate(r.encode64(t)).rval),n){var o=2;32&t.charCodeAt(1)&&(o=6),t=t.substring(o,t.length-4)}return t},r.inflate=function(e,t,n){var o=e.inflate(r.encode64(t)).rval;return null===o?null:r.decode64(o)};var c=function(e,t,n){if(!e)throw new Error("WebStorage not available.");var o;if(null===n?o=e.removeItem(t):(n=r.encode64(JSON.stringify(n)),o=e.setItem(t,n)),void 0!==o&&!0!==o.rval){var i=new Error(o.error.message);throw i.id=o.error.id,i.name=o.error.name,i}},u=function(e,t){if(!e)throw new Error("WebStorage not available.");var n=e.getItem(t);if(e.init)if(null===n.rval){if(n.error){var o=new Error(n.error.message);throw o.id=n.error.id,o.name=n.error.name,o}n=null}else n=n.rval;return null!==n&&(n=JSON.parse(r.decode64(n))),n},l=function(e,t,r,n){var o=u(e,t);null===o&&(o={}),o[r]=n,c(e,t,o)},d=function(e,t,r){var n=u(e,t);return null!==n&&(n=r in n?n[r]:null),n},h=function(e,t,r){var n=u(e,t);if(null!==n&&r in n){delete n[r];var o=!0;for(var i in n){o=!1;break}o&&(n=null),c(e,t,n)}},f=function(e,t){c(e,t,null)},p=function(e,t,r){var n,o=null;void 0===r&&(r=["web","flash"]);var i=!1,s=null;for(var a in r){n=r[a];try{if("flash"===n||"both"===n){if(null===t[0])throw new Error("Flash local storage not available.");o=e.apply(this,t),i="flash"===n}"web"!==n&&"both"!==n||(t[0]=localStorage,o=e.apply(this,t),i=!0)}catch(c){s=c}if(i)break}if(!i)throw s;return o};return r.setItem=function(e,t,r,n,o){p(l,arguments,o)},r.getItem=function(e,t,r,n){return p(d,arguments,n)},r.removeItem=function(e,t,r,n){p(h,arguments,n)},r.clearItems=function(e,t,r){p(f,arguments,r)},r.isEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},r.format=function(e){for(var t,r,n=/%./g,o=0,i=[],s=0;t=n.exec(e);){(r=e.substring(s,n.lastIndex-2)).length>0&&i.push(r),s=n.lastIndex;var a=t[0][1];switch(a){case"s":case"o":o<arguments.length?i.push(arguments[1+o++]):i.push("<?>");break;case"%":i.push("%");break;default:i.push("<%"+a+"?>")}}return i.push(e.substring(s)),i.join("")},r.formatNumber=function(e,t,r,n){var o=e,i=isNaN(t=Math.abs(t))?2:t,s=void 0===r?",":r,a=void 0===n?".":n,c=o<0?"-":"",u=parseInt(o=Math.abs(+o||0).toFixed(i),10)+"",l=u.length>3?u.length%3:0;return c+(l?u.substr(0,l)+a:"")+u.substr(l).replace(/(\d{3})(?=\d)/g,"$1"+a)+(i?s+Math.abs(o-u).toFixed(i).slice(2):"")},r.formatSize=function(e){return e=e>=1073741824?r.formatNumber(e/1073741824,2,".","")+" GiB":e>=1048576?r.formatNumber(e/1048576,2,".","")+" MiB":e>=1024?r.formatNumber(e/1024,0)+" KiB":r.formatNumber(e,0)+" bytes"},r.bytesFromIP=function(e){return-1!==e.indexOf(".")?r.bytesFromIPv4(e):-1!==e.indexOf(":")?r.bytesFromIPv6(e):null},r.bytesFromIPv4=function(e){if(4!==(e=e.split(".")).length)return null;for(var t=r.createBuffer(),n=0;n<e.length;++n){var o=parseInt(e[n],10);if(isNaN(o))return null;t.putByte(o)}return t.getBytes()},r.bytesFromIPv6=function(e){for(var t=0,n=2*(8-(e=e.split(":").filter(function(e){return 0===e.length&&++t,!0})).length+t),o=r.createBuffer(),i=0;i<8;++i)if(e[i]&&0!==e[i].length){var s=r.hexToBytes(e[i]);s.length<2&&o.putByte(0),o.putBytes(s)}else o.fillWithByte(0,n),n=0;return o.getBytes()},r.bytesToIP=function(e){return 4===e.length?r.bytesToIPv4(e):16===e.length?r.bytesToIPv6(e):null},r.bytesToIPv4=function(e){if(4!==e.length)return null;for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t.join(".")},r.bytesToIPv6=function(e){if(16!==e.length)return null;for(var t=[],n=[],o=0,i=0;i<e.length;i+=2){for(var s=r.bytesToHex(e[i]+e[i+1]);"0"===s[0]&&"0"!==s;)s=s.substr(1);if("0"===s){var a=n[n.length-1],c=t.length;a&&c===a.end+1?(a.end=c,a.end-a.start>n[o].end-n[o].start&&(o=n.length-1)):n.push({start:c,end:c})}t.push(s)}if(n.length>0){var u=n[o];u.end-u.start>0&&(t.splice(u.start,u.end-u.start+1,""),0===u.start&&t.unshift(""),7===u.end&&t.push(""))}return t.join(":")},r.estimateCores=function(e,t){if("function"==typeof e&&(t=e,e={}),e=e||{},"cores"in r&&!e.update)return t(null,r.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return r.cores=navigator.hardwareConcurrency,t(null,r.cores);if("undefined"==typeof Worker)return r.cores=1,t(null,r.cores);if("undefined"==typeof Blob)return r.cores=2,t(null,r.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(e){var t=Date.now(),r=t+4;self.postMessage({st:t,et:r})})}.toString(),")()"],{type:"application/javascript"}));!function e(o,i,s){if(0===i){var a=Math.floor(o.reduce(function(e,t){return e+t},0)/o.length);return r.cores=Math.max(1,a),URL.revokeObjectURL(n),t(null,r.cores)}!function(e,t){for(var r=[],o=[],i=0;i<e;++i){var s=new Worker(n);s.addEventListener("message",function(n){if(o.push(n.data),o.length===e){for(var i=0;i<e;++i)r[i].terminate();t(null,o)}}),r.push(s)}for(i=0;i<e;++i)r[i].postMessage(i)}(s,function(t,r){o.push(function(e,t){for(var r=[],n=0;n<e;++n)for(var o=t[n],i=r[n]=[],s=0;s<e;++s)if(n!==s){var a=t[s];(o.st>a.st&&o.st<a.et||a.st>o.st&&a.st<o.et)&&i.push(s)}return r.reduce(function(e,t){return Math.max(e,t.length)},0)}(s,r)),e(o,i-1,s)})}([],5,16)},util$1.exports}function requirePem(){if(hasRequiredPem)return pem.exports;hasRequiredPem=1;var e=requireForge();requireUtil();var t=pem.exports=e.pem=e.pem||{};function r(e){for(var t=e.name+": ",r=[],n=function(e,t){return" "+t},o=0;o<e.values.length;++o)r.push(e.values[o].replace(/^(\S+\r\n)/,n));t+=r.join(",")+"\r\n";var i=0,s=-1;for(o=0;o<t.length;++o,++i)if(i>65&&-1!==s){var a=t[s];","===a?(++s,t=t.substr(0,s)+"\r\n "+t.substr(s)):t=t.substr(0,s)+"\r\n"+a+t.substr(s+1),i=o-s-1,s=-1,++o}else" "!==t[o]&&"\t"!==t[o]&&","!==t[o]||(s=o);return t}function n(e){return e.replace(/^\s+/,"")}return t.encode=function(t,n){n=n||{};var o,i="-----BEGIN "+t.type+"-----\r\n";if(t.procType&&(i+=r(o={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]})),t.contentDomain&&(i+=r(o={name:"Content-Domain",values:[t.contentDomain]})),t.dekInfo&&(o={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&o.values.push(t.dekInfo.parameters),i+=r(o)),t.headers)for(var s=0;s<t.headers.length;++s)i+=r(t.headers[s]);return t.procType&&(i+="\r\n"),i+=e.util.encode64(t.body,n.maxline||64)+"\r\n",i+="-----END "+t.type+"-----\r\n"},t.decode=function(t){for(var r,o=[],i=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,s=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,a=/\r?\n/;r=i.exec(t);){var c=r[1];"NEW CERTIFICATE REQUEST"===c&&(c="CERTIFICATE REQUEST");var u={type:c,procType:null,contentDomain:null,dekInfo:null,headers:[],body:e.util.decode64(r[3])};if(o.push(u),r[2]){for(var l=r[2].split(a),d=0;r&&d<l.length;){for(var h=l[d].replace(/\s+$/,""),f=d+1;f<l.length;++f){var p=l[f];if(!/\s/.test(p[0]))break;h+=p,d=f}if(r=h.match(s)){for(var m={name:r[1],values:[]},y=r[2].split(","),g=0;g<y.length;++g)m.values.push(n(y[g]));if(u.procType)if(u.contentDomain||"Content-Domain"!==m.name)if(u.dekInfo||"DEK-Info"!==m.name)u.headers.push(m);else{if(0===m.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');u.dekInfo={algorithm:y[0],parameters:y[1]||null}}else u.contentDomain=y[0]||"";else{if("Proc-Type"!==m.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==m.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');u.procType={version:y[0],type:y[1]}}}++d}if("ENCRYPTED"===u.procType&&!u.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===o.length)throw new Error("Invalid PEM formatted message.");return o},pem.exports}var pemExports=requirePem();const pemForge=getDefaultExportFromCjs(pemExports),ID_ED25519="1.3.101.112";async function readPemED25519(e,t){const r=decode$1(e.replace(/-----BEGIN (.*)-----|-----END (.*)-----|\n|\r/g,""));if(t){let e;try{e=EncryptedPrivateKeyInfo.parse(r)}catch(n){const e=null!=n&&null!=n.message?n.message:"";throw new BadKeyError(`failed to parse encrypted private key: ${e}`)}const o=await e.decrypt(t);let i=null;if(o.algId.algIdent!==ID_ED25519)throw new BadKeyError(`unknown private key algorithm ${o.algId.toString()}`);i=Ed25519PrivateKey;const s=decode$2(o.privateKey);if(!("bytes"in s))throw new BadKeyError(`expected ASN bytes, got ${JSON.stringify(s)}`);return i.fromBytes(s.bytes)}return r.subarray(16)}async function readPemECDSA(e,t){const r=decode$1(e.replace(/-----BEGIN (.*)-----|-----END (.*)-----|\n|\r/g,""));if(t){const r=pemForge.decode(e)[0].dekInfo.parameters,n=decode$4(r),o=e.split("\n"),i=await messageDigest(t,r),s=Buffer$1.from(o.slice(4,o.length-1).join(""),"base64"),a=await createDecipheriv(CipherAlgorithm.Aes128Cbc,i,n,s);return EcdsaPrivateKey.fromBytesDer(a)}return fromBER(r).result.valueBlock.value[1].valueBlock.valueHexView}async function read(e,t){return!!e.includes("BEGIN EC PRIVATE KEY")?readPemECDSA(e,t):readPemED25519(e,t)}function legacy(e,t){const r=new Uint8Array(e.length+8);r.set(e,0);const n=new DataView(r.buffer,r.byteOffset,r.byteLength);0xffffffffff===t?(n.setInt32(e.length+0,255),n.setInt32(e.length+4,-1)):(n.setInt32(e.length+0,t<0?-1:0),n.setInt32(e.length+4,t));const o=Uint8Array.from([255]);return deriveKey(HashAlgorithm.Sha512,r,o,2048,32)}const CACHE={privateKeyConstructor:null,privateKeyFromBytes:null,mnemonicFromString:null};class PrivateKey extends Key{constructor(e){super(),this._key=e}get _type(){return this._key._type}get _chainCode(){return this._key._chainCode}static generateED25519(){return new PrivateKey(Ed25519PrivateKey.generate())}static generateECDSA(){return new PrivateKey(EcdsaPrivateKey.generate())}static generate(){return PrivateKey.generateED25519()}static async generateAsync(){return PrivateKey.generateED25519Async()}static async generateED25519Async(){return new PrivateKey(await Ed25519PrivateKey.generateAsync())}static async generateECDSAAsync(){return new PrivateKey(await EcdsaPrivateKey.generateAsync())}static fromBytes(e){let t;32==e.length&&console.warn("WARNING: Consider using fromStringECDSA() or fromStringED25519() on a HEX-encoded string and fromStringDer() on a HEX-encoded string with DER prefix instead.");try{return new PrivateKey(Ed25519PrivateKey.fromBytes(e))}catch(r){t=null!=r&&null!=r.message?r.message:""}try{return new PrivateKey(EcdsaPrivateKey.fromBytes(e))}catch(r){t=null!=r&&null!=r.message?r.message:""}throw new BadKeyError(`private key cannot be decoded from bytes: ${t}`)}static fromBytesECDSA(e){return new PrivateKey(EcdsaPrivateKey.fromBytes(e))}static fromBytesED25519(e){return new PrivateKey(Ed25519PrivateKey.fromBytes(e))}static fromString(e){return PrivateKey.fromBytes(decode$4(e))}static fromStringECDSA(e){return PrivateKey.fromBytesECDSA(decode$4(e))}static fromStringED25519(e){return PrivateKey.fromBytesED25519(decode$4(e))}static async fromSeedED25519(e){const t=await Ed25519PrivateKey.fromSeed(e);return new PrivateKey(t)}static async fromSeedECDSAsecp256k1(e){const t=await EcdsaPrivateKey.fromSeed(e);return new PrivateKey(t)}static async fromMnemonic(e,t=""){if(null==CACHE.mnemonicFromString)throw new Error("Mnemonic not found in cache");return("string"==typeof e?CACHE.mnemonicFromString(e):e).toEd25519PrivateKey(t)}static async fromKeystore(e,t=""){return PrivateKey.fromBytes(await loadKeystore(e,t))}static async fromPem(e,t=""){const r=await read(e,t);if(r instanceof Ed25519PrivateKey||r instanceof EcdsaPrivateKey)return new PrivateKey(r);const n=!!e.includes("BEGIN EC PRIVATE KEY");return new PrivateKey(n?EcdsaPrivateKey.fromBytes(r):Ed25519PrivateKey.fromBytes(r))}async derive(e){if(null==this._key._chainCode)throw new Error("this private key does not support key derivation");if(this._key instanceof Ed25519PrivateKey){const{keyData:t,chainCode:r}=await derive(this.toBytesRaw(),this._key._chainCode,e);return new PrivateKey(new Ed25519PrivateKey(t,r))}{const{keyData:t,chainCode:r}=await derive$1(this.toBytesRaw(),this._key._chainCode,e);return new PrivateKey(new EcdsaPrivateKey(fromBytes(t),r))}}async legacyDerive(e){const t=await legacy(this.toBytesRaw().subarray(0,32),e),r=this._key.constructor;return new PrivateKey(new r(t))}get publicKey(){return new PublicKey(this._key.publicKey)}sign(e){return this._key.sign(e)}signTransaction(e){if(e.isFrozen()||e.freeze(),1!=e._signedTransactions.length)throw new Error("`PrivateKey.signTransaction()` requires `Transaction` to have a single node `AccountId` set");const t=e._signedTransactions[0],r=encode$5(this.publicKey.toBytesRaw());null==t.sigMap&&(t.sigMap={}),null==t.sigMap.sigPair&&(t.sigMap.sigPair=[]);for(const i of t.sigMap.sigPair)if(null!=i.pubKeyPrefix&&encode$5(i.pubKeyPrefix)===r)switch(this._type){case"ED25519":return i.ed25519;case"secp256k1":return i.ECDSASecp256k1}const n=this.sign(null!=t.bodyBytes?t.bodyBytes:new Uint8Array),o={pubKeyPrefix:this.publicKey.toBytesRaw()};switch(this._type){case"ED25519":o.ed25519=n;break;case"secp256k1":o.ECDSASecp256k1=n}return t.sigMap.sigPair.push(o),e._signerPublicKeys.add(r),n}isDerivable(){return null!=this._key._chainCode}toBytes(){return this._key instanceof Ed25519PrivateKey?this.toBytesRaw():this.toBytesDer()}toBytesDer(){return this._key.toBytesDer()}toBytesRaw(){return this._key.toBytesRaw()}toString(){return this.toStringDer()}toStringDer(){return encode$5(this.toBytesDer())}toStringRaw(){return encode$5(this.toBytesRaw())}toKeystore(e=""){return createKeystore(this.toBytesRaw(),e)}getRecoveryId(e,t,r){if(!(this._key instanceof EcdsaPrivateKey))throw new Error("Invalid key type, must be ECDSA secp256k1.");if(32!==e.length||32!==t.length)throw new Error("Invalid signature components.");const n=new Uint8Array(64);return n.set(e,0),n.set(t,32),this._key.getRecoveryId(n,r)}}CACHE.privateKeyConstructor=e=>new PrivateKey(e),CACHE.privateKeyFromBytes=e=>PrivateKey.fromBytes(e);const BadMnemonicReason=Object.freeze({BadLength:"BadLength",UnknownWords:"UnknownWords",ChecksumMismatch:"ChecksumMismatch"});class BadMnemonicError extends Error{constructor(e,t,r){let n;switch(t){case BadMnemonicReason.BadLength:n="mnemonic is of an unexpected number of words";break;case BadMnemonicReason.ChecksumMismatch:n="checksum byte in mnemonic did not match the rest of the mnemonic";break;case BadMnemonicReason.UnknownWords:n="mnemonic contained words that are not in the standard word list";break;default:throw new Error(`unexpected value ${t.toString()} for 'reason'`)}super(`invalid mnemonic: ${n}`),void 0!==Error.captureStackTrace&&Error.captureStackTrace(this,BadMnemonicError),this.name="BadMnemonicError",this.reason=t,this.mnemonic=e,this.unknownWordIndices=r}}const legacyWords=["aback","abbey","abbot","abide","ablaze","able","aboard","abode","abort","abound","about","above","abroad","abrupt","absent","absorb","absurd","abuse","accent","accept","access","accord","accuse","ace","ache","aching","acid","acidic","acorn","acre","across","act","action","active","actor","actual","acute","adam","adapt","add","added","addict","adept","adhere","adjust","admire","admit","adobe","adopt","adrift","adult","adverb","advice","aerial","afar","affair","affect","afford","afghan","afield","afloat","afraid","afresh","after","again","age","agency","agenda","agent","aghast","agile","ago","agony","agree","agreed","ahead","aid","aide","aim","air","airman","airy","akin","alarm","alaska","albeit","album","ale","alert","alibi","alice","alien","alight","align","alike","alive","alkali","all","alley","allied","allow","alloy","ally","almond","almost","aloft","alone","along","aloof","aloud","alpha","alpine","also","altar","alter","always","amaze","amazon","amber","ambush","amen","amend","amid","amidst","amiss","among","amount","ample","amuse","anchor","and","andrew","anew","angel","anger","angle","angry","animal","ankle","annoy","annual","answer","anthem","any","anyhow","anyway","apart","apathy","apex","apiece","appeal","appear","apple","apply","april","apron","arab","arcade","arcane","arch","arctic","ardent","are","area","argue","arid","arise","ark","arm","armful","army","aroma","around","arouse","array","arrest","arrive","arrow","arson","art","artery","artful","artist","ascent","ash","ashen","ashore","aside","ask","asleep","aspect","assay","assent","assert","assess","asset","assign","assist","assume","assure","asthma","astute","asylum","ate","athens","atlas","atom","atomic","attach","attack","attain","attend","attic","auburn","audio","audit","august","aunt","auntie","aura","austin","author","auto","autumn","avail","avenge","avenue","avert","avid","avoid","await","awake","awaken","award","aware","awash","away","awful","awhile","axe","axes","axiom","axis","axle","aye","babe","baby","bach","back","backup","bacon","bad","badge","badly","bag","baggy","bail","bait","bake","baker","bakery","bald","ball","ballad","ballet","ballot","baltic","bamboo","ban","banal","banana","band","bang","bank","bar","barber","bare","barely","barge","bark","barley","barn","baron","barrel","barren","basalt","base","basic","basil","basin","basis","basket","bass","bat","batch","bath","baton","battle","bay","beach","beacon","beak","beam","bean","bear","beard","beast","beat","beauty","become","bed","beech","beef","beefy","beep","beer","beet","beetle","before","beg","beggar","begin","behalf","behave","behind","beige","being","belief","bell","belly","belong","below","belt","bench","bend","benign","bent","berlin","berry","berth","beset","beside","best","bestow","bet","beta","betray","better","beware","beyond","bias","biceps","bicker","bid","big","bigger","bike","bile","bill","bin","binary","bind","biopsy","birch","bird","birdie","birth","bishop","bit","bitch","bite","bitter","black","blade","blame","bland","blast","blaze","bleak","blend","bless","blew","blind","blink","blip","bliss","blitz","block","blond","blood","bloody","bloom","blot","blouse","blow","blue","bluff","blunt","blur","blush","boar","board","boast","boat","bob","bodily","body","bogus","boil","bold","bolt","bomb","bombay","bond","bone","bonn","bonnet","bonus","bony","book","boom","boost","boot","booth","booze","border","bore","borrow","bosom","boss","boston","both","bother","bottle","bottom","bought","bounce","bound","bounty","bout","bovine","bow","bowel","bowl","box","boy","boyish","brace","brain","brainy","brake","bran","branch","brand","brandy","brass","brave","bravo","brazil","breach","bread","break","breast","breath","bred","breed","breeze","brew","bribe","brick","bride","bridge","brief","bright","brim","brine","bring","brink","brisk","broad","broke","broken","bronze","brook","broom","brown","bruise","brush","brutal","brute","bubble","buck","bucket","buckle","budget","buffet","buggy","build","bulb","bulge","bulk","bulky","bull","bullet","bully","bump","bumpy","bunch","bundle","bunk","bunny","burden","bureau","burial","buried","burly","burn","burnt","burrow","burst","bury","bus","bush","bust","bustle","busy","but","butler","butt","butter","button","buy","buyer","buzz","bye","byte","cab","cabin","cable","cache","cactus","caesar","cage","cairo","cajun","cajole","cake","calf","call","caller","calm","calmly","came","camel","camera","camp","campus","can","canada","canal","canary","cancel","cancer","candid","candle","candy","cane","canine","canoe","canopy","canvas","canyon","cap","cape","car","carbon","card","care","career","caress","cargo","carl","carnal","carol","carp","carpet","carrot","carry","cart","cartel","case","cash","cask","cast","castle","casual","cat","catch","cater","cattle","caught","causal","cause","cave","cease","celery","cell","cellar","celtic","cement","censor","census","cent","cereal","chain","chair","chalk","chalky","champ","chance","change","chant","chaos","chap","chapel","charge","charm","chart","chase","chat","cheap","cheat","check","cheek","cheeky","cheer","cheery","cheese","chef","cheque","cherry","chess","chest","chew","chic","chick","chief","child","chile","chill","chilly","chin","china","chip","choice","choir","choose","chop","choppy","chord","chorus","chose","chosen","chris","chrome","chunk","chunky","church","cider","cigar","cinema","circa","circle","circus","cite","city","civic","civil","clad","claim","clammy","clan","clap","clash","clasp","class","clause","claw","clay","clean","clear","clergy","clerk","clever","click","client","cliff","climax","climb","clinch","cling","clinic","clip","cloak","clock","clone","close","closer","closet","cloth","cloud","cloudy","clout","clown","club","clue","clumsy","clung","clutch","coach","coal","coarse","coast","coat","coax","cobalt","cobra","coca","cock","cocoa","code","coffee","coffin","cohort","coil","coin","coke","cold","collar","colon","colony","colt","column","comb","combat","come","comedy","comic","commit","common","compel","comply","concur","cone","confer","congo","consul","convex","convey","convoy","cook","cool","cope","copper","copy","coral","cord","core","cork","corn","corner","corps","corpse","corpus","cortex","cosmic","cosmos","cost","costly","cotton","couch","cough","could","count","county","coup","couple","coupon","course","court","cousin","cove","cover","covert","cow","coward","cowboy","cozy","crab","crack","cradle","craft","crafty","crag","crane","crash","crate","crater","crawl","crazy","creak","cream","creamy","create","credit","creed","creek","creep","creepy","crept","crest","crew","cried","crime","crisis","crisp","critic","crook","crop","cross","crow","crowd","crown","crude","cruel","cruise","crunch","crush","crust","crux","cry","crypt","cuba","cube","cubic","cuckoo","cuff","cult","cup","curb","cure","curfew","curl","curry","curse","cursor","curve","cuss","custom","cut","cute","cycle","cyclic","cynic","czech","dad","daddy","dagger","daily","dairy","daisy","dale","dam","damage","damp","dampen","dance","danger","danish","dare","dark","darken","darn","dart","dash","data","date","david","dawn","day","dead","deadly","deaf","deal","dealer","dean","dear","death","debate","debit","debris","debt","debtor","decade","decay","decent","decide","deck","decor","decree","deduce","deed","deep","deeply","deer","defeat","defect","defend","defer","define","defy","degree","deity","delay","delete","delhi","delta","demand","demise","demo","demure","denial","denote","dense","dental","deny","depart","depend","depict","deploy","depot","depth","deputy","derive","desert","design","desire","desist","desk","detail","detect","deter","detest","detour","device","devise","devoid","devote","devour","dial","diana","diary","dice","dictum","did","die","diesel","diet","differ","dig","digest","digit","dine","dinghy","dinner","diode","dip","dire","direct","dirt","dirty","disc","disco","dish","disk","dismal","dispel","ditch","dive","divert","divide","divine","dizzy","docile","dock","doctor","dog","dogma","dole","doll","dollar","dolly","domain","dome","domino","donate","done","donkey","donor","doom","door","dorsal","dose","dot","double","doubt","dough","dour","dove","down","dozen","draft","drag","dragon","drain","drama","drank","draw","drawer","dread","dream","dreary","dress","drew","dried","drift","drill","drink","drip","drive","driver","drop","drove","drown","drug","drum","drunk","dry","dual","duck","duct","due","duel","duet","duke","dull","duly","dumb","dummy","dump","dune","dung","duress","during","dusk","dust","dusty","dutch","duty","dwarf","dwell","dyer","dying","dynamo","each","eager","eagle","ear","earl","early","earn","earth","ease","easel","easily","east","easter","easy","eat","eaten","eater","echo","eddy","eden","edge","edible","edict","edit","editor","eel","eerie","eerily","effect","effort","egg","ego","eight","eighth","eighty","either","elbow","elder","eldest","elect","eleven","elicit","elite","else","elude","elves","embark","emblem","embryo","emerge","emit","empire","employ","empty","enable","enamel","end","endure","enemy","energy","engage","engine","enjoy","enlist","enough","ensure","entail","enter","entire","entry","envoy","envy","enzyme","epic","epoch","equal","equate","equip","equity","era","erect","eric","erode","erotic","errant","error","escape","escort","essay","essex","estate","esteem","ethic","ethnic","europe","evade","eve","even","event","ever","every","evict","evil","evoke","evolve","exact","exam","exceed","excel","except","excess","excise","excite","excuse","exempt","exert","exile","exist","exit","exodus","exotic","expand","expect","expert","expire","export","expose","extend","extra","eye","eyed","fabric","face","facial","fact","factor","fade","fail","faint","fair","fairly","fairy","faith","fake","falcon","fall","false","falter","fame","family","famine","famous","fan","fancy","far","farce","fare","farm","farmer","fast","fasten","faster","fat","fatal","fate","father","fatty","fault","faulty","fauna","fear","feast","feat","fed","fee","feeble","feed","feel","feet","fell","fellow","felt","female","fence","fend","ferry","fetal","fetch","feudal","fever","few","fewer","fiasco","fiddle","field","fiend","fierce","fiery","fifth","fifty","fig","fight","figure","file","fill","filled","filler","film","filter","filth","filthy","final","finale","find","fine","finery","finger","finish","finite","fire","firm","firmly","first","fiscal","fish","fisher","fist","fit","fitful","five","fix","flag","flair","flak","flame","flank","flap","flare","flash","flask","flat","flavor","flaw","fled","flee","fleece","fleet","flesh","fleshy","flew","flick","flight","flimsy","flint","flirt","float","flock","flood","floor","floppy","flora","floral","flour","flow","flower","fluent","fluffy","fluid","flung","flurry","flush","flute","flux","fly","flyer","foal","foam","focal","focus","fog","foil","fold","folk","follow","folly","fond","fondly","font","food","fool","foot","for","forbid","force","ford","forest","forge","forget","fork","form","formal","format","former","fort","forth","forty","forum","fossil","foster","foul","found","four","fourth","fox","foyer","frail","frame","franc","france","frank","fraud","fred","free","freed","freely","freeze","french","frenzy","fresh","friar","friday","fridge","fried","friend","fright","fringe","frock","frog","from","front","frost","frosty","frown","frozen","frugal","fruit","fry","fudge","fuel","full","fully","fumes","fun","fund","funny","fur","furry","fury","fuse","fusion","fuss","fussy","futile","future","fuzzy","gadget","gain","gala","galaxy","gale","gall","galley","gallon","gallop","gamble","game","gamma","gandhi","gang","gap","garage","garden","garlic","gas","gasp","gate","gather","gauge","gaunt","gave","gaze","gear","geese","gem","gemini","gender","gene","geneva","genial","genius","genre","gentle","gently","gentry","genus","george","germ","get","ghetto","ghost","giant","gift","giggle","gill","gilt","ginger","girl","give","given","glad","glade","glance","gland","glare","glass","glassy","gleam","glee","glide","global","globe","gloom","gloomy","gloria","glory","gloss","glossy","glove","glow","glue","gnat","gnu","goal","goat","gold","golden","golf","gone","gong","goo","good","goose","gore","gorge","gory","gosh","gospel","gossip","got","gothic","govern","gown","grab","grace","grade","grail","grain","grand","grant","grape","graph","grasp","grass","grassy","grate","grave","gravel","gravy","grease","greasy","great","greece","greed","greedy","greek","green","greet","grew","grey","grid","grief","grill","grim","grin","grind","grip","grit","gritty","groan","groin","groom","groove","gross","ground","group","grove","grow","grown","growth","grudge","grunt","guard","guess","guest","guide","guild","guilt","guilty","guise","guitar","gulf","gully","gun","gunman","guru","gut","guy","gypsy","habit","hack","had","hail","hair","hairy","haiti","hale","half","hall","halt","hamlet","hammer","hand","handle","handy","hang","hangar","hanoi","happen","happy","harass","harbor","hard","harder","hardly","hare","harem","harm","harp","harry","harsh","has","hash","hassle","haste","hasten","hasty","hat","hatch","hate","haul","haunt","havana","have","haven","havoc","hawaii","hawk","hay","hazard","haze","hazel","hazy","head","heal","health","heap","hear","heard","heart","hearth","hearty","heat","heater","heaven","heavy","hebrew","heck","hectic","hedge","heel","hefty","height","heir","held","helium","helix","hell","hello","helm","helmet","help","hemp","hence","henry","her","herald","herb","herd","here","hereby","hermes","hernia","hero","heroic","heroin","hey","heyday","hick","hidden","hide","high","higher","highly","hill","him","hind","hinder","hint","hippie","hire","his","hiss","hit","hive","hoard","hoarse","hobby","hockey","hold","holder","hole","hollow","holly","holy","home","honest","honey","hood","hook","hope","horn","horrid","horror","horse","hose","host","hot","hotel","hound","hour","house","hover","how","huge","hull","human","humane","humble","humid","hung","hunger","hungry","hunt","hurdle","hurl","hurry","hurt","hush","hut","hybrid","hymn","hyphen","ice","icing","icon","idaho","idea","ideal","idiom","idiot","idle","idly","idol","ignite","ignore","ill","image","immune","impact","imply","import","impose","inca","incest","inch","income","incur","indeed","index","india","indian","indoor","induce","inept","inert","infant","infect","infer","influx","inform","inject","injure","injury","ink","inlaid","inland","inlet","inmate","inn","innate","inner","input","insane","insect","insert","inset","inside","insist","insult","insure","intact","intake","intend","inter","into","invade","invent","invest","invite","invoke","inward","iowa","iran","iraq","irish","iron","ironic","irony","isaac","isabel","island","isle","israel","issue","italy","itch","item","itself","ivan","ivory","jack","jacket","jacob","jade","jaguar","jail","james","jane","japan","jargon","java","jaw","jazz","jeep","jelly","jerky","jest","jet","jewel","jewish","jim","job","jock","jockey","joe","john","join","joint","joke","jolly","jolt","jordan","joseph","joy","joyful","joyous","judge","judy","juice","juicy","july","jumble","jumbo","jump","june","jungle","junior","junk","junta","jury","just","kansas","karate","karl","keel","keen","keep","keeper","kenya","kept","kernel","kettle","key","khaki","kick","kid","kidnap","kidney","kill","killer","kin","kind","kindly","king","kiss","kite","kitten","knack","knee","kneel","knew","knife","knight","knit","knob","knock","knot","know","known","koran","korea","kuwait","label","lace","lack","lad","ladder","laden","lady","lagoon","laity","lake","lamb","lame","lamp","lance","land","lane","lap","lapse","large","larval","laser","last","latch","late","lately","latent","later","latest","latin","latter","laugh","launch","lava","lavish","law","lawful","lawn","lawyer","lay","layer","layman","lazy","lead","leader","leaf","leafy","league","leak","leaky","lean","leap","learn","lease","leash","least","leave","led","ledge","left","leg","legacy","legal","legend","legion","lemon","lend","length","lens","lent","leo","leper","lesion","less","lessen","lesser","lesson","lest","let","lethal","letter","level","lever","levy","lewis","liable","liar","libel","libya","lice","lick","lid","lie","lied","lier","life","lift","light","like","likely","limb","lime","limit","limp","line","linear","linen","linger","link","lint","lion","lip","liquid","liquor","list","listen","lit","live","lively","liver","liz","lizard","load","loaf","loan","lobby","lobe","local","locate","lock","locus","lodge","loft","lofty","log","logic","logo","london","lone","lonely","long","longer","look","loop","loose","loosen","loot","lord","lorry","lose","loss","lost","lot","lotion","lotus","loud","loudly","lounge","lousy","love","lovely","lover","low","lower","lowest","loyal","lucid","luck","lucky","lucy","lull","lump","lumpy","lunacy","lunar","lunch","lung","lure","lurid","lush","lust","lute","luther","luxury","lying","lymph","lynch","lyric","macho","macro","mad","madam","made","mafia","magic","magma","magnet","magnum","magpie","maid","maiden","mail","main","mainly","major","make","maker","male","malice","mall","malt","mammal","manage","mane","mania","manic","manner","manor","mantle","manual","manure","many","map","maple","marble","march","mare","margin","maria","marina","mark","market","marry","mars","marsh","martin","martyr","mary","mask","mason","mass","mast","master","mat","match","mate","matrix","matter","mature","maxim","may","maybe","mayor","maze","mead","meadow","meal","mean","meant","meat","medal","media","median","medic","medium","meet","mellow","melody","melon","melt","member","memo","memory","menace","mend","mental","mentor","menu","mercy","mere","merely","merge","merger","merit","merry","mesh","mess","messy","met","metal","meter","method","methyl","metric","metro","mexico","miami","mickey","mid","midday","middle","midst","midway","might","mighty","mild","mildew","mile","milk","milky","mill","mimic","mince","mind","mine","mini","mink","minor","mint","minus","minute","mire","mirror","mirth","misery","miss","mist","misty","mite","mix","moan","moat","mob","mobile","mock","mode","model","modem","modern","modest","modify","module","moist","molar","mold","mole","molten","moment","monday","money","monk","monkey","month","mood","moody","moon","moor","moral","morale","morbid","more","morgue","mortal","mortar","mosaic","moscow","moses","mosque","moss","most","mostly","moth","mother","motion","motive","motor","mount","mourn","mouse","mouth","move","movie","mrs","much","muck","mucus","mud","muddle","muddy","mule","mummy","munich","murder","murky","murmur","muscle","museum","music","mussel","must","mutant","mute","mutiny","mutter","mutton","mutual","muzzle","myopic","myriad","myself","mystic","myth","nadir","nail","naked","name","namely","nape","napkin","naples","narrow","nasal","nasty","nathan","nation","native","nature","nausea","naval","nave","navy","near","nearer","nearly","neat","neatly","neck","need","needle","needy","negate","neon","nepal","nephew","nerve","nest","net","neural","never","newly","next","nice","nicely","niche","nickel","niece","night","nile","nimble","nine","ninety","ninth","nobel","noble","nobody","node","noise","noisy","none","noon","nor","norm","normal","north","norway","nose","nosy","not","note","notice","notify","notion","noun","novel","novice","now","nozzle","null","numb","number","nurse","nut","nylon","nymph","oak","oar","oasis","oath","obese","obey","object","oblige","oboe","obtain","obtuse","occult","occupy","occur","ocean","octave","odd","off","offend","offer","office","offset","often","ohio","oil","oily","okay","old","older","oldest","olive","omega","omen","omit","once","one","onion","only","onset","onto","onus","onward","opaque","open","openly","opera","opium","oppose","optic","option","oracle","oral","orange","orbit","orchid","ordeal","order","organ","orgasm","orient","origin","ornate","orphan","oscar","other","otter","ought","ounce","our","out","outer","output","outset","oval","oven","over","overt","owe","owing","owl","own","owner","oxford","oxide","oxygen","oyster","ozone","pace","pack","packet","pact","pad","paddle","paddy","pagan","page","paid","pain","paint","pair","palace","pale","palm","pan","panama","panel","panic","papa","papal","paper","parade","parcel","pardon","parent","paris","parish","park","parody","parrot","part","partly","party","pascal","pass","past","paste","pastel","pastor","pastry","pat","patch","patent","path","patio","patrol","patron","paul","pause","pave","paw","pawn","pay","peace","peach","peak","pear","pearl","pedal","peel","peer","peking","pelvic","pelvis","pen","penal","pence","pencil","penny","people","pepper","per","perch","peril","period","perish","permit","person","peru","pest","pet","peter","petite","petrol","petty","phase","philip","phone","photo","phrase","piano","pick","picket","picnic","pie","piece","pier","pierce","piety","pig","pigeon","piggy","pike","pile","pill","pillar","pillow","pilot","pin","pinch","pine","pink","pint","pious","pipe","pirate","piss","pistol","piston","pit","pitch","pity","pivot","pixel","pizza","place","placid","plague","plain","plan","plane","planet","plank","plant","plasma","plate","play","player","plea","plead","please","pledge","plenty","plight","plot","plough","ploy","plug","plum","plump","plunge","plural","plus","plush","pocket","poem","poet","poetic","poetry","point","poison","poland","polar","pole","police","policy","polish","polite","poll","pollen","polo","pond","ponder","pony","pool","poor","poorly","pop","poppy","pore","pork","port","portal","pose","posh","post","postal","pot","potato","potent","pouch","pound","pour","powder","power","praise","pray","prayer","preach","prefer","prefix","press","pretty","price","pride","priest","primal","prime","prince","print","prior","prism","prison","privy","prize","probe","profit","prompt","prone","proof","propel","proper","prose","proton","proud","prove","proven","proxy","prune","pry","psalm","pseudo","psyche","pub","public","puff","pull","pulp","pulpit","pulsar","pulse","pump","punch","punish","punk","pupil","puppet","puppy","pure","purely","purge","purify","purple","purse","pursue","push","pushy","put","putt","puzzle","quaint","quake","quarry","quart","quartz","quebec","queen","queer","query","quest","queue","quick","quid","quiet","quilt","quirk","quit","quite","quiver","quiz","quota","quote","rabbit","race","racial","racism","rack","racket","radar","radio","radish","radius","raffle","raft","rage","raid","rail","rain","rainy","raise","rake","rally","ramp","random","range","rank","ransom","rape","rapid","rare","rarely","rarity","rash","rat","rate","rather","ratify","ratio","rattle","rave","raven","raw","ray","razor","reach","react","read","reader","ready","real","really","realm","reap","rear","reason","rebel","recall","recent","recess","recipe","reckon","record","recoup","rector","red","redeem","redo","reduce","reed","reef","reek","refer","reform","refuge","refuse","regal","regard","regent","regime","region","regret","reign","reject","relate","relax","relay","relic","relief","relish","rely","remain","remark","remedy","remind","remit","remote","remove","renal","render","rent","rental","repair","repeal","repeat","repent","reply","report","rescue","resent","reside","resign","resin","resist","resort","rest","result","resume","retail","retain","retina","retire","return","reveal","review","revise","revive","revolt","reward","rex","rhine","rhino","rhyme","rhythm","ribbon","rice","rich","rick","rid","ride","rider","ridge","rife","rifle","rift","right","rigid","rile","rim","ring","rinse","riot","ripe","ripen","ripple","rise","risk","risky","rite","ritual","ritz","rival","river","road","roar","roast","rob","robe","robert","robin","robot","robust","rock","rocket","rocky","rod","rode","rodent","rogue","role","roll","roman","rome","roof","room","root","rope","rose","rosy","rot","rotate","rotor","rotten","rouge","rough","round","route","rover","row","royal","rub","rubber","rubble","ruby","rudder","rude","rug","rugby","ruin","rule","ruler","rumble","rump","run","rune","rung","runway","rural","rush","russia","rust","rustic","rusty","sack","sacred","sad","saddle","sadism","sadly","safari","safe","safely","safer","safety","saga","sage","sahara","said","sail","sailor","saint","sake","salad","salary","sale","saline","saliva","salmon","saloon","salt","salty","salute","sam","same","sample","sand","sandy","sane","sash","satin","satire","saturn","sauce","saucer","saudi","sauna","savage","save","saw","say","scale","scalp","scan","scant","scar","scarce","scare","scarf","scary","scene","scenic","scent","school","scold","scope","score","scorn","scotch","scott","scout","scrap","scrape","scream","screen","screw","script","scroll","scrub","scum","sea","seal","seam","seaman","search","season","seat","second","secret","sect","sector","secure","see","seed","seeing","seek","seem","seize","seldom","select","self","sell","seller","semi","senate","send","senile","senior","sense","sensor","sent","sentry","seoul","sequel","serene","serial","series","sermon","serum","serve","server","set","settle","seven","severe","sew","sewage","shabby","shade","shadow","shady","shaft","shaggy","shah","shake","shaky","shall","sham","shame","shape","share","shark","sharp","shawl","she","shear","sheen","sheep","sheer","sheet","shelf","shell","sherry","shield","shift","shine","shiny","ship","shire","shirk","shirt","shiver","shock","shoe","shook","shoot","shop","shore","short","shot","should","shout","show","shower","shrank","shrewd","shrill","shrimp","shrine","shrink","shrub","shrug","shut","shy","shyly","sick","side","siege","sigh","sight","sigma","sign","signal","silent","silk","silken","silky","sill","silly","silo","silver","simple","simply","since","sinful","sing","singer","single","sink","sir","sire","siren","sister","sit","site","sitter","six","sixth","sixty","size","sketch","skill","skin","skinny","skip","skirt","skull","sky","slab","slack","slain","slam","slang","slap","slat","slate","slave","sleek","sleep","sleepy","sleeve","slice","slick","slid","slide","slight","slim","slimy","sling","slip","slit","slogan","slope","sloppy","slot","slow","slowly","slug","slum","slump","smack","small","smart","smash","smear","smell","smelly","smelt","smile","smite","smoke","smoky","smooth","smug","snack","snail","snake","snap","snatch","sneak","snow","snowy","snug","soak","soap","sober","soccer","social","sock","socket","socks","soda","sodden","sodium","sofa","soft","soften","softly","soggy","soil","solar","sold","sole","solely","solemn","solid","solo","solve","some","son","sonar","sonata","song","sonic","sony","soon","sooner","soot","soothe","sordid","sore","sorrow","sorry","sort","soul","sound","soup","sour","source","soviet","sow","space","spade","spain","span","spare","spark","sparse","spasm","spat","spate","speak","spear","speech","speed","speedy","spell","spend","sphere","spice","spicy","spider","spiky","spill","spin","spinal","spine","spiral","spirit","spit","spite","splash","split","spoil","spoke","sponge","spoon","sport","spot","spouse","spray","spread","spree","spring","sprint","spur","squad","square","squash","squat","squid","stab","stable","stack","staff","stage","stain","stair","stairs","stake","stale","stall","stamp","stance","stand","staple","star","starch","stare","stark","start","starve","state","static","statue","status","stay","stead","steady","steak","steal","steam","steel","steep","steer","stem","stench","step","stereo","stern","stew","stick","sticky","stiff","stifle","stigma","still","sting","stint","stir","stitch","stock","stocky","stone","stony","stool","stop","store","storm","stormy","story","stout","stove","stow","strain","strait","strand","strap","strata","straw","stray","streak","stream","street","stress","strict","stride","strife","strike","string","strip","stripe","strive","stroke","stroll","strong","stud","studio","study","stuff","stuffy","stunt","stupid","sturdy","style","submit","subtle","subtly","suburb","such","sudden","sue","suez","suffer","sugar","suit","suite","suitor","sullen","sultan","sum","summer","summit","summon","sun","sunday","sunny","sunset","super","superb","supper","supple","supply","sure","surely","surf","surge","survey","suture","swamp","swan","swap","swarm","sway","swear","sweat","sweaty","sweden","sweep","sweet","swell","swift","swim","swine","swing","swirl","swiss","switch","sword","swore","sydney","symbol","synod","syntax","syria","syrup","system","table","tablet","taboo","tacit","tackle","tact","tactic","tail","tailor","taiwan","take","tale","talent","talk","tall","tally","tame","tampa","tan","tandem","tangle","tank","tap","tape","target","tariff","tarp","tart","tarzan","task","taste","tasty","tattoo","taurus","taut","tavern","tax","taxi","tea","teach","teak","team","tear","tease","tech","teeth","tell","temper","temple","tempo","tempt","ten","tenant","tend","tender","tendon","tennis","tenor","tense","tent","tenth","tenure","teresa","term","terror","terse","test","texas","text","thank","thaw","them","theme","thence","theory","there","these","thesis","they","thick","thief","thigh","thin","thing","think","third","thirst","thirty","this","thomas","thorn","those","though","thread","threat","three","thrill","thrive","throat","throne","throng","throw","thrust","thud","thug","thumb","thus","thyme","tibet","tick","ticket","tidal","tide","tidy","tie","tier","tiger","tight","tile","till","tilt","timber","time","timid","tin","tiny","tip","tire","tissue","title","toad","toast","today","toe","toilet","token","tokyo","told","toll","tom","tomato","tomb","tonal","tone","tongue","tonic","too","took","tool","tooth","top","topaz","topic","torch","torque","torso","tort","toss","total","touch","tough","tour","toward","towel","tower","town","toxic","toxin","toy","trace","track","tract","trade","tragic","trail","train","trait","tram","trance","trap","trauma","travel","tray","tread","treat","treaty","treble","tree","trek","tremor","trench","trend","trendy","trial","tribal","tribe","trick","tricky","tried","trifle","trim","trio","trip","triple","troop","trophy","trot","trough","trout","truce","truck","true","truly","trunk","trust","truth","try","tube","tumble","tuna","tundra","tune","tunic","tunnel","turban","turf","turk","turkey","turn","turtle","tutor","tweed","twelve","twenty","twice","twin","twist","two","tycoon","tying","type","tyrant","ugly","ulcer","ultra","umpire","unable","uncle","under","uneasy","unfair","unify","union","unique","unit","unite","unity","unlike","unrest","unruly","until","update","upheld","uphill","uphold","upon","upper","uproar","upset","upshot","uptake","upturn","upward","urban","urge","urgent","urging","urine","usable","usage","use","useful","user","usual","utmost","utter","vacant","vacuum","vague","vain","valet","valid","valley","value","valve","van","vanish","vanity","vary","vase","vast","vat","vault","vector","veil","vein","velvet","vendor","veneer","venice","venom","vent","venue","venus","verb","verbal","verge","verify","verity","verse","versus","very","vessel","vest","vet","veto","via","viable","vicar","vice","victim","victor","video","vienna","view","vigil","viking","vile","villa","vine","vinyl","viola","violet","violin","viral","virgo","virtue","virus","visa","vision","visit","visual","vital","vivid","vocal","vodka","vogue","voice","void","volley","volume","vote","vowel","voyage","vulgar","wade","wage","waist","wait","waiter","wake","walk","walker","wall","wallet","walnut","wander","want","war","warden","warm","warmth","warn","warp","warsaw","wary","was","wash","wasp","waste","watch","water","watery","wave","wax","way","weak","weaken","wealth","weapon","wear","weary","weave","wedge","wee","weed","week","weekly","weep","weigh","weight","weird","well","were","west","wet","whale","wharf","what","wheat","wheel","when","whence","where","which","whiff","while","whim","whip","whisky","white","who","whole","wholly","whom","whose","why","wicked","wide","widely","widen","wider","widow","width","wife","wig","wild","wildly","will","willow","wily","win","wind","window","windy","wine","wing","wink","winner","winter","wipe","wire","wisdom","wise","wish","wit","witch","with","within","witty","wizard","woke","wolf","wolves","woman","womb","won","wonder","wood","wooden","woods","woody","wool","word","work","worker","world","worm","worry","worse","worst","worth","worthy","would","wound","wrap","wrath","wreath","wreck","wring","wrist","writ","write","writer","wrong","xerox","yacht","yale","yard","yarn","yeah","year","yeard","yeast","yellow","yet","yield","yogurt","yolk","you","young","your","youth","zaire","zeal","zebra","zenith","zero","zeus","zigzag","zinc","zombie","zone"],bip39Words=["abandon","ability","able","about","above","absent","absorb","abstract","absurd","abuse","access","accident","account","accuse","achieve","acid","acoustic","acquire","across","act","action","actor","actress","actual","adapt","add","addict","address","adjust","admit","adult","advance","advice","aerobic","affair","afford","afraid","again","age","agent","agree","ahead","aim","air","airport","aisle","alarm","album","alcohol","alert","alien","all","alley","allow","almost","alone","alpha","already","also","alter","always","amateur","amazing","among","amount","amused","analyst","anchor","ancient","anger","angle","angry","animal","ankle","announce","annual","another","answer","antenna","antique","anxiety","any","apart","apology","appear","apple","approve","april","arch","arctic","area","arena","argue","arm","armed","armor","army","around","arrange","arrest","arrive","arrow","art","artefact","artist","artwork","ask","aspect","assault","asset","assist","assume","asthma","athlete","atom","attack","attend","attitude","attract","auction","audit","august","aunt","author","auto","autumn","average","avocado","avoid","awake","aware","away","awesome","awful","awkward","axis","baby","bachelor","bacon","badge","bag","balance","balcony","ball","bamboo","banana","banner","bar","barely","bargain","barrel","base","basic","basket","battle","beach","bean","beauty","because","become","beef","before","begin","behave","behind","believe","below","belt","bench","benefit","best","betray","better","between","beyond","bicycle","bid","bike","bind","biology","bird","birth","bitter","black","blade","blame","blanket","blast","bleak","bless","blind","blood","blossom","blouse","blue","blur","blush","board","boat","body","boil","bomb","bone","bonus","book","boost","border","boring","borrow","boss","bottom","bounce","box","boy","bracket","brain","brand","brass","brave","bread","breeze","brick","bridge","brief","bright","bring","brisk","broccoli","broken","bronze","broom","brother","brown","brush","bubble","buddy","budget","buffalo","build","bulb","bulk","bullet","bundle","bunker","burden","burger","burst","bus","business","busy","butter","buyer","buzz","cabbage","cabin","cable","cactus","cage","cake","call","calm","camera","camp","can","canal","cancel","candy","cannon","canoe","canvas","canyon","capable","capital","captain","car","carbon","card","cargo","carpet","carry","cart","case","cash","casino","castle","casual","cat","catalog","catch","category","cattle","caught","cause","caution","cave","ceiling","celery","cement","census","century","cereal","certain","chair","chalk","champion","change","chaos","chapter","charge","chase","chat","cheap","check","cheese","chef","cherry","chest","chicken","chief","child","chimney","choice","choose","chronic","chuckle","chunk","churn","cigar","cinnamon","circle","citizen","city","civil","claim","clap","clarify","claw","clay","clean","clerk","clever","click","client","cliff","climb","clinic","clip","clock","clog","close","cloth","cloud","clown","club","clump","cluster","clutch","coach","coast","coconut","code","coffee","coil","coin","collect","color","column","combine","come","comfort","comic","common","company","concert","conduct","confirm","congress","connect","consider","control","convince","cook","cool","copper","copy","coral","core","corn","correct","cost","cotton","couch","country","couple","course","cousin","cover","coyote","crack","cradle","craft","cram","crane","crash","crater","crawl","crazy","cream","credit","creek","crew","cricket","crime","crisp","critic","crop","cross","crouch","crowd","crucial","cruel","cruise","crumble","crunch","crush","cry","crystal","cube","culture","cup","cupboard","curious","current","curtain","curve","cushion","custom","cute","cycle","dad","damage","damp","dance","danger","daring","dash","daughter","dawn","day","deal","debate","debris","decade","december","decide","decline","decorate","decrease","deer","defense","define","defy","degree","delay","deliver","demand","demise","denial","dentist","deny","depart","depend","deposit","depth","deputy","derive","describe","desert","design","desk","despair","destroy","detail","detect","develop","device","devote","diagram","dial","diamond","diary","dice","diesel","diet","differ","digital","dignity","dilemma","dinner","dinosaur","direct","dirt","disagree","discover","disease","dish","dismiss","disorder","display","distance","divert","divide","divorce","dizzy","doctor","document","dog","doll","dolphin","domain","donate","donkey","donor","door","dose","double","dove","draft","dragon","drama","drastic","draw","dream","dress","drift","drill","drink","drip","drive","drop","drum","dry","duck","dumb","dune","during","dust","dutch","duty","dwarf","dynamic","eager","eagle","early","earn","earth","easily","east","easy","echo","ecology","economy","edge","edit","educate","effort","egg","eight","either","elbow","elder","electric","elegant","element","elephant","elevator","elite","else","embark","embody","embrace","emerge","emotion","employ","empower","empty","enable","enact","end","endless","endorse","enemy","energy","enforce","engage","engine","enhance","enjoy","enlist","enough","enrich","enroll","ensure","enter","entire","entry","envelope","episode","equal","equip","era","erase","erode","erosion","error","erupt","escape","essay","essence","estate","eternal","ethics","evidence","evil","evoke","evolve","exact","example","excess","exchange","excite","exclude","excuse","execute","exercise","exhaust","exhibit","exile","exist","exit","exotic","expand","expect","expire","explain","expose","express","extend","extra","eye","eyebrow","fabric","face","faculty","fade","faint","faith","fall","false","fame","family","famous","fan","fancy","fantasy","farm","fashion","fat","fatal","father","fatigue","fault","favorite","feature","february","federal","fee","feed","feel","female","fence","festival","fetch","fever","few","fiber","fiction","field","figure","file","film","filter","final","find","fine","finger","finish","fire","firm","first","fiscal","fish","fit","fitness","fix","flag","flame","flash","flat","flavor","flee","flight","flip","float","flock","floor","flower","fluid","flush","fly","foam","focus","fog","foil","fold","follow","food","foot","force","forest","forget","fork","fortune","forum","forward","fossil","foster","found","fox","fragile","frame","frequent","fresh","friend","fringe","frog","front","frost","frown","frozen","fruit","fuel","fun","funny","furnace","fury","future","gadget","gain","galaxy","gallery","game","gap","garage","garbage","garden","garlic","garment","gas","gasp","gate","gather","gauge","gaze","general","genius","genre","gentle","genuine","gesture","ghost","giant","gift","giggle","ginger","giraffe","girl","give","glad","glance","glare","glass","glide","glimpse","globe","gloom","glory","glove","glow","glue","goat","goddess","gold","good","goose","gorilla","gospel","gossip","govern","gown","grab","grace","grain","grant","grape","grass","gravity","great","green","grid","grief","grit","grocery","group","grow","grunt","guard","guess","guide","guilt","guitar","gun","gym","habit","hair","half","hammer","hamster","hand","happy","harbor","hard","harsh","harvest","hat","have","hawk","hazard","head","health","heart","heavy","hedgehog","height","hello","helmet","help","hen","hero","hidden","high","hill","hint","hip","hire","history","hobby","hockey","hold","hole","holiday","hollow","home","honey","hood","hope","horn","horror","horse","hospital","host","hotel","hour","hover","hub","huge","human","humble","humor","hundred","hungry","hunt","hurdle","hurry","hurt","husband","hybrid","ice","icon","idea","identify","idle","ignore","ill","illegal","illness","image","imitate","immense","immune","impact","impose","improve","impulse","inch","include","income","increase","index","indicate","indoor","industry","infant","inflict","inform","inhale","inherit","initial","inject","injury","inmate","inner","innocent","input","inquiry","insane","insect","inside","inspire","install","intact","interest","into","invest","invite","involve","iron","island","isolate","issue","item","ivory","jacket","jaguar","jar","jazz","jealous","jeans","jelly","jewel","job","join","joke","journey","joy","judge","juice","jump","jungle","junior","junk","just","kangaroo","keen","keep","ketchup","key","kick","kid","kidney","kind","kingdom","kiss","kit","kitchen","kite","kitten","kiwi","knee","knife","knock","know","lab","label","labor","ladder","lady","lake","lamp","language","laptop","large","later","latin","laugh","laundry","lava","law","lawn","lawsuit","layer","lazy","leader","leaf","learn","leave","lecture","left","leg","legal","legend","leisure","lemon","lend","length","lens","leopard","lesson","letter","level","liar","liberty","library","license","life","lift","light","like","limb","limit","link","lion","liquid","list","little","live","lizard","load","loan","lobster","local","lock","logic","lonely","long","loop","lottery","loud","lounge","love","loyal","lucky","luggage","lumber","lunar","lunch","luxury","lyrics","machine","mad","magic","magnet","maid","mail","main","major","make","mammal","man","manage","mandate","mango","mansion","manual","maple","marble","march","margin","marine","market","marriage","mask","mass","master","match","material","math","matrix","matter","maximum","maze","meadow","mean","measure","meat","mechanic","medal","media","melody","melt","member","memory","mention","menu","mercy","merge","merit","merry","mesh","message","metal","method","middle","midnight","milk","million","mimic","mind","minimum","minor","minute","miracle","mirror","misery","miss","mistake","mix","mixed","mixture","mobile","model","modify","mom","moment","monitor","monkey","monster","month","moon","moral","more","morning","mosquito","mother","motion","motor","mountain","mouse","move","movie","much","muffin","mule","multiply","muscle","museum","mushroom","music","must","mutual","myself","mystery","myth","naive","name","napkin","narrow","nasty","nation","nature","near","neck","need","negative","neglect","neither","nephew","nerve","nest","net","network","neutral","never","news","next","nice","night","noble","noise","nominee","noodle","normal","north","nose","notable","note","nothing","notice","novel","now","nuclear","number","nurse","nut","oak","obey","object","oblige","obscure","observe","obtain","obvious","occur","ocean","october","odor","off","offer","office","often","oil","okay","old","olive","olympic","omit","once","one","onion","online","only","open","opera","opinion","oppose","option","orange","orbit","orchard","order","ordinary","organ","orient","original","orphan","ostrich","other","outdoor","outer","output","outside","oval","oven","over","own","owner","oxygen","oyster","ozone","pact","paddle","page","pair","palace","palm","panda","panel","panic","panther","paper","parade","parent","park","parrot","party","pass","patch","path","patient","patrol","pattern","pause","pave","payment","peace","peanut","pear","peasant","pelican","pen","penalty","pencil","people","pepper","perfect","permit","person","pet","phone","photo","phrase","physical","piano","picnic","picture","piece","pig","pigeon","pill","pilot","pink","pioneer","pipe","pistol","pitch","pizza","place","planet","plastic","plate","play","please","pledge","pluck","plug","plunge","poem","poet","point","polar","pole","police","pond","pony","pool","popular","portion","position","possible","post","potato","pottery","poverty","powder","power","practice","praise","predict","prefer","prepare","present","pretty","prevent","price","pride","primary","print","priority","prison","private","prize","problem","process","produce","profit","program","project","promote","proof","property","prosper","protect","proud","provide","public","pudding","pull","pulp","pulse","pumpkin","punch","pupil","puppy","purchase","purity","purpose","purse","push","put","puzzle","pyramid","quality","quantum","quarter","question","quick","quit","quiz","quote","rabbit","raccoon","race","rack","radar","radio","rail","rain","raise","rally","ramp","ranch","random","range","rapid","rare","rate","rather","raven","raw","razor","ready","real","reason","rebel","rebuild","recall","receive","recipe","record","recycle","reduce","reflect","reform","refuse","region","regret","regular","reject","relax","release","relief","rely","remain","remember","remind","remove","render","renew","rent","reopen","repair","repeat","replace","report","require","rescue","resemble","resist","resource","response","result","retire","retreat","return","reunion","reveal","review","reward","rhythm","rib","ribbon","rice","rich","ride","ridge","rifle","right","rigid","ring","riot","ripple","risk","ritual","rival","river","road","roast","robot","robust","rocket","romance","roof","rookie","room","rose","rotate","rough","round","route","royal","rubber","rude","rug","rule","run","runway","rural","sad","saddle","sadness","safe","sail","salad","salmon","salon","salt","salute","same","sample","sand","satisfy","satoshi","sauce","sausage","save","say","scale","scan","scare","scatter","scene","scheme","school","science","scissors","scorpion","scout","scrap","screen","script","scrub","sea","search","season","seat","second","secret","section","security","seed","seek","segment","select","sell","seminar","senior","sense","sentence","series","service","session","settle","setup","seven","shadow","shaft","shallow","share","shed","shell","sheriff","shield","shift","shine","ship","shiver","shock","shoe","shoot","shop","short","shoulder","shove","shrimp","shrug","shuffle","shy","sibling","sick","side","siege","sight","sign","silent","silk","silly","silver","similar","simple","since","sing","siren","sister","situate","six","size","skate","sketch","ski","skill","skin","skirt","skull","slab","slam","sleep","slender","slice","slide","slight","slim","slogan","slot","slow","slush","small","smart","smile","smoke","smooth","snack","snake","snap","sniff","snow","soap","soccer","social","sock","soda","soft","solar","soldier","solid","solution","solve","someone","song","soon","sorry","sort","soul","sound","soup","source","south","space","spare","spatial","spawn","speak","special","speed","spell","spend","sphere","spice","spider","spike","spin","spirit","split","spoil","sponsor","spoon","sport","spot","spray","spread","spring","spy","square","squeeze","squirrel","stable","stadium","staff","stage","stairs","stamp","stand","start","state","stay","steak","steel","stem","step","stereo","stick","still","sting","stock","stomach","stone","stool","story","stove","strategy","street","strike","strong","struggle","student","stuff","stumble","style","subject","submit","subway","success","such","sudden","suffer","sugar","suggest","suit","summer","sun","sunny","sunset","super","supply","supreme","sure","surface","surge","surprise","surround","survey","suspect","sustain","swallow","swamp","swap","swarm","swear","sweet","swift","swim","swing","switch","sword","symbol","symptom","syrup","system","table","tackle","tag","tail","talent","talk","tank","tape","target","task","taste","tattoo","taxi","teach","team","tell","ten","tenant","tennis","tent","term","test","text","thank","that","theme","then","theory","there","they","thing","this","thought","three","thrive","throw","thumb","thunder","ticket","tide","tiger","tilt","timber","time","tiny","tip","tired","tissue","title","toast","tobacco","today","toddler","toe","together","toilet","token","tomato","tomorrow","tone","tongue","tonight","tool","tooth","top","topic","topple","torch","tornado","tortoise","toss","total","tourist","toward","tower","town","toy","track","trade","traffic","tragic","train","transfer","trap","trash","travel","tray","treat","tree","trend","trial","tribe","trick","trigger","trim","trip","trophy","trouble","truck","true","truly","trumpet","trust","truth","try","tube","tuition","tumble","tuna","tunnel","turkey","turn","turtle","twelve","twenty","twice","twin","twist","two","type","typical","ugly","umbrella","unable","unaware","uncle","uncover","under","undo","unfair","unfold","unhappy","uniform","unique","unit","universe","unknown","unlock","until","unusual","unveil","update","upgrade","uphold","upon","upper","upset","urban","urge","usage","use","used","useful","useless","usual","utility","vacant","vacuum","vague","valid","valley","valve","van","vanish","vapor","various","vast","vault","vehicle","velvet","vendor","venture","venue","verb","verify","version","very","vessel","veteran","viable","vibrant","vicious","victory","video","view","village","vintage","violin","virtual","virus","visa","visit","visual","vital","vivid","vocal","voice","void","volcano","volume","vote","voyage","wage","wagon","wait","walk","wall","walnut","want","warfare","warm","warrior","wash","wasp","waste","water","wave","way","wealth","weapon","wear","weasel","weather","web","wedding","weekend","weird","welcome","west","wet","whale","what","wheat","wheel","when","where","whip","whisper","wide","width","wife","wild","will","win","window","wine","wing","wink","winner","winter","wire","wisdom","wise","wish","witness","wolf","woman","wonder","wood","wool","word","work","world","worry","worth","wrap","wreck","wrestle","wrist","write","wrong","yard","year","yellow","you","young","youth","zebra","zero","zone","zoo"];async function digest(e){return new Uint8Array(await crypto.subtle.digest("SHA-256",e))}async function toSeed(e,t){const r=e.join(" "),n=`mnemonic${t}`.normalize("NFKD");return deriveKey(HashAlgorithm.Sha512,r,n,2048,64)}function legacy1(e,t){const r=convertRadix(e.map(e=>t.indexOf(e.toLowerCase())),t.length,256,33),n=r[r.length-1],o=new Uint8Array(r.length-1);for(let i=0;i<r.length-1;i+=1)o[i]=r[i]^n;return[o,n]}async function legacy2(e,t){const r=11*e.length,n=[];n.fill(!1,0,r);for(const[c,u]of e.entries()){const e=t.indexOf(u.toLowerCase());if(e<0)throw new Error(`Word not found in wordlist: ${u}`);for(let t=0;t<11;t+=1)n[11*c+t]=!!(e&1<<10-t)}const o=r/33,i=r-o,s=new Uint8Array(i/8);for(let c=0;c<s.length;c+=1)for(let e=0;e<8;e+=1)n[8*c+e]&&(s[c]|=1<<7-e);const a=bytesToBits(await digest(s));for(let c=0;c<o;c+=1)if(n[i+c]!==a[c])throw new Error("Checksum mismatch");return s}function crc8(e){let t=255;for(let r=0;r<e.length-1;r+=1){t^=e[r];for(let e=0;e<8;e+=1)t=t>>>1^(1&t?178:0)}return 255^t}function convertRadix(e,t,r,n){let o=new BigNumber$2(0);for(const s of e)o=o.times(t),o=o.plus(s);const i=new Uint8Array(n);for(let s=n-1;s>=0;s-=1){const e=o.dividedToIntegerBy(r),t=o.modulo(r);o=e,i[s]=t.toNumber()}return i}function bytesToBits(e){const t=[];t.fill(!1,0,8*e.length);for(let r=0;r<e.length;r+=1)for(let n=0;n<8;n+=1)t[8*r+n]=!!(e[r]&1<<7-n);return t}const ED25519_SEED_TEXT="ed25519 seed",ECDSA_SEED_TEXT="Bitcoin seed",HEDERA_PATH=[44,3030,0,0];class Mnemonic{constructor({words:e}){this.words=e}static generate(){return Mnemonic._generate(24)}static generate12(){return Mnemonic._generate(12)}static async _generate(e){let t;if(12===e)t=16;else{if(24!==e)throw new Error(`unsupported phrase length ${e}, only 12 or 24 are supported`);t=32}const r=await bytesAsync(t),n=(bytesToBinary(Array.from(r))+await deriveChecksumBits(r)).match(/(.{1,11})/g),o=(null!=n?n:[]).map(e=>bip39Words[binaryToByte(e)]);return new Mnemonic({words:o})}static fromWords(e){return new Mnemonic({words:e})._validate()}toPrivateKey(e=""){return this.toEd25519PrivateKey(e)}async toEd25519PrivateKey(e="",t=HEDERA_PATH){let{keyData:r,chainCode:n}=await this._toKeyData(e,ED25519_SEED_TEXT);for(const i of t)({keyData:r,chainCode:n}=await derive(r,n,i));const o=nacl.sign.keyPair.fromSeed(r);if(null==CACHE.privateKeyConstructor)throw new Error("PrivateKey not found in cache");return CACHE.privateKeyConstructor(new Ed25519PrivateKey(o,n))}async toStandardEd25519PrivateKey(e="",t){const r=await Mnemonic.toSeed(this.words,e);let n=await PrivateKey.fromSeedED25519(r);t=null==t?0:t;for(const o of[44,3030,0,0,t])n=await n.derive(o);return n}async toEcdsaPrivateKey(e="",t=HEDERA_PATH){let{keyData:r,chainCode:n}=await this._toKeyData(e,ECDSA_SEED_TEXT);for(const o of t)({keyData:r,chainCode:n}=await derive$1(r,n,o));if(null==CACHE.privateKeyConstructor)throw new Error("PrivateKey not found in cache");return CACHE.privateKeyConstructor(new EcdsaPrivateKey(fromBytes(r),n))}async toStandardECDSAsecp256k1PrivateKey(e="",t){const r=await Mnemonic.toSeed(this.words,e);let n=await PrivateKey.fromSeedECDSAsecp256k1(r);t=null==t?0:t;for(const o of[toHardenedIndex(44),toHardenedIndex(3030),toHardenedIndex(0),0,t])n=await n.derive(o);return n}static async toSeed(e,t){return await toSeed(e,t)}async _toKeyData(e,t){const r=await toSeed(this.words,e),n=await hash(HashAlgorithm.Sha512,t,r);return{keyData:n.subarray(0,32),chainCode:n.subarray(32)}}static async fromString(e){return Mnemonic.fromWords(e.split(/\s|,/))}async _validate(){if(22===this.words.length){const e=this.words.reduce((e,t,r)=>legacyWords.includes(t.toLowerCase())?e:[...e,r],[]);if(e.length>0)throw new BadMnemonicError(this,BadMnemonicReason.UnknownWords,e);const[t,r]=legacy1(this.words,legacyWords);if(r!==crc8(t))throw new BadMnemonicError(this,BadMnemonicReason.ChecksumMismatch,[])}else{if(12!==this.words.length&&24!==this.words.length)throw new BadMnemonicError(this,BadMnemonicReason.BadLength,[]);const e=this.words.reduce((e,t,r)=>bip39Words.includes(t)?e:[...e,r],[]);if(e.length>0)throw new BadMnemonicError(this,BadMnemonicReason.UnknownWords,e);const t=this.words.map(e=>bip39Words.indexOf(e).toString(2).padStart(11,"0")).join(""),r=32*Math.floor(t.length/33),n=t.slice(0,r),o=t.slice(r),i=n.match(/(.{1,8})/g).map(binaryToByte);if(await deriveChecksumBits(Uint8Array.from(i))!==o)throw new BadMnemonicError(this,BadMnemonicReason.ChecksumMismatch,[])}return this}async toLegacyPrivateKey(){let e;if(22===this.words.length?[e]=legacy1(this.words,legacyWords):e=await legacy2(this.words,bip39Words),null==CACHE.privateKeyFromBytes)throw new Error("PrivateKey not found in cache");return CACHE.privateKeyFromBytes(e)}toString(){return this.words.join(" ")}}function binaryToByte(e){return parseInt(e,2)}function bytesToBinary(e){return e.map(e=>e.toString(2).padStart(8,"0")).join("")}async function deriveChecksumBits(e){const t=8*e.length/32,r=await digest(e);return bytesToBinary(Array.from(r)).slice(0,t)}function e$r(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=new DataView(t.buffer,t.byteOffset,t.byteLength);let o=e.byteLength;for(;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0}const t$s=new class{constructor(){this._timeDrift=0,this._contractId=null,this._keyList=null,this._thresholdKey=null,this._publicKeyED25519=null,this._publicKeyECDSA=null,this._privateKeyConstructor=null,this._mnemonicFromString=null,this._accountIdConstructor=null,this._delegateContractId=null,this._evmAddress=null,this._ethereumTransactionDataLegacyFromBytes=null,this._ethereumTransactionDataEip1559FromBytes=null,this._ethereumTransactionDataEip2930FromBytes=null,this._transactionReceiptQueryConstructor=null,this._transactionRecordQueryConstructor=null}setTimeDrift(e){this._timeDrift=e}get timeDrift(){if(null==this._timeDrift)throw new Error("Cache.timeDrift was used before it was set");return this._timeDrift}setContractId(e){this._contractId=e}get contractId(){if(null==this._contractId)throw new Error("Cache.contractId was used before it was set");return this._contractId}setKeyList(e){this._keyList=e}get keyList(){if(null==this._keyList)throw new Error("Cache.keyList was used before it was set");return this._keyList}setThresholdKey(e){this._thresholdKey=e}get thresholdKey(){if(null==this._thresholdKey)throw new Error("Cache.thresholdKey was used before it was set");return this._thresholdKey}setPublicKeyED25519(e){this._publicKeyED25519=e}get publicKeyED25519(){if(null==this._publicKeyED25519)throw new Error("Cache.publicKeyED25519 was used before it was set");return this._publicKeyED25519}setPublicKeyECDSA(e){this._publicKeyECDSA=e}get publicKeyECDSA(){if(null==this._publicKeyECDSA)throw new Error("Cache.publicKeyECDSA was used before it was set");return this._publicKeyECDSA}setPrivateKeyConstructor(e){this._privateKeyConstructor=e}get privateKeyConstructor(){if(null==this._privateKeyConstructor)throw new Error("Cache.privateKeyConstructor was used before it was set");return this._privateKeyConstructor}setMnemonicFromString(e){this._mnemonicFromString=e}get mnemonicFromString(){if(null==this._mnemonicFromString)throw new Error("Cache.mnemonicFromString was used before it was set");return this.mnemonicFromString}setAccountIdConstructor(e){this._accountIdConstructor=e}get accountIdConstructor(){if(null==this._accountIdConstructor)throw new Error("Cache.accountIdConstructor was used before it was set");return this._accountIdConstructor}setDelegateContractId(e){this._delegateContractId=e}get delegateContractId(){if(null==this._delegateContractId)throw new Error("Cache.delegateContractId was used before it was set");return this._delegateContractId}setEvmAddress(e){this._evmAddress=e}get evmAddress(){if(null==this._evmAddress)throw new Error("Cache.evmAddress was used before it was set");return this._evmAddress}setEthereumTransactionDataLegacyFromBytes(e){this._ethereumTransactionDataLegacyFromBytes=e}get ethereumTransactionDataLegacyFromBytes(){if(null==this._ethereumTransactionDataLegacyFromBytes)throw new Error("Cache.ethereumTransactionDataLegacyFromBytes was used before it was set");return this._ethereumTransactionDataLegacyFromBytes}setEthereumTransactionDataEip1559FromBytes(e){this._ethereumTransactionDataEip1559FromBytes=e}get ethereumTransactionDataEip1559FromBytes(){if(null==this._ethereumTransactionDataEip1559FromBytes)throw new Error("Cache.ethereumTransactionDataEip1559FromBytes was used before it was set");return this._ethereumTransactionDataEip1559FromBytes}setEthereumTransactionDataEip2930FromBytes(e){this._ethereumTransactionDataEip2930FromBytes=e}get ethereumTransactionDataEip2930FromBytes(){if(null==this._ethereumTransactionDataEip2930FromBytes)throw new Error("Cache.ethereumTransactionDataEip2930FromBytes was used before it was set");return this._ethereumTransactionDataEip2930FromBytes}setTransactionReceiptQueryConstructor(e){this._transactionReceiptQueryConstructor=e}get transactionReceiptQueryConstructor(){if(null==this._transactionReceiptQueryConstructor)throw new Error("Cache.transactionReceiptQueryConstructor was used before it was set");return this._transactionReceiptQueryConstructor}setTransactionRecordQueryConstructor(e){this._transactionRecordQueryConstructor=e}get transactionRecordQueryConstructor(){if(null==this._transactionRecordQueryConstructor)throw new Error("Cache.transactionRecordQueryConstructor was used before it was set");return this._transactionRecordQueryConstructor}setAddressBookQueryConstructor(e){this._addressBookQueryConstructor=e}get addressBookQueryConstructor(){if(null==this._addressBookQueryConstructor)throw new Error("Cache.addressBookQueryConstructor was used before it was set");return this._addressBookQueryConstructor}};let t$r=class{_toProtobufKey(){throw new Error("not implemented")}static _fromProtobufKey(e){return null!=e.contractID?t$s.contractId(e.contractID):null!=e.delegatableContractId?t$s.delegateContractId(e.delegatableContractId):null!=e.ed25519&&e.ed25519.byteLength>0?t$s.publicKeyED25519(e.ed25519):null!=e.ECDSASecp256k1&&e.ECDSASecp256k1.byteLength>0?t$s.publicKeyECDSA(e.ECDSASecp256k1):null!=e.thresholdKey&&null!=e.thresholdKey.threshold?t$s.thresholdKey(e.thresholdKey):null!=e.keyList?t$s.keyList(e.keyList):null}},i$f=class e extends t$r{constructor(e){super(),this._key=e}static fromBytes(t){return new e(PublicKey.fromBytes(t))}static fromBytesED25519(t){return new e(PublicKey.fromBytesED25519(t))}static fromBytesECDSA(t){return new e(PublicKey.fromBytesECDSA(t))}static fromString(t){return new e(PublicKey.fromString(t))}static fromStringECDSA(t){return new e(PublicKey.fromStringECDSA(t))}static fromStringED25519(t){return new e(PublicKey.fromStringED25519(t))}verify(e,t){return this._key.verify(e,t)}verifyTransaction(e){e._requireFrozen(),e.isFrozen()||e.freeze();for(const t of e._signedTransactions.list)if(null!=t.sigMap&&null!=t.sigMap.sigPair){let e=!1;for(const r of t.sigMap.sigPair){if(e$r(r.pubKeyPrefix,this.toBytesRaw())){e=!0;const n=t.bodyBytes;let o=null;if(null!=r.ed25519?o=r.ed25519:null!=r.ECDSASecp256k1&&(o=r.ECDSASecp256k1),null==o)continue;if(!this.verify(n,o))return!1}}if(!e)return!1}return!0}toBytes(){return this._key.toBytes()}toBytesDer(){return this._key.toBytesDer()}toBytesRaw(){return this._key.toBytesRaw()}toEthereumAddress(){return this._key.toEthereumAddress()}toEvmAddress(){return this._key.toEthereumAddress()}toString(){return this._key.toString()}toStringDer(){return this._key.toStringDer()}toStringRaw(){return this._key.toStringRaw()}equals(e){return this._key.equals(e._key)}_toProtobufKey(){switch(this._key._type){case"ED25519":return{ed25519:this._key.toBytesRaw()};case"secp256k1":return{ECDSASecp256k1:this._key.toBytesRaw()};default:throw new Error(`unrecognized key type ${this._key._type}`)}}_toProtobufSignature(e){switch(this._key._type){case"ED25519":return{pubKeyPrefix:this._key.toBytesRaw(),ed25519:e};case"secp256k1":return{pubKeyPrefix:this._key.toBytesRaw(),ECDSASecp256k1:e};default:throw new Error(`unrecognized key type ${this._key._type}`)}}get type(){return this._key._type}toAccountId(e,t){return t$s.accountIdConstructor(e,t,this)}static unusableKey(){return e.fromStringED25519("0000000000000000000000000000000000000000000000000000000000000000")}};t$s.setPublicKeyED25519(e=>i$f.fromBytesED25519(e)),t$s.setPublicKeyECDSA(e=>i$f.fromBytesECDSA(e));const version$7="logger/5.8.0";let _permanentCensorErrors=!1,_censorErrors=!1;const LogLevels={debug:1,default:2,info:2,warning:3,error:4,off:5};let _logLevel=LogLevels.default,_globalLogger=null;function _checkNormalize(){try{const e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw new Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw new Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw new Error("broken implementation")}catch(e){return e.message}return null}const _normalizeError=_checkNormalize();var LogLevel,LogLevel2,ErrorCode,ErrorCode2;LogLevel2=LogLevel||(LogLevel={}),LogLevel2.DEBUG="DEBUG",LogLevel2.INFO="INFO",LogLevel2.WARNING="WARNING",LogLevel2.ERROR="ERROR",LogLevel2.OFF="OFF",ErrorCode2=ErrorCode||(ErrorCode={}),ErrorCode2.UNKNOWN_ERROR="UNKNOWN_ERROR",ErrorCode2.NOT_IMPLEMENTED="NOT_IMPLEMENTED",ErrorCode2.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",ErrorCode2.NETWORK_ERROR="NETWORK_ERROR",ErrorCode2.SERVER_ERROR="SERVER_ERROR",ErrorCode2.TIMEOUT="TIMEOUT",ErrorCode2.BUFFER_OVERRUN="BUFFER_OVERRUN",ErrorCode2.NUMERIC_FAULT="NUMERIC_FAULT",ErrorCode2.MISSING_NEW="MISSING_NEW",ErrorCode2.INVALID_ARGUMENT="INVALID_ARGUMENT",ErrorCode2.MISSING_ARGUMENT="MISSING_ARGUMENT",ErrorCode2.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",ErrorCode2.CALL_EXCEPTION="CALL_EXCEPTION",ErrorCode2.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",ErrorCode2.NONCE_EXPIRED="NONCE_EXPIRED",ErrorCode2.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",ErrorCode2.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",ErrorCode2.TRANSACTION_REPLACED="TRANSACTION_REPLACED",ErrorCode2.ACTION_REJECTED="ACTION_REJECTED";const HEX="0123456789abcdef";let Logger$1=class e{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){const r=e.toLowerCase();null==LogLevels[r]&&this.throwArgumentError("invalid log level name","logLevel",e),_logLevel>LogLevels[r]||console.log.apply(console,t)}debug(...t){this._log(e.levels.DEBUG,t)}info(...t){this._log(e.levels.INFO,t)}warn(...t){this._log(e.levels.WARNING,t)}makeError(t,r,n){if(_censorErrors)return this.makeError("censored error",r,{});r||(r=e.errors.UNKNOWN_ERROR),n||(n={});const o=[];Object.keys(n).forEach(e=>{const t=n[e];try{if(t instanceof Uint8Array){let r="";for(let e=0;e<t.length;e++)r+=HEX[t[e]>>4],r+=HEX[15&t[e]];o.push(e+"=Uint8Array(0x"+r+")")}else o.push(e+"="+JSON.stringify(t))}catch(r){o.push(e+"="+JSON.stringify(n[e].toString()))}}),o.push(`code=${r}`),o.push(`version=${this.version}`);const i=t;let s="";switch(r){case ErrorCode.NUMERIC_FAULT:{s="NUMERIC_FAULT";const e=t;switch(e){case"overflow":case"underflow":case"division-by-zero":s+="-"+e;break;case"negative-power":case"negative-width":s+="-unsupported";break;case"unbound-bitwise-result":s+="-unbound-result"}break}case ErrorCode.CALL_EXCEPTION:case ErrorCode.INSUFFICIENT_FUNDS:case ErrorCode.MISSING_NEW:case ErrorCode.NONCE_EXPIRED:case ErrorCode.REPLACEMENT_UNDERPRICED:case ErrorCode.TRANSACTION_REPLACED:case ErrorCode.UNPREDICTABLE_GAS_LIMIT:s=r}s&&(t+=" [ See: https://links.ethers.org/v5-errors-"+s+" ]"),o.length&&(t+=" ("+o.join(", ")+")");const a=new Error(t);return a.reason=i,a.code=r,Object.keys(n).forEach(function(e){a[e]=n[e]}),a}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(t,r,n){return this.throwError(t,e.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,t,r,n){e||this.throwError(t,r,n)}assertArgument(e,t,r,n){e||this.throwArgumentError(t,r,n)}checkNormalize(t){_normalizeError&&this.throwError("platform missing String.prototype.normalize",e.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_normalizeError})}checkSafeUint53(t,r){"number"==typeof t&&(null==r&&(r="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(r,e.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,r,n){n=n?": "+n:"",t<r&&this.throwError("missing argument"+n,e.errors.MISSING_ARGUMENT,{count:t,expectedCount:r}),t>r&&this.throwError("too many arguments"+n,e.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:r})}checkNew(t,r){t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}checkAbstract(t,r){t===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",e.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):t!==Object&&null!=t||this.throwError("missing new",e.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return _globalLogger||(_globalLogger=new e(version$7)),_globalLogger}static setCensorship(t,r){if(!t&&r&&this.globalLogger().throwError("cannot permanently disable censorship",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),_permanentCensorErrors){if(!t)return;this.globalLogger().throwError("error censorship permanent",e.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}_censorErrors=!!t,_permanentCensorErrors=!!r}static setLogLevel(t){const r=LogLevels[t.toLowerCase()];null!=r?_logLevel=r:e.globalLogger().warn("invalid log level - "+t)}static from(t){return new e(t)}};Logger$1.errors=ErrorCode,Logger$1.levels=LogLevel;const version$6="bytes/5.8.0",logger$8=new Logger$1(version$6);function isHexable(e){return!!e.toHexString}function addSlice(e){return e.slice||(e.slice=function(){const t=Array.prototype.slice.call(arguments);return addSlice(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function isBytesLike(e){return isHexString(e)&&!(e.length%2)||isBytes(e)}function isInteger$1(e){return"number"==typeof e&&e==e&&e%1==0}function isBytes(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e)return!1;if(!isInteger$1(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){const r=e[t];if(!isInteger$1(r)||r<0||r>=256)return!1}return!0}function arrayify(e,t){if(t||(t={}),"number"==typeof e){logger$8.checkSafeUint53(e,"invalid arrayify value");const t=[];for(;e;)t.unshift(255&e),e=parseInt(String(e/256));return 0===t.length&&t.push(0),addSlice(new Uint8Array(t))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),isHexable(e)&&(e=e.toHexString()),isHexString(e)){let r=e.substring(2);r.length%2&&("left"===t.hexPad?r="0"+r:"right"===t.hexPad?r+="0":logger$8.throwArgumentError("hex data is odd-length","value",e));const n=[];for(let e=0;e<r.length;e+=2)n.push(parseInt(r.substring(e,e+2),16));return addSlice(new Uint8Array(n))}return isBytes(e)?addSlice(new Uint8Array(e)):logger$8.throwArgumentError("invalid arrayify value","value",e)}function concat$1(e){const t=e.map(e=>arrayify(e)),r=t.reduce((e,t)=>e+t.length,0),n=new Uint8Array(r);return t.reduce((e,t)=>(n.set(t,e),e+t.length),0),addSlice(n)}function isHexString(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(!t||e.length===2+2*t)}const HexCharacters="0123456789abcdef";function hexlify(e,t){if(t||(t={}),"number"==typeof e){logger$8.checkSafeUint53(e,"invalid hexlify value");let t="";for(;e;)t=HexCharacters[15&e]+t,e=Math.floor(e/16);return t.length?(t.length%2&&(t="0"+t),"0x"+t):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),isHexable(e))return e.toHexString();if(isHexString(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":logger$8.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(isBytes(e)){let t="0x";for(let r=0;r<e.length;r++){let n=e[r];t+=HexCharacters[(240&n)>>4]+HexCharacters[15&n]}return t}return logger$8.throwArgumentError("invalid hexlify value","value",e)}function hexConcat(e){let t="0x";return e.forEach(e=>{t+=hexlify(e).substring(2)}),t}function hexZeroPad(e,t){for("string"!=typeof e?e=hexlify(e):isHexString(e)||logger$8.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&logger$8.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}let a$9=class e{constructor(e){this._mnemonic=e}static async generate(){return new e(await Mnemonic._generate(24))}static async generate12(){return new e(await Mnemonic._generate(12))}static async fromWords(t){return new e(await Mnemonic.fromWords(t))}async toPrivateKey(e=""){return t$s.privateKeyConstructor(await this._mnemonic.toPrivateKey(e))}async toEd25519PrivateKey(e="",t){return t$s.privateKeyConstructor(await this._mnemonic.toEd25519PrivateKey(e,t))}async toStandardEd25519PrivateKey(e="",t){return t$s.privateKeyConstructor(await this._mnemonic.toStandardEd25519PrivateKey(e,t))}async toEcdsaPrivateKey(e="",t){return t$s.privateKeyConstructor(await this._mnemonic.toEcdsaPrivateKey(e,t))}calculateDerivationPathValues(e){const t=/m\/(\d+'?)\/(\d+'?)\/(\d+'?)\/(\d+'?)\/(\d+'?)/.exec(e),r=new Array(5);if(t)for(let n=1;n<=5;n++){let e=t[n];e.endsWith("'")?(e=e.substring(0,e.length-1),r[n-1]=2147483648|parseInt(e,10)):r[n-1]=parseInt(e,10)}return r}async toStandardECDSAsecp256k1PrivateKeyImpl(e,t){return await this.toEcdsaPrivateKey(e,t)}async toStandardECDSAsecp256k1PrivateKey(e="",t){return t$s.privateKeyConstructor(await this._mnemonic.toStandardECDSAsecp256k1PrivateKey(e,t))}async toStandardECDSAsecp256k1PrivateKeyCustomDerivationPath(e="",t){const r=this.calculateDerivationPathValues(t);return await this.toStandardECDSAsecp256k1PrivateKeyImpl(e,r)}static async fromString(t){return new e(await Mnemonic.fromString(t))}async toLegacyPrivateKey(){return t$s.privateKeyConstructor(await this._mnemonic.toLegacyPrivateKey())}async toSeed(e){return await Mnemonic.toSeed(this._mnemonic.words,e)}toString(){return this._mnemonic.toString()}},t$q=class{constructor(e){this._map=new Map,this.__map=new Map,this._fromString=e}get(e){const t="string"==typeof e?e:e.toString(),r=this._map.get(t);return null!=r?r:null}_set(e,t){const r="string"==typeof e?e:e.toString();this._map.set(r,t),this.__map.set(e,t)}values(){return this._map.values()}get size(){return this._map.size}keys(){return this.__map.keys()}[Symbol.iterator](){return this.__map[Symbol.iterator]()}toString(){const e={};for(const[t,r]of this._map)e[t]=r;return JSON.stringify(e)}toJSON(){const e={};return this._map.forEach((t,r)=>{e[r]=t}),e}};const t$p=[];for(let O=0;O<=255;O+=1)t$p.push(O.toString(16).padStart(2,"0"));function n$n(e){let t="";for(const r of e)t+=t$p[r];return t}function r$p(e){const t=(e.startsWith("0x")?e.substring(2):e).match(/.{1,2}/gu);return new Uint8Array((null==t?[]:t).map(e=>parseInt(e,16)))}let t$o=class extends Error{constructor(e,t,r,n,o){super(`Entity ID ${e.toString()}.${t.toString()}.${r.toString()}-${n} was incorrect.`),this.name="BadEntityIdException",this.shard=e,this.realm=t,this.num=r,this.presentChecksum=n,this.expectedChecksum=o}};const n$m="This value cannot be null | undefined.",r$o="This value must be a string or Uint8Array.",o$m="The provided variable must be an Array.",i$e="This value must be a String, Number, or BigNumber to be converted.",f$4="This value must be a String, Number, or BigNumber to be converted.",u$e="Unable to parse given variable. Returns NaN.";function a$8(e){return null!=e}function b$2(e){return a$8(e)&&e instanceof Uint8Array}function s$k(e){return a$8(e)&&("number"==typeof e||e instanceof Number)}function c$9(e){return a$8(e)&&e instanceof BigNumber$2}function h$5(e){return a$8(e)&&e instanceof Long}function g$2(e){return a$8(e)&&"string"==typeof e}function l$f(e){return a$8(e)&&(g$2(e)||b$2(e))}function w$3(e){for(let t=0;t<12;t++)if(0!=e[t])return!1;return!0}function m$4(e){if(a$8(e))return e;throw new Error(n$m)}function p(e){if(l$f(m$4(e)))return e;throw new Error(r$o)}function v$1(e){if(m$4(e),c$9(e)||g$2(e)||s$k(e)||h$5(e))return new BigNumber$2(e);throw new Error(i$e)}function N(e){if(e instanceof Array)return e.map(v$1);throw new Error(o$m)}function d$d(e){if(m$4(e),c$9(e)||g$2(e)||s$k(e)||h$5(e)){const t=parseInt(e);if(isNaN(t))throw new Error(u$e);return t}throw new Error(f$4)}function E$1(e,t=0,r=e.byteLength){if(!(Number.isInteger(t)&&t>=0))throw new Error("Invalid offset!");if(!(Number.isInteger(r)&&r>=0))throw new Error("Invalid length!");return new DataView(e.buffer,e.byteOffset+t,Math.min(r,e.byteLength-t))}function L(e,t,r=new Set){if("object"==typeof e&&"object"==typeof t){const n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(let i=0;i<n.length;i++){if(n[i]!==o[i])return!1;if(!r.has(n[i])&&!L(e[n[i]],t[o[i]],r))return!1}return!0}return("number"==typeof e&&"number"==typeof t||"string"==typeof e&&"string"==typeof t||"boolean"==typeof e&&"boolean"==typeof t)&&e===t}function T$1(e){for(var t,r,n=e.length;0!==n;)r=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[r],e[r]=t}function j(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e.buffer,e.byteOffset,e.byteLength),n=new DataView(t.buffer,t.byteOffset,t.byteLength);let o=e.byteLength;for(;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0}function I(e){return new Promise(t=>setTimeout(t,e))}const m$3=/^(\d+)(?:\.(\d+)\.([a-fA-F0-9]+))?(?:-([a-z]{5}))?$/;function f$3(e,t,r){if(null==t&&null!=r||null!=t&&null==r)throw new Error("invalid entity ID");const[n,o,i]="number"==typeof e||Long.isLong(e)?[null!=r?Long.fromValue(e):Long.ZERO,null!=t?Long.fromValue(t):Long.ZERO,null!=r?Long.fromValue(r):Long.fromValue(e)]:[null!=e.shard?Long.fromValue(e.shard):Long.ZERO,null!=e.realm?Long.fromValue(e.realm):Long.ZERO,Long.fromValue(e.num)];if(n.isNegative()||o.isNegative()||i.isNegative())throw new Error("negative numbers are not allowed in IDs");return{shard:n,realm:o,num:i}}function h$4(e,t){let r=e[0].compare(t[0]);return 0!=r?r:(r=e[1].compare(t[1]),0!=r?r:e[2].compare(t[2]))}function d$c(e){const t=m$3.exec(e);if(null==t)throw new Error(`failed to parse entity id: ${e}`);return null==t[2]&&null==t[3]?{shard:"0",realm:"0",numOrHex:t[1],checksum:t[4]}:{shard:t[1],realm:t[2],numOrHex:t[3],checksum:t[4]}}function g$1(e){const t=d$c(e);if(Number.isNaN(t.shard)||Number.isNaN(t.realm)||Number.isNaN(t.numOrHex))throw new Error("invalid format for entity ID");return{shard:null!=t.shard?Long.fromString(t.shard):Long.ZERO,realm:null!=t.realm?Long.fromString(t.realm):Long.ZERO,num:Long.fromString(t.numOrHex),checksum:t.checksum}}function w$2(e){const t=e.startsWith("0x")?r$p(e.slice(2)):r$p(e);if(20!==t.length)throw new Error(`Invalid hex encoded solidity address length:\n                expected length 40, got length ${e.length}`);return[Long.fromBytesBE([0,0,0,0,...t.slice(0,4)]),Long.fromBytesBE(Array.from(t.slice(4,12))),Long.fromBytesBE(Array.from(t.slice(12,20)))]}function y$1(e){const t=new Uint8Array(20),r=E$1(t),[n,o,i]=e;return r.setUint32(0,d$d(n)),r.setUint32(8,d$d(o)),r.setUint32(16,d$d(i)),n$n(t)}function E(e,t){let r="",n=[],o=0,i=0,s=0,a=0,c=0;const u=11881376,l="a".charCodeAt(0);let d=new Uint8Array(e.length+6);d.set(e,0),d.set([0,0,0,0,0,0],e.length);for(let h=0;h<t.length;h++)n.push("."===t[h]?10:parseInt(t[h],10));for(let h=0;h<n.length;h++)s=(31*s+n[h])%17576,h%2==0?o=(o+n[h])%11:i=(i+n[h])%11;for(let h=0;h<d.length;h++)a=(31*a+d[h])%u;c=(17576*(11*(t.length%5*11+o)+i)+s+a)%u,c=1000003*c%u;for(let h=0;h<5;h++)r=String.fromCharCode(l+c%26)+r,c/=26;return r}function S$1(e,t,r,n,o){if(null==o._network._ledgerId||null==n)return;const i=E(o._network._ledgerId._ledgerId,`${e.toString()}.${t.toString()}.${r.toString()}`);if(n!=i)throw new t$o(e,t,r,n,i)}function k$1(e,t){if(null==t)throw new Error("client cannot be null");if(null==t._network._ledgerId)throw new Error("cannot calculate checksum with a client that does not contain a recognzied ledger ID");return`${e}-${E(t._network._ledgerId._ledgerId,e)}`}let i$d=class e extends t$r{constructor(e){super(),this._bytes=e}static fromString(t){if(40!==(t=t.startsWith("0x")?t.slice(2):t).length)throw new Error("Input EVM address string is not the correct size");return new e(r$p(t))}static fromBytes(t){return new e(t)}toBytes(){return this._bytes}toString(){return n$n(this._bytes)}equals(e){return j(this._bytes,e._bytes)}},f$2=class e{constructor(e,t,r,n,o){const i=f$3(e,t,r);this.shard=i.shard,this.realm=i.realm,this.num=i.num,this.aliasKey=null!=n?n:null,this.evmAddress=null!=o?o:null,this._checksum=null}static fromString(t){let r,n,o=Long.ZERO,i=Long.ZERO,s=Long.ZERO;if(t.startsWith("0x")&&42==t.length||40==t.length)n=i$d.fromString(t);else{const e=d$c(t);if(Number.isNaN(e.shard)||Number.isNaN(e.realm))throw new Error("invalid format for entity ID");null!=e.shard&&(o=Long.fromString(e.shard)),null!=e.realm&&(i=Long.fromString(e.realm)),e.numOrHex.length<20?s=Long.fromString(e.numOrHex):40==e.numOrHex.length?n=i$d.fromString(e.numOrHex):r=i$f.fromString(e.numOrHex)}return new e(o,i,s,r,n)}static fromEvmAddress(t,r,n){const o="string"==typeof n?i$d.fromString(n):n;return w$3(o.toBytes())?new e(...w$2(o.toString())):new e(t,r,0,void 0,o)}static fromEvmPublicAddress(t){return new e(0,0,0,void 0,t)}static _fromProtobuf(t){let r,n;return null!=t.alias&&(20===t.alias.length?n=i$d.fromBytes(t.alias):r=t$r._fromProtobufKey(libExports.proto.Key.decode(t.alias))),r instanceof i$f||(r=void 0),new e(null!=t.shardNum?t.shardNum:0,null!=t.realmNum?t.realmNum:0,null!=t.accountNum?t.accountNum:0,r,n)}get checksum(){return this._checksum}getEvmAddress(){return this.evmAddress}async populateAccountNum(e){if(null===this.evmAddress)throw new Error("field `evmAddress` should not be null");const t=e.mirrorNetwork[0].slice(0,e.mirrorNetwork[0].indexOf(":"));await new Promise(e=>{setTimeout(e,3e3)});const r=`https://${t}/api/v1/accounts/${this.evmAddress.toString()}`,n=await fetch(r),o=(await n.json()).account;return this.num=Long.fromString(o.slice(o.lastIndexOf(".")+1)),this}async populateAccountEvmAddress(e){if(null===this.num)throw new Error("field `num` should not be null");const t=e.mirrorNetwork[0].slice(0,e.mirrorNetwork[0].indexOf(":"));await new Promise(e=>{setTimeout(e,3e3)});const r=`https://${t}/api/v1/accounts/${this.num.toString()}`,n=await fetch(r),o=(await n.json()).evm_address;return this.evmAddress=i$d.fromString(o),this}validate(e){console.warn("Deprecated: Use `validateChecksum` instead"),this.validateChecksum(e)}validateChecksum(e){if(null!=this.aliasKey)throw new Error("cannot calculate checksum with an account ID that has a aliasKey");S$1(this.shard,this.realm,this.num,this._checksum,e)}static fromBytes(t){return e._fromProtobuf(libExports.proto.AccountID.decode(t))}static fromSolidityAddress(t){return w$3(r$p(t))?new e(...w$2(t)):this.fromEvmAddress(0,0,t)}toSolidityAddress(){return null!=this.evmAddress?this.evmAddress.toString():null!=this.aliasKey&&"secp256k1"==this.aliasKey._key._type?this.aliasKey.toEvmAddress():y$1([this.shard,this.realm,this.num])}_toProtobuf(){let e=null;null!=this.aliasKey?e=libExports.proto.Key.encode(this.aliasKey._toProtobufKey()).finish():null!=this.evmAddress&&(e=this.evmAddress._bytes);const t=this.num.eq(Long.fromBigInt(0n))&&e;return e?{alias:t?e:null,accountNum:t?null:this.num,shardNum:this.shard,realmNum:this.realm}:{alias:null,accountNum:this.num,shardNum:this.shard,realmNum:this.realm}}toBytes(){return libExports.proto.AccountID.encode(this._toProtobuf()).finish()}toString(){let e=this.num.toString();return null!=this.aliasKey?e=this.aliasKey.toString():null!=this.evmAddress&&(e=this.evmAddress.toString()),`${this.shard.toString()}.${this.realm.toString()}.${e}`}toStringWithChecksum(e){if(null!=this.aliasKey)throw new Error("cannot calculate checksum with an account ID that has a aliasKey");return k$1(this.toString(),e)}equals(e){let t=!1;return null!=this.aliasKey&&null!=e.aliasKey?t=this.aliasKey.equals(e.aliasKey):null!=this.evmAddress&&null!=e.evmAddress?t=this.evmAddress.equals(e.evmAddress):null==this.aliasKey&&null==e.aliasKey&&null==this.evmAddress&&null==e.evmAddress&&(t=this.num.eq(e.num)),this.shard.eq(e.shard)&&this.realm.eq(e.realm)&&t}clone(){const t=new e(this);return t._checksum=this._checksum,t.aliasKey=this.aliasKey,t.evmAddress=this.evmAddress,t}compare(e){let t=this.shard.compare(e.shard);if(0!=t)return t;if(t=this.realm.compare(e.realm),0!=t)return t;if(null!=this.aliasKey&&null!=e.aliasKey){const t=this.aliasKey.toString(),r=e.aliasKey.toString();return t>r?1:t<r?-1:0}if(null!=this.evmAddress&&null!=e.evmAddress){const t=this.evmAddress.toString(),r=e.evmAddress.toString();return t>r?1:t<r?-1:0}return null==this.aliasKey&&null==e.aliasKey&&null==this.evmAddress&&null==e.evmAddress?this.num.compare(e.num):1}};t$s.setAccountIdConstructor((e,t,r)=>new f$2(e,t,Long.ZERO,r));const o$l=Long.fromNumber(1e9),n$l=new Set;let s$j=class e{constructor(e,t){this.seconds=e instanceof Long?e:Long.fromNumber(e),this.nanos=t instanceof Long?t:Long.fromNumber(t),Object.freeze(this)}static generate(t=!0){let r;r=t?Math.floor(5e3*Math.random())+3e3:0;const n=Date.now()-r,o=Math.floor(n/1e3)+t$s.timeDrift,i=1e6*Math.floor(n%1e3)+Math.floor(1e6*Math.random()),s=new e(o,i);return n$l.has(s.toString())?this.generate():(n$l.add(s.toString()),s)}static fromDate(t){let r;if("number"==typeof t)r=Long.fromNumber(t);else if("string"==typeof t)r=Long.fromNumber(Date.parse(t)).mul(1e6);else{if(!(t instanceof Date))throw new TypeError(`invalid type '${typeof t}' for 'data', expected 'Date'`);r=Long.fromNumber(t.getTime()).mul(1e6)}return new e(0,0).plusNanos(r)}toDate(){return new Date(1e3*this.seconds.toInt()+Math.floor(this.nanos.toInt()/1e6))}plusNanos(t){const r=this.nanos.add(t);return new e(this.seconds.add(r.div(o$l)),r.mod(o$l))}_toProtobuf(){return{seconds:this.seconds,nanos:this.nanos.toInt()}}static _fromProtobuf(t){return new e(t.seconds instanceof Long?t.seconds.toInt():null!=t.seconds?t.seconds:0,null!=t.nanos?t.nanos:0)}toString(){const e=String(this.nanos).padStart(9,"0");return`${this.seconds.toString()}.${e}`}compare(e){const t=this.seconds.compare(e.seconds);return 0!=t?t:this.nanos.compare(e.nanos)}},i$c=class e{constructor(e,t,r=!1,n=null){this.accountId=e,this.validStart=t,this.scheduled=r,this.nonce=null,null!=n&&0!=n&&this.setNonce(n),Object.seal(this)}setNonce(e){return this.nonce="number"==typeof e?Long.fromNumber(e):e,this}static withValidStart(t,r){return new e(t,r)}static generate(t){return new e("string"==typeof t?f$2.fromString(t):new f$2(t),s$j.generate())}static fromString(t){let r,n,o,i,s,a;return[r,a]=t.split("@"),[n,a]=a.split("."),a.includes("?")?([o,a]=a.split("?scheduled"),i=!0,s=a.includes("/")?a.replace("/",""):null):a.includes("/")?([o,s]=a.split("/"),i=!1):o=a,new e(f$2.fromString(r),new s$j(Long.fromValue(n),Long.fromValue(o)),i,null!=s?Long.fromString(s):null)}setScheduled(e){return this.scheduled=e,this}toString(){if(null!=this.accountId&&null!=this.validStart){const e=String(this.validStart.nanos).padStart(9,"0"),t=null!=this.nonce?"/".concat(this.nonce.toString()):"",r=this.scheduled?"?scheduled":"";return`${this.accountId.toString()}@${this.validStart.seconds.toString()}.${e}${r}${t}`}throw new Error("neither `accountId` nor `validStart` are set")}static _fromProtobuf(t){if(null!=t.accountID&&null!=t.transactionValidStart)return new e(f$2._fromProtobuf(t.accountID),s$j._fromProtobuf(t.transactionValidStart),null!=t.scheduled?t.scheduled:void 0,null!=t.nonce?t.nonce:void 0);throw new Error("Neither `nonce` or `accountID` and `transactionValidStart` are set")}_toProtobuf(){return{accountID:null!=this.accountId?this.accountId._toProtobuf():null,transactionValidStart:null!=this.validStart?this.validStart._toProtobuf():null,scheduled:this.scheduled,nonce:null!=this.nonce?this.nonce.toInt():null}}static fromBytes(t){return e._fromProtobuf(libExports.proto.TransactionID.decode(t))}toBytes(){return libExports.proto.TransactionID.encode(this._toProtobuf()).finish()}clone(){return new e(this.accountId,this.validStart,this.scheduled,this.nonce)}compare(e){const t=this.accountId.compare(e.accountId);return 0!=t?t:this.validStart.compare(e.validStart)}getReceipt(e){return t$s.transactionReceiptQueryConstructor().setTransactionId(this).execute(e)}async getRecord(e){return await this.getReceipt(e),t$s.transactionRecordQueryConstructor().setTransactionId(this).execute(e)}},t$n=class e extends t$q{constructor(){super(e=>i$f.fromString(e))}static _fromTransactionSigMap(t){const r=new e,n=null!=t.sigPair?t.sigPair:[];for(const e of n)null!=e.pubKeyPrefix&&(null!=e.ed25519?r._set(i$f.fromBytesED25519(e.pubKeyPrefix),e.ed25519):null!=e.ECDSASecp256k1&&r._set(i$f.fromBytesECDSA(e.pubKeyPrefix),e.ECDSASecp256k1));return r}addSignature(e,t){return this._set(e,t),this}},n$k=class e extends t$q{constructor(){super(e=>i$c.fromString(e))}static _fromSignedTransactions(t){const r=new e;for(const{bodyBytes:e,sigMap:n}of t.list)if(null!=e&&null!=n){const t=libExports.proto.TransactionBody.decode(e);if(null!=t.transactionID){const e=i$c._fromProtobuf(t.transactionID);r._set(e,t$n._fromTransactionSigMap(n))}}return r}addSignature(e,t,r){const n=this.get(e);n?n.addSignature(t,r):this._set(e,(new t$n).addSignature(t,r))}},t$m=class e{constructor(){this.list=[],this.locked=!1,this.index=0}setList(e){if(this.locked)throw new Error("list is locked");return this.list=e,this.index=0,this}push(...e){if(this.locked)throw new Error("list is locked");return this.list.push(...e),this}setLocked(){return this.locked=!0,this}clear(){this.list=[],this.index=0,this.locked=!1}get(e){return this.list[e]}set(e,t){return e===this.length?this.list.push(t):this.list[e]=t,this}setIfAbsent(e,t){return e!=this.length&&null!=this.list[e]||this.set(e,t()),this}get next(){return this.get(this.advance())}get current(){return this.get(this.index)}advance(){const e=this.index;return this.index=(this.index+1)%this.list.length,e}get isEmpty(){return 0===this.length}get length(){return this.list.length}clone(){const t=new e;return t.list=this.list,t.locked=this.locked,t}},e$q=class e extends t$q{constructor(){super(e=>f$2.fromString(e))}static _fromTransaction(t){const r=new e,n=t._nodeAccountIds.length,o=t._signedTransactions.length/n;for(let e=0;e<n;e++){const i=new t$m;for(let r=0;r<o;r++)i.push(t._signedTransactions.get(r*n+e));r._set(t._nodeAccountIds.list[e],n$k._fromSignedTransactions(i))}return r}addSignature(e,t,r,n){let o=this.get(e);return o||(o=new n$k,this._set(e,o)),o.addSignature(t,r,n),this._set(e,o),this}getFlatSignatureList(){const e=[];for(const t of this.values())for(const r of t.values())e.push(r);return e}},t$l=class{constructor(e){this.data=new Uint8Array(e),this.pos=0,this.oids=[],this.oidMap={"1.3.132.0.10":"ecdsa","1.3.101.112":"ed25519","1.2.840.10045.2.1":"pubkey"},this.isPublicKey=!1}readLength(){let e=this.data[this.pos++];if(128&e){let t=127&e;e=0;for(let r=0;r<t;r++)e=e<<8|this.data[this.pos++]}return e}readType(){return this.data[this.pos++]}readInteger(){const e=this.readLength();let t=0;for(let r=0;r<e;r++)t=t<<8|this.data[this.pos++];return{integer:t}}readOctetString(){const e=this.readLength(),t=this.data.slice(this.pos,this.pos+e);return this.pos+=e,{pkey:t}}readBitString(){const e=this.readLength(),t=this.data[this.pos++],r=this.data.slice(this.pos,this.pos+e-1);return this.pos+=e-1,{unusedBits:t,pubkey:r}}readObjectIdentifier(){const e=this.readLength(),t=this.pos+e,r=[];let n=0;const o=this.data[this.pos++];for(r.push(Math.floor(o/40)),r.push(o%40);this.pos<t;){const e=this.data[this.pos++];n=n<<7|127&e,128&e||(r.push(n),n=0)}const i=r.join(".");return this.oids.push(i),{oid:i}}getOids(){return this.oids}getOidKeyTypes(){return this.oids.map(e=>this.oidMap[e]||"unknown")}readSequence(){const e=this.readLength(),t=this.pos+e,r=[];for(;this.pos<t;)r.push(this.read());return r}read(){const e=this.readType();switch(e){case 2:return this.readInteger();case 3:return this.readBitString();case 4:return this.readOctetString();case 6:return this.readObjectIdentifier();case 48:case 160:case 161:return this.readSequence();default:throw new Error(`Unsupported type: ${e}`)}}isPublicKeyType(){return this.isPublicKey}};class g extends t$r{constructor(e){super(),this._key=e}static generateED25519(){return new g(PrivateKey.generateED25519())}static generateECDSA(){return new g(PrivateKey.generateECDSA())}static generate(){return g.generateED25519()}static async generateAsync(){return new g(await PrivateKey.generateAsync())}static async generateED25519Async(){return new g(await PrivateKey.generateED25519Async())}static async generateECDSAAsync(){return new g(await PrivateKey.generateECDSAAsync())}static fromBytes(e){const t=hexlify(e);return g.isDerKey(t)?"ecdsa"===g.getAlgorithm(t)?new g(PrivateKey.fromBytesECDSA(e)):new g(PrivateKey.fromBytesED25519(e)):new g(PrivateKey.fromBytes(e))}static fromBytesECDSA(e){return new g(PrivateKey.fromBytesECDSA(e))}static fromBytesED25519(e){return new g(PrivateKey.fromBytesED25519(e))}static fromString(e){return g.isDerKey(e)?this.fromStringDer(e):new g(PrivateKey.fromString(e))}static fromStringDer(e){return g.isDerKey(e)?"ecdsa"===g.getAlgorithm(e)?this.fromStringECDSA(e):this.fromStringED25519(e):g.fromString(e)}static fromStringECDSA(e){return new g(PrivateKey.fromStringECDSA(e))}static fromStringED25519(e){return new g(PrivateKey.fromStringED25519(e))}static async fromSeedED25519(e){return new g(await PrivateKey.fromSeedED25519(e))}static async fromSeedECDSAsecp256k1(e){return new g(await PrivateKey.fromSeedECDSAsecp256k1(e))}static async fromMnemonic(e,t=""){return new g(e instanceof a$9?await PrivateKey.fromMnemonic(e._mnemonic,t):await PrivateKey.fromMnemonic(e,t))}static async fromKeystore(e,t=""){return new g(await PrivateKey.fromKeystore(e,t))}static async fromPem(e,t=""){return new g(await PrivateKey.fromPem(e,t))}async derive(e){return new g(await this._key.derive(e))}async legacyDerive(e){return new g(await this._key.legacyDerive(e))}get publicKey(){return new i$f(this._key.publicKey)}get chainCode(){return this._key._chainCode}sign(e){return this._key.sign(e)}signTransaction(e,t=!1){if(t)return this._signTransactionLegacy(e);const r=new e$q;for(const n of e._signedTransactions.list){const e=n.bodyBytes;if(!e)throw new Error("Body bytes are missing");const t=libExports.proto.TransactionBody.decode(e);if(!t.transactionID||!t.nodeAccountID)throw new Error("Transaction ID or Node Account ID not found in the signed transaction");const o=f$2._fromProtobuf(t.nodeAccountID),i=i$c._fromProtobuf(t.transactionID),s=this._key.sign(e);r.addSignature(o,i,this.publicKey,s)}return e.addSignature(this.publicKey,r),r}_signTransactionLegacy(e){const t=e._signedTransactions.list.map(e=>{const t=e.bodyBytes;return t?this._key.sign(t):new Uint8Array});return e.addSignature(this.publicKey,t),1===t.length?t[0]:t}isDerivable(){return this._key.isDerivable()}toBytes(){return this._key.toBytes()}toBytesDer(){return this._key.toBytesDer()}toBytesRaw(){return this._key.toBytesRaw()}toString(){return this._key.toStringDer()}toStringDer(){return this._key.toStringDer()}toStringRaw(){return this._key.toStringRaw()}toKeystore(e=""){return this._key.toKeystore(e)}_toProtobufKey(){return this.publicKey._toProtobufKey()}toAccountId(e,t){return this.publicKey.toAccountId(e,t)}get type(){return this._key._type}getRecoveryId(e,t,r){return this._key.getRecoveryId(e,t,r)}static getAlgorithm(e){if(!g.isDerKey(e))throw new Error("Only der keys are supported");const t=new t$l(Uint8Array.from(r$p(e)));return t.read(),t.getOidKeyTypes()[0]}static isDerKey(e){try{const t=Uint8Array.from(r$p(e));return new t$l(t).read(),!0}catch(t){return!1}}}t$s.setPrivateKeyConstructor(e=>new g(e));let s$i=class e extends t$r{constructor(e,t){super(),this._keys=null==e?[]:e instanceof t$r?[e]:e,this._threshold=null==t?null:t}static of(...t){return new e(t,null)}static from(t,r,n){return new e(null==r?Array.from(t):Array.from(t,r,n))}get threshold(){return this._threshold}setThreshold(e){return this._threshold=e,this}push(...e){return this._keys.push(...e)}splice(t,r,...n){return new e(this._keys.splice(t,r,...n),this.threshold)}slice(t,r){return new e(this._keys.slice(t,r),this.threshold)}[Symbol.iterator](){return this._keys[Symbol.iterator]()}toArray(){return this._keys.slice()}toString(){return JSON.stringify({threshold:this._threshold,keys:this._keys.toString()})}_toProtobufKey(){const e=this._keys.map(e=>e._toProtobufKey());return null==this.threshold?{keyList:{keys:e}}:{thresholdKey:{threshold:this.threshold,keys:{keys:e}}}}static __fromProtobufKeyList(t){const r=(null!=t.keys?t.keys:[]).map(e=>t$r._fromProtobufKey(e));return new e(r)}static __fromProtobufThresoldKey(t){const r=e.__fromProtobufKeyList(null!=t.keys?t.keys:{});return r.setThreshold(null!=t.threshold?t.threshold:0),r}};function i$b(e){return BigNumber$2.isBigNumber(e)?e:new BigNumber$2(e.toString())}t$s.setKeyList(e=>s$i.__fromProtobufKeyList(e)),t$s.setThresholdKey(e=>s$i.__fromProtobufThresoldKey(e));let e$p=class e{constructor(e,t,r){this._name=e,this._symbol=t,this._tinybar=r,Object.freeze(this)}static fromString(t){switch(t){case e.Hbar._symbol:return e.Hbar;case e.Tinybar._symbol:return e.Tinybar;case e.Microbar._symbol:return e.Microbar;case e.Millibar._symbol:return e.Millibar;case e.Kilobar._symbol:return e.Kilobar;case e.Megabar._symbol:return e.Megabar;case e.Gigabar._symbol:return e.Gigabar;default:throw new Error("Unknown unit.")}}};e$p.Tinybar=new e$p("tinybar","tℏ",new BigNumber$2(1)),e$p.Microbar=new e$p("microbar","μℏ",new BigNumber$2(100)),e$p.Millibar=new e$p("millibar","mℏ",new BigNumber$2(1e5)),e$p.Hbar=new e$p("hbar","ℏ",new BigNumber$2("100000000")),e$p.Kilobar=new e$p("kilobar","kℏ",new BigNumber$2(1e3).multipliedBy(new BigNumber$2("100000000"))),e$p.Megabar=new e$p("megabar","Mℏ",new BigNumber$2(1e6).multipliedBy(new BigNumber$2("100000000"))),e$p.Gigabar=new e$p("gigabar","Gℏ",new BigNumber$2("1000000000").multipliedBy(new BigNumber$2("100000000")));let e$o=class e{constructor(e,t=e$p.Hbar){if(t===e$p.Tinybar)this._valueInTinybar=i$b(e);else{let r;r=Long.isLong(e)?new BigNumber$2(e.toString(10)):BigNumber$2.isBigNumber(e)||"string"==typeof e||"number"==typeof e?new BigNumber$2(e):new BigNumber$2(0),this._valueInTinybar=r.multipliedBy(t._tinybar)}if(!this._valueInTinybar.isInteger())throw new Error("Hbar in tinybars contains decimals")}static from(t,r){return new e(t,r)}static fromTinybars(t){return"string"==typeof t?this.fromString(t,e$p.Tinybar):new e(t,e$p.Tinybar)}static fromString(t,r=e$p.Hbar){if(/^((?:\+|-)?\d+(?:\.\d+)?)(?: (tℏ|μℏ|mℏ|ℏ|kℏ|Mℏ|Gℏ))?$/.test(t)){let[n,o]=t.split(" ");return null!=o&&(r=e$p.fromString(o)),new e(new BigNumber$2(n),r)}throw new Error("invalid argument provided")}to(e){return this._valueInTinybar.dividedBy(e._tinybar)}toBigNumber(){return this.to(e$p.Hbar)}toTinybars(){return Long.fromValue(this._valueInTinybar.toFixed())}negated(){return e.fromTinybars(this._valueInTinybar.negated())}isNegative(){return this._valueInTinybar.isNegative()}toString(e){return null!=e?`${this._valueInTinybar.dividedBy(e._tinybar).toString()} ${e._symbol}`:this._valueInTinybar.isLessThan(1e4)&&this._valueInTinybar.isGreaterThan(-1e4)?`${this._valueInTinybar.toFixed()} ${e$p.Tinybar._symbol}`:`${this.to(e$p.Hbar).toString()} ${e$p.Hbar._symbol}`}},t$k=class e extends Error{constructor(t,r){super(r),this.name="StatusError",this.status=t.status,this.transactionId=t.transactionId,this.message=r,void 0!==Error.captureStackTrace&&Error.captureStackTrace(this,e)}toJSON(){return{name:this.name,status:this.status.toString(),transactionId:this.transactionId.toString(),message:this.message}}toString(){return JSON.stringify(this.toJSON())}valueOf(){return this.toJSON()}},r$n=class extends t$k{constructor(e){super(e,`receipt for transaction ${e.transactionId.toString()} contained error status ${e.status.toString()}`),this.transactionReceipt=e.transactionReceipt}},e$n=class e{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case e.Ok:return"OK";case e.InvalidTransaction:return"INVALID_TRANSACTION";case e.PayerAccountNotFound:return"PAYER_ACCOUNT_NOT_FOUND";case e.InvalidNodeAccount:return"INVALID_NODE_ACCOUNT";case e.TransactionExpired:return"TRANSACTION_EXPIRED";case e.InvalidTransactionStart:return"INVALID_TRANSACTION_START";case e.InvalidTransactionDuration:return"INVALID_TRANSACTION_DURATION";case e.InvalidSignature:return"INVALID_SIGNATURE";case e.MemoTooLong:return"MEMO_TOO_LONG";case e.InsufficientTxFee:return"INSUFFICIENT_TX_FEE";case e.InsufficientPayerBalance:return"INSUFFICIENT_PAYER_BALANCE";case e.DuplicateTransaction:return"DUPLICATE_TRANSACTION";case e.Busy:return"BUSY";case e.NotSupported:return"NOT_SUPPORTED";case e.InvalidFileId:return"INVALID_FILE_ID";case e.InvalidAccountId:return"INVALID_ACCOUNT_ID";case e.InvalidContractId:return"INVALID_CONTRACT_ID";case e.InvalidTransactionId:return"INVALID_TRANSACTION_ID";case e.ReceiptNotFound:return"RECEIPT_NOT_FOUND";case e.RecordNotFound:return"RECORD_NOT_FOUND";case e.InvalidSolidityId:return"INVALID_SOLIDITY_ID";case e.Unknown:return"UNKNOWN";case e.Success:return"SUCCESS";case e.FailInvalid:return"FAIL_INVALID";case e.FailFee:return"FAIL_FEE";case e.FailBalance:return"FAIL_BALANCE";case e.KeyRequired:return"KEY_REQUIRED";case e.BadEncoding:return"BAD_ENCODING";case e.InsufficientAccountBalance:return"INSUFFICIENT_ACCOUNT_BALANCE";case e.InvalidSolidityAddress:return"INVALID_SOLIDITY_ADDRESS";case e.InsufficientGas:return"INSUFFICIENT_GAS";case e.ContractSizeLimitExceeded:return"CONTRACT_SIZE_LIMIT_EXCEEDED";case e.LocalCallModificationException:return"LOCAL_CALL_MODIFICATION_EXCEPTION";case e.ContractRevertExecuted:return"CONTRACT_REVERT_EXECUTED";case e.ContractExecutionException:return"CONTRACT_EXECUTION_EXCEPTION";case e.InvalidReceivingNodeAccount:return"INVALID_RECEIVING_NODE_ACCOUNT";case e.MissingQueryHeader:return"MISSING_QUERY_HEADER";case e.AccountUpdateFailed:return"ACCOUNT_UPDATE_FAILED";case e.InvalidKeyEncoding:return"INVALID_KEY_ENCODING";case e.NullSolidityAddress:return"NULL_SOLIDITY_ADDRESS";case e.ContractUpdateFailed:return"CONTRACT_UPDATE_FAILED";case e.InvalidQueryHeader:return"INVALID_QUERY_HEADER";case e.InvalidFeeSubmitted:return"INVALID_FEE_SUBMITTED";case e.InvalidPayerSignature:return"INVALID_PAYER_SIGNATURE";case e.KeyNotProvided:return"KEY_NOT_PROVIDED";case e.InvalidExpirationTime:return"INVALID_EXPIRATION_TIME";case e.NoWaclKey:return"NO_WACL_KEY";case e.FileContentEmpty:return"FILE_CONTENT_EMPTY";case e.InvalidAccountAmounts:return"INVALID_ACCOUNT_AMOUNTS";case e.EmptyTransactionBody:return"EMPTY_TRANSACTION_BODY";case e.InvalidTransactionBody:return"INVALID_TRANSACTION_BODY";case e.InvalidSignatureTypeMismatchingKey:return"INVALID_SIGNATURE_TYPE_MISMATCHING_KEY";case e.InvalidSignatureCountMismatchingKey:return"INVALID_SIGNATURE_COUNT_MISMATCHING_KEY";case e.EmptyLiveHashBody:return"EMPTY_LIVE_HASH_BODY";case e.EmptyLiveHash:return"EMPTY_LIVE_HASH";case e.EmptyLiveHashKeys:return"EMPTY_LIVE_HASH_KEYS";case e.InvalidLiveHashSize:return"INVALID_LIVE_HASH_SIZE";case e.EmptyQueryBody:return"EMPTY_QUERY_BODY";case e.EmptyLiveHashQuery:return"EMPTY_LIVE_HASH_QUERY";case e.LiveHashNotFound:return"LIVE_HASH_NOT_FOUND";case e.AccountIdDoesNotExist:return"ACCOUNT_ID_DOES_NOT_EXIST";case e.LiveHashAlreadyExists:return"LIVE_HASH_ALREADY_EXISTS";case e.InvalidFileWacl:return"INVALID_FILE_WACL";case e.SerializationFailed:return"SERIALIZATION_FAILED";case e.TransactionOversize:return"TRANSACTION_OVERSIZE";case e.TransactionTooManyLayers:return"TRANSACTION_TOO_MANY_LAYERS";case e.ContractDeleted:return"CONTRACT_DELETED";case e.PlatformNotActive:return"PLATFORM_NOT_ACTIVE";case e.KeyPrefixMismatch:return"KEY_PREFIX_MISMATCH";case e.PlatformTransactionNotCreated:return"PLATFORM_TRANSACTION_NOT_CREATED";case e.InvalidRenewalPeriod:return"INVALID_RENEWAL_PERIOD";case e.InvalidPayerAccountId:return"INVALID_PAYER_ACCOUNT_ID";case e.AccountDeleted:return"ACCOUNT_DELETED";case e.FileDeleted:return"FILE_DELETED";case e.AccountRepeatedInAccountAmounts:return"ACCOUNT_REPEATED_IN_ACCOUNT_AMOUNTS";case e.SettingNegativeAccountBalance:return"SETTING_NEGATIVE_ACCOUNT_BALANCE";case e.ObtainerRequired:return"OBTAINER_REQUIRED";case e.ObtainerSameContractId:return"OBTAINER_SAME_CONTRACT_ID";case e.ObtainerDoesNotExist:return"OBTAINER_DOES_NOT_EXIST";case e.ModifyingImmutableContract:return"MODIFYING_IMMUTABLE_CONTRACT";case e.FileSystemException:return"FILE_SYSTEM_EXCEPTION";case e.AutorenewDurationNotInRange:return"AUTORENEW_DURATION_NOT_IN_RANGE";case e.ErrorDecodingBytestring:return"ERROR_DECODING_BYTESTRING";case e.ContractFileEmpty:return"CONTRACT_FILE_EMPTY";case e.ContractBytecodeEmpty:return"CONTRACT_BYTECODE_EMPTY";case e.InvalidInitialBalance:return"INVALID_INITIAL_BALANCE";case e.InvalidReceiveRecordThreshold:return"INVALID_RECEIVE_RECORD_THRESHOLD";case e.InvalidSendRecordThreshold:return"INVALID_SEND_RECORD_THRESHOLD";case e.AccountIsNotGenesisAccount:return"ACCOUNT_IS_NOT_GENESIS_ACCOUNT";case e.PayerAccountUnauthorized:return"PAYER_ACCOUNT_UNAUTHORIZED";case e.InvalidFreezeTransactionBody:return"INVALID_FREEZE_TRANSACTION_BODY";case e.FreezeTransactionBodyNotFound:return"FREEZE_TRANSACTION_BODY_NOT_FOUND";case e.TransferListSizeLimitExceeded:return"TRANSFER_LIST_SIZE_LIMIT_EXCEEDED";case e.ResultSizeLimitExceeded:return"RESULT_SIZE_LIMIT_EXCEEDED";case e.NotSpecialAccount:return"NOT_SPECIAL_ACCOUNT";case e.ContractNegativeGas:return"CONTRACT_NEGATIVE_GAS";case e.ContractNegativeValue:return"CONTRACT_NEGATIVE_VALUE";case e.InvalidFeeFile:return"INVALID_FEE_FILE";case e.InvalidExchangeRateFile:return"INVALID_EXCHANGE_RATE_FILE";case e.InsufficientLocalCallGas:return"INSUFFICIENT_LOCAL_CALL_GAS";case e.EntityNotAllowedToDelete:return"ENTITY_NOT_ALLOWED_TO_DELETE";case e.AuthorizationFailed:return"AUTHORIZATION_FAILED";case e.FileUploadedProtoInvalid:return"FILE_UPLOADED_PROTO_INVALID";case e.FileUploadedProtoNotSavedToDisk:return"FILE_UPLOADED_PROTO_NOT_SAVED_TO_DISK";case e.FeeScheduleFilePartUploaded:return"FEE_SCHEDULE_FILE_PART_UPLOADED";case e.ExchangeRateChangeLimitExceeded:return"EXCHANGE_RATE_CHANGE_LIMIT_EXCEEDED";case e.MaxContractStorageExceeded:return"MAX_CONTRACT_STORAGE_EXCEEDED";case e.TransferAccountSameAsDeleteAccount:return"TRANSFER_ACCOUNT_SAME_AS_DELETE_ACCOUNT";case e.TotalLedgerBalanceInvalid:return"TOTAL_LEDGER_BALANCE_INVALID";case e.ExpirationReductionNotAllowed:return"EXPIRATION_REDUCTION_NOT_ALLOWED";case e.MaxGasLimitExceeded:return"MAX_GAS_LIMIT_EXCEEDED";case e.MaxFileSizeExceeded:return"MAX_FILE_SIZE_EXCEEDED";case e.ReceiverSigRequired:return"RECEIVER_SIG_REQUIRED";case e.InvalidTopicId:return"INVALID_TOPIC_ID";case e.InvalidAdminKey:return"INVALID_ADMIN_KEY";case e.InvalidSubmitKey:return"INVALID_SUBMIT_KEY";case e.Unauthorized:return"UNAUTHORIZED";case e.InvalidTopicMessage:return"INVALID_TOPIC_MESSAGE";case e.InvalidAutorenewAccount:return"INVALID_AUTORENEW_ACCOUNT";case e.AutorenewAccountNotAllowed:return"AUTORENEW_ACCOUNT_NOT_ALLOWED";case e.TopicExpired:return"TOPIC_EXPIRED";case e.InvalidChunkNumber:return"INVALID_CHUNK_NUMBER";case e.InvalidChunkTransactionId:return"INVALID_CHUNK_TRANSACTION_ID";case e.AccountFrozenForToken:return"ACCOUNT_FROZEN_FOR_TOKEN";case e.TokensPerAccountLimitExceeded:return"TOKENS_PER_ACCOUNT_LIMIT_EXCEEDED";case e.InvalidTokenId:return"INVALID_TOKEN_ID";case e.InvalidTokenDecimals:return"INVALID_TOKEN_DECIMALS";case e.InvalidTokenInitialSupply:return"INVALID_TOKEN_INITIAL_SUPPLY";case e.InvalidTreasuryAccountForToken:return"INVALID_TREASURY_ACCOUNT_FOR_TOKEN";case e.InvalidTokenSymbol:return"INVALID_TOKEN_SYMBOL";case e.TokenHasNoFreezeKey:return"TOKEN_HAS_NO_FREEZE_KEY";case e.TransfersNotZeroSumForToken:return"TRANSFERS_NOT_ZERO_SUM_FOR_TOKEN";case e.MissingTokenSymbol:return"MISSING_TOKEN_SYMBOL";case e.TokenSymbolTooLong:return"TOKEN_SYMBOL_TOO_LONG";case e.AccountKycNotGrantedForToken:return"ACCOUNT_KYC_NOT_GRANTED_FOR_TOKEN";case e.TokenHasNoKycKey:return"TOKEN_HAS_NO_KYC_KEY";case e.InsufficientTokenBalance:return"INSUFFICIENT_TOKEN_BALANCE";case e.TokenWasDeleted:return"TOKEN_WAS_DELETED";case e.TokenHasNoSupplyKey:return"TOKEN_HAS_NO_SUPPLY_KEY";case e.TokenHasNoWipeKey:return"TOKEN_HAS_NO_WIPE_KEY";case e.InvalidTokenMintAmount:return"INVALID_TOKEN_MINT_AMOUNT";case e.InvalidTokenBurnAmount:return"INVALID_TOKEN_BURN_AMOUNT";case e.TokenNotAssociatedToAccount:return"TOKEN_NOT_ASSOCIATED_TO_ACCOUNT";case e.CannotWipeTokenTreasuryAccount:return"CANNOT_WIPE_TOKEN_TREASURY_ACCOUNT";case e.InvalidKycKey:return"INVALID_KYC_KEY";case e.InvalidWipeKey:return"INVALID_WIPE_KEY";case e.InvalidFreezeKey:return"INVALID_FREEZE_KEY";case e.InvalidSupplyKey:return"INVALID_SUPPLY_KEY";case e.MissingTokenName:return"MISSING_TOKEN_NAME";case e.TokenNameTooLong:return"TOKEN_NAME_TOO_LONG";case e.InvalidWipingAmount:return"INVALID_WIPING_AMOUNT";case e.TokenIsImmutable:return"TOKEN_IS_IMMUTABLE";case e.TokenAlreadyAssociatedToAccount:return"TOKEN_ALREADY_ASSOCIATED_TO_ACCOUNT";case e.TransactionRequiresZeroTokenBalances:return"TRANSACTION_REQUIRES_ZERO_TOKEN_BALANCES";case e.AccountIsTreasury:return"ACCOUNT_IS_TREASURY";case e.TokenIdRepeatedInTokenList:return"TOKEN_ID_REPEATED_IN_TOKEN_LIST";case e.TokenTransferListSizeLimitExceeded:return"TOKEN_TRANSFER_LIST_SIZE_LIMIT_EXCEEDED";case e.EmptyTokenTransferBody:return"EMPTY_TOKEN_TRANSFER_BODY";case e.EmptyTokenTransferAccountAmounts:return"EMPTY_TOKEN_TRANSFER_ACCOUNT_AMOUNTS";case e.InvalidScheduleId:return"INVALID_SCHEDULE_ID";case e.ScheduleIsImmutable:return"SCHEDULE_IS_IMMUTABLE";case e.InvalidSchedulePayerId:return"INVALID_SCHEDULE_PAYER_ID";case e.InvalidScheduleAccountId:return"INVALID_SCHEDULE_ACCOUNT_ID";case e.NoNewValidSignatures:return"NO_NEW_VALID_SIGNATURES";case e.UnresolvableRequiredSigners:return"UNRESOLVABLE_REQUIRED_SIGNERS";case e.ScheduledTransactionNotInWhitelist:return"SCHEDULED_TRANSACTION_NOT_IN_WHITELIST";case e.SomeSignaturesWereInvalid:return"SOME_SIGNATURES_WERE_INVALID";case e.TransactionIdFieldNotAllowed:return"TRANSACTION_ID_FIELD_NOT_ALLOWED";case e.IdenticalScheduleAlreadyCreated:return"IDENTICAL_SCHEDULE_ALREADY_CREATED";case e.InvalidZeroByteInString:return"INVALID_ZERO_BYTE_IN_STRING";case e.ScheduleAlreadyDeleted:return"SCHEDULE_ALREADY_DELETED";case e.ScheduleAlreadyExecuted:return"SCHEDULE_ALREADY_EXECUTED";case e.MessageSizeTooLarge:return"MESSAGE_SIZE_TOO_LARGE";case e.OperationRepeatedInBucketGroups:return"OPERATION_REPEATED_IN_BUCKET_GROUPS";case e.BucketCapacityOverflow:return"BUCKET_CAPACITY_OVERFLOW";case e.NodeCapacityNotSufficientForOperation:return"NODE_CAPACITY_NOT_SUFFICIENT_FOR_OPERATION";case e.BucketHasNoThrottleGroups:return"BUCKET_HAS_NO_THROTTLE_GROUPS";case e.ThrottleGroupHasZeroOpsPerSec:return"THROTTLE_GROUP_HAS_ZERO_OPS_PER_SEC";case e.SuccessButMissingExpectedOperation:return"SUCCESS_BUT_MISSING_EXPECTED_OPERATION";case e.UnparseableThrottleDefinitions:return"UNPARSEABLE_THROTTLE_DEFINITIONS";case e.InvalidThrottleDefinitions:return"INVALID_THROTTLE_DEFINITIONS";case e.AccountExpiredAndPendingRemoval:return"ACCOUNT_EXPIRED_AND_PENDING_REMOVAL";case e.InvalidTokenMaxSupply:return"INVALID_TOKEN_MAX_SUPPLY";case e.InvalidTokenNftSerialNumber:return"INVALID_TOKEN_NFT_SERIAL_NUMBER";case e.InvalidNftId:return"INVALID_NFT_ID";case e.MetadataTooLong:return"METADATA_TOO_LONG";case e.BatchSizeLimitExceeded:return"BATCH_SIZE_LIMIT_EXCEEDED";case e.InvalidQueryRange:return"INVALID_QUERY_RANGE";case e.FractionDividesByZero:return"FRACTION_DIVIDES_BY_ZERO";case e.InsufficientPayerBalanceForCustomFee:return"INSUFFICIENT_PAYER_BALANCE_FOR_CUSTOM_FEE";case e.CustomFeesListTooLong:return"CUSTOM_FEES_LIST_TOO_LONG";case e.InvalidCustomFeeCollector:return"INVALID_CUSTOM_FEE_COLLECTOR";case e.InvalidTokenIdInCustomFees:return"INVALID_TOKEN_ID_IN_CUSTOM_FEES";case e.TokenNotAssociatedToFeeCollector:return"TOKEN_NOT_ASSOCIATED_TO_FEE_COLLECTOR";case e.TokenMaxSupplyReached:return"TOKEN_MAX_SUPPLY_REACHED";case e.SenderDoesNotOwnNftSerialNo:return"SENDER_DOES_NOT_OWN_NFT_SERIAL_NO";case e.CustomFeeNotFullySpecified:return"CUSTOM_FEE_NOT_FULLY_SPECIFIED";case e.CustomFeeMustBePositive:return"CUSTOM_FEE_MUST_BE_POSITIVE";case e.TokenHasNoFeeScheduleKey:return"TOKEN_HAS_NO_FEE_SCHEDULE_KEY";case e.CustomFeeOutsideNumericRange:return"CUSTOM_FEE_OUTSIDE_NUMERIC_RANGE";case e.RoyaltyFractionCannotExceedOne:return"ROYALTY_FRACTION_CANNOT_EXCEED_ONE";case e.FractionalFeeMaxAmountLessThanMinAmount:return"FRACTIONAL_FEE_MAX_AMOUNT_LESS_THAN_MIN_AMOUNT";case e.CustomScheduleAlreadyHasNoFees:return"CUSTOM_SCHEDULE_ALREADY_HAS_NO_FEES";case e.CustomFeeDenominationMustBeFungibleCommon:return"CUSTOM_FEE_DENOMINATION_MUST_BE_FUNGIBLE_COMMON";case e.CustomFractionalFeeOnlyAllowedForFungibleCommon:return"CUSTOM_FRACTIONAL_FEE_ONLY_ALLOWED_FOR_FUNGIBLE_COMMON";case e.InvalidCustomFeeScheduleKey:return"INVALID_CUSTOM_FEE_SCHEDULE_KEY";case e.InvalidTokenMintMetadata:return"INVALID_TOKEN_MINT_METADATA";case e.InvalidTokenBurnMetadata:return"INVALID_TOKEN_BURN_METADATA";case e.CurrentTreasuryStillOwnsNfts:return"CURRENT_TREASURY_STILL_OWNS_NFTS";case e.AccountStillOwnsNfts:return"ACCOUNT_STILL_OWNS_NFTS";case e.TreasuryMustOwnBurnedNft:return"TREASURY_MUST_OWN_BURNED_NFT";case e.AccountDoesNotOwnWipedNft:return"ACCOUNT_DOES_NOT_OWN_WIPED_NFT";case e.AccountAmountTransfersOnlyAllowedForFungibleCommon:return"ACCOUNT_AMOUNT_TRANSFERS_ONLY_ALLOWED_FOR_FUNGIBLE_COMMON";case e.MaxNftsInPriceRegimeHaveBeenMinted:return"MAX_NFTS_IN_PRICE_REGIME_HAVE_BEEN_MINTED";case e.PayerAccountDeleted:return"PAYER_ACCOUNT_DELETED";case e.CustomFeeChargingExceededMaxRecursionDepth:return"CUSTOM_FEE_CHARGING_EXCEEDED_MAX_RECURSION_DEPTH";case e.CustomFeeChargingExceededMaxAccountAmounts:return"CUSTOM_FEE_CHARGING_EXCEEDED_MAX_ACCOUNT_AMOUNTS";case e.InsufficientSenderAccountBalanceForCustomFee:return"INSUFFICIENT_SENDER_ACCOUNT_BALANCE_FOR_CUSTOM_FEE";case e.SerialNumberLimitReached:return"SERIAL_NUMBER_LIMIT_REACHED";case e.CustomRoyaltyFeeOnlyAllowedForNonFungibleUnique:return"CUSTOM_ROYALTY_FEE_ONLY_ALLOWED_FOR_NON_FUNGIBLE_UNIQUE";case e.NoRemainingAutomaticAssociations:return"NO_REMAINING_AUTOMATIC_ASSOCIATIONS";case e.ExistingAutomaticAssociationsExceedGivenLimit:return"EXISTING_AUTOMATIC_ASSOCIATIONS_EXCEED_GIVEN_LIMIT";case e.RequestedNumAutomaticAssociationsExceedsAssociationLimit:return"REQUESTED_NUM_AUTOMATIC_ASSOCIATIONS_EXCEEDS_ASSOCIATION_LIMIT";case e.TokenIsPaused:return"TOKEN_IS_PAUSED";case e.TokenHasNoPauseKey:return"TOKEN_HAS_NO_PAUSE_KEY";case e.InvalidPauseKey:return"INVALID_PAUSE_KEY";case e.FreezeUpdateFileDoesNotExist:return"FREEZE_UPDATE_FILE_DOES_NOT_EXIST";case e.FreezeUpdateFileHashDoesNotMatch:return"FREEZE_UPDATE_FILE_HASH_DOES_NOT_MATCH";case e.NoUpgradeHasBeenPrepared:return"NO_UPGRADE_HAS_BEEN_PREPARED";case e.NoFreezeIsScheduled:return"NO_FREEZE_IS_SCHEDULED";case e.UpdateFileHashChangedSincePrepareUpgrade:return"UPDATE_FILE_HASH_CHANGED_SINCE_PREPARE_UPGRADE";case e.FreezeStartTimeMustBeFuture:return"FREEZE_START_TIME_MUST_BE_FUTURE";case e.PreparedUpdateFileIsImmutable:return"PREPARED_UPDATE_FILE_IS_IMMUTABLE";case e.FreezeAlreadyScheduled:return"FREEZE_ALREADY_SCHEDULED";case e.FreezeUpgradeInProgress:return"FREEZE_UPGRADE_IN_PROGRESS";case e.UpdateFileIdDoesNotMatchPrepared:return"UPDATE_FILE_ID_DOES_NOT_MATCH_PREPARED";case e.UpdateFileHashDoesNotMatchPrepared:return"UPDATE_FILE_HASH_DOES_NOT_MATCH_PREPARED";case e.ConsensusGasExhausted:return"CONSENSUS_GAS_EXHAUSTED";case e.RevertedSuccess:return"REVERTED_SUCCESS";case e.MaxStorageInPriceRegimeHasBeenUsed:return"MAX_STORAGE_IN_PRICE_REGIME_HAS_BEEN_USED";case e.InvalidAliasKey:return"INVALID_ALIAS_KEY";case e.UnexpectedTokenDecimals:return"UNEXPECTED_TOKEN_DECIMALS";case e.InvalidProxyAccountId:return"INVALID_PROXY_ACCOUNT_ID";case e.InvalidTransferAccountId:return"INVALID_TRANSFER_ACCOUNT_ID";case e.InvalidFeeCollectorAccountId:return"INVALID_FEE_COLLECTOR_ACCOUNT_ID";case e.AliasIsImmutable:return"ALIAS_IS_IMMUTABLE";case e.SpenderAccountSameAsOwner:return"SPENDER_ACCOUNT_SAME_AS_OWNER";case e.AmountExceedsTokenMaxSupply:return"AMOUNT_EXCEEDS_TOKEN_MAX_SUPPLY";case e.NegativeAllowanceAmount:return"NEGATIVE_ALLOWANCE_AMOUNT";case e.CannotApproveForAllFungibleCommon:return"CANNOT_APPROVE_FOR_ALL_FUNGIBLE_COMMON";case e.SpenderDoesNotHaveAllowance:return"SPENDER_DOES_NOT_HAVE_ALLOWANCE";case e.AmountExceedsAllowance:return"AMOUNT_EXCEEDS_ALLOWANCE";case e.MaxAllowancesExceeded:return"MAX_ALLOWANCES_EXCEEDED";case e.EmptyAllowances:return"EMPTY_ALLOWANCES";case e.SpenderAccountRepeatedInAllowances:return"SPENDER_ACCOUNT_REPEATED_IN_ALLOWANCES";case e.RepeatedSerialNumsInNftAllowances:return"REPEATED_SERIAL_NUMS_IN_NFT_ALLOWANCES";case e.FungibleTokenInNftAllowances:return"FUNGIBLE_TOKEN_IN_NFT_ALLOWANCES";case e.NftInFungibleTokenAllowances:return"NFT_IN_FUNGIBLE_TOKEN_ALLOWANCES";case e.InvalidAllowanceOwnerId:return"INVALID_ALLOWANCE_OWNER_ID";case e.InvalidAllowanceSpenderId:return"INVALID_ALLOWANCE_SPENDER_ID";case e.RepeatedAllowancesToDelete:return"REPEATED_ALLOWANCES_TO_DELETE";case e.InvalidDelegatingSpender:return"INVALID_DELEGATING_SPENDER";case e.DelegatingSpenderCannotGrantApproveForAll:return"DELEGATING_SPENDER_CANNOT_GRANT_APPROVE_FOR_ALL";case e.DelegatingSpenderDoesNotHaveApproveForAll:return"DELEGATING_SPENDER_DOES_NOT_HAVE_APPROVE_FOR_ALL";case e.ScheduleExpirationTimeTooFarInFuture:return"SCHEDULE_EXPIRATION_TIME_TOO_FAR_IN_FUTURE";case e.ScheduleExpirationTimeMustBeHigherThanConsensusTime:return"SCHEDULE_EXPIRATION_TIME_MUST_BE_HIGHER_THAN_CONSENSUS_TIME";case e.ScheduleFutureThrottleExceeded:return"SCHEDULE_FUTURE_THROTTLE_EXCEEDED";case e.ScheduleFutureGasLimitExceeded:return"SCHEDULE_FUTURE_GAS_LIMIT_EXCEEDED";case e.InvalidEthereumTransaction:return"INVALID_ETHEREUM_TRANSACTION";case e.WrongChainId:return"WRONG_CHAIN_ID";case e.WrongNonce:return"WRONG_NONCE";case e.AccessListUnsupported:return"ACCESS_LIST_UNSUPPORTED";case e.SchedulePendingExpiration:return"SCHEDULE_PENDING_EXPIRATION";case e.ContractIsTokenTreasury:return"CONTRACT_IS_TOKEN_TREASURY";case e.ContractHasNonZeroTokenBalances:return"CONTRACT_HAS_NON_ZERO_TOKEN_BALANCES";case e.ContractExpiredAndPendingRemoval:return"CONTRACT_EXPIRED_AND_PENDING_REMOVAL";case e.ContractHasNoAutoRenewAccount:return"CONTRACT_HAS_NO_AUTO_RENEW_ACCOUNT";case e.PermanentRemovalRequiresSystemInitiation:return"PERMANENT_REMOVAL_REQUIRES_SYSTEM_INITIATION";case e.ProxyAccountIdFieldIsDeprecated:return"PROXY_ACCOUNT_ID_FIELD_IS_DEPRECATED";case e.SelfStakingIsNotAllowed:return"SELF_STAKING_IS_NOT_ALLOWED";case e.InvalidStakingId:return"INVALID_STAKING_ID";case e.StakingNotEnabled:return"STAKING_NOT_ENABLED";case e.InvalidPrngRange:return"INVALID_PRNG_RANGE";case e.MaxEntitiesInPriceRegimeHaveBeenCreated:return"MAX_ENTITIES_IN_PRICE_REGIME_HAVE_BEEN_CREATED";case e.InvalidFullPrefixSignatureForPrecompile:return"INVALID_FULL_PREFIX_SIGNATURE_FOR_PRECOMPILE";case e.InsufficientBalancesForStorageRent:return"INSUFFICIENT_BALANCES_FOR_STORAGE_RENT";case e.MaxChildRecordsExceeded:return"MAX_CHILD_RECORDS_EXCEEDED";case e.InsufficientBalancesForRenewalFees:return"INSUFFICIENT_BALANCES_FOR_RENEWAL_FEES";case e.TransactionHasUnknownFields:return"TRANSACTION_HAS_UNKNOWN_FIELDS";case e.AccountIsImmutable:return"ACCOUNT_IS_IMMUTABLE";case e.AliasAlreadyAssigned:return"ALIAS_ALREADY_ASSIGNED";case e.InvalidMetadataKey:return"INVALID_METADATA_KEY";case e.TokenHasNoMetadataKey:return"TOKEN_HAS_NO_METADATA_KEY";case e.MissingTokenMetadata:return"MISSING_TOKEN_METADATA";case e.MissingSerialNumbers:return"MISSING_SERIAL_NUMBERS";case e.TokenHasNoAdminKey:return"TOKEN_HAS_NO_ADMIN_KEY";case e.NodeDeleted:return"NODE_DELETED";case e.InvalidNodeId:return"INVALID_NODE_ID";case e.InvalidGossipEndpoint:return"INVALID_GOSSIP_ENDPOINT";case e.InvalidNodeAccountId:return"INVALID_NODE_ACCOUNT_ID";case e.InvalidNodeDescription:return"INVALID_NODE_DESCRIPTION";case e.InvalidServiceEndpoint:return"INVALID_SERVICE_ENDPOINT";case e.InvalidGossipCaCertificate:return"INVALID_GOSSIP_CA_CERTIFICATE";case e.InvalidGrpcCertificate:return"INVALID_GRPC_CERTIFICATE";case e.InvalidMaxAutoAssociations:return"INVALID_MAX_AUTO_ASSOCIATIONS";case e.MaxNodesCreated:return"MAX_NODES_CREATED";case e.IpFqdnCannotBeSetForSameEndpoint:return"IP_FQDN_CANNOT_BE_SET_FOR_SAME_ENDPOINT";case e.GossipEndpointCannotHaveFqdn:return"GOSSIP_ENDPOINT_CANNOT_HAVE_FQDN";case e.FqdnSizeTooLarge:return"FQDN_SIZE_TOO_LARGE";case e.InvalidEndpoint:return"INVALID_ENDPOINT";case e.GossipEndpointsExceededLimit:return"GOSSIP_ENDPOINTS_EXCEEDED_LIMIT";case e.ServiceEndpointsExceededLimit:return"SERVICE_ENDPOINTS_EXCEEDED_LIMIT";case e.InvalidIpv4Address:return"INVALID_IPV4_ADDRESS";case e.TokenReferenceRepeated:return"TOKEN_REFERENCE_REPEATED";case e.InvalidOwnerId:return"INVALID_OWNER_ID";case e.TokenReferenceListSizeLimitExceeded:return"TOKEN_REFERENCE_LIST_SIZE_LIMIT_EXCEEDED";case e.EmptyTokenReferenceList:return"EMPTY_TOKEN_REFERENCE_LIST";case e.UpdateNodeAccountNotAllowed:return"UPDATE_NODE_ACCOUNT_NOT_ALLOWED";case e.TokenHasNoMetadataOrSupplyKey:return"TOKEN_HAS_NO_METADATA_OR_SUPPLY_KEY";case e.EmptyPendingAirdropIdList:return"EMPTY_PENDING_AIRDROP_ID_LIST";case e.PendingAirdropIdRepeated:return"PENDING_AIRDROP_ID_REPEATED";case e.MaxPendingAirdropIdExceeded:return"PENDING_AIRDROP_ID_LIST_TOO_LONG";case e.PendingNftAirdropAlreadyExists:return"PENDING_NFT_AIRDROP_ALREADY_EXISTS";case e.AccountHasPendingAirdrops:return"ACCOUNT_HAS_PENDING_AIRDROPS";case e.ThrottledAtConsensus:return"THROTTLED_AT_CONSENSUS";case e.InvalidPendingAirdropId:return"INVALID_PENDING_AIRDROP_ID";case e.TokenAirdropWithFallbackRoyalty:return"TOKEN_AIRDROP_WITH_FALLBACK_ROYALTY";case e.InvalidTokenInPendingAirdrop:return"INVALID_TOKEN_IN_PENDING_AIRDROP";case e.ScheduleExpiryIsBusy:return"SCHEDULE_EXPIRY_IS_BUSY";case e.InvalidGrpcCertificateHash:return"INVALID_GRPC_CERTIFICATE_HASH";case e.MissingExpiryTime:return"MISSING_EXPIRY_TIME";case e.NoSchedulingAllowedAfterScheduledRecursion:return"NO_SCHEDULING_ALLOWED_AFTER_SCHEDULED_RECURSION";case e.RecursiveSchedulingLimitReached:return"RECURSIVE_SCHEDULING_LIMIT_REACHED";case e.WaitingForLedgerId:return"WAITING_FOR_LEDGER_ID";case e.MaxEntriesForFeeExemptKeyListExceeded:return"MAX_ENTRIES_FOR_FEE_EXEMPT_KEY_LIST_EXCEEDED";case e.FeeExemptKeyListContainsDuplicatedKeys:return"FEE_EXEMPT_KEY_LIST_CONTAINS_DUPLICATED_KEYS";case e.InvalidKeyInFeeExemptKeyList:return"INVALID_KEY_IN_FEE_EXEMPT_KEY_LIST";case e.InvalidFeeScheduleKey:return"INVALID_FEE_SCHEDULE_KEY";case e.FeeScheduleKeyCannotBeUpdated:return"FEE_SCHEDULE_KEY_CANNOT_BE_UPDATED";case e.FeeScheduleKeyNotSet:return"FEE_SCHEDULE_KEY_NOT_SET";case e.MaxCustomFeeLimitExceeded:return"MAX_CUSTOM_FEE_LIMIT_EXCEEDED";case e.NoValidMaxCustomFee:return"NO_VALID_MAX_CUSTOM_FEE";case e.InvalidMaxCustomFees:return"INVALID_MAX_CUSTOM_FEES";case e.DuplicateDenominationInMaxCustomFeeList:return"DUPLICATE_DENOMINATION_IN_MAX_CUSTOM_FEE_LIST";case e.DuplicateAccountIdInMaxCustomFeeList:return"DUPLICATE_ACCOUNT_ID_IN_MAX_CUSTOM_FEE_LIST";case e.MaxCustomFeesIsNotSupported:return"MAX_CUSTOM_FEES_IS_NOT_SUPPORTED";case e.BatchListEmpty:return"BATCH_LIST_EMPTY";case e.BatchListContainsDuplicates:return"BATCH_LIST_CONTAINS_DUPLICATES";case e.BatchTransactionInBlacklist:return"BATCH_TRANSACTION_IN_BLACKLIST";case e.InnerTransactionFailed:return"INNER_TRANSACTION_FAILED";case e.MissingBatchKey:return"MISSING_BATCH_KEY";case e.BatchKeySetOnNonInnerTransaction:return"BATCH_KEY_SET_ON_NON_INNER_TRANSACTION";case e.InvalidBatchKey:return"INVALID_BATCH_KEY";case e.ScheduleExpiryNotConfigurable:return"SCHEDULE_EXPIRY_NOT_CONFIGURABLE";case e.CreatingSystemEntities:return"CREATING_SYSTEM_ENTITIES";case e.ThrottleGroupLcmOverflow:return"THROTTLE_GROUP_LCM_OVERFLOW";case e.AirdropContainsMultipleSendersForAToken:return"AIRDROP_CONTAINS_MULTIPLE_SENDERS_FOR_A_TOKEN";case e.GrpcWebProxyNotSupported:return"GRPC_WEB_PROXY_NOT_SUPPORTED";default:return`UNKNOWN (${this._code})`}}static _fromCode(t){switch(t){case 0:return e.Ok;case 1:return e.InvalidTransaction;case 2:return e.PayerAccountNotFound;case 3:return e.InvalidNodeAccount;case 4:return e.TransactionExpired;case 5:return e.InvalidTransactionStart;case 6:return e.InvalidTransactionDuration;case 7:return e.InvalidSignature;case 8:return e.MemoTooLong;case 9:return e.InsufficientTxFee;case 10:return e.InsufficientPayerBalance;case 11:return e.DuplicateTransaction;case 12:return e.Busy;case 13:return e.NotSupported;case 14:return e.InvalidFileId;case 15:return e.InvalidAccountId;case 16:return e.InvalidContractId;case 17:return e.InvalidTransactionId;case 18:return e.ReceiptNotFound;case 19:return e.RecordNotFound;case 20:return e.InvalidSolidityId;case 21:return e.Unknown;case 22:return e.Success;case 23:return e.FailInvalid;case 24:return e.FailFee;case 25:return e.FailBalance;case 26:return e.KeyRequired;case 27:return e.BadEncoding;case 28:return e.InsufficientAccountBalance;case 29:return e.InvalidSolidityAddress;case 30:return e.InsufficientGas;case 31:return e.ContractSizeLimitExceeded;case 32:return e.LocalCallModificationException;case 33:return e.ContractRevertExecuted;case 34:return e.ContractExecutionException;case 35:return e.InvalidReceivingNodeAccount;case 36:return e.MissingQueryHeader;case 37:return e.AccountUpdateFailed;case 38:return e.InvalidKeyEncoding;case 39:return e.NullSolidityAddress;case 40:return e.ContractUpdateFailed;case 41:return e.InvalidQueryHeader;case 42:return e.InvalidFeeSubmitted;case 43:return e.InvalidPayerSignature;case 44:return e.KeyNotProvided;case 45:return e.InvalidExpirationTime;case 46:return e.NoWaclKey;case 47:return e.FileContentEmpty;case 48:return e.InvalidAccountAmounts;case 49:return e.EmptyTransactionBody;case 50:return e.InvalidTransactionBody;case 51:return e.InvalidSignatureTypeMismatchingKey;case 52:return e.InvalidSignatureCountMismatchingKey;case 53:return e.EmptyLiveHashBody;case 54:return e.EmptyLiveHash;case 55:return e.EmptyLiveHashKeys;case 56:return e.InvalidLiveHashSize;case 57:return e.EmptyQueryBody;case 58:return e.EmptyLiveHashQuery;case 59:return e.LiveHashNotFound;case 60:return e.AccountIdDoesNotExist;case 61:return e.LiveHashAlreadyExists;case 62:return e.InvalidFileWacl;case 63:return e.SerializationFailed;case 64:return e.TransactionOversize;case 65:return e.TransactionTooManyLayers;case 66:return e.ContractDeleted;case 67:return e.PlatformNotActive;case 68:return e.KeyPrefixMismatch;case 69:return e.PlatformTransactionNotCreated;case 70:return e.InvalidRenewalPeriod;case 71:return e.InvalidPayerAccountId;case 72:return e.AccountDeleted;case 73:return e.FileDeleted;case 74:return e.AccountRepeatedInAccountAmounts;case 75:return e.SettingNegativeAccountBalance;case 76:return e.ObtainerRequired;case 77:return e.ObtainerSameContractId;case 78:return e.ObtainerDoesNotExist;case 79:return e.ModifyingImmutableContract;case 80:return e.FileSystemException;case 81:return e.AutorenewDurationNotInRange;case 82:return e.ErrorDecodingBytestring;case 83:return e.ContractFileEmpty;case 84:return e.ContractBytecodeEmpty;case 85:return e.InvalidInitialBalance;case 86:return e.InvalidReceiveRecordThreshold;case 87:return e.InvalidSendRecordThreshold;case 88:return e.AccountIsNotGenesisAccount;case 89:return e.PayerAccountUnauthorized;case 90:return e.InvalidFreezeTransactionBody;case 91:return e.FreezeTransactionBodyNotFound;case 92:return e.TransferListSizeLimitExceeded;case 93:return e.ResultSizeLimitExceeded;case 94:return e.NotSpecialAccount;case 95:return e.ContractNegativeGas;case 96:return e.ContractNegativeValue;case 97:return e.InvalidFeeFile;case 98:return e.InvalidExchangeRateFile;case 99:return e.InsufficientLocalCallGas;case 100:return e.EntityNotAllowedToDelete;case 101:return e.AuthorizationFailed;case 102:return e.FileUploadedProtoInvalid;case 103:return e.FileUploadedProtoNotSavedToDisk;case 104:return e.FeeScheduleFilePartUploaded;case 105:return e.ExchangeRateChangeLimitExceeded;case 106:return e.MaxContractStorageExceeded;case 107:return e.TransferAccountSameAsDeleteAccount;case 108:return e.TotalLedgerBalanceInvalid;case 110:return e.ExpirationReductionNotAllowed;case 111:return e.MaxGasLimitExceeded;case 112:return e.MaxFileSizeExceeded;case 113:return e.ReceiverSigRequired;case 150:return e.InvalidTopicId;case 155:return e.InvalidAdminKey;case 156:return e.InvalidSubmitKey;case 157:return e.Unauthorized;case 158:return e.InvalidTopicMessage;case 159:return e.InvalidAutorenewAccount;case 160:return e.AutorenewAccountNotAllowed;case 162:return e.TopicExpired;case 163:return e.InvalidChunkNumber;case 164:return e.InvalidChunkTransactionId;case 165:return e.AccountFrozenForToken;case 166:return e.TokensPerAccountLimitExceeded;case 167:return e.InvalidTokenId;case 168:return e.InvalidTokenDecimals;case 169:return e.InvalidTokenInitialSupply;case 170:return e.InvalidTreasuryAccountForToken;case 171:return e.InvalidTokenSymbol;case 172:return e.TokenHasNoFreezeKey;case 173:return e.TransfersNotZeroSumForToken;case 174:return e.MissingTokenSymbol;case 175:return e.TokenSymbolTooLong;case 176:return e.AccountKycNotGrantedForToken;case 177:return e.TokenHasNoKycKey;case 178:return e.InsufficientTokenBalance;case 179:return e.TokenWasDeleted;case 180:return e.TokenHasNoSupplyKey;case 181:return e.TokenHasNoWipeKey;case 182:return e.InvalidTokenMintAmount;case 183:return e.InvalidTokenBurnAmount;case 184:return e.TokenNotAssociatedToAccount;case 185:return e.CannotWipeTokenTreasuryAccount;case 186:return e.InvalidKycKey;case 187:return e.InvalidWipeKey;case 188:return e.InvalidFreezeKey;case 189:return e.InvalidSupplyKey;case 190:return e.MissingTokenName;case 191:return e.TokenNameTooLong;case 192:return e.InvalidWipingAmount;case 193:return e.TokenIsImmutable;case 194:return e.TokenAlreadyAssociatedToAccount;case 195:return e.TransactionRequiresZeroTokenBalances;case 196:return e.AccountIsTreasury;case 197:return e.TokenIdRepeatedInTokenList;case 198:return e.TokenTransferListSizeLimitExceeded;case 199:return e.EmptyTokenTransferBody;case 200:return e.EmptyTokenTransferAccountAmounts;case 201:return e.InvalidScheduleId;case 202:return e.ScheduleIsImmutable;case 203:return e.InvalidSchedulePayerId;case 204:return e.InvalidScheduleAccountId;case 205:return e.NoNewValidSignatures;case 206:return e.UnresolvableRequiredSigners;case 207:return e.ScheduledTransactionNotInWhitelist;case 208:return e.SomeSignaturesWereInvalid;case 209:return e.TransactionIdFieldNotAllowed;case 210:return e.IdenticalScheduleAlreadyCreated;case 211:return e.InvalidZeroByteInString;case 212:return e.ScheduleAlreadyDeleted;case 213:return e.ScheduleAlreadyExecuted;case 214:return e.MessageSizeTooLarge;case 215:return e.OperationRepeatedInBucketGroups;case 216:return e.BucketCapacityOverflow;case 217:return e.NodeCapacityNotSufficientForOperation;case 218:return e.BucketHasNoThrottleGroups;case 219:return e.ThrottleGroupHasZeroOpsPerSec;case 220:return e.SuccessButMissingExpectedOperation;case 221:return e.UnparseableThrottleDefinitions;case 222:return e.InvalidThrottleDefinitions;case 223:return e.AccountExpiredAndPendingRemoval;case 224:return e.InvalidTokenMaxSupply;case 225:return e.InvalidTokenNftSerialNumber;case 226:return e.InvalidNftId;case 227:return e.MetadataTooLong;case 228:return e.BatchSizeLimitExceeded;case 229:return e.InvalidQueryRange;case 230:return e.FractionDividesByZero;case 231:return e.InsufficientPayerBalanceForCustomFee;case 232:return e.CustomFeesListTooLong;case 233:return e.InvalidCustomFeeCollector;case 234:return e.InvalidTokenIdInCustomFees;case 235:return e.TokenNotAssociatedToFeeCollector;case 236:return e.TokenMaxSupplyReached;case 237:return e.SenderDoesNotOwnNftSerialNo;case 238:return e.CustomFeeNotFullySpecified;case 239:return e.CustomFeeMustBePositive;case 240:return e.TokenHasNoFeeScheduleKey;case 241:return e.CustomFeeOutsideNumericRange;case 242:return e.RoyaltyFractionCannotExceedOne;case 243:return e.FractionalFeeMaxAmountLessThanMinAmount;case 244:return e.CustomScheduleAlreadyHasNoFees;case 245:return e.CustomFeeDenominationMustBeFungibleCommon;case 246:return e.CustomFractionalFeeOnlyAllowedForFungibleCommon;case 247:return e.InvalidCustomFeeScheduleKey;case 248:return e.InvalidTokenMintMetadata;case 249:return e.InvalidTokenBurnMetadata;case 250:return e.CurrentTreasuryStillOwnsNfts;case 251:return e.AccountStillOwnsNfts;case 252:return e.TreasuryMustOwnBurnedNft;case 253:return e.AccountDoesNotOwnWipedNft;case 254:return e.AccountAmountTransfersOnlyAllowedForFungibleCommon;case 255:return e.MaxNftsInPriceRegimeHaveBeenMinted;case 256:return e.PayerAccountDeleted;case 257:return e.CustomFeeChargingExceededMaxRecursionDepth;case 258:return e.CustomFeeChargingExceededMaxAccountAmounts;case 259:return e.InsufficientSenderAccountBalanceForCustomFee;case 260:return e.SerialNumberLimitReached;case 261:return e.CustomRoyaltyFeeOnlyAllowedForNonFungibleUnique;case 262:return e.NoRemainingAutomaticAssociations;case 263:return e.ExistingAutomaticAssociationsExceedGivenLimit;case 264:return e.RequestedNumAutomaticAssociationsExceedsAssociationLimit;case 265:return e.TokenIsPaused;case 266:return e.TokenHasNoPauseKey;case 267:return e.InvalidPauseKey;case 268:return e.FreezeUpdateFileDoesNotExist;case 269:return e.FreezeUpdateFileHashDoesNotMatch;case 270:return e.NoUpgradeHasBeenPrepared;case 271:return e.NoFreezeIsScheduled;case 272:return e.UpdateFileHashChangedSincePrepareUpgrade;case 273:return e.FreezeStartTimeMustBeFuture;case 274:return e.PreparedUpdateFileIsImmutable;case 275:return e.FreezeAlreadyScheduled;case 276:return e.FreezeUpgradeInProgress;case 277:return e.UpdateFileIdDoesNotMatchPrepared;case 278:return e.UpdateFileHashDoesNotMatchPrepared;case 279:return e.ConsensusGasExhausted;case 280:return e.RevertedSuccess;case 281:return e.MaxStorageInPriceRegimeHasBeenUsed;case 282:return e.InvalidAliasKey;case 283:return e.UnexpectedTokenDecimals;case 284:return e.InvalidProxyAccountId;case 285:return e.InvalidTransferAccountId;case 286:return e.InvalidFeeCollectorAccountId;case 287:return e.AliasIsImmutable;case 288:return e.SpenderAccountSameAsOwner;case 289:return e.AmountExceedsTokenMaxSupply;case 290:return e.NegativeAllowanceAmount;case 291:return e.CannotApproveForAllFungibleCommon;case 292:return e.SpenderDoesNotHaveAllowance;case 293:return e.AmountExceedsAllowance;case 294:return e.MaxAllowancesExceeded;case 295:return e.EmptyAllowances;case 296:return e.SpenderAccountRepeatedInAllowances;case 297:return e.RepeatedSerialNumsInNftAllowances;case 298:return e.FungibleTokenInNftAllowances;case 299:return e.NftInFungibleTokenAllowances;case 300:return e.InvalidAllowanceOwnerId;case 301:return e.InvalidAllowanceSpenderId;case 302:return e.RepeatedAllowancesToDelete;case 303:return e.InvalidDelegatingSpender;case 304:return e.DelegatingSpenderCannotGrantApproveForAll;case 305:return e.DelegatingSpenderDoesNotHaveApproveForAll;case 306:return e.ScheduleExpirationTimeTooFarInFuture;case 307:return e.ScheduleExpirationTimeMustBeHigherThanConsensusTime;case 308:return e.ScheduleFutureThrottleExceeded;case 309:return e.ScheduleFutureGasLimitExceeded;case 310:return e.InvalidEthereumTransaction;case 311:return e.WrongChainId;case 312:return e.WrongNonce;case 313:return e.AccessListUnsupported;case 314:return e.SchedulePendingExpiration;case 315:return e.ContractIsTokenTreasury;case 316:return e.ContractHasNonZeroTokenBalances;case 317:return e.ContractExpiredAndPendingRemoval;case 318:return e.ContractHasNoAutoRenewAccount;case 319:return e.PermanentRemovalRequiresSystemInitiation;case 320:return e.ProxyAccountIdFieldIsDeprecated;case 321:return e.SelfStakingIsNotAllowed;case 322:return e.InvalidStakingId;case 323:return e.StakingNotEnabled;case 324:return e.InvalidPrngRange;case 325:return e.MaxEntitiesInPriceRegimeHaveBeenCreated;case 326:return e.InvalidFullPrefixSignatureForPrecompile;case 327:return e.InsufficientBalancesForStorageRent;case 328:return e.MaxChildRecordsExceeded;case 329:return e.InsufficientBalancesForRenewalFees;case 330:return e.TransactionHasUnknownFields;case 331:return e.AccountIsImmutable;case 332:return e.AliasAlreadyAssigned;case 333:return e.InvalidMetadataKey;case 334:return e.TokenHasNoMetadataKey;case 335:return e.MissingTokenMetadata;case 336:return e.MissingSerialNumbers;case 337:return e.TokenHasNoAdminKey;case 338:return e.NodeDeleted;case 339:return e.InvalidNodeId;case 340:return e.InvalidGossipEndpoint;case 341:return e.InvalidNodeAccountId;case 342:return e.InvalidNodeDescription;case 343:return e.InvalidServiceEndpoint;case 344:return e.InvalidGossipCaCertificate;case 345:return e.InvalidGrpcCertificate;case 346:return e.InvalidMaxAutoAssociations;case 347:return e.MaxNodesCreated;case 348:return e.IpFqdnCannotBeSetForSameEndpoint;case 349:return e.GossipEndpointCannotHaveFqdn;case 350:return e.FqdnSizeTooLarge;case 351:return e.InvalidEndpoint;case 352:return e.GossipEndpointsExceededLimit;case 353:return e.TokenReferenceRepeated;case 354:return e.InvalidOwnerId;case 355:return e.TokenReferenceListSizeLimitExceeded;case 356:return e.ServiceEndpointsExceededLimit;case 357:return e.InvalidIpv4Address;case 358:return e.EmptyTokenReferenceList;case 359:return e.UpdateNodeAccountNotAllowed;case 360:return e.TokenHasNoMetadataOrSupplyKey;case 361:return e.EmptyPendingAirdropIdList;case 362:return e.PendingAirdropIdRepeated;case 363:return e.MaxPendingAirdropIdExceeded;case 364:return e.PendingNftAirdropAlreadyExists;case 365:return e.AccountHasPendingAirdrops;case 366:return e.ThrottledAtConsensus;case 367:return e.InvalidPendingAirdropId;case 368:return e.TokenAirdropWithFallbackRoyalty;case 369:return e.InvalidTokenInPendingAirdrop;case 370:return e.ScheduleExpiryIsBusy;case 371:return e.InvalidGrpcCertificateHash;case 372:return e.MissingExpiryTime;case 373:return e.NoSchedulingAllowedAfterScheduledRecursion;case 374:return e.RecursiveSchedulingLimitReached;case 375:return e.WaitingForLedgerId;case 376:return e.MaxEntriesForFeeExemptKeyListExceeded;case 377:return e.FeeExemptKeyListContainsDuplicatedKeys;case 378:return e.InvalidKeyInFeeExemptKeyList;case 379:return e.InvalidFeeScheduleKey;case 380:return e.FeeScheduleKeyCannotBeUpdated;case 381:return e.FeeScheduleKeyNotSet;case 382:return e.MaxCustomFeeLimitExceeded;case 383:return e.NoValidMaxCustomFee;case 384:return e.InvalidMaxCustomFees;case 385:return e.DuplicateDenominationInMaxCustomFeeList;case 386:return e.DuplicateAccountIdInMaxCustomFeeList;case 387:return e.MaxCustomFeesIsNotSupported;case 388:return e.BatchListEmpty;case 389:return e.BatchListContainsDuplicates;case 390:return e.BatchTransactionInBlacklist;case 391:return e.InnerTransactionFailed;case 392:return e.MissingBatchKey;case 393:return e.BatchKeySetOnNonInnerTransaction;case 394:return e.InvalidBatchKey;case 395:return e.ScheduleExpiryNotConfigurable;case 396:return e.CreatingSystemEntities;case 397:return e.ThrottleGroupLcmOverflow;case 398:return e.AirdropContainsMultipleSendersForAToken;case 399:return e.GrpcWebProxyNotSupported;default:throw new Error(`(BUG) Status.fromCode() does not handle code: ${t}`)}}valueOf(){return this._code}};e$n.Ok=new e$n(0),e$n.InvalidTransaction=new e$n(1),e$n.PayerAccountNotFound=new e$n(2),e$n.InvalidNodeAccount=new e$n(3),e$n.TransactionExpired=new e$n(4),e$n.InvalidTransactionStart=new e$n(5),e$n.InvalidTransactionDuration=new e$n(6),e$n.InvalidSignature=new e$n(7),e$n.MemoTooLong=new e$n(8),e$n.InsufficientTxFee=new e$n(9),e$n.InsufficientPayerBalance=new e$n(10),e$n.DuplicateTransaction=new e$n(11),e$n.Busy=new e$n(12),e$n.NotSupported=new e$n(13),e$n.InvalidFileId=new e$n(14),e$n.InvalidAccountId=new e$n(15),e$n.InvalidContractId=new e$n(16),e$n.InvalidTransactionId=new e$n(17),e$n.ReceiptNotFound=new e$n(18),e$n.RecordNotFound=new e$n(19),e$n.InvalidSolidityId=new e$n(20),e$n.Unknown=new e$n(21),e$n.Success=new e$n(22),e$n.FailInvalid=new e$n(23),e$n.FailFee=new e$n(24),e$n.FailBalance=new e$n(25),e$n.KeyRequired=new e$n(26),e$n.BadEncoding=new e$n(27),e$n.InsufficientAccountBalance=new e$n(28),e$n.InvalidSolidityAddress=new e$n(29),e$n.InsufficientGas=new e$n(30),e$n.ContractSizeLimitExceeded=new e$n(31),e$n.LocalCallModificationException=new e$n(32),e$n.ContractRevertExecuted=new e$n(33),e$n.ContractExecutionException=new e$n(34),e$n.InvalidReceivingNodeAccount=new e$n(35),e$n.MissingQueryHeader=new e$n(36),e$n.AccountUpdateFailed=new e$n(37),e$n.InvalidKeyEncoding=new e$n(38),e$n.NullSolidityAddress=new e$n(39),e$n.ContractUpdateFailed=new e$n(40),e$n.InvalidQueryHeader=new e$n(41),e$n.InvalidFeeSubmitted=new e$n(42),e$n.InvalidPayerSignature=new e$n(43),e$n.KeyNotProvided=new e$n(44),e$n.InvalidExpirationTime=new e$n(45),e$n.NoWaclKey=new e$n(46),e$n.FileContentEmpty=new e$n(47),e$n.InvalidAccountAmounts=new e$n(48),e$n.EmptyTransactionBody=new e$n(49),e$n.InvalidTransactionBody=new e$n(50),e$n.InvalidSignatureTypeMismatchingKey=new e$n(51),e$n.InvalidSignatureCountMismatchingKey=new e$n(52),e$n.EmptyLiveHashBody=new e$n(53),e$n.EmptyLiveHash=new e$n(54),e$n.EmptyLiveHashKeys=new e$n(55),e$n.InvalidLiveHashSize=new e$n(56),e$n.EmptyQueryBody=new e$n(57),e$n.EmptyLiveHashQuery=new e$n(58),e$n.LiveHashNotFound=new e$n(59),e$n.AccountIdDoesNotExist=new e$n(60),e$n.LiveHashAlreadyExists=new e$n(61),e$n.InvalidFileWacl=new e$n(62),e$n.SerializationFailed=new e$n(63),e$n.TransactionOversize=new e$n(64),e$n.TransactionTooManyLayers=new e$n(65),e$n.ContractDeleted=new e$n(66),e$n.PlatformNotActive=new e$n(67),e$n.KeyPrefixMismatch=new e$n(68),e$n.PlatformTransactionNotCreated=new e$n(69),e$n.InvalidRenewalPeriod=new e$n(70),e$n.InvalidPayerAccountId=new e$n(71),e$n.AccountDeleted=new e$n(72),e$n.FileDeleted=new e$n(73),e$n.AccountRepeatedInAccountAmounts=new e$n(74),e$n.SettingNegativeAccountBalance=new e$n(75),e$n.ObtainerRequired=new e$n(76),e$n.ObtainerSameContractId=new e$n(77),e$n.ObtainerDoesNotExist=new e$n(78),e$n.ModifyingImmutableContract=new e$n(79),e$n.FileSystemException=new e$n(80),e$n.AutorenewDurationNotInRange=new e$n(81),e$n.ErrorDecodingBytestring=new e$n(82),e$n.ContractFileEmpty=new e$n(83),e$n.ContractBytecodeEmpty=new e$n(84),e$n.InvalidInitialBalance=new e$n(85),e$n.InvalidReceiveRecordThreshold=new e$n(86),e$n.InvalidSendRecordThreshold=new e$n(87),e$n.AccountIsNotGenesisAccount=new e$n(88),e$n.PayerAccountUnauthorized=new e$n(89),e$n.InvalidFreezeTransactionBody=new e$n(90),e$n.FreezeTransactionBodyNotFound=new e$n(91),e$n.TransferListSizeLimitExceeded=new e$n(92),e$n.ResultSizeLimitExceeded=new e$n(93),e$n.NotSpecialAccount=new e$n(94),e$n.ContractNegativeGas=new e$n(95),e$n.ContractNegativeValue=new e$n(96),e$n.InvalidFeeFile=new e$n(97),e$n.InvalidExchangeRateFile=new e$n(98),e$n.InsufficientLocalCallGas=new e$n(99),e$n.EntityNotAllowedToDelete=new e$n(100),e$n.AuthorizationFailed=new e$n(101),e$n.FileUploadedProtoInvalid=new e$n(102),e$n.FileUploadedProtoNotSavedToDisk=new e$n(103),e$n.FeeScheduleFilePartUploaded=new e$n(104),e$n.ExchangeRateChangeLimitExceeded=new e$n(105),e$n.MaxContractStorageExceeded=new e$n(106),e$n.TransferAccountSameAsDeleteAccount=new e$n(107),e$n.TotalLedgerBalanceInvalid=new e$n(108),e$n.ExpirationReductionNotAllowed=new e$n(110),e$n.MaxGasLimitExceeded=new e$n(111),e$n.MaxFileSizeExceeded=new e$n(112),e$n.ReceiverSigRequired=new e$n(113),e$n.InvalidTopicId=new e$n(150),e$n.InvalidAdminKey=new e$n(155),e$n.InvalidSubmitKey=new e$n(156),e$n.Unauthorized=new e$n(157),e$n.InvalidTopicMessage=new e$n(158),e$n.InvalidAutorenewAccount=new e$n(159),e$n.AutorenewAccountNotAllowed=new e$n(160),e$n.TopicExpired=new e$n(162),e$n.InvalidChunkNumber=new e$n(163),e$n.InvalidChunkTransactionId=new e$n(164),e$n.AccountFrozenForToken=new e$n(165),e$n.TokensPerAccountLimitExceeded=new e$n(166),e$n.InvalidTokenId=new e$n(167),e$n.InvalidTokenDecimals=new e$n(168),e$n.InvalidTokenInitialSupply=new e$n(169),e$n.InvalidTreasuryAccountForToken=new e$n(170),e$n.InvalidTokenSymbol=new e$n(171),e$n.TokenHasNoFreezeKey=new e$n(172),e$n.TransfersNotZeroSumForToken=new e$n(173),e$n.MissingTokenSymbol=new e$n(174),e$n.TokenSymbolTooLong=new e$n(175),e$n.AccountKycNotGrantedForToken=new e$n(176),e$n.TokenHasNoKycKey=new e$n(177),e$n.InsufficientTokenBalance=new e$n(178),e$n.TokenWasDeleted=new e$n(179),e$n.TokenHasNoSupplyKey=new e$n(180),e$n.TokenHasNoWipeKey=new e$n(181),e$n.InvalidTokenMintAmount=new e$n(182),e$n.InvalidTokenBurnAmount=new e$n(183),e$n.TokenNotAssociatedToAccount=new e$n(184),e$n.CannotWipeTokenTreasuryAccount=new e$n(185),e$n.InvalidKycKey=new e$n(186),e$n.InvalidWipeKey=new e$n(187),e$n.InvalidFreezeKey=new e$n(188),e$n.InvalidSupplyKey=new e$n(189),e$n.MissingTokenName=new e$n(190),e$n.TokenNameTooLong=new e$n(191),e$n.InvalidWipingAmount=new e$n(192),e$n.TokenIsImmutable=new e$n(193),e$n.TokenAlreadyAssociatedToAccount=new e$n(194),e$n.TransactionRequiresZeroTokenBalances=new e$n(195),e$n.AccountIsTreasury=new e$n(196),e$n.TokenIdRepeatedInTokenList=new e$n(197),e$n.TokenTransferListSizeLimitExceeded=new e$n(198),e$n.EmptyTokenTransferBody=new e$n(199),e$n.EmptyTokenTransferAccountAmounts=new e$n(200),e$n.InvalidScheduleId=new e$n(201),e$n.ScheduleIsImmutable=new e$n(202),e$n.InvalidSchedulePayerId=new e$n(203),e$n.InvalidScheduleAccountId=new e$n(204),e$n.NoNewValidSignatures=new e$n(205),e$n.UnresolvableRequiredSigners=new e$n(206),e$n.ScheduledTransactionNotInWhitelist=new e$n(207),e$n.SomeSignaturesWereInvalid=new e$n(208),e$n.TransactionIdFieldNotAllowed=new e$n(209),e$n.IdenticalScheduleAlreadyCreated=new e$n(210),e$n.InvalidZeroByteInString=new e$n(211),e$n.ScheduleAlreadyDeleted=new e$n(212),e$n.ScheduleAlreadyExecuted=new e$n(213),e$n.MessageSizeTooLarge=new e$n(214),e$n.OperationRepeatedInBucketGroups=new e$n(215),e$n.BucketCapacityOverflow=new e$n(216),e$n.NodeCapacityNotSufficientForOperation=new e$n(217),e$n.BucketHasNoThrottleGroups=new e$n(218),e$n.ThrottleGroupHasZeroOpsPerSec=new e$n(219),e$n.SuccessButMissingExpectedOperation=new e$n(220),e$n.UnparseableThrottleDefinitions=new e$n(221),e$n.InvalidThrottleDefinitions=new e$n(222),e$n.AccountExpiredAndPendingRemoval=new e$n(223),e$n.InvalidTokenMaxSupply=new e$n(224),e$n.InvalidTokenNftSerialNumber=new e$n(225),e$n.InvalidNftId=new e$n(226),e$n.MetadataTooLong=new e$n(227),e$n.BatchSizeLimitExceeded=new e$n(228),e$n.InvalidQueryRange=new e$n(229),e$n.FractionDividesByZero=new e$n(230),e$n.InsufficientPayerBalanceForCustomFee=new e$n(231),e$n.CustomFeesListTooLong=new e$n(232),e$n.InvalidCustomFeeCollector=new e$n(233),e$n.InvalidTokenIdInCustomFees=new e$n(234),e$n.TokenNotAssociatedToFeeCollector=new e$n(235),e$n.TokenMaxSupplyReached=new e$n(236),e$n.SenderDoesNotOwnNftSerialNo=new e$n(237),e$n.CustomFeeNotFullySpecified=new e$n(238),e$n.CustomFeeMustBePositive=new e$n(239),e$n.TokenHasNoFeeScheduleKey=new e$n(240),e$n.CustomFeeOutsideNumericRange=new e$n(241),e$n.RoyaltyFractionCannotExceedOne=new e$n(242),e$n.FractionalFeeMaxAmountLessThanMinAmount=new e$n(243),e$n.CustomScheduleAlreadyHasNoFees=new e$n(244),e$n.CustomFeeDenominationMustBeFungibleCommon=new e$n(245),e$n.CustomFractionalFeeOnlyAllowedForFungibleCommon=new e$n(246),e$n.InvalidCustomFeeScheduleKey=new e$n(247),e$n.InvalidTokenMintMetadata=new e$n(248),e$n.InvalidTokenBurnMetadata=new e$n(249),e$n.CurrentTreasuryStillOwnsNfts=new e$n(250),e$n.AccountStillOwnsNfts=new e$n(251),e$n.TreasuryMustOwnBurnedNft=new e$n(252),e$n.AccountDoesNotOwnWipedNft=new e$n(253),e$n.AccountAmountTransfersOnlyAllowedForFungibleCommon=new e$n(254),e$n.MaxNftsInPriceRegimeHaveBeenMinted=new e$n(255),e$n.PayerAccountDeleted=new e$n(256),e$n.CustomFeeChargingExceededMaxRecursionDepth=new e$n(257),e$n.CustomFeeChargingExceededMaxAccountAmounts=new e$n(258),e$n.InsufficientSenderAccountBalanceForCustomFee=new e$n(259),e$n.SerialNumberLimitReached=new e$n(260),e$n.CustomRoyaltyFeeOnlyAllowedForNonFungibleUnique=new e$n(261),e$n.NoRemainingAutomaticAssociations=new e$n(262),e$n.ExistingAutomaticAssociationsExceedGivenLimit=new e$n(263),e$n.RequestedNumAutomaticAssociationsExceedsAssociationLimit=new e$n(264),e$n.TokenIsPaused=new e$n(265),e$n.TokenHasNoPauseKey=new e$n(266),e$n.InvalidPauseKey=new e$n(267),e$n.FreezeUpdateFileDoesNotExist=new e$n(268),e$n.FreezeUpdateFileHashDoesNotMatch=new e$n(269),e$n.NoUpgradeHasBeenPrepared=new e$n(270),e$n.NoFreezeIsScheduled=new e$n(271),e$n.UpdateFileHashChangedSincePrepareUpgrade=new e$n(272),e$n.FreezeStartTimeMustBeFuture=new e$n(273),e$n.PreparedUpdateFileIsImmutable=new e$n(274),e$n.FreezeAlreadyScheduled=new e$n(275),e$n.FreezeUpgradeInProgress=new e$n(276),e$n.UpdateFileIdDoesNotMatchPrepared=new e$n(277),e$n.UpdateFileHashDoesNotMatchPrepared=new e$n(278),e$n.ConsensusGasExhausted=new e$n(279),e$n.RevertedSuccess=new e$n(280),e$n.MaxStorageInPriceRegimeHasBeenUsed=new e$n(281),e$n.InvalidAliasKey=new e$n(282),e$n.UnexpectedTokenDecimals=new e$n(283),e$n.InvalidProxyAccountId=new e$n(284),e$n.InvalidTransferAccountId=new e$n(285),e$n.InvalidFeeCollectorAccountId=new e$n(286),e$n.AliasIsImmutable=new e$n(287),e$n.SpenderAccountSameAsOwner=new e$n(288),e$n.AmountExceedsTokenMaxSupply=new e$n(289),e$n.NegativeAllowanceAmount=new e$n(290),e$n.CannotApproveForAllFungibleCommon=new e$n(291),e$n.SpenderDoesNotHaveAllowance=new e$n(292),e$n.AmountExceedsAllowance=new e$n(293),e$n.MaxAllowancesExceeded=new e$n(294),e$n.EmptyAllowances=new e$n(295),e$n.SpenderAccountRepeatedInAllowances=new e$n(296),e$n.RepeatedSerialNumsInNftAllowances=new e$n(297),e$n.FungibleTokenInNftAllowances=new e$n(298),e$n.NftInFungibleTokenAllowances=new e$n(299),e$n.InvalidAllowanceOwnerId=new e$n(300),e$n.InvalidAllowanceSpenderId=new e$n(301),e$n.RepeatedAllowancesToDelete=new e$n(302),e$n.InvalidDelegatingSpender=new e$n(303),e$n.DelegatingSpenderCannotGrantApproveForAll=new e$n(304),e$n.DelegatingSpenderDoesNotHaveApproveForAll=new e$n(305),e$n.ScheduleExpirationTimeTooFarInFuture=new e$n(306),e$n.ScheduleExpirationTimeMustBeHigherThanConsensusTime=new e$n(307),e$n.ScheduleFutureThrottleExceeded=new e$n(308),e$n.ScheduleFutureGasLimitExceeded=new e$n(309),e$n.InvalidEthereumTransaction=new e$n(310),e$n.WrongChainId=new e$n(311),e$n.WrongNonce=new e$n(312),e$n.AccessListUnsupported=new e$n(313),e$n.SchedulePendingExpiration=new e$n(314),e$n.ContractIsTokenTreasury=new e$n(315),e$n.ContractHasNonZeroTokenBalances=new e$n(316),e$n.ContractExpiredAndPendingRemoval=new e$n(317),e$n.ContractHasNoAutoRenewAccount=new e$n(318),e$n.PermanentRemovalRequiresSystemInitiation=new e$n(319),e$n.ProxyAccountIdFieldIsDeprecated=new e$n(320),e$n.SelfStakingIsNotAllowed=new e$n(321),e$n.InvalidStakingId=new e$n(322),e$n.StakingNotEnabled=new e$n(323),e$n.InvalidPrngRange=new e$n(324),e$n.MaxEntitiesInPriceRegimeHaveBeenCreated=new e$n(325),e$n.InvalidFullPrefixSignatureForPrecompile=new e$n(326),e$n.InsufficientBalancesForStorageRent=new e$n(327),e$n.MaxChildRecordsExceeded=new e$n(328),e$n.InsufficientBalancesForRenewalFees=new e$n(329),e$n.TransactionHasUnknownFields=new e$n(330),e$n.AccountIsImmutable=new e$n(331),e$n.AliasAlreadyAssigned=new e$n(332),e$n.InvalidMetadataKey=new e$n(333),e$n.TokenHasNoMetadataKey=new e$n(334),e$n.MissingTokenMetadata=new e$n(335),e$n.MissingSerialNumbers=new e$n(336),e$n.TokenHasNoAdminKey=new e$n(337),e$n.NodeDeleted=new e$n(338),e$n.InvalidNodeId=new e$n(339),e$n.InvalidGossipEndpoint=new e$n(340),e$n.InvalidNodeAccountId=new e$n(341),e$n.InvalidNodeDescription=new e$n(342),e$n.InvalidServiceEndpoint=new e$n(343),e$n.InvalidGossipCaCertificate=new e$n(344),e$n.InvalidGrpcCertificate=new e$n(345),e$n.InvalidMaxAutoAssociations=new e$n(346),e$n.MaxNodesCreated=new e$n(347),e$n.IpFqdnCannotBeSetForSameEndpoint=new e$n(348),e$n.GossipEndpointCannotHaveFqdn=new e$n(349),e$n.FqdnSizeTooLarge=new e$n(350),e$n.InvalidEndpoint=new e$n(351),e$n.GossipEndpointsExceededLimit=new e$n(352),e$n.TokenReferenceRepeated=new e$n(353),e$n.InvalidOwnerId=new e$n(354),e$n.TokenReferenceListSizeLimitExceeded=new e$n(355),e$n.ServiceEndpointsExceededLimit=new e$n(356),e$n.InvalidIpv4Address=new e$n(357),e$n.EmptyTokenReferenceList=new e$n(358),e$n.UpdateNodeAccountNotAllowed=new e$n(359),e$n.TokenHasNoMetadataOrSupplyKey=new e$n(360),e$n.EmptyPendingAirdropIdList=new e$n(361),e$n.PendingAirdropIdRepeated=new e$n(362),e$n.MaxPendingAirdropIdExceeded=new e$n(363),e$n.PendingNftAirdropAlreadyExists=new e$n(364),e$n.AccountHasPendingAirdrops=new e$n(365),e$n.ThrottledAtConsensus=new e$n(366),e$n.InvalidPendingAirdropId=new e$n(367),e$n.TokenAirdropWithFallbackRoyalty=new e$n(368),e$n.InvalidTokenInPendingAirdrop=new e$n(369),e$n.ScheduleExpiryIsBusy=new e$n(370),e$n.InvalidGrpcCertificateHash=new e$n(371),e$n.MissingExpiryTime=new e$n(372),e$n.NoSchedulingAllowedAfterScheduledRecursion=new e$n(373),e$n.RecursiveSchedulingLimitReached=new e$n(374),e$n.WaitingForLedgerId=new e$n(375),e$n.MaxEntriesForFeeExemptKeyListExceeded=new e$n(376),e$n.FeeExemptKeyListContainsDuplicatedKeys=new e$n(377),e$n.InvalidKeyInFeeExemptKeyList=new e$n(378),e$n.InvalidFeeScheduleKey=new e$n(379),e$n.FeeScheduleKeyCannotBeUpdated=new e$n(380),e$n.FeeScheduleKeyNotSet=new e$n(381),e$n.MaxCustomFeeLimitExceeded=new e$n(382),e$n.NoValidMaxCustomFee=new e$n(383),e$n.InvalidMaxCustomFees=new e$n(384),e$n.DuplicateDenominationInMaxCustomFeeList=new e$n(385),e$n.DuplicateAccountIdInMaxCustomFeeList=new e$n(386),e$n.MaxCustomFeesIsNotSupported=new e$n(387),e$n.BatchListEmpty=new e$n(388),e$n.BatchListContainsDuplicates=new e$n(389),e$n.BatchTransactionInBlacklist=new e$n(390),e$n.InnerTransactionFailed=new e$n(391),e$n.MissingBatchKey=new e$n(392),e$n.BatchKeySetOnNonInnerTransaction=new e$n(393),e$n.InvalidBatchKey=new e$n(394),e$n.ScheduleExpiryNotConfigurable=new e$n(395),e$n.CreatingSystemEntities=new e$n(396),e$n.ThrottleGroupLcmOverflow=new e$n(397),e$n.AirdropContainsMultipleSendersForAToken=new e$n(398),e$n.GrpcWebProxyNotSupported=new e$n(399);let e$m=class e{constructor(e){this._code=e,Object.freeze(this)}static _fromValue(t){switch(t){case 0:return e.Ok;case 1:return e.Cancelled;case 2:return e.Unknown;case 3:return e.InvalidArgument;case 4:return e.DeadlineExceeded;case 5:return e.NotFound;case 6:return e.AlreadyExists;case 7:return e.PermissionDenied;case 8:return e.ResourceExhausted;case 9:return e.FailedPrecondition;case 10:return e.Aborted;case 11:return e.OutOfRange;case 12:return e.Unimplemented;case 13:return e.Internal;case 14:return e.Unavailable;case 15:return e.DataLoss;case 16:return e.Unauthenticated;case 17:return e.Timeout;case 18:return e.GrpcWeb;default:throw new Error("(BUG) non-exhaustive GrpcStatus switch statement")}}toString(){switch(this){case e.Ok:return"OK";case e.Cancelled:return"CANCELLED";case e.Unknown:return"UNKNOWN";case e.InvalidArgument:return"INVALID_ARGUMENT";case e.DeadlineExceeded:return"DEADLINE_EXCEEDED";case e.NotFound:return"NOT_FOUND";case e.AlreadyExists:return"ALREADY_EXISTS";case e.PermissionDenied:return"PERMISSION_DENIED";case e.Unauthenticated:return"UNAUTHENTICATED";case e.ResourceExhausted:return"RESOURCE_EXHAUSTED";case e.FailedPrecondition:return"FAILED_PRECONDITION";case e.Aborted:return"ABORTED";case e.OutOfRange:return"OUT_OF_RANGE";case e.Unimplemented:return"UNIMPLEMENTED";case e.Internal:return"INTERNAL";case e.Unavailable:return"UNAVAILABLE";case e.DataLoss:return"DATA_LOSS";case e.Timeout:return"TIMEOUT";case e.GrpcWeb:return"GRPC_WEB";default:return`UNKNOWN (${this._code})`}}valueOf(){return this._code}};e$m.Ok=new e$m(0),e$m.Cancelled=new e$m(1),e$m.Unknown=new e$m(2),e$m.InvalidArgument=new e$m(3),e$m.DeadlineExceeded=new e$m(4),e$m.NotFound=new e$m(5),e$m.AlreadyExists=new e$m(6),e$m.PermissionDenied=new e$m(7),e$m.ResourceExhausted=new e$m(8),e$m.FailedPrecondition=new e$m(9),e$m.Aborted=new e$m(10),e$m.OutOfRange=new e$m(11),e$m.Unimplemented=new e$m(12),e$m.Internal=new e$m(13),e$m.Unavailable=new e$m(14),e$m.DataLoss=new e$m(15),e$m.Unauthenticated=new e$m(16),e$m.Timeout=new e$m(17),e$m.GrpcWeb=new e$m(18);let r$m=class e extends Error{constructor(t,r){super(`gRPC service failed with: Status: ${t.toString()}, Code: ${t.valueOf()}`),this.status=t,this.nodeAccountId=r,this.name="GrpcServiceError",void 0!==Error.captureStackTrace&&Error.captureStackTrace(this,e)}static _fromResponse(t){if(null!=t.code&&null!=t.details){const r=e$m._fromValue(t.code),n=new e(r);return n.stack+=`\nCaused by: ${t.stack?t.stack.toString():""}`,n.message+=`: ${t.details}`,n}return t}toString(){return`${this.name}: ${this.message}`}},r$l=class e extends Error{constructor(t){super(`failed with error code: ${t.toString()}`),this.status=t,this.name="HttpError",void 0!==Error.captureStackTrace&&Error.captureStackTrace(this,e)}},t$j=class extends Error{constructor(e,t){super(e),this.nodeAccountId=t}toJSON(){return{message:this.message,nodeAccountId:this.nodeAccountId}}toString(){return JSON.stringify(this.toJSON())}valueOf(){return this.toJSON()}};const c$8={Finished:"Finished",Retry:"Retry",Error:"Error"},a$7=/\brst[^0-9a-zA-Z]stream\b/i;let u$d=class{constructor(){this._maxAttempts=10,this._nodeAccountIds=new t$m,this.transactionNodeIds=[],this._signOnDemand=!1,this._minBackoff=null,this._maxBackoff=8e3,this._operator=null,this._requestTimeout=null,this._grpcDeadline=null,this._logger=null}get nodeAccountIds(){return this._nodeAccountIds.isEmpty?null:(this._nodeAccountIds.setLocked(),this._nodeAccountIds.list)}setNodeAccountIds(e){return this._nodeAccountIds.setList(e).setLocked(),this}get maxRetries(){return console.warn("Deprecated: use maxAttempts instead"),this.maxAttempts}setMaxRetries(e){return console.warn("Deprecated: use setMaxAttempts() instead"),this.setMaxAttempts(e)}get maxAttempts(){return this._maxAttempts}setMaxAttempts(e){return this._maxAttempts=e,this}get grpcDeadline(){return this._grpcDeadline}setGrpcDeadline(e){return this._grpcDeadline=e,this}setMinBackoff(e){if(null==e)throw new Error("minBackoff cannot be null.");if(null!=this._maxBackoff&&e>this._maxBackoff)throw new Error("minBackoff cannot be larger than maxBackoff.");return this._minBackoff=e,this}get minBackoff(){return this._minBackoff}setMaxBackoff(e){if(null==e)throw new Error("maxBackoff cannot be null.");if(null!=this._minBackoff&&e<this._minBackoff)throw new Error("maxBackoff cannot be smaller than minBackoff.");return this._maxBackoff=e,this}get maxBackoff(){return this._maxBackoff}_beforeExecute(e){throw new Error("not implemented")}_makeRequestAsync(){throw new Error("not implemented")}_mapStatusError(e,t,r){throw new Error("not implemented")}_mapResponse(e,t,r){throw new Error("not implemented")}_execute(e,t){throw new Error("not implemented")}_getTransactionId(){throw new Error("not implemented")}_getLogId(){throw new Error("not implemented")}_requestToBytes(e){throw new Error("not implemented")}_responseToBytes(e){throw new Error("not implemented")}_shouldRetry(e,t){throw new Error("not implemented")}_shouldRetryExceptionally(e){return!(e instanceof r$m)||e.status._code===e$m.Timeout._code||e.status._code===e$m.Unavailable._code||e.status._code===e$m.ResourceExhausted._code||e.status._code===e$m.GrpcWeb._code||e.status._code===e$m.Internal._code&&a$7.test(e.message)}_setOperatorWith(e,t,r){return this._operator={transactionSigner:r,accountId:e,publicKey:t},this}async executeWithSigner(e){return e.call(this)}isBatchedAndNotBatchTransaction(){return!1}async execute(e,t){const r=null!=e.network["127.0.0.1:50211"];if(this.isBatchedAndNotBatchTransaction())throw new Error("Cannot execute batchified transaction outside of BatchTransaction");this._logger=null==this._logger?null!=e._logger?e._logger:null:this._logger,null==this._requestTimeout&&(this._requestTimeout=null!=t?t:e.requestTimeout),await this._beforeExecute(e),null==this._maxBackoff&&(this._maxBackoff=e.maxBackoff),null==this._minBackoff&&(this._minBackoff=e.minBackoff);const n=Date.now();let o=null;const i=r?1e3:e._maxAttempts??this._maxAttempts;if(this.transactionNodeIds.length){const e=this._nodeAccountIds.list.map(e=>e.toString());if(!this.transactionNodeIds.some(t=>e.includes(t))){const t=e.length>2?`${e.slice(0,2).join(", ")} ...`:e.join(", "),r=1===e.length;throw new Error(`Attempting to execute a transaction against node${r?"":"s"} ${t}, which ${r?"is":"are"} not included in the Client's node list. Please review your Client configuration.`)}}for(let a=1;a<=i;a+=1){if(null!=this._requestTimeout&&n+this._requestTimeout<=Date.now())throw new t$j("timeout exceeded",this._nodeAccountIds.isEmpty?"No node account ID set":this._nodeAccountIds.current.toString());let t,c;if(this._nodeAccountIds.isEmpty?(c=e._network.getNode(),t=c.accountId,this._nodeAccountIds.setList([t])):(t=this._nodeAccountIds.current,c=e._network.getNode(t)),null==c)throw new Error(`NodeAccountId not recognized: ${t.toString()}`);if(this.transactionNodeIds.length&&!this.transactionNodeIds.includes(t.toString())){console.error(`Attempting to execute a transaction against node ${t.toString()}, which is not included in the Client's node list. Please review your Client configuration.`),this._nodeAccountIds.advance();continue}const u=this._getLogId();this._logger&&this._logger.debug(`[${u}] Node AccountID: ${c.accountId.toString()}, IP: ${c.address.toString()}`);const l=c.getChannel(),d=await this._makeRequestAsync();let h;if(!c.isHealthy()){const e=this._nodeAccountIds.index===this._nodeAccountIds.list.length-1;if(d$b(d)||r){await l$e(r,a,this._minBackoff,this._maxBackoff);continue}if(e||this._nodeAccountIds.length<=1)throw new Error(`Network connectivity issue: All nodes are unhealthy. Original node list: ${this._nodeAccountIds.list.join(", ")}`);this._logger&&this._logger.debug(`[${u}] Node is not healthy, trying the next node.`),this._nodeAccountIds.advance();continue}this._nodeAccountIds.advance();try{const e=[];null!=this._grpcDeadline&&e.push(new Promise((e,t)=>setTimeout(()=>t(new Error("grpc deadline exceeded")),this._grpcDeadline))),this._logger&&this._logger.trace(`[${this._getLogId()}] sending protobuf ${n$n(this._requestToBytes(d))}`),e.push(this._execute(l,d)),h=await Promise.race(e)}catch(s){const t=r$m._fromResponse(s);if(o=t,this._logger&&this._logger.debug(`[${u}] received error ${JSON.stringify(t)}`),(t instanceof r$m||t instanceof r$l)&&this._shouldRetryExceptionally(t)&&a<=i){this._logger&&this._logger.debug(`[${this._getLogId()}] node with accountId: ${c.accountId.toString()} and proxy IP: ${c.address.toString()} is unhealthy`),e._network.increaseBackoff(c);continue}throw s}this._logger&&this._logger.trace(`[${this._getLogId()}] sending protobuf ${n$n(this._responseToBytes(h))}`),e._network.decreaseBackoff(c);const[f,p]=this._shouldRetry(d,h);switch(f.toString()!==e$n.Ok.toString()&&f.toString()!==e$n.Success.toString()&&(o=f),p){case c$8.Retry:await l$e(r,a,this._minBackoff,this._maxBackoff);continue;case c$8.Finished:return this._mapResponse(h,t,d);case c$8.Error:throw this._mapStatusError(d,h,t);default:throw new Error("(BUG) non-exhaustive switch statement for `ExecutionState`")}}throw new t$j(`max attempts of ${i.toString()} was reached for request with last error being: ${null!=o?o.toString():""}`,this._nodeAccountIds.current.toString())}toBytes(){throw new Error("not implemented")}setLogger(e){return this._logger=e,this}get logger(){return this._logger}};function d$b(e){return"object"==typeof e&&null!==e&&("transactionGetReceipt"in e||"transactionGetRecord"in e)}function l$e(e,t,r,n){if(e)return new Promise(e=>setTimeout(e,r));const o=Math.min(Math.floor(r*Math.pow(2,t)),n);return new Promise(e=>setTimeout(e,o))}let n$j=class extends t$k{constructor(e){super(e,`transaction ${e.transactionId.toString()} failed precheck with status ${e.status.toString()} against node account id ${e.nodeId.toString()}`),this.contractFunctionResult=e.contractFunctionResult,this.nodeId=e.nodeId}toJSON(){return{name:this.name,status:this.status.toString(),transactionId:this.transactionId.toString(),nodeId:this.nodeId.toString(),message:this.message,contractFunctionResult:this.contractFunctionResult}}},e$l=class extends Error{constructor(e,t){super(),this.message=`query cost of ${e.toString()} HBAR exceeds max set on client: ${t.toString()} HBAR`,this.name="MaxQueryPaymentExceededError",this.queryCost=e,this.maxQueryPayment=t}},s$h=class extends u$d{constructor(){super()}async _makePaymentTransaction(e,t,r,n){const o=[];null!=r?(o.push({accountID:r.accountId._toProtobuf(),amount:n.negated().toTinybars()}),o.push({accountID:t._toProtobuf(),amount:n.toTinybars()})):(o.push({accountID:new f$2(0)._toProtobuf(),amount:n.negated().toTinybars()}),o.push({accountID:t._toProtobuf(),amount:n.toTinybars()}));const i={transactionID:e._toProtobuf(),nodeAccountID:t._toProtobuf(),transactionFee:new e$o(1).toTinybars(),transactionValidDuration:{seconds:Long.fromNumber(120)},cryptoTransfer:{transfers:{accountAmounts:o}}},s={bodyBytes:libExports.proto.TransactionBody.encode(i).finish()};if(null!=r){const e=await r.transactionSigner(s.bodyBytes);s.sigMap={sigPair:[r.publicKey._toProtobufSignature(e)]}}return{signedTransactionBytes:libExports.proto.SignedTransaction.encode(s).finish()}}},n$i=class extends s$h{constructor(e){super(),this._query=e,this._grpcDeadline=e._grpcDeadline,this._requestTimeout=e._requestTimeout,this._nodeAccountIds=e._nodeAccountIds.clone(),this._operator=e._operator,this._header=null}_getTransactionId(){return this._query._getTransactionId()}_getLogId(){return`CostQuery:${this._query._getLogId()}`}async _beforeExecute(e){if(null==e)throw new Error("Cannot do CostQuery without Client");const t=null!=this._operator?this._operator:e._operator;if(null==t)throw new Error("`client` must have an `operator` or an explicit payment transaction must be provided");this._query._nodeAccountIds.isEmpty&&this._query._nodeAccountIds.setList(e._network.getNodeAccountIdsForExecute());const r=i$c.generate(t.accountId);null==this._query.paymentTransactionId&&this._query.setPaymentTransactionId(r);const n=this._getLogId(),o=new f$2(0),i=i$c.generate(new f$2(0)),s=new e$o(0);this._logger&&this._logger.debug(`[${n}] making a payment transaction for node ${o.toString()} and transaction ID ${i.toString()} with amount ${s.toString()}`),this._header={payment:await this._makePaymentTransaction(i,new f$2(0),t,s),responseType:libExports.proto.ResponseType.COST_ANSWER}}_makeRequestAsync(){return Promise.resolve(this._query._onMakeRequest(this._header))}_shouldRetry(e,t){return this._query._shouldRetry(e,t)}_mapStatusError(e,t,r){return this._query._mapStatusError(e,t,r)}_mapResponse(e,t,r){const n=this._query._mapResponseHeader(e).cost;return Promise.resolve(e$o.fromTinybars(n))}_execute(e,t){return this._query._execute(e,t)}_requestToBytes(e){return this._query._requestToBytes(e)}_responseToBytes(e){return this._query._responseToBytes(e)}};const m$2=new Map;let h$3=class extends s$h{constructor(){super(),this._paymentTransactionId=null,this._paymentTransactions=[],this._queryPayment=null,this._maxQueryPayment=null,this._timestamp=Date.now()}static fromBytes(e){const t=libExports.proto.Query.decode(e);if(null==t.query)throw new Error("(BUG) query.query was not set in the protobuf");const r=m$2.get(t.query);if(null==r)throw new Error(`(BUG) Query.fromBytes() not implemented for type ${t.query}`);return r(t)}toBytes(){return libExports.proto.Query.encode(this._makeRequest()).finish()}setQueryPayment(e){return this._queryPayment=e,this}setMaxQueryPayment(e){return this._maxQueryPayment=e,this}async getCost(e){this._nodeAccountIds.isEmpty&&this._nodeAccountIds.setList(e._network.getNodeAccountIdsForExecute()),this._timestamp=Date.now();const t=await new n$i(this).execute(e);return e$o.fromTinybars(t._valueInTinybar.multipliedBy(1.1).toFixed(0))}setPaymentTransactionId(e){return this._paymentTransactionId=e,this}get paymentTransactionId(){return this._paymentTransactionId}_getTransactionId(){if(null==this._paymentTransactionId)throw new Error("Query.PaymentTransactionId was not set duration execution");return this._paymentTransactionId}_isPaymentRequired(){return!0}_validateChecksums(e){}async _beforeExecute(e){if(this._paymentTransactions.length>0)return;if(e.isAutoValidateChecksumsEnabled()&&this._validateChecksums(e),this._nodeAccountIds.isEmpty&&this._nodeAccountIds.setList(e._network.getNodeAccountIdsForExecute()),this._operator=null!=this._operator?this._operator:e._operator,this._isPaymentRequired()){if(this.transactionNodeIds=Object.values(e.network).map(e=>e.toString()),null==this._operator)throw new Error("`client` must have an `operator` or an explicit payment transaction must be provided");this._paymentTransactionId=i$c.generate(this._operator.accountId)}else this._paymentTransactionId=i$c.generate(new f$2(0));let t=new e$o(0);const r=null!=this._maxQueryPayment?this._maxQueryPayment:e.defaultMaxQueryPayment;if(null!=this._queryPayment)t=this._queryPayment;else if(0===this._paymentTransactions.length&&this._isPaymentRequired()){const n=await this.getCost(e);if(r.toTinybars().toInt()<n.toTinybars().toInt())throw new e$l(n,r);t=n,this._logger&&this._logger.debug(`[${this._getLogId()}] received cost for query ${t.toString()}`)}this._queryPayment=t,this._timestamp=Date.now(),this._nodeAccountIds.setLocked();for(const n of this._nodeAccountIds.list){const e=this._getLogId(),t=this._paymentTransactionId,r=this._queryPayment;this._logger&&this._logger.debug(`[${e}] making a payment transaction for node ${n.toString()} and transaction ID ${t.toString()} with amount ${r.toString()}`),this._paymentTransactions.push(await this._makePaymentTransaction(t,n,this._isPaymentRequired()?this._operator:null,r))}}_mapResponseHeader(e){throw new Error("not implemented")}_makeRequestHeader(){let e={};return this._isPaymentRequired()&&this._paymentTransactions.length>0&&(e={responseType:libExports.proto.ResponseType.ANSWER_ONLY,payment:this._paymentTransactions[this._nodeAccountIds.index]}),e}_onMakeRequest(e){throw new Error("not implemented")}_makeRequest(){let e={};return this._isPaymentRequired()&&null!=this._paymentTransactions&&(e={payment:this._paymentTransactions[this._nodeAccountIds.index],responseType:libExports.proto.ResponseType.ANSWER_ONLY}),this._onMakeRequest(e)}async _makeRequestAsync(){let e={responseType:libExports.proto.ResponseType.ANSWER_ONLY};const t=this._getLogId(),r=this._nodeAccountIds.current,n=i$c.generate(this._operator?this._operator.accountId:new f$2(0)),o=this._queryPayment;return this._logger&&this._logger.debug(`[${t}] making a payment transaction for node ${r.toString()} and transaction ID ${n.toString()} with amount ${o.toString()}`),e.payment=await this._makePaymentTransaction(n,r,this._isPaymentRequired()?this._operator:null,o),this._onMakeRequest(e)}_shouldRetry(e,t){const{nodeTransactionPrecheckCode:r}=this._mapResponseHeader(t),n=e$n._fromCode(null!=r?r:libExports.proto.ResponseCodeEnum.OK);switch(this._logger&&this._logger.debug(`[${this._getLogId()}] received status ${n.toString()}`),n){case e$n.Busy:case e$n.Unknown:case e$n.PlatformTransactionNotCreated:case e$n.PlatformNotActive:return[n,c$8.Retry];case e$n.Ok:return[n,c$8.Finished];default:return[n,c$8.Error]}}_mapStatusError(e,t,r){const{nodeTransactionPrecheckCode:n}=this._mapResponseHeader(t),o=e$n._fromCode(null!=n?n:libExports.proto.ResponseCodeEnum.OK);return new n$j({nodeId:r,status:o,transactionId:this._getTransactionId(),contractFunctionResult:null})}_requestToBytes(e){return libExports.proto.Query.encode(e).finish()}_responseToBytes(e){return libExports.proto.Response.encode(e).finish()}};class v extends t$r{constructor(e,t,r,n){super();const o=f$3(e,t,r);this.shard=o.shard,this.realm=o.realm,this.num=o.num,this.evmAddress=null!=n?n:null,this._checksum=null}static fromEvmAddress(e,t,r){return w$3(r$p(r))?new v(...w$2(r)):new v(e,t,0,r$p(r))}static fromString(e){const t=d$c(e);if(Number.isNaN(t.shard)||Number.isNaN(t.realm))throw new Error("invalid format for entity ID");const r=null!=t.shard?Long.fromString(t.shard):Long.ZERO,n=null!=t.realm?Long.fromString(t.realm):Long.ZERO,[o,i]=t.numOrHex.length<40?[Long.fromString(t.numOrHex),void 0]:[Long.ZERO,r$p(t.numOrHex)];return new v(r,n,o,i)}static _fromProtobuf(e){return new v(null!=e.shardNum?e.shardNum:0,null!=e.realmNum?e.realmNum:0,null!=e.contractNum?e.contractNum:0)}get checksum(){return this._checksum}async populateAccountNum(e){if(null===this.evmAddress)throw new Error("field `evmAddress` should not be null");const t=`https://${e.mirrorNetwork[0].slice(0,e.mirrorNetwork[0].indexOf(":"))}/api/v1/contracts/${n$n(this.evmAddress)}`,r=await fetch(t),n=(await r.json()).contract_id;return this.num=Long.fromString(n.slice(n.lastIndexOf(".")+1)),this}validate(e){console.warn("Deprecated: Use `validateChecksum` instead"),this.validateChecksum(e)}validateChecksum(e){S$1(this.shard,this.realm,this.num,this._checksum,e)}static fromBytes(e){return v._fromProtobuf(libExports.proto.ContractID.decode(e))}static fromSolidityAddress(e){return w$3(r$p(e))?new v(...w$2(e)):this.fromEvmAddress(0,0,e)}toSolidityAddress(){return null!=this.evmAddress?n$n(this.evmAddress):y$1([this.shard,this.realm,this.num])}_toProtobuf(){return{contractNum:this.num,shardNum:this.shard,realmNum:this.realm,evmAddress:this.evmAddress}}toString(){return null!=this.evmAddress?`${this.shard.toString()}.${this.realm.toString()}.${n$n(this.evmAddress)}`:`${this.shard.toString()}.${this.realm.toString()}.${this.num.toString()}`}toStringWithChecksum(e){return k$1(this.toString(),e)}toBytes(){return libExports.proto.ContractID.encode(this._toProtobuf()).finish()}clone(){const e=new v(this);return e._checksum=this._checksum,e.evmAddress=this.evmAddress,e}compare(e){return h$4([this.shard,this.realm,this.num],[e.shard,e.realm,e.num])}equals(e){let t=!1;return null!=this.evmAddress&&null!=e.evmAddress&&(t=e$r(this.evmAddress,e.evmAddress)),this.shard.eq(e.shard)&&this.realm.eq(e.realm)&&this.num.eq(e.num)&&t}_toProtobufKey(){return{contractID:this._toProtobuf()}}static __fromProtobufKey(e){return v._fromProtobuf(e)}}t$s.setContractId(e=>v.__fromProtobufKey(e));let u$c=class e{constructor(e,t,r){const n=f$3(e,t,r);this.shard=n.shard,this.realm=n.realm,this.num=n.num,this._checksum=null}static getAddressBookFileIdFor(t=0,r=0){return new e({num:102,shard:t,realm:r})}static getFeeScheduleFileIdFor(t=0,r=0){return new e({num:111,shard:t,realm:r})}static getExchangeRatesFileIdFor(t=0,r=0){return new e({num:112,shard:t,realm:r})}static fromString(t){const r=g$1(t),n=new e(r);return n._checksum=r.checksum,n}static _fromProtobuf(t){return new e(null!=t.shardNum?Long.fromString(t.shardNum.toString()):0,null!=t.realmNum?Long.fromString(t.realmNum.toString()):0,null!=t.fileNum?Long.fromString(t.fileNum.toString()):0)}get checksum(){return this._checksum}validate(e){console.warn("Deprecated: Use `validateChecksum` instead"),this.validateChecksum(e)}validateChecksum(e){S$1(this.shard,this.realm,this.num,this._checksum,e)}static fromBytes(t){return e._fromProtobuf(libExports.proto.FileID.decode(t))}static fromSolidityAddress(t){const[r,n,o]=w$2(t);return new e(r,n,o)}toSolidityAddress(){return y$1([this.shard,this.realm,this.num])}_toProtobuf(){return{fileNum:this.num,shardNum:this.shard,realmNum:this.realm}}toString(){return`${this.shard.toString()}.${this.realm.toString()}.${this.num.toString()}`}toStringWithChecksum(e){return k$1(this.toString(),e)}toBytes(){return libExports.proto.FileID.encode(this._toProtobuf()).finish()}clone(){const t=new e(this);return t._checksum=this._checksum,t}compare(e){return h$4([this.shard,this.realm,this.num],[e.shard,e.realm,e.num])}};u$c.ADDRESS_BOOK=new u$c(102),u$c.FEE_SCHEDULE=new u$c(111),u$c.EXCHANGE_RATES=new u$c(112);let m$1=class e{constructor(e,t,r){const n=f$3(e,t,r);this.shard=n.shard,this.realm=n.realm,this.num=n.num,this._checksum=null}static fromString(t){const r=g$1(t),n=new e(r);return n._checksum=r.checksum,n}static _fromProtobuf(t){return new e(null!=t.shardNum?t.shardNum:0,null!=t.realmNum?t.realmNum:0,null!=t.topicNum?t.topicNum:0)}get checksum(){return this._checksum}validate(e){console.warn("Deprecated: Use `validateChecksum` instead"),this.validateChecksum(e)}validateChecksum(e){S$1(this.shard,this.realm,this.num,this._checksum,e)}static fromBytes(t){return e._fromProtobuf(libExports.proto.TopicID.decode(t))}static fromSolidityAddress(t){const[r,n,o]=w$2(t);return new e(r,n,o)}toSolidityAddress(){return y$1([this.shard,this.realm,this.num])}_toProtobuf(){return{topicNum:this.num,shardNum:this.shard,realmNum:this.realm}}toString(){return`${this.shard.toString()}.${this.realm.toString()}.${this.num.toString()}`}toStringWithChecksum(e){return k$1(this.toString(),e)}toBytes(){return libExports.proto.TopicID.encode(this._toProtobuf()).finish()}clone(){const t=new e(this);return t._checksum=this._checksum,t}compare(e){return h$4([this.shard,this.realm,this.num],[e.shard,e.realm,e.num])}},u$b=class e{constructor(e,t,r){const n=f$3(e,t,r);this.shard=n.shard,this.realm=n.realm,this.num=n.num,this._checksum=null}static fromString(t){const r=g$1(t),n=new e(r);return n._checksum=r.checksum,n}static _fromProtobuf(t){return new e(null!=t.shardNum?t.shardNum:0,null!=t.realmNum?t.realmNum:0,null!=t.tokenNum?t.tokenNum:0)}get checksum(){return this._checksum}validate(e){console.warn("Deprecated: Use `validateChecksum` instead"),this.validateChecksum(e)}validateChecksum(e){S$1(this.shard,this.realm,this.num,this._checksum,e)}static fromBytes(t){return e._fromProtobuf(libExports.proto.TokenID.decode(t))}static fromSolidityAddress(t){return new e(...w$2(t))}toSolidityAddress(){return y$1([this.shard,this.realm,this.num])}_toProtobuf(){return{tokenNum:this.num,shardNum:this.shard,realmNum:this.realm}}toString(){return`${this.shard.toString()}.${this.realm.toString()}.${this.num.toString()}`}toStringWithChecksum(e){return k$1(this.toString(),e)}toBytes(){return libExports.proto.TokenID.encode(this._toProtobuf()).finish()}clone(){const t=new e(this);return t._checksum=this._checksum,t}compare(e){return h$4([this.shard,this.realm,this.num],[e.shard,e.realm,e.num])}},o$k=class e{constructor(e,t,r){const n=f$3(e,t,r);this.shard=n.shard,this.realm=n.realm,this.num=n.num,this._checksum=null}static fromString(t){const r=g$1(t),n=new e(r);return n._checksum=r.checksum,n}static _fromProtobuf(t){return new e(null!=t.shardNum?t.shardNum:0,null!=t.realmNum?t.realmNum:0,null!=t.scheduleNum?t.scheduleNum:0)}get checksum(){return this._checksum}validate(e){console.warn("Deprecated: Use `validateChecksum` instead"),this.validateChecksum(e)}validateChecksum(e){S$1(this.shard,this.realm,this.num,this._checksum,e)}static fromBytes(t){return e._fromProtobuf(libExports.proto.ScheduleID.decode(t))}static fromSolidityAddress(t){return new e(...w$2(t))}toSolidityAddress(){return y$1([this.shard,this.realm,this.num])}_toProtobuf(){return{scheduleNum:this.num,shardNum:this.shard,realmNum:this.realm}}toString(){return`${this.shard.toString()}.${this.realm.toString()}.${this.num.toString()}`}toStringWithChecksum(e){return k$1(this.toString(),e)}toBytes(){return libExports.proto.ScheduleID.encode(this._toProtobuf()).finish()}clone(){const t=new e(this);return t._checksum=this._checksum,t}compare(e){return h$4([this.shard,this.realm,this.num],[e.shard,e.realm,e.num])}},t$i=class e{constructor(e){this.hbars=e.hbars,this.cents=e.cents,this.expirationTime=e.expirationTime,this.exchangeRateInCents=e.cents/e.hbars,Object.freeze(this)}static _fromProtobuf(t){return new e({hbars:t.hbarEquiv,cents:t.centEquiv,expirationTime:new Date(null!=t.expirationTime&&null!=t.expirationTime.seconds?Long.isLong(t.expirationTime.seconds)?1e3*t.expirationTime.seconds.toInt():t.expirationTime.seconds:0)})}_toProtobuf(){return{hbarEquiv:this.hbars,centEquiv:this.cents,expirationTime:{seconds:Long.fromNumber(Math.trunc(this.expirationTime.getTime()/1e3))}}}toJSON(){return{hbars:this.hbars,cents:this.cents,expirationTime:this.expirationTime,exchangeRateInCents:this.exchangeRateInCents}}toString(){return JSON.stringify(this.toJSON())}},d$a=class e{constructor(e){this.status=e.status,this.accountId=e.accountId,this.fileId=e.fileId,this.contractId=e.contractId,this.topicId=e.topicId,this.tokenId=e.tokenId,this.scheduleId=e.scheduleId,this.exchangeRate=e.exchangeRate,this.nextExchangeRate=e.nextExchangeRate,this.topicSequenceNumber=e.topicSequenceNumber,this.topicRunningHash=e.topicRunningHash,this.totalSupply=e.totalSupply,this.scheduledTransactionId=e.scheduledTransactionId,this.serials=e.serials??[],this.duplicates=e.duplicates??[],this.children=e.children??[],this.nodeId=e.nodeId,Object.freeze(this)}_toProtobuf(){return{duplicateTransactionReceipts:this.duplicates.map(e=>e._toProtobuf().receipt),childTransactionReceipts:this.children.map(e=>e._toProtobuf().receipt),receipt:{status:this.status.valueOf(),accountID:null!=this.accountId?this.accountId._toProtobuf():null,fileID:null!=this.fileId?this.fileId._toProtobuf():null,contractID:null!=this.contractId?this.contractId._toProtobuf():null,topicID:null!=this.topicId?this.topicId._toProtobuf():null,tokenID:null!=this.tokenId?this.tokenId._toProtobuf():null,scheduleID:null!=this.scheduleId?this.scheduleId._toProtobuf():null,topicRunningHash:null==this.topicRunningHash?null:this.topicRunningHash,topicSequenceNumber:this.topicSequenceNumber,exchangeRate:{nextRate:null!=this.nextExchangeRate?this.nextExchangeRate._toProtobuf():null,currentRate:null!=this.exchangeRate?this.exchangeRate._toProtobuf():null},scheduledTransactionID:null!=this.scheduledTransactionId?this.scheduledTransactionId._toProtobuf():null,serialNumbers:this.serials,newTotalSupply:this.totalSupply,nodeId:this.nodeId}}}static _fromProtobuf(t){const r=t.receipt,n=null!=t.childTransactionReceipts?t.childTransactionReceipts.map(t=>e._fromProtobuf({receipt:t})):[],o=null!=t.duplicateTransactionReceipts?t.duplicateTransactionReceipts.map(t=>e._fromProtobuf({receipt:t})):[];return new e({status:e$n._fromCode(null!=r.status?r.status:0),accountId:null!=r.accountID?f$2._fromProtobuf(r.accountID):null,fileId:null!=r.fileID?u$c._fromProtobuf(r.fileID):null,contractId:null!=r.contractID?v._fromProtobuf(r.contractID):null,topicId:null!=r.topicID?m$1._fromProtobuf(r.topicID):null,tokenId:null!=r.tokenID?u$b._fromProtobuf(r.tokenID):null,scheduleId:null!=r.scheduleID?o$k._fromProtobuf(r.scheduleID):null,exchangeRate:null!=r.exchangeRate?t$i._fromProtobuf(r.exchangeRate.currentRate):null,nextExchangeRate:null!=r.exchangeRate?t$i._fromProtobuf(r.exchangeRate.nextRate):null,topicSequenceNumber:null==r.topicSequenceNumber?null:Long.fromString(r.topicSequenceNumber.toString()),topicRunningHash:null!=r.topicRunningHash?new Uint8Array(r.topicRunningHash):null,totalSupply:null!=r.newTotalSupply?Long.fromString(r.newTotalSupply.toString()):null,scheduledTransactionId:null!=r.scheduledTransactionID?i$c._fromProtobuf(r.scheduledTransactionID):null,serials:null!=r.serialNumbers?r.serialNumbers.map(e=>Long.fromValue(e)):[],children:n,duplicates:o,nodeId:null!=r.nodeId?r.nodeId:null})}static fromBytes(t){return e._fromProtobuf(libExports.proto.TransactionGetReceiptResponse.decode(t))}toBytes(){return libExports.proto.TransactionGetReceiptResponse.encode(this._toProtobuf()).finish()}toJSON(){return{status:this.status.toString(),accountId:this.accountId?.toString()||null,filedId:this.fileId?.toString()||null,contractId:this.contractId?.toString()||null,topicId:this.topicId?.toString()||null,tokenId:this.tokenId?.toString()||null,scheduleId:this.scheduleId?.toString()||null,exchangeRate:this.exchangeRate?.toJSON()||null,nextExchangeRate:this.nextExchangeRate?.toJSON()||null,topicSequenceNumber:this.topicSequenceNumber?.toString()||null,topicRunningHash:null!=this.topicRunningHash?n$n(this.topicRunningHash):null,totalSupply:this.totalSupply?.toString()||null,scheduledTransactionId:this.scheduledTransactionId?.toString()||null,serials:this.serials.map(e=>e.toString()),duplicates:this.duplicates.map(e=>e.toJSON()),children:this.children.map(e=>e.toJSON()),nodeId:this.nodeId?.toString()||null}}toString(){return JSON.stringify(this.toJSON())}};const{proto:u$a}=e$s;let l$d=class e extends h$3{constructor(e={}){super(),this._transactionId=null,this._includeChildren=null,this._includeDuplicates=null,this._validateStatus=!0,null!=e.transactionId&&this.setTransactionId(e.transactionId),null!=e.includeChildren&&this.setIncludeChildren(e.includeChildren),null!=e.includeDuplicates&&this.setIncludeDuplicates(e.includeDuplicates),null!=e.validateStatus&&this.setValidateStatus(e.validateStatus)}static _fromProtobuf(t){const r=t.transactionGetReceipt;return new e({transactionId:r.transactionID?i$c._fromProtobuf(r.transactionID):void 0,includeDuplicates:null!=r.includeDuplicates?r.includeDuplicates:void 0,includeChildren:null!=r.includeChildReceipts?r.includeChildReceipts:void 0})}get transactionId(){return this._transactionId}setTransactionId(e){return this._transactionId="string"==typeof e?i$c.fromString(e):e.clone(),this}setIncludeDuplicates(e){return this._includeDuplicates=e,this}get includeDuplicates(){return null!=this._includeDuplicates&&this._includeDuplicates}setIncludeChildren(e){return this._includeChildren=e,this}get includeChildren(){return null!=this._includeChildren&&this._includeChildren}setValidateStatus(e){return this._validateStatus=e,this}get validateStatus(){return this._validateStatus}_isPaymentRequired(){return!1}_shouldRetry(e,t){const{nodeTransactionPrecheckCode:r}=this._mapResponseHeader(t);let n=e$n._fromCode(null!=r?r:u$a.ResponseCodeEnum.OK);switch(this._logger&&this._logger.debug(`[${this._getLogId()}] received node precheck status ${n.toString()}`),n){case e$n.Busy:case e$n.Unknown:case e$n.ReceiptNotFound:case e$n.PlatformNotActive:return[n,c$8.Retry];case e$n.Ok:break;default:return[n,c$8.Error]}const o=t.transactionGetReceipt.receipt.status;switch(n=e$n._fromCode(o),this._logger&&this._logger.debug(`[${this._getLogId()}] received receipt status ${n.toString()}`),n){case e$n.Busy:case e$n.Unknown:case e$n.ReceiptNotFound:return[n,c$8.Retry];case e$n.Success:case e$n.FeeScheduleFilePartUploaded:return[n,c$8.Finished];default:return[n,this._validateStatus?c$8.Error:c$8.Finished]}}_getTransactionId(){return null!=this._transactionId?this._transactionId:super._getTransactionId()}_mapStatusError(e,t,r){const{nodeTransactionPrecheckCode:n}=this._mapResponseHeader(t);let o=e$n._fromCode(null!=n?n:u$a.ResponseCodeEnum.OK);if(o!==e$n.Ok)return new n$j({nodeId:r,status:o,transactionId:this._getTransactionId(),contractFunctionResult:null});const i=t.transactionGetReceipt,s=i.receipt.status;if(o=e$n._fromCode(s),null==this._transactionId)throw new Error("Failed to construct `ReceiptStatusError` because `transactionId` is `null`");return new r$n({status:o,transactionId:this._transactionId,transactionReceipt:d$a._fromProtobuf(i)})}_validateChecksums(e){null!=this._transactionId&&null!=this._transactionId.accountId&&this._transactionId.accountId.validateChecksum(e)}_execute(e,t){return e.crypto.getTransactionReceipts(t)}_mapResponseHeader(e){return e.transactionGetReceipt.header}_mapResponse(e,t,r){const n=e.transactionGetReceipt;return Promise.resolve(d$a._fromProtobuf(n))}_onMakeRequest(e){return{transactionGetReceipt:{header:e,transactionID:null!=this._transactionId?this._transactionId._toProtobuf():null,includeDuplicates:this._includeDuplicates,includeChildReceipts:this._includeChildren}}}_getLogId(){return`TransactionReceiptQuery:${this._timestamp.toString()}`}};m$2.set("transactionGetReceipt",l$d._fromProtobuf);let n$h=class e{constructor(e){this.accountId=e.accountId instanceof f$2?e.accountId:f$2.fromString(e.accountId),this.amount=e.amount instanceof e$o?e.amount:new e$o(e.amount),this.isApproved=e.isApproved}static _fromProtobuf(t){const r=[];for(const n of t)r.push(new e({accountId:f$2._fromProtobuf(n.accountID),amount:e$o.fromTinybars(null!=n.amount?n.amount:0),isApproved:n.isApproval}));return r}_toProtobuf(){return{accountID:this.accountId._toProtobuf(),amount:this.amount.toTinybars(),isApproval:this.isApproved}}toJSON(){return{accountId:this.accountId.toString(),amount:this.amount.toTinybars().toString(),isApproved:this.isApproved}}toString(){return JSON.stringify(this.toJSON())}},o$j=class e{constructor(e){this.contractId=e.contractId,this.bloom=e.bloom,this.topics=e.topics,this.data=e.data,Object.freeze(this)}static _fromProtobuf(t){return new e({contractId:v._fromProtobuf(t.contractID),bloom:null!=t.bloom?t.bloom:new Uint8Array,topics:null!=t.topic?t.topic:[],data:null!=t.data?t.data:new Uint8Array})}_toProtobuf(){return{contractID:this.contractId._toProtobuf(),bloom:this.bloom,topic:this.topics,data:this.data}}};function e$k(e){return(new TextDecoder).decode(e)}function n$g(e){return(new TextEncoder).encode(e)}var bnExports=requireBn$4();const _BN=getDefaultExportFromCjs(bnExports),version$5="bignumber/5.8.0";var BN=_BN.BN;const logger$7=new Logger$1(version$5),_constructorGuard$1={},MAX_SAFE=9007199254740991;let _warnedToStringRadix=!1,BigNumber$1=class e{constructor(e,t){e!==_constructorGuard$1&&logger$7.throwError("cannot call constructor directly; use BigNumber.from",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return toBigNumber(toBN(this).fromTwos(e))}toTwos(e){return toBigNumber(toBN(this).toTwos(e))}abs(){return"-"===this._hex[0]?e.from(this._hex.substring(1)):this}add(e){return toBigNumber(toBN(this).add(toBN(e)))}sub(e){return toBigNumber(toBN(this).sub(toBN(e)))}div(t){return e.from(t).isZero()&&throwFault("division-by-zero","div"),toBigNumber(toBN(this).div(toBN(t)))}mul(e){return toBigNumber(toBN(this).mul(toBN(e)))}mod(e){const t=toBN(e);return t.isNeg()&&throwFault("division-by-zero","mod"),toBigNumber(toBN(this).umod(t))}pow(e){const t=toBN(e);return t.isNeg()&&throwFault("negative-power","pow"),toBigNumber(toBN(this).pow(t))}and(e){const t=toBN(e);return(this.isNegative()||t.isNeg())&&throwFault("unbound-bitwise-result","and"),toBigNumber(toBN(this).and(t))}or(e){const t=toBN(e);return(this.isNegative()||t.isNeg())&&throwFault("unbound-bitwise-result","or"),toBigNumber(toBN(this).or(t))}xor(e){const t=toBN(e);return(this.isNegative()||t.isNeg())&&throwFault("unbound-bitwise-result","xor"),toBigNumber(toBN(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&throwFault("negative-width","mask"),toBigNumber(toBN(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&throwFault("negative-width","shl"),toBigNumber(toBN(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&throwFault("negative-width","shr"),toBigNumber(toBN(this).shrn(e))}eq(e){return toBN(this).eq(toBN(e))}lt(e){return toBN(this).lt(toBN(e))}lte(e){return toBN(this).lte(toBN(e))}gt(e){return toBN(this).gt(toBN(e))}gte(e){return toBN(this).gte(toBN(e))}isNegative(){return"-"===this._hex[0]}isZero(){return toBN(this).isZero()}toNumber(){try{return toBN(this).toNumber()}catch(e){throwFault("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return logger$7.throwError("this platform does not support BigInt",Logger$1.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?_warnedToStringRadix||(_warnedToStringRadix=!0,logger$7.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?logger$7.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Logger$1.errors.UNEXPECTED_ARGUMENT,{}):logger$7.throwError("BigNumber.toString does not accept parameters",Logger$1.errors.UNEXPECTED_ARGUMENT,{})),toBN(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof e)return t;if("string"==typeof t)return t.match(/^-?0x[0-9a-f]+$/i)?new e(_constructorGuard$1,toHex(t)):t.match(/^-?[0-9]+$/)?new e(_constructorGuard$1,toHex(new BN(t))):logger$7.throwArgumentError("invalid BigNumber string","value",t);if("number"==typeof t)return t%1&&throwFault("underflow","BigNumber.from",t),(t>=MAX_SAFE||t<=-MAX_SAFE)&&throwFault("overflow","BigNumber.from",t),e.from(String(t));const r=t;if("bigint"==typeof r)return e.from(r.toString());if(isBytes(r))return e.from(hexlify(r));if(r)if(r.toHexString){const t=r.toHexString();if("string"==typeof t)return e.from(t)}else{let t=r._hex;if(null==t&&"BigNumber"===r.type&&(t=r.hex),"string"==typeof t&&(isHexString(t)||"-"===t[0]&&isHexString(t.substring(1))))return e.from(t)}return logger$7.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(e){return!(!e||!e._isBigNumber)}};function toHex(e){if("string"!=typeof e)return toHex(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&logger$7.throwArgumentError("invalid hex","value",e),"0x00"===(e=toHex(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function toBigNumber(e){return BigNumber$1.from(toHex(e))}function toBN(e){const t=BigNumber$1.from(e).toHexString();return"-"===t[0]?new BN("-"+t.substring(3),16):new BN(t.substring(2),16)}function throwFault(e,t,r){const n={fault:e,operation:t};return null!=r&&(n.value=r),logger$7.throwError(e,Logger$1.errors.NUMERIC_FAULT,n)}function _base36To16(e){return new BN(e,36).toString(16)}function defineReadOnly(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}const version$4="abi/5.8.0",logger$6=new Logger$1(version$4),_constructorGuard={};let ModifiersBytes={calldata:!0,memory:!0,storage:!0},ModifiersNest={calldata:!0,memory:!0};function checkModifier(e,t){if("bytes"===e||"string"===e){if(ModifiersBytes[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&ModifiersNest[t])return!0;return(ModifiersBytes[t]||"payable"===t)&&logger$6.throwArgumentError("invalid modifier","name",t),!1}function parseParamType(e,t){let r=e;function n(t){logger$6.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function o(e){let r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");let i={type:"",name:"",state:{allowType:!0}},s=i;for(let a=0;a<e.length;a++){let r=e[a];switch(r){case"(":s.state.allowType&&""===s.type?s.type="tuple":s.state.allowParams||n(a),s.state.allowType=!1,s.type=verifyType(s.type),s.components=[o(s)],s=s.components[0];break;case")":delete s.state,"indexed"===s.name&&(t||n(a),s.indexed=!0,s.name=""),checkModifier(s.type,s.name)&&(s.name=""),s.type=verifyType(s.type);let e=s;s=s.parent,s||n(a),delete e.parent,s.state.allowParams=!1,s.state.allowName=!0,s.state.allowArray=!0;break;case",":delete s.state,"indexed"===s.name&&(t||n(a),s.indexed=!0,s.name=""),checkModifier(s.type,s.name)&&(s.name=""),s.type=verifyType(s.type);let i=o(s.parent);s.parent.components.push(i),delete s.parent,s=i;break;case" ":s.state.allowType&&""!==s.type&&(s.type=verifyType(s.type),delete s.state.allowType,s.state.allowName=!0,s.state.allowParams=!0),s.state.allowName&&""!==s.name&&("indexed"===s.name?(t||n(a),s.indexed&&n(a),s.indexed=!0,s.name=""):checkModifier(s.type,s.name)?s.name="":s.state.allowName=!1);break;case"[":s.state.allowArray||n(a),s.type+=r,s.state.allowArray=!1,s.state.allowName=!1,s.state.readArray=!0;break;case"]":s.state.readArray||n(a),s.type+=r,s.state.readArray=!1,s.state.allowArray=!0,s.state.allowName=!0;break;default:s.state.allowType?(s.type+=r,s.state.allowParams=!0,s.state.allowArray=!0):s.state.allowName?(s.name+=r,delete s.state.allowArray):s.state.readArray?s.type+=r:n(a)}}return s.parent&&logger$6.throwArgumentError("unexpected eof","param",e),delete i.state,"indexed"===s.name?(t||n(r.length-7),s.indexed&&n(r.length-7),s.indexed=!0,s.name=""):checkModifier(s.type,s.name)&&(s.name=""),i.type=verifyType(i.type),i}function populate(e,t){for(let r in t)defineReadOnly(e,r,t[r])}const FormatTypes=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),paramTypeArray=new RegExp(/^(.*)\[([0-9]*)\]$/);class ParamType{constructor(e,t){e!==_constructorGuard&&logger$6.throwError("use fromString",Logger$1.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),populate(this,t);let r=this.type.match(paramTypeArray);populate(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:ParamType.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=FormatTypes.sighash),FormatTypes[e]||logger$6.throwArgumentError("invalid format type","format",e),e===FormatTypes.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(t)}let t="";return"array"===this.baseType?(t+=this.arrayChildren.format(e),t+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):"tuple"===this.baseType?(e!==FormatTypes.sighash&&(t+=this.type),t+="("+this.components.map(t=>t.format(e)).join(e===FormatTypes.full?", ":",")+")"):t+=this.type,e!==FormatTypes.sighash&&(!0===this.indexed&&(t+=" indexed"),e===FormatTypes.full&&this.name&&(t+=" "+this.name)),t}static from(e,t){return"string"==typeof e?ParamType.fromString(e,t):ParamType.fromObject(e)}static fromObject(e){return ParamType.isParamType(e)?e:new ParamType(_constructorGuard,{name:e.name||null,type:verifyType(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(ParamType.fromObject):null})}static fromString(e,t){return r=parseParamType(e,!!t),ParamType.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components});var r}static isParamType(e){return!(null==e||!e._isParamType)}}function verifyType(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}const logger$5=new Logger$1(version$4);class Coder{constructor(e,t,r,n){this.name=e,this.type=t,this.localName=r,this.dynamic=n}_throwError(e,t){logger$5.throwArgumentError(e,this.localName,t)}}let Writer$1=class{constructor(e){defineReadOnly(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return hexConcat(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(concat$1(e._data))}writeBytes(e){let t=arrayify(e);const r=t.length%this.wordSize;return r&&(t=concat$1([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=arrayify(BigNumber$1.from(e));return t.length>this.wordSize&&logger$5.throwError("value out-of-bounds",Logger$1.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=concat$1([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}};class Reader{constructor(e,t,r,n){defineReadOnly(this,"_data",arrayify(e)),defineReadOnly(this,"wordSize",t||32),defineReadOnly(this,"_coerceFunc",r),defineReadOnly(this,"allowLoose",n),this._offset=0}get data(){return hexlify(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&parseInt(r[1])<=48&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):Reader.coerce(e,t)}_peekBytes(e,t,r){let n=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+n>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?n=t:logger$5.throwError("data out-of-bounds",Logger$1.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+n})),this._data.slice(this._offset,this._offset+n)}subReader(e){return new Reader(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return BigNumber$1.from(this.readBytes(this.wordSize))}}var sha3$1={exports:{}},hasRequiredSha3;function requireSha3(){return hasRequiredSha3||(hasRequiredSha3=1,e=sha3$1,function(){var t="input is invalid type",r="object"==typeof window,n=r?window:{};n.JS_SHA3_NO_WINDOW&&(r=!1);var o=!r&&"object"==typeof self;!n.JS_SHA3_NO_NODE_JS&&"object"==typeof process$1&&process$1.versions&&process$1.versions.node?n=commonjsGlobal:o&&(n=self);var i=!n.JS_SHA3_NO_COMMON_JS&&e.exports,s=!n.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,a="0123456789abcdef".split(""),c=[4,1024,262144,67108864],u=[0,8,16,24],l=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],d=[224,256,384,512],h=[128,256],f=["hex","buffer","arrayBuffer","array","digest"],p={128:168,256:136};!n.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),!s||!n.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var m=function(e,t,r){return function(n){return new R(e,t,e).update(n)[r]()}},y=function(e,t,r){return function(n,o){return new R(e,t,o).update(n)[r]()}},g=function(e,t,r){return function(t,n,o,i){return I["cshake"+e].update(t,n,o,i)[r]()}},b=function(e,t,r){return function(t,n,o,i){return I["kmac"+e].update(t,n,o,i)[r]()}},_=function(e,t,r,n){for(var o=0;o<f.length;++o){var i=f[o];e[i]=t(r,n,i)}return e},w=function(e,t){var r=m(e,t,"hex");return r.create=function(){return new R(e,t,e)},r.update=function(e){return r.create().update(e)},_(r,m,e,t)},v=[{name:"keccak",padding:[1,256,65536,16777216],bits:d,createMethod:w},{name:"sha3",padding:[6,1536,393216,100663296],bits:d,createMethod:w},{name:"shake",padding:[31,7936,2031616,520093696],bits:h,createMethod:function(e,t){var r=y(e,t,"hex");return r.create=function(r){return new R(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},_(r,y,e,t)}},{name:"cshake",padding:c,bits:h,createMethod:function(e,t){var r=p[e],n=g(e,0,"hex");return n.create=function(n,o,i){return o||i?new R(e,t,n).bytepad([o,i],r):I["shake"+e].create(n)},n.update=function(e,t,r,o){return n.create(t,r,o).update(e)},_(n,g,e,t)}},{name:"kmac",padding:c,bits:h,createMethod:function(e,t){var r=p[e],n=b(e,0,"hex");return n.create=function(n,o,i){return new C(e,t,o).bytepad(["KMAC",i],r).bytepad([n],r)},n.update=function(e,t,r,o){return n.create(e,r,o).update(t)},_(n,b,e,t)}}],I={},k=[],T=0;T<v.length;++T)for(var A=v[T],S=A.bits,E=0;E<S.length;++E){var P=A.name+"_"+S[E];if(k.push(P),I[P]=A.createMethod(S[E],A.padding),"sha3"!==A.name){var O=A.name+S[E];k.push(O),I[O]=I[P]}}function R(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var n=0;n<50;++n)this.s[n]=0}function C(e,t,r){R.call(this,e,t,r)}R.prototype.update=function(e){if(this.finalized)throw new Error("finalize already called");var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}for(var o,i,a=this.blocks,c=this.byteCount,l=e.length,d=this.blockCount,h=0,f=this.s;h<l;){if(this.reset)for(this.reset=!1,a[0]=this.block,o=1;o<d+1;++o)a[o]=0;if(r)for(o=this.start;h<l&&o<c;++h)a[o>>2]|=e[h]<<u[3&o++];else for(o=this.start;h<l&&o<c;++h)(i=e.charCodeAt(h))<128?a[o>>2]|=i<<u[3&o++]:i<2048?(a[o>>2]|=(192|i>>6)<<u[3&o++],a[o>>2]|=(128|63&i)<<u[3&o++]):i<55296||i>=57344?(a[o>>2]|=(224|i>>12)<<u[3&o++],a[o>>2]|=(128|i>>6&63)<<u[3&o++],a[o>>2]|=(128|63&i)<<u[3&o++]):(i=65536+((1023&i)<<10|1023&e.charCodeAt(++h)),a[o>>2]|=(240|i>>18)<<u[3&o++],a[o>>2]|=(128|i>>12&63)<<u[3&o++],a[o>>2]|=(128|i>>6&63)<<u[3&o++],a[o>>2]|=(128|63&i)<<u[3&o++]);if(this.lastByteIndex=o,o>=c){for(this.start=o-c,this.block=a[d],o=0;o<d;++o)f[o]^=a[o];$(f),this.reset=!0}else this.start=o}return this},R.prototype.encode=function(e,t){var r=255&e,n=1,o=[r];for(r=255&(e>>=8);r>0;)o.unshift(r),r=255&(e>>=8),++n;return t?o.push(n):o.unshift(n),this.update(o),o.length},R.prototype.encodeString=function(e){var r,n=typeof e;if("string"!==n){if("object"!==n)throw new Error(t);if(null===e)throw new Error(t);if(s&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||s&&ArrayBuffer.isView(e)))throw new Error(t);r=!0}var o=0,i=e.length;if(r)o=i;else for(var a=0;a<e.length;++a){var c=e.charCodeAt(a);c<128?o+=1:c<2048?o+=2:c<55296||c>=57344?o+=3:(c=65536+((1023&c)<<10|1023&e.charCodeAt(++a)),o+=4)}return o+=this.encode(8*o),this.update(e),o},R.prototype.bytepad=function(e,t){for(var r=this.encode(t),n=0;n<e.length;++n)r+=this.encodeString(e[n]);var o=t-r%t,i=[];return i.length=o,this.update(i),this},R.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,n=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)n[t]^=e[t];$(n)}},R.prototype.toString=R.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,n=this.outputBlocks,o=this.extraBytes,i=0,s=0,c="";s<n;){for(i=0;i<t&&s<n;++i,++s)e=r[i],c+=a[e>>4&15]+a[15&e]+a[e>>12&15]+a[e>>8&15]+a[e>>20&15]+a[e>>16&15]+a[e>>28&15]+a[e>>24&15];s%t===0&&($(r),i=0)}return o&&(e=r[i],c+=a[e>>4&15]+a[15&e],o>1&&(c+=a[e>>12&15]+a[e>>8&15]),o>2&&(c+=a[e>>20&15]+a[e>>16&15])),c},R.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,n=this.outputBlocks,o=this.extraBytes,i=0,s=0,a=this.outputBits>>3;e=o?new ArrayBuffer(n+1<<2):new ArrayBuffer(a);for(var c=new Uint32Array(e);s<n;){for(i=0;i<t&&s<n;++i,++s)c[s]=r[i];s%t===0&&$(r)}return o&&(c[i]=r[i],e=e.slice(0,a)),e},R.prototype.buffer=R.prototype.arrayBuffer,R.prototype.digest=R.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,n=this.s,o=this.outputBlocks,i=this.extraBytes,s=0,a=0,c=[];a<o;){for(s=0;s<r&&a<o;++s,++a)e=a<<2,t=n[s],c[e]=255&t,c[e+1]=t>>8&255,c[e+2]=t>>16&255,c[e+3]=t>>24&255;a%r===0&&$(n)}return i&&(e=a<<2,t=n[s],c[e]=255&t,i>1&&(c[e+1]=t>>8&255),i>2&&(c[e+2]=t>>16&255)),c},C.prototype=new R,C.prototype.finalize=function(){return this.encode(this.outputBits,!0),R.prototype.finalize.call(this)};var $=function(e){var t,r,n,o,i,s,a,c,u,d,h,f,p,m,y,g,b,_,w,v,I,k,T,A,S,E,P,O,R,C,$,N,M,x,B,D,L,F,j,U,q,K,H,G,z,V,Z,W,J,Y,Q,X,ee,te,re,ne,oe,ie,se,ae,ce,ue,le;for(n=0;n<48;n+=2)o=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],d=e[6]^e[16]^e[26]^e[36]^e[46],h=e[7]^e[17]^e[27]^e[37]^e[47],t=(f=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(p=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=o^(c<<1|u>>>31),r=i^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(d<<1|h>>>31),r=a^(h<<1|d>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(f<<1|p>>>31),r=u^(p<<1|f>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=d^(o<<1|i>>>31),r=h^(i<<1|o>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,m=e[0],y=e[1],V=e[11]<<4|e[10]>>>28,Z=e[10]<<4|e[11]>>>28,O=e[20]<<3|e[21]>>>29,R=e[21]<<3|e[20]>>>29,ae=e[31]<<9|e[30]>>>23,ce=e[30]<<9|e[31]>>>23,K=e[40]<<18|e[41]>>>14,H=e[41]<<18|e[40]>>>14,x=e[2]<<1|e[3]>>>31,B=e[3]<<1|e[2]>>>31,g=e[13]<<12|e[12]>>>20,b=e[12]<<12|e[13]>>>20,W=e[22]<<10|e[23]>>>22,J=e[23]<<10|e[22]>>>22,C=e[33]<<13|e[32]>>>19,$=e[32]<<13|e[33]>>>19,ue=e[42]<<2|e[43]>>>30,le=e[43]<<2|e[42]>>>30,te=e[5]<<30|e[4]>>>2,re=e[4]<<30|e[5]>>>2,D=e[14]<<6|e[15]>>>26,L=e[15]<<6|e[14]>>>26,_=e[25]<<11|e[24]>>>21,w=e[24]<<11|e[25]>>>21,Y=e[34]<<15|e[35]>>>17,Q=e[35]<<15|e[34]>>>17,N=e[45]<<29|e[44]>>>3,M=e[44]<<29|e[45]>>>3,A=e[6]<<28|e[7]>>>4,S=e[7]<<28|e[6]>>>4,ne=e[17]<<23|e[16]>>>9,oe=e[16]<<23|e[17]>>>9,F=e[26]<<25|e[27]>>>7,j=e[27]<<25|e[26]>>>7,v=e[36]<<21|e[37]>>>11,I=e[37]<<21|e[36]>>>11,X=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,G=e[8]<<27|e[9]>>>5,z=e[9]<<27|e[8]>>>5,E=e[18]<<20|e[19]>>>12,P=e[19]<<20|e[18]>>>12,ie=e[29]<<7|e[28]>>>25,se=e[28]<<7|e[29]>>>25,U=e[38]<<8|e[39]>>>24,q=e[39]<<8|e[38]>>>24,k=e[48]<<14|e[49]>>>18,T=e[49]<<14|e[48]>>>18,e[0]=m^~g&_,e[1]=y^~b&w,e[10]=A^~E&O,e[11]=S^~P&R,e[20]=x^~D&F,e[21]=B^~L&j,e[30]=G^~V&W,e[31]=z^~Z&J,e[40]=te^~ne&ie,e[41]=re^~oe&se,e[2]=g^~_&v,e[3]=b^~w&I,e[12]=E^~O&C,e[13]=P^~R&$,e[22]=D^~F&U,e[23]=L^~j&q,e[32]=V^~W&Y,e[33]=Z^~J&Q,e[42]=ne^~ie&ae,e[43]=oe^~se&ce,e[4]=_^~v&k,e[5]=w^~I&T,e[14]=O^~C&N,e[15]=R^~$&M,e[24]=F^~U&K,e[25]=j^~q&H,e[34]=W^~Y&X,e[35]=J^~Q&ee,e[44]=ie^~ae&ue,e[45]=se^~ce&le,e[6]=v^~k&m,e[7]=I^~T&y,e[16]=C^~N&A,e[17]=$^~M&S,e[26]=U^~K&x,e[27]=q^~H&B,e[36]=Y^~X&G,e[37]=Q^~ee&z,e[46]=ae^~ue&te,e[47]=ce^~le&re,e[8]=k^~m&g,e[9]=T^~y&b,e[18]=N^~A&E,e[19]=M^~S&P,e[28]=K^~x&D,e[29]=H^~B&L,e[38]=X^~G&V,e[39]=ee^~z&Z,e[48]=ue^~te&ne,e[49]=le^~re&oe,e[0]^=l[n],e[1]^=l[n+1]};if(i)e.exports=I;else for(T=0;T<k.length;++T)n[k[T]]=I[k[T]]}()),sha3$1.exports;var e}var sha3Exports=requireSha3();const sha3=getDefaultExportFromCjs(sha3Exports);function keccak256(e){return"0x"+sha3.keccak_256(arrayify(e))}const version$3="rlp/5.8.0",logger$4=new Logger$1(version$3);function arrayifyInteger(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function unarrayifyInteger(e,t,r){let n=0;for(let o=0;o<r;o++)n=256*n+e[t+o];return n}function _encode(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(_encode(e))}),t.length<=55)return t.unshift(192+t.length),t;const r=arrayifyInteger(t.length);return r.unshift(247+r.length),r.concat(t)}isBytesLike(e)||logger$4.throwArgumentError("RLP object must be BytesLike","object",e);const t=Array.prototype.slice.call(arrayify(e));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const r=arrayifyInteger(t.length);return r.unshift(183+r.length),r.concat(t)}function encode$3(e){return hexlify(_encode(e))}function _decodeChildren(e,t,r,n){const o=[];for(;r<t+1+n;){const i=_decode(e,r);o.push(i.result),(r+=i.consumed)>t+1+n&&logger$4.throwError("child data too short",Logger$1.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:o}}function _decode(e,t){if(0===e.length&&logger$4.throwError("data too short",Logger$1.errors.BUFFER_OVERRUN,{}),e[t]>=248){const r=e[t]-247;t+1+r>e.length&&logger$4.throwError("data short segment too short",Logger$1.errors.BUFFER_OVERRUN,{});const n=unarrayifyInteger(e,t+1,r);return t+1+r+n>e.length&&logger$4.throwError("data long segment too short",Logger$1.errors.BUFFER_OVERRUN,{}),_decodeChildren(e,t,t+1+r,r+n)}if(e[t]>=192){const r=e[t]-192;return t+1+r>e.length&&logger$4.throwError("data array too short",Logger$1.errors.BUFFER_OVERRUN,{}),_decodeChildren(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;t+1+r>e.length&&logger$4.throwError("data array too short",Logger$1.errors.BUFFER_OVERRUN,{});const n=unarrayifyInteger(e,t+1,r);t+1+r+n>e.length&&logger$4.throwError("data array too short",Logger$1.errors.BUFFER_OVERRUN,{});return{consumed:1+r+n,result:hexlify(e.slice(t+1+r,t+1+r+n))}}if(e[t]>=128){const r=e[t]-128;t+1+r>e.length&&logger$4.throwError("data too short",Logger$1.errors.BUFFER_OVERRUN,{});return{consumed:1+r,result:hexlify(e.slice(t+1,t+1+r))}}return{consumed:1,result:hexlify(e[t])}}function decode(e){const t=arrayify(e),r=_decode(t,0);return r.consumed!==t.length&&logger$4.throwArgumentError("invalid rlp data","data",e),r.result}const version$2="address/5.8.0",logger$3=new Logger$1(version$2);function getChecksumAddress(e){isHexString(e,20)||logger$3.throwArgumentError("invalid address","address",e);const t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let o=0;o<40;o++)r[o]=t[o].charCodeAt(0);const n=arrayify(keccak256(r));for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(15&n[o>>1])>=8&&(t[o+1]=t[o+1].toUpperCase());return"0x"+t.join("")}const MAX_SAFE_INTEGER=9007199254740991;function log10(e){return Math.log10?Math.log10(e):Math.log(e)/Math.LN10}const ibanLookup={};for(let O=0;O<10;O++)ibanLookup[String(O)]=String(O);for(let O=0;O<26;O++)ibanLookup[String.fromCharCode(65+O)]=String(10+O);const safeDigits=Math.floor(log10(MAX_SAFE_INTEGER));function ibanChecksum(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>ibanLookup[e]).join("");for(;t.length>=safeDigits;){let e=t.substring(0,safeDigits);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}function getAddress(e){let t=null;if("string"!=typeof e&&logger$3.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),t=getChecksumAddress(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==e&&logger$3.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==ibanChecksum(e)&&logger$3.throwArgumentError("bad icap checksum","address",e),t=_base36To16(e.substring(4));t.length<40;)t="0"+t;t=getChecksumAddress("0x"+t)}else logger$3.throwArgumentError("invalid address","address",e);return t}class AddressCoder extends Coder{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=getAddress(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}decode(e){return getAddress(hexZeroPad(e.readValue().toHexString(),20))}}class AnonymousCoder extends Coder{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}const logger$2=new Logger$1(version$4);function pack(e,t,r){let n=null;if(Array.isArray(r))n=r;else if(r&&"object"==typeof r){let e={};n=t.map(t=>{const n=t.localName;return n||logger$2.throwError("cannot encode object for signature with missing names",Logger$1.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]&&logger$2.throwError("cannot encode object for signature with duplicate names",Logger$1.errors.INVALID_ARGUMENT,{argument:"values",coder:t,value:r}),e[n]=!0,r[n]})}else logger$2.throwArgumentError("invalid tuple value","tuple",r);t.length!==n.length&&logger$2.throwArgumentError("types/value length mismatch","tuple",r);let o=new Writer$1(e.wordSize),i=new Writer$1(e.wordSize),s=[];t.forEach((e,t)=>{let r=n[t];if(e.dynamic){let t=i.length;e.encode(i,r);let n=o.writeUpdatableValue();s.push(e=>{n(e+t)})}else e.encode(o,r)}),s.forEach(e=>{e(o.length)});let a=e.appendWriter(o);return a+=e.appendWriter(i),a}function unpack(e,t){let r=[],n=e.subReader(0);t.forEach(t=>{let o=null;if(t.dynamic){let r=e.readValue(),s=n.subReader(r.toNumber());try{o=t.decode(s)}catch(i){if(i.code===Logger$1.errors.BUFFER_OVERRUN)throw i;o=i,o.baseType=t.name,o.name=t.localName,o.type=t.type}}else try{o=t.decode(e)}catch(i){if(i.code===Logger$1.errors.BUFFER_OVERRUN)throw i;o=i,o.baseType=t.name,o.name=t.localName,o.type=t.type}null!=o&&r.push(o)});const o=t.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});t.forEach((e,t)=>{let n=e.localName;if(!n||1!==o[n])return;if("length"===n&&(n="_length"),null!=r[n])return;const i=r[t];i instanceof Error?Object.defineProperty(r,n,{enumerable:!0,get:()=>{throw i}}):r[n]=i});for(let i=0;i<r.length;i++){const e=r[i];e instanceof Error&&Object.defineProperty(r,i,{enumerable:!0,get:()=>{throw e}})}return Object.freeze(r)}class ArrayCoder extends Coder{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),logger$2.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let o=0;o<t.length;o++)n.push(this.coder);return pack(e,n,t)}decode(e){let t=this.length;-1===t&&(t=e.readValue().toNumber(),32*t>e._data.length&&logger$2.throwError("insufficient data length",Logger$1.errors.BUFFER_OVERRUN,{length:e._data.length,count:t}));let r=[];for(let n=0;n<t;n++)r.push(new AnonymousCoder(this.coder));return e.coerce(this.name,unpack(e,r))}}class BooleanCoder extends Coder{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class DynamicBytesCoder extends Coder{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=arrayify(t);let r=e.writeValue(t.length);return r+=e.writeBytes(t),r}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class BytesCoder extends DynamicBytesCoder{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,hexlify(super.decode(e)))}}class FixedBytesCoder extends Coder{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=arrayify(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,hexlify(e.readBytes(this.size)))}}class NullCoder extends Coder{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const NegativeOne=BigNumber$1.from(-1),Zero=BigNumber$1.from(0),One=BigNumber$1.from(1),MaxUint256=BigNumber$1.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class NumberCoder extends Coder{constructor(e,t,r){const n=(t?"int":"uint")+8*e;super(n,n,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=BigNumber$1.from(t),n=MaxUint256.mask(8*e.wordSize);if(this.signed){let e=n.mask(8*this.size-1);(r.gt(e)||r.lt(e.add(One).mul(NegativeOne)))&&this._throwError("value out-of-bounds",t)}else(r.lt(Zero)||r.gt(n.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}const version$1="strings/5.8.0",logger$1=new Logger$1(version$1);var UnicodeNormalizationForm,UnicodeNormalizationForm2,Utf8ErrorReason,Utf8ErrorReason2;function errorFunc(e,t,r,n,o){return logger$1.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)}function ignoreFunc(e,t,r,n,o){if(e===Utf8ErrorReason.BAD_PREFIX||e===Utf8ErrorReason.UNEXPECTED_CONTINUE){let e=0;for(let n=t+1;n<r.length&&r[n]>>6==2;n++)e++;return e}return e===Utf8ErrorReason.OVERRUN?r.length-t-1:0}function replaceFunc(e,t,r,n,o){return e===Utf8ErrorReason.OVERLONG?(n.push(o),0):(n.push(65533),ignoreFunc(e,t,r))}UnicodeNormalizationForm2=UnicodeNormalizationForm||(UnicodeNormalizationForm={}),UnicodeNormalizationForm2.current="",UnicodeNormalizationForm2.NFC="NFC",UnicodeNormalizationForm2.NFD="NFD",UnicodeNormalizationForm2.NFKC="NFKC",UnicodeNormalizationForm2.NFKD="NFKD",Utf8ErrorReason2=Utf8ErrorReason||(Utf8ErrorReason={}),Utf8ErrorReason2.UNEXPECTED_CONTINUE="unexpected continuation byte",Utf8ErrorReason2.BAD_PREFIX="bad codepoint prefix",Utf8ErrorReason2.OVERRUN="string overrun",Utf8ErrorReason2.MISSING_CONTINUE="missing continuation byte",Utf8ErrorReason2.OUT_OF_RANGE="out of UTF-8 range",Utf8ErrorReason2.UTF16_SURROGATE="UTF-16 surrogate",Utf8ErrorReason2.OVERLONG="overlong representation";const Utf8ErrorFuncs=Object.freeze({error:errorFunc,ignore:ignoreFunc,replace:replaceFunc});function getUtf8CodePoints(e,t){null==t&&(t=Utf8ErrorFuncs.error),e=arrayify(e);const r=[];let n=0;for(;n<e.length;){const o=e[n++];if(!(o>>7)){r.push(o);continue}let i=null,s=null;if(192==(224&o))i=1,s=127;else if(224==(240&o))i=2,s=2047;else{if(240!=(248&o)){n+=t(128==(192&o)?Utf8ErrorReason.UNEXPECTED_CONTINUE:Utf8ErrorReason.BAD_PREFIX,n-1,e,r);continue}i=3,s=65535}if(n-1+i>=e.length){n+=t(Utf8ErrorReason.OVERRUN,n-1,e,r);continue}let a=o&(1<<8-i-1)-1;for(let c=0;c<i;c++){let o=e[n];if(128!=(192&o)){n+=t(Utf8ErrorReason.MISSING_CONTINUE,n,e,r),a=null;break}a=a<<6|63&o,n++}null!==a&&(a>1114111?n+=t(Utf8ErrorReason.OUT_OF_RANGE,n-1-i,e,r,a):a>=55296&&a<=57343?n+=t(Utf8ErrorReason.UTF16_SURROGATE,n-1-i,e,r,a):a<=s?n+=t(Utf8ErrorReason.OVERLONG,n-1-i,e,r,a):r.push(a))}return r}function toUtf8Bytes(e,t=UnicodeNormalizationForm.current){t!=UnicodeNormalizationForm.current&&(logger$1.checkNormalize(),e=e.normalize(t));let r=[];for(let n=0;n<e.length;n++){const t=e.charCodeAt(n);if(t<128)r.push(t);else if(t<2048)r.push(t>>6|192),r.push(63&t|128);else if(55296==(64512&t)){n++;const o=e.charCodeAt(n);if(n>=e.length||56320!=(64512&o))throw new Error("invalid utf-8 string");const i=65536+((1023&t)<<10)+(1023&o);r.push(i>>18|240),r.push(i>>12&63|128),r.push(i>>6&63|128),r.push(63&i|128)}else r.push(t>>12|224),r.push(t>>6&63|128),r.push(63&t|128)}return arrayify(r)}function _toUtf8String(e){return e.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))).join("")}function toUtf8String(e,t){return _toUtf8String(getUtf8CodePoints(e,t))}class StringCoder extends DynamicBytesCoder{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,toUtf8Bytes(t))}decode(e){return toUtf8String(super.decode(e))}}class TupleCoder extends Coder{constructor(e,t){let r=!1;const n=[];e.forEach(e=>{e.dynamic&&(r=!0),n.push(e.type)});super("tuple","tuple("+n.join(",")+")",t,r),this.coders=e}defaultValue(){const e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});const t=this.coders.reduce((e,t)=>{const r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,n)=>{let o=r.localName;o&&1===t[o]&&("length"===o&&(o="_length"),null==e[o]&&(e[o]=e[n]))}),Object.freeze(e)}encode(e,t){return pack(e,this.coders,t)}decode(e){return e.coerce(this.name,unpack(e,this.coders))}}const logger=new Logger$1(version$4),paramTypeBytes=new RegExp(/^bytes([0-9]*)$/),paramTypeNumber=new RegExp(/^(u?int)([0-9]*)$/);class AbiCoder{constructor(e){defineReadOnly(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new AddressCoder(e.name);case"bool":return new BooleanCoder(e.name);case"string":return new StringCoder(e.name);case"bytes":return new BytesCoder(e.name);case"array":return new ArrayCoder(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new TupleCoder((e.components||[]).map(e=>this._getCoder(e)),e.name);case"":return new NullCoder(e.name)}let t=e.type.match(paramTypeNumber);if(t){let r=parseInt(t[2]||"256");return(0===r||r>256||r%8!=0)&&logger.throwArgumentError("invalid "+t[1]+" bit length","param",e),new NumberCoder(r/8,"int"===t[1],e.name)}if(t=e.type.match(paramTypeBytes),t){let r=parseInt(t[1]);return(0===r||r>32)&&logger.throwArgumentError("invalid bytes length","param",e),new FixedBytesCoder(r,e.name)}return logger.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new Reader(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new Writer$1(this._getWordSize())}getDefaultValue(e){const t=e.map(e=>this._getCoder(ParamType.from(e)));return new TupleCoder(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&logger.throwError("types/values length mismatch",Logger$1.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});const r=e.map(e=>this._getCoder(ParamType.from(e))),n=new TupleCoder(r,"_"),o=this._getWriter();return n.encode(o,t),o.data}decode(e,t,r){const n=e.map(e=>this._getCoder(ParamType.from(e)));return new TupleCoder(n,"_").decode(this._getReader(arrayify(t),r))}}const defaultAbiCoder=new AbiCoder,{proto:r$k}=e$s;let c$7=class e{constructor(e){this.contractId=e.contractId,this.nonce=e.nonce,Object.freeze(this)}static _fromProtobuf(t){return new e({contractId:v._fromProtobuf(t.contractId),nonce:null!=t.nonce?t.nonce:Long.ZERO})}_toProtobuf(){return{contractId:this.contractId._toProtobuf(),nonce:this.nonce}}static fromBytes(t){return e._fromProtobuf(r$k.ContractNonceInfo.decode(t))}toBytes(){return r$k.ContractNonceInfo.encode(this._toProtobuf()).finish()}toJSON(){return{contractId:this.contractId.toString(),nonce:this.nonce.toNumber()}}toString(){return JSON.stringify(this.toJSON())}equals(e){return this.contractId.equals(e.contractId)&&this.nonce.eq(e.nonce)}},l$c=class e{constructor(e){this._createResult=e._createResult,this.contractId=e.contractId,this.bytes=e.bytes,this.errorMessage=e.errorMessage,this.bloom=e.bloom,this.gasUsed=e.gasUsed,this.logs=e.logs,this.createdContractIds=e.createdContractIds,this.evmAddress=e.evmAddress,this.stateChanges=e.stateChanges,this.gas=e.gas,this.amount=e.amount,this.functionParameters=e.functionParameters,this.senderAccountId=e.senderAccountId,this.contractNonces=e.contractNonces,this.signerNonce=e.signerNonce}static _fromProtobuf(t,r){const n=t.contractID,o=t.gasUsed,i=t.gas?t.gas:-1,s=t.amount?t.amount:-1;return new e({_createResult:r,bytes:t.contractCallResult,contractId:null!=n?v._fromProtobuf(n):null,errorMessage:null!=t.errorMessage?t.errorMessage:null,bloom:t.bloom,gasUsed:o instanceof Long?o:Long.fromValue(o),logs:(null!=t.logInfo?t.logInfo:[]).map(e=>o$j._fromProtobuf(e)),createdContractIds:(null!=t.createdContractIDs?t.createdContractIDs:[]).map(e=>v._fromProtobuf(e)),evmAddress:null!=t.evmAddress&&Object.hasOwn(t.evmAddress,"value")&&null!=t.evmAddress.value?t.evmAddress.value:null,stateChanges:[],gas:i instanceof Long?i:Long.fromValue(i),amount:s instanceof Long?s:Long.fromValue(s),functionParameters:t.functionParameters,senderAccountId:null!=t.senderId?f$2._fromProtobuf(t.senderId):null,contractNonces:(null!=t.contractNonces?t.contractNonces:[]).map(e=>c$7._fromProtobuf(e)),signerNonce:null!=t.signerNonce&&Object.hasOwn(t.signerNonce,"value")&&t.signerNonce.value||null})}asBytes(){return this.bytes}getString(e){return e$k(this.getBytes(e))}getBytes(e){const t=this.getInt32(e),r=E$1(this.bytes).getInt32(t+28);return this.bytes.subarray(t+32,t+32+r)}getBytes32(e){return this.bytes.subarray(32*(null!=e?e:0),32*(null!=e?e:0)+32)}getBool(e){return 0!==this.bytes[32*(null!=e?e:0)+31]}getInt8(e){const t=32*(null!=e?e:0)+31;return E$1(this.bytes).getInt8(t)}getUint8(e){return this.bytes[32*(null!=e?e:0)+31]}getInt16(e){const t=32*(null!=e?e:0)+28;return E$1(this.bytes).getInt32(t)}getUint16(e){const t=32*(null!=e?e:0)+28;return E$1(this.bytes).getUint32(t)}getInt24(e){const t=32*(null!=e?e:0)+28;return E$1(this.bytes).getInt32(t)}getUint24(e){const t=32*(null!=e?e:0)+28;return E$1(this.bytes).getUint32(t)}getInt32(e){const t=32*(null!=e?e:0)+28;return E$1(this.bytes).getInt32(t)}getUint32(e){const t=32*(null!=e?e:0)+28;return E$1(this.bytes).getUint32(t)}getInt40(e){const t=defaultAbiCoder.decode(["int40"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint40(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(27,32)),16)}getInt48(e){const t=defaultAbiCoder.decode(["int48"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint48(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(26,32)),16)}getInt56(e){const t=defaultAbiCoder.decode(["int56"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint56(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(25,32)),16)}getInt64(e){const t=defaultAbiCoder.decode(["int64"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint64(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(24,32)),16)}getInt72(e){const t=defaultAbiCoder.decode(["int72"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint72(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(23,32)),16)}getInt80(e){const t=defaultAbiCoder.decode(["int80"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint80(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(22,32)),16)}getInt88(e){const t=defaultAbiCoder.decode(["int88"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint88(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(21,32)),16)}getInt96(e){const t=defaultAbiCoder.decode(["int96"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint96(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(20,32)),16)}getInt104(e){const t=defaultAbiCoder.decode(["int104"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint104(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(19,32)),16)}getInt112(e){const t=defaultAbiCoder.decode(["int112"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint112(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(18,32)),16)}getInt120(e){const t=defaultAbiCoder.decode(["int120"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint120(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(17,32)),16)}getInt128(e){const t=defaultAbiCoder.decode(["int128"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint128(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(16,32)),16)}getInt136(e){const t=defaultAbiCoder.decode(["int136"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint136(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(15,32)),16)}getInt144(e){const t=defaultAbiCoder.decode(["int144"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint144(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(14,32)),16)}getInt152(e){const t=defaultAbiCoder.decode(["int152"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint152(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(13,32)),16)}getInt160(e){const t=defaultAbiCoder.decode(["int160"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint160(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(12,32)),16)}getInt168(e){const t=defaultAbiCoder.decode(["int168"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint168(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(11,32)),16)}getInt176(e){const t=defaultAbiCoder.decode(["int176"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint176(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(10,32)),16)}getInt184(e){const t=defaultAbiCoder.decode(["int184"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint184(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(9,32)),16)}getInt192(e){const t=defaultAbiCoder.decode(["int192"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint192(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(8,32)),16)}getInt200(e){const t=defaultAbiCoder.decode(["int200"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint200(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(7,32)),16)}getInt208(e){const t=defaultAbiCoder.decode(["int208"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint208(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(6,32)),16)}getInt216(e){const t=defaultAbiCoder.decode(["int216"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint216(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(5,32)),16)}getInt224(e){const t=defaultAbiCoder.decode(["int224"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint224(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(4,32)),16)}getInt232(e){const t=defaultAbiCoder.decode(["int232"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint232(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(3,32)),16)}getInt240(e){const t=defaultAbiCoder.decode(["int240"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint240(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(2,32)),16)}getInt248(e){const t=defaultAbiCoder.decode(["int248"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint248(e){return new BigNumber$2(n$n(this._getBytes32(e).subarray(1,32)),16)}getInt256(e){const t=defaultAbiCoder.decode(["int256"],this._getBytes32(null!=e?e:0));return new BigNumber$2(t.toString())}getUint256(e){return new BigNumber$2(n$n(this._getBytes32(e)),16)}getAddress(e){return n$n(this.bytes.subarray(32*(null!=e?e:0)+12,32*(null!=e?e:0)+32))}getResult(e){return defaultAbiCoder.decode(e,this.bytes)}_getBytes32(e){return this.bytes.subarray(32*(null!=e?e:0),32*(null!=e?e:0)+32)}_toProtobuf(){return{contractID:null!=this.contractId?this.contractId._toProtobuf():null,contractCallResult:this.bytes,errorMessage:this.errorMessage,bloom:this.bloom,gasUsed:this.gasUsed,logInfo:this.logs.map(e=>e._toProtobuf()),createdContractIDs:this.createdContractIds.map(e=>e._toProtobuf()),evmAddress:null!=this.evmAddress?{value:this.evmAddress}:null,gas:this.gas,amount:this.amount,functionParameters:this.functionParameters,senderId:null!=this.senderAccountId?this.senderAccountId._toProtobuf():null,contractNonces:this.contractNonces.map(e=>e._toProtobuf()),signerNonce:null!=this.signerNonce?{value:this.signerNonce}:null}}},o$i=class extends t$q{constructor(){super(e=>f$2.fromString(e))}toJSON(){const e={};return this._map.forEach((t,r)=>{e[r]=t.toString()}),e}},n$f=class e extends t$q{constructor(){super(e=>u$b.fromString(e))}__set(e,t,r){const n=e.toString();let o=this._map.get(n);null==o&&(o=new o$i,this._map.set(n,o),this.__map.set(e,o)),o._set(t,r)}static _fromProtobuf(t){const r=new e;for(const e of t){const t=u$b._fromProtobuf(e.token);for(const n of null!=e.transfers?e.transfers:[]){const e=f$2._fromProtobuf(n.accountID);r.__set(t,e,n.amount)}}return r}_toProtobuf(){const e=[];for(const[t,r]of this){const n=[];for(const[e,t]of r)n.push({accountID:e._toProtobuf(),amount:t});e.push({token:t._toProtobuf(),transfers:n})}return e}},s$g=class e extends t$q{constructor(){super(e=>u$b.fromString(e))}__set(e,t){const r=e.toString();let n=this._map.get(r);null==n&&(n=[],this._map.set(r,n),this.__map.set(e,n)),n.push(t)}static _fromProtobuf(t){const r=new e;for(const e of t){const t=u$b._fromProtobuf(e.token);for(const n of null!=e.nftTransfers?e.nftTransfers:[]){const e=f$2._fromProtobuf(n.senderAccountID),o=f$2._fromProtobuf(n.receiverAccountID);r.__set(t,{sender:e,recipient:o,serial:Long.fromValue(n.serialNumber),isApproved:!1})}}return r}_toProtobuf(){const e=[];for(const[t,r]of this){const n=[];for(const e of r)n.push({senderAccountID:e.sender._toProtobuf(),receiverAccountID:e.recipient._toProtobuf(),serialNumber:e.serial});e.push({token:t._toProtobuf(),nftTransfers:n})}return e}toJSON(){const e={};return this._map.forEach((t,r)=>{e[r]=t.map(e=>({sender:e.sender.toString(),recipient:e.recipient.toString(),serial:e.serial,isApproved:e.isApproved}))}),e}},n$e=class e{constructor(e={}){this._feeCollectorAccountId=null,null!=e.feeCollectorAccountId&&this.setFeeCollectorAccountId(e.feeCollectorAccountId),this._tokenId=null,null!=e.tokenId&&this.setTokenId(e.tokenId),this._amount=null,null!=e.amount&&this.setAmount(e.amount),this._payerAccountIds=null,null!=e.payerAccountIds&&this.setPayerAccountIds(e.payerAccountIds)}get feeCollectorAccountId(){return this._feeCollectorAccountId}setFeeCollectorAccountId(e){return this._feeCollectorAccountId="string"==typeof e?f$2.fromString(e):e,this}get tokenId(){return this._tokenId}setTokenId(e){return this._tokenId="string"==typeof e?u$b.fromString(e):e,this}get amount(){return this._amount}setAmount(e){return this._amount="number"==typeof e?Long.fromNumber(e):e,this}get payerAccountIds(){return this._payerAccountIds}setPayerAccountIds(e){return this._payerAccountIds=e,this}static _fromProtobuf(t){return new e({feeCollectorAccountId:null!=t.feeCollectorAccountId?f$2._fromProtobuf(t.feeCollectorAccountId):void 0,tokenId:null!=t.tokenId?u$b._fromProtobuf(t.tokenId):void 0,amount:null!=t.amount?t.amount:void 0,payerAccountIds:null!=t.effectivePayerAccountId?t.effectivePayerAccountId.map(e=>f$2._fromProtobuf(e)):void 0})}_toProtobuf(){return{feeCollectorAccountId:null!=this.feeCollectorAccountId?this.feeCollectorAccountId._toProtobuf():null,tokenId:null!=this._tokenId?this._tokenId._toProtobuf():null,amount:this._amount,effectivePayerAccountId:null!=this._payerAccountIds?this._payerAccountIds.map(e=>e._toProtobuf()):null}}toJSON(){return{feeCollectorAccountId:this.feeCollectorAccountId?.toString()||null,tokenId:this._tokenId?.toString()||null,amount:this._amount?.toString()||null,payerAccountIds:this._payerAccountIds?.map(e=>e.toString())||[]}}},u$9=class e{constructor(e={}){this._accountId=null,null!=e.accountId&&this.setAccountId(e.accountId),this._tokenId=null,null!=e.tokenId&&this.setTokenId(e.tokenId),this._defaultMaxTransactionFee=new e$o(5)}get accountId(){return this._accountId}setAccountId(e){return this._accountId="string"==typeof e?f$2.fromString(e):e,this}get tokenId(){return this._tokenId}setTokenId(e){return this._tokenId="string"==typeof e?u$b.fromString(e):e,this}static _fromProtobuf(t){return new e({accountId:null!=t.accountId?f$2._fromProtobuf(t.accountId):void 0,tokenId:null!=t.tokenId?u$b._fromProtobuf(t.tokenId):void 0})}_toProtobuf(){return{accountId:null!=this._accountId?this._accountId._toProtobuf():void 0,tokenId:null!=this._tokenId?this._tokenId._toProtobuf():void 0}}toJSON(){return{accountId:this._accountId?.toString()||null,tokenId:this._tokenId?.toString()||null}}},n$d=class e{constructor(e){this.tokenId=e.tokenId instanceof u$b?e.tokenId:u$b.fromString(e.tokenId),this.accountId=e.accountId instanceof f$2?e.accountId:f$2.fromString(e.accountId),this.expectedDecimals=e.expectedDecimals,this.amount=Long.fromValue(e.amount),this.isApproved=e.isApproved}static _fromProtobuf(t){const r=[];for(const n of t){const t=u$b._fromProtobuf(n.token),o=null!=n.expectedDecimals&&Object.hasOwn(n.expectedDecimals,"value")?n.expectedDecimals.value:null;for(const i of null!=n.transfers?n.transfers:[])r.push(new e({tokenId:t,accountId:f$2._fromProtobuf(i.accountID),expectedDecimals:o||null,amount:null!=i.amount?i.amount:Long.ZERO,isApproved:1==i.isApproval}))}return r}_toProtobuf(){return{accountID:this.accountId._toProtobuf(),amount:this.amount,isApproval:this.isApproved}}toJSON(){return{tokenId:this.tokenId.toString(),accountId:this.accountId.toString(),expectedDecimals:this.expectedDecimals,amount:this.amount.toString(),isApproved:this.isApproved}}toString(){return JSON.stringify(this.toJSON())}},e$j=class e{constructor(e,t){this.tokenId=e,this.serial="number"==typeof t?Long.fromNumber(t):t,Object.freeze(this)}static fromString(t){const r=t.split("/").length>1?t.split("/"):t.split("@");for(const e of r)if(""===e)throw new Error("invalid format for NftId: use [token]/[serial] or [token]@[serial]");const n=u$b.fromString(r[0]),o=Long.fromString(r[1]);return new e(n,o)}static _fromProtobuf(t){return new e(u$b._fromProtobuf(t.token_ID),null!=t.serialNumber?t.serialNumber:Long.ZERO)}static fromBytes(t){return e._fromProtobuf(libExports.proto.NftID.decode(t))}_toProtobuf(){return{token_ID:this.tokenId._toProtobuf(),serialNumber:Long.fromValue(void 0!==this.serial?this.serial:0)}}toString(){return`${this.tokenId.toString()}/${this.serial.toString()}`}toBytes(){return libExports.proto.NftID.encode(this._toProtobuf()).finish()}},t$h=class e{constructor(e={}){this._senderId=null,this._receiverId=null,this._tokenId=null,this._nftId=null,e.receiverId&&(this._receiverId=e.receiverId),e.senderId&&(this._senderId=e.senderId),e.tokenId?this._tokenId=new u$b(e.tokenId):e.nftId&&(this._nftId=new e$j(e.nftId?.tokenId,e.nftId?.serial))}static fromBytes(t){if(null==t.senderId)throw new Error("senderId is required");if(null==t.receiverId)throw new Error("receiverId is required");if(null==t.fungibleTokenType&&null==t.nonFungibleToken)throw new Error("Either fungibleTokenType or nonFungibleToken is required");return new e({senderId:f$2._fromProtobuf(t.senderId),receiverId:f$2._fromProtobuf(t.receiverId),nftId:null!=t.nonFungibleToken?e$j._fromProtobuf(t.nonFungibleToken):null,tokenId:null!=t.fungibleTokenType?u$b._fromProtobuf(t.fungibleTokenType):null})}setSenderid(e){return this._senderId=e,this}setReceiverId(e){return this._receiverId=e,this}setTokenId(e){return this._nftId=null,this._tokenId=e,this}setNftId(e){return this._tokenId=null,this._nftId=e,this}get senderId(){return this._senderId}get receiverId(){return this._receiverId}get tokenId(){return this._tokenId}get nftId(){return this._nftId}toBytes(){return{senderId:this.senderId?._toProtobuf(),receiverId:this._receiverId?._toProtobuf(),fungibleTokenType:this._tokenId?._toProtobuf(),nonFungibleToken:this._nftId?._toProtobuf()}}},d$9=class e{constructor(e){this.airdropId=e.airdropId,this.amount=e.amount}toBytes(){return{pendingAirdropId:this.airdropId.toBytes(),pendingAirdropValue:{amount:this.amount}}}static fromBytes(t){if(null==t.pendingAirdropId)throw new Error("pendingAirdropId is required");const r=t$h.fromBytes(t.pendingAirdropId),n=t.pendingAirdropValue?.amount;return new e({airdropId:r,amount:n||Long.ZERO})}},b$1=class e{constructor(e){this.receipt=e.receipt,this.transactionHash=e.transactionHash,this.consensusTimestamp=e.consensusTimestamp,this.transactionId=e.transactionId,this.transactionMemo=e.transactionMemo,this.transactionFee=e.transactionFee,this.transfers=e.transfers,this.contractFunctionResult=null!=e.contractFunctionResult?e.contractFunctionResult:null,this.tokenTransfers=e.tokenTransfers,this.tokenTransfersList=e.tokenTransfersList,this.scheduleRef=e.scheduleRef,this.assessedCustomFees=e.assessedCustomFees,this.nftTransfers=e.nftTransfers,this.automaticTokenAssociations=e.automaticTokenAssociations,this.parentConsensusTimestamp=e.parentConsensusTimestamp,this.aliasKey=e.aliasKey,this.duplicates=e.duplicates,this.children=e.children,this.hbarAllowanceAdjustments=e.hbarAllowanceAdjustments,this.tokenAllowanceAdjustments=e.tokenAllowanceAdjustments,this.nftAllowanceAdjustments=e.nftAllowanceAdjustments,this.ethereumHash=e.ethereumHash,this.paidStakingRewards=e.paidStakingRewards,this.prngBytes=e.prngBytes,this.prngNumber=e.prngNumber,this.evmAddress=e.evmAddress,this.newPendingAirdrops=e.newPendingAirdrops,Object.freeze(this)}_toProtobuf(){const e=this.tokenTransfers._toProtobuf(),t=this.nftTransfers._toProtobuf(),r=[];for(const n of e)for(const e of t)null!=n.token&&null!=e.token&&n.token.shardNum===e.token.shardNum&&n.token.realmNum===e.token.realmNum&&n.token.tokenNum===e.token.tokenNum?r.push({token:n.token,transfers:n.transfers,nftTransfers:n.nftTransfers}):(r.push(n),r.push(e));return{duplicateTransactionRecords:this.duplicates.map(e=>e._toProtobuf().transactionRecord),childTransactionRecords:this.children.map(e=>e._toProtobuf().transactionRecord),transactionRecord:{receipt:this.receipt._toProtobuf().receipt,transactionHash:null!=this.transactionHash?this.transactionHash:null,consensusTimestamp:null!=this.consensusTimestamp?this.consensusTimestamp._toProtobuf():null,transactionID:null!=this.transactionId?this.transactionId._toProtobuf():null,memo:null!=this.transactionMemo?this.transactionMemo:null,transactionFee:null!=this.transactionFee?this.transactionFee.toTinybars():null,contractCallResult:null==this.contractFunctionResult||this.contractFunctionResult._createResult?null:this.contractFunctionResult._toProtobuf(),contractCreateResult:null!=this.contractFunctionResult&&this.contractFunctionResult._createResult?this.contractFunctionResult._toProtobuf():null,transferList:null!=this.transfers?{accountAmounts:this.transfers.map(e=>e._toProtobuf())}:null,tokenTransferLists:r,scheduleRef:null!=this.scheduleRef?this.scheduleRef._toProtobuf():null,assessedCustomFees:this.assessedCustomFees.map(e=>e._toProtobuf()),automaticTokenAssociations:this.automaticTokenAssociations.map(e=>e._toProtobuf()),parentConsensusTimestamp:null!=this.parentConsensusTimestamp?this.parentConsensusTimestamp._toProtobuf():null,alias:null!=this.aliasKey?libExports.proto.Key.encode(this.aliasKey._toProtobufKey()).finish():null,ethereumHash:this.ethereumHash,paidStakingRewards:this.paidStakingRewards.map(e=>e._toProtobuf()),prngBytes:this.prngBytes,prngNumber:null!=this.prngNumber?this.prngNumber:null,evmAddress:null!=this.evmAddress?this.evmAddress.toBytes():null,newPendingAirdrops:this.newPendingAirdrops.map(e=>e.toBytes())}}}static _fromProtobuf(t){const r=t.transactionRecord;let n=null!=r.alias&&r.alias.length>0?t$r._fromProtobufKey(libExports.proto.Key.decode(r.alias)):null;n instanceof i$f||(n=null);const o=null!=t.childTransactionRecords?t.childTransactionRecords.map(t=>e._fromProtobuf({transactionRecord:t})):[],i=null!=t.duplicateTransactionRecords?t.duplicateTransactionRecords.map(t=>e._fromProtobuf({transactionRecord:t})):[],s=null!=r.contractCallResult?l$c._fromProtobuf(r.contractCallResult,!1):null!=r.contractCreateResult?l$c._fromProtobuf(r.contractCreateResult,!0):void 0,a=null!=r.newPendingAirdrops?r.newPendingAirdrops.map(e=>d$9.fromBytes(e)):[];return new e({receipt:d$a._fromProtobuf({receipt:r.receipt}),transactionHash:null!=r.transactionHash?r.transactionHash:new Uint8Array,consensusTimestamp:s$j._fromProtobuf(r.consensusTimestamp),transactionId:i$c._fromProtobuf(r.transactionID),transactionMemo:null!=r.memo?r.memo:"",transactionFee:e$o.fromTinybars(null!=r.transactionFee?r.transactionFee:0),transfers:n$h._fromProtobuf(null!=r.transferList&&null!=r.transferList.accountAmounts?r.transferList.accountAmounts:[]),contractFunctionResult:s,tokenTransfers:n$f._fromProtobuf(null!=r.tokenTransferLists?r.tokenTransferLists:[]),tokenTransfersList:n$d._fromProtobuf(null!=r.tokenTransferLists?r.tokenTransferLists:[]),scheduleRef:null!=r.scheduleRef?o$k._fromProtobuf(r.scheduleRef):null,assessedCustomFees:null!=r.assessedCustomFees?r.assessedCustomFees.map(e=>n$e._fromProtobuf(e)):[],nftTransfers:s$g._fromProtobuf(null!=r.tokenTransferLists?r.tokenTransferLists:[]),automaticTokenAssociations:null!=r.automaticTokenAssociations?r.automaticTokenAssociations.map(e=>u$9._fromProtobuf(e)):[],parentConsensusTimestamp:null!=r.parentConsensusTimestamp?s$j._fromProtobuf(r.parentConsensusTimestamp):null,aliasKey:n,duplicates:i,children:o,hbarAllowanceAdjustments:[],tokenAllowanceAdjustments:[],nftAllowanceAdjustments:[],ethereumHash:null!=r.ethereumHash?r.ethereumHash:null,paidStakingRewards:null!=r.paidStakingRewards?n$h._fromProtobuf(r.paidStakingRewards):[],prngBytes:null!=r.prngBytes?r.prngBytes:null,prngNumber:null!=r.prngNumber?r.prngNumber:null,evmAddress:null!=r.evmAddress?i$d.fromBytes(r.evmAddress):null,newPendingAirdrops:a})}static fromBytes(t){return e._fromProtobuf(libExports.proto.TransactionGetRecordResponse.decode(t))}toBytes(){return libExports.proto.TransactionGetRecordResponse.encode(this._toProtobuf()).finish()}toJSON(){return{receipt:this.receipt.toJSON(),transactionHash:n$n(this.transactionHash),consensusTimestamp:this.consensusTimestamp.toDate(),transactionId:this.transactionId.toString(),transactionMemo:this.transactionMemo,transactionFee:this.transactionFee.toTinybars().toString(),transfers:this.transfers.map(e=>e.toJSON()),tokenTransfers:this.tokenTransfers,tokenTransfersList:this.tokenTransfersList.map(e=>e.toJSON()),scheduleRef:this.scheduleRef?.toString()||null,assessedCustomFees:this.assessedCustomFees,nftTransfers:this.nftTransfers,automaticTokenAssociations:this.automaticTokenAssociations,parentConsensusTimestamp:this.parentConsensusTimestamp?.toDate()||null,aliasKey:this.aliasKey?.toString()||null,duplicates:this.duplicates,children:this.children,ethereumHash:null!=this.ethereumHash?n$n(this.ethereumHash):null,paidStakingRewards:this.paidStakingRewards,prngBytes:null!=this.prngBytes?n$n(this.prngBytes):null,prngNumber:this.prngNumber,evmAddress:this.evmAddress?.toString()||null}}toString(){return JSON.stringify(this.toJSON())}},r$j=class extends t$k{constructor(e){super(e,`Record for transaction ${e.transactionId.toString()} contained error status ${e.status.toString()}`),this.transactionRecord=e.transactionRecord}};const{proto:l$b}=e$s;let h$2=class e extends h$3{constructor(e={}){super(),this._transactionId=null,this._includeChildren=null,this._includeDuplicates=null,this._validateReceiptStatus=!0,null!=e.transactionId&&this.setTransactionId(e.transactionId),null!=e.includeChildren&&this.setIncludeChildren(e.includeChildren),null!=e.includeDuplicates&&this.setIncludeDuplicates(e.includeDuplicates),null!=e.validateReceiptStatus&&this.setValidateReceiptStatus(e.validateReceiptStatus)}get transactionId(){return this._transactionId}static _fromProtobuf(t){const r=t.transactionGetRecord;return new e({transactionId:r.transactionID?i$c._fromProtobuf(r.transactionID):void 0,includeChildren:null!=r.includeChildRecords?r.includeChildRecords:void 0,includeDuplicates:null!=r.includeDuplicates?r.includeDuplicates:void 0})}setTransactionId(e){return this._transactionId="string"==typeof e?i$c.fromString(e):e.clone(),this}setIncludeChildren(e){return this._includeChildren=e,this}get includeChildren(){return null!=this._includeChildren&&this._includeChildren}setIncludeDuplicates(e){return this._duplicates=e,this}get includeDuplicates(){return null!=this._duplicates&&this._duplicates}setValidateReceiptStatus(e){return this._validateReceiptStatus=e,this}get validateReceiptStatus(){return this._validateReceiptStatus}_shouldRetry(e,t){const{nodeTransactionPrecheckCode:r}=this._mapResponseHeader(t);let n=e$n._fromCode(null!=r?r:l$b.ResponseCodeEnum.OK);switch(this._logger&&this._logger.debug(`[${this._getLogId()}] received node precheck status ${n.toString()}`),n){case e$n.Busy:case e$n.Unknown:case e$n.ReceiptNotFound:case e$n.RecordNotFound:case e$n.PlatformNotActive:return[n,c$8.Retry];case e$n.Ok:break;default:return[n,c$8.Error]}const o=t.transactionGetRecord;if(o.header.responseType===libExports.proto.ResponseType.COST_ANSWER)return[n,c$8.Finished];const i=o.transactionRecord.receipt.status;switch(n=e$n._fromCode(i),this._logger&&this._logger.debug(`[${this._getLogId()}] received record's receipt ${n.toString()}`),n){case e$n.Ok:case e$n.Busy:case e$n.Unknown:case e$n.ReceiptNotFound:case e$n.RecordNotFound:return[n,c$8.Retry];case e$n.Success:return[n,c$8.Finished];default:return[n,this._validateReceiptStatus?c$8.Error:c$8.Finished]}}_mapStatusError(e,t,r){const{nodeTransactionPrecheckCode:n}=this._mapResponseHeader(t);let o=e$n._fromCode(null!=n?n:l$b.ResponseCodeEnum.OK);switch(o){case e$n.Ok:break;case e$n.ContractRevertExecuted:return new r$j({status:o,transactionId:this._getTransactionId(),transactionRecord:b$1._fromProtobuf({transactionRecord:t.transactionGetRecord.transactionRecord})});default:return new n$j({nodeId:r,status:o,transactionId:this._getTransactionId(),contractFunctionResult:null})}const i=t.transactionGetRecord.transactionRecord.receipt,s=i.status;return o=e$n._fromCode(s),o===e$n.ContractRevertExecuted?new r$j({status:o,transactionId:this._getTransactionId(),transactionRecord:b$1._fromProtobuf({transactionRecord:t.transactionGetRecord.transactionRecord})}):new r$n({status:o,transactionId:this._getTransactionId(),transactionReceipt:d$a._fromProtobuf({receipt:i})})}_validateChecksums(e){null!=this._transactionId&&null!=this._transactionId.accountId&&this._transactionId.accountId.validateChecksum(e)}_execute(e,t){return e.crypto.getTxRecordByTxID(t)}_mapResponseHeader(e){return e.transactionGetRecord.header}_mapResponse(e,t,r){const n=e.transactionGetRecord;return Promise.resolve(b$1._fromProtobuf(n))}_onMakeRequest(e){return{transactionGetRecord:{header:e,transactionID:null!=this._transactionId?this._transactionId._toProtobuf():null,includeChildRecords:this._includeChildren,includeDuplicates:this._includeDuplicates}}}_getLogId(){return`TransactionRecordQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("transactionGetRecord",h$2._fromProtobuf);let h$1=class e{constructor(e){this.nodeId=e.nodeId,this.transactionHash=e.transactionHash,this.transactionId=e.transactionId,this.transaction=e.transaction,this.logger=e.logger}static fromJSON(t){return new e({nodeId:f$2.fromString(t.nodeId),transactionHash:r$p(t.transactionHash),transactionId:i$c.fromString(t.transactionId)})}async getReceipt(e){let t;try{t=await this.getReceiptQuery().execute(e)}catch(r){if(r instanceof r$n&&r.status===e$n.ThrottledAtConsensus)return this.logger?.info("Transaction throttled at consensus"),this._retryTransaction(e);throw r}if(t.status!==e$n.Success&&t.status!==e$n.FeeScheduleFilePartUploaded)throw new r$n({transactionReceipt:t,status:t.status,transactionId:this.transactionId});return t}async getRecord(e){return await this.getReceipt(e),this.getRecordQuery().execute(e)}async getVerboseRecord(e){try{return await this.getReceiptQuery().execute(e),this.getRecordQuery().execute(e)}catch(t){return this.getRecordQuery().execute(e)}}async getReceiptWithSigner(e){const t=await this.getReceiptQuery().executeWithSigner(e);if(t.status!==e$n.Success)throw new r$n({transactionReceipt:t,status:t.status,transactionId:this.transactionId});return t}async getRecordWithSigner(e){return await this.getReceiptWithSigner(e),this.getRecordQuery().executeWithSigner(e)}getReceiptQuery(){return(new l$d).setTransactionId(this.transactionId).setNodeAccountIds([this.nodeId])}getRecordQuery(){return(new h$2).setTransactionId(this.transactionId).setNodeAccountIds([this.nodeId])}toJSON(){return{nodeId:this.nodeId.toString(),transactionHash:n$n(this.transactionHash),transactionId:this.transactionId.toString()}}async _retryTransaction(e){if(!this.transaction)throw new Error("If you retry transaction you should have the transaction set");if(e.operatorAccountId?.toString()!==this.transaction.transactionId?.accountId?.toString())throw new Error("Retry mechanism is not supported when tx id is not generated by the operator account");if(null===e.operatorAccountId)throw new Error("Operator account is not set");let t=250;for(let n=0;n<5;n++){if(this.logger?.trace(`Transaction throttled, retry attempt ${n}`),this.transaction?._resetTransaction(e),null==this.transaction||null==this.transaction.transactionId)throw new Error("Transaction or Transaction ID is null after reset");this.transactionId=this.transaction.transactionId,n>0&&(await I(Math.min(t,16e3)),t*=2);try{this.transaction._resetTransaction(e);const t=await this.transaction.execute(e),r=await(new l$d).setTransactionId(t.transactionId).setNodeAccountIds([t.nodeId]).execute(e);if(r.status!==e$n.ThrottledAtConsensus)return this.logger?.info(`Transaction throttle retry succeeded after attempt ${n}`),r}catch(r){if(r instanceof r$n&&r.status===e$n.ThrottledAtConsensus){this.logger?.info("Transaction throttled at consensus");continue}throw this.logger?.error(`An error occurred after throttle retry: ${r instanceof Error?r.message:String(r)}`),r}}throw this.logger?.error("Transaction throttle retry failed after maximum attempts"),new Error("Transaction retry failed after maximum attempts")}toString(){return JSON.stringify(this.toJSON())}};async function t$g(e){return new Uint8Array(await window.crypto.subtle.digest("SHA-384",e))}let n$c=class e extends t$q{constructor(){super(e=>f$2.fromString(e))}static async _fromTransaction(t){const r=new e;for(let e=0;e<t._nodeAccountIds.length;e++){const n=t._nodeAccountIds.list[e],o=t._transactions.get(e),i=await t$g(o.signedTransactionBytes);r._set(n,i)}return r}},t$f=class e extends t$q{constructor(){super(e=>i$f.fromString(e))}static _fromTransactionSigMap(t){const r=new e,n=null!=t.sigPair?t.sigPair:[];for(const e of n)null!=e.pubKeyPrefix&&(null!=e.ed25519?r._set(i$f.fromBytesED25519(e.pubKeyPrefix),e.ed25519):null!=e.ECDSASecp256k1&&r._set(i$f.fromBytesECDSA(e.pubKeyPrefix),e.ECDSASecp256k1));return r}},s$f=class e extends t$q{constructor(){super(e=>f$2.fromString(e))}static _fromTransaction(t){const r=new e;for(let e=0;e<t._nodeAccountIds.length;e++){const n=t._signedTransactions.get(e).sigMap;null!=n&&r._set(t._nodeAccountIds.list[e],t$f._fromTransactionSigMap(n))}return r}},e$i=class{constructor(e={}){this._feeCollectorAccountId=null,this._allCollectorsAreExempt=!1,null!=e.feeCollectorAccountId&&this.setFeeCollectorAccountId(e.feeCollectorAccountId),null!=e.allCollectorsAreExempt&&this.setAllCollectorsAreExempt(e.allCollectorsAreExempt)}get feeCollectorAccountId(){return this._feeCollectorAccountId}setFeeCollectorAccountId(e){return this._feeCollectorAccountId="string"==typeof e?f$2.fromString(e):e,this}get allCollectorsAreExempt(){return this._allCollectorsAreExempt}setAllCollectorsAreExempt(e){return this._allCollectorsAreExempt=e,this}static _fromProtobuf(e){throw new Error("not implemented")}_toProtobuf(){throw new Error("not implemented")}},l$a=class e extends e$i{constructor(e={}){super(e),this._denominatingTokenId=null,null!=e.denominatingTokenId&&this.setDenominatingTokenId(e.denominatingTokenId),this._amount=null,null!=e.amount&&this.setAmount(e.amount)}setHbarAmount(e){return this._amount=e.toTinybars(),this._denominatingTokenId=null,this}get hbarAmount(){return null!=this._denominatingTokenId?null:e$o.fromTinybars(null!=this._amount?this._amount:0)}setDenominatingTokenToSameToken(){return this._denominatingTokenId=new u$b(0,0,0),this}get denominatingTokenId(){return this._denominatingTokenId}setDenominatingTokenId(e){return this._denominatingTokenId="string"==typeof e?u$b.fromString(e):e,this}get amount(){return this._amount}setAmount(e){return this._amount="number"==typeof e?Long.fromNumber(e):e,this}static _fromProtobuf(t){const r=t.fixedFee;return new e({feeCollectorAccountId:null!=t.feeCollectorAccountId?f$2._fromProtobuf(t.feeCollectorAccountId):void 0,allCollectorsAreExempt:null!=t.allCollectorsAreExempt?t.allCollectorsAreExempt:void 0,denominatingTokenId:null!=r.denominatingTokenId?u$b._fromProtobuf(r.denominatingTokenId):void 0,amount:null!=r.amount?r.amount:void 0})}_toProtobuf(){return{feeCollectorAccountId:null!=this.feeCollectorAccountId?this.feeCollectorAccountId._toProtobuf():null,allCollectorsAreExempt:this.allCollectorsAreExempt,fixedFee:{denominatingTokenId:null!=this._denominatingTokenId?this._denominatingTokenId._toProtobuf():null,amount:this._amount}}}_toTopicFeeProtobuf(){return{feeCollectorAccountId:null!=this.feeCollectorAccountId?this.feeCollectorAccountId._toProtobuf():null,fixedFee:{denominatingTokenId:null!=this._denominatingTokenId?this._denominatingTokenId._toProtobuf():null,amount:this._amount}}}},o$h=class e{constructor(e={}){this._accountId=null,e.accountId&&this.setAccountId(e.accountId),this._fees=null,e.fees&&this.setFees(e.fees)}static _fromProtobuf(t){return new e({accountId:null!=t.accountId?f$2._fromProtobuf(t.accountId):null,fees:null!=t.fees?t.fees.map(e=>l$a._fromProtobuf({fixedFee:e})):null})}getAccountId(){return this._accountId}setAccountId(e){return this._accountId=e instanceof f$2?e:f$2.fromString(e),this}getFees(){return this._fees}setFees(e){return this._fees=e,this}_toProtobuf(){const e=[];return null!=this._fees&&this._fees.forEach(t=>{const r=t._toProtobuf();null!=r.fixedFee&&e.push(r.fixedFee)}),{accountId:null!=this._accountId?this._accountId._toProtobuf():null,fees:e}}},t$e=class{constructor(e,t,r){this.nodeAccountId=e,this.transactionId=t,this.signableTransactionBodyBytes=r}};const w$1=Long.fromValue(7776e3),S=e$o.fromTinybars(Long.fromString("9223372036854775807")),A=new f$2(0,0,0),k=1024,B=new Map;class P extends u$d{constructor(){super(),__publicField2(this,"_shouldRemoveSignature",(e,t)=>n$n(e?.pubKeyPrefix||new Uint8Array)===t),this._transactions=new t$m,this._signedTransactions=new t$m,this._signerPublicKeys=new Set,this._transactionValidDuration=120,this._defaultMaxTransactionFee=new e$o(2),this._customFeeLimits=[],this._maxTransactionFee=null,this._transactionMemo="",this._transactionIds=new t$m,this._publicKeys=[],this._transactionSigners=[],this._regenerateTransactionId=null,this._batchKey=null,this._isThrottled=!1}static fromBytes(e){const t=[],r=[],n=[],o=[],i=[],s=[],a=libExports.proto.TransactionList.decode(e).transactionList;if(0===a.length){const t=libExports.proto.Transaction.decode(e);0!==t.signedTransactionBytes.length?a.push(t):a.push({signedTransactionBytes:libExports.proto.SignedTransaction.encode({sigMap:t.sigMap,bodyBytes:t.bodyBytes}).finish()})}for(const l of a){if(null==l.bodyBytes&&null==l.signedTransactionBytes)throw new Error("bodyBytes and signedTransactionBytes are null");if(l.bodyBytes&&0!=l.bodyBytes.length){const e=libExports.proto.TransactionBody.decode(l.bodyBytes);if(null!=e.transactionID){const t=i$c._fromProtobuf(e.transactionID);o.includes(t.toString())||(r.push(t),o.push(t.toString()))}if(null!=e.nodeAccountID){const t=f$2._fromProtobuf(e.nodeAccountID);i.includes(t.toString())||(n.push(t),i.push(t.toString()))}if(null==e.data)throw new Error("(BUG) body.data was not set in the protobuf");s.push(e)}if(l.signedTransactionBytes&&0!=l.signedTransactionBytes.length){const e=libExports.proto.SignedTransaction.decode(l.signedTransactionBytes);t.push(e);const a=libExports.proto.TransactionBody.decode(e.bodyBytes);if(null!=a.transactionID){const e=i$c._fromProtobuf(a.transactionID);o.includes(e.toString())||(r.push(e),o.push(e.toString()))}if(null!=a.nodeAccountID){const e=f$2._fromProtobuf(a.nodeAccountID);i.includes(e.toString())||(n.push(e),i.push(e.toString()))}if(null==a.data)throw new Error("(BUG) body.data was not set in the protobuf");s.push(a)}}const c=s[0];if(null==c||null==c.data)throw new Error("No transaction found in bytes or failed to decode TransactionBody");const u=B.get(c.data);if(null==u)throw new Error(`(BUG) Transaction.fromBytes() not implemented for type ${c.data}`);return u(a,t,r,n,s)}schedule(){if(this._requireNotFrozen(),1!=F.length)throw new Error("ScheduleCreateTransaction has not been loaded yet");return F[0]()._setScheduledTransaction(this)}async batchify(e,t){return this._requireNotFrozen(),this.setBatchKey(t),await this.signWithOperator(e)}static _fromProtobufTransactions(e,t,r,n,o,i){const s=i[0];for(let c=0;c<n.length;c++)for(let e=0;e<o.length-1;e++)if(!L(i[c*o.length+e],i[c*o.length+e+1],new Set(["nodeAccountID"])))throw new Error("failed to validate transaction bodies");const a=new f$2(0);for(let c=0;c<o.length;c++)o[c].equals(a)&&o.splice(c--,1);e._transactions.setList(t),e._signedTransactions.setList(r),e._transactionIds.setList(n),e._nodeAccountIds.setList(o),e._transactionValidDuration=null!=s.transactionValidDuration&&null!=s.transactionValidDuration.seconds?Long.fromValue(s.transactionValidDuration.seconds).toInt():120,e._maxTransactionFee=null!=s.transactionFee&&s.transactionFee>new Long(0,0,!0)?e$o.fromTinybars(s.transactionFee):null,e._customFeeLimits=null!=s.maxCustomFees?s.maxCustomFees?.map(e=>o$h._fromProtobuf(e)):[],e._batchKey=null!=s.batchKey?t$r._fromProtobufKey(s?.batchKey):null,e._transactionMemo=null!=s.memo?s.memo:"";for(let c=0;c<o.length;c++){const n=r[c]||t[c];if(null!=n.sigMap&&null!=n.sigMap.sigPair)for(const t of n.sigMap.sigPair)e._signerPublicKeys.add(n$n(t.pubKeyPrefix)),e._publicKeys.push(i$f.fromBytes(t.pubKeyPrefix)),e._transactionSigners.push(null)}return e}setNodeAccountIds(e){return this._requireNotFrozen(),super.setNodeAccountIds(e),this}get transactionValidDuration(){return this._transactionValidDuration}get size(){return this._requireFrozen(),this._makeRequestAsync().then(e=>libExports.proto.Transaction.encode(e).finish().length)}get bodySize(){const e=this._makeTransactionBody(f$2.fromString("0.0.0"));return libExports.proto.TransactionBody.encode(e).finish().length}setTransactionValidDuration(e){return this._requireNotFrozen(),this._transactionValidDuration=e,this}get maxTransactionFee(){return this._maxTransactionFee}setMaxTransactionFee(e){return this._requireNotFrozen(),this._maxTransactionFee=e instanceof e$o?e:new e$o(e),this}get regenerateTransactionId(){return this._regenerateTransactionId}setRegenerateTransactionId(e){return this._requireNotFrozen(),this._regenerateTransactionId=e,this}get transactionMemo(){return this._transactionMemo}setTransactionMemo(e){return this._requireNotFrozen(),this._transactionMemo=e,this}get transactionId(){return this._transactionIds.isEmpty?null:(this._transactionIds.setLocked(),this._transactionIds.current)}setTransactionId(e){return this._requireNotFrozen(),this._transactionIds.setList([e]).setLocked(),this}getRequiredChunks(){return 1}get bodySizeAllChunks(){const e=[];for(let t=0;t<this.getRequiredChunks();t++)this._transactionIds.index=t,e.push(this.bodySize);return this._transactionIds.index=0,e}sign(e){return this.signWith(e.publicKey,t=>Promise.resolve(e.sign(t)))}async signWith(e,t){this._signOnDemand||this._requireFrozen();const r=n$n(e.toBytesRaw());if(this._signerPublicKeys.has(r))return this;if(this._transactions.clear(),this._signerPublicKeys.add(r),this._publicKeys.push(e),this._transactionSigners.push(t),this._signOnDemand)return this;this._transactionIds.setLocked(),this._nodeAccountIds.setLocked();for(const n of this._signedTransactions.list){const r=n.bodyBytes,o=await t(r);null==n.sigMap&&(n.sigMap={}),null==n.sigMap.sigPair&&(n.sigMap.sigPair=[]),n.sigMap.sigPair.push(e._toProtobufSignature(o))}return this}signWithOperator(e){const t=e._operator;if(null==t)throw new Error("`client` must have an operator to sign with the operator");return this._isFrozen()||this.freezeWith(e),this.signWith(t.publicKey,t.transactionSigner)}_resetTransaction(e){if(!e.operatorAccountId)throw new Error("Client must have an operator account ID");this.logger?.info("Resetting transaction id and resigning");const t=i$c.generate(e.operatorAccountId);this._transactionIds.clear(),this._signedTransactions.clear(),this._transactionIds.setList([t]),this._isThrottled=!0}addSignature(e,t){if(!(t instanceof e$q))return this._addSignatureLegacy(e,t);this.isFrozen()||this.freeze();const r=n$n(e.toBytesRaw());if(this._signerPublicKeys.has(r))return this;this._transactions.clear(),this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),this._signedTransactions.setLocked();for(let n=0;n<this._signedTransactions.length;n++){const r=this._signedTransactions.get(n);if(null==r.sigMap&&(r.sigMap={}),null==r.sigMap.sigPair&&(r.sigMap.sigPair=[]),r.bodyBytes){const{transactionID:n,nodeAccountID:o}=libExports.proto.TransactionBody.decode(r.bodyBytes);if(!n||!o)throw new Error("Transaction ID or Node Account ID not found in the signed transaction");const i=i$c._fromProtobuf(n),s=f$2._fromProtobuf(o),a=t.get(s),c=a?.get(i),u=c?.get(e);if(!u)throw new Error("Signature not found for the transaction and public key");const l=e._toProtobufSignature(u);r.sigMap?.sigPair?.push(l)}}return this._signerPublicKeys.add(r),this._publicKeys.push(e),this._transactionSigners.push(null),this}_addSignatureLegacy(e,t){const r=t instanceof Uint8Array,n=Array.isArray(t);if(this.getRequiredChunks()>1)throw new Error("Add signature is not supported for chunked transactions");if(r&&1!==this._signedTransactions.length)throw new Error("Signature array must match the number of transactions");if(n&&t.length!==this._signedTransactions.length)throw new Error("Signature array must match the number of transactions");this.isFrozen()||this.freeze();const o=n$n(e.toBytesRaw());if(this._signerPublicKeys.has(o))return this;this._transactions.clear(),this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),this._signedTransactions.setLocked();const i=r?[t]:t;for(let s=0;s<this._signedTransactions.length;s++){const t=this._signedTransactions.get(s);null==t.sigMap&&(t.sigMap={}),null==t.sigMap.sigPair&&(t.sigMap.sigPair=[]),t.sigMap.sigPair.push(e._toProtobufSignature(i[s]))}return this._signerPublicKeys.add(o),this._publicKeys.push(e),this._transactionSigners.push(null),this}getSignaturesLegacy(){return this._requireFrozen(),this._requireNotSignOnDemand(),this._buildAllTransactions(),this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),s$f._fromTransaction(this)}removeSignature(e){this.isFrozen()||this.freeze();const t=n$n(e.toBytesRaw());if(!this._signerPublicKeys.has(t))throw new Error("The public key has not signed this transaction");const r=[];for(const n of this._signedTransactions.list){const e=this._removeSignaturesFromTransaction(n,t);r.push(...e)}return this._signerPublicKeys.delete(t),this._publicKeys=this._publicKeys.filter(t=>!t.equals(e)),this._transactionSigners.pop(),r}removeAllSignatures(){this.isFrozen()||this.freeze();const e=this._collectSignaturesByPublicKey();for(const t of this._signedTransactions.list)t.sigMap&&t.sigMap.sigPair&&(t.sigMap.sigPair=[]);return this._signerPublicKeys.clear(),this._publicKeys=[],this._transactionSigners=[],e}getSignatures(e){return e?this.getSignaturesLegacy():(this._requireFrozen(),this._requireNotSignOnDemand(),this._buildAllTransactions(),this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),e$q._fromTransaction(this))}async getSignaturesAsync(){return this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),await this._buildAllTransactionsAsync(),this._transactions.setLocked(),this._signedTransactions.setLocked(),e$q._fromTransaction(this)}_setTransactionId(){if(null==this._operatorAccountId&&this._transactionIds.isEmpty)throw new Error("`transactionId` must be set or `client` must be provided with `freezeWith`")}_setNodeAccountIds(e){if(this._nodeAccountIds.isEmpty){if(null==e)throw new Error("`nodeAccountId` must be set or `client` must be provided with `freezeWith`");this._nodeAccountIds.setList(e._network.getNodeAccountIdsForExecute())}}setBatchKey(e){return this._requireNotFrozen(),this._batchKey=e,this}get batchKey(){return this._batchKey}get signableNodeBodyBytesList(){return this._requireFrozen(),this._signedTransactions.list.map(e=>{if(!e.bodyBytes)throw new Error("Missing bodyBytes in signed transaction.");const t=libExports.proto.TransactionBody.decode(e.bodyBytes);if(!t.nodeAccountID)throw new Error("Missing nodeAccountID in transaction body.");const r=f$2._fromProtobuf(t.nodeAccountID);if(!t.transactionID)throw new Error("Missing transactionID in transaction body.");const n=i$c._fromProtobuf(t.transactionID);return new t$e(r,n,e.bodyBytes)})}_buildSignedTransactions(){this._signedTransactions.locked||this._signedTransactions.setList(this._nodeAccountIds.list.map(e=>this._makeSignedTransaction(e)))}_buildIncompleteTransactions(){0==this._nodeAccountIds.length?this._transactions.setList([this._makeSignedTransaction(null)]):this._transactions.setList(this._nodeAccountIds.list.map(e=>this._makeSignedTransaction(e)))}freeze(){return this.freezeWith(null)}_freezeWithAccountId(e){null==this._operatorAccountId&&(this._operatorAccountId=e)}freezeWith(e){if(this._signOnDemand=null!=e&&e.signOnDemand,this._operator=null!=e?e._operator:null,this._freezeWithAccountId(null!=e?e.operatorAccountId:null),this._maxTransactionFee=null==this._maxTransactionFee?null!=e&&null!=e.defaultMaxTransactionFee?e.defaultMaxTransactionFee:this._defaultMaxTransactionFee:this._maxTransactionFee,this._regenerateTransactionId=null!=e&&null==this._regenerateTransactionId?e.defaultRegenerateTransactionId:this._regenerateTransactionId,this.batchKey?this._nodeAccountIds.setList([A]):this._setNodeAccountIds(e),this._setTransactionId(),null!=e)for(const t of this._transactionIds.list)null!=t.accountId&&t.accountId.validateChecksum(e);return this._buildNewTransactionIdList(),this._signOnDemand||this._buildSignedTransactions(),this}async signWithSigner(e){return await e.signTransaction(this),this}async freezeWithSigner(e){return await e.populateTransaction(this),this.freeze(),this}toBytes(){return this._requireNotSignOnDemand(),this._isFrozen()?(this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),this._buildAllTransactions()):this._buildIncompleteTransactions(),libExports.proto.TransactionList.encode({transactionList:this._transactions.list}).finish()}async toBytesAsync(){return this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),await this._buildAllTransactionsAsync(),this._transactions.setLocked(),this._signedTransactions.setLocked(),libExports.proto.TransactionList.encode({transactionList:this._transactions.list}).finish()}async getTransactionHash(){return this._requireFrozen(),this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),await this._buildAllTransactionsAsync(),this._transactions.setLocked(),this._signedTransactions.setLocked(),t$g(this._transactions.get(0).signedTransactionBytes)}async getTransactionHashPerNode(){return this._requireFrozen(),this._transactionIds.setLocked(),this._nodeAccountIds.setLocked(),await this._buildAllTransactionsAsync(),await n$c._fromTransaction(this)}isFrozen(){return this._signedTransactions.length>0}_getTransactionId(){const e=this.transactionId;if(null==e)throw new Error("transaction must have been frozen before getting the transaction ID, try calling `freeze`");return e}_validateChecksums(e){}async _beforeExecute(e){this.transactionNodeIds=Object.values(e.network).map(e=>e.toString()),this._logger&&this._logger.info(`Network used: ${e._network.networkName}`),this._isFrozen()||this.freezeWith(e),e.isAutoValidateChecksumsEnabled()&&this._validateChecksums(e),null!=this._operator&&null!=this._operator||(this._operator=null!=e?e._operator:null),null!=this._operatorAccountId&&null!=this._operatorAccountId||(this._operatorAccountId=null!=e&&null!=e._operator?e._operator.accountId:null),null!=this._operator&&await this.signWith(this._operator.publicKey,this._operator.transactionSigner)}async _makeRequestAsync(){const e=this._transactionIds.index*this._nodeAccountIds.length+this._nodeAccountIds.index;return this._signOnDemand||this._isThrottled?await this._buildTransactionAsync():(this._buildTransaction(e),this._transactions.get(e))}async _signTransaction(){const e=this._makeSignedTransaction(this._nodeAccountIds.next),t=e.bodyBytes;for(let r=0;r<this._publicKeys.length;r++){const n=this._publicKeys[r],o=this._transactionSigners[r];if(null==o)continue;const i=await o(t);null==e.sigMap&&(e.sigMap={}),null==e.sigMap.sigPair&&(e.sigMap.sigPair=[]),e.sigMap.sigPair.push(n._toProtobufSignature(i))}return e}_buildNewTransactionIdList(){if(this._transactionIds.locked||null==this._operatorAccountId)return;const e=i$c.withValidStart(this._operatorAccountId,s$j.generate());this._transactionIds.set(this._transactionIds.index,e)}_buildAllTransactions(){for(let e=0;e<this._signedTransactions.length;e++)this._buildTransaction(e)}async _buildAllTransactionsAsync(){if(this._signOnDemand){if(this._buildSignedTransactions(),!this._transactions.locked)for(let e=0;e<this._signedTransactions.length;e++)this._transactions.push(await this._buildTransactionAsync())}else this._buildAllTransactions()}_buildTransaction(e){if(this._transactions.length<e)for(let t=this._transactions.length;t<e;t++)this._transactions.push(null);null!=this._transactions.list[e]&&this._transactions.set(e,{signedTransactionBytes:libExports.proto.SignedTransaction.encode(this._signedTransactions.get(e)).finish()}),this._transactions.setIfAbsent(e,()=>({signedTransactionBytes:libExports.proto.SignedTransaction.encode(this._signedTransactions.get(e)).finish()}))}async _buildTransactionAsync(){return{signedTransactionBytes:libExports.proto.SignedTransaction.encode(await this._signTransaction()).finish()}}_shouldRetry(e,t){const{nodeTransactionPrecheckCode:r}=t,n=e$n._fromCode(null!=r?r:libExports.proto.ResponseCodeEnum.OK);switch(this._logger&&(this._logger.debug(`[${this._getLogId()}] received status ${n.toString()}`),this._logger.info(`SDK Transaction Status Response: ${n.toString()}`)),n){case e$n.Busy:case e$n.Unknown:case e$n.PlatformTransactionNotCreated:case e$n.PlatformNotActive:return[n,c$8.Retry];case e$n.Ok:return[n,c$8.Finished];case e$n.TransactionExpired:return this._transactionIds.locked||null!=this._regenerateTransactionId&&!this._regenerateTransactionId?[n,c$8.Error]:(this._buildNewTransactionIdList(),[n,c$8.Retry]);default:return[n,c$8.Error]}}_mapStatusError(e,t,r){const{nodeTransactionPrecheckCode:n}=t,o=e$n._fromCode(null!=n?n:libExports.proto.ResponseCodeEnum.OK);return this._logger&&this._logger.info(`Transaction Error Info: ${o.toString()}, ${this.transactionId.toString()}`),new n$j({nodeId:r,status:o,transactionId:this._getTransactionId(),contractFunctionResult:null})}async _mapResponse(e,t,r){const n=await t$g(r.signedTransactionBytes),o=this._getTransactionId();return this._transactionIds.advance(),this._logger&&this._logger.info(`Transaction Info: ${JSON.stringify(new h$1({nodeId:t,transactionHash:n,transactionId:o,logger:this._logger}).toJSON())}`),new h$1({nodeId:t,transactionHash:n,transactionId:o,transaction:this,logger:this._logger})}_makeSignedTransaction(e){const t=this._makeTransactionBody(e);return this._logger&&this._logger.info(`Transaction Body: ${JSON.stringify(t)}`),{sigMap:{sigPair:[]},bodyBytes:libExports.proto.TransactionBody.encode(t).finish()}}isBatchedAndNotBatchTransaction(){return null!=this.batchKey&&"atomicBatch"!=this._getTransactionDataCase()}_makeTransactionBody(e){return{[this._getTransactionDataCase()]:this._makeTransactionData(),transactionFee:null!=this._maxTransactionFee?this._maxTransactionFee.toTinybars():null,memo:this._transactionMemo,transactionID:null!=this._transactionIds.current?this._transactionIds.current._toProtobuf():null,nodeAccountID:null!=e?e._toProtobuf():null,transactionValidDuration:{seconds:Long.fromNumber(this._transactionValidDuration)},maxCustomFees:null!=this._customFeeLimits?this._customFeeLimits.map(e=>e._toProtobuf()):null,batchKey:this.batchKey?._toProtobufKey()}}_getTransactionDataCase(){throw new Error("not implemented")}_getScheduledTransactionBody(){return{memo:this.transactionMemo,transactionFee:null==this._maxTransactionFee?this._defaultMaxTransactionFee.toTinybars():this._maxTransactionFee.toTinybars(),[this._getTransactionDataCase()]:this._makeTransactionData()}}_makeTransactionData(){throw new Error("not implemented")}_isFrozen(){return this._signOnDemand||this._signedTransactions.length>0}_requireNotFrozen(){if(this._isFrozen())throw new Error("transaction is immutable; it has at least one signature or has been explicitly frozen")}_requireNotSignOnDemand(){if(this._signOnDemand)throw new Error("Please use `toBytesAsync()` if `signOnDemand` is enabled")}_requireFrozen(){if(!this._isFrozen())throw new Error("transaction must have been frozen before calculating the hash will be stable, try calling `freeze`")}_requireOneNodeAccountId(){if(1!=this._nodeAccountIds.length)throw"transaction did not have exactly one node ID set"}_requestToBytes(e){return libExports.proto.Transaction.encode(e).finish()}_responseToBytes(e){return libExports.proto.TransactionResponse.encode(e).finish()}_removeSignaturesFromTransaction(e,t){const r=[];return e.sigMap&&e.sigMap.sigPair?(e.sigMap.sigPair=e.sigMap.sigPair.filter(e=>{const n=this._shouldRemoveSignature(e,t),o=e.ed25519??e.ECDSASecp256k1;return n&&o&&r.push(o),!n}),r):[]}_collectSignaturesByPublicKey(){const e=new Map,t={};for(const r of this._signedTransactions.list){if(!r.sigMap||!r.sigMap.sigPair)return new Map;for(const n of r.sigMap.sigPair){const r=n.ed25519??n.ECDSASecp256k1;if(!r||!n.pubKeyPrefix)return new Map;const o=n$n(n.pubKeyPrefix);let i=t[o];i||(i=i$f.fromString(o),t[o]=i),e.has(i)||e.set(i,[]);const s=e.get(i);s&&s.push(r)}}return e}}const F=[];let t$d=class e{constructor(e){this.tokenId=e.tokenId instanceof u$b?e.tokenId:u$b.fromString(e.tokenId),this.senderAccountId=e.senderAccountId instanceof f$2?e.senderAccountId:f$2.fromString(e.senderAccountId),this.receiverAccountId=e.receiverAccountId instanceof f$2?e.receiverAccountId:f$2.fromString(e.receiverAccountId),this.serialNumber=Long.fromValue(e.serialNumber),this.isApproved=e.isApproved}static _fromProtobuf(t){const r=[];for(const n of t){const t=u$b._fromProtobuf(n.token);for(const o of null!=n.nftTransfers?n.nftTransfers:[])r.push(new e({tokenId:t,senderAccountId:f$2._fromProtobuf(o.senderAccountID),receiverAccountId:f$2._fromProtobuf(o.receiverAccountID),serialNumber:null!=o.serialNumber?o.serialNumber:Long.ZERO,isApproved:1==o.isApproval}))}return r}_toProtobuf(){return{senderAccountID:this.senderAccountId._toProtobuf(),receiverAccountID:this.receiverAccountId._toProtobuf(),serialNumber:this.serialNumber,isApproval:this.isApproved}}},t$c=class extends t$q{constructor(){super(e=>u$b.fromString(e))}},u$8=class extends P{constructor(e={}){super(),this._tokenTransfers=[],this._nftTransfers=[];for(const t of null!=e.tokenTransfers?e.tokenTransfers:[])this.addTokenTransfer(t.tokenId,t.accountId,t.amount);for(const t of null!=e.nftTransfers?e.nftTransfers:[])this.addNftTransfer(t.tokenId,t.serial,t.sender,t.recipient)}addNftTransfer(e,t,r,n){return this._addNftTransfer(!1,e,t,r,n)}_addTokenTransfer(e,t,r,n,o){this._requireNotFrozen();const i=e instanceof u$b?e:u$b.fromString(e),s=t instanceof f$2?t:f$2.fromString(t),a=r instanceof Long?r:Long.fromNumber(r);for(const c of this._tokenTransfers)if(0===c.tokenId.compare(i)&&0===c.accountId.compare(s))return c.amount=c.amount.add(a),c.expectedDecimals=o,this;return this._tokenTransfers.push(new n$d({tokenId:e,accountId:t,expectedDecimals:o,amount:r,isApproved:n})),this}addTokenTransfer(e,t,r){return this._addTokenTransfer(e,t,r,!1,null)}_addNftTransfer(e,t,r,n,o){let i,s,a;if(this._requireNotFrozen(),t instanceof e$j)i=t,s="string"==typeof r?f$2.fromString(r):r,a="string"==typeof n?f$2.fromString(n):n;else if(t instanceof u$b)i=new e$j(t,r),s="string"==typeof n?f$2.fromString(n):n,a="string"==typeof o?f$2.fromString(o):o;else try{i=e$j.fromString(t),s="string"==typeof r?f$2.fromString(r):r,a="string"==typeof n?f$2.fromString(n):n}catch(c){const e=u$b.fromString(t);i=new e$j(e,r),s="string"==typeof n?f$2.fromString(n):n,a="string"==typeof o?f$2.fromString(o):o}for(const u of this._nftTransfers)if(0===u.tokenId.compare(i.tokenId)&&0===u.serialNumber.compare(i.serial))return u.senderAccountId=s,u.receiverAccountId=a,this;return this._nftTransfers.push(new t$d({tokenId:i.tokenId,serialNumber:i.serial,senderAccountId:s,receiverAccountId:a,isApproved:e})),this}addApprovedNftTransfer(e,t,r,n){return this._addNftTransfer(!0,e,t,r,n)}addApprovedTokenTransfer(e,t,r){return this._addTokenTransfer(e,t,r,!0,null)}addTokenTransferWithDecimals(e,t,r,n){this._requireNotFrozen();const o=e instanceof u$b?e:u$b.fromString(e),i=t instanceof f$2?t:f$2.fromString(t),s=r instanceof Long?r:Long.fromNumber(r);let a=!1;for(const c of this._tokenTransfers)if(0===c.tokenId.compare(o)){if(null!=c.expectedDecimals&&c.expectedDecimals!==n)throw new Error("expected decimals mis-match");c.expectedDecimals=n,0===c.accountId.compare(i)&&(c.amount=c.amount.add(s),c.expectedDecimals=n,a=!0)}return a||this._tokenTransfers.push(new n$d({tokenId:e,accountId:t,expectedDecimals:n,amount:r,isApproved:!1})),this}get tokenIdDecimals(){const e=new t$c;for(const t of this._tokenTransfers)e._set(t.tokenId,t.expectedDecimals);return e}get nftTransfers(){const e=new s$g;for(const t of this._nftTransfers){const r=e.get(t.tokenId),n={sender:t.senderAccountId,recipient:t.receiverAccountId,serial:t.serialNumber,isApproved:t.isApproved};null!=r?r.push(n):e._set(t.tokenId,[n])}return e}get tokenTransfers(){const e=new n$f;for(const t of this._tokenTransfers){let r=e.get(t.tokenId);null!=r?r._set(t.accountId,t.amount):(r=new o$i,r._set(t.accountId,t.amount),e._set(t.tokenId,r))}return e}_makeTransactionData(){const e=[];this._tokenTransfers.sort((e,t)=>{const r=e.tokenId.compare(t.tokenId);return 0!==r?r:e.accountId.compare(t.accountId)}),this._nftTransfers.sort((e,t)=>{const r=e.senderAccountId.compare(t.senderAccountId);if(0!=r)return r;const n=e.receiverAccountId.compare(t.receiverAccountId);return 0!=n?n:e.serialNumber.compare(t.serialNumber)});let t=0,r=0;for(;t<this._tokenTransfers.length||r<this._nftTransfers.length;)if(t<this._tokenTransfers.length&&r<this._nftTransfers.length){const n=this._tokenTransfers[t].tokenId,o=this._nftTransfers[r].tokenId,i=e.length>0?e[e.length-1]:null,s=null!=i?i.tokenId:null;if(null!=i&&null!=s&&0===s.compare(n)){i.transfers.push(this._tokenTransfers[t++]);continue}if(null!=i&&null!=s&&0===s.compare(o)){i.nftTransfers.push(this._nftTransfers[r++]);continue}const a=n.compare(o);0===a?e.push({tokenId:n,expectedDecimals:this._tokenTransfers[t].expectedDecimals,transfers:[this._tokenTransfers[t++]],nftTransfers:[this._nftTransfers[r++]]}):a<0?e.push({tokenId:n,expectedDecimals:this._tokenTransfers[t].expectedDecimals,transfers:[this._tokenTransfers[t++]],nftTransfers:[]}):e.push({tokenId:o,expectedDecimals:null,transfers:[],nftTransfers:[this._nftTransfers[r++]]})}else if(t<this._tokenTransfers.length){const r=this._tokenTransfers[t].tokenId;let n;for(const t of e)0===t.tokenId.compare(r)&&(n=t);const o=null!=n?n.tokenId:null;if(null!=n&&null!=o&&0===o.compare(r)){n.transfers.push(this._tokenTransfers[t++]);continue}e.push({tokenId:r,expectedDecimals:this._tokenTransfers[t].expectedDecimals,transfers:[this._tokenTransfers[t++]],nftTransfers:[]})}else if(r<this._nftTransfers.length){const t=this._nftTransfers[r].tokenId;let n;for(const r of e)0===r.tokenId.compare(t)&&(n=r);const o=null!=n?n.tokenId:null;if(null!=n&&null!=o&&0===o.compare(t)){n.nftTransfers.push(this._nftTransfers[r++]);continue}e.push({tokenId:t,expectedDecimals:null,transfers:[],nftTransfers:[this._nftTransfers[r++]]})}return{tokenTransfers:e.map(e=>({token:e.tokenId._toProtobuf(),expectedDecimals:null!=e.expectedDecimals?{value:e.expectedDecimals}:null,transfers:e.transfers.map(e=>e._toProtobuf()),nftTransfers:e.nftTransfers.map(e=>e._toProtobuf())}))}}},s$e=class e extends u$8{constructor(e={}){if(super(),null!=e.tokenTransfers)for(const t of e.tokenTransfers)this._addTokenTransfer(t.tokenId,t.accountId,t.amount,t.isApproved,t.expectedDecimals);if(this._nftTransfers=[],null!=e.nftTransfers)for(const t of e.nftTransfers)this._addNftTransfer(t.isApproved,t.tokenId,t.serialNumber,t.senderAccountId,t.receiverAccountId)}addApprovedTokenTransferWithDecimals(e,t,r,n){return this._requireNotFrozen(),this._addTokenTransfer(e,t,r,!0,n),this}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenAirdrop,a=n$d._fromProtobuf(s.tokenTransfers??[]),c=t$d._fromProtobuf(s.tokenTransfers??[]);return P._fromProtobufTransactions(new e({nftTransfers:c,tokenTransfers:a}),t,r,n,o,i)}_execute(e,t){return e.token.airdropTokens(t)}_getTransactionDataCase(){return"tokenAirdrop"}_getLogId(){return`TokenAirdropTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenAirdrop",s$e._fromProtobuf);let d$8=class extends P{constructor(e){super(),this._pendingAirdropIds=[],null!=e?.pendingAirdropIds&&(this._pendingAirdropIds=e.pendingAirdropIds)}get pendingAirdropIds(){return this._pendingAirdropIds}addPendingAirdropId(e){return this._requireNotFrozen(),this._pendingAirdropIds.push(e),this}setPendingAirdropIds(e){return this._requireNotFrozen(),this._pendingAirdropIds=e,this}},i$a=class e extends d$8{constructor(e={}){super(e)}_execute(e,t){return e.token.claimAirdrop(t)}_makeTransactionData(){return{pendingAirdrops:this.pendingAirdropIds.map(e=>e.toBytes())}}static _fromProtobuf(t,r,n,o,i){const s=i[0],{pendingAirdrops:a}=s.tokenClaimAirdrop;return P._fromProtobufTransactions(new e({pendingAirdropIds:a?.map(e=>t$h.fromBytes(e))}),t,r,n,o,i)}_getTransactionDataCase(){return"tokenClaimAirdrop"}_getLogId(){return`TokenClaimAirdropTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenClaimAirdrop",i$a._fromProtobuf);let e$h=class e extends d$8{constructor(e={}){super(e)}_makeTransactionData(){return{pendingAirdrops:this.pendingAirdropIds.map(e=>e.toBytes())}}_execute(e,t){return e.token.cancelAirdrop(t)}_getTransactionDataCase(){return"tokenCancelAirdrop"}static _fromProtobuf(t,r,n,o,i){const s=i[0],{pendingAirdrops:a}=s.tokenCancelAirdrop;return P._fromProtobufTransactions(new e({pendingAirdropIds:a?.map(e=>t$h.fromBytes(e))}),t,r,n,o,i)}_getLogId(){return`TokenCancelAirdrop:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenCancelAirdrop",e$h._fromProtobuf);let o$g=class e{constructor(e){this.spenderAccountId=e.spenderAccountId,this.ownerAccountId=e.ownerAccountId,this.amount=e.amount,Object.freeze(this)}static _fromProtobuf(t){return new e({spenderAccountId:f$2._fromProtobuf(t.spender),ownerAccountId:null!=t.owner?f$2._fromProtobuf(t.owner):null,amount:e$o.fromTinybars(null!=t.amount?t.amount:0)})}static _fromGrantedProtobuf(t,r){return new e({spenderAccountId:f$2._fromProtobuf(t.spender),ownerAccountId:r,amount:e$o.fromTinybars(null!=t.amount?t.amount:0)})}_toProtobuf(){return{owner:null!=this.ownerAccountId?this.ownerAccountId._toProtobuf():null,spender:null!=this.spenderAccountId?this.spenderAccountId._toProtobuf():null,amount:null!=this.amount?this.amount.toTinybars():null}}_validateChecksums(e){null!=this.spenderAccountId&&this.spenderAccountId.validateChecksum(e),null!=this.spenderAccountId&&this.spenderAccountId.validateChecksum(e)}toJSON(){return{ownerAccountId:null!=this.ownerAccountId?this.ownerAccountId.toString():null,spenderAccountId:null!=this.spenderAccountId?this.spenderAccountId.toString():null,amount:null!=this.amount?this.amount.toString():null}}},e$g=class e{constructor(e){this.tokenId=e.tokenId,this.spenderAccountId=e.spenderAccountId,this.ownerAccountId=e.ownerAccountId,this.amount=e.amount,Object.freeze(this)}static _fromProtobuf(t){return new e({tokenId:u$b._fromProtobuf(t.tokenId),spenderAccountId:f$2._fromProtobuf(t.spender),ownerAccountId:null!=t.owner?f$2._fromProtobuf(t.owner):null,amount:null!=t.amount?Long.fromValue(t.amount):null})}static _fromGrantedProtobuf(t,r){return new e({tokenId:u$b._fromProtobuf(t.tokenId),spenderAccountId:f$2._fromProtobuf(t.spender),ownerAccountId:r,amount:null!=t.amount?Long.fromValue(t.amount):null})}_toProtobuf(){return{tokenId:this.tokenId._toProtobuf(),spender:null!=this.spenderAccountId?this.spenderAccountId._toProtobuf():null,owner:null!=this.ownerAccountId?this.ownerAccountId._toProtobuf():null,amount:this.amount}}_validateChecksums(e){this.tokenId.validateChecksum(e),null!=this.ownerAccountId&&this.ownerAccountId.validateChecksum(e),null!=this.spenderAccountId&&this.spenderAccountId.validateChecksum(e)}},o$f=class e{constructor(e){this.tokenId=e.tokenId,this.spenderAccountId=e.spenderAccountId,this.ownerAccountId=e.ownerAccountId,this.serialNumbers=e.serialNumbers,this.allSerials=e.allSerials,this.delegatingSpender=e.delegatingSpender,Object.freeze(this)}static _fromProtobuf(t){const r=null!=t.approvedForAll&&1==t.approvedForAll.value;return new e({tokenId:u$b._fromProtobuf(t.tokenId),spenderAccountId:null!=t.spender?f$2._fromProtobuf(t.spender):null,ownerAccountId:null!=t.owner?f$2._fromProtobuf(t.owner):null,serialNumbers:r?null:null!=t.serialNumbers?t.serialNumbers.map(e=>Long.fromValue(e)):[],allSerials:r,delegatingSpender:null!=t.delegatingSpender?f$2._fromProtobuf(t.delegatingSpender):null})}static _fromGrantedProtobuf(t,r){return new e({tokenId:u$b._fromProtobuf(t.tokenId),spenderAccountId:f$2._fromProtobuf(t.spender),ownerAccountId:r,serialNumbers:[],allSerials:null,delegatingSpender:null})}static _fromRemoveProtobuf(t){return new e({tokenId:u$b._fromProtobuf(t.tokenId),spenderAccountId:null,ownerAccountId:null!=t.owner?f$2._fromProtobuf(t.owner):null,serialNumbers:null!=t.serialNumbers?t.serialNumbers.map(e=>Long.fromValue(e)):[],allSerials:null,delegatingSpender:null})}_toProtobuf(){return{tokenId:this.tokenId._toProtobuf(),spender:null!=this.spenderAccountId?this.spenderAccountId._toProtobuf():null,owner:null!=this.ownerAccountId?this.ownerAccountId._toProtobuf():null,approvedForAll:null==this.serialNumbers?{value:this.allSerials}:null,serialNumbers:this.serialNumbers,delegatingSpender:null!=this.delegatingSpender?this.delegatingSpender._toProtobuf():null}}_validateChecksums(e){this.tokenId.validateChecksum(e),null!=this.ownerAccountId&&this.ownerAccountId.validateChecksum(e),null!=this.spenderAccountId&&this.spenderAccountId.validateChecksum(e)}},c$6=class e extends P{constructor(e={}){super(),this._hbarApprovals=null!=e.hbarApprovals?e.hbarApprovals:[],this._tokenApprovals=null!=e.tokenApprovals?e.tokenApprovals:[],this._nftApprovals=null!=e.nftApprovals?e.nftApprovals:[]}static _fromProtobuf(t,r,n,o,i){const s=i[0].cryptoApproveAllowance;return P._fromProtobufTransactions(new e({hbarApprovals:(null!=s.cryptoAllowances?s.cryptoAllowances:[]).map(e=>o$g._fromProtobuf(e)),tokenApprovals:(null!=s.tokenAllowances?s.tokenAllowances:[]).map(e=>e$g._fromProtobuf(e)),nftApprovals:(null!=s.nftAllowances?s.nftAllowances:[]).map(e=>o$f._fromProtobuf(e))}),t,r,n,o,i)}get hbarApprovals(){return this._hbarApprovals}approveHbarAllowance(e,t,r){return this._requireNotFrozen(),this._hbarApprovals.push(new o$g({spenderAccountId:"string"==typeof t?f$2.fromString(t):t instanceof v?f$2.fromEvmAddress(t.shard,t.realm,t.toSolidityAddress()):t,ownerAccountId:"string"==typeof e?f$2.fromString(e):e instanceof v?f$2.fromEvmAddress(e.shard,e.realm,e.toSolidityAddress()):e,amount:r instanceof e$o?r:new e$o(r)})),this}addHbarAllowance(e,t){return this._requireNotFrozen(),this._hbarApprovals.push(new o$g({spenderAccountId:"string"==typeof e?f$2.fromString(e):e,amount:t instanceof e$o?t:new e$o(t),ownerAccountId:null})),this}get tokenApprovals(){return this._tokenApprovals}approveTokenAllowance(e,t,r,n){return this._requireNotFrozen(),this._tokenApprovals.push(new e$g({tokenId:"string"==typeof e?u$b.fromString(e):e,spenderAccountId:"string"==typeof r?f$2.fromString(r):r instanceof v?f$2.fromEvmAddress(r.shard,r.realm,r.toSolidityAddress()):r,ownerAccountId:"string"==typeof t?f$2.fromString(t):t instanceof v?f$2.fromEvmAddress(t.shard,t.realm,t.toSolidityAddress()):t,amount:"number"==typeof n?Long.fromNumber(n):n})),this}addTokenAllowance(e,t,r){return this._requireNotFrozen(),this._tokenApprovals.push(new e$g({tokenId:"string"==typeof e?u$b.fromString(e):e,spenderAccountId:"string"==typeof t?f$2.fromString(t):t,amount:"number"==typeof r?Long.fromNumber(r):r,ownerAccountId:null})),this}addTokenNftAllowance(e,t){return this._approveTokenNftAllowance(e,null,t,null)}get tokenNftApprovals(){return this._nftApprovals}_approveTokenNftAllowance(e,t,r,n){this._requireNotFrozen();const o="string"==typeof e?e$j.fromString(e):e,i="string"==typeof r?f$2.fromString(r):r instanceof v?f$2.fromEvmAddress(r.shard,r.realm,r.toSolidityAddress()):r;let s=!1;for(const a of this._nftApprovals)if(0===a.tokenId.compare(o.tokenId)&&null!=a.spenderAccountId&&0===a.spenderAccountId.compare(i)){null!=a.serialNumbers&&a.serialNumbers.push(o.serial),s=!0;break}return s||this._nftApprovals.push(new o$f({tokenId:o.tokenId,spenderAccountId:i,ownerAccountId:"string"==typeof t?f$2.fromString(t):t instanceof v?f$2.fromEvmAddress(t.shard,t.realm,t.toSolidityAddress()):t,serialNumbers:[o.serial],allSerials:!1,delegatingSpender:"string"==typeof n?f$2.fromString(n):n})),this}approveTokenNftAllowance(e,t,r){return this._approveTokenNftAllowance(e,t,r,null)}approveTokenNftAllowanceWithDelegatingSpender(e,t,r,n){return this._approveTokenNftAllowance(e,t,r,n)}_approveAllTokenNftAllowance(e,t,r,n){return this._requireNotFrozen(),this._nftApprovals.push(new o$f({tokenId:"string"==typeof e?u$b.fromString(e):e,spenderAccountId:"string"==typeof r?f$2.fromString(r):r instanceof v?f$2.fromEvmAddress(r.shard,r.realm,r.toSolidityAddress()):r,ownerAccountId:"string"==typeof t?f$2.fromString(t):t instanceof v?f$2.fromEvmAddress(t.shard,t.realm,t.toSolidityAddress()):t,serialNumbers:null,allSerials:n,delegatingSpender:null})),this}addAllTokenNftAllowance(e,t,r){return this._approveAllTokenNftAllowance(e,t,r,!0)}approveTokenNftAllowanceAllSerials(e,t,r){return this._approveAllTokenNftAllowance(e,t,r,!0)}deleteTokenNftAllowanceAllSerials(e,t,r){return this._approveAllTokenNftAllowance(e,t,r,!1)}_validateChecksums(e){this._hbarApprovals.map(t=>t._validateChecksums(e)),this._tokenApprovals.map(t=>t._validateChecksums(e)),this._nftApprovals.map(t=>t._validateChecksums(e))}_execute(e,t){return e.crypto.approveAllowances(t)}_getTransactionDataCase(){return"cryptoApproveAllowance"}_makeTransactionData(){return{cryptoAllowances:this._hbarApprovals.map(e=>e._toProtobuf()),tokenAllowances:this._tokenApprovals.map(e=>e._toProtobuf()),nftAllowances:this._nftApprovals.map(e=>e._toProtobuf())}}_getLogId(){return`AccountAllowanceApproveTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("cryptoApproveAllowance",c$6._fromProtobuf);let r$i=class e extends P{constructor(e={}){super(),this._nftAllowances=null!=e.nftAllowances?e.nftAllowances:[]}static _fromProtobuf(t,r,n,o,i){const s=i[0].cryptoDeleteAllowance;return P._fromProtobufTransactions(new e({nftAllowances:(null!=s.nftAllowances?s.nftAllowances:[]).map(e=>o$f._fromProtobuf(e))}),t,r,n,o,i)}get tokenNftAllowanceDeletions(){return this._nftAllowances}deleteAllTokenNftAllowances(e,t){this._requireNotFrozen();const r="string"==typeof e?e$j.fromString(e):e,n="string"==typeof t?f$2.fromString(t):t;let o=!1;for(const i of this._nftAllowances)if(0===i.tokenId.compare(r.tokenId)){null!=i.serialNumbers&&i.serialNumbers.push(r.serial),o=!0;break}return o||this._nftAllowances.push(new o$f({tokenId:r.tokenId,spenderAccountId:null,serialNumbers:[r.serial],ownerAccountId:n,allSerials:!1,delegatingSpender:null})),this}_validateChecksums(e){this._nftAllowances.map(t=>t._validateChecksums(e))}_execute(e,t){return e.crypto.deleteAllowances(t)}_getTransactionDataCase(){return"cryptoDeleteAllowance"}_makeTransactionData(){return{nftAllowances:this._nftAllowances.map(e=>e._toProtobuf())}}_getLogId(){return`AccountAllowanceDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("cryptoDeleteAllowance",r$i._fromProtobuf);let t$b=class extends t$q{constructor(){super(e=>u$b.fromString(e))}},t$a=class extends t$q{constructor(){super(e=>u$b.fromString(e))}},a$6=class e{constructor(e){this.hbars=e.hbars,this.tokens=e.tokens,this.tokenDecimals=e.tokenDecimals,Object.freeze(this)}static fromBytes(t){return e._fromProtobuf(libExports.proto.CryptoGetAccountBalanceResponse.decode(t))}static _fromProtobuf(t){const r=new t$b,n=new t$a;if(null!=t.tokenBalances)for(const e of t.tokenBalances){const t=u$b._fromProtobuf(e.tokenId);n._set(t,null!=e.decimals?e.decimals:0),r._set(t,Long.fromValue(e.balance))}return new e({hbars:e$o.fromTinybars(t.balance),tokens:r,tokenDecimals:n})}_toProtobuf(){const e=[];for(const[t,r]of null!=this.tokens?this.tokens:[])e.push({tokenId:t._toProtobuf(),balance:r,decimals:null!=this.tokenDecimals?this.tokenDecimals.get(t):null});return{balance:this.hbars.toTinybars(),tokenBalances:e}}toBytes(){return libExports.proto.CryptoGetAccountBalanceResponse.encode(this._toProtobuf()).finish()}toString(){return JSON.stringify(this.toJSON())}toJSON(){const e=[];for(const[t,r]of null!=this.tokens?this.tokens:[]){const n=null!=this.tokenDecimals?this.tokenDecimals.get(t):null;e.push({tokenId:t.toString(),balance:r.toString(),decimals:null!=n?n:0})}return{hbars:this.hbars.toString(),tokens:e}}},e$f=class e extends h$3{constructor(e={}){super(),this._accountId=null,this._contractId=null,null!=e.accountId&&this.setAccountId(e.accountId),null!=e.contractId&&this.setContractId(e.contractId)}static _fromProtobuf(t){const r=t.cryptogetAccountBalance;return new e({accountId:null!=r.accountID?f$2._fromProtobuf(r.accountID):void 0,contractId:null!=r.contractID?v._fromProtobuf(r.contractID):void 0})}get accountId(){return this._accountId}setAccountId(e){return this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}get contractId(){return this._contractId}setContractId(e){return this._contractId="string"==typeof e?v.fromString(e):e.clone(),this}_isPaymentRequired(){return!1}_validateChecksums(e){null!=this._accountId&&this._accountId.validateChecksum(e),null!=this._contractId&&this._contractId.validateChecksum(e)}_execute(e,t){return e.crypto.cryptoGetBalance(t)}_mapResponseHeader(e){return e.cryptogetAccountBalance.header}_mapResponse(e,t,r){const n=e.cryptogetAccountBalance;return Promise.resolve(a$6._fromProtobuf(n))}_onMakeRequest(e){return{cryptogetAccountBalance:{header:e,accountID:null!=this._accountId?this._accountId._toProtobuf():null,contractID:null!=this._contractId?this._contractId._toProtobuf():null}}}_getLogId(){return`AccountBalanceQuery:${this._timestamp.toString()}`}};m$2.set("cryptogetAccountBalance",e$f._fromProtobuf);let s$d=class e{constructor(e){this.seconds=e instanceof Long?e:Long.fromNumber(e),Object.freeze(this)}_toProtobuf(){return{seconds:this.seconds}}static _fromProtobuf(t){return new e(t.seconds)}};class h extends P{constructor(e={}){super(),this._key=null,this._initialBalance=null,this._sendRecordThreshold=S,this._receiveRecordThreshold=S,this._receiverSignatureRequired=!1,this._proxyAccountId=null,this._autoRenewPeriod=new s$d(w$1),this._accountMemo=null,this._maxAutomaticTokenAssociations=null,this._stakedAccountId=null,this._stakedNodeId=null,this._declineStakingReward=!1,this._alias=null,null!=e.key&&this.setKeyWithoutAlias(e.key),null!=e.receiverSignatureRequired&&this.setReceiverSignatureRequired(e.receiverSignatureRequired),null!=e.initialBalance&&this.setInitialBalance(e.initialBalance),null!=e.proxyAccountId&&this.setProxyAccountId(e.proxyAccountId),null!=e.autoRenewPeriod&&this.setAutoRenewPeriod(e.autoRenewPeriod),null!=e.accountMemo&&this.setAccountMemo(e.accountMemo),null!=e.maxAutomaticTokenAssociations&&this.setMaxAutomaticTokenAssociations(e.maxAutomaticTokenAssociations),null!=e.stakedAccountId&&this.setStakedAccountId(e.stakedAccountId),null!=e.stakedNodeId&&this.setStakedNodeId(e.stakedNodeId),null!=e.declineStakingReward&&this.setDeclineStakingReward(e.declineStakingReward),null!=e.alias&&this.setAlias(e.alias)}static _fromProtobuf(e,t,r,n,o){const i=o[0].cryptoCreateAccount;let s;return null!=i.alias&&i.alias.length>0&&20===i.alias.length&&(s=i$d.fromBytes(i.alias)),P._fromProtobufTransactions(new h({key:null!=i.key?t$r._fromProtobufKey(i.key):void 0,initialBalance:null!=i.initialBalance?e$o.fromTinybars(i.initialBalance):void 0,receiverSignatureRequired:null!=i.receiverSigRequired?i.receiverSigRequired:void 0,proxyAccountId:null!=i.proxyAccountID?f$2._fromProtobuf(i.proxyAccountID):void 0,autoRenewPeriod:null!=i.autoRenewPeriod&&null!=i.autoRenewPeriod.seconds?i.autoRenewPeriod.seconds:void 0,accountMemo:null!=i.memo?i.memo:void 0,maxAutomaticTokenAssociations:null!=i.maxAutomaticTokenAssociations?i.maxAutomaticTokenAssociations:void 0,stakedAccountId:null!=i.stakedAccountId?f$2._fromProtobuf(i.stakedAccountId):void 0,stakedNodeId:null!=i.stakedNodeId?i.stakedNodeId:void 0,declineStakingReward:1==i.declineReward,alias:s}),e,t,r,n,o)}get key(){return this._key}setKey(e){return this._requireNotFrozen(),this._key=e,this}setECDSAKeyWithAlias(e){this.setKeyWithoutAlias(e);const t=this._deriveECDSAKeyAlias(e);return this.setAlias(t),this}setKeyWithAlias(e,t){this.setKeyWithoutAlias(e);const r=this._deriveECDSAKeyAlias(t);return this.setAlias(r),this}setKeyWithoutAlias(e){return this._requireNotFrozen(),this._key=e,this}get initialBalance(){return this._initialBalance}setInitialBalance(e){return this._requireNotFrozen(),this._initialBalance=e instanceof e$o?e:new e$o(e),this}get receiverSignatureRequired(){return this._receiverSignatureRequired}setReceiverSignatureRequired(e){return this._requireNotFrozen(),this._receiverSignatureRequired=e,this}get proxyAccountId(){return this._proxyAccountId}setProxyAccountId(e){return this._requireNotFrozen(),this._proxyAccountId=e,this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof s$d?e:new s$d(e),this}get accountMemo(){return this._accountMemo}setAccountMemo(e){return this._requireNotFrozen(),this._accountMemo=e,this}get maxAutomaticTokenAssociations(){return this._maxAutomaticTokenAssociations}setMaxAutomaticTokenAssociations(e){return this._requireNotFrozen(),this._maxAutomaticTokenAssociations="number"==typeof e?Long.fromNumber(e):e,this}get stakedAccountId(){return this._stakedAccountId}setStakedAccountId(e){return this._requireNotFrozen(),this._stakedAccountId="string"==typeof e?f$2.fromString(e):e,this}get stakedNodeId(){return this._stakedNodeId}setStakedNodeId(e){return this._requireNotFrozen(),this._stakedNodeId=Long.fromValue(e),this}get declineStakingRewards(){return this._declineStakingReward}setDeclineStakingReward(e){return this._requireNotFrozen(),this._declineStakingReward=e,this}get alias(){return this._alias}setAlias(e){if("string"==typeof e){if(!(e.startsWith("0x")&&42==e.length||40==e.length))throw new Error('evmAddress must be a valid EVM address with or without "0x" prefix');this._alias=i$d.fromString(e)}else this._alias=e;return this}_validateChecksums(e){null!=this._proxyAccountId&&this._proxyAccountId.validateChecksum(e)}_deriveECDSAKeyAlias(e){const t=e instanceof g&&"secp256k1"===e.type,r=e instanceof i$f&&"secp256k1"===e.type;if(t)return e.publicKey.toEvmAddress();if(r)return e.toEvmAddress();throw new Error("Invalid key for alias derivation provided: expected an ECDSA (secp256k1) PrivateKey or PublicKey.")}_execute(e,t){return e.crypto.createAccount(t)}_getTransactionDataCase(){return"cryptoCreateAccount"}_makeTransactionData(){let e=null;return null!=this._alias&&(e=this._alias.toBytes()),{key:null!=this._key?this._key._toProtobufKey():null,initialBalance:null!=this._initialBalance?this._initialBalance.toTinybars():null,autoRenewPeriod:this._autoRenewPeriod._toProtobuf(),proxyAccountID:null!=this._proxyAccountId?this._proxyAccountId._toProtobuf():null,receiveRecordThreshold:this._receiveRecordThreshold.toTinybars(),sendRecordThreshold:this._sendRecordThreshold.toTinybars(),receiverSigRequired:this._receiverSignatureRequired,memo:this._accountMemo,maxAutomaticTokenAssociations:null!=this._maxAutomaticTokenAssociations?this._maxAutomaticTokenAssociations.toInt():null,stakedAccountId:null!=this.stakedAccountId?this.stakedAccountId._toProtobuf():null,stakedNodeId:this.stakedNodeId,declineReward:this.declineStakingRewards,alias:e}}_getLogId(){return`AccountCreateTransaction:${this._transactionIds.current.validStart.toString()}`}}B.set("cryptoCreateAccount",h._fromProtobuf);let c$5=class e extends P{constructor(e={}){super(),this._accountId=null,this._transferAccountId=null,null!=e.accountId&&this.setAccountId(e.accountId),null!=e.transferAccountId&&this.setTransferAccountId(e.transferAccountId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].cryptoDelete;return P._fromProtobufTransactions(new e({accountId:null!=s.deleteAccountID?f$2._fromProtobuf(s.deleteAccountID):void 0,transferAccountId:null!=s.transferAccountID?f$2._fromProtobuf(s.transferAccountID):void 0}),t,r,n,o,i)}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}get transferAccountId(){return this._transferAccountId}setTransferAccountId(e){return this._requireNotFrozen(),this._transferAccountId="string"==typeof e?f$2.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._accountId&&this._accountId.validateChecksum(e),null!=this._transferAccountId&&this._transferAccountId.validateChecksum(e)}_execute(e,t){return e.crypto.cryptoDelete(t)}_getTransactionDataCase(){return"cryptoDelete"}_makeTransactionData(){return{deleteAccountID:null!=this._accountId?this._accountId._toProtobuf():null,transferAccountID:null!=this._transferAccountId?this._transferAccountId._toProtobuf():null}}_getLogId(){return`AccountDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("cryptoDelete",c$5._fromProtobuf);let r$h=class e{constructor(e){this._ledgerId=e,Object.freeze(this)}static fromString(t){switch(t){case n$b[0]:case"0":return e.MAINNET;case n$b[1]:case"1":return e.TESTNET;case n$b[2]:case"2":return e.PREVIEWNET;case n$b[3]:case"3":return e.LOCAL_NODE;default:{let r=r$p(t);if(0==r.length&&0!=t.length)throw new Error("Default reached for fromString");return new e(r)}}}toString(){if(1!=this._ledgerId.length)return n$n(this._ledgerId);switch(this._ledgerId[0]){case 0:return n$b[0];case 1:return n$b[1];case 2:return n$b[2];case 3:return n$b[3];default:return n$n(this._ledgerId)}}static fromBytes(t){return new e(t)}toBytes(){return this._ledgerId}isMainnet(){return this.toString()==n$b[0]}isTestnet(){return this.toString()==n$b[1]}isPreviewnet(){return this.toString()==n$b[2]}isLocalNode(){return this.toString()==n$b[3]}};const n$b=["mainnet","testnet","previewnet","local-node"];r$h.MAINNET=new r$h(new Uint8Array([0])),r$h.TESTNET=new r$h(new Uint8Array([1])),r$h.PREVIEWNET=new r$h(new Uint8Array([2])),r$h.LOCAL_NODE=new r$h(new Uint8Array([3]));let n$a=class e{constructor(e){this.declineStakingReward=e.declineStakingReward,this.stakePeriodStart=e.stakePeriodStart,this.pendingReward=e.pendingReward,this.stakedToMe=e.stakedToMe,this.stakedAccountId=e.stakedAccountId,this.stakedNodeId=e.stakedNodeId,Object.freeze(this)}static _fromProtobuf(t){return new e({declineStakingReward:1==t.declineReward,stakePeriodStart:null!=t.stakePeriodStart?s$j._fromProtobuf(t.stakePeriodStart):null,pendingReward:null!=t.pendingReward?e$o.fromTinybars(t.pendingReward):null,stakedToMe:null!=t.stakedToMe?e$o.fromTinybars(t.stakedToMe):null,stakedAccountId:null!=t.stakedAccountId?f$2._fromProtobuf(t.stakedAccountId):null,stakedNodeId:null!=t.stakedNodeId?t.stakedNodeId:null})}_toProtobuf(){return{declineReward:this.declineStakingReward,stakePeriodStart:null!=this.stakePeriodStart?this.stakePeriodStart._toProtobuf():null,pendingReward:null!=this.pendingReward?this.pendingReward.toTinybars():null,stakedToMe:null!=this.stakedToMe?this.stakedToMe.toTinybars():null,stakedAccountId:null!=this.stakedAccountId?this.stakedAccountId._toProtobuf():null,stakedNodeId:this.stakedNodeId}}static fromBytes(t){return e._fromProtobuf(libExports.proto.StakingInfo.decode(t))}toBytes(){return libExports.proto.StakingInfo.encode(this._toProtobuf()).finish()}toString(){return JSON.stringify(this.toJSON())}toJSON(){return{declineStakingReward:this.declineStakingReward,stakePeriodStart:null!=this.stakePeriodStart?this.stakePeriodStart.toString():null,pendingReward:null!=this.pendingReward?this.pendingReward.toString():null,stakedToMe:null!=this.stakedToMe?this.stakedToMe.toString():null,stakedAccountId:null!=this.stakedAccountId?this.stakedAccountId.toString():null,stakedNodeId:null!=this.stakedNodeId?this.stakedNodeId.toString():null}}},s$c=class e{constructor(e){this.accountId=e.accountId,this.hash=e.hash,this.keys=e.keys,this.duration=e.duration,Object.freeze(this)}static _fromProtobuf(t){const r=t;return new e({accountId:f$2._fromProtobuf(r.accountId),hash:null!=r.hash?r.hash:new Uint8Array,keys:null!=r.keys?s$i.__fromProtobufKeyList(r.keys):new s$i,duration:s$d._fromProtobuf(r.duration)})}_toProtobuf(){return{accountId:this.accountId._toProtobuf(),hash:this.hash,keys:this.keys._toProtobufKey().keyList,duration:this.duration._toProtobuf()}}},s$b=class e{constructor(e){this.tokenId=e.tokenId,this.symbol=e.symbol,this.balance=e.balance,this.isKycGranted=e.isKycGranted,this.isFrozen=e.isFrozen,this.automaticAssociation=e.automaticAssociation,Object.freeze(this)}static _fromProtobuf(t){const r=u$b._fromProtobuf(t.tokenId),n=null==t.kycStatus||0===t.kycStatus?null:1===t.kycStatus,o=null==t.freezeStatus||0===t.freezeStatus?null:1===t.freezeStatus;return new e({tokenId:r,symbol:t.symbol,balance:null!=t.balance?t.balance instanceof Long?t.balance:Long.fromValue(t.balance):Long.ZERO,isKycGranted:n,isFrozen:o,automaticAssociation:null!=t.automaticAssociation?t.automaticAssociation:null})}_toProtobuf(){return{tokenId:this.tokenId._toProtobuf(),symbol:this.symbol,balance:this.balance,kycStatus:null==this.isKycGranted?0:this.isKycGranted?1:2,freezeStatus:null==this.isFrozen?0:this.isFrozen?1:2,automaticAssociation:this.automaticAssociation}}},s$a=class e extends t$q{constructor(){super(e=>u$b.fromString(e))}static _fromProtobuf(t){const r=new e;for(const e of t){const t=u$b._fromProtobuf(e.tokenId);r._set(t,s$b._fromProtobuf(e))}return r}_toProtobuf(){const e=[];for(const[t,r]of this)e.push(r._toProtobuf());return e}},d$7=class e{constructor(e){this.accountId=e.accountId,this.contractAccountId=e.contractAccountId,this.isDeleted=e.isDeleted,this.proxyAccountId=e.proxyAccountId,this.proxyReceived=e.proxyReceived,this.key=e.key,this.balance=e.balance,this.sendRecordThreshold=e.sendRecordThreshold,this.receiveRecordThreshold=e.receiveRecordThreshold,this.isReceiverSignatureRequired=e.isReceiverSignatureRequired,this.expirationTime=e.expirationTime,this.autoRenewPeriod=e.autoRenewPeriod,this.liveHashes=e.liveHashes,this.tokenRelationships=e.tokenRelationships,this.accountMemo=e.accountMemo,this.ownedNfts=e.ownedNfts,this.maxAutomaticTokenAssociations=e.maxAutomaticTokenAssociations,this.aliasKey=e.aliasKey,this.ledgerId=e.ledgerId,this.hbarAllowances=e.hbarAllowances,this.tokenAllowances=e.tokenAllowances,this.nftAllowances=e.nftAllowances,this.ethereumNonce=e.ethereumNonce,this.stakingInfo=e.stakingInfo,Object.freeze(this)}static _fromProtobuf(t){let r=null!=t.alias&&t.alias.length>0?t$r._fromProtobufKey(libExports.proto.Key.decode(t.alias)):null;r instanceof i$f||(r=null);const n=f$2._fromProtobuf(t.accountID);return new e({accountId:n,contractAccountId:null!=t.contractAccountID?t.contractAccountID:null,isDeleted:null!=t.deleted&&t.deleted,key:t$r._fromProtobufKey(t.key),balance:e$o.fromTinybars(null!=t.balance?t.balance:0),sendRecordThreshold:e$o.fromTinybars(null!=t.generateSendRecordThreshold?t.generateSendRecordThreshold:0),receiveRecordThreshold:e$o.fromTinybars(null!=t.generateReceiveRecordThreshold?t.generateReceiveRecordThreshold:0),isReceiverSignatureRequired:null!=t.receiverSigRequired&&t.receiverSigRequired,expirationTime:s$j._fromProtobuf(t.expirationTime),autoRenewPeriod:null!=t.autoRenewPeriod?new s$d(t.autoRenewPeriod.seconds):new s$d(0),proxyAccountId:null!=t.proxyAccountID&&0!==Long.fromValue(t.proxyAccountID.shardNum).toInt()&&0!==Long.fromValue(t.proxyAccountID.realmNum).toInt()&&0!==Long.fromValue(t.proxyAccountID.accountNum).toInt()?f$2._fromProtobuf(t.proxyAccountID):null,proxyReceived:e$o.fromTinybars(null!=t.proxyReceived?t.proxyReceived:0),liveHashes:(null!=t.liveHashes?t.liveHashes:[]).map(e=>s$c._fromProtobuf(e)),tokenRelationships:s$a._fromProtobuf(null!=t.tokenRelationships?t.tokenRelationships:[]),accountMemo:null!=t.memo?t.memo:"",ownedNfts:t.ownedNfts?t.ownedNfts:Long.ZERO,maxAutomaticTokenAssociations:t.maxAutomaticTokenAssociations?Long.fromNumber(t.maxAutomaticTokenAssociations):Long.ZERO,aliasKey:r,ledgerId:null!=t.ledgerId?r$h.fromBytes(t.ledgerId):null,hbarAllowances:[],tokenAllowances:[],nftAllowances:[],ethereumNonce:null!=t.ethereumNonce?t.ethereumNonce:null,stakingInfo:null!=t.stakingInfo?n$a._fromProtobuf(t.stakingInfo):null})}_toProtobuf(){return{accountID:this.accountId._toProtobuf(),contractAccountID:this.contractAccountId,deleted:this.isDeleted,proxyAccountID:null!=this.proxyAccountId?this.proxyAccountId._toProtobuf():null,proxyReceived:this.proxyReceived.toTinybars(),key:this.key._toProtobufKey(),balance:this.balance.toTinybars(),generateSendRecordThreshold:this.sendRecordThreshold.toTinybars(),generateReceiveRecordThreshold:this.receiveRecordThreshold.toTinybars(),receiverSigRequired:this.isReceiverSignatureRequired,expirationTime:this.expirationTime._toProtobuf(),autoRenewPeriod:this.autoRenewPeriod._toProtobuf(),liveHashes:this.liveHashes.map(e=>e._toProtobuf()),tokenRelationships:null!=this.tokenRelationships?this.tokenRelationships._toProtobuf():null,memo:this.accountMemo,ownedNfts:this.ownedNfts,maxAutomaticTokenAssociations:this.maxAutomaticTokenAssociations.toInt(),alias:null!=this.aliasKey?libExports.proto.Key.encode(this.aliasKey._toProtobufKey()).finish():null,ledgerId:null!=this.ledgerId?this.ledgerId.toBytes():null,ethereumNonce:this.ethereumNonce,stakingInfo:null!=this.stakingInfo?this.stakingInfo._toProtobuf():null}}static fromBytes(t){return e._fromProtobuf(libExports.proto.CryptoGetInfoResponse.AccountInfo.decode(t))}toBytes(){return libExports.proto.CryptoGetInfoResponse.AccountInfo.encode(this._toProtobuf()).finish()}toString(){return JSON.stringify(this.toJSON())}toJSON(){return{balance:this.balance.toString(),accountId:this.accountId.toString(),contractAccountId:this.contractAccountId,isDeleted:this.isDeleted,proxyAccountId:null!=this.proxyAccountId?this.proxyAccountId.toString():null,proxyReceived:this.proxyReceived.toString(),key:null!=this.key?this.key.toString():null,sendRecordThreshold:this.sendRecordThreshold.toString(),receiveRecordThreshold:this.receiveRecordThreshold.toString(),isReceiverSignatureRequired:this.isReceiverSignatureRequired,expirationTime:this.expirationTime.toString(),autoRenewPeriod:this.autoRenewPeriod.toString(),accountMemo:this.accountMemo,ownedNfts:this.ownedNfts.toString(),maxAutomaticTokenAssociations:this.maxAutomaticTokenAssociations.toString(),aliasKey:null!=this.aliasKey?this.aliasKey.toString():null,ledgerId:null!=this.ledgerId?this.ledgerId.toString():null,ethereumNonce:null!=this.ethereumNonce?this.ethereumNonce.toString():null,stakingInfo:null!=this.stakingInfo?this.stakingInfo.toJSON():null}}},c$4=class e extends h$3{constructor(e={}){super(),this._accountId=null,null!=e.accountId&&this.setAccountId(e.accountId)}static _fromProtobuf(t){const r=t.cryptoGetInfo;return new e({accountId:null!=r.accountID?f$2._fromProtobuf(r.accountID):void 0})}get accountId(){return this._accountId}setAccountId(e){return this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._accountId&&this._accountId.validateChecksum(e)}_execute(e,t){return e.crypto.getAccountInfo(t)}async getCost(e){return super.getCost(e)}_mapResponseHeader(e){return e.cryptoGetInfo.header}_mapResponse(e,t,r){const n=e.cryptoGetInfo;return Promise.resolve(d$7._fromProtobuf(n.accountInfo))}_onMakeRequest(e){return{cryptoGetInfo:{header:e,accountID:null!=this._accountId?this._accountId._toProtobuf():null}}}_getLogId(){return`AccountInfoQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("cryptoGetInfo",c$4._fromProtobuf);let e$e=class e extends h$3{constructor(e={}){super(),this._accountId=null,null!=e.accountId&&this.setAccountId(e.accountId)}static _fromProtobuf(t){const r=t.cryptoGetAccountRecords;return new e({accountId:null!=r.accountID?f$2._fromProtobuf(r.accountID):void 0})}get accountId(){return this._accountId}setAccountId(e){return this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._accountId&&this._accountId.validateChecksum(e)}_execute(e,t){return e.crypto.getAccountRecords(t)}_mapResponseHeader(e){return e.cryptoGetAccountRecords.header}_mapResponse(e,t,r){const n=e.cryptoGetAccountRecords.records;return Promise.resolve(n.map(e=>b$1._fromProtobuf({transactionRecord:e})))}_onMakeRequest(e){return{cryptoGetAccountRecords:{header:e,accountID:null!=this._accountId?this._accountId._toProtobuf():null}}}_getLogId(){return`AccountRecordsQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("cryptoGetAccountRecords",e$e._fromProtobuf);let s$9=class e extends P{constructor(e={}){super(),this._accountId=null,this._key=null,this._receiverSignatureRequired=null,this._proxyAccountId=null,this._autoRenewPeriod=null,this._expirationTime=null,this._accountMemo=null,this._maxAutomaticTokenAssociations=null,this._aliasKey=null,this._stakedAccountId=null,this._stakedNodeId=null,this._declineStakingReward=null,null!=e.accountId&&this.setAccountId(e.accountId),null!=e.key&&this.setKey(e.key),null!=e.receiverSignatureRequired&&this.setReceiverSignatureRequired(e.receiverSignatureRequired),null!=e.proxyAccountId&&this.setProxyAccountId(e.proxyAccountId),null!=e.autoRenewPeriod&&this.setAutoRenewPeriod(e.autoRenewPeriod),null!=e.expirationTime&&this.setExpirationTime(e.expirationTime),null!=e.accountMemo&&this.setAccountMemo(e.accountMemo),null!=e.maxAutomaticTokenAssociations&&this.setMaxAutomaticTokenAssociations(e.maxAutomaticTokenAssociations),null!=e.stakedAccountId&&this.setStakedAccountId(e.stakedAccountId),null!=e.stakedNodeId&&this.setStakedNodeId(e.stakedNodeId),null!=e.declineStakingReward&&this.setDeclineStakingReward(e.declineStakingReward)}static _fromProtobuf(t,r,n,o,i){const s=i[0].cryptoUpdateAccount;return P._fromProtobufTransactions(new e({accountId:null!=s.accountIDToUpdate?f$2._fromProtobuf(s.accountIDToUpdate):void 0,key:null!=s.key?t$r._fromProtobufKey(s.key):void 0,receiverSignatureRequired:null!=s.receiverSigRequiredWrapper&&Object.hasOwn(s.receiverSigRequiredWrapper,"value")?s.receiverSigRequiredWrapper.value:void 0,proxyAccountId:null!=s.proxyAccountID?f$2._fromProtobuf(s.proxyAccountID):void 0,autoRenewPeriod:null!=s.autoRenewPeriod&&null!=s.autoRenewPeriod.seconds?s.autoRenewPeriod.seconds:void 0,expirationTime:null!=s.expirationTime?s$j._fromProtobuf(s.expirationTime):void 0,accountMemo:null!=s.memo&&Object.hasOwn(s.memo,"value")?s.memo.value:void 0,maxAutomaticTokenAssociations:null!=s.maxAutomaticTokenAssociations&&null!=s.maxAutomaticTokenAssociations.value&&Object.hasOwn(s.maxAutomaticTokenAssociations,"value")?Long.fromNumber(s.maxAutomaticTokenAssociations.value):void 0,stakedAccountId:null!=s.stakedAccountId?f$2._fromProtobuf(s.stakedAccountId):void 0,stakedNodeId:null!=s.stakedNodeId?s.stakedNodeId:void 0,declineStakingReward:null!=s.declineReward&&Object.hasOwn(s.declineReward,"value")?s.declineReward.value:void 0}),t,r,n,o,i)}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}get key(){return this._key}setKey(e){return this._requireNotFrozen(),this._key=e,this}get receiverSignatureRequired(){return this._receiverSignatureRequired}setReceiverSignatureRequired(e){return this._requireNotFrozen(),this._receiverSignatureRequired=e,this}get proxyAccountId(){return this._proxyAccountId}setProxyAccountId(e){return this._requireNotFrozen(),this._proxyAccountId=e,this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof s$d?e:new s$d(e),this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof Date?s$j.fromDate(e):e,this}get accountMemo(){return this._accountMemo}setAccountMemo(e){return this._requireNotFrozen(),this._accountMemo=e,this}clearAccountMemo(){return this._requireNotFrozen(),this._accountMemo=null,this}get maxAutomaticTokenAssociations(){return this._maxAutomaticTokenAssociations}setMaxAutomaticTokenAssociations(e){return this._requireNotFrozen(),this._maxAutomaticTokenAssociations="number"==typeof e?Long.fromNumber(e):e,this}get aliasKey(){return null}setAliasKey(e){return this}get stakedAccountId(){return this._stakedAccountId}setStakedAccountId(e){return this._requireNotFrozen(),this._stakedAccountId="string"==typeof e?f$2.fromString(e):e,this}clearStakedAccountId(){return this._requireNotFrozen(),this._stakedAccountId=new f$2(0,0,0),this}get stakedNodeId(){return this._stakedNodeId}setStakedNodeId(e){return this._requireNotFrozen(),this._stakedNodeId=Long.fromValue(e),this}clearStakedNodeId(){return this._requireNotFrozen(),this._stakedNodeId=Long.fromNumber(-1),this}get declineStakingRewards(){return this._declineStakingReward}setDeclineStakingReward(e){return this._requireNotFrozen(),this._declineStakingReward=e,this}_validateChecksums(e){null!=this._accountId&&this._accountId.validateChecksum(e),null!=this._proxyAccountId&&this._proxyAccountId.validateChecksum(e)}_execute(e,t){return e.crypto.updateAccount(t)}_getTransactionDataCase(){return"cryptoUpdateAccount"}_makeTransactionData(){return{accountIDToUpdate:null!=this._accountId?this._accountId._toProtobuf():null,key:null!=this._key?this._key._toProtobufKey():null,expirationTime:null!=this._expirationTime?this._expirationTime._toProtobuf():null,proxyAccountID:null!=this._proxyAccountId?this._proxyAccountId._toProtobuf():null,autoRenewPeriod:null!=this._autoRenewPeriod?this._autoRenewPeriod._toProtobuf():null,receiverSigRequiredWrapper:null==this._receiverSignatureRequired?null:{value:this._receiverSignatureRequired},memo:null!=this._accountMemo?{value:this._accountMemo}:null,maxAutomaticTokenAssociations:null!=this._maxAutomaticTokenAssociations?{value:this._maxAutomaticTokenAssociations.toInt()}:null,stakedAccountId:null!=this.stakedAccountId?this.stakedAccountId._toProtobuf():null,stakedNodeId:this.stakedNodeId,declineReward:null!=this.declineStakingRewards?{value:this.declineStakingRewards}:null}}_getLogId(){return`AccountUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("cryptoUpdateAccount",s$9._fromProtobuf);let t$9=class{constructor(e={}){this._left=null,null!=e.left&&this.setLeft(e.left),this._right=null,null!=e.right&&this.setRight(e.right)}get left(){return this._left}setLeft(e){return this._left=e,this}get right(){return this._right}setRight(e){return this._right=e,this}toString(){return null!=this._left&&null!=this._right?`${this._left.toString()}.${this._right.toString()}`:""}},s$8=class e{constructor(e={}){this._network=null,null!=e.network&&this.setNetwork(e.network),this._host=null,null!=e.host&&this.setHost(e.host)}get newtork(){return this._network}setNetwork(e){return this._network=e,this}get host(){return this._host}setHost(e){return this._host=e,this}static _fromProtobuf(t){return new e({network:(new t$9).setLeft(t[0]).setRight(t[1]),host:(new t$9).setLeft(t[2]).setRight(t[3])})}_toProtobuf(){return Uint8Array.of(null!=this._network&&null!=this._network._left?this._network._left:0,null!=this._network&&null!=this._network.right?this._network.right:0,null!=this._host&&null!=this._host.left?this._host.left:0,null!=this._host&&null!=this._host.right?this._host.right:0)}toString(){return null!=this._network&&null!=this._host?`${this._network.toString()}.${this._host.toString()}`:""}},s$7=class e{constructor(e={}){this._address=null,null!=e.address&&this.setAddress(e.address),this._port=null,null!=e.port&&this.setPort(e.port)}get address(){return this.address}setAddress(e){return this._address=e,this}get port(){return this._port}setPort(e){return this._port=e,this}static _fromProtobuf(t){return new e({address:null!=t.ipAddressV4?s$8._fromProtobuf(t.ipAddressV4):void 0,port:null!=t.port?t.port:void 0})}_toProtobuf(){return{ipAddressV4:null!=this._address?this._address._toProtobuf():null,port:this._port}}toString(){return`${null!=this._address?this._address.toString():""}:${null!=this._port?this._port.toString():""}`}toJSON(){return{address:null!=this._address?this._address.toString():null,port:null!=this._port?this._port.toString():null}}},i$9=class e{constructor(e={}){this._publicKey=null,null!=e.publicKey&&this.setPublicKey(e.publicKey),this._nodeId=null,null!=e.nodeId&&this.setNodeId(e.nodeId),this._accountId=null,null!=e.accountId&&this.setAccountId(e.accountId),this._certHash=null,null!=e.certHash&&this.setCertHash(e.certHash),this._addresses=[],null!=e.addresses&&this.setAddresses(e.addresses),this._description=null,null!=e.description&&this.setDescription(e.description),this._stake=null,null!=e.stake&&this.setStake(e.stake)}get publicKey(){return this._publicKey}setPublicKey(e){return this._publicKey=e,this}get nodeId(){return this._nodeId}setNodeId(e){return this._nodeId=e,this}get accountId(){return this._accountId}setAccountId(e){return this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}get certHash(){return this._certHash}setCertHash(e){return this._certHash=e,this}get addresses(){return this._addresses}setAddresses(e){return this._addresses=e,this}get description(){return this._description}setDescription(e){return this._description=e,this}get stake(){return this._stake}setStake(e){return this._stake=e,this}static _fromProtobuf(t){return new e({publicKey:null!=t.RSA_PubKey?t.RSA_PubKey:void 0,nodeId:null!=t.nodeId?t.nodeId:void 0,accountId:null!=t.nodeAccountId?f$2._fromProtobuf(t.nodeAccountId):void 0,certHash:null!=t.nodeCertHash?t.nodeCertHash:void 0,addresses:null!=t.serviceEndpoint?t.serviceEndpoint.map(e=>s$7._fromProtobuf(e)):void 0,description:null!=t.description?t.description:void 0,stake:null!=t.stake?t.stake:void 0})}_toProtobuf(){return{RSA_PubKey:this._publicKey,nodeId:this._nodeId,nodeAccountId:null!=this._accountId?this._accountId._toProtobuf():null,nodeCertHash:this._certHash,serviceEndpoint:this._addresses.map(e=>e._toProtobuf()),description:this._description,stake:this._stake}}toString(){return JSON.stringify(this.toJSON())}toJSON(){return{publicKey:this._publicKey,nodeId:null!=this._nodeId?this._nodeId.toString():null,accountId:null!=this._accountId?this._accountId.toString():null,certHash:null!=this._certHash?e$k(this._certHash):null,addresses:this._addresses.map(e=>e.toJSON()),description:this._description,stake:null!=this._stake?this._stake.toString():null}}},o$e=class e{constructor(e={}){this._nodeAddresses=[],null!=e.nodeAddresses&&this.setNodeAddresses(e.nodeAddresses)}get nodeAddresses(){return this._nodeAddresses}setNodeAddresses(e){return this._nodeAddresses=e,this}static fromBytes(t){return e._fromProtobuf(libExports.proto.NodeAddressBook.decode(t))}static _fromProtobuf(t){return new e({nodeAddresses:null!=t.nodeAddress?t.nodeAddress.map(e=>i$9._fromProtobuf(e)):void 0})}_toProtobuf(){return{nodeAddress:this._nodeAddresses.map(e=>e._toProtobuf())}}toString(){return JSON.stringify(this.toJSON())}toJSON(){return{nodeAddresses:this._nodeAddresses.map(e=>e.toJSON())}}toBytes(){return libExports.proto.NodeAddressBook.encode(this._toProtobuf()).finish()}},d$6=class extends h$3{constructor(e={}){super(),this._fileId=null,null!=e.fileId&&this.setFileId(e.fileId),this._limit=null,null!=e.limit&&this.setLimit(e.limit),this._retryHandler=e=>{if(null!=e){if(e instanceof Error)return!0;switch(e.code){case 13:return a$7.test(e.details.toString());case 5:case 8:case 14:case 17:return!0;default:return!1}}return!1},this._addresses=[],this._attempt=0}get fileId(){return this._fileId}setFileId(e){return this._fileId="string"==typeof e?u$c.fromString(e):e.clone(),this}get limit(){return this._limit}setLimit(e){return this._limit=e,this}setMaxAttempts(e){return this._maxAttempts=e,this}setMaxBackoff(e){return this._maxBackoff=e,this}execute(e,t){if(0===e._network._network.size&&!e._timer)throw new Error("The client's network update period is required. Please set it using the setNetworkUpdatePeriod method.");return new Promise((r,n)=>{this._makeServerStreamRequest(e,r,n,t)})}_makeServerStreamRequest(e,t,r,n){const o=libExports.com.hedera.mirror.api.proto.AddressBookQuery.encode({fileId:null!=this._fileId?this._fileId._toProtobuf():null,limit:this._limit}).finish();e._mirrorNetwork.getNextMirrorNode().getChannel().makeServerStreamRequest("NetworkService","getNodes",o,e=>{this._addresses.push(i$9._fromProtobuf(libExports.proto.NodeAddress.decode(e))),null!=this._limit&&this._limit>0&&(this._limit=this._limit-1)},o=>{const i=o instanceof Error?o.message:o.details;if(this._attempt<this._maxAttempts&&!e.isClientShutDown&&this._retryHandler(o)){const o=Math.min(250*2**this._attempt,this._maxBackoff);this._attempt>=this._maxAttempts&&console.warn(`Error getting nodes from mirror for file ${null!=this._fileId?this._fileId.toString():"UNKNOWN"} during attempt ${this._attempt}. Waiting ${o} ms before next attempt: ${i}`),this._logger&&this._logger.debug(`Error getting nodes from mirror for file ${null!=this._fileId?this._fileId.toString():"UNKNOWN"} during attempt ${this._attempt}. Waiting ${o} ms before next attempt: ${i}`),this._attempt+=1,setTimeout(()=>{this._makeServerStreamRequest(e,t,r,n)},o)}else r(new Error("failed to query address book"))},()=>{t(new o$e({nodeAddresses:this._addresses}))})}};t$s.setAddressBookQueryConstructor(()=>new d$6);let e$d=class e{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case e.UnknownFreezeType:return"UNKNOWN_FREEZE_TYPE";case e.FreezeOnly:return"FREEZE_ONLY";case e.PrepareUpgrade:return"PREPARE_UPGRADE";case e.FreezeUpgrade:return"FREEZE_UPGRADE";case e.FreezeAbort:return"FREEZE_ABORT";case e.TelemetryUpgrade:return"TELEMETRY_UPGRADE";default:return`UNKNOWN (${this._code})`}}static _fromCode(t){switch(t){case 0:return e.UnknownFreezeType;case 1:return e.FreezeOnly;case 2:return e.PrepareUpgrade;case 3:return e.FreezeUpgrade;case 4:return e.FreezeAbort;case 5:return e.TelemetryUpgrade;default:throw new Error(`(BUG) Status.fromCode() does not handle code: ${t}`)}}valueOf(){return this._code}};e$d.UnknownFreezeType=new e$d(0),e$d.FreezeOnly=new e$d(1),e$d.PrepareUpgrade=new e$d(2),e$d.FreezeUpgrade=new e$d(3),e$d.FreezeAbort=new e$d(4),e$d.TelemetryUpgrade=new e$d(5);let l$9=class e extends P{constructor(e={}){super(),this._startTime=null,this._startTimestamp=null,this._endTime=null,this._fileId=null,this._fileHash=null,this._freezeType=null,null!=e.startTime&&this.setStartTime(e.startTime.hour,e.startTime.minute),null!=e.endTime&&this.setEndTime(e.endTime.hour,e.endTime.minute),null!=e.startTimestamp&&this.setStartTimestamp(e.startTimestamp),null!=e.updateFileId&&this.setUpdateFileId(e.updateFileId),null!=e.fileId&&this.setFileId(e.fileId),null!=e.fileHash&&this.setFileHash(e.fileHash),null!=e.freezeType&&this.setFreezeType(e.freezeType)}static _fromProtobuf(t,r,n,o,i){const s=i[0].freeze;return P._fromProtobufTransactions(new e({startTime:null!=s.startHour&&null!=s.startMin?{hour:s.startHour,minute:s.startMin}:void 0,endTime:null!=s.endHour&&null!=s.endMin?{hour:s.endHour,minute:s.endMin}:void 0,startTimestamp:null!=s.startTime?s$j._fromProtobuf(s.startTime):void 0,updateFileId:null!=s.updateFile?u$c._fromProtobuf(s.updateFile):void 0,fileHash:null!=s.fileHash?s.fileHash:void 0,freezeType:null!=s.freezeType?e$d._fromCode(s.freezeType):void 0}),t,r,n,o,i)}get startTime(){return null}setStartTime(e,t){if(this._requireNotFrozen(),"string"==typeof e){const t=e.split(":");this._startTime={hour:Number(t[0]),minute:Number(t[1])}}else this._startTime={hour:e,minute:t};return this}get startTimestamp(){return this._startTimestamp}setStartTimestamp(e){return this._requireNotFrozen(),this._startTimestamp=e,this}get endTime(){return console.warn("`FreezeTransaction.endTime` is deprecated"),this._endTime}setEndTime(e,t){if(console.warn("`FreezeTransaction.endTime` is deprecated"),this._requireNotFrozen(),"string"==typeof e){const t=e.split(":");this._endTime={hour:Number(t[0]),minute:Number(t[1])}}else this._endTime={hour:e,minute:t};return this}get updateFileId(){return this.fileId}setUpdateFileId(e){return this.setFileId(e)}get fileId(){return this._fileId}setFileId(e){return this._requireNotFrozen(),this._fileId=e,this}get fileHash(){return this._fileHash}setFileHash(e){return this._requireNotFrozen(),this._fileHash="string"==typeof e?r$p(e):e,this}get freezeType(){return this._freezeType}setFreezeType(e){return this._requireNotFrozen(),this._freezeType=e,this}_getTransactionDataCase(){return"freeze"}_makeTransactionData(){return{startTime:null!=this._startTimestamp?this._startTimestamp._toProtobuf():null,updateFile:null!=this._fileId?this._fileId._toProtobuf():null,fileHash:this._fileHash,freezeType:null!=this._freezeType?this._freezeType.valueOf():null}}_getLogId(){return`FreezeTransaction:${this._transactionIds.current.validStart.toString()}`}_execute(e,t){return e.freeze.freeze(t)}};B.set("freeze",l$9._fromProtobuf);let o$d=class e extends P{constructor(e){super(),this._batchTransactions=e?.transactions||[]}setInnerTransactions(e){return e.forEach(e=>this._validateTransaction(e)),this._batchTransactions=e,this}addInnerTransaction(e){return this._validateTransaction(e),this._requireNotFrozen(),this._batchTransactions.push(e),this}get innerTransactions(){return this._batchTransactions}get innerTransactionIds(){return Array.isArray(this._batchTransactions)?this._batchTransactions.map(e=>e.transactionId):[]}_makeTransactionData(){return Array.isArray(this._batchTransactions)?{transactions:this._batchTransactions.map(e=>libExports.proto.SignedTransaction.encode(e._signedTransactions.get(0)).finish())}:{transactions:[]}}static _fromProtobuf(t,r,n,o,i){const s=i[0],a=s.atomicBatch?.transactions,c=a?.map(e=>libExports.proto.SignedTransaction.decode(e)),u=c?.map(e=>{const t=libExports.proto.TransactionBody.decode(e.bodyBytes),r=t.data;if(!r)throw new Error("Transaction type not found");const n=B.get(r);if(!n)throw new Error("fromProtobuf not found");return n([],[e],[],[],[t])});return P._fromProtobufTransactions(new e({transactions:u}),t,r,n,o,i)}_getTransactionDataCase(){return"atomicBatch"}_getLogId(){return`AtomicBatch:${this._transactionIds.current.validStart.toString()}`}_execute(e,t){return e.util.atomicBatch(t)}_validateTransaction(t){if(t instanceof e||t instanceof l$9)throw new Error("Transaction is not allowed to be added to a batch");if(!t.isFrozen())throw new Error("Transaction must be frozen before being added to a batch");if(!t.batchKey)throw new Error("Transaction must have a batch key")}};B.set("atomicBatch",o$d._fromProtobuf);let o$c=class e extends h$3{constructor(e={}){super(),this._contractId=null,null!=e.contractId&&this.setContractId(e.contractId)}static _fromProtobuf(t){const r=t.contractGetBytecode;return new e({contractId:null!=r.contractID?v._fromProtobuf(r.contractID):void 0})}get contractId(){return this._contractId}setContractId(e){return this._contractId="string"==typeof e?v.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._contractId&&this._contractId.validateChecksum(e)}_execute(e,t){return e.smartContract.contractGetBytecode(t)}_mapResponseHeader(e){return e.contractGetBytecodeResponse.header}_mapResponse(e){const t=e.contractGetBytecodeResponse;return Promise.resolve(null!=t.bytecode?t.bytecode:new Uint8Array)}_onMakeRequest(e){return{contractGetBytecode:{header:e,contractID:null!=this._contractId?this._contractId._toProtobuf():null}}}_getLogId(){return`ContractByteCodeQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("contractGetBytecode",o$c._fromProtobuf);const t$8="0123456789abcdef".split(""),r$g=[1,256,65536,16777216],e$c=[0,8,16,24],o$b=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],s$6=e=>{var t,r,n,o,i,s,a,c,u,l,d,h,f,p,m,y,g,b,_,w,v,I,k,T,A,S,E,P,O,R,C,$,N,M,x,B,D,L,F,j,U,q,K,H,G,z,V,Z,W,J,Y,Q,X,ee,te,re,ne,oe,ie,se,ae,ce,ue;for(n=0;n<48;n+=2)o=e[0]^e[10]^e[20]^e[30]^e[40],i=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],c=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],l=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(f=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=o^(c<<1|u>>>31),r=i^(u<<1|c>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(l<<1|d>>>31),r=a^(d<<1|l>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=c^(h<<1|f>>>31),r=u^(f<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=l^(o<<1|i>>>31),r=d^(i<<1|o>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,p=e[0],m=e[1],z=e[11]<<4|e[10]>>>28,V=e[10]<<4|e[11]>>>28,P=e[20]<<3|e[21]>>>29,O=e[21]<<3|e[20]>>>29,se=e[31]<<9|e[30]>>>23,ae=e[30]<<9|e[31]>>>23,q=e[40]<<18|e[41]>>>14,K=e[41]<<18|e[40]>>>14,M=e[2]<<1|e[3]>>>31,x=e[3]<<1|e[2]>>>31,y=e[13]<<12|e[12]>>>20,g=e[12]<<12|e[13]>>>20,Z=e[22]<<10|e[23]>>>22,W=e[23]<<10|e[22]>>>22,R=e[33]<<13|e[32]>>>19,C=e[32]<<13|e[33]>>>19,ce=e[42]<<2|e[43]>>>30,ue=e[43]<<2|e[42]>>>30,ee=e[5]<<30|e[4]>>>2,te=e[4]<<30|e[5]>>>2,B=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,b=e[25]<<11|e[24]>>>21,_=e[24]<<11|e[25]>>>21,J=e[34]<<15|e[35]>>>17,Y=e[35]<<15|e[34]>>>17,$=e[45]<<29|e[44]>>>3,N=e[44]<<29|e[45]>>>3,T=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,re=e[17]<<23|e[16]>>>9,ne=e[16]<<23|e[17]>>>9,L=e[26]<<25|e[27]>>>7,F=e[27]<<25|e[26]>>>7,w=e[36]<<21|e[37]>>>11,v=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,X=e[46]<<24|e[47]>>>8,H=e[8]<<27|e[9]>>>5,G=e[9]<<27|e[8]>>>5,S=e[18]<<20|e[19]>>>12,E=e[19]<<20|e[18]>>>12,oe=e[29]<<7|e[28]>>>25,ie=e[28]<<7|e[29]>>>25,j=e[38]<<8|e[39]>>>24,U=e[39]<<8|e[38]>>>24,I=e[48]<<14|e[49]>>>18,k=e[49]<<14|e[48]>>>18,e[0]=p^~y&b,e[1]=m^~g&_,e[10]=T^~S&P,e[11]=A^~E&O,e[20]=M^~B&L,e[21]=x^~D&F,e[30]=H^~z&Z,e[31]=G^~V&W,e[40]=ee^~re&oe,e[41]=te^~ne&ie,e[2]=y^~b&w,e[3]=g^~_&v,e[12]=S^~P&R,e[13]=E^~O&C,e[22]=B^~L&j,e[23]=D^~F&U,e[32]=z^~Z&J,e[33]=V^~W&Y,e[42]=re^~oe&se,e[43]=ne^~ie&ae,e[4]=b^~w&I,e[5]=_^~v&k,e[14]=P^~R&$,e[15]=O^~C&N,e[24]=L^~j&q,e[25]=F^~U&K,e[34]=Z^~J&Q,e[35]=W^~Y&X,e[44]=oe^~se&ce,e[45]=ie^~ae&ue,e[6]=w^~I&p,e[7]=v^~k&m,e[16]=R^~$&T,e[17]=C^~N&A,e[26]=j^~q&M,e[27]=U^~K&x,e[36]=J^~Q&H,e[37]=Y^~X&G,e[46]=se^~ce&ee,e[47]=ae^~ue&te,e[8]=I^~p&y,e[9]=k^~m&g,e[18]=$^~T&S,e[19]=N^~A&E,e[28]=q^~M&B,e[29]=K^~x&D,e[38]=Q^~H&z,e[39]=X^~G&V,e[48]=ce^~ee&re,e[49]=ue^~te&ne,e[0]^=o$b[n],e[1]^=o$b[n+1]},l$8=(a$5=256,e=>{var t,r,n;if("0x"===e.slice(0,2)){t=[];for(var o=2,i=e.length;o<i;o+=2)t.push(parseInt(e.slice(o,o+2),16))}else t=e;return((e,t)=>{for(var r,n,o=t.length,i=e.blocks,s=e.blockCount<<2,a=e.blockCount,c=e.outputBlocks,u=e.s,l=0;l<o;){if(e.reset)for(e.reset=!1,i[0]=e.block,r=1;r<a+1;++r)i[r]=0;if("string"!=typeof t)for(r=e.start;l<o&&r<s;++l)i[r>>2]|=t[l]<<e$c[3&r++];else for(r=e.start;l<o&&r<s;++l)(n=t.charCodeAt(l))<128?i[r>>2]|=n<<e$c[3&r++]:n<2048?(i[r>>2]|=(192|n>>6)<<e$c[3&r++],i[r>>2]|=(128|63&n)<<e$c[3&r++]):n<55296||n>=57344?(i[r>>2]|=(224|n>>12)<<e$c[3&r++],i[r>>2]|=(128|n>>6&63)<<e$c[3&r++],i[r>>2]|=(128|63&n)<<e$c[3&r++]):(n=65536+((1023&n)<<10|1023&t.charCodeAt(++l)),i[r>>2]|=(240|n>>18)<<e$c[3&r++],i[r>>2]|=(128|n>>12&63)<<e$c[3&r++],i[r>>2]|=(128|n>>6&63)<<e$c[3&r++],i[r>>2]|=(128|63&n)<<e$c[3&r++]);if(e.lastByteIndex=r,r>=s){for(e.start=r-s,e.block=i[a],r=0;r<a;++r)u[r]^=i[r];s$6(u),e.reset=!0}else e.start=r}if(i[(r=e.lastByteIndex)>>2]|=r$g[3&r],e.lastByteIndex===s)for(i[0]=i[a],r=1;r<a+1;++r)i[r]=0;for(i[a-1]|=2147483648,r=0;r<a;++r)u[r]^=i[r];s$6(u);var d,h="",f=0;for(r=0;f<c;){for(r=0;r<a&&f<c;++r,++f)d=u[r],h+=t$8[d>>4&15]+t$8[15&d]+t$8[d>>12&15]+t$8[d>>8&15]+t$8[d>>20&15]+t$8[d>>16&15]+t$8[d>>28&15]+t$8[d>>24&15];f%a==0&&(s$6(u),r=0)}return"0x"+h})({blocks:[],reset:!0,block:0,start:0,blockCount:1600-((r=a$5)<<1)>>5,outputBlocks:r>>5,s:(n=[0,0,0,0,0,0,0,0,0,0],[].concat(n,n,n,n,n))},t)});var a$5;const d$5={uint8:0,int8:1,uint16:2,int16:3,uint24:4,int24:5,uint32:6,int32:7,uint40:8,int40:9,uint48:10,int48:11,uint56:12,int56:13,uint64:14,int64:15,uint72:16,int72:17,uint80:18,int80:19,uint88:20,int88:21,uint96:22,int96:23,uint104:24,int104:25,uint112:26,int112:27,uint120:28,int120:29,uint128:30,int128:31,uint136:32,int136:33,uint144:34,int144:35,uint152:36,int152:37,uint160:38,int160:39,uint168:40,int168:41,uint176:42,int176:43,uint184:44,int184:45,uint192:46,int192:47,uint200:48,int200:49,uint208:50,int208:51,uint216:52,int216:53,uint224:54,int224:55,uint232:56,int232:57,uint240:58,int240:59,uint248:60,int248:61,uint256:62,int256:63,string:64,bool:65,bytes:66,bytes32:67,address:68,func:69};let i$8=class{constructor(e){this.name=null,this._params="",this._paramTypes=[],null!=e&&(this._name=e)}addString(){return this._addParam({ty:d$5.string,array:!1})}addStringArray(){return this._addParam({ty:d$5.string,array:!0})}addBytes(){return this._addParam({ty:d$5.bytes,array:!1})}addBytes32(){return this._addParam({ty:d$5.bytes32,array:!1})}addBytesArray(){return this._addParam({ty:d$5.bytes,array:!0})}addBytes32Array(){return this._addParam({ty:d$5.bytes32,array:!0})}addInt8(){return this._addParam({ty:d$5.int8,array:!1})}addUint8(){return this._addParam({ty:d$5.uint8,array:!1})}addInt16(){return this._addParam({ty:d$5.int16,array:!1})}addUint16(){return this._addParam({ty:d$5.uint16,array:!1})}addInt24(){return this._addParam({ty:d$5.int24,array:!1})}addUint24(){return this._addParam({ty:d$5.uint24,array:!1})}addInt32(){return this._addParam({ty:d$5.int32,array:!1})}addUint32(){return this._addParam({ty:d$5.uint32,array:!1})}addInt40(){return this._addParam({ty:d$5.int40,array:!1})}addUint40(){return this._addParam({ty:d$5.uint40,array:!1})}addInt48(){return this._addParam({ty:d$5.int48,array:!1})}addUint48(){return this._addParam({ty:d$5.uint48,array:!1})}addInt56(){return this._addParam({ty:d$5.int56,array:!1})}addUint56(){return this._addParam({ty:d$5.uint56,array:!1})}addInt64(){return this._addParam({ty:d$5.int64,array:!1})}addUint64(){return this._addParam({ty:d$5.uint64,array:!1})}addInt72(){return this._addParam({ty:d$5.int72,array:!1})}addUint72(){return this._addParam({ty:d$5.uint72,array:!1})}addInt80(){return this._addParam({ty:d$5.int80,array:!1})}addUint80(){return this._addParam({ty:d$5.uint80,array:!1})}addInt88(){return this._addParam({ty:d$5.int88,array:!1})}addUint88(){return this._addParam({ty:d$5.uint88,array:!1})}addInt96(){return this._addParam({ty:d$5.int96,array:!1})}addUint96(){return this._addParam({ty:d$5.uint96,array:!1})}addInt104(){return this._addParam({ty:d$5.int104,array:!1})}addUint104(){return this._addParam({ty:d$5.uint104,array:!1})}addInt112(){return this._addParam({ty:d$5.int112,array:!1})}addUint112(){return this._addParam({ty:d$5.uint112,array:!1})}addInt120(){return this._addParam({ty:d$5.int120,array:!1})}addUint120(){return this._addParam({ty:d$5.uint120,array:!1})}addInt128(){return this._addParam({ty:d$5.int128,array:!1})}addUint128(){return this._addParam({ty:d$5.uint128,array:!1})}addInt136(){return this._addParam({ty:d$5.int136,array:!1})}addUint136(){return this._addParam({ty:d$5.uint136,array:!1})}addInt144(){return this._addParam({ty:d$5.int144,array:!1})}addUint144(){return this._addParam({ty:d$5.uint144,array:!1})}addInt152(){return this._addParam({ty:d$5.int152,array:!1})}addUint152(){return this._addParam({ty:d$5.uint152,array:!1})}addInt160(){return this._addParam({ty:d$5.int160,array:!1})}addUint160(){return this._addParam({ty:d$5.uint160,array:!1})}addInt168(){return this._addParam({ty:d$5.int168,array:!1})}addUint168(){return this._addParam({ty:d$5.uint168,array:!1})}addInt176(){return this._addParam({ty:d$5.int176,array:!1})}addUint176(){return this._addParam({ty:d$5.uint176,array:!1})}addInt184(){return this._addParam({ty:d$5.int184,array:!1})}addUint184(){return this._addParam({ty:d$5.uint184,array:!1})}addInt192(){return this._addParam({ty:d$5.int192,array:!1})}addUint192(){return this._addParam({ty:d$5.uint192,array:!1})}addInt200(){return this._addParam({ty:d$5.int200,array:!1})}addUint200(){return this._addParam({ty:d$5.uint200,array:!1})}addInt208(){return this._addParam({ty:d$5.int208,array:!1})}addUint208(){return this._addParam({ty:d$5.uint208,array:!1})}addInt216(){return this._addParam({ty:d$5.int216,array:!1})}addUint216(){return this._addParam({ty:d$5.uint216,array:!1})}addInt224(){return this._addParam({ty:d$5.int224,array:!1})}addUint224(){return this._addParam({ty:d$5.uint224,array:!1})}addInt232(){return this._addParam({ty:d$5.int232,array:!1})}addUint232(){return this._addParam({ty:d$5.uint232,array:!1})}addInt240(){return this._addParam({ty:d$5.int240,array:!1})}addUint240(){return this._addParam({ty:d$5.uint240,array:!1})}addInt248(){return this._addParam({ty:d$5.int248,array:!1})}addUint248(){return this._addParam({ty:d$5.uint248,array:!1})}addInt256(){return this._addParam({ty:d$5.int256,array:!1})}addUint256(){return this._addParam({ty:d$5.uint256,array:!1})}addInt8Array(){return this._addParam({ty:d$5.int8,array:!0})}addUint8Array(){return this._addParam({ty:d$5.uint8,array:!0})}addInt16Array(){return this._addParam({ty:d$5.int16,array:!0})}addUint16Array(){return this._addParam({ty:d$5.uint16,array:!0})}addInt24Array(){return this._addParam({ty:d$5.int24,array:!0})}addUint24Array(){return this._addParam({ty:d$5.uint24,array:!0})}addInt32Array(){return this._addParam({ty:d$5.int32,array:!0})}addUint32Array(){return this._addParam({ty:d$5.uint32,array:!0})}addInt40Array(){return this._addParam({ty:d$5.int40,array:!0})}addUint40Array(){return this._addParam({ty:d$5.uint40,array:!0})}addInt48Array(){return this._addParam({ty:d$5.int48,array:!0})}addUint48Array(){return this._addParam({ty:d$5.uint48,array:!0})}addInt56Array(){return this._addParam({ty:d$5.int56,array:!0})}addUint56Array(){return this._addParam({ty:d$5.uint56,array:!0})}addInt64Array(){return this._addParam({ty:d$5.int64,array:!0})}addUint64Array(){return this._addParam({ty:d$5.uint64,array:!0})}addInt72Array(){return this._addParam({ty:d$5.int72,array:!0})}addUint72Array(){return this._addParam({ty:d$5.uint72,array:!0})}addInt80Array(){return this._addParam({ty:d$5.int80,array:!0})}addUint80Array(){return this._addParam({ty:d$5.uint80,array:!0})}addInt88Array(){return this._addParam({ty:d$5.int88,array:!0})}addUint88Array(){return this._addParam({ty:d$5.uint88,array:!0})}addInt96Array(){return this._addParam({ty:d$5.int96,array:!0})}addUint96Array(){return this._addParam({ty:d$5.uint96,array:!0})}addInt104Array(){return this._addParam({ty:d$5.int104,array:!0})}addUint104Array(){return this._addParam({ty:d$5.uint104,array:!0})}addInt112Array(){return this._addParam({ty:d$5.int112,array:!0})}addUint112Array(){return this._addParam({ty:d$5.uint112,array:!0})}addInt120Array(){return this._addParam({ty:d$5.int120,array:!0})}addUint120Array(){return this._addParam({ty:d$5.uint120,array:!0})}addInt128Array(){return this._addParam({ty:d$5.int128,array:!0})}addUint128Array(){return this._addParam({ty:d$5.uint128,array:!0})}addInt136Array(){return this._addParam({ty:d$5.int136,array:!0})}addUint136Array(){return this._addParam({ty:d$5.uint136,array:!0})}addInt144Array(){return this._addParam({ty:d$5.int144,array:!0})}addUint144Array(){return this._addParam({ty:d$5.uint144,array:!0})}addInt152Array(){return this._addParam({ty:d$5.int152,array:!0})}addUint152Array(){return this._addParam({ty:d$5.uint152,array:!0})}addInt160Array(){return this._addParam({ty:d$5.int160,array:!0})}addUint160Array(){return this._addParam({ty:d$5.uint160,array:!0})}addInt168Array(){return this._addParam({ty:d$5.int168,array:!0})}addUint168Array(){return this._addParam({ty:d$5.uint168,array:!0})}addInt176Array(){return this._addParam({ty:d$5.int176,array:!0})}addUint176Array(){return this._addParam({ty:d$5.uint176,array:!0})}addInt184Array(){return this._addParam({ty:d$5.int184,array:!0})}addUint184Array(){return this._addParam({ty:d$5.uint184,array:!0})}addInt192Array(){return this._addParam({ty:d$5.int192,array:!0})}addUint192Array(){return this._addParam({ty:d$5.uint192,array:!0})}addInt200Array(){return this._addParam({ty:d$5.int200,array:!0})}addUint200Array(){return this._addParam({ty:d$5.uint200,array:!0})}addInt208Array(){return this._addParam({ty:d$5.int208,array:!0})}addUint208Array(){return this._addParam({ty:d$5.uint208,array:!0})}addInt216Array(){return this._addParam({ty:d$5.int216,array:!0})}addUint216Array(){return this._addParam({ty:d$5.uint216,array:!0})}addInt224Array(){return this._addParam({ty:d$5.int224,array:!0})}addUint224Array(){return this._addParam({ty:d$5.uint224,array:!0})}addInt232Array(){return this._addParam({ty:d$5.int232,array:!0})}addUint232Array(){return this._addParam({ty:d$5.uint232,array:!0})}addInt240Array(){return this._addParam({ty:d$5.int240,array:!0})}addUint240Array(){return this._addParam({ty:d$5.uint240,array:!0})}addInt248Array(){return this._addParam({ty:d$5.int248,array:!0})}addUint248Array(){return this._addParam({ty:d$5.uint248,array:!0})}addInt256Array(){return this._addParam({ty:d$5.int256,array:!0})}addUint256Array(){return this._addParam({ty:d$5.uint256,array:!0})}addBool(){return this._addParam({ty:d$5.bool,array:!1})}addAddress(){return this._addParam({ty:d$5.address,array:!1})}addAddressArray(){return this._addParam({ty:d$5.address,array:!0})}addFunction(){return this._addParam({ty:d$5.func,array:!1})}_addParam(e){return this._paramTypes.length>0&&(this._params+=","),this._params+=y(e),this._paramTypes.push(e),this}_build(e){if(null!=e)this._name=e;else if(null==this._name)throw new Error("`name` required for ContractFunctionSelector");const t=n$n(n$g(this.toString()));return r$p(l$8(`0x${t}`)).slice(0,4)}toString(){return`${null!=this._name?this._name.toString():""}(${this._params})`}};function y(e){let t="";switch(e.ty){case d$5.uint8:t="uint8";break;case d$5.int8:t="int8";break;case d$5.uint16:t="uint16";break;case d$5.int16:t="int16";break;case d$5.uint24:t="uint24";break;case d$5.int24:t="int24";break;case d$5.uint32:t="uint32";break;case d$5.int32:t="int32";break;case d$5.uint40:t="uint40";break;case d$5.int40:t="int40";break;case d$5.uint48:t="uint48";break;case d$5.int48:t="int48";break;case d$5.uint56:t="uint56";break;case d$5.int56:t="int56";break;case d$5.uint64:t="uint64";break;case d$5.int64:t="int64";break;case d$5.uint72:t="uint72";break;case d$5.int72:t="int72";break;case d$5.uint80:t="uint80";break;case d$5.int80:t="int80";break;case d$5.uint88:t="uint88";break;case d$5.int88:t="int88";break;case d$5.uint96:t="uint96";break;case d$5.int96:t="int96";break;case d$5.uint104:t="uint104";break;case d$5.int104:t="int104";break;case d$5.uint112:t="uint112";break;case d$5.int112:t="int112";break;case d$5.uint120:t="uint120";break;case d$5.int120:t="int120";break;case d$5.uint128:t="uint128";break;case d$5.int128:t="int128";break;case d$5.uint136:t="uint136";break;case d$5.int136:t="int136";break;case d$5.uint144:t="uint144";break;case d$5.int144:t="int144";break;case d$5.uint152:t="uint152";break;case d$5.int152:t="int152";break;case d$5.uint160:t="uint160";break;case d$5.int160:t="int160";break;case d$5.uint168:t="uint168";break;case d$5.int168:t="int168";break;case d$5.uint176:t="uint176";break;case d$5.int176:t="int176";break;case d$5.uint184:t="uint184";break;case d$5.int184:t="int184";break;case d$5.uint192:t="uint192";break;case d$5.int192:t="int192";break;case d$5.uint200:t="uint200";break;case d$5.int200:t="int200";break;case d$5.uint208:t="uint208";break;case d$5.int208:t="int208";break;case d$5.uint216:t="uint216";break;case d$5.int216:t="int216";break;case d$5.uint224:t="uint224";break;case d$5.int224:t="int224";break;case d$5.uint232:t="uint232";break;case d$5.int232:t="int232";break;case d$5.uint240:t="uint240";break;case d$5.int240:t="int240";break;case d$5.uint248:t="uint248";break;case d$5.int248:t="int248";break;case d$5.uint256:t="uint256";break;case d$5.int256:t="int256";break;case d$5.string:t="string";break;case d$5.bool:t="bool";break;case d$5.bytes:t="bytes";break;case d$5.bytes32:t="bytes32";break;case d$5.address:t="address";break;case d$5.func:t="function";break;default:t=""}return e.array&&(t+="[]"),t}let _$1=class{constructor(){this._selector=new i$8,this._arguments=[]}addString(e){return this._selector.addString(),this._addParam(e,!0)}addStringArray(e){return this._selector.addStringArray(),this._addParam(e,!0)}addBytes(e){return this._selector.addBytes(),this._addParam(e,!0)}addBytes32(e){if(32!==e.length)throw new Error(`addBytes32 expected array to be of length 32, but received ${e.length}`);return this._selector.addBytes32(),this._addParam(e,!1)}addBytesArray(e){return this._selector.addBytesArray(),this._addParam(e,!0)}addBytes32Array(e){for(const[t,r]of e.entries())if(32!==r.length)throw new Error(`addBytes32 expected array to be of length 32, but received ${r.length}`);return this._selector.addBytes32Array(),this._addParam(e,!0)}addBool(e){return this._selector.addBool(),this._addParam(e,!1)}addInt8(e){return this._selector.addInt8(),this._addParam(v$1(e),!1)}addUint8(e){return this._selector.addUint8(),this._addParam(v$1(e),!1)}addInt16(e){return this._selector.addInt16(),this._addParam(v$1(e),!1)}addUint16(e){return this._selector.addUint16(),this._addParam(v$1(e),!1)}addInt24(e){return this._selector.addInt24(),this._addParam(v$1(e),!1)}addUint24(e){return this._selector.addUint24(),this._addParam(v$1(e),!1)}addInt32(e){return this._selector.addInt32(),this._addParam(v$1(e),!1)}addUint32(e){return this._selector.addUint32(),this._addParam(v$1(e),!1)}addInt40(e){return this._selector.addInt40(),this._addParam(v$1(e),!1)}addUint40(e){return this._selector.addUint40(),this._addParam(v$1(e),!1)}addInt48(e){return this._selector.addInt48(),this._addParam(v$1(e),!1)}addUint48(e){return this._selector.addUint48(),this._addParam(v$1(e),!1)}addInt56(e){return this._selector.addInt56(),this._addParam(v$1(e),!1)}addUint56(e){return this._selector.addUint56(),this._addParam(v$1(e),!1)}addInt64(e){return this._selector.addInt64(),this._addParam(v$1(e),!1)}addUint64(e){return this._selector.addUint64(),this._addParam(v$1(e),!1)}addInt72(e){return this._selector.addInt72(),this._addParam(v$1(e),!1)}addUint72(e){return this._selector.addUint72(),this._addParam(v$1(e),!1)}addInt80(e){return this._selector.addInt80(),this._addParam(v$1(e),!1)}addUint80(e){return this._selector.addUint80(),this._addParam(v$1(e),!1)}addInt88(e){return this._selector.addInt88(),this._addParam(v$1(e),!1)}addUint88(e){return this._selector.addUint88(),this._addParam(v$1(e),!1)}addInt96(e){return this._selector.addInt96(),this._addParam(v$1(e),!1)}addUint96(e){return this._selector.addUint96(),this._addParam(v$1(e),!1)}addInt104(e){return this._selector.addInt104(),this._addParam(v$1(e),!1)}addUint104(e){return this._selector.addUint104(),this._addParam(v$1(e),!1)}addInt112(e){return this._selector.addInt112(),this._addParam(v$1(e),!1)}addUint112(e){return this._selector.addUint112(),this._addParam(v$1(e),!1)}addInt120(e){return this._selector.addInt120(),this._addParam(v$1(e),!1)}addUint120(e){return this._selector.addUint120(),this._addParam(v$1(e),!1)}addInt128(e){return this._selector.addInt128(),this._addParam(v$1(e),!1)}addUint128(e){return this._selector.addUint128(),this._addParam(v$1(e),!1)}addInt136(e){return this._selector.addInt136(),this._addParam(v$1(e),!1)}addUint136(e){return this._selector.addUint136(),this._addParam(v$1(e),!1)}addInt144(e){return this._selector.addInt144(),this._addParam(v$1(e),!1)}addUint144(e){return this._selector.addUint144(),this._addParam(v$1(e),!1)}addInt152(e){return this._selector.addInt152(),this._addParam(v$1(e),!1)}addUint152(e){return this._selector.addUint152(),this._addParam(v$1(e),!1)}addInt160(e){return this._selector.addInt160(),this._addParam(v$1(e),!1)}addUint160(e){return this._selector.addUint160(),this._addParam(v$1(e),!1)}addInt168(e){return this._selector.addInt168(),this._addParam(v$1(e),!1)}addUint168(e){return this._selector.addUint168(),this._addParam(v$1(e),!1)}addInt176(e){return this._selector.addInt176(),this._addParam(v$1(e),!1)}addUint176(e){return this._selector.addUint176(),this._addParam(v$1(e),!1)}addInt184(e){return this._selector.addInt184(),this._addParam(v$1(e),!1)}addUint184(e){return this._selector.addUint184(),this._addParam(v$1(e),!1)}addInt192(e){return this._selector.addInt192(),this._addParam(v$1(e),!1)}addUint192(e){return this._selector.addUint192(),this._addParam(v$1(e),!1)}addInt200(e){return this._selector.addInt200(),this._addParam(v$1(e),!1)}addUint200(e){return this._selector.addUint200(),this._addParam(v$1(e),!1)}addInt208(e){return this._selector.addInt208(),this._addParam(v$1(e),!1)}addUint208(e){return this._selector.addUint208(),this._addParam(v$1(e),!1)}addInt216(e){return this._selector.addInt216(),this._addParam(v$1(e),!1)}addUint216(e){return this._selector.addUint216(),this._addParam(v$1(e),!1)}addInt224(e){return this._selector.addInt224(),this._addParam(v$1(e),!1)}addUint224(e){return this._selector.addUint224(),this._addParam(v$1(e),!1)}addInt232(e){return this._selector.addInt232(),this._addParam(v$1(e),!1)}addUint232(e){return this._selector.addUint232(),this._addParam(v$1(e),!1)}addInt240(e){return this._selector.addInt240(),this._addParam(v$1(e),!1)}addUint240(e){return this._selector.addUint240(),this._addParam(v$1(e),!1)}addInt248(e){return this._selector.addInt248(),this._addParam(v$1(e),!1)}addUint248(e){return this._selector.addUint248(),this._addParam(v$1(e),!1)}addInt256(e){return this._selector.addInt256(),this._addParam(v$1(e),!1)}addUint256(e){return this._selector.addUint256(),this._addParam(v$1(e),!1)}addInt8Array(e){return this._selector.addInt8Array(),this._addParam(N(e),!0)}addUint8Array(e){return this._selector.addUint8Array(),this._addParam(N(e),!0)}addInt16Array(e){return this._selector.addInt16Array(),this._addParam(N(e),!0)}addUint16Array(e){return this._selector.addUint16Array(),this._addParam(N(e),!0)}addInt24Array(e){return this._selector.addInt24Array(),this._addParam(N(e),!0)}addUint24Array(e){return this._selector.addUint24Array(),this._addParam(N(e),!0)}addInt32Array(e){return this._selector.addInt32Array(),this._addParam(N(e),!0)}addUint32Array(e){return this._selector.addUint32Array(),this._addParam(N(e),!0)}addInt40Array(e){return this._selector.addInt40Array(),this._addParam(N(e),!0)}addUint40Array(e){return this._selector.addUint40Array(),this._addParam(N(e),!0)}addInt48Array(e){return this._selector.addInt48Array(),this._addParam(N(e),!0)}addUint48Array(e){return this._selector.addUint48Array(),this._addParam(N(e),!0)}addInt56Array(e){return this._selector.addInt56Array(),this._addParam(N(e),!0)}addUint56Array(e){return this._selector.addUint56Array(),this._addParam(N(e),!0)}addInt64Array(e){return this._selector.addInt64Array(),this._addParam(N(e),!0)}addUint64Array(e){return this._selector.addUint64Array(),this._addParam(N(e),!0)}addInt72Array(e){return this._selector.addInt72Array(),this._addParam(N(e),!0)}addUint72Array(e){return this._selector.addUint72Array(),this._addParam(N(e),!0)}addInt80Array(e){return this._selector.addInt80Array(),this._addParam(N(e),!0)}addUint80Array(e){return this._selector.addUint80Array(),this._addParam(N(e),!0)}addInt88Array(e){return this._selector.addInt88Array(),this._addParam(N(e),!0)}addUint88Array(e){return this._selector.addUint88Array(),this._addParam(N(e),!0)}addInt96Array(e){return this._selector.addInt96Array(),this._addParam(N(e),!0)}addUint96Array(e){return this._selector.addUint96Array(),this._addParam(N(e),!0)}addInt104Array(e){return this._selector.addInt104Array(),this._addParam(N(e),!0)}addUint104Array(e){return this._selector.addUint104Array(),this._addParam(N(e),!0)}addInt112Array(e){return this._selector.addInt112Array(),this._addParam(N(e),!0)}addUint112Array(e){return this._selector.addUint112Array(),this._addParam(N(e),!0)}addInt120Array(e){return this._selector.addInt120Array(),this._addParam(N(e),!0)}addUint120Array(e){return this._selector.addUint120Array(),this._addParam(N(e),!0)}addInt128Array(e){return this._selector.addInt128Array(),this._addParam(N(e),!0)}addUint128Array(e){return this._selector.addUint128Array(),this._addParam(N(e),!0)}addInt136Array(e){return this._selector.addInt136Array(),this._addParam(N(e),!0)}addUint136Array(e){return this._selector.addUint136Array(),this._addParam(N(e),!0)}addInt144Array(e){return this._selector.addInt144Array(),this._addParam(N(e),!0)}addUint144Array(e){return this._selector.addUint144Array(),this._addParam(N(e),!0)}addInt152Array(e){return this._selector.addInt152Array(),this._addParam(N(e),!0)}addUint152Array(e){return this._selector.addUint152Array(),this._addParam(N(e),!0)}addInt160Array(e){return this._selector.addInt160Array(),this._addParam(N(e),!0)}addUint160Array(e){return this._selector.addUint160Array(),this._addParam(N(e),!0)}addInt168Array(e){return this._selector.addInt168Array(),this._addParam(N(e),!0)}addUint168Array(e){return this._selector.addUint168Array(),this._addParam(N(e),!0)}addInt176Array(e){return this._selector.addInt176Array(),this._addParam(N(e),!0)}addUint176Array(e){return this._selector.addUint176Array(),this._addParam(N(e),!0)}addInt184Array(e){return this._selector.addInt184Array(),this._addParam(N(e),!0)}addUint184Array(e){return this._selector.addUint184Array(),this._addParam(N(e),!0)}addInt192Array(e){return this._selector.addInt192Array(),this._addParam(N(e),!0)}addUint192Array(e){return this._selector.addUint192Array(),this._addParam(N(e),!0)}addInt200Array(e){return this._selector.addInt200Array(),this._addParam(N(e),!0)}addUint200Array(e){return this._selector.addUint200Array(),this._addParam(N(e),!0)}addInt208Array(e){return this._selector.addInt208Array(),this._addParam(N(e),!0)}addUint208Array(e){return this._selector.addUint208Array(),this._addParam(N(e),!0)}addInt216Array(e){return this._selector.addInt216Array(),this._addParam(N(e),!0)}addUint216Array(e){return this._selector.addUint216Array(),this._addParam(N(e),!0)}addInt224Array(e){return this._selector.addInt224Array(),this._addParam(N(e),!0)}addUint224Array(e){return this._selector.addUint224Array(),this._addParam(N(e),!0)}addInt232Array(e){return this._selector.addInt232Array(),this._addParam(N(e),!0)}addUint232Array(e){return this._selector.addUint232Array(),this._addParam(N(e),!0)}addInt240Array(e){return this._selector.addInt240Array(),this._addParam(N(e),!0)}addUint240Array(e){return this._selector.addUint240Array(),this._addParam(N(e),!0)}addInt248Array(e){return this._selector.addInt248Array(),this._addParam(N(e),!0)}addUint248Array(e){return this._selector.addUint248Array(),this._addParam(N(e),!0)}addInt256Array(e){return this._selector.addInt256Array(),this._addParam(N(e),!0)}addUint256Array(e){return this._selector.addUint256Array(),this._addParam(N(e),!0)}addAddress(e){let t;if("string"==typeof e){if(40!==e.length&&42!==e.length)throw new Error("`address` type requires parameter to be 40 or 42 characters");t=e}else t=e.toString();const r=40===t.length?r$p(t):r$p(t.substring(2));return this._selector.addAddress(),this._addParam(r,!1)}addAddressArray(e){const t=[];for(const[r,n]of e.entries()){let e;if("string"==typeof n){if(40!==n.length&&42!==n.length)throw new Error("`address` type requires parameter to be 40 or 42 characters");e=n}else e=n.toString();const r=40===e.length?r$p(e):r$p(e.substring(2));t.push(r)}return this._selector.addAddressArray(),this._addParam(t,!0)}addFunction(e,t){const r=r$p(e),n=t._build();if(20!==r.length)throw new Error("`function` type requires parameter `address` to be exactly 20 bytes");this._selector.addFunction();const o=new Uint8Array(24);return o.set(r,0),o.set(n,20),this._addParam(o,!1)}_addParam(e,t){const r=this._selector._paramTypes.length-1,n=u$7(e,this._selector._paramTypes[r]);return this._arguments.push({dynamic:t,value:n}),this}_build(e){const t=null!=e,r=t?4:0,n=0===this._arguments.length?r:32*this._arguments.length+this._arguments.map(e=>e.dynamic?e.value.length:0).reduce((e,t)=>e+t)+r,o=new Uint8Array(n);t&&o.set(this._selector._build(e),0);let i=32*this._arguments.length;for(const[s,{dynamic:a,value:c}]of this._arguments.entries())if(a){const e=E$1(o,r+32*s+28);e.setUint32(0,i),o.set(c,e.getUint32(0)+r),i+=c.length}else o.set(c,r+32*s);return o}};function u$7(e,t){let r,n=new Uint8Array(32),o=E$1(n);if(t.array){if(!Array.isArray(e))throw new TypeError("SolidityType indicates type is array, but parameter is not an array");const r=[];for(const[n,o]of e.entries()){const e=u$7(o,{ty:t.ty,array:!1});r.push(e)}const i=r.map(e=>e.length).reduce((e,t)=>e+t,0);switch(t.ty){case d$5.uint8:case d$5.int8:case d$5.uint16:case d$5.int16:case d$5.uint24:case d$5.int24:case d$5.uint32:case d$5.int32:case d$5.uint40:case d$5.int40:case d$5.uint48:case d$5.int48:case d$5.uint56:case d$5.int56:case d$5.uint64:case d$5.int64:case d$5.uint72:case d$5.int72:case d$5.uint80:case d$5.int80:case d$5.uint88:case d$5.int88:case d$5.uint96:case d$5.int96:case d$5.uint104:case d$5.int104:case d$5.uint112:case d$5.int112:case d$5.uint120:case d$5.int120:case d$5.uint128:case d$5.int128:case d$5.uint136:case d$5.int136:case d$5.uint144:case d$5.int144:case d$5.uint152:case d$5.int152:case d$5.uint160:case d$5.int160:case d$5.uint168:case d$5.int168:case d$5.uint176:case d$5.int176:case d$5.uint184:case d$5.int184:case d$5.uint192:case d$5.int192:case d$5.uint200:case d$5.int200:case d$5.uint208:case d$5.int208:case d$5.uint216:case d$5.int216:case d$5.uint224:case d$5.int224:case d$5.uint232:case d$5.int232:case d$5.uint240:case d$5.int240:case d$5.uint248:case d$5.int248:case d$5.uint256:case d$5.int256:case d$5.bool:case d$5.bytes32:case d$5.address:case d$5.func:n=new Uint8Array(i+32);break;case d$5.bytes:case d$5.string:n=new Uint8Array(32*r.length+i+32);break;default:throw new TypeError(`Expected param type to be ArgumentType, but received ${t.ty}`)}o=E$1(n,28),o.setUint32(0,r.length);let s=32*r.length;for(const[e,o]of r.entries())switch(t.ty){case d$5.uint8:case d$5.int8:case d$5.uint16:case d$5.int16:case d$5.uint24:case d$5.int24:case d$5.uint32:case d$5.int32:case d$5.uint40:case d$5.int40:case d$5.uint48:case d$5.int48:case d$5.uint56:case d$5.int56:case d$5.uint64:case d$5.int64:case d$5.uint72:case d$5.int72:case d$5.uint80:case d$5.int80:case d$5.uint88:case d$5.int88:case d$5.uint96:case d$5.int96:case d$5.uint104:case d$5.int104:case d$5.uint112:case d$5.int112:case d$5.uint120:case d$5.int120:case d$5.uint128:case d$5.int128:case d$5.uint136:case d$5.int136:case d$5.uint144:case d$5.int144:case d$5.uint152:case d$5.int152:case d$5.uint160:case d$5.int160:case d$5.uint168:case d$5.int168:case d$5.uint176:case d$5.int176:case d$5.uint184:case d$5.int184:case d$5.uint192:case d$5.int192:case d$5.uint200:case d$5.int200:case d$5.uint208:case d$5.int208:case d$5.uint216:case d$5.int216:case d$5.uint224:case d$5.int224:case d$5.uint232:case d$5.int232:case d$5.uint240:case d$5.int240:case d$5.uint248:case d$5.int248:case d$5.uint256:case d$5.int256:case d$5.bool:case d$5.bytes32:case d$5.address:case d$5.func:n.set(o,32*e+32);break;case d$5.bytes:case d$5.string:const r=E$1(n,32*(e+1)+28);r.setUint32(0,s),n.set(o,r.getUint32(0)+32),s+=o.length;break;default:throw new TypeError(`Expected param type to be ArgumentType, but received ${t.ty}`)}return n}switch(t.ty){case d$5.uint8:case d$5.int8:case d$5.uint16:case d$5.int16:case d$5.uint24:case d$5.int24:case d$5.uint32:case d$5.int32:case d$5.uint40:case d$5.int40:case d$5.uint48:case d$5.int48:case d$5.uint56:case d$5.int56:case d$5.uint64:case d$5.int64:case d$5.uint72:case d$5.int72:case d$5.uint80:case d$5.int80:case d$5.uint88:case d$5.int88:case d$5.uint96:case d$5.int96:case d$5.uint104:case d$5.int104:case d$5.uint112:case d$5.int112:case d$5.uint120:case d$5.int120:case d$5.uint128:case d$5.int128:case d$5.uint136:case d$5.int136:case d$5.uint144:case d$5.int144:case d$5.uint152:case d$5.int152:case d$5.uint160:case d$5.int160:case d$5.uint168:case d$5.int168:case d$5.uint176:case d$5.int176:case d$5.uint184:case d$5.int184:case d$5.uint192:case d$5.int192:case d$5.uint200:case d$5.int200:case d$5.uint208:case d$5.int208:case d$5.uint216:case d$5.int216:case d$5.uint224:case d$5.int224:case d$5.uint232:case d$5.int232:case d$5.uint240:case d$5.int240:case d$5.uint248:case d$5.int248:case d$5.int256:case d$5.uint256:{let r=e.toString(16);r=e>0||0==e?"0x"+r:r.slice(0,1)+"0x"+r.slice(1);return arrayify(defaultAbiCoder.encode([y(t)],[r]))}case d$5.address:return n.set(e,12),n;case d$5.bool:return n[31]=e?1:0,n;case d$5.func:return n.set(e,8),n;case d$5.bytes32:return n.set(e,0),n;case d$5.bytes:case d$5.string:return r=e instanceof Uint8Array?e:n$g(e),n=Math.floor(r.length/32)>=0?0!==Math.floor(r.length%32)?new Uint8Array(32*(Math.floor(r.length/32)+1)+32):new Uint8Array(32*Math.floor(r.length/32)+32):new Uint8Array(64),n.set(r,32),o=E$1(n,28),o.setUint32(0,r.length),n;default:throw new Error(`Unsupported argument type: ${t.toString()}`)}}let l$7=class e extends h$3{constructor(e={}){super(),this._contractId=null,null!=e.contractId&&this.setContractId(e.contractId),this._gas=null,null!=e.gas&&this.setGas(e.gas),this._functionParameters=null,null!=e.functionParameters&&(e.functionParameters instanceof Uint8Array?this.setFunctionParameters(e.functionParameters):this.setFunction(e.functionParameters.name,e.functionParameters.parameters)),this._maxResultSize=null,null!=e.maxResultSize&&this.setMaxResultSize(e.maxResultSize),this._senderAccountId=null,null!=e.senderAccountId&&this.setSenderAccountId(e.senderAccountId)}static _fromProtobuf(t){const r=t.contractCallLocal;return new e({contractId:null!=r.contractID?v._fromProtobuf(r.contractID):void 0,gas:null!=r.gas?r.gas:void 0,functionParameters:null!=r.functionParameters?r.functionParameters:void 0,maxResultSize:null!=r.maxResultSize?r.maxResultSize:void 0})}get contractId(){return this._contractId}setContractId(e){return this._contractId="string"==typeof e?v.fromString(e):e.clone(),this}get gas(){return this._gas}setGas(e){return this._gas=e instanceof Long?e:Long.fromValue(e),this}get senderAccountId(){return this._senderAccountId}setSenderAccountId(e){return this._senderAccountId="string"==typeof e?f$2.fromString(e):e,this}get functionParameters(){return this._functionParameters}setFunctionParameters(e){return this._functionParameters=e,this}setFunction(e,t){return this._functionParameters=(null!=t?t:new _$1)._build(e),this}setMaxResultSize(e){return this._maxResultSize=e instanceof Long?e:Long.fromValue(e),this}_validateChecksums(e){null!=this._contractId&&this._contractId.validateChecksum(e)}_mapStatusError(e,t,r){const{nodeTransactionPrecheckCode:n}=this._mapResponseHeader(t),o=e$n._fromCode(null!=n?n:libExports.proto.ResponseCodeEnum.OK);if(!t.contractCallLocal.functionResult)return new n$j({nodeId:r,status:o,transactionId:this._getTransactionId(),contractFunctionResult:null});const i=this._mapResponseSync(t);return new n$j({nodeId:r,status:o,transactionId:this._getTransactionId(),contractFunctionResult:i})}_execute(e,t){return e.smartContract.contractCallLocalMethod(t)}_mapResponseHeader(e){return e.contractCallLocal.header}_mapResponse(e){const t=e.contractCallLocal;return Promise.resolve(l$c._fromProtobuf(t.functionResult,!1))}_mapResponseSync(e){const t=e.contractCallLocal;return l$c._fromProtobuf(t.functionResult,!1)}_onMakeRequest(e){return{contractCallLocal:{header:e,contractID:null!=this._contractId?this._contractId._toProtobuf():null,gas:this._gas,maxResultSize:this._maxResultSize,functionParameters:this._functionParameters,senderId:null!=this._senderAccountId?this._senderAccountId._toProtobuf():null}}}_getLogId(){return`ContractCallQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("contractCallLocal",l$7._fromProtobuf);let l$6=class e extends P{constructor(e={}){super(),this._keys=null,this._expirationTime=new s$j(0,0).plusNanos(Long.fromNumber(Date.now()).mul(1e6).add(w$1.mul(1e9))),this._contents=null,this._fileMemo=null,this._defaultMaxTransactionFee=new e$o(5),null!=e.keys&&this.setKeys(e.keys),null!=e.expirationTime&&this.setExpirationTime(e.expirationTime),null!=e.contents&&this.setContents(e.contents),e.fileMemo&&null!=e.fileMemo&&this.setFileMemo(e.fileMemo)}static _fromProtobuf(t,r,n,o,i){const s=i[0].fileCreate;return P._fromProtobufTransactions(new e({keys:null!=s.keys&&null!=s.keys.keys?s.keys.keys.map(e=>t$r._fromProtobufKey(e)):void 0,expirationTime:null!=s.expirationTime?s$j._fromProtobuf(s.expirationTime):void 0,contents:null!=s.contents?s.contents:void 0,fileMemo:null!=s.memo?s.memo:void 0}),t,r,n,o,i)}get keys(){return this._keys}setKeys(e){if(this._requireNotFrozen(),e instanceof s$i&&null!=e.threshold)throw new Error("Cannot set threshold key as file key");return this._keys=e instanceof s$i?e.toArray():e,this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof s$j?e:s$j.fromDate(e),this}get contents(){return this._contents}setContents(e){return this._requireNotFrozen(),this._contents=e instanceof Uint8Array?e:n$g(e),this}get fileMemo(){return this._fileMemo}setFileMemo(e){return this._requireNotFrozen(),this._fileMemo=e,this}_execute(e,t){return e.file.createFile(t)}_getTransactionDataCase(){return"fileCreate"}_makeTransactionData(){return{keys:null!=this._keys?{keys:this._keys.map(e=>e._toProtobufKey())}:null,expirationTime:this._expirationTime._toProtobuf(),contents:this._contents,memo:this._fileMemo}}_getLogId(){return`FileCreateTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("fileCreate",l$6._fromProtobuf);let c$3=class e extends P{constructor(e={}){super(),this._fileId=null,this._contents=null,this._maxChunks=20,this._chunkSize=4096,this._chunkInterval=10,this._defaultMaxTransactionFee=new e$o(5),null!=e.fileId&&this.setFileId(e.fileId),null!=e.contents&&this.setContents(e.contents),null!=e.maxChunks&&this.setMaxChunks(e.maxChunks),null!=e.chunkSize&&this.setChunkSize(e.chunkSize),null!=e.chunkInterval&&this.setChunkInterval(e.chunkInterval),this._transactionIds=new t$m}static _fromProtobuf(t,r,n,o,i){const s=i[0].fileAppend;let a;const c=o.length>0?o.length:1;for(let e=0;e<i.length;e+=c){const t=i[e].fileAppend;if(null==t.contents)break;if(null==a){a=new Uint8Array(t.contents);continue}const r=new Uint8Array(a.length+t.contents.length);r.set(a,0),r.set(t.contents,a.length),a=r}const u=s.contents?.length||void 0,l=i.length?i.length/c:void 0;let d;if(n.length>1){const e=n[0].validStart,t=n[1].validStart;e&&t&&(d=t.nanos.sub(e.nanos).toNumber())}return P._fromProtobufTransactions(new e({fileId:null!=s.fileID?u$c._fromProtobuf(s.fileID):void 0,contents:a,chunkSize:u,maxChunks:l,chunkInterval:d}),t,r,n,o,i)}get fileId(){return this._fileId}setFileId(e){return this._requireNotFrozen(),this._fileId="string"==typeof e?u$c.fromString(e):e.clone(),this}getRequiredChunks(){return null==this._contents?1:Math.ceil(this._contents.length/this._chunkSize)}get contents(){return this._contents}setContents(e){return this._requireNotFrozen(),this._contents=e instanceof Uint8Array?e:n$g(e),this}get maxChunks(){return this._maxChunks}setMaxChunks(e){return this._requireNotFrozen(),this._maxChunks=e,this}get chunkSize(){return this._chunkSize}setChunkSize(e){return this._chunkSize=e,this}get chunkInterval(){return this._chunkInterval}setChunkInterval(e){return this._chunkInterval=e,this}freezeWith(e){if(super.freezeWith(e),null==this._contents)return this;let t=this._getTransactionId();this._transactionIds.locked=!1,this._transactions.clear(),this._transactionIds.clear(),this._signedTransactions.clear();for(let r=0;r<this.getRequiredChunks();r++){this._transactionIds.push(t),this._transactionIds.advance();for(const e of this._nodeAccountIds.list)this._signedTransactions.push(this._makeSignedTransaction(e));t=new i$c(t.accountId,new s$j(t.validStart.seconds,t.validStart.nanos.add(this._chunkInterval)))}return this._transactionIds.advance(),this._transactionIds.setLocked(),this}schedule(){if(this._requireNotFrozen(),null!=this._contents&&this._contents.length>this._chunkSize)throw new Error(`cannot schedule \`FileAppendTransaction\` with message over ${this._chunkSize} bytes`);return super.schedule()}async execute(e,t){return(await this.executeAll(e,t))[0]}async executeAll(e,t){if(this.maxChunks&&this.getRequiredChunks()>this.maxChunks)throw new Error(`cannot execute \`FileAppendTransaction\` with more than ${this.maxChunks} chunks`);super._isFrozen()||this.freezeWith(e);const r=this._getTransactionId(),n=e.operatorAccountId;null!=n&&n.equals(r.accountId)&&await super.signWithOperator(e);const o=[];let i=t;for(let s=0;s<this._transactionIds.length;s++){const t=Date.now(),r=await super.execute(e,i);null!=i&&(i=Date.now()-t),await r.getReceipt(e),o.push(r)}return o}_validateChecksums(e){null!=this._fileId&&this._fileId.validateChecksum(e)}_execute(e,t){return e.file.appendContent(t)}_getTransactionDataCase(){return"fileAppend"}_buildIncompleteTransactions(){const e=f$2.fromString("0.0.0"),t=this.transactionId?.accountId||e,r=this.transactionId?.validStart||s$j.fromDate(new Date);if(this.maxChunks&&this.getRequiredChunks()>this.maxChunks)throw new Error(`cannot build \`FileAppendTransaction\` with more than ${this.maxChunks} chunks`);this._transactionIds.locked=!1,this._transactions.clear(),this._transactionIds.clear(),this._signedTransactions.clear();for(let n=0;n<this.getRequiredChunks();n++){let e=i$c.withValidStart(t,r.plusNanos(this._chunkInterval*n));if(this._transactionIds.push(e),this._transactionIds.advance(),0===this._nodeAccountIds.list.length)this._transactions.push(this._makeSignedTransaction(null));else for(const t of this._nodeAccountIds.list)this._transactions.push(this._makeSignedTransaction(t))}this._transactionIds.advance(),this._transactionIds.setLocked()}_buildAllTransactions(){if(this.maxChunks&&this.getRequiredChunks()>this.maxChunks)throw new Error(`cannot build \`FileAppendTransaction\` with more than ${this.maxChunks} chunks`);for(let e=0;e<this._signedTransactions.length;e++)this._buildTransaction(e)}_getLogId(){return`FileAppendTransaction:${this._transactionIds.current.validStart.toString()}`}_makeTransactionData(){const e=null!=this._contents?this._contents.length:0,t=this._transactionIds.index*this._chunkSize,r=Math.min(t+this._chunkSize,e);return{fileID:null!=this._fileId?this._fileId._toProtobuf():null,contents:null!=this._contents?this._contents.slice(t,r):null}}};B.set("fileAppend",c$3._fromProtobuf);let r$f=class e extends P{constructor(e={}){super(),this._fileId=null,null!=e.fileId&&this.setFileId(e.fileId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].fileDelete;return P._fromProtobufTransactions(new e({fileId:null!=s.fileID?u$c._fromProtobuf(s.fileID):void 0}),t,r,n,o,i)}get fileId(){return this._fileId}setFileId(e){return this._requireNotFrozen(),this._fileId="string"==typeof e?u$c.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._fileId&&this._fileId.validateChecksum(e)}_execute(e,t){return e.file.deleteFile(t)}_getTransactionDataCase(){return"fileDelete"}_makeTransactionData(){return{fileID:null!=this._fileId?this._fileId._toProtobuf():null}}_getLogId(){return`FileDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("fileDelete",r$f._fromProtobuf);let d$4=class e extends P{constructor(e={}){super(),this._bytecodeFileId=null,this._bytecode=null,this._adminKey=null,this._gas=null,this._initialBalance=null,this._proxyAccountId=null,this._autoRenewPeriod=new s$d(w$1),this._constructorParameters=null,this._contractMemo=null,this._maxAutomaticTokenAssociations=null,this._defaultMaxTransactionFee=new e$o(20),this._stakedAccountId=null,this._stakedNodeId=null,this._declineStakingReward=!1,this._autoRenewAccountId=null,null!=e.bytecodeFileId&&this.setBytecodeFileId(e.bytecodeFileId),null!=e.bytecode&&this.setBytecode(e.bytecode),null!=e.adminKey&&this.setAdminKey(e.adminKey),null!=e.gas&&this.setGas(e.gas),null!=e.initialBalance&&this.setInitialBalance(e.initialBalance),null!=e.proxyAccountId&&this.setProxyAccountId(e.proxyAccountId),null!=e.autoRenewPeriod&&this.setAutoRenewPeriod(e.autoRenewPeriod),null!=e.constructorParameters&&this.setConstructorParameters(e.constructorParameters),null!=e.contractMemo&&this.setContractMemo(e.contractMemo),null!=e.maxAutomaticTokenAssociations&&this.setMaxAutomaticTokenAssociations(e.maxAutomaticTokenAssociations),null!=e.stakedAccountId&&this.setStakedAccountId(e.stakedAccountId),null!=e.stakedNodeId&&this.setStakedNodeId(e.stakedNodeId),null!=e.declineStakingReward&&this.setDeclineStakingReward(e.declineStakingReward),null!=e.autoRenewAccountId&&this.setAutoRenewAccountId(e.autoRenewAccountId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].contractCreateInstance;return P._fromProtobufTransactions(new e({bytecodeFileId:null!=s.fileID?u$c._fromProtobuf(s.fileID):void 0,adminKey:null!=s.adminKey?t$r._fromProtobufKey(s.adminKey):void 0,gas:null!=s.gas?s.gas:void 0,initialBalance:null!=s.initialBalance?e$o.fromTinybars(s.initialBalance):void 0,proxyAccountId:null!=s.proxyAccountID?f$2._fromProtobuf(s.proxyAccountID):void 0,autoRenewPeriod:null!=s.autoRenewPeriod&&null!=s.autoRenewPeriod.seconds?s.autoRenewPeriod.seconds:void 0,constructorParameters:null!=s.constructorParameters?s.constructorParameters:void 0,contractMemo:null!=s.memo?s.memo:void 0,maxAutomaticTokenAssociations:null!=s.maxAutomaticTokenAssociations?s.maxAutomaticTokenAssociations:void 0,stakedAccountId:null!=s.stakedAccountId?f$2._fromProtobuf(s.stakedAccountId):void 0,stakedNodeId:null!=s.stakedNodeId?s.stakedNodeId:void 0,declineStakingReward:1==s.declineReward,autoRenewAccountId:null!=s.autoRenewAccountId?f$2._fromProtobuf(s.autoRenewAccountId):void 0}),t,r,n,o,i)}get bytecodeFileId(){return this._bytecodeFileId}setBytecodeFileId(e){return this._requireNotFrozen(),this._bytecodeFileId="string"==typeof e?u$c.fromString(e):e.clone(),this._bytecode=null,this}get bytecode(){return this._bytecode}setBytecode(e){return this._requireNotFrozen(),this._bytecode=e,this._bytecodeFileId=null,this}get adminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get gas(){return this._gas}setGas(e){return this._requireNotFrozen(),this._gas=e instanceof Long?e:Long.fromValue(e),this}get initialBalance(){return this._initialBalance}setInitialBalance(e){return this._requireNotFrozen(),this._initialBalance=e instanceof e$o?e:new e$o(e),this}get proxyAccountId(){return this._proxyAccountId}setProxyAccountId(e){return this._requireNotFrozen(),this._proxyAccountId=e instanceof f$2?e:f$2.fromString(e),this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof s$d?e:new s$d(e),this}get constructorParameters(){return this._constructorParameters}setConstructorParameters(e){return this._requireNotFrozen(),this._constructorParameters=e instanceof _$1?e._build():e,this}get contractMemo(){return this._contractMemo}setContractMemo(e){return this._requireNotFrozen(),this._contractMemo=e,this}get maxAutomaticTokenAssociations(){return this._maxAutomaticTokenAssociations}setMaxAutomaticTokenAssociations(e){return this._maxAutomaticTokenAssociations=e,this}get stakedAccountId(){return this._stakedAccountId}setStakedAccountId(e){return this._requireNotFrozen(),this._stakedAccountId="string"==typeof e?f$2.fromString(e):e,this}get stakedNodeId(){return this._stakedNodeId}setStakedNodeId(e){return this._requireNotFrozen(),this._stakedNodeId=Long.fromValue(e),this}get declineStakingRewards(){return this._declineStakingReward}setDeclineStakingReward(e){return this._requireNotFrozen(),this._declineStakingReward=e,this}get autoRenewAccountId(){return this._autoRenewAccountId}setAutoRenewAccountId(e){return this._requireNotFrozen(),this._autoRenewAccountId="string"==typeof e?f$2.fromString(e):e,this}_validateChecksums(e){null!=this._bytecodeFileId&&this._bytecodeFileId.validateChecksum(e),null!=this._proxyAccountId&&this._proxyAccountId.validateChecksum(e)}_execute(e,t){return e.smartContract.createContract(t)}_getTransactionDataCase(){return"contractCreateInstance"}_makeTransactionData(){return{fileID:null!=this._bytecodeFileId?this._bytecodeFileId._toProtobuf():null,initcode:this._bytecode,adminKey:null!=this._adminKey?this._adminKey._toProtobufKey():null,gas:this._gas,initialBalance:null!=this._initialBalance?this._initialBalance.toTinybars():null,proxyAccountID:null!=this._proxyAccountId?this._proxyAccountId._toProtobuf():null,autoRenewPeriod:this._autoRenewPeriod._toProtobuf(),constructorParameters:this._constructorParameters,memo:this._contractMemo,maxAutomaticTokenAssociations:this._maxAutomaticTokenAssociations,stakedAccountId:null!=this.stakedAccountId?this.stakedAccountId._toProtobuf():null,stakedNodeId:this.stakedNodeId,declineReward:this.declineStakingRewards,autoRenewAccountId:null!=this._autoRenewAccountId?this._autoRenewAccountId._toProtobuf():null}}_getLogId(){return`ContractCreateTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("contractCreateInstance",d$4._fromProtobuf);let c$2=class e extends P{constructor(e={}){super(),this._contractId=null,this._transferAccountId=null,this._transferContractId=null,null!=e.contractId&&this.setContractId(e.contractId),null!=e.transferAccountId&&this.setTransferAccountId(e.transferAccountId),null!=e.transferContractId&&this.setTransferContractId(e.transferContractId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].contractDeleteInstance;return P._fromProtobufTransactions(new e({contractId:null!=s.contractID?v._fromProtobuf(s.contractID):void 0,transferAccountId:null!=s.transferAccountID?f$2._fromProtobuf(s.transferAccountID):void 0,transferContractId:null!=s.transferContractID?v._fromProtobuf(s.transferContractID):void 0}),t,r,n,o,i)}get contractId(){return this._contractId}setContractId(e){return this._requireNotFrozen(),this._contractId="string"==typeof e?v.fromString(e):e.clone(),this}get transferContractId(){return this._transferContractId}setTransferContractId(e){return this._requireNotFrozen(),this._transferContractId=e instanceof v?e:v.fromString(e),this}get transferAccountId(){return this._transferAccountId}setTransferAccountId(e){return this._requireNotFrozen(),this._transferAccountId=e instanceof f$2?e:f$2.fromString(e),this}_validateChecksums(e){null!=this._contractId&&this._contractId.validateChecksum(e),null!=this._transferAccountId&&this._transferAccountId.validateChecksum(e),null!=this._transferContractId&&this._transferContractId.validateChecksum(e)}_execute(e,t){return e.smartContract.deleteContract(t)}_getTransactionDataCase(){return"contractDeleteInstance"}_makeTransactionData(){return{contractID:null!=this._contractId?this._contractId._toProtobuf():null,transferAccountID:this._transferAccountId?this._transferAccountId._toProtobuf():null,transferContractID:null!=this._transferContractId?this._transferContractId._toProtobuf():null}}_getLogId(){return`ContractDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("contractDeleteInstance",c$2._fromProtobuf);let i$7=class e extends P{constructor(e={}){super(),this._contractId=null,this._gas=null,this._amount=null,this._functionParameters=null,null!=e.contractId&&this.setContractId(e.contractId),null!=e.gas&&this.setGas(e.gas),null!=e.amount&&this.setPayableAmount(e.amount),null!=e.functionParameters?this.setFunctionParameters(e.functionParameters):null!=e.function&&this.setFunction(e.function.name,e.function.parameters)}static _fromProtobuf(t,r,n,o,i){const s=i[0].contractCall;return P._fromProtobufTransactions(new e({contractId:null!=s.contractID?v._fromProtobuf(s.contractID):void 0,gas:null!=s.gas?s.gas:void 0,amount:null!=s.amount?e$o.fromTinybars(s.amount):void 0,functionParameters:null!=s.functionParameters?s.functionParameters:void 0}),t,r,n,o,i)}get contractId(){return this._contractId}setContractId(e){return this._requireNotFrozen(),this._contractId="string"==typeof e?v.fromString(e):e.clone(),this}get gas(){return this._gas}setGas(e){return this._requireNotFrozen(),this._gas=e instanceof Long?e:Long.fromValue(e),this}get payableAmount(){return this._amount}setPayableAmount(e,t=e$p.Hbar){return this._requireNotFrozen(),this._amount=e instanceof e$o?e:e$o.from(e,t),this}get functionParameters(){return this._functionParameters}setFunctionParameters(e){return this._requireNotFrozen(),this._functionParameters=e,this}setFunction(e,t){return this._requireNotFrozen(),this._functionParameters=null!=t?t._build(e):(new _$1)._build(e),this}_validateChecksums(e){null!=this._contractId&&this._contractId.validateChecksum(e)}_execute(e,t){return e.smartContract.contractCallMethod(t)}_getTransactionDataCase(){return"contractCall"}_makeTransactionData(){return{contractID:null!=this._contractId?this._contractId._toProtobuf():null,gas:this._gas,amount:null!=this._amount?this._amount.toTinybars():null,functionParameters:this._functionParameters}}_getLogId(){return`ContractExecuteTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("contractCall",i$7._fromProtobuf);const{proto:d$3}=e$s;class m{constructor(e){this.contractId=e.contractId,this.accountId=e.accountId,this.contractAccountId=e.contractAccountId,this.adminKey=null!=e.adminKey?e.adminKey:null,this.expirationTime=e.expirationTime,this.autoRenewPeriod=e.autoRenewPeriod,this.autoRenewAccountId=e.autoRenewAccountId,this.storage=e.storage,this.contractMemo=e.contractMemo,this.balance=e.balance,this.isDeleted=e.isDeleted,this.tokenRelationships=e.tokenRelationships,this.ledgerId=e.ledgerId,this.stakingInfo=e.stakingInfo,Object.freeze(this)}static _fromProtobuf(e){const t=e.autoRenewPeriod.seconds;return new m({contractId:v._fromProtobuf(e.contractID),accountId:f$2._fromProtobuf(e.accountID),contractAccountId:null!=e.contractAccountID?e.contractAccountID:"",adminKey:null!=e.adminKey?t$r._fromProtobufKey(e.adminKey):null,expirationTime:s$j._fromProtobuf(e.expirationTime),autoRenewPeriod:new s$d(t),autoRenewAccountId:null!=e.autoRenewAccountId?f$2._fromProtobuf(e.autoRenewAccountId):null,storage:null!=e.storage?e.storage instanceof Long?e.storage:Long.fromValue(e.storage):Long.ZERO,contractMemo:null!=e.memo?e.memo:"",balance:e$o.fromTinybars(null!=e.balance?e.balance:0),isDeleted:e.deleted,tokenRelationships:s$a._fromProtobuf(null!=e.tokenRelationships?e.tokenRelationships:[]),ledgerId:null!=e.ledgerId?r$h.fromBytes(e.ledgerId):null,stakingInfo:null!=e.stakingInfo?n$a._fromProtobuf(e.stakingInfo):null})}_toProtobuf(){return{contractID:this.contractId._toProtobuf(),accountID:this.accountId._toProtobuf(),contractAccountID:this.contractAccountId,adminKey:null!=this.adminKey?this.adminKey._toProtobufKey():null,expirationTime:this.expirationTime._toProtobuf(),autoRenewPeriod:null!=this.autoRenewPeriod?this.autoRenewPeriod._toProtobuf():null,autoRenewAccountId:null!=this.autoRenewAccountId?this.autoRenewAccountId._toProtobuf():null,storage:this.storage,memo:this.contractMemo,balance:this.balance.toTinybars(),deleted:this.isDeleted,tokenRelationships:null!=this.tokenRelationships?this.tokenRelationships._toProtobuf():null,ledgerId:null!=this.ledgerId?this.ledgerId.toBytes():null,stakingInfo:null!=this.stakingInfo?this.stakingInfo._toProtobuf():null}}static fromBytes(e){return m._fromProtobuf(d$3.ContractGetInfoResponse.ContractInfo.decode(e))}toBytes(){return d$3.ContractGetInfoResponse.ContractInfo.encode(this._toProtobuf()).finish()}}let e$b=class e extends h$3{constructor(e={}){super(),this._contractId=null,null!=e.contractId&&this.setContractId(e.contractId)}static _fromProtobuf(t){const r=t.contractGetInfo;return new e({contractId:null!=r.contractID?v._fromProtobuf(r.contractID):void 0})}get contractId(){return this._contractId}setContractId(e){return this._contractId="string"==typeof e?v.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._contractId&&this._contractId.validateChecksum(e)}_execute(e,t){return e.smartContract.getContractInfo(t)}async getCost(e){return super.getCost(e)}_mapResponseHeader(e){return e.contractGetInfo.header}_mapResponse(e,t,r){const n=e.contractGetInfo;return Promise.resolve(m._fromProtobuf(n.contractInfo))}_onMakeRequest(e){return{contractGetInfo:{header:e,contractID:null!=this._contractId?this._contractId._toProtobuf():null}}}_getLogId(){return`ContractInfoQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("contractGetInfo",e$b._fromProtobuf);let u$6=class e extends P{constructor(e={}){super(),this._contractId=null,this._expirationTime=null,this._adminKey=null,this._proxyAccountId=null,this._autoRenewPeriod=null,this._bytecodeFileId=null,this._contractMemo=null,this._maxAutomaticTokenAssociations=null,this._stakedAccountId=null,this._stakedNodeId=null,this._declineStakingReward=null,this._autoRenewAccountId=null,null!=e.contractId&&this.setContractId(e.contractId),null!=e.expirationTime&&this.setExpirationTime(e.expirationTime),null!=e.adminKey&&this.setAdminKey(e.adminKey),null!=e.proxyAccountId&&this.setProxyAccountId(e.proxyAccountId),null!=e.autoRenewPeriod&&this.setAutoRenewPeriod(e.autoRenewPeriod),null!=e.bytecodeFileId&&this.setBytecodeFileId(e.bytecodeFileId),null!=e.contractMemo&&this.setContractMemo(e.contractMemo),null!=e.maxAutomaticTokenAssociations&&this.setMaxAutomaticTokenAssociations(e.maxAutomaticTokenAssociations),null!=e.stakedAccountId&&this.setStakedAccountId(e.stakedAccountId),null!=e.stakedNodeId&&this.setStakedNodeId(e.stakedNodeId),null!=e.declineStakingReward&&this.setDeclineStakingReward(e.declineStakingReward),null!=e.autoRenewAccountId&&this.setAutoRenewAccountId(e.autoRenewAccountId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].contractUpdateInstance;let a,c,u;return null!=s.autoRenewPeriod&&null!=s.autoRenewPeriod.seconds&&(a=s.autoRenewPeriod.seconds),null!=s.memoWrapper&&Object.hasOwn(s.memoWrapper,"value")&&null!=s.memoWrapper.value&&(c=s.memoWrapper.value),null!=s.maxAutomaticTokenAssociations&&null!=s.maxAutomaticTokenAssociations.value&&(u=s.maxAutomaticTokenAssociations.value),P._fromProtobufTransactions(new e({contractId:null!=s.contractID?v._fromProtobuf(s.contractID):void 0,bytecodeFileId:null!=s.fileID?u$c._fromProtobuf(s.fileID):void 0,expirationTime:null!=s.expirationTime?s$j._fromProtobuf(s.expirationTime):void 0,adminKey:null!=s.adminKey?t$r._fromProtobufKey(s.adminKey):void 0,proxyAccountId:null!=s.proxyAccountID?f$2._fromProtobuf(s.proxyAccountID):void 0,autoRenewPeriod:a,contractMemo:c,maxAutomaticTokenAssociations:u,stakedAccountId:null!=s.stakedAccountId?f$2._fromProtobuf(s.stakedAccountId):void 0,stakedNodeId:null!=s.stakedNodeId?s.stakedNodeId:void 0,declineStakingReward:null!=s.declineReward&&1==Boolean(s.declineReward),autoRenewAccountId:null!=s.autoRenewAccountId?f$2._fromProtobuf(s.autoRenewAccountId):void 0}),t,r,n,o,i)}get contractId(){return this._contractId}setContractId(e){return this._requireNotFrozen(),this._contractId="string"==typeof e?v.fromString(e):e.clone(),this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof s$j?e:s$j.fromDate(e),this}get adminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get proxyAccountId(){return this._proxyAccountId}setProxyAccountId(e){return this._requireNotFrozen(),this._proxyAccountId="string"==typeof e?f$2.fromString(e):e.clone(),this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof s$d?e:new s$d(e),this}get bytecodeFileId(){return this._bytecodeFileId}setBytecodeFileId(e){return console.warn("Deprecated: there is no replacement"),this._requireNotFrozen(),this._bytecodeFileId="string"==typeof e?u$c.fromString(e):e.clone(),this}get contractMemo(){return this._contractMemo}setContractMemo(e){return this._requireNotFrozen(),this._contractMemo=e,this}clearContractMemo(){return this._requireNotFrozen(),this._contractMemo=null,this}get maxAutomaticTokenAssociations(){return this._maxAutomaticTokenAssociations}setMaxAutomaticTokenAssociations(e){return this._requireNotFrozen(),this._maxAutomaticTokenAssociations=e,this}get stakedAccountId(){return this._stakedAccountId}setStakedAccountId(e){return this._requireNotFrozen(),this._stakedAccountId="string"==typeof e?f$2.fromString(e):e,this}get stakedNodeId(){return this._stakedNodeId}setStakedNodeId(e){return this._requireNotFrozen(),this._stakedNodeId=Long.fromValue(e),this}get declineStakingRewards(){return this._declineStakingReward}setDeclineStakingReward(e){return this._requireNotFrozen(),this._declineStakingReward=e,this}get autoRenewAccountId(){return this._autoRenewAccountId}setAutoRenewAccountId(e){return this._requireNotFrozen(),this._autoRenewAccountId="string"==typeof e?f$2.fromString(e):e,this}clearAutoRenewAccountId(){return this._autoRenewAccountId=new f$2(0),this}_validateChecksums(e){null!=this._contractId&&this._contractId.validateChecksum(e),null!=this._bytecodeFileId&&this._bytecodeFileId.validateChecksum(e),null!=this._proxyAccountId&&this._proxyAccountId.validateChecksum(e)}_execute(e,t){return e.smartContract.updateContract(t)}_getTransactionDataCase(){return"contractUpdateInstance"}_makeTransactionData(){return{contractID:null!=this._contractId?this._contractId._toProtobuf():null,expirationTime:null!=this._expirationTime?this._expirationTime._toProtobuf():null,adminKey:null!=this._adminKey?this._adminKey._toProtobufKey():null,proxyAccountID:null!=this._proxyAccountId?this._proxyAccountId._toProtobuf():null,autoRenewPeriod:null!=this._autoRenewPeriod?this._autoRenewPeriod._toProtobuf():null,fileID:this._bytecodeFileId?this._bytecodeFileId._toProtobuf():null,memoWrapper:null!=this._contractMemo?{value:this._contractMemo}:null,maxAutomaticTokenAssociations:null!=this._maxAutomaticTokenAssociations?{value:this._maxAutomaticTokenAssociations}:null,stakedAccountId:null!=this.stakedAccountId?this.stakedAccountId._toProtobuf():null,stakedNodeId:this.stakedNodeId,declineReward:null!=this.declineStakingRewards?{value:this.declineStakingRewards}:null,autoRenewAccountId:null!=this._autoRenewAccountId?this._autoRenewAccountId._toProtobuf():null}}_getLogId(){return`ContractUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("contractUpdateInstance",u$6._fromProtobuf);let e$a=class e{constructor(e){this._value=e,Object.freeze(this)}toString(){switch(this){case e.Inclusive:return"INCLUSIVE";case e.Exclusive:return"EXCLUSIVE";default:return`UNKNOWN (${this._value.toString()})`}}static _fromValue(t){switch(t){case!1:return e.Inclusive;case!0:return e.Exclusive}}valueOf(){return this._value}};e$a.Inclusive=new e$a(!1),e$a.Exclusive=new e$a(!0);let e$9=class e extends v{constructor(e,t,r,n){super(e,t,r,n)}static fromEvmAddress(t,r,n){return new e(t,r,0,r$p(n))}static fromString(t){return new e(v.fromString(t))}static _fromProtobuf(t){return new e(v._fromProtobuf(t))}static fromBytes(t){return new e(v.fromBytes(t))}static fromSolidityAddress(t){return new e(v.fromSolidityAddress(t))}clone(){const t=new e(this);return t._checksum=this._checksum,t}_toProtobufKey(){return{delegatableContractId:this._toProtobuf()}}static __fromProtobufKey(t){return e._fromProtobuf(t)}};t$s.setDelegateContractId(e=>e$9.__fromProtobufKey(e));let r$e=class e extends P{constructor(e={}){super(),this._ethereumData=null,this._callDataFileId=null,this._maxGasAllowance=null,null!=e.ethereumData&&this.setEthereumData(e.ethereumData),null!=e.callData&&this.setCallDataFileId(e.callData),null!=e.callDataFileId&&this.setCallDataFileId(e.callDataFileId),null!=e.maxGasAllowance&&this.setMaxGasAllowanceHbar(e.maxGasAllowance)}static _fromProtobuf(t,r,n,o,i){const s=i[0].ethereumTransaction;return P._fromProtobufTransactions(new e({ethereumData:null!=s.ethereumData?s.ethereumData:void 0,callData:null!=s.callData?u$c._fromProtobuf(s.callData):void 0,maxGasAllowance:null!=s.maxGasAllowance?e$o.fromTinybars(s.maxGasAllowance):void 0}),t,r,n,o,i)}get ethereumData(){return this._ethereumData}setEthereumData(e){return this._requireNotFrozen(),this._ethereumData=e,this}get callData(){return this.callDataFileId}setCallData(e){return this.setCallDataFileId(e)}get callDataFileId(){return this._callDataFileId}setCallDataFileId(e){return this._requireNotFrozen(),this._callDataFileId=e,this}get maxGasAllowance(){return this._maxGasAllowance}setMaxGasAllowance(e){return this.setMaxGasAllowanceHbar(e)}setMaxGasAllowanceHbar(e){return this._requireNotFrozen(),this._maxGasAllowance=e instanceof e$o?e:new e$o(e),this}_validateChecksums(e){null!=this._ethereumData&&this._ethereumData instanceof u$c&&this._ethereumData.validateChecksum(e)}_execute(e,t){return e.smartContract.callEthereum(t)}_getTransactionDataCase(){return"ethereumTransaction"}_makeTransactionData(){return{ethereumData:this._ethereumData,callData:null!=this._callDataFileId?this._callDataFileId._toProtobuf():null,maxGasAllowance:null!=this._maxGasAllowance?this._maxGasAllowance.toTinybars():null}}_getLogId(){return`EthereumTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("ethereumTransaction",r$e._fromProtobuf);let e$8=class{constructor(e){this.callData=e.callData}static fromBytes(e){if(0===e.length)throw new Error("empty bytes");switch(e[0]){case 1:return t$s.ethereumTransactionDataEip2930FromBytes(e);case 2:return t$s.ethereumTransactionDataEip1559FromBytes(e);default:return t$s.ethereumTransactionDataLegacyFromBytes(e)}}toBytes(){throw new Error("not implemented")}toString(){throw new Error("not implemented")}toJSON(){throw new Error("not implemented")}},a$4=class e extends e$8{constructor(e){super(e),this.nonce=e.nonce,this.gasPrice=e.gasPrice,this.gasLimit=e.gasLimit,this.to=e.to,this.value=e.value,this.v=e.v,this.r=e.r,this.s=e.s}static fromBytes(t){if(0===t.length)throw new Error("empty bytes");const r=decode(t);if(9!=r.length)throw new Error("invalid ethereum transaction data");return new e({nonce:r$p(r[0]),gasPrice:r$p(r[1]),gasLimit:r$p(r[2]),to:r$p(r[3]),value:r$p(r[4]),callData:r$p(r[5]),v:r$p(r[6]),r:r$p(r[7]),s:r$p(r[8])})}toBytes(){return r$p(encode$3([this.nonce,this.gasPrice,this.gasLimit,this.to,this.value,this.callData,this.v,this.r,this.s]))}toString(){return JSON.stringify(this.toJSON(),null,2)}toJSON(){return{nonce:n$n(this.nonce),gasPrice:n$n(this.gasPrice),gasLimit:n$n(this.gasLimit),to:n$n(this.to),value:n$n(this.value),callData:n$n(this.callData),v:n$n(this.v),r:n$n(this.r),s:n$n(this.s)}}};t$s.setEthereumTransactionDataLegacyFromBytes(e=>a$4.fromBytes(e));let e$7=class e extends e$8{constructor(e){super(e),this.chainId=e.chainId,this.nonce=e.nonce,this.maxPriorityGas=e.maxPriorityGas,this.maxGas=e.maxGas,this.gasLimit=e.gasLimit,this.to=e.to,this.value=e.value,this.accessList=e.accessList,this.recId=e.recId,this.r=e.r,this.s=e.s}static fromBytes(t){if(0===t.length)throw new Error("empty bytes");const r=decode(t.subarray(1));if(!Array.isArray(r))throw new Error("ethereum data is not a list");if(12!=r.length)throw new Error("invalid ethereum transaction data");return new e({chainId:r$p(r[0]),nonce:r$p(r[1]),maxPriorityGas:r$p(r[2]),maxGas:r$p(r[3]),gasLimit:r$p(r[4]),to:r$p(r[5]),value:r$p(r[6]),callData:r$p(r[7]),accessList:r[8].map(e=>r$p(e)),recId:r$p(r[9]),r:r$p(r[10]),s:r$p(r[11])})}toBytes(){return r$p("02"+encode$3([this.chainId,this.nonce,this.maxPriorityGas,this.maxGas,this.gasLimit,this.to,this.value,this.callData,this.accessList,this.recId,this.r,this.s]).substring(2))}toString(){return JSON.stringify(this.toJSON(),null,2)}toJSON(){return{chainId:n$n(this.chainId),nonce:n$n(this.nonce),maxPriorityGas:n$n(this.maxPriorityGas),maxGas:n$n(this.maxGas),gasLimit:n$n(this.gasLimit),to:n$n(this.to),value:n$n(this.value),callData:n$n(this.callData),accessList:this.accessList.map(e=>n$n(e)),recId:n$n(this.recId),r:n$n(this.r),s:n$n(this.s)}}};t$s.setEthereumTransactionDataEip1559FromBytes(e=>e$7.fromBytes(e));let a$3=class e extends e$8{constructor(e){super(e),this.chainId=e.chainId,this.nonce=e.nonce,this.gasPrice=e.gasPrice,this.gasLimit=e.gasLimit,this.to=e.to,this.value=e.value,this.accessList=e.accessList,this.recId=e.recId,this.r=e.r,this.s=e.s}static fromBytes(t){if(0===t.length)throw new Error("empty bytes");const r=decode(t.subarray(1));if(!Array.isArray(r))throw new Error("ethereum data is not a list");if(11!==r.length)throw new Error("invalid ethereum transaction data");return new e({chainId:r$p(r[0]),nonce:r$p(r[1]),gasPrice:r$p(r[2]),gasLimit:r$p(r[3]),to:r$p(r[4]),value:r$p(r[5]),callData:r$p(r[6]),accessList:r[7].map(e=>r$p(e)),recId:r$p(r[8]),r:r$p(r[9]),s:r$p(r[10])})}toBytes(){return r$p("01"+encode$3([this.chainId,this.nonce,this.gasPrice,this.gasLimit,this.to,this.value,this.callData,this.accessList,this.recId,this.r,this.s]).substring(2))}toString(){return JSON.stringify(this.toJSON(),null,2)}toJSON(){return{chainId:n$n(this.chainId),nonce:n$n(this.nonce),gasPrice:n$n(this.gasPrice),gasLimit:n$n(this.gasLimit),to:n$n(this.to),value:n$n(this.value),callData:n$n(this.callData),accessList:this.accessList.map(e=>n$n(e)),recId:n$n(this.recId),r:n$n(this.r),s:n$n(this.s)}}};t$s.setEthereumTransactionDataEip2930FromBytes(e=>a$3.fromBytes(e));let e$6=class e{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case e.Default:return"DEFAULT";case e.TokenFungibleCommon:return"TOKEN_FUNGIBLE_COMMON";case e.TokenNonFungibleUnique:return"TOKEN_NON_FUNGIBLE_UNIQUE";case e.TokenFungibleCommonWithCustomFees:return"TOKEN_FUNGIBLE_COMMON_WITH_CUSTOM_FEES";case e.TokenNonFungibleUniqueWithCustomFees:return"TOKEN_NON_FUNGIBLE_UNIQUE_WITH_CUSTOM_FEES";case e.ScheduleCreateContractCall:return"SCHEDULE_CREATE_CONTRACT_CALL";case e.TopicCreateWithCustomFees:return"TOPIC_CREATE_WITH_CUSTOM_FEES";case e.SubmitMessageWithCustomFees:return"SUBMIT_MESSAGE_WITH_CUSTOM_FEES";default:return`UNKNOWN (${this._code})`}}static _fromCode(t){switch(t){case 0:return e.Default;case 1:return e.TokenFungibleCommon;case 2:return e.TokenNonFungibleUnique;case 3:return e.TokenFungibleCommonWithCustomFees;case 4:return e.TokenNonFungibleUniqueWithCustomFees;case 5:return e.ScheduleCreateContractCall;case 6:return e.TopicCreateWithCustomFees;case 7:return e.SubmitMessageWithCustomFees}throw new Error(`(BUG) SubType.fromCode() does not handle code: ${t}`)}valueOf(){return this._code}};e$6.Default=new e$6(0),e$6.TokenFungibleCommon=new e$6(1),e$6.TokenNonFungibleUnique=new e$6(2),e$6.TokenFungibleCommonWithCustomFees=new e$6(3),e$6.TokenNonFungibleUniqueWithCustomFees=new e$6(4),e$6.ScheduleCreateContractCall=new e$6(5),e$6.TopicCreateWithCustomFees=new e$6(6),e$6.SubmitMessageWithCustomFees=new e$6(7);let e$5=class e{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case e.None:return"NONE";case e.CryptoTransfer:return"CryptoTransfer";case e.CryptoUpdate:return"CryptoUpdate";case e.CryptoDelete:return"CryptoDelete";case e.CryptoAddLiveHash:return"CryptoAddLiveHash";case e.CryptoDeleteLiveHash:return"CryptoDeleteLiveHash";case e.ContractCall:return"ContractCall";case e.ContractCreate:return"ContractCreate";case e.ContractUpdate:return"ContractUpdate";case e.FileCreate:return"FileCreate";case e.FileAppend:return"FileAppend";case e.FileUpdate:return"FileUpdate";case e.FileDelete:return"FileDelete";case e.CryptoGetAccountBalance:return"CryptoGetAccountBalance";case e.CryptoGetAccountRecords:return"CryptoGetAccountRecords";case e.CryptoGetInfo:return"CryptoGetInfo";case e.ContractCallLocal:return"ContractCallLocal";case e.ContractGetInfo:return"ContractGetInfo";case e.ContractGetBytecode:return"ContractGetBytecode";case e.GetBySolidityID:return"GetBySolidityID";case e.GetByKey:return"GetByKey";case e.CryptoGetLiveHash:return"CryptoGetLiveHash";case e.CryptoGetStakers:return"CryptoGetStakers";case e.FileGetContents:return"FileGetContents";case e.FileGetInfo:return"FileGetInfo";case e.TransactionGetRecord:return"TransactionGetRecord";case e.ContractGetRecords:return"ContractGetRecords";case e.CryptoCreate:return"CryptoCreate";case e.SystemDelete:return"SystemDelete";case e.SystemUndelete:return"SystemUndelete";case e.ContractDelete:return"ContractDelete";case e.Freeze:return"Freeze";case e.CreateTransactionRecord:return"CreateTransactionRecord";case e.CryptoAccountAutoRenew:return"CryptoAccountAutoRenew";case e.ContractAutoRenew:return"ContractAutoRenew";case e.GetVersionInfo:return"GetVersionInfo";case e.TransactionGetReceipt:return"TransactionGetReceipt";case e.ConsensusCreateTopic:return"ConsensusCreateTopic";case e.ConsensusUpdateTopic:return"ConsensusUpdateTopic";case e.ConsensusDeleteTopic:return"ConsensusDeleteTopic";case e.ConsensusGetTopicInfo:return"ConsensusGetTopicInfo";case e.ConsensusSubmitMessage:return"ConsensusSubmitMessage";case e.UncheckedSubmit:return"UncheckedSubmit";case e.TokenCreate:return"TokenCreate";case e.TokenGetInfo:return"TokenGetInfo";case e.TokenFreezeAccount:return"TokenFreezeAccount";case e.TokenUnfreezeAccount:return"TokenUnfreezeAccount";case e.TokenGrantKycToAccount:return"TokenGrantKycToAccount";case e.TokenRevokeKycFromAccount:return"TokenRevokeKycFromAccount";case e.TokenDelete:return"TokenDelete";case e.TokenUpdate:return"TokenUpdate";case e.TokenMint:return"TokenMint";case e.TokenBurn:return"TokenBurn";case e.TokenAccountWipe:return"TokenAccountWipe";case e.TokenAssociateToAccount:return"TokenAssociateToAccount";case e.TokenDissociateFromAccount:return"TokenDissociateFromAccount";case e.ScheduleCreate:return"ScheduleCreate";case e.ScheduleDelete:return"ScheduleDelete";case e.ScheduleSign:return"ScheduleSign";case e.ScheduleGetInfo:return"ScheduleGetInfo";case e.TokenGetAccountNftInfos:return"TokenGetAccountNftInfos";case e.TokenGetNftInfo:return"TokenGetNftInfo";case e.TokenGetNftInfos:return"TokenGetNftInfos";case e.TokenFeeScheduleUpdate:return"TokenFeeScheduleUpdate";case e.NetworkGetExecutionTime:return"NetworkGetExecutionTime";case e.TokenPause:return"TokenPause";case e.TokenUnpause:return"TokenUnpause";case e.CryptoApproveAllowance:return"CryptoApproveAllowance";case e.CryptoDeleteAllowance:return"CryptoDeleteAllowance";case e.GetAccountDetails:return"GetAccountDetails";case e.EthereumTransaction:return"EthereumTransaction";case e.NodeStakeUpdate:return"NodeStakeUpdate";case e.Prng:return"UtilPrng";case e.TransactionGetFastRecord:return"TransactionGetFastRecord";case e.TokenUpdateNfts:return"TokenUpdateNfts";case e.NodeCreate:return"NodeCreate";case e.NodeUpdate:return"NodeUpdate";case e.NodeDelete:return"NodeDelete";case e.TokenReject:return"TokenReject";case e.TokenAirdrop:return"TokenAirdrop";case e.TokenCancelAirdrop:return"TokenCancelAirdrop";case e.TokenClaimAirdrop:return"TokenClaimAirdrop";case e.TssMessage:return"TssMessage";case e.TssVote:return"TssVote";case e.TssShareSignature:return"TssShareSignature";case e.TssEncryptionKey:return"TssEncryptionKey";case e.StateSignatureTransaction:return"StateSignatureTransaction";case e.HistoryAssemblySignature:return"HistoryAssemblySignature";case e.HistoryProofKeyPublication:return"HistoryProofKeyPublication";case e.HistoryProofVote:return"HistoryProofVote";case e.HintsKeyPublication:return"HintsKeyPublication";case e.HintsPreprocessingVote:return"HintsPreprocessingVote";case e.HintsPartialSignature:return"HintsPartialSignature";case e.CrsPublication:return"CrsPublication";case e.AtomicBatch:return"AtomicBatch";default:return`UNKNOWN (${this._code})`}}static _fromCode(t){switch(t){case 0:return e.None;case 1:return e.CryptoTransfer;case 2:return e.CryptoUpdate;case 3:return e.CryptoDelete;case 4:return e.CryptoAddLiveHash;case 5:return e.CryptoDeleteLiveHash;case 6:return e.ContractCall;case 7:return e.ContractCreate;case 8:return e.ContractUpdate;case 9:return e.FileCreate;case 10:return e.FileAppend;case 11:return e.FileUpdate;case 12:return e.FileDelete;case 13:return e.CryptoGetAccountBalance;case 14:return e.CryptoGetAccountRecords;case 15:return e.CryptoGetInfo;case 16:return e.ContractCallLocal;case 17:return e.ContractGetInfo;case 18:return e.ContractGetBytecode;case 19:return e.GetBySolidityID;case 20:return e.GetByKey;case 21:return e.CryptoGetLiveHash;case 22:return e.CryptoGetStakers;case 23:return e.FileGetContents;case 24:return e.FileGetInfo;case 25:return e.TransactionGetRecord;case 26:return e.ContractGetRecords;case 27:return e.CryptoCreate;case 28:return e.SystemDelete;case 29:return e.SystemUndelete;case 30:return e.ContractDelete;case 31:return e.Freeze;case 32:return e.CreateTransactionRecord;case 33:return e.CryptoAccountAutoRenew;case 34:return e.ContractAutoRenew;case 35:return e.GetVersionInfo;case 36:return e.TransactionGetReceipt;case 50:return e.ConsensusCreateTopic;case 51:return e.ConsensusUpdateTopic;case 52:return e.ConsensusDeleteTopic;case 53:return e.ConsensusGetTopicInfo;case 54:return e.ConsensusSubmitMessage;case 55:return e.UncheckedSubmit;case 56:return e.TokenCreate;case 58:return e.TokenGetInfo;case 59:return e.TokenFreezeAccount;case 60:return e.TokenUnfreezeAccount;case 61:return e.TokenGrantKycToAccount;case 62:return e.TokenRevokeKycFromAccount;case 63:return e.TokenDelete;case 64:return e.TokenUpdate;case 65:return e.TokenMint;case 66:return e.TokenBurn;case 67:return e.TokenAccountWipe;case 68:return e.TokenAssociateToAccount;case 69:return e.TokenDissociateFromAccount;case 70:return e.ScheduleCreate;case 71:return e.ScheduleDelete;case 72:return e.ScheduleSign;case 73:return e.ScheduleGetInfo;case 74:return e.TokenGetAccountNftInfos;case 75:return e.TokenGetNftInfo;case 76:return e.TokenGetNftInfos;case 77:return e.TokenFeeScheduleUpdate;case 78:return e.NetworkGetExecutionTime;case 79:return e.TokenPause;case 80:return e.TokenUnpause;case 81:return e.CryptoApproveAllowance;case 82:return e.CryptoDeleteAllowance;case 83:return e.GetAccountDetails;case 84:return e.EthereumTransaction;case 85:return e.NodeStakeUpdate;case 86:return e.Prng;case 87:return e.TransactionGetFastRecord;case 88:return e.TokenUpdateNfts;case 89:return e.NodeCreate;case 90:return e.NodeUpdate;case 91:return e.NodeDelete;case 92:return e.TokenReject;case 93:return e.TokenAirdrop;case 94:return e.TokenCancelAirdrop;case 95:return e.TokenClaimAirdrop;case 96:return e.TssMessage;case 97:return e.TssVote;case 98:return e.TssShareSignature;case 99:return e.TssEncryptionKey;case 100:return e.StateSignatureTransaction;case 101:return e.HintsKeyPublication;case 102:return e.HintsPreprocessingVote;case 103:return e.HintsPartialSignature;case 104:return e.HistoryAssemblySignature;case 105:return e.HistoryProofKeyPublication;case 106:return e.HistoryProofVote;case 107:return e.CrsPublication;case 108:return e.AtomicBatch}throw new Error(`(BUG) RequestType.fromCode() does not handle code: ${t}`)}valueOf(){return this._code}};e$5.None=new e$5(0),e$5.CryptoTransfer=new e$5(1),e$5.CryptoUpdate=new e$5(2),e$5.CryptoDelete=new e$5(3),e$5.CryptoAddLiveHash=new e$5(4),e$5.CryptoDeleteLiveHash=new e$5(5),e$5.ContractCall=new e$5(6),e$5.ContractCreate=new e$5(7),e$5.ContractUpdate=new e$5(8),e$5.FileCreate=new e$5(9),e$5.FileAppend=new e$5(10),e$5.FileUpdate=new e$5(11),e$5.FileDelete=new e$5(12),e$5.CryptoGetAccountBalance=new e$5(13),e$5.CryptoGetAccountRecords=new e$5(14),e$5.CryptoGetInfo=new e$5(15),e$5.ContractCallLocal=new e$5(16),e$5.ContractGetInfo=new e$5(17),e$5.ContractGetBytecode=new e$5(18),e$5.GetBySolidityID=new e$5(19),e$5.GetByKey=new e$5(20),e$5.CryptoGetLiveHash=new e$5(21),e$5.CryptoGetStakers=new e$5(22),e$5.FileGetContents=new e$5(23),e$5.FileGetInfo=new e$5(24),e$5.TransactionGetRecord=new e$5(25),e$5.ContractGetRecords=new e$5(26),e$5.CryptoCreate=new e$5(27),e$5.SystemDelete=new e$5(28),e$5.SystemUndelete=new e$5(29),e$5.ContractDelete=new e$5(30),e$5.Freeze=new e$5(31),e$5.CreateTransactionRecord=new e$5(32),e$5.CryptoAccountAutoRenew=new e$5(33),e$5.ContractAutoRenew=new e$5(34),e$5.GetVersionInfo=new e$5(35),e$5.TransactionGetReceipt=new e$5(36),e$5.ConsensusCreateTopic=new e$5(50),e$5.ConsensusUpdateTopic=new e$5(51),e$5.ConsensusDeleteTopic=new e$5(52),e$5.ConsensusGetTopicInfo=new e$5(53),e$5.ConsensusSubmitMessage=new e$5(54),e$5.UncheckedSubmit=new e$5(55),e$5.TokenCreate=new e$5(56),e$5.TokenGetInfo=new e$5(58),e$5.TokenFreezeAccount=new e$5(59),e$5.TokenUnfreezeAccount=new e$5(60),e$5.TokenGrantKycToAccount=new e$5(61),e$5.TokenRevokeKycFromAccount=new e$5(62),e$5.TokenDelete=new e$5(63),e$5.TokenUpdate=new e$5(64),e$5.TokenMint=new e$5(65),e$5.TokenBurn=new e$5(66),e$5.TokenAccountWipe=new e$5(67),e$5.TokenAssociateToAccount=new e$5(68),e$5.TokenDissociateFromAccount=new e$5(69),e$5.ScheduleCreate=new e$5(70),e$5.ScheduleDelete=new e$5(71),e$5.ScheduleSign=new e$5(72),e$5.ScheduleGetInfo=new e$5(73),e$5.TokenGetAccountNftInfos=new e$5(74),e$5.TokenGetNftInfo=new e$5(75),e$5.TokenGetNftInfos=new e$5(76),e$5.TokenFeeScheduleUpdate=new e$5(77),e$5.NetworkGetExecutionTime=new e$5(78),e$5.TokenPause=new e$5(79),e$5.TokenUnpause=new e$5(80),e$5.CryptoApproveAllowance=new e$5(81),e$5.CryptoDeleteAllowance=new e$5(82),e$5.GetAccountDetails=new e$5(83),e$5.EthereumTransaction=new e$5(84),e$5.NodeStakeUpdate=new e$5(85),e$5.Prng=new e$5(86),e$5.TransactionGetFastRecord=new e$5(87),e$5.TokenUpdateNfts=new e$5(88),e$5.NodeCreate=new e$5(89),e$5.NodeUpdate=new e$5(90),e$5.NodeDelete=new e$5(91),e$5.TokenReject=new e$5(92),e$5.TokenAirdrop=new e$5(93),e$5.TokenCancelAirdrop=new e$5(94),e$5.TokenClaimAirdrop=new e$5(95),e$5.TssMessage=new e$5(96),e$5.TssVote=new e$5(97),e$5.TssShareSignature=new e$5(98),e$5.TssEncryptionKey=new e$5(99),e$5.StateSignatureTransaction=new e$5(100),e$5.HintsKeyPublication=new e$5(101),e$5.HintsPreprocessingVote=new e$5(102),e$5.HintsPartialSignature=new e$5(103),e$5.HistoryAssemblySignature=new e$5(104),e$5.HistoryProofKeyPublication=new e$5(105),e$5.HistoryProofVote=new e$5(106),e$5.CrsPublication=new e$5(107),e$5.HistoryAssemblySignature=new e$5(104),e$5.HistoryProofKeyPublication=new e$5(105),e$5.HistoryProofVote=new e$5(106),e$5.AtomicBatch=new e$5(108);let n$9=class e extends h$3{constructor(e={}){super(),this._fileId=null,null!=e.fileId&&this.setFileId(e.fileId)}static _fromProtobuf(t){const r=t.fileGetContents;return new e({fileId:null!=r.fileID?u$c._fromProtobuf(r.fileID):void 0})}_validateChecksums(e){null!=this._fileId&&this._fileId.validateChecksum(e)}_execute(e,t){return e.file.getFileContent(t)}get fileId(){return this._fileId}setFileId(e){return this._fileId="string"==typeof e?u$c.fromString(e):e.clone(),this}_mapResponseHeader(e){return e.fileGetContents.header}_mapResponse(e){const t=e.fileGetContents.fileContents.contents;return Promise.resolve(t)}_onMakeRequest(e){return{fileGetContents:{header:e,fileID:null!=this._fileId?this._fileId._toProtobuf():null}}}_getLogId(){return`FileContentsQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("fileGetContents",n$9._fromProtobuf);const{proto:l$5}=e$s;let f$1=class e{constructor(e){this.fileId=e.fileId,this.size=e.size,this.expirationTime=e.expirationTime,this.isDeleted=e.isDeleted,this.keys=e.keys,this.fileMemo=e.fileMemo,this.ledgerId=e.ledgerId,Object.freeze(this)}static _fromProtobuf(t){const r=t.size;return new e({fileId:u$c._fromProtobuf(t.fileID),size:r instanceof Long?r:Long.fromValue(r),expirationTime:s$j._fromProtobuf(t.expirationTime),isDeleted:t.deleted,keys:null!=t.keys?s$i.__fromProtobufKeyList(t.keys):new s$i,fileMemo:null!=t.memo?t.memo:"",ledgerId:null!=t.ledgerId?r$h.fromBytes(t.ledgerId):null})}_toProtobuf(){return{fileID:this.fileId._toProtobuf(),size:this.size,expirationTime:this.expirationTime._toProtobuf(),deleted:this.isDeleted,keys:this.keys._toProtobufKey().keyList,memo:this.fileMemo,ledgerId:null!=this.ledgerId?this.ledgerId.toBytes():null}}static fromBytes(t){return e._fromProtobuf(libExports.proto.FileGetInfoResponse.FileInfo.decode(t))}toBytes(){return l$5.FileGetInfoResponse.FileInfo.encode(this._toProtobuf()).finish()}},o$a=class e extends h$3{constructor(e={}){super(),this._fileId=null,null!=e.fileId&&this.setFileId(e.fileId)}static _fromProtobuf(t){const r=t.fileGetInfo;return new e({fileId:null!=r.fileID?u$c._fromProtobuf(r.fileID):void 0})}get fileId(){return this._fileId}setFileId(e){return this._fileId="string"==typeof e?u$c.fromString(e):e.clone(),this}async getCost(e){return super.getCost(e)}_validateChecksums(e){null!=this._fileId&&this._fileId.validateChecksum(e)}_execute(e,t){return e.file.getFileInfo(t)}_mapResponseHeader(e){return e.fileGetInfo.header}_mapResponse(e,t,r){const n=e.fileGetInfo;return Promise.resolve(f$1._fromProtobuf(n.fileInfo))}_onMakeRequest(e){return{fileGetInfo:{header:e,fileID:null!=this._fileId?this._fileId._toProtobuf():null}}}_getLogId(){return`FileInfoQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("fileGetInfo",o$a._fromProtobuf);let l$4=class e extends P{constructor(e={}){super(),this._fileId=null,this._keys=null,this._expirationTime=null,this._contents=null,this._fileMemo=null,null!=e.fileId&&this.setFileId(e.fileId),null!=e.keys&&this.setKeys(e.keys),null!=e.expirationTime&&this.setExpirationTime(e.expirationTime),null!=e.contents&&this.setContents(e.contents),e.fileMemo&&null!=e.fileMemo&&this.setFileMemo(e.fileMemo)}static _fromProtobuf(t,r,n,o,i){const s=i[0].fileUpdate;return P._fromProtobufTransactions(new e({fileId:null!=s.fileID?u$c._fromProtobuf(s.fileID):void 0,keys:null!=s.keys&&null!=s.keys.keys?s.keys.keys.map(e=>t$r._fromProtobufKey(e)):void 0,expirationTime:null!=s.expirationTime?s$j._fromProtobuf(s.expirationTime):void 0,contents:null!=s.contents?s.contents:void 0,fileMemo:null!=s.memo&&Object.hasOwn(s.memo,"value")?s.memo.value:void 0}),t,r,n,o,i)}get fileId(){return this._fileId}setFileId(e){return this._requireNotFrozen(),this._fileId="string"==typeof e?u$c.fromString(e):e.clone(),this}get keys(){return this._keys}setKeys(e){if(this._requireNotFrozen(),e instanceof s$i&&null!=e.threshold)throw new Error("Cannot set threshold key as file key");return this._keys=e instanceof s$i?e.toArray():e,this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof s$j?e:s$j.fromDate(e),this}get contents(){return this._contents}setContents(e){return this._requireNotFrozen(),this._contents=e instanceof Uint8Array?e:n$g(e),this}get fileMemo(){return this._fileMemo}setFileMemo(e){return this._requireNotFrozen(),this._fileMemo=e,this}clearFileMemo(){return this._requireNotFrozen(),this._fileMemo=null,this}_validateChecksums(e){null!=this._fileId&&this._fileId.validateChecksum(e)}_execute(e,t){return e.file.updateFile(t)}_getTransactionDataCase(){return"fileUpdate"}_makeTransactionData(){return{fileID:null!=this._fileId?this._fileId._toProtobuf():null,keys:null!=this._keys?{keys:this._keys.map(e=>e._toProtobufKey())}:null,expirationTime:null!=this._expirationTime?this._expirationTime._toProtobuf():null,contents:this._contents,memo:null!=this._fileMemo?{value:this._fileMemo}:null}}_getLogId(){return`FileUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("fileUpdate",l$4._fromProtobuf);let i$6=class e extends P{constructor(e={}){super(),this._hash=null,this._keys=null,this._duration=null,this._accountId=null,null!=e.hash&&this.setHash(e.hash),null!=e.keys&&this.setKeys(e.keys),null!=e.duration&&this.setDuration(e.duration),null!=e.accountId&&this.setAccountId(e.accountId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].cryptoAddLiveHash.liveHash;return P._fromProtobufTransactions(new e({hash:null!=s.hash?s.hash:void 0,keys:null!=s.keys&&null!=s.keys.keys?s.keys.keys.map(e=>t$r._fromProtobufKey(e)):void 0,duration:null!=s.duration&&null!=s.duration.seconds?s.duration.seconds:void 0,accountId:null!=s.accountId?f$2._fromProtobuf(s.accountId):void 0}),t,r,n,o,i)}get hash(){return this._hash}setHash(e){return this._requireNotFrozen(),this._hash=e,this}get keys(){return this._keys}setKeys(e){return this._requireNotFrozen(),this._keys=e instanceof s$i?e.toArray():e,this}get duration(){return this._duration}setDuration(e){return this._requireNotFrozen(),this._duration=e instanceof s$d?e:new s$d(e),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._accountId&&this._accountId.validateChecksum(e)}_execute(e,t){return e.crypto.addLiveHash(t)}_getTransactionDataCase(){return"cryptoAddLiveHash"}_makeTransactionData(){return{liveHash:{hash:this._hash,keys:null!=this._keys?{keys:this._keys.map(e=>e._toProtobufKey())}:void 0,duration:null!=this._duration?this._duration._toProtobuf():null,accountId:null!=this._accountId?this._accountId._toProtobuf():null}}}_getLogId(){return`LiveHashAddTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("cryptoAddLiveHash",i$6._fromProtobuf);let a$2=class e extends P{constructor(e={}){super(),this._hash=null,this._accountId=null,null!=e.hash&&this.setHash(e.hash),null!=e.accountId&&this.setAccountId(e.accountId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].cryptoDeleteLiveHash;return P._fromProtobufTransactions(new e({hash:null!=s.liveHashToDelete?s.liveHashToDelete:void 0,accountId:null!=s.accountOfLiveHash?f$2._fromProtobuf(s.accountOfLiveHash):void 0}),t,r,n,o,i)}get hash(){return this._hash}setHash(e){return this._requireNotFrozen(),this._hash=e,this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._accountId&&this._accountId.validateChecksum(e)}_execute(e,t){return e.crypto.deleteLiveHash(t)}_getTransactionDataCase(){return"cryptoDeleteLiveHash"}_makeTransactionData(){return{liveHashToDelete:this._hash,accountOfLiveHash:null!=this._accountId?this._accountId._toProtobuf():null}}_getLogId(){return`LiveHashDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("cryptoDeleteLiveHash",a$2._fromProtobuf);let o$9=class e extends h$3{constructor(e={}){super(),this._accountId=null,null!=e.accountId&&this.setAccountId(e.accountId),this._hash=null,null!=e.hash&&this.setHash(e.hash)}static _fromProtobuf(t){const r=t.cryptoGetLiveHash;return new e({accountId:null!=r.accountID?f$2._fromProtobuf(r.accountID):void 0,hash:null!=r.hash?r.hash:void 0})}get accountId(){return this._accountId}setAccountId(e){return this._accountId=e instanceof f$2?e:f$2.fromString(e),this}get liveHash(){return this._hash}setHash(e){return this._hash=e,this}_validateChecksums(e){null!=this._accountId&&this._accountId.validateChecksum(e)}_execute(e,t){return e.crypto.getLiveHash(t)}_mapResponseHeader(e){return e.cryptoGetLiveHash.header}_mapResponse(e){const t=e.cryptoGetLiveHash;return Promise.resolve(s$c._fromProtobuf(t.liveHash))}_onMakeRequest(e){return{cryptoGetLiveHash:{header:e,accountID:null!=this._accountId?this._accountId._toProtobuf():null,hash:this._hash}}}_getLogId(){return`LiveHashQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("cryptoGetLiveHash",o$9._fromProtobuf);let o$8=class e{constructor(e){this.major=e.major,this.minor=e.minor,this.patch=e.patch,Object.freeze(this)}static _fromProtobuf(t){return new e({major:t.major,minor:t.minor,patch:t.patch})}_toProtobuf(){return{major:this.major,minor:this.minor,patch:this.patch}}static fromBytes(t){return e._fromProtobuf(libExports.proto.SemanticVersion.decode(t))}toBytes(){return libExports.proto.SemanticVersion.encode(this._toProtobuf()).finish()}},e$4=class e{constructor(e){this.protobufVersion=e.protobufVersion,this.servicesVersion=e.servicesVersion,Object.freeze(this)}static _fromProtobuf(t){return new e({protobufVersion:o$8._fromProtobuf(t.hapiProtoVersion),servicesVersion:o$8._fromProtobuf(t.hederaServicesVersion)})}_toProtobuf(){return{hapiProtoVersion:this.protobufVersion._toProtobuf(),hederaServicesVersion:this.servicesVersion._toProtobuf()}}static fromBytes(t){return e._fromProtobuf(libExports.proto.NetworkGetVersionInfoResponse.decode(t))}toBytes(){return libExports.proto.NetworkGetVersionInfoResponse.encode(this._toProtobuf()).finish()}},o$7=class e extends h$3{constructor(){super()}static _fromProtobuf(t){return new e}_execute(e,t){return e.network.getVersionInfo(t)}_mapResponseHeader(e){return e.networkGetVersionInfo.header}_mapResponse(e){const t=e.networkGetVersionInfo;return Promise.resolve(e$4._fromProtobuf(t))}_onMakeRequest(e){return{networkGetVersionInfo:{header:e}}}_getLogId(){return`NetworkVersionInfoQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("networkGetVersionInfo",o$7._fromProtobuf);let e$3=class e extends P{constructor(e={}){super(),this._range=null,null!=e.range&&this.setRange(e.range)}setRange(e){return this._range=e,this}get range(){return this._range}_validateChecksums(e){null!=this._range&&s$k(this._range)&&this._validateChecksums(e)}_execute(e,t){return e.util.prng(t)}static _fromProtobuf(t,r,n,o,i){const s=i[0].utilPrng;return P._fromProtobufTransactions(new e({range:s.range}),t,r,n,o,i)}_getTransactionDataCase(){return"utilPrng"}_makeTransactionData(){return{range:this.range}}_getLogId(){return`RandomGenerate:${this._transactionIds.current.validStart.toString()}`}};B.set("utilPrng",e$3._fromProtobuf);let u$5=class e extends P{constructor(e={}){super(),this._adminKey=null,this._scheduledTransaction=null,this._payerAccountId=null,this._scheduleMemo=null,this._scheduledSignerPublicKeys=new Set,this._expirationTime=null,this._waitForExpiry=null,null!=e.adminKey&&this.setAdminKey(e.adminKey),null!=e.payerAccountID&&this.setPayerAccountId(e.payerAccountID),null!=e.scheduleMemo&&this.setScheduleMemo(e.scheduleMemo),this._defaultMaxTransactionFee=new e$o(5)}static _fromProtobuf(t,r,n,o,i){const s=i[0],a=s.scheduleCreate,c=new e({adminKey:null!=a.adminKey?t$r._fromProtobufKey(a.adminKey):void 0,payerAccountID:null!=a.payerAccountID?f$2._fromProtobuf(a.payerAccountID):void 0,scheduleMemo:null!=a.memo?a.memo:void 0,waitForExpiry:null!=a.waitForExpiry?a.waitForExpiry:void 0,expirationTime:null!=a.expirationTime?s$j._fromProtobuf(a.expirationTime):void 0});if(null!=s.scheduleCreate){const e=s.scheduleCreate.scheduledTransactionBody,t=libExports.proto.TransactionBody.encode(e).finish(),r={signedTransactionBytes:libExports.proto.SignedTransaction.encode({bodyBytes:t}).finish()},n=libExports.proto.TransactionList.encode({transactionList:[r]}).finish(),o=P.fromBytes(n);c._setScheduledTransaction(o)}return P._fromProtobufTransactions(c,t,r,n,o,i)}_setScheduledTransaction(e){return this._scheduledTransaction=e,this}get adminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get payerAccountId(){return this._payerAccountId}setPayerAccountId(e){return this._requireNotFrozen(),this._payerAccountId=e,this}setScheduleMemo(e){return this._requireNotFrozen(),this._scheduleMemo=e,this}get getScheduleMemo(){return this._requireNotFrozen(),this._scheduleMemo}setScheduledTransaction(e){return this._requireNotFrozen(),e._requireNotFrozen(),this._scheduledTransaction=e.schedule()._scheduledTransaction,this}_validateChecksums(e){null!=this._payerAccountId&&this._payerAccountId.validateChecksum(e)}_execute(e,t){return e.schedule.createSchedule(t)}_getTransactionDataCase(){return"scheduleCreate"}_makeTransactionData(){return{adminKey:null!=this._adminKey?this._adminKey._toProtobufKey():null,payerAccountID:null!=this._payerAccountId?this._payerAccountId._toProtobuf():null,scheduledTransactionBody:null!=this._scheduledTransaction?this._scheduledTransaction._getScheduledTransactionBody():null,memo:this._scheduleMemo,waitForExpiry:this._waitForExpiry,expirationTime:null!=this._expirationTime?this._expirationTime._toProtobuf():null}}_getLogId(){return`ScheduleCreateTransaction:${this._transactionIds.current.validStart.toString()}`}setExpirationTime(e){return this._expirationTime=e,this}get expirationTime(){return this._requireNotFrozen(),this._expirationTime}setWaitForExpiry(e){return this._waitForExpiry=e,this}get waitForExpiry(){return this._requireNotFrozen(),this._waitForExpiry}};B.set("scheduleCreate",u$5._fromProtobuf),F.push(()=>new u$5);let u$4=class e extends P{constructor(e={}){super(),this._scheduleId=null,null!=e.scheduleId&&this.setScheduleId(e.scheduleId),this._defaultMaxTransactionFee=new e$o(5)}static _fromProtobuf(t,r,n,o,i){const s=i[0].scheduleDelete;return P._fromProtobufTransactions(new e({scheduleId:null!=s.scheduleID?o$k._fromProtobuf(s.scheduleID):void 0}),t,r,n,o,i)}get scheduleId(){return this._scheduleId}setScheduleId(e){return this._requireNotFrozen(),this._scheduleId="string"==typeof e?o$k.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._scheduleId&&this._scheduleId.validateChecksum(e)}_execute(e,t){return e.schedule.deleteSchedule(t)}_getTransactionDataCase(){return"scheduleDelete"}_makeTransactionData(){return{scheduleID:null!=this._scheduleId?this._scheduleId._toProtobuf():null}}_getLogId(){return`ScheduleDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("scheduleDelete",u$4._fromProtobuf);const{proto:a$1}=e$s;let c$1=class e{constructor(e){this.scheduleId=e.scheduleId,this.creatorAccountId=e.creatorAccountID,this.payerAccountId=e.payerAccountID,this.schedulableTransactionBody=e.schedulableTransactionBody,this.signers=e.signers,this.scheduleMemo=e.scheduleMemo,this.adminKey=null!=e.adminKey?e.adminKey:null,this.expirationTime=e.expirationTime,this.executed=e.executed,this.deleted=e.deleted,this.scheduledTransactionId=e.scheduledTransactionId,this.waitForExpiry=e.waitForExpiry,Object.freeze(this)}static _fromProtobuf(t){return new e({scheduleId:o$k._fromProtobuf(t.scheduleID),creatorAccountID:null!=t.creatorAccountID?f$2._fromProtobuf(t.creatorAccountID):null,payerAccountID:null!=t.payerAccountID?f$2._fromProtobuf(t.payerAccountID):null,schedulableTransactionBody:null!=t.scheduledTransactionBody?t.scheduledTransactionBody:null,adminKey:null!=t.adminKey?t$r._fromProtobufKey(t.adminKey):null,signers:null!=t.signers?s$i.__fromProtobufKeyList(t.signers):null,scheduleMemo:null!=t.memo?t.memo:null,expirationTime:null!=t.expirationTime?s$j._fromProtobuf(t.expirationTime):null,executed:null!=t.executionTime?s$j._fromProtobuf(t.executionTime):null,deleted:null!=t.deletionTime?s$j._fromProtobuf(t.deletionTime):null,scheduledTransactionId:null!=t.scheduledTransactionID?i$c._fromProtobuf(t.scheduledTransactionID):null,waitForExpiry:null!=t.waitForExpiry&&t.waitForExpiry})}_toProtobuf(){return{scheduleID:null!=this.scheduleId?this.scheduleId._toProtobuf():null,creatorAccountID:null!=this.creatorAccountId?this.creatorAccountId._toProtobuf():null,payerAccountID:null!=this.payerAccountId?this.payerAccountId._toProtobuf():null,scheduledTransactionBody:null!=this.schedulableTransactionBody?this.schedulableTransactionBody:null,adminKey:null!=this.adminKey?this.adminKey._toProtobufKey():null,signers:null!=this.signers?this.signers._toProtobufKey().keyList:null,memo:null!=this.scheduleMemo?this.scheduleMemo:"",expirationTime:null!=this.expirationTime?this.expirationTime._toProtobuf():null,scheduledTransactionID:null!=this.scheduledTransactionId?this.scheduledTransactionId._toProtobuf():null,waitForExpiry:this.waitForExpiry}}get scheduledTransaction(){if(null==this.schedulableTransactionBody)throw new Error("Scheduled transaction body is empty");const e=new a$1.SchedulableTransactionBody(this.schedulableTransactionBody),t=e.data;return P.fromBytes(a$1.TransactionList.encode({transactionList:[{signedTransactionBytes:a$1.SignedTransaction.encode({bodyBytes:a$1.TransactionBody.encode({transactionFee:this.schedulableTransactionBody.transactionFee,memo:this.schedulableTransactionBody.memo,[t]:e[t]}).finish()}).finish()}]}).finish())}},r$d=class e extends h$3{constructor(e={}){super(),this._scheduleId=null,null!=e.scheduleId&&this.setScheduleId(e.scheduleId)}static _fromProtobuf(t){const r=t.scheduleGetInfo;return new e({scheduleId:null!=r.scheduleID?o$k._fromProtobuf(r.scheduleID):void 0})}get scheduleId(){return this._scheduleId}setScheduleId(e){return this._scheduleId="string"==typeof e?o$k.fromString(e):e.clone(),this}async getCost(e){return super.getCost(e)}_validateChecksums(e){null!=this._scheduleId&&this._scheduleId.validateChecksum(e)}_execute(e,t){return e.schedule.getScheduleInfo(t)}_mapResponseHeader(e){return e.scheduleGetInfo.header}_mapResponse(e,t,r){const n=e.scheduleGetInfo;return Promise.resolve(c$1._fromProtobuf(n.scheduleInfo))}_onMakeRequest(e){return{scheduleGetInfo:{header:e,scheduleID:null!=this._scheduleId?this._scheduleId._toProtobuf():null}}}_getLogId(){return`ScheduleInfoQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("scheduleGetInfo",r$d._fromProtobuf);let u$3=class e extends P{constructor(e={}){super(),this._scheduleId=null,null!=e.scheduleId&&this.setScheduleId(e.scheduleId),this._defaultMaxTransactionFee=new e$o(5)}static _fromProtobuf(t,r,n,o,i){const s=i[0].scheduleSign;return P._fromProtobufTransactions(new e({scheduleId:null!=s.scheduleID?o$k._fromProtobuf(s.scheduleID):void 0}),t,r,n,o,i)}get scheduleId(){return this._scheduleId}setScheduleId(e){return this._requireNotFrozen(),this._scheduleId="string"==typeof e?o$k.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._scheduleId&&this._scheduleId.validateChecksum(e)}_execute(e,t){return e.schedule.signSchedule(t)}_getTransactionDataCase(){return"scheduleSign"}_makeTransactionData(){return{scheduleID:null!=this._scheduleId?this._scheduleId._toProtobuf():null}}_getLogId(){return`ScheduleSignTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("scheduleSign",u$3._fromProtobuf);let n$8=class e extends P{constructor(e={}){super(),this._fileId=null,this._contractId=null,this._expirationTime=null,null!=e.fileId&&this.setFileId(e.fileId),null!=e.contractId&&this.setContractId(e.contractId),null!=e.expirationTime&&this.setExpirationTime(e.expirationTime)}static _fromProtobuf(t,r,n,o,i){const s=i[0].systemDelete;return P._fromProtobufTransactions(new e({fileId:null!=s.fileID?u$c._fromProtobuf(s.fileID):void 0,contractId:null!=s.contractID?v._fromProtobuf(s.contractID):void 0,expirationTime:null!=s.expirationTime?s$j._fromProtobuf(s.expirationTime):void 0}),t,r,n,o,i)}get fileId(){return this._fileId}setFileId(e){return this._requireNotFrozen(),this._fileId=e instanceof u$c?e:u$c.fromString(e),this}get contractId(){return this._contractId}setContractId(e){return this._requireNotFrozen(),this._contractId=e instanceof v?e:v.fromString(e),this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e,this}_execute(e,t){return null!=this._fileId?e.file.systemDelete(t):e.smartContract.systemDelete(t)}_getTransactionDataCase(){return"systemDelete"}_makeTransactionData(){return{fileID:null!=this._fileId?this._fileId._toProtobuf():null,contractID:null!=this._contractId?this._contractId._toProtobuf():null,expirationTime:null!=this._expirationTime?this._expirationTime._toProtobuf():null}}_getLogId(){return`SystemDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("systemDelete",n$8._fromProtobuf);let o$6=class e extends P{constructor(e={}){super(),this._fileId=null,this._contractId=null,null!=e.fileId&&this.setFileId(e.fileId),null!=e.contractId&&this.setContractId(e.contractId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].systemUndelete;return P._fromProtobufTransactions(new e({fileId:null!=s.fileID?u$c._fromProtobuf(s.fileID):void 0,contractId:null!=s.contractID?v._fromProtobuf(s.contractID):void 0}),t,r,n,o,i)}get fileId(){return this._fileId}setFileId(e){return this._requireNotFrozen(),this._fileId=e instanceof u$c?e:u$c.fromString(e),this}get contractId(){return this._contractId}setContractId(e){return this._requireNotFrozen(),this._contractId=e instanceof v?e:v.fromString(e),this}_execute(e,t){return null!=this._fileId?e.file.systemUndelete(t):e.smartContract.systemUndelete(t)}_getTransactionDataCase(){return"systemUndelete"}_makeTransactionData(){return{fileID:null!=this._fileId?this._fileId._toProtobuf():null,contractID:null!=this._contractId?this._contractId._toProtobuf():null}}_getLogId(){return`SystemUndeleteTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("systemUndelete",o$6._fromProtobuf);let r$c=class e extends P{constructor(e={}){super(),this._tokenIds=null,this._accountId=null,this._defaultMaxTransactionFee=new e$o(5),null!=e.tokenIds&&this.setTokenIds(e.tokenIds),null!=e.accountId&&this.setAccountId(e.accountId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenAssociate;return P._fromProtobufTransactions(new e({tokenIds:null!=s.tokens?s.tokens.map(e=>u$b._fromProtobuf(e)):void 0,accountId:null!=s.account?f$2._fromProtobuf(s.account):void 0}),t,r,n,o,i)}get tokenIds(){return this._tokenIds}setTokenIds(e){return this._requireNotFrozen(),this._tokenIds=e.map(e=>"string"==typeof e?u$b.fromString(e):e.clone()),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._accountId&&this._accountId.validateChecksum(e);for(const t of null!=this._tokenIds?this._tokenIds:[])null!=t&&t.validateChecksum(e)}_execute(e,t){return e.token.associateTokens(t)}_getTransactionDataCase(){return"tokenAssociate"}_makeTransactionData(){return{tokens:null!=this._tokenIds?this._tokenIds.map(e=>e._toProtobuf()):null,account:null!=this._accountId?this._accountId._toProtobuf():null}}_getLogId(){return`TokenAssociateTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenAssociate",r$c._fromProtobuf);let r$b=class e extends P{constructor(e={}){super(),this._tokenId=null,this._amount=null,this._serials=[],null!=e.tokenId&&this.setTokenId(e.tokenId),null!=e.amount&&this.setAmount(e.amount),null!=e.serials&&this.setSerials(e.serials)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenBurn;return P._fromProtobufTransactions(new e({tokenId:null!=s.token?u$b._fromProtobuf(s.token):void 0,amount:null!=s.amount?s.amount:void 0,serials:null!=s.serialNumbers?s.serialNumbers:void 0}),t,r,n,o,i)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}get amount(){return this._amount}setAmount(e){return this._requireNotFrozen(),this._amount=e instanceof Long?e:Long.fromValue(e),this}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e)}get serials(){return this._serials}setSerials(e){return this._requireNotFrozen(),this._serials=e.map(e=>e instanceof Long?e:Long.fromValue(e)),this}_execute(e,t){return e.token.burnToken(t)}_getTransactionDataCase(){return"tokenBurn"}_makeTransactionData(){return{amount:this._amount,serialNumbers:this._serials,token:null!=this._tokenId?this._tokenId._toProtobuf():null}}_getLogId(){return`TokenBurnTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenBurn",r$b._fromProtobuf);let t$7=class{constructor(){this.fungibleToken=null,this.nft=null}static _fromProtobuf(e){return{fungibleToken:null!=e.fungibleToken?u$b._fromProtobuf(e.fungibleToken):null,nft:null!=e.nft?e$j._fromProtobuf(e.nft):null}}},o$5=class e extends P{constructor(e={}){super(),this._owner=null,null!=e.owner&&this.setOwnerId(e.owner),this._tokenIds=[],this._nftIds=[],null!=e.tokenIds&&this.setTokenIds(e.tokenIds),null!=e.nftIds&&this.setNftIds(e.nftIds)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenReject,a=s.rejections?.map(e=>t$7._fromProtobuf(e)),c=a?.filter(e=>e.fungibleToken).map(({fungibleToken:e})=>{if(null==e)throw new Error("Fungible Token cannot be null");return e}),u=a?.filter(e=>e.nft).map(({nft:e})=>{if(null==e)throw new Error("Nft cannot be null");return e});return P._fromProtobufTransactions(new e({owner:null!=s.owner?f$2._fromProtobuf(s.owner):void 0,tokenIds:c,nftIds:u}),t,r,n,o,i)}get tokenIds(){return this._tokenIds}setTokenIds(e){return this._requireNotFrozen(),this._tokenIds=e,this}addTokenId(e){return this._requireNotFrozen(),this._tokenIds?.push(e),this}get nftIds(){return this._nftIds}setNftIds(e){return this._requireNotFrozen(),this._nftIds=e,this}addNftId(e){return this._requireNotFrozen(),this._nftIds?.push(e),this}get ownerId(){return this._owner}setOwnerId(e){return this._requireNotFrozen(),this._owner=e,this}_execute(e,t){return e.token.rejectToken(t)}_getTransactionDataCase(){return"tokenReject"}_makeTransactionData(){const e=[];for(const t of this._tokenIds)e.push({fungibleToken:t._toProtobuf()});for(const t of this._nftIds)e.push({nft:t._toProtobuf()});return{owner:this.ownerId?._toProtobuf()??null,rejections:e}}_getLogId(){return`TokenRejectTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenReject",o$5._fromProtobuf);let r$a=class e extends P{constructor(e={}){super(),this._tokenIds=null,this._accountId=null,this._defaultMaxTransactionFee=new e$o(5),null!=e.tokenIds&&this.setTokenIds(e.tokenIds),null!=e.accountId&&this.setAccountId(e.accountId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenDissociate;return P._fromProtobufTransactions(new e({tokenIds:null!=s.tokens?s.tokens.map(e=>u$b._fromProtobuf(e)):void 0,accountId:null!=s.account?f$2._fromProtobuf(s.account):void 0}),t,r,n,o,i)}get tokenIds(){return this._tokenIds}setTokenIds(e){return this._requireNotFrozen(),this._tokenIds=e.map(e=>"string"==typeof e?u$b.fromString(e):e.clone()),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._accountId&&this._accountId.validateChecksum(e);for(const t of null!=this._tokenIds?this._tokenIds:[])null!=t&&t.validateChecksum(e)}_execute(e,t){return e.token.dissociateTokens(t)}_getTransactionDataCase(){return"tokenDissociate"}_makeTransactionData(){return{tokens:null!=this._tokenIds?this._tokenIds.map(e=>e._toProtobuf()):null,account:null!=this._accountId?this._accountId._toProtobuf():null}}_getLogId(){return`TokenDissociateTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenDissociate",r$a._fromProtobuf);let r$9=class e extends e$i{constructor(e={}){super(e),this._numerator=null,null!=e.numerator&&this.setNumerator(e.numerator),this._denominator=null,null!=e.denominator&&this.setDenominator(e.denominator),this._min=null,null!=e.min&&this.setMin(e.min),this._max,null!=e.max&&this.setMax(e.max),this._assessmentMethod,null!=e.assessmentMethod&&this.setAssessmentMethod(e.assessmentMethod)}get numerator(){return this._numerator}setNumerator(e){return this._numerator="number"==typeof e?Long.fromNumber(e):e,this}get denominator(){return this._denominator}setDenominator(e){return this._denominator="number"==typeof e?Long.fromNumber(e):e,this}get min(){return this._min}setMin(e){return this._min="number"==typeof e?Long.fromNumber(e):e,this}get max(){return this._max}setMax(e){return this._max="number"==typeof e?Long.fromNumber(e):e,this}get assessmentMethod(){return this._assessmentMethod}setAssessmentMethod(e){return this._assessmentMethod=e,this}static _fromProtobuf(t){const r=t.fractionalFee,n=r.fractionalAmount;return new e({feeCollectorAccountId:null!=t.feeCollectorAccountId?f$2._fromProtobuf(t.feeCollectorAccountId):void 0,allCollectorsAreExempt:null!=t.allCollectorsAreExempt?t.allCollectorsAreExempt:void 0,numerator:null!=n.numerator?n.numerator:void 0,denominator:null!=n.denominator?n.denominator:void 0,min:null!=r.minimumAmount?r.minimumAmount:void 0,max:null!=r.maximumAmount?r.maximumAmount:void 0,assessmentMethod:null!=r.netOfTransfers?new e$a(r.netOfTransfers):void 0})}_toProtobuf(){return{feeCollectorAccountId:null!=this.feeCollectorAccountId?this.feeCollectorAccountId._toProtobuf():null,allCollectorsAreExempt:this.allCollectorsAreExempt,fractionalFee:{fractionalAmount:{numerator:this._numerator,denominator:this._denominator},minimumAmount:this._min,maximumAmount:this._max,netOfTransfers:null!=this._assessmentMethod&&this._assessmentMethod.valueOf()}}}},l$3=class e extends e$i{constructor(e={}){super(e),this._fallbackFee=null,null!=e.fallbackFee&&this.setFallbackFee(e.fallbackFee),this._numerator=null,null!=e.numerator&&this.setNumerator(e.numerator),this._denominator=null,null!=e.denominator&&this.setDenominator(e.denominator)}get fallbackFee(){return this._fallbackFee}setFallbackFee(e){return this._fallbackFee=e,this}get numerator(){return this._numerator}setNumerator(e){return this._numerator="number"==typeof e?Long.fromNumber(e):e,this}get denominator(){return this._denominator}setDenominator(e){return this._denominator="number"==typeof e?Long.fromNumber(e):e,this}static _fromProtobuf(t){const r=t.royaltyFee,n=r.exchangeValueFraction;return new e({feeCollectorAccountId:null!=t.feeCollectorAccountId?f$2._fromProtobuf(t.feeCollectorAccountId):void 0,allCollectorsAreExempt:null!=t.allCollectorsAreExempt?t.allCollectorsAreExempt:void 0,fallbackFee:null!=r.fallbackFee?l$a._fromProtobuf({fixedFee:r.fallbackFee}):void 0,numerator:null!=n.numerator?n.numerator:void 0,denominator:null!=n.denominator?n.denominator:void 0})}_toProtobuf(){return{feeCollectorAccountId:null!=this.feeCollectorAccountId?this.feeCollectorAccountId._toProtobuf():null,allCollectorsAreExempt:this.allCollectorsAreExempt,royaltyFee:{exchangeValueFraction:{numerator:this._numerator,denominator:this._denominator},fallbackFee:null!=this._fallbackFee?this._fallbackFee._toProtobuf().fixedFee:null}}}},e$2=class e{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case e.FungibleCommon:return"FUNGIBLE_COMMON";case e.NonFungibleUnique:return"NON_FUNGIBLE_UNIQUE";default:return`UNKNOWN (${this._code})`}}static _fromCode(t){switch(t){case 0:return e.FungibleCommon;case 1:return e.NonFungibleUnique}throw new Error(`(BUG) TokenType.fromCode() does not handle code: ${t}`)}valueOf(){return this._code}};e$2.FungibleCommon=new e$2(0),e$2.NonFungibleUnique=new e$2(1);let e$1=class e{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case e.Infinite:return"INFINITE";case e.Finite:return"FINITE";default:return`UNKNOWN (${this._code})`}}static _fromCode(t){switch(t){case 0:return e.Infinite;case 1:return e.Finite}throw new Error(`(BUG) TokenSupplyType.fromCode() does not handle code: ${t}`)}valueOf(){return this._code}};e$1.Infinite=new e$1(0),e$1.Finite=new e$1(1);class _ extends P{constructor(e={}){super(),this._tokenName=null,this._tokenSymbol=null,this._decimals=null,this._initialSupply=null,this._treasuryAccountId=null,this._adminKey=null,this._kycKey=null,this._freezeKey=null,this._pauseKey=null,this._wipeKey=null,this._supplyKey=null,this._feeScheduleKey=null,this._freezeDefault=null,this._autoRenewAccountId=null,this._expirationTime=new s$j(Math.floor(Date.now()/1e3+w$1.toNumber()),0),this._autoRenewPeriod=new s$d(w$1),this._tokenMemo=null,this._customFees=[],this._tokenType=null,this._supplyType=null,this._maxSupply=null,this._defaultMaxTransactionFee=new e$o(30),this._metadataKey=null,this._metadata=null,null!=e.tokenName&&this.setTokenName(e.tokenName),null!=e.tokenSymbol&&this.setTokenSymbol(e.tokenSymbol),null!=e.decimals&&this.setDecimals(e.decimals),null!=e.initialSupply&&this.setInitialSupply(e.initialSupply),null!=e.treasuryAccountId&&this.setTreasuryAccountId(e.treasuryAccountId),null!=e.adminKey&&this.setAdminKey(e.adminKey),null!=e.kycKey&&this.setKycKey(e.kycKey),null!=e.freezeKey&&this.setFreezeKey(e.freezeKey),null!=e.pauseKey&&this.setPauseKey(e.pauseKey),null!=e.wipeKey&&this.setWipeKey(e.wipeKey),null!=e.supplyKey&&this.setSupplyKey(e.supplyKey),null!=e.feeScheduleKey&&this.setFeeScheduleKey(e.feeScheduleKey),null!=e.freezeDefault&&this.setFreezeDefault(e.freezeDefault),null!=e.autoRenewAccountId&&this.setAutoRenewAccountId(e.autoRenewAccountId),null!=e.expirationTime&&this.setExpirationTime(e.expirationTime),null!=e.autoRenewPeriod&&this.setAutoRenewPeriod(e.autoRenewPeriod),null!=e.tokenMemo&&this.setTokenMemo(e.tokenMemo),null!=e.customFees&&this.setCustomFees(e.customFees),null!=e.tokenType&&this.setTokenType(e.tokenType),null!=e.supplyType&&this.setSupplyType(e.supplyType),null!=e.maxSupply&&this.setMaxSupply(e.maxSupply),null!=e.metadataKey&&this.setMetadataKey(e.metadataKey),null!=e.metadata&&this.setMetadata(e.metadata)}static _fromProtobuf(e,t,r,n,o){const i=o[0].tokenCreation;return P._fromProtobufTransactions(new _({tokenName:null!=i.name?i.name:void 0,tokenSymbol:null!=i.symbol?i.symbol:void 0,decimals:null!=i.decimals?i.decimals:void 0,initialSupply:null!=i.initialSupply?i.initialSupply:void 0,treasuryAccountId:null!=i.treasury?f$2._fromProtobuf(i.treasury):void 0,adminKey:null!=i.adminKey?t$r._fromProtobufKey(i.adminKey):void 0,kycKey:null!=i.kycKey?t$r._fromProtobufKey(i.kycKey):void 0,freezeKey:null!=i.freezeKey?t$r._fromProtobufKey(i.freezeKey):void 0,pauseKey:null!=i.pauseKey?t$r._fromProtobufKey(i.pauseKey):void 0,wipeKey:null!=i.wipeKey?t$r._fromProtobufKey(i.wipeKey):void 0,supplyKey:null!=i.supplyKey?t$r._fromProtobufKey(i.supplyKey):void 0,feeScheduleKey:null!=i.feeScheduleKey?t$r._fromProtobufKey(i.feeScheduleKey):void 0,freezeDefault:null!=i.freezeDefault?i.freezeDefault:void 0,autoRenewAccountId:null!=i.autoRenewAccount?f$2._fromProtobuf(i.autoRenewAccount):void 0,expirationTime:null!=i.expiry?s$j._fromProtobuf(i.expiry):void 0,autoRenewPeriod:null!=i.autoRenewPeriod?s$d._fromProtobuf(i.autoRenewPeriod):void 0,tokenMemo:null!=i.memo?i.memo:void 0,customFees:null!=i.customFees?i.customFees.map(e=>null!=e.fixedFee?l$a._fromProtobuf(e):null!=e.fractionalFee?r$9._fromProtobuf(e):l$3._fromProtobuf(e)):void 0,tokenType:null!=i.tokenType?e$2._fromCode(i.tokenType):void 0,supplyType:null!=i.supplyType?e$1._fromCode(i.supplyType):void 0,maxSupply:null!=i.maxSupply?i.maxSupply:void 0,metadataKey:null!=i.metadataKey?t$r._fromProtobufKey(i.metadataKey):void 0,metadata:null!=i.metadata?i.metadata:void 0}),e,t,r,n,o)}get tokenName(){return this._tokenName}setTokenName(e){return this._requireNotFrozen(),this._tokenName=e,this}get tokenSymbol(){return this._tokenSymbol}setTokenSymbol(e){return this._requireNotFrozen(),this._tokenSymbol=e,this}get decimals(){return this._decimals}setDecimals(e){return this._requireNotFrozen(),this._decimals=e instanceof Long?e:Long.fromValue(e),this}get initialSupply(){return this._initialSupply}setInitialSupply(e){return this._requireNotFrozen(),this._initialSupply=Long.fromValue(e),this}get treasuryAccountId(){return this._treasuryAccountId}setTreasuryAccountId(e){return this._requireNotFrozen(),this._treasuryAccountId="string"==typeof e?f$2.fromString(e):e.clone(),this}get adminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get kycKey(){return this._kycKey}setKycKey(e){return this._requireNotFrozen(),this._kycKey=e,this}get freezeKey(){return this._freezeKey}freezeWith(e){return!this._autoRenewAccountId&&this.transactionId?.accountId&&null!=this.autoRenewPeriod?this.setAutoRenewAccountId(this.transactionId?.accountId):!this._autoRenewAccountId&&e?.operatorAccountId&&null!=this.autoRenewPeriod&&this.setAutoRenewAccountId(e.operatorAccountId),super.freezeWith(e)}setFreezeKey(e){return this._requireNotFrozen(),this._freezeKey=e,this}get pauseKey(){return this._pauseKey}setPauseKey(e){return this._requireNotFrozen(),this._pauseKey=e,this}get wipeKey(){return this._wipeKey}setWipeKey(e){return this._requireNotFrozen(),this._wipeKey=e,this}get supplyKey(){return this._supplyKey}setSupplyKey(e){return this._requireNotFrozen(),this._supplyKey=e,this}get feeScheduleKey(){return this._feeScheduleKey}setFeeScheduleKey(e){return this._requireNotFrozen(),this._feeScheduleKey=e,this}get freezeDefault(){return this._freezeDefault}setFreezeDefault(e){return this._requireNotFrozen(),this._freezeDefault=e,this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof s$j?e:s$j.fromDate(e),this._autoRenewPeriod=null,this}get autoRenewAccountId(){return this._autoRenewAccountId}setAutoRenewAccountId(e){return this._requireNotFrozen(),this._autoRenewAccountId=e instanceof f$2?e:f$2.fromString(e),this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof s$d?e:new s$d(e),this}get tokenMemo(){return this._tokenMemo}setTokenMemo(e){return this._requireNotFrozen(),this._tokenMemo=e,this}get customFees(){return this._customFees}setCustomFees(e){return this._customFees=e,this}get tokenType(){return this._tokenType}setTokenType(e){return this._tokenType=e,this}get supplyType(){return this._supplyType}setSupplyType(e){return this._supplyType=e,this}get maxSupply(){return this._maxSupply}setMaxSupply(e){return this._maxSupply="number"==typeof e?Long.fromNumber(e):e,this}get metadataKey(){return this._metadataKey}setMetadataKey(e){return this._requireNotFrozen(),this._metadataKey=e,this}get metadata(){return this._metadata}setMetadata(e){return this._requireNotFrozen(),this._metadata=e,this}_validateChecksums(e){null!=this._treasuryAccountId&&this._treasuryAccountId.validateChecksum(e),null!=this._autoRenewAccountId&&this._autoRenewAccountId.validateChecksum(e)}_execute(e,t){return e.token.createToken(t)}_getTransactionDataCase(){return"tokenCreation"}_makeTransactionData(){return{name:this._tokenName,symbol:this._tokenSymbol,decimals:null!=this._decimals?this._decimals.toInt():null,initialSupply:this._initialSupply,treasury:null!=this._treasuryAccountId?this._treasuryAccountId._toProtobuf():null,adminKey:null!=this._adminKey?this._adminKey._toProtobufKey():null,kycKey:null!=this._kycKey?this._kycKey._toProtobufKey():null,freezeKey:null!=this._freezeKey?this._freezeKey._toProtobufKey():null,pauseKey:null!=this._pauseKey?this._pauseKey._toProtobufKey():null,wipeKey:null!=this._wipeKey?this._wipeKey._toProtobufKey():null,supplyKey:null!=this._supplyKey?this._supplyKey._toProtobufKey():null,feeScheduleKey:null!=this._feeScheduleKey?this._feeScheduleKey._toProtobufKey():null,freezeDefault:this._freezeDefault,autoRenewAccount:null!=this._autoRenewAccountId?this._autoRenewAccountId._toProtobuf():null,expiry:null!=this._expirationTime?this._expirationTime._toProtobuf():null,autoRenewPeriod:null!=this._autoRenewPeriod?this._autoRenewPeriod._toProtobuf():null,memo:this._tokenMemo,customFees:this.customFees.map(e=>e._toProtobuf()),tokenType:null!=this._tokenType?this._tokenType._code:null,supplyType:null!=this._supplyType?this._supplyType._code:null,maxSupply:this.maxSupply,metadataKey:null!=this._metadataKey?this._metadataKey._toProtobufKey():null,metadata:null!=this._metadata?this._metadata:void 0}}_getLogId(){return`TokenCreateTransaction:${this._transactionIds.current.validStart.toString()}`}}B.set("tokenCreation",_._fromProtobuf);let n$7=class e extends P{constructor(e={}){super(),this._tokenId=null,null!=e.tokenId&&this.setTokenId(e.tokenId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenDeletion;return P._fromProtobufTransactions(new e({tokenId:null!=s.token?u$b._fromProtobuf(s.token):void 0}),t,r,n,o,i)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e)}_execute(e,t){return e.token.deleteToken(t)}_getTransactionDataCase(){return"tokenDeletion"}_makeTransactionData(){return{token:null!=this._tokenId?this._tokenId._toProtobuf():null}}_getLogId(){return`TokenDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenDeletion",n$7._fromProtobuf);let u$2=class e extends P{constructor(e={}){super(),this._tokenId=null,this._customFees=[],null!=e.tokenId&&this.setTokenId(e.tokenId),null!=e.customFees&&this.setCustomFees(e.customFees)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenFeeScheduleUpdate;return P._fromProtobufTransactions(new e({tokenId:null!=s.tokenId?u$b._fromProtobuf(s.tokenId):void 0,customFees:null!=s.customFees?s.customFees.map(e=>null!=e.fixedFee?l$a._fromProtobuf(e):null!=e.fractionalFee?r$9._fromProtobuf(e):l$3._fromProtobuf(e)):void 0}),t,r,n,o,i)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):u$b._fromProtobuf(e._toProtobuf()),this}get customFees(){return this._customFees}setCustomFees(e){return this._requireNotFrozen(),this._customFees=e,this}_execute(e,t){return e.token.updateTokenFeeSchedule(t)}_getTransactionDataCase(){return"tokenFeeScheduleUpdate"}_makeTransactionData(){return{tokenId:null!=this._tokenId?this._tokenId._toProtobuf():null,customFees:this._customFees.map(e=>e._toProtobuf())}}_getLogId(){return`TokenFeeScheduleUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenFeeScheduleUpdate",u$2._fromProtobuf);let r$8=class e extends P{constructor(e={}){super(),this._tokenId=null,this._accountId=null,null!=e.tokenId&&this.setTokenId(e.tokenId),null!=e.accountId&&this.setAccountId(e.accountId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenFreeze;return P._fromProtobufTransactions(new e({tokenId:null!=s.token?u$b._fromProtobuf(s.token):void 0,accountId:null!=s.account?f$2._fromProtobuf(s.account):void 0}),t,r,n,o,i)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e),null!=this._accountId&&this._accountId.validateChecksum(e)}_execute(e,t){return e.token.freezeTokenAccount(t)}_getTransactionDataCase(){return"tokenFreeze"}_makeTransactionData(){return{token:null!=this._tokenId?this._tokenId._toProtobuf():null,account:null!=this._accountId?this._accountId._toProtobuf():null}}_getLogId(){return`TokenFreezeTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenFreeze",r$8._fromProtobuf);let r$7=class e extends P{constructor(e={}){super(),this._tokenId=null,this._accountId=null,null!=e.tokenId&&this.setTokenId(e.tokenId),null!=e.accountId&&this.setAccountId(e.accountId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenGrantKyc;return P._fromProtobufTransactions(new e({tokenId:null!=s.token?u$b._fromProtobuf(s.token):void 0,accountId:null!=s.account?f$2._fromProtobuf(s.account):void 0}),t,r,n,o,i)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e),null!=this._accountId&&this._accountId.validateChecksum(e)}_execute(e,t){return e.token.grantKycToTokenAccount(t)}_getTransactionDataCase(){return"tokenGrantKyc"}_makeTransactionData(){return{token:null!=this._tokenId?this._tokenId._toProtobuf():null,account:null!=this._accountId?this._accountId._toProtobuf():null}}_getLogId(){return`TokenGrantKycTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenGrantKyc",r$7._fromProtobuf);let d$2=class e{constructor(e){this.tokenId=e.tokenId,this.name=e.name,this.symbol=e.symbol,this.decimals=e.decimals,this.totalSupply=e.totalSupply,this.treasuryAccountId=e.treasuryAccountId,this.adminKey=e.adminKey,this.kycKey=e.kycKey,this.freezeKey=e.freezeKey,this.pauseKey=e.pauseKey,this.wipeKey=e.wipeKey,this.supplyKey=e.supplyKey,this.feeScheduleKey=e.feeScheduleKey,this.defaultFreezeStatus=e.defaultFreezeStatus,this.defaultKycStatus=e.defaultKycStatus,this.pauseStatus=e.pauseStatus,this.isDeleted=e.isDeleted,this.autoRenewAccountId=e.autoRenewAccountId,this.autoRenewPeriod=e.autoRenewPeriod,this.expirationTime=e.expirationTime,this.tokenMemo=e.tokenMemo,this.customFees=e.customFees,this.tokenType=e.tokenType,this.supplyType=e.supplyType,this.maxSupply=e.maxSupply,this.ledgerId=e.ledgerId,this.metadataKey=e.metadataKey,this.metadata=e.metadata}static _fromProtobuf(t){const r=t.defaultFreezeStatus,n=t.defaultKycStatus,o=t.pauseStatus,i=null!=t.autoRenewAccount?f$2._fromProtobuf(t.autoRenewAccount):new f$2(0);return new e({tokenId:u$b._fromProtobuf(t.tokenId),name:t.name,symbol:t.symbol,decimals:t.decimals,totalSupply:Long.fromValue(t.totalSupply),treasuryAccountId:null!=t.treasury?f$2._fromProtobuf(t.treasury):null,adminKey:null!=t.adminKey?t$r._fromProtobufKey(t.adminKey):null,kycKey:null!=t.kycKey?t$r._fromProtobufKey(t.kycKey):null,freezeKey:null!=t.freezeKey?t$r._fromProtobufKey(t.freezeKey):null,pauseKey:null!=t.pauseKey?t$r._fromProtobufKey(t.pauseKey):null,wipeKey:null!=t.wipeKey?t$r._fromProtobufKey(t.wipeKey):null,supplyKey:null!=t.supplyKey?t$r._fromProtobufKey(t.supplyKey):null,feeScheduleKey:null!=t.feeScheduleKey?t$r._fromProtobufKey(t.feeScheduleKey):null,defaultFreezeStatus:0===r?null:1==r,defaultKycStatus:0===n?null:1==n,pauseStatus:0===o?null:1==o,isDeleted:t.deleted,autoRenewAccountId:0!=i.shard.toInt()||0!=i.realm.toInt()||0!=i.num.toInt()?i:null,autoRenewPeriod:null!=t.autoRenewPeriod?s$d._fromProtobuf(t.autoRenewPeriod):null,expirationTime:null!=t.expiry?s$j._fromProtobuf(t.expiry):null,tokenMemo:null!=t.memo?t.memo:"",customFees:null!=t.customFees?t.customFees.map(e=>null!=e.fixedFee?l$a._fromProtobuf(e):null!=e.fractionalFee?r$9._fromProtobuf(e):l$3._fromProtobuf(e)):[],tokenType:null!=t.tokenType?e$2._fromCode(t.tokenType):null,supplyType:null!=t.supplyType?e$1._fromCode(t.supplyType):null,maxSupply:null!=t.maxSupply?t.maxSupply:null,ledgerId:null!=t.ledgerId?r$h.fromBytes(t.ledgerId):null,metadataKey:null!=t.metadataKey?t$r._fromProtobufKey(t.metadataKey):null,metadata:null!=t.metadata?t.metadata:new Uint8Array})}_toProtobuf(){return{tokenId:this.tokenId._toProtobuf(),name:this.name,symbol:this.symbol,decimals:this.decimals,totalSupply:this.totalSupply,treasury:null!=this.treasuryAccountId?this.treasuryAccountId._toProtobuf():null,adminKey:null!=this.adminKey?this.adminKey._toProtobufKey():null,kycKey:null!=this.kycKey?this.kycKey._toProtobufKey():null,freezeKey:null!=this.freezeKey?this.freezeKey._toProtobufKey():null,pauseKey:null!=this.pauseKey?this.pauseKey._toProtobufKey():null,wipeKey:null!=this.wipeKey?this.wipeKey._toProtobufKey():null,supplyKey:null!=this.supplyKey?this.supplyKey._toProtobufKey():null,feeScheduleKey:null!=this.feeScheduleKey?this.feeScheduleKey._toProtobufKey():null,defaultFreezeStatus:null==this.defaultFreezeStatus?0:this.defaultFreezeStatus?1:2,defaultKycStatus:null==this.defaultKycStatus?0:this.defaultKycStatus?1:2,pauseStatus:null==this.pauseStatus?0:this.pauseStatus?1:2,deleted:this.isDeleted,autoRenewAccount:null!=this.autoRenewAccountId?this.autoRenewAccountId._toProtobuf():void 0,autoRenewPeriod:null!=this.autoRenewPeriod?this.autoRenewPeriod._toProtobuf():null,expiry:null!=this.expirationTime?this.expirationTime._toProtobuf():null,memo:this.tokenMemo,customFees:this.customFees.map(e=>e._toProtobuf()),tokenType:null!=this.tokenType?this.tokenType._code:null,supplyType:null!=this.supplyType?this.supplyType._code:null,maxSupply:this.maxSupply,ledgerId:null!=this.ledgerId?this.ledgerId.toBytes():null,metadataKey:null!=this.metadataKey?this.metadataKey._toProtobufKey():null,metadata:null!=this.metadata?this.metadata:null}}static fromBytes(t){return e._fromProtobuf(libExports.proto.TokenInfo.decode(t))}toBytes(){return libExports.proto.TokenInfo.encode(this._toProtobuf()).finish()}},r$6=class e extends h$3{constructor(e={}){super(),this._tokenId=null,null!=e.tokenId&&this.setTokenId(e.tokenId)}static _fromProtobuf(t){const r=t.tokenGetInfo;return new e({tokenId:null!=r.token?u$b._fromProtobuf(r.token):void 0})}get tokenId(){return this._tokenId}setTokenId(e){return this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}async getCost(e){return super.getCost(e)}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e)}_execute(e,t){return e.token.getTokenInfo(t)}_mapResponseHeader(e){return e.tokenGetInfo.header}_mapResponse(e,t,r){const n=e.tokenGetInfo;return Promise.resolve(d$2._fromProtobuf(n.tokenInfo))}_onMakeRequest(e){return{tokenGetInfo:{header:e,token:null!=this._tokenId?this._tokenId._toProtobuf():null}}}_getLogId(){return`TokenInfoQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("tokenGetInfo",r$6._fromProtobuf);let r$5=class e extends P{constructor(e={}){super(),this._tokenId=null,this._amount=null,this._metadata=[],null!=e.tokenId&&this.setTokenId(e.tokenId),null!=e.amount&&this.setAmount(e.amount),null!=e.metadata&&this.setMetadata(e.metadata)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenMint;return P._fromProtobufTransactions(new e({tokenId:null!=s.token?u$b._fromProtobuf(s.token):void 0,amount:null!=s.amount?s.amount:void 0,metadata:null!=s.metadata?s.metadata:void 0}),t,r,n,o,i)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}get amount(){return this._amount}setAmount(e){return this._requireNotFrozen(),this._amount=e instanceof Long?e:Long.fromValue(e),this}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e)}get metadata(){return this._metadata}addMetadata(e){return this._requireNotFrozen(),"string"==typeof e&&console.warn("Passing a `string` for token metadata is considered a bug, and has been removed. Please provide a `Uint8Array` instead."),this._metadata.push("string"==typeof e?r$p(e):e),this}setMetadata(e){this._requireNotFrozen();for(const t of e)if("string"==typeof t){console.warn("Passing a `string` for token metadata is considered a bug, and has been removed. Please provide a `Uint8Array` instead.");break}return this._metadata=e.map(e=>"string"==typeof e?r$p(e):e),this}_execute(e,t){return e.token.mintToken(t)}_getTransactionDataCase(){return"tokenMint"}_makeTransactionData(){return{amount:this._amount,token:null!=this._tokenId?this._tokenId._toProtobuf():null,metadata:this._metadata}}_getLogId(){return`TokenMintTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenMint",r$5._fromProtobuf);let n$6=class e{constructor(e){this.nftId=e.nftId,this.accountId=e.accountId,this.creationTime=e.creationTime,this.metadata=e.metadata,this.ledgerId=e.ledgerId,this.spenderId=e.spenderId,Object.freeze(this)}static _fromProtobuf(t){return new e({nftId:e$j._fromProtobuf(t.nftID),accountId:f$2._fromProtobuf(t.accountID),creationTime:s$j._fromProtobuf(t.creationTime),metadata:void 0!==t.metadata?t.metadata:null,ledgerId:null!=t.ledgerId?r$h.fromBytes(t.ledgerId):null,spenderId:null!=t.spenderId?f$2._fromProtobuf(t.spenderId):null})}_toProtobuf(){return{nftID:this.nftId._toProtobuf(),accountID:this.accountId._toProtobuf(),creationTime:this.creationTime._toProtobuf(),metadata:this.metadata,ledgerId:null!=this.ledgerId?this.ledgerId.toBytes():null,spenderId:null!=this.spenderId?this.spenderId._toProtobuf():null}}toJson(){return{nftId:this.nftId.toString(),accountId:this.accountId.toString(),creationTime:this.creationTime.toString(),metadata:null!=this.metadata?n$n(this.metadata):null,ledgerId:null!=this.ledgerId?this.ledgerId.toString():null,spenderId:null!=this.spenderId?this.spenderId.toString():null}}toString(){return JSON.stringify(this.toJson())}},u$1=class e extends h$3{constructor(e={}){super(),this._nftId=null,null!=e.nftId&&this.setNftId(e.nftId),this._accountId=null,null!=e.accountId&&this.setAccountId(e.accountId),this._tokenId=null,null!=e.tokenId&&this.setTokenId(e.tokenId),this._start=null,null!=e.start&&this.setStart(e.start),this._end=null,null!=e.end&&this.setEnd(e.end)}static _fromProtobuf(t){if(null!=t.tokenGetNftInfo){const r=t.tokenGetNftInfo;return new e({nftId:null!=r.nftID?e$j._fromProtobuf(r.nftID):void 0})}if(null!=t.tokenGetAccountNftInfos){const r=t.tokenGetAccountNftInfos;return new e({accountId:null!=r.accountID?f$2._fromProtobuf(r.accountID):void 0,start:null!=r.start?r.start:void 0,end:null!=r.end?r.end:void 0})}{const r=t.tokenGetNftInfos;return new e({tokenId:null!=r.tokenID?u$b._fromProtobuf(r.tokenID):void 0,start:null!=r.start?r.start:void 0,end:null!=r.end?r.end:void 0})}}get nftId(){return this._nftId}setNftId(e){return this._nftId="string"==typeof e?e$j.fromString(e):e$j._fromProtobuf(e._toProtobuf()),this}get accountId(){return console.warn("`TokenNftInfoQuery.accountId` is deprecated with no replacement"),this._accountId}setAccountId(e){return console.warn("`TokenNftInfoQuery.setAccountId()` is deprecated with no replacement"),this._accountId="string"==typeof e?f$2.fromString(e):f$2._fromProtobuf(e._toProtobuf()),this}get tokenId(){return console.warn("`TokenNftInfoQuery.tokenId` is deprecated with no replacement"),this._tokenId}setTokenId(e){return console.warn("`TokenNftInfoQuery.setTokenId()` is deprecated with no replacement"),this._tokenId="string"==typeof e?u$b.fromString(e):u$b._fromProtobuf(e._toProtobuf()),this}get start(){return console.warn("`TokenNftInfoQuery.start` is deprecated with no replacement"),this._start}setStart(e){return console.warn("`TokenNftInfoQuery.setStart()` is deprecated with no replacement"),this._start="number"==typeof e?Long.fromNumber(e):e,this}get end(){return console.warn("`TokenNftInfoQuery.end` is deprecated with no replacement"),this._end}setEnd(e){return console.warn("`TokenNftInfoQuery.setEnd()` is deprecated with no replacement"),this._end="number"==typeof e?Long.fromNumber(e):e,this}async getCost(e){return super.getCost(e)}_execute(e,t){return e.token.getTokenNftInfo(t)}_mapResponseHeader(e){return e.tokenGetNftInfo.header}_mapResponse(e,t,r){const n=[e.tokenGetNftInfo.nft];return Promise.resolve(n.map(e=>n$6._fromProtobuf(e)))}_onMakeRequest(e){return{tokenGetNftInfo:{header:e,nftID:null!=this._nftId?this._nftId._toProtobuf():null}}}_getLogId(){return`TokenNftInfoQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("tokenGetNftInfo",u$1._fromProtobuf);let n$5=class e extends P{constructor(e={}){super(),this._tokenId=null,null!=e.tokenId&&this.setTokenId(e.tokenId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenPause;return P._fromProtobufTransactions(new e({tokenId:null!=s.token?u$b._fromProtobuf(s.token):void 0}),t,r,n,o,i)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e)}_execute(e,t){return e.token.pauseToken(t)}_getTransactionDataCase(){return"tokenPause"}_makeTransactionData(){return{token:null!=this._tokenId?this._tokenId._toProtobuf():null}}_getLogId(){return`TokenPauseTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenPause",n$5._fromProtobuf);let r$4=class e extends P{constructor(e={}){super(),this._tokenId=null,this._accountId=null,null!=e.tokenId&&this.setTokenId(e.tokenId),null!=e.accountId&&this.setAccountId(e.accountId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenRevokeKyc;return P._fromProtobufTransactions(new e({tokenId:null!=s.token?u$b._fromProtobuf(s.token):void 0,accountId:null!=s.account?f$2._fromProtobuf(s.account):void 0}),t,r,n,o,i)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e),null!=this._accountId&&this._accountId.validateChecksum(e)}_execute(e,t){return e.token.revokeKycFromTokenAccount(t)}_getTransactionDataCase(){return"tokenRevokeKyc"}_makeTransactionData(){return{token:null!=this._tokenId?this._tokenId._toProtobuf():null,account:null!=this._accountId?this._accountId._toProtobuf():null}}_getLogId(){return`TokenRevokeKycTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenRevokeKyc",r$4._fromProtobuf);let r$3=class e extends P{constructor(e={}){super(),this._tokenId=null,this._accountId=null,null!=e.tokenId&&this.setTokenId(e.tokenId),null!=e.accountId&&this.setAccountId(e.accountId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenUnfreeze;return P._fromProtobufTransactions(new e({tokenId:null!=s.token?u$b._fromProtobuf(s.token):void 0,accountId:null!=s.account?f$2._fromProtobuf(s.account):void 0}),t,r,n,o,i)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e),null!=this._accountId&&this._accountId.validateChecksum(e)}_execute(e,t){return e.token.unfreezeTokenAccount(t)}_getTransactionDataCase(){return"tokenUnfreeze"}_makeTransactionData(){return{token:null!=this._tokenId?this._tokenId._toProtobuf():null,account:null!=this._accountId?this._accountId._toProtobuf():null}}_getLogId(){return`TokenUnfreezeTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenUnfreeze",r$3._fromProtobuf);let o$4=class e extends P{constructor(e={}){super(),this._tokenId=null,null!=e.tokenId&&this.setTokenId(e.tokenId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenUnpause;return P._fromProtobufTransactions(new e({tokenId:null!=s.token?u$b._fromProtobuf(s.token):void 0}),t,r,n,o,i)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e)}_execute(e,t){return e.token.unpauseToken(t)}_getTransactionDataCase(){return"tokenUnpause"}_makeTransactionData(){return{token:null!=this._tokenId?this._tokenId._toProtobuf():null}}_getLogId(){return`TokenUnpauseTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenUnpause",o$4._fromProtobuf);let t$6=class e{constructor(e){this._code=e,Object.freeze(this)}toString(){switch(this){case e.FullValidation:return"FULL_VALIDATION";case e.NoValidation:return"NO_VALIDATION";default:return`UNKNOWN (${this._code})`}}static _fromCode(t){switch(t){case 0:return e.FullValidation;case 1:return e.NoValidation}throw new Error(`(BUG) TokenKeyValidation.fromCode() does not handle code: ${t}`)}valueOf(){return this._code}};t$6.FullValidation=new t$6(0),t$6.NoValidation=new t$6(1);class a extends P{constructor(e={}){super(),this._tokenId=null,this._tokenName=null,this._tokenSymbol=null,this._treasuryAccountId=null,this._adminKey=null,this._kycKey=null,this._freezeKey=null,this._wipeKey=null,this._supplyKey=null,this._autoRenewAccountId=null,this._expirationTime=null,this._autoRenewPeriod=null,this._tokenMemo=null,this._feeScheduleKey=null,this._pauseKey=null,this._metadataKey=null,this._metadata=null,this._keyVerificationMode=t$6.FullValidation,null!=e.tokenId&&this.setTokenId(e.tokenId),null!=e.tokenName&&this.setTokenName(e.tokenName),null!=e.tokenSymbol&&this.setTokenSymbol(e.tokenSymbol),null!=e.treasuryAccountId&&this.setTreasuryAccountId(e.treasuryAccountId),null!=e.adminKey&&this.setAdminKey(e.adminKey),null!=e.kycKey&&this.setKycKey(e.kycKey),null!=e.freezeKey&&this.setFreezeKey(e.freezeKey),null!=e.wipeKey&&this.setWipeKey(e.wipeKey),null!=e.supplyKey&&this.setSupplyKey(e.supplyKey),null!=e.autoRenewAccountId&&this.setAutoRenewAccountId(e.autoRenewAccountId),null!=e.expirationTime&&this.setExpirationTime(e.expirationTime),null!=e.autoRenewPeriod&&this.setAutoRenewPeriod(e.autoRenewPeriod),null!=e.tokenMemo&&this.setTokenMemo(e.tokenMemo),null!=e.feeScheduleKey&&this.setFeeScheduleKey(e.feeScheduleKey),null!=e.pauseKey&&this.setPauseKey(e.pauseKey),null!=e.metadataKey&&this.setMetadataKey(e.metadataKey),null!=e.metadata&&this.setMetadata(e.metadata),null!=e.keyVerificationMode&&this.setKeyVerificationMode(e.keyVerificationMode)}static _fromProtobuf(e,t,r,n,o){const i=o[0].tokenUpdate;return P._fromProtobufTransactions(new a({tokenId:null!=i.token?u$b._fromProtobuf(i.token):void 0,tokenName:Object.hasOwn(i,"name")?i.name:void 0,tokenSymbol:Object.hasOwn(i,"symbol")?i.symbol:void 0,treasuryAccountId:null!=i.treasury?f$2._fromProtobuf(i.treasury):void 0,adminKey:null!=i.adminKey?t$r._fromProtobufKey(i.adminKey):void 0,kycKey:null!=i.kycKey?t$r._fromProtobufKey(i.kycKey):void 0,freezeKey:null!=i.freezeKey?t$r._fromProtobufKey(i.freezeKey):void 0,wipeKey:null!=i.wipeKey?t$r._fromProtobufKey(i.wipeKey):void 0,supplyKey:null!=i.supplyKey?t$r._fromProtobufKey(i.supplyKey):void 0,autoRenewAccountId:null!=i.autoRenewAccount?f$2._fromProtobuf(i.autoRenewAccount):void 0,expirationTime:null!=i.expiry?s$j._fromProtobuf(i.expiry):void 0,autoRenewPeriod:null!=i.autoRenewPeriod?s$d._fromProtobuf(i.autoRenewPeriod):void 0,tokenMemo:null!=i.memo&&Object.hasOwn(i.memo,"value")?i.memo.value:void 0,feeScheduleKey:null!=i.feeScheduleKey?t$r._fromProtobufKey(i.feeScheduleKey):void 0,pauseKey:null!=i.pauseKey?t$r._fromProtobufKey(i.pauseKey):void 0,metadataKey:null!=i.metadataKey?t$r._fromProtobufKey(i.metadataKey):void 0,metadata:null!=i.metadata&&Object.hasOwn(i.metadata,"value")?i.metadata.value:void 0,keyVerificationMode:null!=i.keyVerificationMode?t$6._fromCode(i.keyVerificationMode):void 0}),e,t,r,n,o)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}get tokenName(){return this._tokenName}setTokenName(e){return this._requireNotFrozen(),this._tokenName=e,this}get tokenSymbol(){return this._tokenSymbol}setTokenSymbol(e){return this._requireNotFrozen(),this._tokenSymbol=e,this}get treasuryAccountId(){return this._treasuryAccountId}setTreasuryAccountId(e){return this._requireNotFrozen(),this._treasuryAccountId="string"==typeof e?f$2.fromString(e):e.clone(),this}get adminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get kycKey(){return this._kycKey}setKycKey(e){return this._requireNotFrozen(),this._kycKey=e,this}get freezeKey(){return this._freezeKey}setFreezeKey(e){return this._requireNotFrozen(),this._freezeKey=e,this}get wipeKey(){return this._wipeKey}setWipeKey(e){return this._requireNotFrozen(),this._wipeKey=e,this}get supplyKey(){return this._supplyKey}setSupplyKey(e){return this._requireNotFrozen(),this._supplyKey=e,this}setsupplyKey(e){return this._requireNotFrozen(),this._supplyKey=e,this}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof s$j?e:s$j.fromDate(e),this}get autoRenewAccountId(){return this._autoRenewAccountId}setAutoRenewAccountId(e){return this._requireNotFrozen(),this._autoRenewAccountId=e instanceof f$2?e:f$2.fromString(e),this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof s$d?e:new s$d(e),this}get tokenMemo(){return this._tokenMemo}setTokenMemo(e){return this._requireNotFrozen(),this._tokenMemo=e,this}get feeScheduleKey(){return this._feeScheduleKey}setFeeScheduleKey(e){return this._requireNotFrozen(),this._feeScheduleKey=e,this}get pauseKey(){return this._pauseKey}setPauseKey(e){return this._requireNotFrozen(),this._pauseKey=e,this}get metadataKey(){return this._metadataKey}setMetadataKey(e){return this._requireNotFrozen(),this._metadataKey=e,this}get metadata(){return this._metadata}setMetadata(e){return this._requireNotFrozen(),this._metadata=e,this}get keyVerificationMode(){return this._keyVerificationMode}setKeyVerificationMode(e){return this._requireNotFrozen(),this._keyVerificationMode=e,this}clearTokenMemo(){return this._requireNotFrozen(),this._tokenMemo=null,this}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e),null!=this._treasuryAccountId&&this._treasuryAccountId.validateChecksum(e),null!=this._autoRenewAccountId&&this._autoRenewAccountId.validateChecksum(e)}_execute(e,t){return e.token.updateToken(t)}_getTransactionDataCase(){return"tokenUpdate"}_makeTransactionData(){return{token:null!=this._tokenId?this._tokenId._toProtobuf():null,name:null!=this.tokenName?this.tokenName:null,symbol:this.tokenSymbol,treasury:null!=this._treasuryAccountId?this._treasuryAccountId._toProtobuf():null,adminKey:null!=this._adminKey?this._adminKey._toProtobufKey():null,kycKey:null!=this._kycKey?this._kycKey._toProtobufKey():null,freezeKey:null!=this._freezeKey?this._freezeKey._toProtobufKey():null,pauseKey:null!=this._pauseKey?this._pauseKey._toProtobufKey():null,wipeKey:null!=this._wipeKey?this._wipeKey._toProtobufKey():null,supplyKey:null!=this._supplyKey?this._supplyKey._toProtobufKey():null,autoRenewAccount:null!=this._autoRenewAccountId?this._autoRenewAccountId._toProtobuf():null,expiry:null!=this._expirationTime?this._expirationTime._toProtobuf():null,autoRenewPeriod:null!=this._autoRenewPeriod?this._autoRenewPeriod._toProtobuf():null,memo:null!=this._tokenMemo?{value:this._tokenMemo}:null,feeScheduleKey:null!=this._feeScheduleKey?this._feeScheduleKey._toProtobufKey():null,metadataKey:null!=this._metadataKey?this._metadataKey._toProtobufKey():null,metadata:null!=this._metadata?{value:this._metadata}:null,keyVerificationMode:null!=this._keyVerificationMode?this._keyVerificationMode._code:void 0}}_getLogId(){return`TokenUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}}B.set("tokenUpdate",a._fromProtobuf);let s$5=class e extends P{constructor(e={}){super(),this._tokenId=null,this._accountId=null,this._serials=[],this._amount=null,null!=e.tokenId&&this.setTokenId(e.tokenId),null!=e.accountId&&this.setAccountId(e.accountId),null!=e.amount&&this.setAmount(e.amount),null!=e.serials&&this.setSerials(e.serials)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenWipe;return P._fromProtobufTransactions(new e({tokenId:null!=s.token?u$b._fromProtobuf(s.token):void 0,accountId:null!=s.account?f$2._fromProtobuf(s.account):void 0,amount:null!=s.amount?s.amount:void 0,serials:null!=s.serialNumbers?s.serialNumbers:void 0}),t,r,n,o,i)}get tokenId(){return this._tokenId}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}get accountId(){return this._accountId}setAccountId(e){return this._requireNotFrozen(),this._accountId="string"==typeof e?f$2.fromString(e):e.clone(),this}get amount(){return this._amount}setAmount(e){return this._requireNotFrozen(),this._amount=e instanceof Long?e:Long.fromValue(e),this}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e),null!=this._accountId&&this._accountId.validateChecksum(e)}get serials(){return this._serials}setSerials(e){return this._requireNotFrozen(),this._serials=e.map(e=>"number"==typeof e?Long.fromNumber(e):e),this}_execute(e,t){return e.token.wipeTokenAccount(t)}_getTransactionDataCase(){return"tokenWipe"}_makeTransactionData(){return{amount:this._amount,token:null!=this._tokenId?this._tokenId._toProtobuf():null,account:null!=this._accountId?this._accountId._toProtobuf():null,serialNumbers:this.serials}}_getLogId(){return`TokenWipeTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenWipe",s$5._fromProtobuf);class c extends P{constructor(e={}){super(),this._defaultMaxTransactionFee=new e$o(25),this._adminKey=null,this._submitKey=null,this._feeScheduleKey=null,this._feeExemptKeys=[],this._autoRenewAccountId=null,this._autoRenewPeriod=new s$d(w$1),this._customFees=[],this._topicMemo=null,null!=e.adminKey&&this.setAdminKey(e.adminKey),null!=e.submitKey&&this.setSubmitKey(e.submitKey),null!=e.feeScheduleKey&&this.setFeeScheduleKey(e.feeScheduleKey),null!=e.feeExemptKeys&&this.setFeeExemptKeys(e.feeExemptKeys),null!=e.autoRenewAccountId&&this.setAutoRenewAccountId(e.autoRenewAccountId),null!=e.autoRenewPeriod&&this.setAutoRenewPeriod(e.autoRenewPeriod),null!=e.customFees&&this.setCustomFees(e.customFees),null!=e.topicMemo&&this.setTopicMemo(e.topicMemo)}static _fromProtobuf(e,t,r,n,o){const i=o[0].consensusCreateTopic;return P._fromProtobufTransactions(new c({adminKey:null!=i.adminKey?t$r._fromProtobufKey(i.adminKey):void 0,submitKey:null!=i.submitKey?t$r._fromProtobufKey(i.submitKey):void 0,feeScheduleKey:null!=i.feeScheduleKey?t$r._fromProtobufKey(i.feeScheduleKey):void 0,feeExemptKeys:null!=i.feeExemptKeyList?i.feeExemptKeyList.map(e=>t$r._fromProtobufKey(e)):void 0,autoRenewAccountId:null!=i.autoRenewAccount?f$2._fromProtobuf(i.autoRenewAccount):void 0,autoRenewPeriod:null!=i.autoRenewPeriod&&null!=i.autoRenewPeriod.seconds?i.autoRenewPeriod.seconds:void 0,customFees:null!=i.customFees?i.customFees.map(e=>l$a._fromProtobuf(e)):void 0,topicMemo:null!=i.memo?i.memo:void 0}),e,t,r,n,o)}get topicMemo(){return this._topicMemo}getTopicMemo(){return this._topicMemo}setTopicMemo(e){return this._requireNotFrozen(),this._topicMemo=e,this}get adminKey(){return this._adminKey}getAdminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get submitKey(){return this._submitKey}getSubmitKey(){return this._submitKey}setSubmitKey(e){return this._requireNotFrozen(),this._submitKey=e,this}getFeeScheduleKey(){return this._feeScheduleKey}setFeeScheduleKey(e){return this._requireNotFrozen(),this._feeScheduleKey=e,this}getFeeExemptKeys(){return this._feeExemptKeys}setFeeExemptKeys(e){return this._requireNotFrozen(),this._feeExemptKeys=e,this}addFeeExemptKey(e){return this._requireNotFrozen(),this._feeExemptKeys.push(e),this}clearFeeExemptKeys(){return this._requireNotFrozen(),this._feeExemptKeys=[],this}get autoRenewAccountId(){return this._autoRenewAccountId}getAutoRenewAccountId(){return this._autoRenewAccountId}setAutoRenewAccountId(e){return this._requireNotFrozen(),this._autoRenewAccountId=e instanceof f$2?e:f$2.fromString(e),this}get autoRenewPeriod(){return this._autoRenewPeriod}getAutoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof s$d?e:new s$d(e),this}getCustomFees(){return this._customFees}setCustomFees(e){return this._requireNotFrozen(),this._customFees=e,this}addCustomFee(e){return this._requireNotFrozen(),this._customFees.push(e),this}clearCustomFees(){return this._requireNotFrozen(),this._customFees=[],this}_validateChecksums(e){null!=this._autoRenewAccountId&&this._autoRenewAccountId.validateChecksum(e)}freezeWith(e){return!this._autoRenewAccountId&&this.transactionId?.accountId?this.setAutoRenewAccountId(this.transactionId?.accountId):!this._autoRenewAccountId&&e?.operatorAccountId&&this.setAutoRenewAccountId(e.operatorAccountId),super.freezeWith(e)}_execute(e,t){return e.consensus.createTopic(t)}_getTransactionDataCase(){return"consensusCreateTopic"}_makeTransactionData(){return{adminKey:null!=this._adminKey?this._adminKey._toProtobufKey():null,submitKey:null!=this._submitKey?this._submitKey._toProtobufKey():null,feeScheduleKey:null!=this._feeScheduleKey?this._feeScheduleKey._toProtobufKey():null,feeExemptKeyList:this._feeExemptKeys.map(e=>e._toProtobufKey()),autoRenewAccount:null!=this._autoRenewAccountId?this._autoRenewAccountId._toProtobuf():null,autoRenewPeriod:this._autoRenewPeriod._toProtobuf(),customFees:this._customFees.map(e=>e._toTopicFeeProtobuf()),memo:this._topicMemo}}_getLogId(){return`TopicCreateTransaction:${this._transactionIds.current.validStart.toString()}`}}B.set("consensusCreateTopic",c._fromProtobuf);let i$5=class e extends P{constructor(e={}){super(),this._topicId=null,null!=e.topicId&&this.setTopicId(e.topicId)}static _fromProtobuf(t,r,n,o,i){const s=i[0].consensusDeleteTopic;return P._fromProtobufTransactions(new e({topicId:null!=s.topicID?m$1._fromProtobuf(s.topicID):void 0}),t,r,n,o,i)}get topicId(){return this._topicId}setTopicId(e){return this._requireNotFrozen(),this._topicId="string"==typeof e?m$1.fromString(e):e.clone(),this}_validateChecksums(e){null!=this._topicId&&this._topicId.validateChecksum(e)}_execute(e,t){return e.consensus.deleteTopic(t)}_getTransactionDataCase(){return"consensusDeleteTopic"}_makeTransactionData(){return{topicID:null!=this._topicId?this._topicId._toProtobuf():null}}_getLogId(){return`TopicDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("consensusDeleteTopic",i$5._fromProtobuf);let l$2=class e{constructor(e){this.topicId=e.topicId,this.topicMemo=e.topicMemo,this.runningHash=e.runningHash,this.sequenceNumber=e.sequenceNumber,this.expirationTime=e.expirationTime,this.adminKey=e.adminKey,this.submitKey=e.submitKey,this.feeScheduleKey=e.feeScheduleKey,this.feeExemptKeys=e.feeExemptKeys,this.autoRenewPeriod=e.autoRenewPeriod,this.autoRenewAccountId=e.autoRenewAccountId,this.customFees=e.customFees,this.ledgerId=e.ledgerId,Object.freeze(this)}static _fromProtobuf(t){const r=t.topicInfo;return new e({topicId:m$1._fromProtobuf(t.topicID),topicMemo:null!=r.memo?r.memo:"",runningHash:null!=r.runningHash?r.runningHash:new Uint8Array,sequenceNumber:null!=r.sequenceNumber?r.sequenceNumber instanceof Long?r.sequenceNumber:Long.fromValue(r.sequenceNumber):Long.ZERO,expirationTime:null!=r.expirationTime?s$j._fromProtobuf(r.expirationTime):null,adminKey:null!=r.adminKey?t$r._fromProtobufKey(r.adminKey):null,submitKey:null!=r.submitKey?t$r._fromProtobufKey(r.submitKey):null,feeScheduleKey:null!=r.feeScheduleKey?t$r._fromProtobufKey(r.feeScheduleKey):null,feeExemptKeys:null!=r.feeExemptKeyList?r.feeExemptKeyList.map(e=>t$r._fromProtobufKey(e)):null,autoRenewPeriod:null!=r.autoRenewPeriod?new s$d(r.autoRenewPeriod.seconds):null,autoRenewAccountId:null!=r.autoRenewAccount?f$2._fromProtobuf(r.autoRenewAccount):null,customFees:null!=r.customFees?r.customFees.map(e=>l$a._fromProtobuf(e)):null,ledgerId:null!=r.ledgerId?r$h.fromBytes(r.ledgerId):null})}_toProtobuf(){return{topicID:this.topicId._toProtobuf(),topicInfo:{memo:this.topicMemo,runningHash:this.runningHash,sequenceNumber:this.sequenceNumber,expirationTime:null!=this.expirationTime?this.expirationTime._toProtobuf():null,adminKey:null!=this.adminKey?this.adminKey._toProtobufKey():null,submitKey:null!=this.submitKey?this.submitKey._toProtobufKey():null,feeScheduleKey:null!=this.feeScheduleKey?this.feeScheduleKey._toProtobufKey():null,feeExemptKeyList:null!=this.feeExemptKeys?this.feeExemptKeys.map(e=>e._toProtobufKey()):null,autoRenewPeriod:null!=this.autoRenewPeriod?this.autoRenewPeriod._toProtobuf():null,autoRenewAccount:null!=this.autoRenewAccountId?this.autoRenewAccountId._toProtobuf():null,customFees:null!=this.customFees?this.customFees.map(e=>e._toProtobuf()):null}}}static fromBytes(t){return e._fromProtobuf(libExports.proto.ConsensusGetTopicInfoResponse.decode(t))}toBytes(){return libExports.proto.ConsensusGetTopicInfoResponse.encode(this._toProtobuf()).finish()}},n$4=class e extends h$3{constructor(e={}){super(),this._topicId=null,null!=e.topicId&&this.setTopicId(e.topicId)}static _fromProtobuf(t){const r=t.consensusGetTopicInfo;return new e({topicId:null!=r.topicID?m$1._fromProtobuf(r.topicID):void 0})}get topicId(){return this._topicId}setTopicId(e){return this._topicId="string"==typeof e?m$1.fromString(e):e.clone(),this}async getCost(e){return super.getCost(e)}_validateChecksums(e){null!=this._topicId&&this._topicId.validateChecksum(e)}_execute(e,t){return e.consensus.getTopicInfo(t)}_mapResponseHeader(e){return e.consensusGetTopicInfo.header}_mapResponse(e,t,r){return Promise.resolve(l$2._fromProtobuf(e.consensusGetTopicInfo))}_onMakeRequest(e){return{consensusGetTopicInfo:{header:e,topicID:null!=this._topicId?this._topicId._toProtobuf():null}}}_getLogId(){return`TopicInfoQuery:${(null!=this._paymentTransactionId&&null!=this._paymentTransactionId.validStart?this._paymentTransactionId.validStart:this._timestamp).toString()}`}};m$2.set("consensusGetTopicInfo",n$4._fromProtobuf);class u extends P{constructor(e={}){super(),this._topicId=null,null!=e.topicId&&this.setTopicId(e.topicId),this._message=null,null!=e.message&&this.setMessage(e.message),this._maxChunks=20,this._chunkSize=k,null!=e.maxChunks&&this.setMaxChunks(e.maxChunks),null!=e.chunkSize&&this.setChunkSize(e.chunkSize),this._chunkInfo=null}static _fromProtobuf(e,t,r,n,o){const i=o[0].consensusSubmitMessage;return P._fromProtobufTransactions(new u({topicId:null!=i.topicID?m$1._fromProtobuf(i.topicID):void 0,message:null!=i.message?i.message:void 0}),e,t,r,n,o)}get topicId(){return this._topicId}setTopicId(e){return this._requireNotFrozen(),this._topicId="string"==typeof e?m$1.fromString(e):e.clone(),this}get message(){return this._message}getMessage(){return this._message}setMessage(e){return this._requireNotFrozen(),e=p(e),this._message=e instanceof Uint8Array?e:n$g(e),this}getCustomFeeLimits(){return this._customFeeLimits}setCustomFeeLimits(e){return this._requireNotFrozen(),this._customFeeLimits=e,this}addCustomFeeLimit(e){return this._requireNotFrozen(),this._customFeeLimits.push(e),this}get maxChunks(){return this._maxChunks}getMaxChunks(){return this._maxChunks}setMaxChunks(e){return this._requireNotFrozen(),this._maxChunks=e,this}get chunkSize(){return this._chunkSize}getChunkSize(){return this._chunkSize}setChunkSize(e){return this._chunkSize=e,this}getRequiredChunks(){return null==this._message?1:Math.ceil(this._message.length/this._chunkSize)}freezeWith(e){if(super.freezeWith(e),null==this._message)return this;const t=Math.floor((this._message.length+(this._chunkSize-1))/this._chunkSize);if(t>this._maxChunks)throw new Error(`Message with size ${this._message.length} too long for ${this._maxChunks} chunks`);const r=this._getTransactionId()._toProtobuf();let n=this._getTransactionId();this._transactionIds.locked=!1,this._transactions.clear(),this._transactionIds.clear(),this._signedTransactions.clear();for(let o=0;o<t;o++){this._chunkInfo={initialTransactionID:r,total:t,number:o+1},this._transactionIds.push(n),this._transactionIds.advance();for(const e of this._nodeAccountIds.list)this._signedTransactions.push(this._makeSignedTransaction(e));n=new i$c(n.accountId,new s$j(n.validStart.seconds,n.validStart.nanos.add(1)))}return this._transactionIds.advance(),this._chunkInfo=null,this}schedule(){if(this._requireNotFrozen(),null!=this._message&&this._message.length>this._chunkSize)throw new Error(`cannot schedule \`TopicMessageSubmitTransaction\` with message over ${this._chunkSize} bytes`);return super.schedule()}async execute(e,t){return(await this.executeAll(e,t))[0]}async executeAll(e,t){super._isFrozen()||this.freezeWith(e);const r=this._getTransactionId(),n=e.operatorAccountId;null!=n&&n.equals(r.accountId)&&await super.signWithOperator(e);const o=[];let i=t;for(let s=0;s<this._transactionIds.length;s++){const t=Date.now();o.push(await super.execute(e,i)),null!=i&&(i=Date.now()-t)}return o}_execute(e,t){return e.consensus.submitMessage(t)}_getTransactionDataCase(){return"consensusSubmitMessage"}_makeTransactionData(){if(null!=this._chunkInfo&&null!=this._message){const e=(this._chunkInfo.number-1)*this._chunkSize;let t=e+this._chunkSize;return t>this._message.length&&(t=this._message.length),{topicID:null!=this._topicId?this._topicId._toProtobuf():null,message:this._message.slice(e,t),chunkInfo:this._chunkInfo}}return{topicID:null!=this._topicId?this._topicId._toProtobuf():null,message:this._message}}_getLogId(){return`TopicMessageSubmitTransaction:${this._transactionIds.current.validStart.toString()}`}}B.set("consensusSubmitMessage",u._fromProtobuf);let l$1=class e extends P{constructor(e={}){super(),this._topicId=null,null!=e.topicId&&this.setTopicId(e.topicId),this._topicMemo=null,null!=e.topicMemo&&this.setTopicMemo(e.topicMemo),this._submitKey=null,null!=e.submitKey&&this.setSubmitKey(e.submitKey),this._adminKey=null,null!=e.adminKey&&this.setAdminKey(e.adminKey),this._feeScheduleKey=null,null!=e.feeScheduleKey&&this.setFeeScheduleKey(e.feeScheduleKey),this._feeExemptKeys=null,null!=e.feeExemptKeys&&this.setFeeExemptKeys(e.feeExemptKeys),this._autoRenewAccountId=null,null!=e.autoRenewAccountId&&this.setAutoRenewAccountId(e.autoRenewAccountId),this._autoRenewPeriod=null,null!=e.autoRenewPeriod&&this.setAutoRenewPeriod(e.autoRenewPeriod),this._customFees=null,null!=e.customFees&&this.setCustomFees(e.customFees),this._expirationTime=null,null!=e.expirationTime&&this.setExpirationTime(e.expirationTime)}static _fromProtobuf(t,r,n,o,i){const s=i[0].consensusUpdateTopic;return P._fromProtobufTransactions(new e({topicId:null!=s.topicID?m$1._fromProtobuf(s.topicID):void 0,adminKey:null!=s.adminKey?t$r._fromProtobufKey(s.adminKey):void 0,submitKey:null!=s.submitKey?t$r._fromProtobufKey(s.submitKey):void 0,feeScheduleKey:null!=s.feeScheduleKey?t$r._fromProtobufKey(s.feeScheduleKey):void 0,feeExemptKeys:null!=s.feeExemptKeyList&&null!=s.feeExemptKeyList.keys?s?.feeExemptKeyList.keys.map(e=>t$r._fromProtobufKey(e)):void 0,autoRenewAccountId:null!=s.autoRenewAccount?f$2._fromProtobuf(s.autoRenewAccount):void 0,autoRenewPeriod:null!=s.autoRenewPeriod&&null!=s.autoRenewPeriod.seconds?s.autoRenewPeriod.seconds:void 0,customFees:null!=s.customFees&&null!=s.customFees.fees?s.customFees.fees.map(e=>l$a._fromProtobuf(e)):void 0,topicMemo:null!=s.memo&&Object.hasOwn(s.memo,"value")?s.memo.value:void 0,expirationTime:null!=s.expirationTime?s$j._fromProtobuf(s.expirationTime):void 0}),t,r,n,o,i)}get expirationTime(){return this._expirationTime}setExpirationTime(e){return this._requireNotFrozen(),this._expirationTime=e instanceof Date?s$j.fromDate(e):e,this}get topicId(){return this._topicId}setTopicId(e){return this._requireNotFrozen(),this._topicId="string"==typeof e?m$1.fromString(e):e.clone(),this}clearTopicId(){return this._requireNotFrozen(),this._topicId=null,this}get topicMemo(){return this._topicMemo}setTopicMemo(e){return this._requireNotFrozen(),this._topicMemo=e,this}clearTopicMemo(){return this._requireNotFrozen(),this._topicMemo=null,this}get adminKey(){return this._adminKey}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}clearAdminKey(){return this._requireNotFrozen(),this._adminKey=null,this}get submitKey(){return this._submitKey}setSubmitKey(e){return this._requireNotFrozen(),this._submitKey=e,this}clearSubmitKey(){return this._requireNotFrozen(),this._submitKey=null,this}getFeeScheduleKey(){return this._feeScheduleKey}setFeeScheduleKey(e){return this._requireNotFrozen(),this._feeScheduleKey=e,this}clearFeeScheduleKey(){return this._requireNotFrozen(),this._feeScheduleKey=null,this}getFeeExemptKeys(){return this._feeExemptKeys}setFeeExemptKeys(e){return this._requireNotFrozen(),this._feeExemptKeys=e,this}addFeeExemptKey(e){return this._requireNotFrozen(),null==this._feeExemptKeys&&(this._feeExemptKeys=[]),this._feeExemptKeys.push(e),this}clearFeeExemptKeys(){return this._requireNotFrozen(),this._feeExemptKeys=null,this}get autoRenewAccountId(){return this._autoRenewAccountId}setAutoRenewAccountId(e){return this._requireNotFrozen(),this._autoRenewAccountId=e instanceof f$2?e:f$2.fromString(e),this}clearAutoRenewAccountId(){return this._requireNotFrozen(),this._autoRenewAccountId=null,this}get autoRenewPeriod(){return this._autoRenewPeriod}setAutoRenewPeriod(e){return this._requireNotFrozen(),this._autoRenewPeriod=e instanceof s$d?e:new s$d(e),this}getCustomFees(){return this._customFees}setCustomFees(e){return this._requireNotFrozen(),this._customFees=e,this}addCustomFee(e){return this._requireNotFrozen(),null==this._customFees&&(this._customFees=[]),this._customFees.push(e),this}clearCustomFees(){return this._requireNotFrozen(),this._customFees=null,this}_validateChecksums(e){null!=this._topicId&&this._topicId.validateChecksum(e),null!=this._autoRenewAccountId&&this._autoRenewAccountId.validateChecksum(e)}_execute(e,t){return e.consensus.updateTopic(t)}_getTransactionDataCase(){return"consensusUpdateTopic"}_makeTransactionData(){return{topicID:null!=this._topicId?this._topicId._toProtobuf():null,adminKey:null!=this._adminKey?this._adminKey._toProtobufKey():null,submitKey:null!=this._submitKey?this._submitKey._toProtobufKey():null,feeScheduleKey:null!=this._feeScheduleKey?this._feeScheduleKey._toProtobufKey():null,feeExemptKeyList:null!=this._feeExemptKeys?{keys:this._feeExemptKeys.map(e=>e._toProtobufKey())}:null,memo:null!=this._topicMemo?{value:this._topicMemo}:null,autoRenewAccount:null!=this._autoRenewAccountId?this._autoRenewAccountId._toProtobuf():null,autoRenewPeriod:null!=this._autoRenewPeriod?this._autoRenewPeriod._toProtobuf():null,customFees:null!=this._customFees?{fees:this._customFees.map(e=>e._toTopicFeeProtobuf())}:null,expirationTime:null!=this._expirationTime?this._expirationTime._toProtobuf():null}}_getLogId(){return`TopicUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("consensusUpdateTopic",l$1._fromProtobuf);let n$3=class e extends t$q{constructor(){super(e=>f$2.fromString(e))}static _fromProtobuf(t){const r=new e;for(const e of null!=t.accountAmounts?t.accountAmounts:[]){const t=f$2._fromProtobuf(e.accountID);r._set(t,e$o.fromTinybars(e.amount))}return r}};class T extends u$8{constructor(e={}){super(),this._hbarTransfers=[],this._defaultMaxTransactionFee=new e$o(1);for(const t of null!=e.hbarTransfers?e.hbarTransfers:[])this.addHbarTransfer(t.accountId,t.amount)}static _fromProtobuf(e,t,r,n,o){const i=o[0].cryptoTransfer,s=new T;return s._tokenTransfers=n$d._fromProtobuf(null!=i.tokenTransfers?i.tokenTransfers:[]),s._hbarTransfers=n$h._fromProtobuf(null!=i.transfers&&null!=i.transfers.accountAmounts?i.transfers.accountAmounts:[]),s._nftTransfers=t$d._fromProtobuf(null!=i.tokenTransfers?i.tokenTransfers:[]),P._fromProtobufTransactions(s,e,t,r,n,o)}get hbarTransfers(){const e=new n$3;for(const t of this._hbarTransfers)e._set(t.accountId,t.amount);return e}get hbarTransfersList(){return this._hbarTransfers}_addHbarTransfer(e,t,r){this._requireNotFrozen();const n=e instanceof f$2?e.clone():f$2.fromString(e),o=t instanceof e$o?t:new e$o(t);for(const i of this._hbarTransfers)if(0===i.accountId.compare(n))return i.amount=e$o.fromTinybars(i.amount.toTinybars().add(o.toTinybars())),this;return this._hbarTransfers.push(new n$h({accountId:n,amount:o,isApproved:r})),this}addHbarTransfer(e,t){return this._addHbarTransfer(e,t,!1)}addApprovedHbarTransfer(e,t){return this._addHbarTransfer(e,t,!0)}_validateChecksums(e){for(const t of this._hbarTransfers)t.accountId.validateChecksum(e);for(const t of this._tokenTransfers)t.tokenId.validateChecksum(e),t.accountId.validateChecksum(e);for(const t of this._nftTransfers)t.tokenId.validateChecksum(e),t.senderAccountId.validateChecksum(e),t.receiverAccountId.validateChecksum(e)}setHbarTransferApproval(e,t){const r="string"==typeof e?f$2.fromString(e):e;for(const n of this._hbarTransfers)0===n.accountId.compare(r)&&(n.isApproved=t);return this}setTokenTransferApproval(e,t,r){const n="string"==typeof e?u$b.fromString(e):e,o="string"==typeof t?f$2.fromString(t):t;for(const i of this._tokenTransfers)0===i.tokenId.compare(n)&&0===i.accountId.compare(o)&&(i.isApproved=r);return this}setNftTransferApproval(e,t){const r="string"==typeof e?e$j.fromString(e):e;for(const n of this._nftTransfers)0===n.tokenId.compare(r.tokenId)&&0===n.serialNumber.compare(r.serial)&&(n.isApproved=t);return this}_execute(e,t){return e.crypto.cryptoTransfer(t)}_getTransactionDataCase(){return"cryptoTransfer"}_makeTransactionData(){const{tokenTransfers:e}=super._makeTransactionData();return this._hbarTransfers.sort((e,t)=>e.accountId.compare(t.accountId)),{transfers:{accountAmounts:this._hbarTransfers.map(e=>({accountID:e.accountId._toProtobuf(),amount:e.amount.toTinybars(),isApproval:e.isApproved}))},tokenTransfers:e}}_getLogId(){return`TransferTransaction:${this._transactionIds.current.validStart.toString()}`}}B.set("cryptoTransfer",T._fromProtobuf);var browser={exports:{}},quickFormatUnescaped,hasRequiredQuickFormatUnescaped,hasRequiredBrowser;function requireQuickFormatUnescaped(){if(hasRequiredQuickFormatUnescaped)return quickFormatUnescaped;function e(e){try{return JSON.stringify(e)}catch(t){return'"[Circular]"'}}return hasRequiredQuickFormatUnescaped=1,quickFormatUnescaped=function(t,r,n){var o=n&&n.stringify||e;if("object"==typeof t&&null!==t){var i=r.length+1;if(1===i)return t;var s=new Array(i);s[0]=o(t);for(var a=1;a<i;a++)s[a]=o(r[a]);return s.join(" ")}if("string"!=typeof t)return t;var c=r.length;if(0===c)return t;for(var u="",l=0,d=-1,h=t&&t.length||0,f=0;f<h;){if(37===t.charCodeAt(f)&&f+1<h){switch(d=d>-1?d:0,t.charCodeAt(f+1)){case 100:case 102:if(l>=c)break;if(null==r[l])break;d<f&&(u+=t.slice(d,f)),u+=Number(r[l]),d=f+2,f++;break;case 105:if(l>=c)break;if(null==r[l])break;d<f&&(u+=t.slice(d,f)),u+=Math.floor(Number(r[l])),d=f+2,f++;break;case 79:case 111:case 106:if(l>=c)break;if(void 0===r[l])break;d<f&&(u+=t.slice(d,f));var p=typeof r[l];if("string"===p){u+="'"+r[l]+"'",d=f+2,f++;break}if("function"===p){u+=r[l].name||"<anonymous>",d=f+2,f++;break}u+=o(r[l]),d=f+2,f++;break;case 115:if(l>=c)break;d<f&&(u+=t.slice(d,f)),u+=String(r[l]),d=f+2,f++;break;case 37:d<f&&(u+=t.slice(d,f)),u+="%",d=f+2,f++,l--}++l}++f}if(-1===d)return t;d<h&&(u+=t.slice(d));return u}}function requireBrowser(){if(hasRequiredBrowser)return browser.exports;hasRequiredBrowser=1;const e=requireQuickFormatUnescaped();browser.exports=c;const t=function(){function e(e){return void 0!==e&&e}try{return"undefined"!=typeof globalThis||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch(t){return e(self)||e(window)||e(this)||{}}}().console||{},r={mapHttpRequest:p,mapHttpResponse:p,wrapRequestSerializer:m,wrapResponseSerializer:m,wrapErrorSerializer:m,req:p,res:p,err:h,errWithCause:h};function n(e,t){return"silent"===e?1/0:t.levels.values[e]}const o=Symbol("pino.logFuncs"),i=Symbol("pino.hierarchy"),s={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function a(e,t){const r={logger:t,parent:e[i]};t[i]=r}function c(e){(e=e||{}).browser=e.browser||{};const r=e.browser.transmit;if(r&&"function"!=typeof r.send)throw Error("pino: transmit option must have a send function");const i=e.browser.write||t;e.browser.write&&(e.browser.asObject=!0);const h=e.serializers||{},p=function(e,t){if(Array.isArray(e))return e.filter(function(e){return"!stdSerializers.err"!==e});return!0===e&&Object.keys(t)}(e.browser.serialize,h);let m=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(m=!1);const g=Object.keys(e.customLevels||{}),b=["error","fatal","warn","info","debug","trace"].concat(g);"function"==typeof i&&b.forEach(function(e){i[e]=i}),(!1===e.enabled||e.browser.disabled)&&(e.level="silent");const _=e.level||"info",w=Object.create(i);w.log||(w.log=y),function(e,r,n){const i={};r.forEach(e=>{i[e]=n[e]?n[e]:t[e]||t[s[e]||"log"]||y}),e[o]=i}(w,b,i),a({},w),Object.defineProperty(w,"levelVal",{get:function(){return n(this.level,this)}}),Object.defineProperty(w,"level",{get:function(){return this._level},set:function(e){if("silent"!==e&&!this.levels.values[e])throw Error("unknown level "+e);this._level=e,u(this,v,w,"error"),u(this,v,w,"fatal"),u(this,v,w,"warn"),u(this,v,w,"info"),u(this,v,w,"debug"),u(this,v,w,"trace"),g.forEach(e=>{u(this,v,w,e)})}});const v={transmit:r,serialize:p,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:b,timestamp:f(e),messageKey:e.messageKey||"msg",onChild:e.onChild||y};function I(t,n,o){if(!n)throw new Error("missing bindings for child Pino");o=o||{},p&&n.serializers&&(o.serializers=n.serializers);const i=o.serializers;if(p&&i){var s=Object.assign({},h,i),c=!0===e.browser.serialize?Object.keys(s):p;delete n.serializers,l([n],c,s,this._stdErrSerialize)}function u(e){this._childLevel=1+(0|e._childLevel),this.bindings=n,s&&(this.serializers=s,this._serialize=c),r&&(this._logEvent=d([].concat(e._logEvent.bindings,n)))}u.prototype=this;const f=new u(this);return a(this,f),f.child=function(...e){return I.call(this,t,...e)},f.level=o.level||this.level,t.onChild(f),f}return w.levels=function(e){const t=e.customLevels||{},r=Object.assign({},c.levels.values,t),n=Object.assign({},c.levels.labels,function(e){const t={};return Object.keys(e).forEach(function(r){t[e[r]]=r}),t}(t));return{values:r,labels:n}}(e),w.level=_,w.isLevelEnabled=function(e){return!!this.levels.values[e]&&this.levels.values[e]>=this.levels.values[this.level]},w.setMaxListeners=w.getMaxListeners=w.emit=w.addListener=w.on=w.prependListener=w.once=w.prependOnceListener=w.removeListener=w.removeAllListeners=w.listeners=w.listenerCount=w.eventNames=w.write=w.flush=y,w.serializers=h,w._serialize=p,w._stdErrSerialize=m,w.child=function(...e){return I.call(this,v,...e)},r&&(w._logEvent=d()),w}function u(r,s,a,c){if(Object.defineProperty(r,c,{value:n(r.level,a)>n(c,a)?y:a[o][c],writable:!0,enumerable:!0,configurable:!0}),r[c]===y){if(!s.transmit)return;const e=n(s.transmit.level||r.level,a);if(n(c,a)<e)return}r[c]=function(r,i,s,a){return function(o){return function(){const c=i.timestamp(),u=new Array(arguments.length),h=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var f=0;f<u.length;f++)u[f]=arguments[f];var p=!1;if(i.serialize&&(l(u,this._serialize,this.serializers,this._stdErrSerialize),p=!0),i.asObject||i.formatters?o.call(h,...function(t,r,n,o,i){const{level:s,log:a=e=>e}=i.formatters||{},c=n.slice();let u=c[0];const l={};let d=1+(0|t._childLevel);d<1&&(d=1);o&&(l.time=o);if(s){const e=s(r,t.levels.values[r]);Object.assign(l,e)}else l.level=t.levels.values[r];if(i.asObjectBindingsOnly){if(null!==u&&"object"==typeof u)for(;d--&&"object"==typeof c[0];)Object.assign(l,c.shift());return[a(l),...c]}if(null!==u&&"object"==typeof u){for(;d--&&"object"==typeof c[0];)Object.assign(l,c.shift());u=c.length?e(c.shift(),c):void 0}else"string"==typeof u&&(u=e(c.shift(),c));void 0!==u&&(l[i.messageKey]=u);return[a(l)]}(this,a,u,c,i)):o.apply(h,u),i.transmit){const e=n(i.transmit.level||r._level,s),t=n(a,s);if(t<e)return;!function(e,t,r,n=!1){const o=t.send,i=t.ts,s=t.methodLevel,a=t.methodValue,c=t.val,u=e._logEvent.bindings;n||l(r,e._serialize||Object.keys(e.serializers),e.serializers,void 0===e._stdErrSerialize||e._stdErrSerialize);e._logEvent.ts=i,e._logEvent.messages=r.filter(function(e){return-1===u.indexOf(e)}),e._logEvent.level.label=s,e._logEvent.level.value=a,o(s,e._logEvent,c),e._logEvent=d(u)}(this,{ts:c,methodLevel:a,methodValue:t,transmitValue:s.levels.values[i.transmit.level||r._level],send:i.transmit.send,val:n(r._level,s)},u,p)}}}(r[o][a])}(r,s,a,c);const u=function(e){const t=[];e.bindings&&t.push(e.bindings);let r=e[i];for(;r.parent;)r=r.parent,r.logger.bindings&&t.push(r.logger.bindings);return t.reverse()}(r);0!==u.length&&(r[c]=function(e,t){return function(){return t.apply(this,[...e,...arguments])}}(u,r[c]))}function l(e,t,r,n){for(const o in e)if(n&&e[o]instanceof Error)e[o]=c.stdSerializers.err(e[o]);else if("object"==typeof e[o]&&!Array.isArray(e[o])&&t)for(const n in e[o])t.indexOf(n)>-1&&n in r&&(e[o][n]=r[n](e[o][n]))}function d(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function h(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const r in e)void 0===t[r]&&(t[r]=e[r]);return t}function f(e){return"function"==typeof e.timestamp?e.timestamp:!1===e.timestamp?g:b}function p(){return{}}function m(e){return e}function y(){}function g(){return!1}function b(){return Date.now()}return c.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},c.stdSerializers=r,c.stdTimeFunctions=Object.assign({},{nullTime:g,epochTime:b,unixTime:function(){return Math.round(Date.now()/1e3)},isoTime:function(){return new Date(Date.now()).toISOString()}}),browser.exports.default=c,browser.exports.pino=c,browser.exports}var browserExports=requireBrowser();const pino=getDefaultExportFromCjs(browserExports);class e{constructor(e){this._name=e,Object.freeze(this)}toString(){switch(this){case e.Silent:return"silent";case e.Trace:return"trace";case e.Debug:return"debug";case e.Info:return"info";case e.Warn:return"warn";case e.Error:return"error";case e.Fatal:return"fatal";default:return`Unknown log level (${this._name})`}}static _fromString(t){switch(t){case"silent":return e.Silent;case"trace":return e.Trace;case"debug":return e.Debug;case"info":return e.Info;case"warn":return e.Warn;case"error":return e.Error;case"fatal":return e.Fatal;default:throw new Error(`Unknown log level: ${t}`)}}}e.Silent=new e("silent"),e.Trace=new e("trace"),e.Debug=new e("debug"),e.Info=new e("info"),e.Warn=new e("warn"),e.Error=new e("error"),e.Fatal=new e("fatal");let s$4=class e extends P{constructor(e={}){super(),this._tokenId=null,this._serialNumbers=[],this._metadata=null,null!=e.tokenId&&this.setTokenId(e.tokenId),null!=e.serialNumbers&&this.setSerialNumbers(e.serialNumbers),null!=e.metadata&&this.setMetadata(e.metadata)}static _fromProtobuf(t,r,n,o,i){const s=i[0].tokenUpdateNfts;return P._fromProtobufTransactions(new e({tokenId:null!=s.token?u$b._fromProtobuf(s.token):void 0,serialNumbers:null!=s.serialNumbers?s.serialNumbers:[],metadata:null!=s.metadata&&Object.hasOwn(s.metadata,"value")?s.metadata.value:void 0}),t,r,n,o,i)}setTokenId(e){return this._requireNotFrozen(),this._tokenId="string"==typeof e?u$b.fromString(e):e.clone(),this}setSerialNumbers(e){return this._requireNotFrozen(),this._serialNumbers=e,this}setMetadata(e){return this._requireNotFrozen(),this._metadata=e,this}_validateChecksums(e){null!=this._tokenId&&this._tokenId.validateChecksum(e)}_execute(e,t){return e.token.pauseToken(t)}_getTransactionDataCase(){return"tokenUpdateNfts"}_makeTransactionData(){return{token:null!=this._tokenId?this._tokenId._toProtobuf():null,serialNumbers:null!=this._serialNumbers?this._serialNumbers:[],...null!=this._metadata?{metadata:{value:this._metadata}}:null}}_getLogId(){return`TokenUpdateNftsTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("tokenUpdateNfts",s$4._fromProtobuf);let t$5=class e{constructor(e){this._ipAddressV4=null!=e?.ipAddressV4?e.ipAddressV4:null,this._port=null!=e?.port?e.port:null,this._domainName=null!=e?.domainName?e.domainName:null}setIpAddressV4(e){if(null!=this._domainName)throw new Error("Cannot set IP address when domain name is already set.");return this._ipAddressV4=e,this}get getIpAddressV4(){return this._ipAddressV4}setPort(e){return this._port=e,this}get getPort(){return this._port}setDomainName(e){if(null!=this._ipAddressV4)throw new Error("Cannot set domain name when IP address is already set.");return this._domainName=e,this}get getDomainName(){return this._domainName}static _fromProtobuf(t){return new e({ipAddressV4:null!=t.ipAddressV4?t.ipAddressV4:void 0,port:null!=t.port?t.port:void 0,domainName:null!=t.domainName?t.domainName:void 0})}_toProtobuf(){return{ipAddressV4:this._ipAddressV4,port:this._port,domainName:this._domainName}}},s$3=class e extends P{constructor(e){super(),this._accountId=null!=e?.accountId?e.accountId:null,this._description=null!=e?.description?e.description:null,this._gossipEndpoints=null!=e?.gossipEndpoints?e.gossipEndpoints:null,this._serviceEndpoints=null!=e?.serviceEndpoints?e.serviceEndpoints:null,this._gossipCaCertificate=null!=e?.gossipCaCertificate?e.gossipCaCertificate:null,this._grpcCertificateHash=null!=e?.grpcCertificateHash?e.grpcCertificateHash:null,this._grpcWebProxyEndpoint=e?.grpcWebProxyEndpoint||null,this._adminKey=null!=e?.adminKey?e.adminKey:null,this._declineReward=null!=e?.declineReward?e.declineReward:null}static _fromProtobuf(t,r,n,o,i){const s=i[0].nodeCreate;return P._fromProtobufTransactions(new e({accountId:null!=s.accountId?f$2._fromProtobuf(s.accountId):void 0,description:null!=s.description?s.description:void 0,gossipEndpoints:null!=s.gossipEndpoint?s.gossipEndpoint.map(e=>t$5._fromProtobuf(e)):void 0,serviceEndpoints:null!=s.serviceEndpoint?s.serviceEndpoint.map(e=>t$5._fromProtobuf(e)):void 0,gossipCaCertificate:null!=s.gossipCaCertificate?s.gossipCaCertificate:void 0,grpcCertificateHash:null!=s.grpcCertificateHash?s.grpcCertificateHash:void 0,adminKey:null!=s.adminKey?t$r._fromProtobufKey(s.adminKey):void 0,declineReward:null!=s.declineReward?s.declineReward:void 0,grpcWebProxyEndpoint:null!=s.grpcProxyEndpoint?t$5._fromProtobuf(s.grpcProxyEndpoint):void 0}),t,r,n,o,i)}setAccountId(e){return this._requireNotFrozen(),this._accountId=e instanceof f$2?e:f$2.fromString(e),this}get accountId(){return this._accountId}setDescription(e){if(this._requireNotFrozen(),e.length>100)throw new Error("Description must be at most 100 characters.");return this._description=e,this}get description(){return this._description}setGossipEndpoints(e){if(this._requireNotFrozen(),0==e.length)throw new Error("GossipEndpoints list must not be empty.");if(e.length>10)throw new Error("GossipEndpoints list must not contain more than 10 entries.");return this._gossipEndpoints=[...e],this}get gossipEndpoints(){return this._gossipEndpoints}addGossipEndpoint(e){return null!=this._gossipEndpoints&&this._gossipEndpoints.push(e),this}setServiceEndpoints(e){if(this._requireNotFrozen(),0==e.length)throw new Error("ServiceEndpoints list must not be empty.");if(e.length>8)throw new Error("ServiceEndpoints list must not contain more than 8 entries.");return this._serviceEndpoints=[...e],this}get serviceEndpoints(){return this._serviceEndpoints}addServiceEndpoint(e){return null!=this._serviceEndpoints&&this._serviceEndpoints.push(e),this}setGossipCaCertificate(e){if(this._requireNotFrozen(),0==e.length)throw new Error("GossipCaCertificate must not be empty.");return this._gossipCaCertificate=e,this}get gossipCaCertificate(){return this._gossipCaCertificate}setCertificateHash(e){return this._requireNotFrozen(),this._grpcCertificateHash=e,this}get certificateHash(){return this._grpcCertificateHash}setGrpcWebProxyEndpoint(e){return this._requireNotFrozen(),this._grpcWebProxyEndpoint=e,this}get grpcWebProxyEndpoint(){return this._grpcWebProxyEndpoint}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get adminKey(){return this._adminKey}setDeclineReward(e){return this._requireNotFrozen(),this._declineReward=e,this}get declineReward(){return this._declineReward}_execute(e,t){return e.addressBook.createNode(t)}_getTransactionDataCase(){return"nodeCreate"}_makeTransactionData(){return{accountId:null!=this._accountId?this._accountId._toProtobuf():null,description:null!=this._description?this._description:null,gossipEndpoint:null!=this._gossipEndpoints?this._gossipEndpoints.map(e=>e._toProtobuf()):null,serviceEndpoint:null!=this._serviceEndpoints?this._serviceEndpoints.map(e=>e._toProtobuf()):null,gossipCaCertificate:null!=this._gossipCaCertificate?this._gossipCaCertificate:null,grpcCertificateHash:null!=this._grpcCertificateHash?this._grpcCertificateHash:null,adminKey:null!=this._adminKey?this._adminKey._toProtobufKey():null,declineReward:null!=this._declineReward?this._declineReward:null,grpcProxyEndpoint:null!=this._grpcWebProxyEndpoint?this._grpcWebProxyEndpoint._toProtobuf():null}}_getLogId(){return`NodeCreateTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("nodeCreate",s$3._fromProtobuf);let n$2=class e extends P{constructor(e){super(),this._nodeId=null!=e?.nodeId?e.nodeId:null}static _fromProtobuf(t,r,n,o,i){const s=i[0].nodeDelete;return P._fromProtobufTransactions(new e({nodeId:null!=s.nodeId?s.nodeId:void 0}),t,r,n,o,i)}setNodeId(e){return this._nodeId=e,this}get nodeId(){return this._nodeId}_execute(e,t){return e.addressBook.deleteNode(t)}_getTransactionDataCase(){return"nodeDelete"}_makeTransactionData(){return{nodeId:null!=this._nodeId?this._nodeId:null}}_getLogId(){return`NodeDeleteTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("nodeDelete",n$2._fromProtobuf);let s$2=class e extends P{constructor(e){super(),this._nodeId=null!=e?.nodeId?e.nodeId:null,this._accountId=null!=e?.accountId?e.accountId:null,this._description=null!=e?.description?e.description:null,this._gossipEndpoints=null!=e?.gossipEndpoints?e.gossipEndpoints:null,this._serviceEndpoints=null!=e?.serviceEndpoints?e.serviceEndpoints:null,this._gossipCaCertificate=null!=e?.gossipCaCertificate?e.gossipCaCertificate:null,this._grpcCertificateHash=null!=e?.grpcCertificateHash?e.grpcCertificateHash:null,this._grpcWebProxyEndpoint=e?.grpcWebProxyEndpoint||null,this._adminKey=null!=e?.adminKey?e.adminKey:null,this._declineReward=null!=e?.declineReward?e.declineReward:null}static _fromProtobuf(t,r,n,o,i){const s=i[0].nodeUpdate;return P._fromProtobufTransactions(new e({nodeId:null!=s.nodeId?s.nodeId:void 0,accountId:null!=s.accountId?f$2._fromProtobuf(s.accountId):void 0,description:null!=s.description&&Object.hasOwn(s.description,"value")?s.description.value:void 0,gossipEndpoints:null!=s.gossipEndpoint?s.gossipEndpoint.map(e=>t$5._fromProtobuf(e)):void 0,serviceEndpoints:null!=s.serviceEndpoint?s.serviceEndpoint.map(e=>t$5._fromProtobuf(e)):void 0,gossipCaCertificate:null!=s.gossipCaCertificate&&Object.hasOwn(s.gossipCaCertificate,"value")?s.gossipCaCertificate.value:void 0,grpcCertificateHash:null!=s.grpcCertificateHash&&Object.hasOwn(s.grpcCertificateHash,"value")?s.grpcCertificateHash.value:void 0,grpcWebProxyEndpoint:null!=s.grpcProxyEndpoint?t$5._fromProtobuf(s.grpcProxyEndpoint):void 0,adminKey:null!=s.adminKey?t$r._fromProtobufKey(s.adminKey):void 0,declineReward:null!=s.declineReward?.value?s.declineReward.value:void 0}),t,r,n,o,i)}setNodeId(e){return this._requireNotFrozen(),this._nodeId=e,this}get nodeId(){return this._nodeId}setAccountId(e){return this._requireNotFrozen(),this._accountId=e instanceof f$2?e:f$2.fromString(e),this}get accountId(){return this._accountId}setDescription(e){if(this._requireNotFrozen(),e.length>100)throw new Error("Description must be at most 100 characters.");return this._description=e,this}clearDescription(){this._description=""}get description(){return this._description}setGossipEndpoints(e){if(this._requireNotFrozen(),0==e.length)throw new Error("GossipEndpoints list must not be empty.");if(e.length>10)throw new Error("GossipEndpoints list must not contain more than 10 entries.");return this._gossipEndpoints=[...e],this}get gossipEndpoints(){return this._gossipEndpoints}addGossipEndpoint(e){return this._requireNotFrozen(),null!=this._gossipEndpoints&&this._gossipEndpoints.push(e),this}setServiceEndpoints(e){if(this._requireNotFrozen(),0==e.length)throw new Error("ServiceEndpoints list must not be empty.");if(e.length>8)throw new Error("ServiceEndpoints list must not contain more than 8 entries.");return this._serviceEndpoints=[...e],this}get serviceEndpoints(){return this._serviceEndpoints}addServiceEndpoint(e){return this._requireNotFrozen(),null!=this._serviceEndpoints&&this._serviceEndpoints.push(e),this}setGossipCaCertificate(e){if(this._requireNotFrozen(),0==e.length)throw new Error("GossipCaCertificate must not be empty.");return this._gossipCaCertificate=e,this}get gossipCaCertificate(){return this._gossipCaCertificate}setCertificateHash(e){return this._requireNotFrozen(),this._grpcCertificateHash=e,this}get certificateHash(){return this._grpcCertificateHash}setGrpcWebProxyEndpoint(e){return this._requireNotFrozen(),this._grpcWebProxyEndpoint=e,this}get grpcWebProxyEndpoint(){return this._grpcWebProxyEndpoint}setAdminKey(e){return this._requireNotFrozen(),this._adminKey=e,this}get adminKey(){return this._adminKey}setDeclineReward(e){return this._requireNotFrozen(),this._declineReward=e,this}get declineReward(){return this._declineReward}_execute(e,t){return e.addressBook.updateNode(t)}_getTransactionDataCase(){return"nodeUpdate"}_makeTransactionData(){return{accountId:null!=this._accountId?this._accountId._toProtobuf():null,description:{value:null!=this._description?this._description:null},gossipEndpoint:null!=this._gossipEndpoints?this._gossipEndpoints.map(e=>e._toProtobuf()):null,serviceEndpoint:null!=this._serviceEndpoints?this._serviceEndpoints.map(e=>e._toProtobuf()):null,gossipCaCertificate:null!=this._gossipCaCertificate?{value:this._gossipCaCertificate}:null,grpcCertificateHash:null!=this._grpcCertificateHash?{value:this._grpcCertificateHash}:null,grpcProxyEndpoint:null!=this._grpcWebProxyEndpoint?this._grpcWebProxyEndpoint._toProtobuf():null,adminKey:null!=this._adminKey?this._adminKey._toProtobufKey():null,nodeId:null!=this._nodeId?this._nodeId:null,declineReward:null!=this._declineReward?{value:this._declineReward}:null}}_getLogId(){return`NodeUpdateTransaction:${this._transactionIds.current.validStart.toString()}`}};B.set("nodeUpdate",s$2._fromProtobuf);const d$1=o$e._fromProtobuf(libExports.proto.NodeAddressBook.decode(r$p("0ad0070a0e33352e3233312e3230382e31343810a388031a05302e302e3322cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303039663166386131323163326664366337366664353038643365343239663063363462636234346338326137303537333535326161646361643037313536396537323139353866356135643039663935383766666166636662653533343161326630313134616361653334366566336339303231336433343336656262323766343335306339393063356338633366386531653336373037626330386434323536303832336533663234653039613033616430393535613530393830313936323964643034623237623235316463653035356633646463623061343164363666303934316230623837636466653334393864343630333861623564663036663632613561646530383539383537336138386338663538363064633134393261366531383634383561396231333235306536643137623830636433396335633831393130396537336361373332646232336566386261613737366563383563653030393162656362326564656662616135656433653564626662643166383835613466613838316166336631343461386135363538353335333364383933393335393230383662326431643336326534356266653166623435363833616261366336343039373961643662343638373731383437323663366562643538623265616538356337636665336662616265663566366363656438353030333462333834373230366332643637386333363138373630323662386433353165303032616635653066666536663562316632393566646332663436396361613264323338316561306234386361393837636332633865363335653862313963653565313732613933373631613864343930613961343531386437323535383830613134643737623762613737343839326239326134306262383133363265333466633664353137386439623330313132393334323035636237376662396132383234323733393435363461383535346561343732383661343766383632333965373563393437383963653938633939383434373832343632393434663631333136376437623530323033303130303031320218033a606666643661646137346133613334613930346265613437363033303836663862656633623662653138616265643434633464343065313266623133306239376264366238353561656335643062393062306238633733353464356633623065340acf070a0d332e3231312e3234382e31373210a388031a05302e302e3322cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303039663166386131323163326664366337366664353038643365343239663063363462636234346338326137303537333535326161646361643037313536396537323139353866356135643039663935383766666166636662653533343161326630313134616361653334366566336339303231336433343336656262323766343335306339393063356338633366386531653336373037626330386434323536303832336533663234653039613033616430393535613530393830313936323964643034623237623235316463653035356633646463623061343164363666303934316230623837636466653334393864343630333861623564663036663632613561646530383539383537336138386338663538363064633134393261366531383634383561396231333235306536643137623830636433396335633831393130396537336361373332646232336566386261613737366563383563653030393162656362326564656662616135656433653564626662643166383835613466613838316166336631343461386135363538353335333364383933393335393230383662326431643336326534356266653166623435363833616261366336343039373961643662343638373731383437323663366562643538623265616538356337636665336662616265663566366363656438353030333462333834373230366332643637386333363138373630323662386433353165303032616635653066666536663562316632393566646332663436396361613264323338316561306234386361393837636332633865363335653862313963653565313732613933373631613864343930613961343531386437323535383830613134643737623762613737343839326239326134306262383133363265333466633664353137386439623330313132393334323035636237376662396132383234323733393435363461383535346561343732383661343766383632333965373563393437383963653938633939383434373832343632393434663631333136376437623530323033303130303031320218033a606666643661646137346133613334613930346265613437363033303836663862656633623662653138616265643434633464343065313266623133306239376264366238353561656335643062393062306238633733353464356633623065340ace070a0c34302e3132312e36342e343810a388031a05302e302e3322cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303039663166386131323163326664366337366664353038643365343239663063363462636234346338326137303537333535326161646361643037313536396537323139353866356135643039663935383766666166636662653533343161326630313134616361653334366566336339303231336433343336656262323766343335306339393063356338633366386531653336373037626330386434323536303832336533663234653039613033616430393535613530393830313936323964643034623237623235316463653035356633646463623061343164363666303934316230623837636466653334393864343630333861623564663036663632613561646530383539383537336138386338663538363064633134393261366531383634383561396231333235306536643137623830636433396335633831393130396537336361373332646232336566386261613737366563383563653030393162656362326564656662616135656433653564626662643166383835613466613838316166336631343461386135363538353335333364383933393335393230383662326431643336326534356266653166623435363833616261366336343039373961643662343638373731383437323663366562643538623265616538356337636665336662616265663566366363656438353030333462333834373230366332643637386333363138373630323662386433353165303032616635653066666536663562316632393566646332663436396361613264323338316561306234386361393837636332633865363335653862313963653565313732613933373631613864343930613961343531386437323535383830613134643737623762613737343839326239326134306262383133363265333466633664353137386439623330313132393334323035636237376662396132383234323733393435363461383535346561343732383661343766383632333965373563393437383963653938633939383434373832343632393434663631333136376437623530323033303130303031320218033a606666643661646137346133613334613930346265613437363033303836663862656633623662653138616265643434633464343065313266623133306239376264366238353561656335643062393062306238633733353464356633623065340ad1070a0d33352e3139392e31352e31373710a388031a05302e302e3422cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633535376166353739666138333530316265383939623238393037373635626664666364353261623433326230313935613166316563643836666330306162366335353039623066646439376564643363623563656135366132393566333132616262353530383331646266393633663435303131386234666363366532326366343637363230306365396363386564666262663535386463363966303234323634616437643364616232336265643231333363323734653639333434383931353564623130383766393033373039303563363431383561363231316463373432666239613639303964383231383639343762323737343633646662336666306163643437656666313265616431663639373265663263313230333739336334356537373537356265346661313130633765343066613864623963363138376431313366343730343031343137393037316162663539626537643262306465383264653432313564633235353036623163396332366534393137343031633939373530366533373765366266303362363838373237653739343066616436396335653064613363643563626432626537373733353061656132643064343765393761343438633834626536636531333464363462656530393835633239313632663463316535363763636139336430366133633162653861626365333562353537666237376634666536373161363664656337393037353664306538383138313635663262616361613839316161653761633734333766633731373562366562366465623734373233373837353162623662663962306531343833663936363865396664626435363034633339623134643965326265646565633834366139383064373034643137316537626134623766636431613330643934356361313266343761333235643933393861613138663937303636303534643464313566633839393465326465626537336539323731643534383638336636316561343466623235303731653335313861373865643365623337653731613036393166323637303230333031303030312801320218043a606630643934616363663664666633373238373463396462643864373939326562333137616635303031636134313936616261323635383039636233643230306261393631613534333863336135656430356338336264663963643131356432320ad1070a0d332e3133332e3231332e31343610a388031a05302e302e3422cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633535376166353739666138333530316265383939623238393037373635626664666364353261623433326230313935613166316563643836666330306162366335353039623066646439376564643363623563656135366132393566333132616262353530383331646266393633663435303131386234666363366532326366343637363230306365396363386564666262663535386463363966303234323634616437643364616232336265643231333363323734653639333434383931353564623130383766393033373039303563363431383561363231316463373432666239613639303964383231383639343762323737343633646662336666306163643437656666313265616431663639373265663263313230333739336334356537373537356265346661313130633765343066613864623963363138376431313366343730343031343137393037316162663539626537643262306465383264653432313564633235353036623163396332366534393137343031633939373530366533373765366266303362363838373237653739343066616436396335653064613363643563626432626537373733353061656132643064343765393761343438633834626536636531333464363462656530393835633239313632663463316535363763636139336430366133633162653861626365333562353537666237376634666536373161363664656337393037353664306538383138313635663262616361613839316161653761633734333766633731373562366562366465623734373233373837353162623662663962306531343833663936363865396664626435363034633339623134643965326265646565633834366139383064373034643137316537626134623766636431613330643934356361313266343761333235643933393861613138663937303636303534643464313566633839393465326465626537336539323731643534383638336636316561343466623235303731653335313861373865643365623337653731613036393166323637303230333031303030312801320218043a606630643934616363663664666633373238373463396462643864373939326562333137616635303031636134313936616261323635383039636233643230306261393631613534333863336135656430356338336264663963643131356432320ad0070a0c34302e37302e31312e32303210a388031a05302e302e3422cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633535376166353739666138333530316265383939623238393037373635626664666364353261623433326230313935613166316563643836666330306162366335353039623066646439376564643363623563656135366132393566333132616262353530383331646266393633663435303131386234666363366532326366343637363230306365396363386564666262663535386463363966303234323634616437643364616232336265643231333363323734653639333434383931353564623130383766393033373039303563363431383561363231316463373432666239613639303964383231383639343762323737343633646662336666306163643437656666313265616431663639373265663263313230333739336334356537373537356265346661313130633765343066613864623963363138376431313366343730343031343137393037316162663539626537643262306465383264653432313564633235353036623163396332366534393137343031633939373530366533373765366266303362363838373237653739343066616436396335653064613363643563626432626537373733353061656132643064343765393761343438633834626536636531333464363462656530393835633239313632663463316535363763636139336430366133633162653861626365333562353537666237376634666536373161363664656337393037353664306538383138313635663262616361613839316161653761633734333766633731373562366562366465623734373233373837353162623662663962306531343833663936363865396664626435363034633339623134643965326265646565633834366139383064373034643137316537626134623766636431613330643934356361313266343761333235643933393861613138663937303636303534643464313566633839393465326465626537336539323731643534383638336636316561343466623235303731653335313861373865643365623337653731613036393166323637303230333031303030312801320218043a606630643934616363663664666633373238373463396462643864373939326562333137616635303031636134313936616261323635383039636233643230306261393631613534333863336135656430356338336264663963643131356432320ad2070a0e33352e3232352e3230312e31393510a388031a05302e302e3522cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030396261343537623733333035663034613931636334366231623936356334653834313735316162633862313431356130626164666431663332633234383233383661323237323565623765633734646561323165353036313764363438656135616333393337343161623031623865666233323132333962386434666462316466626562396533663339616134363538306464303435643138636134346430303263333764646235323763636534646463333262666337333431393637316634636134343634613366326138346663383563373161636630653561383936323664663639613831343734656431363532396638303161386166613937653433356334653034613936346133353735323732383838343365353866306130356366353135336565343530376232633638623364376662353461653661393561393539633837613132663633306539356337623162336333363935653835383636323431373932366437366331363938336661663631323235303338373435393037653963663133643637633261636435303363613435316338353933336163343131386163633237393830316362393638333439393033313435636564323736323964643038393136333137303933353837613737633232303563666135323534336235336333623665613135623834653364326333306331656437353261343633336333366232356239383933656130326164353632656239623738363862336234663437663461323565333536303634393632616337623235653538323934346630306433303739386132363266393231346438633565373464306138333736636332643662613634653138663565346134306166616336323530363264326361323363643238303037303833323164333833343331346630653538343438353932333236373361333265373061653064373131653331303538316263646231346538373133343639346336653039333066343662333762393664343961363435373339343733333165376535303764396535366465356536313436663266303230333031303030312802320218053a606361363738656263626433646338363438663765643033666235396630653231616636373531336561656535313331386536623534396265356163653930366564633166666132366439336135376163656339626537376634306561656564370ad1070a0d35322e31352e3130352e31333010a388031a05302e302e3522cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030396261343537623733333035663034613931636334366231623936356334653834313735316162633862313431356130626164666431663332633234383233383661323237323565623765633734646561323165353036313764363438656135616333393337343161623031623865666233323132333962386434666462316466626562396533663339616134363538306464303435643138636134346430303263333764646235323763636534646463333262666337333431393637316634636134343634613366326138346663383563373161636630653561383936323664663639613831343734656431363532396638303161386166613937653433356334653034613936346133353735323732383838343365353866306130356366353135336565343530376232633638623364376662353461653661393561393539633837613132663633306539356337623162336333363935653835383636323431373932366437366331363938336661663631323235303338373435393037653963663133643637633261636435303363613435316338353933336163343131386163633237393830316362393638333439393033313435636564323736323964643038393136333137303933353837613737633232303563666135323534336235336333623665613135623834653364326333306331656437353261343633336333366232356239383933656130326164353632656239623738363862336234663437663461323565333536303634393632616337623235653538323934346630306433303739386132363266393231346438633565373464306138333736636332643662613634653138663565346134306166616336323530363264326361323363643238303037303833323164333833343331346630653538343438353932333236373361333265373061653064373131653331303538316263646231346538373133343639346336653039333066343662333762393664343961363435373339343733333165376535303764396535366465356536313436663266303230333031303030312802320218053a606361363738656263626433646338363438663765643033666235396630653231616636373531336561656535313331386536623534396265356163653930366564633166666132366439336135376163656339626537376634306561656564370ad1070a0d3130342e34332e3234382e363310a388031a05302e302e3522cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030396261343537623733333035663034613931636334366231623936356334653834313735316162633862313431356130626164666431663332633234383233383661323237323565623765633734646561323165353036313764363438656135616333393337343161623031623865666233323132333962386434666462316466626562396533663339616134363538306464303435643138636134346430303263333764646235323763636534646463333262666337333431393637316634636134343634613366326138346663383563373161636630653561383936323664663639613831343734656431363532396638303161386166613937653433356334653034613936346133353735323732383838343365353866306130356366353135336565343530376232633638623364376662353461653661393561393539633837613132663633306539356337623162336333363935653835383636323431373932366437366331363938336661663631323235303338373435393037653963663133643637633261636435303363613435316338353933336163343131386163633237393830316362393638333439393033313435636564323736323964643038393136333137303933353837613737633232303563666135323534336235336333623665613135623834653364326333306331656437353261343633336333366232356239383933656130326164353632656239623738363862336234663437663461323565333536303634393632616337623235653538323934346630306433303739386132363266393231346438633565373464306138333736636332643662613634653138663565346134306166616336323530363264326361323363643238303037303833323164333833343331346630653538343438353932333236373361333265373061653064373131653331303538316263646231346538373133343639346336653039333066343662333762393664343961363435373339343733333165376535303764396535366465356536313436663266303230333031303030312802320218053a606361363738656263626433646338363438663765643033666235396630653231616636373531336561656535313331386536623534396265356163653930366564633166666132366439336135376163656339626537376634306561656564370ad2070a0e33352e3234372e3130392e31333510a388031a05302e302e3622cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633432636361633566626336393166626265626461383766666431653735626463643839323234393463663434666462636365653439373838353231633337386266373764623039333465633064323138336437633531646236366638363463313161623764653161633363346366646331663039336132643666333765326233346362653463383133316639363833616434323837386338336433353534633634356161313637626366623036346138336463343563356231313538343939663964393235383766666637616263643566323231636438313530353438343133303030666136653536353930383962316466643635373636656137386561656466636136623435343535666438616235393834646265333565353739356432633633356561373937346434336538656165346665626666653439326537303762343862316230666336343831616539653039643339313333303039623764323634303265366535326535653931623262333830643838663062653766623462333033653730323139373835303537616139346365393234633439323665393136353639323836653836623362613635316361326130613633646634663639303766656665333438336439336234636531643464303363373134323131313337356232633263353164346562383339653337616635333062326362643666353064346362333665323739333731373064396364646163306163653263633234623830346230613237333531636638333062373635323565323664666239646266343961303536363234613736383632343934653732363364306437306365626165393532393433653535383432663563616431336663663630613265366463663761316435333366336135626235346563323139313863373665353235626132393134363637353833316531376533366336316665383534393838323864303962373632303135343132623265353237383439626165633163666663373764653463323934633535303831316535393866663234646131356133343536396464303230333031303030312803320218063a603234373166336665383134303638316665393139313364326363303633663036356534343930616536326666356435343861356162653133316432616639366362653361633235626265323433363663613466386630653736636639343566330acf070a0b35342e3234312e33382e3110a388031a05302e302e3622cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633432636361633566626336393166626265626461383766666431653735626463643839323234393463663434666462636365653439373838353231633337386266373764623039333465633064323138336437633531646236366638363463313161623764653161633363346366646331663039336132643666333765326233346362653463383133316639363833616434323837386338336433353534633634356161313637626366623036346138336463343563356231313538343939663964393235383766666637616263643566323231636438313530353438343133303030666136653536353930383962316466643635373636656137386561656466636136623435343535666438616235393834646265333565353739356432633633356561373937346434336538656165346665626666653439326537303762343862316230666336343831616539653039643339313333303039623764323634303265366535326535653931623262333830643838663062653766623462333033653730323139373835303537616139346365393234633439323665393136353639323836653836623362613635316361326130613633646634663639303766656665333438336439336234636531643464303363373134323131313337356232633263353164346562383339653337616635333062326362643666353064346362333665323739333731373064396364646163306163653263633234623830346230613237333531636638333062373635323565323664666239646266343961303536363234613736383632343934653732363364306437306365626165393532393433653535383432663563616431336663663630613265366463663761316435333366336135626235346563323139313863373665353235626132393134363637353833316531376533366336316665383534393838323864303962373632303135343132623265353237383439626165633163666663373764653463323934633535303831316535393866663234646131356133343536396464303230333031303030312803320218063a603234373166336665383134303638316665393139313364326363303633663036356534343930616536326666356435343861356162653133316432616639366362653361633235626265323433363663613466386630653736636639343566330acf070a0b31332e38382e32322e343710a388031a05302e302e3622cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633432636361633566626336393166626265626461383766666431653735626463643839323234393463663434666462636365653439373838353231633337386266373764623039333465633064323138336437633531646236366638363463313161623764653161633363346366646331663039336132643666333765326233346362653463383133316639363833616434323837386338336433353534633634356161313637626366623036346138336463343563356231313538343939663964393235383766666637616263643566323231636438313530353438343133303030666136653536353930383962316466643635373636656137386561656466636136623435343535666438616235393834646265333565353739356432633633356561373937346434336538656165346665626666653439326537303762343862316230666336343831616539653039643339313333303039623764323634303265366535326535653931623262333830643838663062653766623462333033653730323139373835303537616139346365393234633439323665393136353639323836653836623362613635316361326130613633646634663639303766656665333438336439336234636531643464303363373134323131313337356232633263353164346562383339653337616635333062326362643666353064346362333665323739333731373064396364646163306163653263633234623830346230613237333531636638333062373635323565323664666239646266343961303536363234613736383632343934653732363364306437306365626165393532393433653535383432663563616431336663663630613265366463663761316435333366336135626235346563323139313863373665353235626132393134363637353833316531376533366336316665383534393838323864303962373632303135343132623265353237383439626165633163666663373764653463323934633535303831316535393866663234646131356133343536396464303230333031303030312803320218063a603234373166336665383134303638316665393139313364326363303633663036356534343930616536326666356435343861356162653133316432616639366362653361633235626265323433363663613466386630653736636639343566330ad0070a0c33352e3233352e36352e353110a388031a05302e302e3722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393032663034393061396237663564326364316330643936633661363939306635373362356630656235626462626133393636316566303233303932343139333434363639393639613638613463373037316433323939393066623137393265393030316362353539386561373163326436363736383234333230656534636162663164643335376165376632616462656463316231623061396439353632333737396234633463376234376334373837613136656537313838633732313731373736323461393236346162333963343166376666306234356138396264613430633461643037633464353936643566303964373035366263623561333566343466393561353963323636653039383932646362653436616435316632643262336539393161386636363538653166326362393463373733656234346334346538393264316535356331303736663136303833313965653635376534306631393239363735343361623432616232323233383664313735383665323533373438646162643032356535306235306165363035303732306532333964363465653666623435303763303631346464346265376166646231333330383930666633613665313736353237633331313661663132396139616335653333366439663630316537313237613664376438323061643266393032646163396232343836363861316261623038643130333432656136396137303937313332666637313230636336346663646537383430633635366261313733326261393565396333363735313137356534656333643834613765306432383834326234316262626264366632386534366333613636333365313832373936356335353832306435306461653262303436356363306434326531393562396431353332653632323565623939386436613439303739613861316364346430313735646533633837663937363134383437623363626231376161333462653832306237623361643938616333666165663939336136373738393734373832633063346165336661626263633433303230333031303030312804320218073a606633353738373364343131346131616566303361646336626136396566616632363930653232376162633136613666633665353034396136336662643936383830303462313465343633633230653338343336613361323464333138326464380ad1070a0d35342e3137372e35312e31323710a388031a05302e302e3722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393032663034393061396237663564326364316330643936633661363939306635373362356630656235626462626133393636316566303233303932343139333434363639393639613638613463373037316433323939393066623137393265393030316362353539386561373163326436363736383234333230656534636162663164643335376165376632616462656463316231623061396439353632333737396234633463376234376334373837613136656537313838633732313731373736323461393236346162333963343166376666306234356138396264613430633461643037633464353936643566303964373035366263623561333566343466393561353963323636653039383932646362653436616435316632643262336539393161386636363538653166326362393463373733656234346334346538393264316535356331303736663136303833313965653635376534306631393239363735343361623432616232323233383664313735383665323533373438646162643032356535306235306165363035303732306532333964363465653666623435303763303631346464346265376166646231333330383930666633613665313736353237633331313661663132396139616335653333366439663630316537313237613664376438323061643266393032646163396232343836363861316261623038643130333432656136396137303937313332666637313230636336346663646537383430633635366261313733326261393565396333363735313137356534656333643834613765306432383834326234316262626264366632386534366333613636333365313832373936356335353832306435306461653262303436356363306434326531393562396431353332653632323565623939386436613439303739613861316364346430313735646533633837663937363134383437623363626231376161333462653832306237623361643938616333666165663939336136373738393734373832633063346165336661626263633433303230333031303030312804320218073a606633353738373364343131346131616566303361646336626136396566616632363930653232376162633136613666633665353034396136336662643936383830303462313465343633633230653338343336613361323464333138326464380ad0070a0c31332e36342e3137302e343010a388031a05302e302e3722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393032663034393061396237663564326364316330643936633661363939306635373362356630656235626462626133393636316566303233303932343139333434363639393639613638613463373037316433323939393066623137393265393030316362353539386561373163326436363736383234333230656534636162663164643335376165376632616462656463316231623061396439353632333737396234633463376234376334373837613136656537313838633732313731373736323461393236346162333963343166376666306234356138396264613430633461643037633464353936643566303964373035366263623561333566343466393561353963323636653039383932646362653436616435316632643262336539393161386636363538653166326362393463373733656234346334346538393264316535356331303736663136303833313965653635376534306631393239363735343361623432616232323233383664313735383665323533373438646162643032356535306235306165363035303732306532333964363465653666623435303763303631346464346265376166646231333330383930666633613665313736353237633331313661663132396139616335653333366439663630316537313237613664376438323061643266393032646163396232343836363861316261623038643130333432656136396137303937313332666637313230636336346663646537383430633635366261313733326261393565396333363735313137356534656333643834613765306432383834326234316262626264366632386534366333613636333365313832373936356335353832306435306461653262303436356363306434326531393562396431353332653632323565623939386436613439303739613861316364346430313735646533633837663937363134383437623363626231376161333462653832306237623361643938616333666165663939336136373738393734373832633063346165336661626263633433303230333031303030312804320218073a606633353738373364343131346131616566303361646336626136396566616632363930653232376162633136613666633665353034396136336662643936383830303462313465343633633230653338343336613361323464333138326464380ad1070a0d33342e3130362e3234372e363510a388031a05302e302e3822cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393164376466666637386634656662653538393034353063356263396533353334626666616461643933666237616662313562633762636636376433643362343133626439393934306464383235363461646130346162326534656466306131633062386662376531613830393265393133386539363062653263633638623562393766353764323831633538373265393761343739666338343833363331363065333836336235376233336534383639623138356163653565333662643433616535666136373863396562363666316634303134373836383236623266386661376530303630663434303563306138663964613732303566663436383361323433666130663331356631616662623461346431343064303232333465343437336662393266636233386633656232386336306366376362666236346530363963313830383665346464363139333839323061653066643763313933653665313034653635623831376564393339386532333232333766646630383332326339636563303964343039393237326137633031356432326234646363393639663665613166353138393032313035646636303039326235356134316234663332623935376235376438346535623232333930356538363938393531373333656139663265323436316563306436353232656538313664353835306661636665623431326366663962393939343361383764633064303436343437636539336239376531366437336239366234323633393632663831666366393435386535373537376337383061366631363135616137613132333236373338653236396262373331663839653839313632326535373765613534343230626630636134366265366663346637316366323638316163303235326161383835653133626536373263643238343539303432376463643133376366333131363235653862656533623038666463616166343635623338376365376362333338313666326331346136623939616337643733343331386366633539623765643933396261666566383739303230333031303030312805320218083a603439333161373832303264353566313062333135373537383563336634333964623638313962643131303033646637626332636539326532396135313762376332313838306465623463303137393537343462353736636434336238343938640ad0070a0c33352e38332e38392e31373110a388031a05302e302e3822cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393164376466666637386634656662653538393034353063356263396533353334626666616461643933666237616662313562633762636636376433643362343133626439393934306464383235363461646130346162326534656466306131633062386662376531613830393265393133386539363062653263633638623562393766353764323831633538373265393761343739666338343833363331363065333836336235376233336534383639623138356163653565333662643433616535666136373863396562363666316634303134373836383236623266386661376530303630663434303563306138663964613732303566663436383361323433666130663331356631616662623461346431343064303232333465343437336662393266636233386633656232386336306366376362666236346530363963313830383665346464363139333839323061653066643763313933653665313034653635623831376564393339386532333232333766646630383332326339636563303964343039393237326137633031356432326234646363393639663665613166353138393032313035646636303039326235356134316234663332623935376235376438346535623232333930356538363938393531373333656139663265323436316563306436353232656538313664353835306661636665623431326366663962393939343361383764633064303436343437636539336239376531366437336239366234323633393632663831666366393435386535373537376337383061366631363135616137613132333236373338653236396262373331663839653839313632326535373765613534343230626630636134366265366663346637316366323638316163303235326161383835653133626536373263643238343539303432376463643133376366333131363235653862656533623038666463616166343635623338376365376362333338313666326331346136623939616337643733343331386366633539623765643933396261666566383739303230333031303030312805320218083a603439333161373832303264353566313062333135373537383563336634333964623638313962643131303033646637626332636539326532396135313762376332313838306465623463303137393537343462353736636434336238343938640ad1070a0d31332e37382e3233322e31393210a388031a05302e302e3822cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393164376466666637386634656662653538393034353063356263396533353334626666616461643933666237616662313562633762636636376433643362343133626439393934306464383235363461646130346162326534656466306131633062386662376531613830393265393133386539363062653263633638623562393766353764323831633538373265393761343739666338343833363331363065333836336235376233336534383639623138356163653565333662643433616535666136373863396562363666316634303134373836383236623266386661376530303630663434303563306138663964613732303566663436383361323433666130663331356631616662623461346431343064303232333465343437336662393266636233386633656232386336306366376362666236346530363963313830383665346464363139333839323061653066643763313933653665313034653635623831376564393339386532333232333766646630383332326339636563303964343039393237326137633031356432326234646363393639663665613166353138393032313035646636303039326235356134316234663332623935376235376438346535623232333930356538363938393531373333656139663265323436316563306436353232656538313664353835306661636665623431326366663962393939343361383764633064303436343437636539336239376531366437336239366234323633393632663831666366393435386535373537376337383061366631363135616137613132333236373338653236396262373331663839653839313632326535373765613534343230626630636134366265366663346637316366323638316163303235326161383835653133626536373263643238343539303432376463643133376366333131363235653862656533623038666463616166343635623338376365376362333338313666326331346136623939616337643733343331386366633539623765643933396261666566383739303230333031303030312805320218083a603439333161373832303264353566313062333135373537383563336634333964623638313962643131303033646637626332636539326532396135313762376332313838306465623463303137393537343462353736636434336238343938640ad0070a0c33342e3132352e32332e343910a388031a05302e302e3922cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633665313863386662663463643465623130343534326362323061616161323532643935663035326631303836643538316334346164373337626636363736633063336637383961663532363562386166623739623530393132646138346530616663663735343763623166666630386430353237303137656236646335636466383362353139363964343433333661363338376364373062393462663463396261663230323938343065356634663836336437303831663066613831653038363361646564623862383961356461633262623535326436653762396662613232326163323863353730373535333866633935373939323934326433343166613238373665366235303765396365376564353732653863666461356465666133363466646638643865323338323961346363626234373866313165656533623332616238356530373239353163356439343230313135666261333237303733343934663433623566366265626638343135326533353665376231366261373634623761336235326362323733343634303136336265313436356536643166613463366536663636363834613633356339613535366161373130306462653634356466386634633432336165343561303863623335623462633138373838366532323939623563303231306135666261336239343439663438336566393465643932326531653938633131336265313636623839633733353832323433313335643434323330366162653561373162373730313866663333356436646437393534323639376231363832333862393637323766643133333962356638326133623661353937643937363033376165323530363435366338623334653966626633626333323431303434316334626663386562613538353937323534656665626661613738383039613563383835343732396135626137386563653139666338343037646438383934613662633738343430333764383738636163653663313532633265383965386136346230363861366332333765303939393362653830363839303230333031303030312806320218093a603634653039383631356266343035663765643561343031333434366238396334383863666364366262323561346136373664633737656561313164333364373032363832663061363961383033306538633537373764306534323230333739390acf070a0b35302e31382e31372e393310a388031a05302e302e3922cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633665313863386662663463643465623130343534326362323061616161323532643935663035326631303836643538316334346164373337626636363736633063336637383961663532363562386166623739623530393132646138346530616663663735343763623166666630386430353237303137656236646335636466383362353139363964343433333661363338376364373062393462663463396261663230323938343065356634663836336437303831663066613831653038363361646564623862383961356461633262623535326436653762396662613232326163323863353730373535333866633935373939323934326433343166613238373665366235303765396365376564353732653863666461356465666133363466646638643865323338323961346363626234373866313165656533623332616238356530373239353163356439343230313135666261333237303733343934663433623566366265626638343135326533353665376231366261373634623761336235326362323733343634303136336265313436356536643166613463366536663636363834613633356339613535366161373130306462653634356466386634633432336165343561303863623335623462633138373838366532323939623563303231306135666261336239343439663438336566393465643932326531653938633131336265313636623839633733353832323433313335643434323330366162653561373162373730313866663333356436646437393534323639376231363832333862393637323766643133333962356638326133623661353937643937363033376165323530363435366338623334653966626633626333323431303434316334626663386562613538353937323534656665626661613738383039613563383835343732396135626137386563653139666338343037646438383934613662633738343430333764383738636163653663313532633265383965386136346230363861366332333765303939393362653830363839303230333031303030312806320218093a603634653039383631356266343035663765643561343031333434366238396334383863666364366262323561346136373664633737656561313164333364373032363832663061363961383033306538633537373764306534323230333739390ad1070a0d32302e3135302e3133362e383910a388031a05302e302e3922cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633665313863386662663463643465623130343534326362323061616161323532643935663035326631303836643538316334346164373337626636363736633063336637383961663532363562386166623739623530393132646138346530616663663735343763623166666630386430353237303137656236646335636466383362353139363964343433333661363338376364373062393462663463396261663230323938343065356634663836336437303831663066613831653038363361646564623862383961356461633262623535326436653762396662613232326163323863353730373535333866633935373939323934326433343166613238373665366235303765396365376564353732653863666461356465666133363466646638643865323338323961346363626234373866313165656533623332616238356530373239353163356439343230313135666261333237303733343934663433623566366265626638343135326533353665376231366261373634623761336235326362323733343634303136336265313436356536643166613463366536663636363834613633356339613535366161373130306462653634356466386634633432336165343561303863623335623462633138373838366532323939623563303231306135666261336239343439663438336566393465643932326531653938633131336265313636623839633733353832323433313335643434323330366162653561373162373730313866663333356436646437393534323639376231363832333862393637323766643133333962356638326133623661353937643937363033376165323530363435366338623334653966626633626333323431303434316334626663386562613538353937323534656665626661613738383039613563383835343732396135626137386563653139666338343037646438383934613662633738343430333764383738636163653663313532633265383965386136346230363861366332333765303939393362653830363839303230333031303030312806320218093a60363465303938363135626634303566376564356134303133343436623839633438386366636436626232356134613637366463373765656131316433336437303236383266306136396138303330653863353737376430653432323033373939"))),o$3=o$e._fromProtobuf(libExports.proto.NodeAddressBook.decode(r$p("0a7f0a0c33342e39342e3130362e363110a388031a05302e302e33320218033a606131373165336261383334373637343761656232653261633464306531313563616161623931383230336230646665316364656162343433343338666332383961626338626138613661666638336462356631623333343034366461383863380a80010a0d35302e31382e3133322e32313110a388031a05302e302e33320218033a606131373165336261383334373637343761656232653261633464306531313563616161623931383230336230646665316364656162343433343338666332383961626338626138613661666638336462356631623333343034366461383863380a81010a0e3133382e39312e3134322e32313910a388031a05302e302e33320218033a606131373165336261383334373637343761656232653261633464306531313563616161623931383230336230646665316364656162343433343338666332383961626338626138613661666638336462356631623333343034366461383863380a82010a0d33352e3233372e3131392e353510a388031a05302e302e342801320218043a603734303964656332653439346236323765653439633639623239346265316365616562636133666463616633363738396538386663376435623065656635353631663532623832643335313931613339633266626564363032373236373136360a7f0a0a332e3231322e362e313310a388031a05302e302e342801320218043a603734303964656332653439346236323765653439633639623239346265316365616562636133666463616633363738396538386663376435623065656635353631663532623832643335313931613339633266626564363032373236373136360a82010a0d35322e3136382e37362e32343110a388031a05302e302e342801320218043a603734303964656332653439346236323765653439633639623239346265316365616562636133666463616633363738396538386663376435623065656635353631663532623832643335313931613339633266626564363032373236373136360a82010a0d33352e3234352e32372e31393310a388031a05302e302e352802320218053a603962313431363538346134613338306262383661366337643732303764386165646462633362363365613330353939383235356263653833353162613462356463613532633932383261353461366265643630646536336365303361616132340a80010a0b35322e32302e31382e383610a388031a05302e302e352802320218053a603962313431363538346134613338306262383661366337643732303764386165646462633362363365613330353939383235356263653833353162613462356463613532633932383261353461366265643630646536336365303361616132340a81010a0c34302e37392e38332e31323410a388031a05302e302e352802320218053a603962313431363538346134613338306262383661366337643732303764386165646462633362363365613330353939383235356263653833353162613462356463613532633932383261353461366265643630646536336365303361616132340a82010a0d33342e38332e3131322e31313610a388031a05302e302e362803320218063a603634383636383562346536653063623936333437326330316665393939333166643965346334343838376261383334323361653766656564323264363438343834636638613362633563636361366133373338376266393664333836373238300a81010a0c35342e37302e3139322e333310a388031a05302e302e362803320218063a603634383636383562346536653063623936333437326330316665393939333166643965346334343838376261383334323361653766656564323264363438343834636638613362633563636361366133373338376266393664333836373238300a81010a0c35322e3138332e34352e363510a388031a05302e302e362803320218063a603634383636383562346536653063623936333437326330316665393939333166643965346334343838376261383334323361653766656564323264363438343834636638613362633563636361366133373338376266393664333836373238300a80010a0b33342e39342e3136302e3410a388031a05302e302e372804320218073a603339653930393931356138353238303330313534613663373730393530633762343737376261343031333537633065363138373635343231356363323061616363646438653566663239653963346439356366343130316661363862653435630a83010a0e35342e3137362e3139392e31303910a388031a05302e302e372804320218073a603339653930393931356138353238303330313534613663373730393530633762343737376261343031333537633065363138373635343231356363323061616363646438653566663239653963346439356366343130316661363862653435630a82010a0d31332e36342e3138312e31333610a388031a05302e302e372804320218073a603339653930393931356138353238303330313534613663373730393530633762343737376261343031333537633065363138373635343231356363323061616363646438653566663239653963346439356366343130316661363862653435630a83010a0e33342e3130362e3130322e32313810a388031a05302e302e382805320218083a606134343837346137616131623337373431613037316164616165373866623135326236393664316335386438646566626531643832333034353332613063303139656539366363313964373536383635373864333961316536633331613165650a82010a0d33352e3135352e34392e31343710a388031a05302e302e382805320218083a606134343837346137616131623337373431613037316164616165373866623135326236393664316335386438646566626531643832333034353332613063303139656539366363313964373536383635373864333961316536633331613165650a81010a0c31332e37382e3233382e333210a388031a05302e302e382805320218083a606134343837346137616131623337373431613037316164616165373866623135326236393664316335386438646566626531643832333034353332613063303139656539366363313964373536383635373864333961316536633331613165650a83010a0e33342e3133332e3139372e32333010a388031a05302e302e392806320218093a603639383332613733613336303265386431666265356164353864316332363337613162363732643731656538376166313064623634386562393161666232323832353362316634376535376433643461343466663534376233333934616132320a82010a0d35322e31342e3235322e32303710a388031a05302e302e392806320218093a603639383332613733613336303265386431666265356164353864316332363337613162363732643731656538376166313064623634386562393161666232323832353362316634376535376433643461343466663534376233333934616132320a82010a0d35322e3136352e31372e32333110a388031a05302e302e392806320218093a60363938333261373361333630326538643166626535616435386431633236333761316236373264373165653837616631306462363438656239316166623232383235336231663437653537643364346134346666353437623333393461613232"))),b=o$e._fromProtobuf(libExports.proto.NodeAddressBook.decode(r$p("0ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030633435363165336332373863643635306538306334313363613434343233633163336331336366313437356636663639373664353937616534333262343961623432303836623739623834313332363035346238623364636635376438666364373962666330353831383363613234636434633163626335373465643131313765326635623762336336336365376230366439623465666366373337353633376234316665366635336338313162396465363134336633613532393537636466393536373735313230623333373033666635373632313430376162393537356263326433356330643434663039383366633165663633613466663532303966303730633932616631303632393536303163393662636564303634656331393031393730313963363831316334633864643830636234663461633731663961643736653761633839343536666266346630313166393061626432643930353336653832333436353166366265663932376533643564386237626634353930353039383362656361336162656632613964393761663334353737326137373430653936393932373562303138656130646632383661646436636539323365663930386662653736326137356632313131363836326462343464336463613164343462346432653864633130363663353030366262356137643935346164323535643462363033323733343735653531316165623438356430363961303637633061623563323435333863393333633036623561366165666139343030356332393135323133653463636461653663393432663632373266396464353238326436623839306631663230656664323339396364363734393234666135373034366163366461333265373339353161373331313365393166633262376666323965343835316238336666333966383362613965633666303863656664626236636262626666616266646661613931643933306637323030646134383133376333393463626431336537303165636463323631366664323162616436383161613466303031303230333031303030312804320218073a603665396138616263646364653665313134396133656265313766643538643839303538333961383664623732623036613365613230616131373666383638623235343838353261653432336437613963366237636666396537313436323961320ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030613163343037373135343330336363373263346662373639326333663934323531626465633132333961316637613839373261626539316133353332336662656361363235613766666165363430366338353564633261663231313039303062306466306536653664623736333634646661316666653835656461353637393336653239383562383536333461333261613532613635393964643663333062653166376136633562386635656563616632363231643861343539363832666364326462616164313536316431316633336663636237663535303061633536386431363564626561616365333238366432383934663634313239643738316436633732666437643539396339653164336166346161343333633233623931306661653463343834313634316636313532366164373837656265613533393837343136376539643361373363633066623135363432396431356563373633613664306630363131356137396239616637383364373762393864383330393661613437343366393734303864396531346263663464646666653435393137363838343762343063623864613763613337353235366432623933356430393566653235326661653831666636653337663834643761393064376535373061346638656633633764373636656564613437326630393230313939303135613839303832353961383733633534353466636262646361643265353238646538353435356234303833633764633461646335613938386530636464666463313539643564373132616264353434616137336563303239303839383134633938613434663236666330363434363539633138336533313834616132373266386431646330626661336530613536303438346362303535626134646262356363333339656338306264313164363432646333613730326538633730336162323139333038346439626436336630646665313261343333633235373665616637383163666164383637656637306264613631373638623262656631346635306336633362386230393666303230333031303030312805320218083a606464336233653763643361323537643832373665343635333533363162303138623730303931663438363635653832303031306538316563303539326236396264346265316662643765636435303964303730313364643034313238343266640ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030623263636163363561643066633736343561383137626661626334383761643765343133313165376133313938623337666238343264383463333935623366363764366264383438663130633666303363323930653866376461613864303031613834343164633335326131393136306133313933653638623832656466313961653637363933613961333364346362383765373839613130373037313535313565613737326361613862383661353639623931633534353038333564396333353466306461636563393766653737303931623435623134373639386237663836303134323264636432323631653932386465346461633963343264636261666466393663303732333362613330323730373666333763393639653865643330623662356438663530333462653764393263353936663862653836316535316663633361323432626639643862653965326139653865306631353565626366663233656666613763643537633130353432383131643830373736633935383535323666646230656161333465653139353564353131313933393066653837336534633034646564643239313635383834623938623436333038373838616537666334643461613461386663396263323637346261333231343933623632343435356164343130633164653731626339356431643931666130663230313431386137393565333039656166323937623639396266323763396661323736336364353963656230323165313662383230306331303630663238313766643833636663373637313833343839343631653335393932393162333830643665393339626161346231393233326136613237326464653635316638303436666463333464623237366137373764366662326265633332353562326363323434623461663536366231303566333063363530366464616530656233646564646366393437626362396336306530303039383466336234613863366334656434626639306263313933326237663934646333616536623336303030386562393032303430663962303230333031303030312802320218053a603561383634313561303861306138323566336232656237353031303135353230326533313234336665343161303333333834653738633138633131653565386632303964343933623062326664343565303662333734663262363964663564370ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030613365333762373663366364356636363232643639323434343464313263363737633339356632623539303266336262393862386138623530353561373037373036636130323863643735303630613264383730326432643862303439343762646366653061386331343161613238343462316530366536363139303031326538623633323661623066613331373937336263376362346432393439663231303861613034633462306339316261613537323866356235363232656337356162663537386131663762343165646532613637656264363963313865353831666466396336303230616330646539636132633331663063363436393030333331316662623563653764623439633738376531613764323761613432356565376238346461376536363933396639633830643065383266636535356530326466633862356337383431386132366161343336353036393837313962616663656366306264343930303061646463666134303537303862646265666262313937343964323264616230303765343464343565613233623130366638383334633135326532353036326434636632346666323533353663376562333732393130353339336662343962616239303461303266306630626234313763643931396433353238393031323865366262666634666163396639306465313138613937346632613664643031653033326137396231373866363066613166636262643032623537303466623436323935633135313930383136333733656464363633356338353639373866316239353033663166373362346230626538616261326564316665656164353939353362663832656664653933613334373161626435356364613362613861363733666262333739393734396662303036643030336630653633663636356333343631643261376232396463386232303462613539613635363638613436616532383738663030643166393439306466396532383066656266343331356561303465616135363861336139666434386336326336336236656364613639303230333031303030312803320218063a606434363430333938303337393230373965636364356134343331316361306463323262353065633839356235366535336431326232396637326463366462613363616665326535623831303466626461303338616635623434376430666231320ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393361323135636334613761373232636165396331336162643633366466393963636565633661663964623436623639666135313637313665663530636532343930613938316530396162303139636132636234363831316235623631396431626431643565653666343661343263373737636264656536343261313438346563646635646464333732393634326333386336643433613838353838373434373566353832343434333636346330346466656439623839303435666230383565323563336566636234383431373333656666376335323963313339653639333530633263643739623263386431393637396137313265346538636166643332363735343162383332623365313061303132353564656636396466316539643362386438656166303331316465363764356531326232366464303164626264396433653432643335643964653237313330326530663166363964383763626337616361396538383637653964343238643363616230363636656234393064356662616233306266663366373835643033663230373261343362623962356535343635366135393263623631656166643561356566323834633763616563363666376634373332356363306434633164323766363631643861373438636135303731633036656631333464666639366634303836363838333636643436386132343738303031376530623536616261376661623433623362376330623737393036666165353438326633323831316332393265366231343435346531346238393438303161383661303363633437373934646430643734353237613732653432346564336166613034383939656362396136336632613961653732626537666139383961646630643635613332633835316439383031666334313034386466333335363466633762333137303765633866623830313430666537623761316661313230626131636236363033323463656666623462636332643962623764653063663534633831396632646433626365616465633963323566356531396463396231303230333031303030312806320218093a603365303261363732306334343636353965383633303564353562666565383230623335653635306665636163633535333039373435356532633465303332636339646564313662316262343464336235393262626163623663326266663165360ab70722cc063330383230316132333030643036303932613836343838366637306430313031303130353030303338323031386630303330383230313861303238323031383130303930323539663465336439663066333934323536353438653963373330386231306237333430336363393039346439376164313531623737303631373062393737326365623634643636326563656639303161386437643135643331396135396338623731303731616363643839356237633933363130646336393736663637633465313732396261383337336162376535326133663363386632363534393164646536396436653039393934373065373434353938313133316264393663333665363836353230336662326562643564353065616461666237323633393664656331643931373438393862346539626530346337346433303466656164643963626433323334633362376633333036633939636230633333396663323539363962343164353861326237636663313833326532323664383163313936333939336532323535613038376431363938633033643432313062643634353830363434643039356361373661613137393465646434306331633837623566383261386533396636303365393731313662613034353738653765383033343634393564373835643465663763663737313462396562366635663965306239613934663462373338383436313962393237346434613935656631353735346138396439376566356331613838623664363933653061383065626435333766633963663063613931643163363264393135646537656438313862393532653634633230303239336565386532383461343136613732613365313266633764343233623135386639623439363630636263323436366662656430666564326532346531303266646539343265623463666439346265633436643364393066633038633339666563626130336530636132343634616536363462393739353135626132396531663730326333666537303262653739333739366438656462313761613438633039323930623032343534396630363131663561653233656437653136343432646637643164616432323836633262623039643535323264643365643639386332663032303330313030303128093202180c3a606339373462623938326338313931336237333236643561336639646363343836313261313566376161643032663230376230663130636432303137613666626666353830336537636139626662343730396162323862366230396435623133660ab70722cc063330383230316132333030643036303932613836343838366637306430313031303130353030303338323031386630303330383230313861303238323031383130303962646438653834666164616133353332666334636530316138613137643463336232333266353061393739306532363236383465646334383233653831356131626435623230656365613762663536653239663662623762383331666233626636656663643134373566306238656435666662306231333835623936643136366236323966303339366138666566356630366534626361323565653461313334306565323633613464396262303230643866343732333036663364383836313338646537613031396530353962643061666339303263636261316132313361653264616136306338613031333735356665306134386530333466356234303233613264616465616138386335343836383335336163376137613364663132623266623634313837373465396231346265366561623863633237623838303132616436313632646137346530656562313631333539303566343337333734646162383538366437353061323662626433616332346165643837386334643533653635313037326338373165393464376163633537356339363733383137333461353366656166346437626136626364643234316363363435386336303837643836333032616132353163303466366435366239633332643764393636323437353065643035353738356430373733663433646330393962323863393232383131343865366338316632393766663964313636653030306163303462333132343138363737356663656637356635656261306331303332626631333064663663643761343632313164306466336530353834643932656136373334396438343930353038656234656638386635346338633364343836646538373139663130666139366665623835636337393630373663613738313331386565326439656439303363613133333630343063353961643931613464326636393865393130386165306564623962316362393561643333623139376666623138626431626138623536636265653261616539353835656365323038613165313462343835363436333032303330313030303128083202180b3a603937303834333033333130373866353638326337663332343464383263336233653238316139313837393537386465656163646363326132656265353431616631383831313561643265383338363565356635643234376234613138633165650ab50722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303039303938383635646566326632616233373663376630663733386331643837613237616330316166643030383632306333356362366562666362623063333330303331393361333838633334366433303233313732373031323139336262373666643330303462383634333132633638396566353231336362623930313130313530396465616239346632366137333265363337393239646134633463623332353137653361646262333831316435306163346337376331666365386236353136303632313566333437303766336537323635353435653538633839343630396532383337366264623737373566653330343339653065313539326664636230633365653163333035373733643037326136623839353765616663653161313162653936356564616666333834333336366362366134346563323561383930313036653632343735363766373662353530666461343832626165633633303764363938656338383834316664363666323366323130653437623861396463626136626134653166613731366462333363383065333038313934393664636235653536303966623665376336313533373962646465643432376539323331623932353463326261663934333630386138366436393861653961336338363339646638383764366636623561373133383564323433333864393131613231326266373166316532616363386231383662393665633865363963383662366430353832313737373661303963396336383935336564623539313635373862356132363362326634363965336230633037656164613731613434376565613766386663316262383037343235353536376237663062643165366166623033353837313863393862343239653234623232393835393666633736636636616633393663613934333464373932366563376433376434623932616635366434356665666638313936303935323234613931366331666665366236363765323535666333616338636363656639323064633034346232353030333133326238373830363734326630323033303130303031320218033a603333373339306438666561313434616663313265383132353461323864616336656138323839333833366163303732656666643835653061373734383538306566323830393636343863356137663864626234636538313437363831353133370ab70722cc063330383230316132333030643036303932613836343838366637306430313031303130353030303338323031386630303330383230313861303238323031383130306335376564623966663237366530323362323830323163623164383763646631393636623639386366343865346561616137633639323037376365656538636362323339613463393231353937653865383966376363303564336633313331353738393736633465333134343035643461346530336137323431306335633039636135323761643561383562393938363337653732613332653166626330643535343662323436356539653830366332646435303965623035306162356662323730363366643932383135623164643236383965323131316361656236663534396539346139663030663038323164346361366336613631313766356135333363393236336266303734613330643563626566353064316338633233383762636139373265646564613039383362356430613662353764636230303230303036383238623430653430373662343837306232346261643834303536656535326235663432326538383430303238633235303036333832643865396336363132323566346637366561373265333430363037653966633666336332303433333037366131636138636231356564303361633839363664303530376263646536383165346530323331656539663837643131316537623438616338663934643264383432623532646637336635373363633534313439363437393763363236393638666661653734313866336236313039623561306630396533323233663461346435653335303964643235303133386636626331376266366365636531373539343433306466313830613338653930616466326166666266616430633662386331623837663137386130363164636662666638623932633931363664383734633166663561663466626364626665386539643039393337306464663630626537343736333364333665653465623563643531663665336333333965313531653431626462356135636532633863393761306134336233636434636330383138383463383739663964326633373438343238633835373366313763393066336362643032303330313030303128073202180a3a603734306166366266373339653838336338386633333434633961306638623330316533396463393831633531363365306465326133666634326239396534323665643765353662363766343231383530333834356466363266343963396662300ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030393133316161333638663933343532323966393762363235396363636166666561323365303063643565616430326533663639366331653731346565333933396461643836306533386266393561323937346639656234386539333433663861616334303565613935356430353332336531313762336231633934383133613361663432666538303832633364343362616631626434643833363765393364623030616436393665363237613130333661653533346630313165616435653536663337613666666534346236623965303939343031313932616435363061303334366234316138313030393566356632643766643332643665656236353562613735386336623532366331323933383661663731393763376135336165363033643632323833323235343936316631366430656661383037396137363835363138383862653733333439323231373935366262636166616562623631333563356662623234383464356234613566646630333336616330326532366331363532633162643865616633306461653164366433656230306637623466616238643634373866653864393565623931316466393636613064656134653532326462373662383936363537306563633561663039353136343234663061663566386565363665333836643536353037313339393731363961633337353733626635326664303538646539356162326666363865363831313161623233343035656139363462326262383864303263306631636165643731656364643465346534303835393438373666646238353030626335356337626130323036366530356162393864396637653034363664393730326562353765653337323266386663633835613735353035666633323632313730323838623738383732336164623937653464653536323063633930656164313338326663643735373138383966656662313165363737316263336636663366656231396337616335343238373864303361393032373035323663336565643234393465666635346531353363613966363839303230333031303030312801320218043a603765616236393661623935343336363538626331346666366234626534643932356364353162323230646632613164356336656531363061646166323961353165363934646533656531383463653232656164386437646239333231383266330ab70722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303038326465373330363566333466666332393334306435393439643232323062316534333636656435636637633665626436313663663934313661353365613030313766366262313136626664336633646566636331356237613464646630653434643032666536393536383830353365373961373730653230316263663731393333393030333965653866303836643466613734366337653035363931383330316639623565383465333932363238323830383561373962333232626361306235643835666539373232316132366262646532353863363230663064636561303261623165646431366363343961336632616239323838653364643166333764633462366136663731333366663932653534316337316237306432613266363664353537323561623138626638366430303965633364323466356431326530623565363830326431313531333732643462373634656265636234616638326636343934383565633537623561303164633637393538663561303363636161623763626139333534613137333732633133313662613437633935336161663934393031623366386332346536613361666436373538653766336231343363653264643363623037316232613734633932316365653934396134623561366265383739663163373930613662386436336231393264376565323961393439316664643638396139386330613763336436303332306631623461633264363232396466643934653432663361363034386137366265316562393538633861313837336265386433333861656339666335396162376633373632363738393430326331666435393566313930383735373565306265383237666334633061346662336433393361643734613934396363393836626662363463616264646165353339333566366463353630373464623933643737656133623831366264643662653533343439373237323238393835396666333463653531383630616666623632316431303438376463333834336631663836643534303334613633653438613161306430323033303130303031280a3202180d3a606132656363316232616539386264323862633161303864386633373161306434663734356337363864306337373339363235363265333433623235643833343235656565613765663865613134323935333432623865623738643332656333660ab70722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303039383735356134303862353332316532363330353230303064366437643461326333613535346435653133383461396362356562663437346165383832633633623438366264303864313434646466316139346365396137643632353139363330303661666461616334353838343666313736343031393566653235333961363536393330656661383534663231343865363865633161303863316334396432303063336633303435666537313437663036643533346334626432363231303063623164643339373339643736306438316130626432306638336632353564323530376434636362313130366235333631386336613934343039633838376361653236326434636565396338363233323134376365633134303465306335376262613733313731333065653339363433383838616633643539386564643832623863363165363561653831613465316135366263303664333937313433613938643431636138376433656634333365663061656162363830313139316233653338343830393638663636623665383836363261663435613965323132393934663638623238386562393637626562393834373863323433653231333663316131353931663036316635626330346232316666326261343862323966313834333130383838373362646665393966386135326539343038393731383536653830346465613630326133313137383663393835363532393633633361333737303332396234303966373466646663373436623232613566383431383931323037316334636538343663396234623332306665646636653962363465326362653338346639613832623661616164346232303930373433316466316133336636393230376135363536303062653831303730643038333239303039393538353961343439386435623539333135626365626566656538303765623061336139343266316364663333363764643434343466646232393838366566636464306265346162653961313838383033393533383735656461333364623732393839663736336230323033303130303031280b3202180e3a603139366237623132303739376364623361396430303362393833643537646131303331303662313733306531376636376532633762616161646234333738396166313639366461313031316232353362636263383630333333383566303332380ab70722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303061396462376638626161313236383938666162373839313135613362356438393734346631393765323830343161653039386633653838366336393837313732316531316262306164313166336365393132346161393631643661306463383435663439373635633366616231393935383430323637366635363434363262663238316462613535383837383066303365393035373938653138343236396161613630663761313437323333316532666231646561646438373763383463626362363431636139653563386164366534356263313539636230373966636230643434396364636438643932333963316130343765376234343864613063646361323636313061323566323936643936653734363962363736643461343434353136653761353965383532393361383038366638343063303532383534653032613863623230303264616433353832356265346438336235326661393165386337336666303439373436313438383632373837633131313866393234643331636261633162343466656666323264343336623339373965616466396234336134626661373265313562343735356663616232363065303661323739633362623733626337663136613036306434643532326664343930353830333838616135393564383034343733366535323266363432343931356637383033623735383365303935636466373863333235313936393764653831623839666235303035343735336231613137663961616662303634643834633939326639616231316363626338636231303831346463616635323634616134356632316264656661633832636361636161663335386533313337336565316261346537343032666438613730656130633238636135636337346463343235313063393639636432633435396231656333363838613031656133396139393237313063643232393763393861383462363334386135373738303466646332333464336665313930336532633231653137326461323862353961653665346337653865646438623731633439643730323033303130303031280c3202180f3a603538343661353366343437353239666439636462373830346364333136383865643665656265336236336461326635663231316666626337333731393763663366316366626664613631626537643135313066306539323339383131376637340ab70722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303061386365616333363765623166316465356630643965663365616630646639623938343438666532303830383437363536326130363063353163323839373730623463616366653932636236353536393832336539363263326132633966656435336264333663613361313232646531633532356135383266323561346437643632386331613364356264623839333661656365373531306537353534656537303333303235633039326338323865656235373338626530326564393633646138316135393230353633346365393435343537376162383266343066313366316565353565306165373237653233633330323834623166343462393961636534646463356639616337616438386439666132323535393335623234646362613834303036343265313663663235333263306230643638393239303436303837313563343037366634366438346130653066656433366537366363646339363335356537613236313630393435633262353461653236636330306664303832333236333436656565656137646437356639313931316539396462636239396561346163366261303536633333323238643838316438353833316439636338373935393364613137343664643065653935646332623936666539336261666366663263643764393239353864373864663333663230356437313135656439666163346462366634636336306535366135343431646135623562353566613539393939303265393538613662366334346438313064646335363138313234316238376632326630353961363838306538303231373336643031383937646236353434396365383137613233373564303335353163623064653530376336303961306338303330656366346266646562323133633033646161373634613138323162373234333334663731663736386437616563623237373035326137303333373635663037323138303536633738663261383761663138333836643866363161356366636233663262613464643539393135663133643338363334643136393537353730323033303130303031280d320218103a603030306162636435396133306135333838633530306265363832663663613239343034363239356339323735383831633230643334626230643639306564613762333862366262643037613364643166646662366137303434626230396366660ab70722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303061663062393134323537626637613436353563346135306430636164356530613165343538316564363632336630653837333066373936623866323963353831373862636363363933326331666333316633396566343462383264336334336233393837333733373366656362313239353232386130346664353061313466333634366438346665316634363763616562393864343633653239373565393935623864326531653339663362663661646463323561653335643635643032363038653033343535333739363665326162636534396238313462656164336331623735373137346165333063303062306334336539396238303439366237326433633133316631633665346663646130356632383131376566396532386334333033626534643863376530343264353862383363633132313934356132633635653739363263616139313835393338663337353764663763636139356366303262356533313934346133613631396130616333663165333462396230313364346332323463346631653730666439666433363938336566383661646535313833363263633833323263306637623631613961633735666238326537623836643638626330663039396130396131346361633561316438643338663961386137306363333766663563633362626432373432666664313436323535633137316536613137383038333237316463653066646536383165643439326362353962303739366432373031373538333864633539303831303765336136656133663961343036623364313133306363656333623437393165343962626332333136303362343661623264306639336434336265373561623961346437313065613934306532383561376231353362306361376364646565366439646365306164383335306334316439306332313562393538383531356166613061633333363561653037653831663362626233366264626561633462333162636231616134653832353635623937376639646164383564363236656566396161613965663864376533666230323033303130303031280e320218113a603933653238313031303462326231376230303935326235613431303264333365646230343363623136646533616433643364363832363066353562623065353837333765613539343463333338663763386362383863373833336663383630630ab70722cc0633303832303161323330306430363039326138363438383666373064303130313031303530303033383230313866303033303832303138613032383230313831303038633037626533303561643630623930626132646162333962306565373736306531613232663835373532323534306437306230336233663965343837356133613239616230383038386631343466353765623235326534366261353933383564306536643432373031313764613061626331623362383036393463396135303538623836643631646661303665373136373039633838653866656163376333613065316432356663306165626636613866373666636239396638343566653138313436316361623638353862393763336134303237666233373132623134653663303738396465313764343137363435373765353131343137656231363236393265623037616531653733353532333565396262343339303437623663303136313337383265376464366636303464616134363734363631643533393631663436633366616136623765373637363264333733623562353432623739656139363365666266333361633638313938626232623636316366663637363931366566333732616434633236633231366334626334373837633834656333326431383464373763373531383663303963663364396639313433336361393835333131396261623331666136616432366634353365353936643962646563613638613537363962633866656537613533356438306338633666336566623164666232383861623661393739383534623763653833313234656330643130326166663934633362373466396333373839353863323565623933336464353363316538303561313836353464366439313836393930663635373034323966393630663334653862346637666439393732646362666539323430653037346461326433353561356637656639633161663632656635393832613831373435373862396331356334396563353636626461636233306363666365663039636466653730386164343837343234653963316265363533663965653736363065376439343263316566613564613238366531616464616230366139613333663964653934363739356230323033303130303031280f320218123a603934383235313739643163333934303137306233356432363665346366613830643737386335653966356261653764653833666638636334373431663362653336616336336431653761653439373261656466366263316533636632303638390ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030626531376339393634376365633635613434343037623533353835366233633362616566356235346635363561663538623834353662613863376365353335643561633732633631633434633736623363353763386538363438343136333762653130613833636665333963303932343736643064626534643663646364636437323061333062356266656235316130316131386635383263343566366338363939336663663764663138323933356465316438363930363034346463663335313836393335643962643765656137393532333532626562623465663961653066373636316537306134323337616661393839393636383763613438666366633562303064333830376630353462653066613863336266613432353033386265366566323935313634663232663733623765383863393465613962653861613466336132343563383962396431666435313932663761353062393538623265663831303462333666316266386664326366623238633134323138303063316334376534656639386166313530303730636336643639643137653865623932663138613661613161363532363661343935323338643130336638663639356235376563663337333635306130353230303837343537323162656138313536323739363763383037363336356466386334633761376434646438663263333835306331386662613731656236306536653864666264313936653035333766643730623334346563626363353330646663383364613666656466343964353161393034313935303262613964373063643335663163663363303639346532333534663930363466646266353335656232336332376330613433643062373863316638363763363164393836393564386465663762633261313062623636373463323266363661616230613931383133646466323763646238353263353965663739653162396531613037356661366565323761376533373734646266346232363436353432376536643561623931666537663066336137313738346563613138326235303230333031303030312810320218133a603038393039376465663031623037633764393734613537353532353161366161613061666236623332613534353334336432393138653732626164303433323163313131633234643432373538306633626131653236616139643735653632360ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030613561643262373634336130346330353564326638636432353131623135313339666334353537353632313338386534396331313962326633393861636131313066363133393662306338363664653530363335323262623835343032373365313366366439346365316536303433386636616662303061616136343631326637313435653962636538626331613533623934313931336161373663396633613238333366616437636632383563376163326433376639396633633263646234396465346431353165363136373835363466323831663534313432346234316661376335316232613936303232383363376433326565303065623833386461313563333861666339366530363164393763656465323231363566663161613935396631633432373562326430393863343035383661353537396662623363623930303732373034313230613861363661353237306634666366643130383663393233363930613335653766643434356533336163303366313339633638363835353635373063646334616166323231303761366331613434323435366137633663373965653034303930653765356434663636626361363063613166343762366466623534336461633363626631396137373139613866353562366638336234613362386136366436303235366430613436353531666137303234626430353633316238613535383038373732353463326632663236386364633333643264626263666237333365396662653233336262396362353961623331613031343862323365386334323638306666313061663463373961346430383334366662373961393364393632393534386561663162623132343639386661656661346364643732343432633033613034623733333433326637343839303361333235633238336434353661623961653932316165376564333339316535643137383765666463323335343061376238356336393161653837306130376639306231316331336233326365343365616564313562333639363835636534393137376363393835303230333031303030312811320218143a603939666162633461646534653636326336653238323366346139366562323134343034383465356136643064333132623730633036386432326236323936333830376332333361343964626239383361376562623330653737303637373261340ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030386434356332316330633935656636356130323964353263393537666430663835663230313233646130333465363136373164646565353437356630373338326136366336366362346463353035303464646664333735383130383364663864313735373733306564386436663336346466346333366132363531353931393535646132303161323430376661386162396232333133383131323235613064613233306662653338306530393061613536656661346632303265633962343832336636353031643936616336393865626632366161636633656532643166333261373231633934376531303736636633356233373364613164383761333661313532653030653731303131373932323832653832356666313731633538333362383835373062666336646138343439653666393566386231323635616235353531393430333135353364316435373666393363343263306361363061616261633463386464313632643831313466326232313531313538336337323533396665353663343939613932396465336134306130643435633137633538396332643739383863653236656166633932613364333762376561303034326434336530336166613632373162323632353561366363636661653533373138323164383165306230356332353062353966306139303734316130653065383861303965643536633562393738306430393566303930366630623831643531323633393832616165303131333663303732643834346131316436646134623261363163363434653161623137663136666634386565323366656465383435326631653432653264333061303739306332356434323036306531643434613637316132656232336431313466363863373165333366313736646235386136386234333030353462633164323938336132336133326561366666393566613763346438653338306562323936653938623739363865636638343534643831376337333765656135646439323165623836633136633762323933303461346137656362653561336131303230333031303030312812320218153a606537396165396337313933643164326263393433383436346338616135663632323461653835323936366134336239383235383833663766373432633533393562643330393935383761393638363662393233396431656666336165353037610ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030623035616265326162303066646430366339353565383637313062306530366631613932363234613438616431636263386466633666323231323936326230633330666462643238346133376335613337363538623633633336656138313632353631613865346639343663626535373232633032383830316630663238316337306638643838633763303061326632653239663539376237393938363965643833353664663537633437626539393434613261616666363530663962346262613064626335336463383830666462623639656134353139303564323830323230326638653239633034613736643237616632656237633534383438356266336634363934633930633431383130383838383433373932383438383335663738313637303764336538643736663465363766353738306263663038383133633535656336333961396264363234313738663565623134376435303061663335316539656631623165333432343834636132363064623763636261653438366631336366323635623562316162363838303636303038303533623230633364656463653737316339613038613033323061613963653435316562396439383361376234396361613130393666386164633039383331386463333865306537636566306438653564353537613036373536383561316339653235366132626339646261333232623362623331373263663731343037376263333830663861306134333361386266613766626663353966366230393365633862663665393339376330396231386531383034306331623536363836343733376338666137653239373935663361343538386464613763326261623439353636356363346139623833366532656239306336326133666361663539316662356638313830346337363138306536323666613236343461376465333435313164366334363637643938393337653237373333663464316539313338383333353465353466643733353137323165373666376235366333343833333838663461366238376232386165626562303230333031303030312813320218163a603962343038383566313362366163316337353336393262613366313739303061333838333165363934613061663937343934623834333838323039636235656662646339386136646162623265316337313833393166633133356264616163330ab70722cc06333038323031613233303064303630393261383634383836663730643031303130313035303030333832303138663030333038323031386130323832303138313030396463643863306135336539306333353539353734663636323034313137643362353033653530613336643330393766616338343239653663656364333762623534303731383038663265653938323033356638353161306339626532313736333833613232653338633161626131363866333266393035373063623332333363666536323539383736363661663637623531346361656632316662386466366430666364333363663236303662393264646561353533366236303638643836373832653339626435633338343435393931643431396237643165633038353939343132633039343964316332343062333563313464633535323734646261373166666165393336313235613566383139663534313332653234333964346163353539373939366563653835653133646666333336316639313331663536636561633562396635353262343963663666396139616336653564636532646233363934363266393361663830653562353662366538626566613136326130363162346137363839326264633834363437333036633630303835386664643237303332373663326337303434303139386566643766653335343563663261623538306337346366643634343561616637626437663734356363323532656162643236356561626565383632343137313034653639343861353537353666646332323264663061313031353234646531633363303863636630343330313165633766653936346564643834353161313330313437633037333633613335663131666465656638663261326237363137353762343335386666383962373561343864363762646336303930363933653062623836373965636262393366666462336633656439366265633933656634363536653337313661623837636534366361386531323539633866656464653866326631656130663365623263343865393635353164653132333330333435373235663435656436396338353735623531363833616661343732363231383236646232326262326431633466316533363436346139303230333031303030312814320218173a60346630613033333466393737363738313632663830643936376637323139313431333630633062376637663033316233376336396536323137333933336564616434366263626139373636376565373262666435613933346261313532326330"))),s$1={"https://node00.swirldslabs.com:443":new f$2(3),"https://node01-00-grpc.swirlds.com:443":new f$2(4),"https://node02.swirldslabs.com:443":new f$2(5),"https://node03.swirldslabs.com:443":new f$2(6),"https://node04.swirldslabs.com:443":new f$2(7),"https://node05.swirldslabs.com:443":new f$2(8),"https://node06.swirldslabs.com:443":new f$2(9),"https://node07.swirldslabs.com:443":new f$2(10),"https://node09.swirldslabs.com:443":new f$2(12),"https://node10.swirldslabs.com:443":new f$2(13),"https://node11.swirldslabs.com:443":new f$2(14),"https://node12.swirldslabs.com:443":new f$2(15),"https://node14.swirldslabs.com:443":new f$2(17),"https://node15.swirldslabs.com:443":new f$2(18),"https://node16.swirldslabs.com:443":new f$2(19),"https://node17.swirldslabs.com:443":new f$2(20),"https://node18.swirldslabs.com:443":new f$2(21),"https://node19.swirldslabs.com:443":new f$2(22),"https://node20.swirldslabs.com:443":new f$2(23),"https://node21.swirldslabs.com:443":new f$2(24),"https://node22.swirldslabs.com:443":new f$2(25),"https://node24.swirldslabs.com:443":new f$2(27),"https://node25.swirldslabs.com:443":new f$2(28),"https://node26.swirldslabs.com:443":new f$2(29),"https://node27.swirldslabs.com:443":new f$2(30),"https://node28.swirldslabs.com:443":new f$2(31),"https://node29.swirldslabs.com:443":new f$2(32),"https://node30.swirldslabs.com:443":new f$2(33),"https://node31.swirldslabs.com:443":new f$2(34)},t$4={"https://testnet-node00-00-grpc.hedera.com:443":new f$2(3),"https://testnet-node01-00-grpc.hedera.com:443":new f$2(4),"https://testnet-node02-00-grpc.hedera.com:443":new f$2(5),"https://testnet-node03-00-grpc.hedera.com:443":new f$2(6),"https://testnet-node04-00-grpc.hedera.com:443":new f$2(7),"https://testnet-node05-00-grpc.hedera.com:443":new f$2(8),"https://testnet-node06-00-grpc.hedera.com:443":new f$2(9)},n$1={"https://previewnet-node00-00-grpc.hedera.com:443":new f$2(3),"https://previewnet-node01-00-grpc.hedera.com:443":new f$2(4),"https://previewnet-node02-00-grpc.hedera.com:443":new f$2(5),"https://previewnet-node03-00-grpc.hedera.com:443":new f$2(6),"https://previewnet-node04-00-grpc.hedera.com:443":new f$2(7),"https://previewnet-node05-00-grpc.hedera.com:443":new f$2(8),"https://previewnet-node06-00-grpc.hedera.com:443":new f$2(9)};new f$2(3),new f$2(3);const o$2={...s$1,...t$4,...n$1},t$3=/^(\S+):(\d+)$/;let r$2=class e{constructor(e={}){if(null!=e.address){const t=t$3.exec(e.address);if(null==t)throw new Error(`failed to parse address: ${e.address}`);this._address=t[1],this._port=null!=t[2]?parseInt(t[2]):null}else{if(null==e.host||null==e.port)throw new Error(`failed to create a managed node address: ${JSON.stringify(e)}`);this._address=e.host,this._port=e.port}Object.freeze(this)}static fromString(t){return new e({address:t})}toInsecure(){let t=50212===this.port?50211:this.port;return new e({host:this.address,port:t})}toSecure(){let t=50211===this.port?50212:this.port;return new e({host:this.address,port:t})}get address(){return this._address}get port(){return this._port}isTransportSecurity(){return 50212==this._port||443==this._port}toString(){return null==this.port?this.address:`${this.address}:${this.port}`}},t$2=class{constructor(e={}){if(null!=e.newNode)this._address="string"==typeof e.newNode.address?r$2.fromString(e.newNode.address):e.newNode.address,this._cert=void 0,this._channel=null,this._channelInitFunction=e.newNode.channelInitFunction,this._lastUsed=Date.now(),this._readmitTime=Date.now(),this._useCount=0,this._badGrpcStatusCount=0,this._minBackoff=8e3,this._maxBackoff=36e5,this._currentBackoff=this._minBackoff;else{if(null==e.cloneNode)throw new Error(`failed to create ManagedNode: ${JSON.stringify(e)}`);this._address=e.cloneNode.address,this._cert=e.cloneNode.node._cert,this._channel=e.cloneNode.node._channel,this._channelInitFunction=e.cloneNode.node._channelInitFunction,this._currentBackoff=e.cloneNode.node._currentBackoff,this._lastUsed=e.cloneNode.node._lastUsed,this._readmitTime=e.cloneNode.node._readmitTime,this._useCount=e.cloneNode.node._useCount,this._badGrpcStatusCount=e.cloneNode.node._badGrpcStatusCount,this._minBackoff=e.cloneNode.node._minBackoff,this._maxBackoff=e.cloneNode.node._minBackoff}}getKey(){throw new Error("not implemented")}setCert(e){return this}get address(){return this._address}get attempts(){return this._badGrpcStatusCount}get minBackoff(){return this._minBackoff}setMinBackoff(e){return this._currentBackoff<=e&&(this._currentBackoff=e),this._minBackoff=e,this}get maxBackoff(){return this._maxBackoff}setMaxBackoff(e){return this._currentBackoff<=e&&(this._currentBackoff=e),this._maxBackoff=e,this}getChannel(){return this._useCount++,this.__lastUsed=Date.now(),null!=this._channel||(this._channel=this._channelInitFunction(this.address.toString(),this._cert)),this._channel}isHealthy(){return this._readmitTime<=Date.now()}increaseBackoff(){this._currentBackoff=Math.min(2*this._currentBackoff,this._maxBackoff),this._readmitTime=Date.now()+this._currentBackoff}decreaseBackoff(){this._currentBackoff=Math.max(this._currentBackoff/2,this._minBackoff)}getRemainingTime(){return this._readmitTime-this._lastUsed}backoff(){return new Promise(e=>setTimeout(e,this.getRemainingTime()))}compare(e){let t=this.getRemainingTime()-e.getRemainingTime();return 0!=t?t:(t=this._currentBackoff-e._currentBackoff,0!=t?t:(t=this._badGrpcStatusCount-e._badGrpcStatusCount,0!=t?t:(t=this._useCount-e._useCount,0!=t?t:this._lastUsed-e._lastUsed)))}close(){null!=this._channel&&this._channel.close(),this._channel=null}};class d extends t$2{constructor(e={}){if(super(e),null!=e.newNode)this._accountId=e.newNode.accountId,this._nodeAddress=null;else{if(null==e.cloneNode)throw new Error(`failed to create node: ${JSON.stringify(e)}`);this._accountId=e.cloneNode.node._accountId,this._nodeAddress=e.cloneNode.node._nodeAddress}}getKey(){return this._accountId.toString()}toInsecure(){return new d({cloneNode:{node:this,address:this._address.toInsecure()}})}toSecure(){return new d({cloneNode:{node:this,address:this._address.toSecure()}})}get accountId(){return this._accountId}get nodeAddress(){return this._nodeAddress}setNodeAddress(e){return this._nodeAddress=e,this}}let o$1=class{constructor(e){this._network=new Map,this._nodes=[],this._healthyNodes=[],this._createNetworkChannel=e,this._ledgerId=null,this._minBackoff=8e3,this._maxBackoff=36e5,this._maxNodeAttempts=-1,this._nodeMinReadmitPeriod=this._minBackoff,this._nodeMaxReadmitPeriod=this._maxBackoff,this._earliestReadmitTime=Date.now()+this._nodeMinReadmitPeriod}setNetworkName(e){return console.warn("Deprecated: Use `setLedgerId` instead"),this.setLedgerId(e)}get networkName(){return console.warn("Deprecated: Use `ledgerId` instead"),null!=this.ledgerId?this.ledgerId.toString():null}setLedgerId(e){return this._ledgerId="string"==typeof e?r$h.fromString(e):e,this}get ledgerId(){return null!=this._ledgerId?this._ledgerId:null}_createNodeFromNetworkEntry(e){throw new Error("not implemented")}_getNodesToRemove(e){throw new Error("not implemented")}_removeDeadNodes(){if(this._maxNodeAttempts>0)for(let e=this._nodes.length-1;e>=0;e--)this._nodes[e]._badGrpcStatusCount<this._maxNodeAttempts||this._closeNode(e)}_readmitNodes(){const e=Date.now();if(this._earliestReadmitTime<=e){let t=Number.MAX_SAFE_INTEGER,r=!0;e:for(let n=0;n<this._nodes.length;n++){for(let o=0;o<this._healthyNodes.length;o++)if(r&&this._nodes[n]._readmitTime>e&&(t=Math.min(this._nodes[n]._readmitTime,t)),this._nodes[n]==this._healthyNodes[o])continue e;r=!1,this._nodes[n]._readmitTime<=e&&this._healthyNodes.push(this._nodes[n])}this._earliestReadmitTime=Math.min(Math.max(t,this._nodeMinReadmitPeriod),this._nodeMaxReadmitPeriod)}}_getNumberOfMostHealthyNodes(e){this._removeDeadNodes(),this._readmitNodes();const t=[];let r=this._healthyNodes.slice();e=Math.min(e,r.length);for(let n=0;n<e;n++){const e=r[Math.floor(Math.random()*r.length)];if(!e)break;t.push(e),r=r.filter(t=>t.getKey()!==e.getKey())}return t}_closeNode(e){const t=this._nodes[e];t.close(),this._removeNodeFromNetwork(t),this._nodes.splice(e,1)}_removeNodeFromNetwork(e){const t=this._network.get(e.getKey());for(let r=0;r<t.length;r++)if(t[r]===e){t.splice(r,1);break}0===t.length&&this._network.delete(e.getKey())}_setNetwork(e){const t=[],r=new Set,n=new Set,o=[],i=new Map;for(const s of this._getNodesToRemove(e))this._closeNode(s);for(const s of this._nodes)t.push(s),r.add(s.getKey()),n.add(s.address.toString());for(const[s,a]of e)r.has(a.toString())&&n.has(s)||t.push(this._createNodeFromNetworkEntry([s,a]));T$1(t);for(const s of t){if(!s.isHealthy())continue;o.push(s);const e=i.has(s.getKey())?i.get(s.getKey()):[];e.push(s),i.set(s.getKey(),e)}return this._nodes=t,this._healthyNodes=o,this._network=i,this._ledgerId=null,this}get maxNodeAttempts(){return this._maxNodeAttempts}setMaxNodeAttempts(e){return this._maxNodeAttempts=e,this}get minBackoff(){return this._minBackoff}setMinBackoff(e){this._minBackoff=e;for(const t of this._nodes)t.setMinBackoff(e);return this}get maxBackoff(){return this._maxBackoff}setMaxBackoff(e){this._maxBackoff=e;for(const t of this._nodes)t.setMaxBackoff(e);return this}get nodeMinReadmitPeriod(){return this._nodeMinReadmitPeriod}setNodeMinReadmitPeriod(e){return this._nodeMinReadmitPeriod=e,this._earliestReadmitTime=Date.now()+this._nodeMinReadmitPeriod,this}get nodeMaxReadmitPeriod(){return this._nodeMaxReadmitPeriod}setNodeMaxReadmitPeriod(e){return this._nodeMaxReadmitPeriod=e,this}getNode(e){if(this._readmitNodes(),null!=e&&null!=e){const t=this._network.get(e.toString());if(t)return t[Math.floor(Math.random()*t.length)];{const e=Array.from(this._network.keys()),t=e[Math.floor(Math.random()*e.length)],r=this._network.get(t);return r[Math.floor(Math.random()*r.length)]}}if(0==this._healthyNodes.length)throw new Error("failed to find a healthy working node");return this._healthyNodes[Math.floor(Math.random()*this._healthyNodes.length)]}increaseBackoff(e){e.increaseBackoff();for(let t=0;t<this._healthyNodes.length;t++)this._healthyNodes[t]==e&&this._healthyNodes.splice(t,1)}decreaseBackoff(e){e.decreaseBackoff()}close(){for(const e of this._nodes)e.close();this._network.clear(),this._nodes=[]}},i$4=class extends o$1{constructor(e){super(e),this._maxNodesPerTransaction=-1,this._addressBook=null,this._transportSecurity=!1}setNetwork(e){this._setNetwork(new Map(Object.entries(e).map(([e,t])=>[e,"string"==typeof t?f$2.fromString(t):t])))}setNetworkFromAddressBook(e){const t={},r=this.isTransportSecurity()?50212:50211;for(const n of e.nodeAddresses)for(const e of n.addresses)e.port===r&&null!=n.accountId&&(t[e.toString()]=n.accountId);return this.setNetwork(t),this}get network(){var e={};for(const t of this._nodes)e[t.address.toString()]=t.accountId;return e}setNetworkName(e){switch(super.setLedgerId(e),e){case"mainnet":this._addressBook=b;break;case"testnet":this._addressBook=o$3;break;case"previewnet":this._addressBook=d$1}if(null!=this._addressBook)for(const t of this._nodes)for(const e of this._addressBook.nodeAddresses)null!=e.accountId&&e.accountId.toString()===t.accountId.toString()&&t.setNodeAddress(e);return this}get networkName(){return null!=this._ledgerId?this._ledgerId.toString():null}_createNodeFromNetworkEntry(e){const t="string"==typeof e[1]?f$2.fromString(e[1]):e[1];return new d({newNode:{address:e[0],accountId:t,channelInitFunction:this._createNetworkChannel}}).setMinBackoff(this._minBackoff)}_getNodesToRemove(e){const t=[];for(let r=this._nodes.length-1;r>=0;r--){const n=this._nodes[r],o=e.get(n.address.toString());null!=o&&o.toString()===n.accountId.toString()||t.push(r)}return t}_checkNetworkContainsEntry(e){for(const t of this._nodes)if(t.address.toString()===e[0])return!0;return!1}get maxNodesPerTransaction(){return this._maxNodesPerTransaction}setMaxNodesPerTransaction(e){return this._maxNodesPerTransaction=e,this}get maxNodeAttempts(){return this._maxNodeAttempts}setMaxNodeAttempts(e){return this._maxNodeAttempts=e,this}isTransportSecurity(){return this._transportSecurity}setTransportSecurity(e){if(this._transportSecurity==e)return this;this._network.clear();for(let t=0;t<this._nodes.length;t++){let r=this._nodes[t];r.close(),r=e?r.toSecure().setCert(null!=this._ledgerId?this._ledgerId.toString():""):r.toInsecure(),this._nodes[t]=r;const n=null!=this._network.get(r.getKey())?this._network.get(r.getKey()):[];n.push(r),this._network.set(r.getKey(),n)}return this._healthyNodes=[...this._nodes],this._transportSecurity=e,this}getNumberOfNodesForTransaction(){return this._maxNodesPerTransaction>0?this._maxNodesPerTransaction:this._nodes.length<=9?this._nodes.length:Math.floor((this._nodes.length+3-1)/3)}getNodeAccountIdsForExecute(){return this._getNumberOfMostHealthyNodes(this.getNumberOfNodesForTransaction()).map(e=>e.accountId)}},t$1=class extends t$2{constructor(e={}){super(e)}getKey(){return this._address.toString()}},r$1=class extends o$1{constructor(e){super(e)}setNetwork(e){this._setNetwork(new Map(e.map(e=>[e,e])))}get network(){var e=[];for(const t of this._nodes)e.push(t.address.toString());return e}_createNodeFromNetworkEntry(e){return new t$1({newNode:{address:e[1],channelInitFunction:this._createNetworkChannel}}).setMinBackoff(this._minBackoff)}_getNodesToRemove(e){const t=[],r=Object.values(e);for(let n=this._nodes.length-1;n>=0;n--){const e=this._nodes[n];r.includes(e.address.toString())||t.push(n)}return t}getNextMirrorNode(){if(null==this._createNetworkChannel)throw new Error("mirror network not supported on browser");return this._getNumberOfMostHealthyNodes(1)[0]}};class l{constructor(e){this._mirrorNetwork=new r$1(this._createMirrorNetworkChannel()),this._network=new i$4(this._createNetworkChannel()),this._operator=null,this._defaultMaxTransactionFee=null,this._defaultMaxQueryPayment=new e$o(1),null!=e&&null!=e.operator&&this.setOperator(e.operator.accountId,e.operator.privateKey),this._maxAttempts=null,this._signOnDemand=!1,this._autoValidateChecksums=!1,this._minBackoff=250,this._maxBackoff=8e3,this._defaultRegenerateTransactionId=!0,this._requestTimeout=null,this._isUpdatingNetwork=!1,this._networkUpdatePeriod=864e5,this._isShutdown=!1,this._shard=0,this._realm=0,null!=e&&!1!==e.scheduleNetworkUpdate&&this._scheduleNetworkUpdate(),null!=e&&null!=e.shard&&(this._shard=e.shard),null!=e&&null!=e.realm&&(this._realm=e.realm),this._timer,this._logger=null}setNetworkName(e){return console.warn("Deprecated: Use `setLedgerId` instead"),this.setLedgerId(e)}get networkName(){return console.warn("Deprecated: Use `ledgerId` instead"),null!=this.ledgerId?this.ledgerId.toString():null}setLedgerId(e){return this._network.setLedgerId("string"==typeof e?r$h.fromString(e):e),this}get ledgerId(){return null!=this._network._ledgerId?this._network.ledgerId:null}setNetwork(e){throw new Error("not implemented")}setNetworkFromAddressBook(e){return this._network.setNetworkFromAddressBook(e),this}get network(){return this._network.network}get shard(){return this._shard}get realm(){return this._realm}setMirrorNetwork(e){throw new Error("not implemented")}get mirrorNetwork(){return this._mirrorNetwork.network}get signOnDemand(){return this._signOnDemand}setSignOnDemand(e){this._signOnDemand=e}isTransportSecurity(){return this._network.isTransportSecurity()}setTransportSecurity(e){return this._network.setTransportSecurity(e),this}setOperator(e,t){const r="string"==typeof t?g.fromStringDer(t):t;return this.setOperatorWith(e,r.publicKey,e=>Promise.resolve(r.sign(e)))}getOperator(){return this._operator}setOperatorWith(e,t,r){const n=e instanceof f$2?e:f$2.fromString(e);return null!=this._network._ledgerId&&n.validateChecksum(this),this._operator={transactionSigner:r,accountId:n,publicKey:t instanceof i$f?t:i$f.fromString(t)},this}setAutoValidateChecksums(e){return this._autoValidateChecksums=e,this}isAutoValidateChecksumsEnabled(){return this._autoValidateChecksums}get operatorAccountId(){return null!=this._operator?this._operator.accountId:null}get operatorPublicKey(){return null!=this._operator?this._operator.publicKey:null}get defaultMaxTransactionFee(){return this._defaultMaxTransactionFee}get maxTransactionFee(){return this.defaultMaxTransactionFee}setDefaultMaxTransactionFee(e){if(e.toTinybars().toInt()<0)throw new Error("defaultMaxTransactionFee must be non-negative");return this._defaultMaxTransactionFee=e,this}setMaxTransactionFee(e){return this.setDefaultMaxTransactionFee(e)}get defaultRegenerateTransactionId(){return this._defaultRegenerateTransactionId}setDefaultRegenerateTransactionId(e){return this._defaultRegenerateTransactionId=e,this}get defaultMaxQueryPayment(){return this._defaultMaxQueryPayment}get maxQueryPayment(){return this.defaultMaxQueryPayment}setDefaultMaxQueryPayment(e){if(d$d(e.toTinybars())<0)throw new Error("defaultMaxQueryPayment must be non-negative");return this._defaultMaxQueryPayment=e,this}setMaxQueryPayment(e){return this.setDefaultMaxQueryPayment(e)}get maxAttempts(){return null!=this._maxAttempts?this._maxAttempts:10}setMaxAttempts(e){return this._maxAttempts=e,this}get maxNodeAttempts(){return this._network.maxNodeAttempts}setMaxNodeAttempts(e){return this._network.setMaxNodeAttempts(e),this}get nodeWaitTime(){return this._network.minBackoff}setNodeWaitTime(e){return this._network.setMinBackoff(e),this}get maxNodesPerTransaction(){return this._network.maxNodesPerTransaction}setMaxNodesPerTransaction(e){return this._network.setMaxNodesPerTransaction(e),this}setMinBackoff(e){if(null==e)throw new Error("minBackoff cannot be null.");if(e>this._maxBackoff)throw new Error("minBackoff cannot be larger than maxBackoff.");return this._minBackoff=e,this}get minBackoff(){return this._minBackoff}setMaxBackoff(e){if(null==e)throw new Error("maxBackoff cannot be null.");if(e<this._minBackoff)throw new Error("maxBackoff cannot be smaller than minBackoff.");return this._maxBackoff=e,this}get maxBackoff(){return this._maxBackoff}setNodeMinBackoff(e){return this._network.setMinBackoff(e),this}get nodeMinBackoff(){return this._network.minBackoff}setNodeMaxBackoff(e){return this._network.setMaxBackoff(e),this}get nodeMaxBackoff(){return this._network.maxBackoff}setNodeMinReadmitPeriod(e){return this._network.setNodeMinReadmitPeriod(e),this}get nodeMinReadmitPeriod(){return this._network.nodeMinReadmitPeriod}setNodeMaxReadmitPeriod(e){return this._network.setNodeMaxReadmitPeriod(e),this}get nodeMaxReadmitPeriod(){return this._network.nodeMaxReadmitPeriod}setRequestTimeout(e){return this._requestTimeout=e,this}get requestTimeout(){return this._requestTimeout}get networkUpdatePeriod(){return this._networkUpdatePeriod}setNetworkUpdatePeriod(e){return clearTimeout(this._timer),this._networkUpdatePeriod=e,this._scheduleNetworkUpdate(),this}setLogger(e){return this._logger=e,this}get logger(){return this._logger}async ping(e){await new e$f({accountId:e}).setNodeAccountIds([e instanceof f$2?e:f$2.fromString(e)]).execute(this)}async pingAll(){for(const e of Object.values(this._network.network))await this.ping(e)}async updateNetwork(){if(!this._isUpdatingNetwork){this._isUpdatingNetwork=!0;try{const e=await t$s.addressBookQueryConstructor().setFileId(u$c.getAddressBookFileIdFor(this._shard,this._realm)).execute(this);this.setNetworkFromAddressBook(e)}catch(e){this._logger&&this._logger.trace(`failed to update client address book: ${e.toString()}`)}finally{this._isUpdatingNetwork=!1}}}close(){this._network.close(),this._mirrorNetwork.close(),this._isShutdown=!0,clearTimeout(this._timer)}_createNetworkChannel(){throw new Error("not implemented")}_createMirrorNetworkChannel(){throw new Error("not implemented")}_scheduleNetworkUpdate(){this._timer=setTimeout(async()=>{await this.updateNetwork(),this._isShutdown||this._scheduleNetworkUpdate()},this._networkUpdatePeriod)}get isClientShutDown(){return this._isShutdown}static _validateNetworkConsistency(e){if(0===Object.keys(e).length)return;const[,t]=Object.entries(e)[0],r=t.toString(),[n,o]=r.split(".").map(Number);if(!Object.values(e).every(e=>{const t=e.toString(),[r,i]=t.split(".").map(Number);return r===n&&i===o}))throw new Error("Network is not valid, all nodes must be in the same shard and realm")}static _extractShardRealm(e){const t=Object.entries(e);if(0===t.length)return{shard:0,realm:0};const[,r]=t[0],n=r.toString(),[o,i]=n.split(".").map(Number);return{shard:o,realm:i}}}class t{constructor(e){this._code=e,Object.freeze(this)}static _fromValue(e){return new t(e)}toString(){return this._code.toString()}valueOf(){return this._code}}const o="2.67.0",{proto:r}=e$s;class n{constructor(){this._crypto=null,this._smartContract=null,this._file=null,this._consensus=null,this._freeze=null,this._network=null,this._token=null,this._schedule=null,this._util=null,this._addressBook=null}close(){throw new Error("not implemented")}get crypto(){return null!=this._crypto||(this._crypto=r.CryptoService.create(this._createUnaryClient("CryptoService"))),this._crypto}get smartContract(){return null!=this._smartContract||(this._smartContract=r.SmartContractService.create(this._createUnaryClient("SmartContractService"))),this._smartContract}get file(){return null!=this._file||(this._file=r.FileService.create(this._createUnaryClient("FileService"))),this._file}get consensus(){return null!=this._consensus||(this._consensus=r.ConsensusService.create(this._createUnaryClient("ConsensusService"))),this._consensus}get freeze(){return null!=this._freeze||(this._freeze=r.FreezeService.create(this._createUnaryClient("FreezeService"))),this._freeze}get network(){return null!=this._network||(this._network=r.NetworkService.create(this._createUnaryClient("NetworkService"))),this._network}get token(){return null!=this._token||(this._token=r.TokenService.create(this._createUnaryClient("TokenService"))),this._token}get schedule(){return null!=this._schedule||(this._schedule=r.ScheduleService.create(this._createUnaryClient("ScheduleService"))),this._schedule}get util(){return null!=this._util||(this._util=r.UtilService.create(this._createUnaryClient("UtilService"))),this._util}get addressBook(){return null!=this._addressBook||(this._addressBook=r.AddressBookService.create(this._createUnaryClient("AddressBookService"))),this._addressBook}_createUnaryClient(e){throw new Error("not implemented")}}function s(e){const t=new ArrayBuffer(e.byteLength+5);return new DataView(t,1,4).setUint32(0,e.length),new Uint8Array(t,5).set(e),t}function i$3(e,t=0,r=e.byteLength){const n=new DataView(e,t,r);let o=0,i=null,s=0;for(;o<n.byteLength;){const t=n.getUint8(o+0)>>7,r=n.getUint32(o+1),a=o+5;if(a+r>n.byteLength)throw new Error("(BUG) unexpected frame length past the boundary");const c=new Uint8Array(e,n.byteOffset+a,r);if(0===t){if(null!=i)throw new Error("(BUG) unexpectedly received more than one data frame");i=c}else{if(1!==t)throw new Error(`(BUG) unexpected frame type: ${t}`);{const e=e$k(c),[t,r]=e.split(":");if("grpc-status"!==t)throw new Error(`(BUG) unhandled trailer, ${e}`);s=parseInt(r)}}o+=r+5}if(0!==s)throw new Error(`(BUG) unhandled grpc-status: ${s}`);if(null==i)throw new Error("(BUG) unexpectedly received no response");return i}let i$2=class extends n{constructor(e){super(),this._address=e}close(){}_createUnaryClient(e){return async(r,n,i)=>{try{const a=await fetch(`${this._address}/proto.${e}/${r.name}`,{method:"POST",headers:{"content-type":"application/grpc-web+proto","x-user-agent":o,"x-grpc-web":"1"},body:s(n)});a.ok||i(new r$l(t._fromValue(a.status)),null);const c=a.headers.get("grpc-status"),u=a.headers.get("grpc-message");if(null!=c&&null!=u){const e=new r$m(e$m._fromValue(parseInt(c)),o$2[this._address].toString());e.message=u,i(e,null)}i(null,i$3(await a.arrayBuffer()))}catch(a){i(new r$m(e$m._fromValue(18),o$2[this._address].toString()),null)}}}};const w={MAINNET:s$1,TESTNET:t$4,PREVIEWNET:n$1};let i$1=class e extends l{constructor(e){if(super(e),null!=e)if("string"==typeof e.network)switch(e.network){case"mainnet":this.setNetwork(w.MAINNET),this.setLedgerId(r$h.MAINNET);break;case"testnet":this.setNetwork(w.TESTNET),this.setLedgerId(r$h.TESTNET);break;case"previewnet":this.setNetwork(w.PREVIEWNET),this.setLedgerId(r$h.PREVIEWNET);break;default:throw new Error(`unknown network: ${e.network}`)}else if(null!=e.network){l._validateNetworkConsistency(e.network);const{shard:t,realm:r}=l._extractShardRealm(e.network);this._shard=t,this._realm=r,this.setNetwork(e.network)}}static fromConfig(t){return new e("string"==typeof t?JSON.parse(t):t)}static forNetwork(t){return new e({network:t,scheduleNetworkUpdate:!1})}static forName(t){return new e({network:t,scheduleNetworkUpdate:!1})}static forMainnet(){return new e({network:"mainnet",scheduleNetworkUpdate:!1})}static forTestnet(){return new e({network:"testnet",scheduleNetworkUpdate:!1})}static forPreviewnet(){return new e({network:"previewnet",scheduleNetworkUpdate:!1})}setNetwork(e){if("string"==typeof e)switch(e){case"previewnet":this._network.setNetwork(w.PREVIEWNET);break;case"testnet":this._network.setNetwork(w.TESTNET);break;case"mainnet":this._network.setNetwork(w.MAINNET)}else this._network.setNetwork(e)}setMirrorNetwork(e){return"string"==typeof e?this._mirrorNetwork.setNetwork([]):this._mirrorNetwork.setNetwork(e),this}_createNetworkChannel(){return e=>new i$2(e)}_createMirrorNetworkChannel(){return()=>{throw new Error("mirror support is not supported in browsers")}}updateNetwork(){return Promise.reject(new Error("Update network is not supported in browsers"))}};const _Logger=class e{constructor(e={}){const t="true"===process$1.env.DISABLE_LOGS,r=e.silent||t,n=r?"silent":e.level||"info";this.moduleContext=e.module||"app";const o={level:n,enabled:!r,transport:!r&&!1!==e.prettyPrint?{target:"pino-pretty",options:{colorize:!0,translateTime:"SYS:standard",ignore:"pid,hostname"}}:void 0};this.logger=pino(o)}static getInstance(t={}){const r=t.module||"default";if("true"===process$1.env.DISABLE_LOGS&&e.instances.has(r)){"silent"!==e.instances.get(r).getLevel()&&e.instances.delete(r)}return e.instances.has(r)||e.instances.set(r,new e(t)),e.instances.get(r)}setLogLevel(e){this.logger.level=e}getLevel(){return this.logger.level}setSilent(e){e&&(this.logger.level="silent")}setModule(e){this.moduleContext=e}debug(...e){this.logger.debug({module:this.moduleContext},...e)}info(...e){this.logger.info({module:this.moduleContext},...e)}warn(...e){this.logger.warn({module:this.moduleContext},...e)}error(...e){this.logger.error({module:this.moduleContext},...e)}trace(...e){this.logger.trace({module:this.moduleContext},...e)}};_Logger.instances=new Map;let Logger=_Logger;function detectKeyTypeFromString(e){let t="ed25519";e.startsWith("0x")?t="ecdsa":e.startsWith("302e020100300506032b6570")?t="ed25519":e.startsWith("3030020100300706052b8104000a")?t="ecdsa":96===e.length?t="ed25519":88===e.length&&(t="ecdsa");try{return{detectedType:t,privateKey:"ecdsa"===t?g.fromStringECDSA(e):g.fromStringED25519(e)}}catch(r){const o="ecdsa"===t?"ed25519":"ecdsa";try{return{detectedType:o,privateKey:"ecdsa"===o?g.fromStringECDSA(e):g.fromStringED25519(e)}}catch(n){throw new Error(`Failed to parse private key as either ED25519 or ECDSA: ${r}`)}}}class BaseServiceBuilder{constructor(e){this.hederaKit=e,this.currentTransaction=null,this.notes=[],this.kit=e;const t="true"===process$1.env.DISABLE_LOGS;this.logger=new Logger({module:"ServiceBuilder",level:t?"silent":"info",silent:t})}getEffectiveSenderAccountId(){return this.kit.userAccountId?f$2.fromString(this.kit.userAccountId):this.kit.signer.getAccountId()}getTransferSourceAccount(e=!0){return e&&this.kit.userAccountId?f$2.fromString(this.kit.userAccountId):this.kit.signer.getAccountId()}setTransactionMemo(e){if(!this.currentTransaction)throw new Error("No transaction is currently being built. Call a specific transaction method first (e.g., createTopic).");return this.currentTransaction.setTransactionMemo(e),this}setTransactionId(e){if(!this.currentTransaction)throw new Error("No transaction is currently being built. Call a specific transaction method first.");return this.currentTransaction.setTransactionId(e),this}setNodeAccountIds(e){if(!this.currentTransaction)throw new Error("No transaction is currently being built. Call a specific transaction method first.");return this.currentTransaction.setNodeAccountIds(e),this}async execute(e){const t=this.currentTransaction;if(!t)return{success:!1,error:"No transaction to execute."};let r=t,n=t.transactionId?.toString();if(e?.schedule){!t.isFrozen()&&this.kit.userAccountId&&t.setTransactionId(i$c.generate(this.kit.userAccountId));const n=(new u$5).setScheduledTransaction(t);if(e.scheduleMemo&&n.setScheduleMemo(e.scheduleMemo),this.kit.userAccountId)n.setPayerAccountId(f$2.fromString(this.kit.userAccountId));else if(e.schedulePayerAccountId){const t="string"==typeof e.schedulePayerAccountId?f$2.fromString(e.schedulePayerAccountId):e.schedulePayerAccountId;n.setPayerAccountId(t)}else n.setPayerAccountId(this.kit.signer.getAccountId()),this.addNote(`Your agent account (${this.kit.signer.getAccountId().toString()}) will pay the fee to create this schedule.`);const i=await this.kit.getOperator(),s=(new s$i).setThreshold(1);if(i.publicKey&&(s.push(i.publicKey),this.addNote(`The schedule admin key allows both your agent and user (${this.kit.userAccountId}) to manage the schedule.`)),this.kit.userAccountId)try{const e=this.kit.mirrorNode,t=await e.requestAccount(this.kit.userAccountId);t?.key?.key?(s.push(i$f.fromString(t.key.key)),this.addNote(`The schedule admin key allows both your agent and user (${this.kit.userAccountId}) to manage the schedule.`)):this.addNote(`The schedule admin key is set to your agent. User (${this.kit.userAccountId}) key not found or not a single key.`)}catch(o){this.logger.warn(`Failed to get user key for schedule admin key for ${this.kit.userAccountId}: ${o.message}`),this.addNote(`The schedule admin key is set to your agent. Could not retrieve user (${this.kit.userAccountId}) key.`)}Array.from(s).length>0?n.setAdminKey(s):this.addNote("No admin key could be set for the schedule (agent key missing and user key not found/retrieved)."),r=n}try{r.isFrozen()||r.transactionId||await r.freezeWith(this.kit.client),e?.schedule&&r.transactionId&&(n=r.transactionId.toString());const t=await this.kit.signer.signAndExecuteTransaction(r),o={success:!0,receipt:t,transactionId:r.transactionId?.toString()||n};return e?.schedule&&t.scheduleId&&(o.scheduleId=t.scheduleId.toString()),o}catch(o){console.log("error is:",o);const e=o;this.logger.error(`Transaction execution failed: ${e.message}`,e);return{success:!1,error:e.message||"An unknown error occurred during transaction execution.",transactionId:n}}}async getTransactionBytes(e){if(!this.currentTransaction)throw new Error("No transaction to get bytes for. Call a specific transaction method first.");let t=this.currentTransaction;if(e?.schedule){const r=(new u$5).setScheduledTransaction(this.currentTransaction);if(e.scheduleMemo&&r.setScheduleMemo(e.scheduleMemo),e.schedulePayerAccountId){const t="string"==typeof e.schedulePayerAccountId?f$2.fromString(e.schedulePayerAccountId):e.schedulePayerAccountId;r.setPayerAccountId(t)}e.scheduleAdminKey&&r.setAdminKey(e.scheduleAdminKey),t=r}return Buffer$1.from(t.toBytes()).toString("base64")}async executeWithSigner(e){if(!this.currentTransaction)return{success:!1,error:"No transaction to execute. Call a specific transaction method first."};let t=this.currentTransaction;if(t.isFrozen())throw new Error("Transaction is frozen, try to call the builder method again and then executeWithSigner.");try{const r=await e.signAndExecuteTransaction(t),n=t.transactionId?.toString();return{success:!0,receipt:r,transactionId:n}}catch(r){const e=r;return this.logger.error(`Transaction execution with new signer failed: ${e.message}`),{success:!1,error:e.message||"An unknown error occurred during transaction execution with new signer."}}}setCurrentTransaction(e){this.currentTransaction=e}getCurrentTransaction(){return this.currentTransaction}addNote(e){this.notes.push(e)}getNotes(){return this.notes}clearNotes(){this.notes=[]}async parseKey(e){if(null!=e){if("object"==typeof e&&("_key"in e||e instanceof i$f||e instanceof g||e instanceof s$i))return e;if("string"==typeof e){if("current_signer"===e.toLowerCase()){if(this.kit.signer)return this.logger.info('[BaseServiceBuilder.parseKey] Substituting "current_signer" with signer\'s public key.'),await this.kit.signer.getPublicKey();throw new Error('[BaseServiceBuilder.parseKey] Signer is not available to resolve "current_signer".')}try{return i$f.fromString(e)}catch(t){const n=t;try{this.logger.warn("[BaseServiceBuilder.parseKey] Attempting to parse key string as PrivateKey to derive PublicKey. This is generally not recommended for public-facing keys.",{error:n.message});return detectKeyTypeFromString(e).privateKey}catch(r){const t=r;throw this.logger.error(`[BaseServiceBuilder.parseKey] Failed to parse key string as PublicKey or PrivateKey: ${e.substring(0,30)}...`,{error:t.message}),new Error(`[BaseServiceBuilder.parseKey] Invalid key string format: ${e.substring(0,30)}...`)}}}this.logger.warn(`[BaseServiceBuilder.parseKey] Received an object that is not an SDK Key instance or a recognized string format: ${JSON.stringify(e)}`)}}parseAmount(e){return void 0===e?Long.fromNumber(0):"number"==typeof e?Long.fromNumber(e):"string"==typeof e?Long.fromString(e):e instanceof BigNumber?Long.fromString(e.toString()):e}}const DEFAULT_AUTORENEW_PERIOD_SECONDS$1=7776e3,MAX_SINGLE_MESSAGE_BYTES=1e3;class HcsBuilder extends BaseServiceBuilder{constructor(e){super(e)}async createTopic(e){this.clearNotes();const t=new c;if(e.memo&&t.setTopicMemo(e.memo),e.adminKey){const r=await this.parseKey(e.adminKey);r&&t.setAdminKey(r)}if(e.feeScheduleKey){const r=await this.parseKey(e.feeScheduleKey);r&&t.setFeeScheduleKey(r)}if(e.submitKey){const r=await this.parseKey(e.submitKey);r&&t.setSubmitKey(r)}if(e.autoRenewPeriod?t.setAutoRenewPeriod(e.autoRenewPeriod):(t.setAutoRenewPeriod(DEFAULT_AUTORENEW_PERIOD_SECONDS$1),this.addNote(`Default auto-renew period of ${DEFAULT_AUTORENEW_PERIOD_SECONDS$1} seconds applied for topic.`)),e.autoRenewAccountId?t.setAutoRenewAccountId(e.autoRenewAccountId):(this.logger.warn("MirrorNode client is not available on the signer, cannot set fee exempt keys by account ID for createTopic."),this.addNote("Could not set fee exempt accounts for topic creation: MirrorNode client not available on signer.")),e.customFees&&e.customFees.length>0&&t.setCustomFees(e.customFees),e.exemptAccountIds&&e.exemptAccountIds.length>0)if(this.kit.signer.mirrorNode)try{const t=[];for(const r of e.exemptAccountIds){const e=await this.kit.signer.mirrorNode.getPublicKey(r);t.push(e)}t.length>0&&this.logger.warn("TopicCreateTransaction does not support setFeeExemptKeys. This parameter will be ignored for topic creation.")}catch(r){const e=r;this.logger.error(`Failed to process exemptAccountIds for createTopic: ${e.message}`),this.addNote(`Error processing fee exempt accounts for topic creation: ${e.message}. They may not be set.`)}else this.logger.warn("MirrorNode client is not available on the signer, cannot set fee exempt keys by account ID for createTopic."),this.addNote("Could not attempt to set fee exempt accounts for topic creation: MirrorNode client not available on signer.");return this.setCurrentTransaction(t),this}submitMessageToTopic(e){const t="string"==typeof e.topicId?m$1.fromString(e.topicId):e.topicId,r=e.message,n="string"==typeof r?Buffer$1.from(r,"utf8").length:r.length;n>MAX_SINGLE_MESSAGE_BYTES&&this.logger.warn(`HcsBuilder: Message size (${n} bytes) exceeds recommended single transaction limit (${MAX_SINGLE_MESSAGE_BYTES} bytes). The transaction will likely fail if not accepted by the network.`);let o=(new u).setTopicId(t).setMessage(r);return e.maxChunks&&o.setMaxChunks(e.maxChunks),e.chunkSize&&o.setChunkSize(e.chunkSize),this.setCurrentTransaction(o),this}deleteTopic(e){if(void 0===e.topicId)throw new Error("Topic ID is required to delete a topic.");const t=(new i$5).setTopicId(e.topicId);return this.setCurrentTransaction(t),this}async updateTopic(e){if(this.clearNotes(),!e.topicId)throw new Error("Topic ID is required to update a topic.");const t=(new l$1).setTopicId(e.topicId);if(Object.prototype.hasOwnProperty.call(e,"memo")&&t.setTopicMemo(null===e.memo?"":e.memo),Object.prototype.hasOwnProperty.call(e,"adminKey"))if(null===e.adminKey)t.setAdminKey(new s$i);else if(e.adminKey){const r=await this.parseKey(e.adminKey);r&&t.setAdminKey(r)}if(Object.prototype.hasOwnProperty.call(e,"submitKey"))if(null===e.submitKey)t.setSubmitKey(new s$i);else if(e.submitKey){const r=await this.parseKey(e.submitKey);r&&t.setSubmitKey(r)}if(e.autoRenewPeriod&&t.setAutoRenewPeriod(e.autoRenewPeriod),Object.prototype.hasOwnProperty.call(e,"autoRenewAccountId")&&(null===e.autoRenewAccountId?t.setAutoRenewAccountId(f$2.fromString("0.0.0")):e.autoRenewAccountId&&t.setAutoRenewAccountId(e.autoRenewAccountId)),Object.prototype.hasOwnProperty.call(e,"exemptAccountIds"))if(e.exemptAccountIds&&e.exemptAccountIds.length>0&&!this.kit.signer.mirrorNode)this.logger.warn("MirrorNode client is not available on the signer, cannot set fee exempt keys by account ID for updateTopic if account IDs are provided and not empty."),this.addNote("Could not set fee exempt accounts for topic update: MirrorNode client not available on signer.");else if(e.exemptAccountIds)if(0===e.exemptAccountIds.length)t.setFeeExemptKeys([]);else try{const r=[];for(const t of e.exemptAccountIds){const e=await this.kit.signer.mirrorNode.getPublicKey(t);r.push(e)}r.length>0?t.setFeeExemptKeys(r):this.addNote("Fee exempt accounts were provided, but no valid public keys could be resolved for them.")}catch(r){const e=r;this.logger.error(`Failed to process exemptAccountIds for updateTopic: ${e.message}`),this.addNote(`Error processing fee exempt accounts for topic update: ${e.message}. They may not be set.`)}return this.setCurrentTransaction(t),this}}const DEFAULT_AUTORENEW_PERIOD_SECONDS=7776e3;function generateDefaultSymbol(e){if(!e)return"TOKEN";const t=e.replace(/[^a-zA-Z0-9]/g,"").substring(0,5).toUpperCase();return t||"TOKEN"}function mapToSdkCustomFees(e,t,r,n,o,i){return e&&0!==e.length?e.map(e=>{let s,a=e.feeCollectorAccountId;if(!a&&n&&"returnBytes"===o&&(a=n,i)){let t="custom";"FIXED"===e.type||"FIXED_FEE"===e.type?t="fixed":"FRACTIONAL"===e.type||"FRACTIONAL_FEE"===e.type?t="fractional":"ROYALTY"!==e.type&&"ROYALTY_FEE"!==e.type||(t="royalty"),i(`Fee collector for a ${t} fee was defaulted to your account (${n}).`)}if(!a)throw new Error(`Fee collector account ID is required for custom fee type ${e.type} but was not provided or defaulted.`);try{s=f$2.fromString(a)}catch(c){throw r.error(`Invalid feeCollectorAccountId: ${a}`,c),new Error(`Invalid feeCollectorAccountId: ${a}`)}switch(e.type){case"FIXED":case"FIXED_FEE":{const n=(new l$a).setFeeCollectorAccountId(s).setAmount(t(e.amount));if(e.denominatingTokenId)try{n.setDenominatingTokenId(u$b.fromString(e.denominatingTokenId))}catch(c){throw r.error(`Invalid denominatingTokenId for fixed fee: ${e.denominatingTokenId}`,c),new Error(`Invalid denominatingTokenId for fixed fee: ${e.denominatingTokenId}`)}return n}case"FRACTIONAL":case"FRACTIONAL_FEE":{const r=(new r$9).setFeeCollectorAccountId(s).setNumerator(t(e.numerator).toNumber()).setDenominator(t(e.denominator).toNumber());void 0!==e.minAmount&&r.setMin(t(e.minAmount)),void 0!==e.maxAmount&&r.setMax(t(e.maxAmount));const n=e;return void 0!==n.assessmentMethodInclusive&&(n.assessmentMethodInclusive?r.setAssessmentMethod(e$a.Inclusive):r.setAssessmentMethod(e$a.Exclusive)),r}case"ROYALTY":case"ROYALTY_FEE":{const a=(new l$3).setFeeCollectorAccountId(s).setNumerator(t(e.numerator).toNumber()).setDenominator(t(e.denominator).toNumber()),u=e;if(u.fallbackFee){let e,s=u.fallbackFee.feeCollectorAccountId;if(!s&&n&&"returnBytes"===o&&(s=n,i&&i(`Fallback fee collector for a royalty fee was also defaulted to your account (${n}).`)),!s)throw new Error("Fallback fee collector account ID is required for royalty fee but was not provided or defaulted.");try{e=f$2.fromString(s)}catch(c){throw r.error(`Invalid feeCollectorAccountId in fallbackFee: ${s}`,c),new Error(`Invalid feeCollectorAccountId in fallbackFee: ${s}`)}const l=(new l$a).setFeeCollectorAccountId(e).setAmount(t(u.fallbackFee.amount));if(u.fallbackFee.denominatingTokenId)try{l.setDenominatingTokenId(u$b.fromString(u.fallbackFee.denominatingTokenId))}catch(c){throw r.error(`Invalid denominatingTokenId in fallbackFee: ${u.fallbackFee.denominatingTokenId}`,c),new Error(`Invalid denominatingTokenId in fallbackFee: ${u.fallbackFee.denominatingTokenId}`)}a.setFallbackFee(l)}return a}default:{const t=e;throw r.warn(`Unsupported custom fee type encountered: ${t.type}`),new Error(`Unsupported custom fee type: ${t.type}`)}}}):[]}class HtsBuilder extends BaseServiceBuilder{constructor(e){super(e)}async createFungibleToken(e){this.clearNotes();let t=e.treasuryAccountId;if(!t&&this.kit.userAccountId&&"returnBytes"===this.kit.operationalMode&&(this.logger.info(`[HtsBuilder.createFungibleToken] Using userAccountId ${this.kit.userAccountId} as treasury for FT creation in returnBytes mode.`),t=f$2.fromString(this.kit.userAccountId),this.addNote(`Since no treasury was specified, your account (${this.kit.userAccountId}) has been set as the token's treasury.`)),!t)throw new Error("[HtsBuilder.createFungibleToken] Treasury Account ID is required (e.g., explicitly, via userAccountId for returnBytes mode, or via agent operator for autonomous if applicable).");let r,n=e.tokenSymbol;if(n||(n=generateDefaultSymbol(e.tokenName),this.addNote(`We've generated a token symbol '${n}' for you, based on the token name '${e.tokenName}'.`)),"string"==typeof e.supplyType){const t=e.supplyType;t.toUpperCase()===e$1.Finite.toString().toUpperCase()?r=e$1.Finite:(t.toUpperCase()===e$1.Infinite.toString().toUpperCase()||(this.logger.warn(`Invalid string for supplyType: ${t}. Defaulting to INFINITE.`),this.addNote(`Invalid supplyType string '${t}' received, defaulted to INFINITE.`)),r=e$1.Infinite)}else r=e.supplyType;const o=(new _).setTokenName(e.tokenName).setTokenSymbol(n).setTreasuryAccountId(t).setTokenType(e$2.FungibleCommon).setSupplyType(r).setInitialSupply(this.parseAmount(e.initialSupply)).setDecimals(e.decimals);if(r===e$1.Finite&&e.maxSupply&&o.setMaxSupply(this.parseAmount(e.maxSupply)),e.adminKey){const t=await this.parseKey(e.adminKey);t&&o.setAdminKey(t)}if(e.kycKey){const t=await this.parseKey(e.kycKey);t&&o.setKycKey(t)}if(e.freezeKey){const t=await this.parseKey(e.freezeKey);t&&o.setFreezeKey(t)}if(e.wipeKey){const t=await this.parseKey(e.wipeKey);t&&o.setWipeKey(t)}if(e.supplyKey){const t=await this.parseKey(e.supplyKey);t&&o.setSupplyKey(t)}if(e.feeScheduleKey){const t=await this.parseKey(e.feeScheduleKey);t&&o.setFeeScheduleKey(t)}if(e.pauseKey){const t=await this.parseKey(e.pauseKey);t&&o.setPauseKey(t)}if(e.memo&&o.setTokenMemo(e.memo),e.customFees&&e.customFees.length>0){const t=mapToSdkCustomFees(e.customFees,this.parseAmount.bind(this),this.logger,this.kit.userAccountId,this.kit.operationalMode,this.addNote.bind(this));o.setCustomFees(t)}return e.autoRenewAccountId&&o.setAutoRenewAccountId(e.autoRenewAccountId),e.autoRenewPeriod?o.setAutoRenewPeriod(e.autoRenewPeriod):e.autoRenewAccountId&&(o.setAutoRenewPeriod(DEFAULT_AUTORENEW_PERIOD_SECONDS),this.addNote(`A standard auto-renew period of ${DEFAULT_AUTORENEW_PERIOD_SECONDS/86400} days has been set for this token.`)),this.setCurrentTransaction(o),this}async createNonFungibleToken(e){this.clearNotes();let t=e.treasuryAccountId;if(!t&&this.kit.userAccountId&&"returnBytes"===this.kit.operationalMode&&(this.logger.info(`[HtsBuilder.createNonFungibleToken] Using userAccountId ${this.kit.userAccountId} as treasury for NFT creation in returnBytes mode.`),t=f$2.fromString(this.kit.userAccountId),this.addNote(`Since no treasury was specified, your account (${this.kit.userAccountId}) has been set as the NFT collection's treasury.`)),!t)throw new Error("[HtsBuilder.createNonFungibleToken] Treasury Account ID is required (e.g., explicitly, via userAccountId for returnBytes mode, or via agent operator for autonomous if applicable).");let r,n=e.tokenSymbol;if(n||(n=generateDefaultSymbol(e.tokenName),this.addNote(`We've generated an NFT collection symbol '${n}' for you, based on the collection name '${e.tokenName}'.`)),"string"==typeof e.supplyType){const t=e.supplyType;t.toUpperCase()===e$1.Finite.toString().toUpperCase()?r=e$1.Finite:t.toUpperCase()===e$1.Infinite.toString().toUpperCase()?r=e$1.Infinite:(this.logger.warn(`Invalid string for NFT supplyType: ${t}. Defaulting to FINITE as per NFT common practice.`),this.addNote(`Invalid supplyType string '${t}' received for NFT, defaulted to FINITE.`),r=e$1.Finite)}else r=e.supplyType;const o=(new _).setTokenName(e.tokenName).setTokenSymbol(n).setTreasuryAccountId(t).setTokenType(e$2.NonFungibleUnique).setSupplyType(r).setInitialSupply(0).setDecimals(0);if(r===e$1.Finite&&e.maxSupply?o.setMaxSupply(this.parseAmount(e.maxSupply)):r!==e$1.Finite||e.maxSupply||(this.logger.warn("NFT supplyType is FINITE but no maxSupply was provided. This might lead to an unmintable token or undesired SDK default. Consider prompting user for maxSupply or setting a builder default."),this.addNote("For this FINITE NFT collection, a specific maximum supply was not provided. The Hedera network might apply its own default or limit minting.")),e.adminKey){const t=await this.parseKey(e.adminKey);t&&o.setAdminKey(t)}if(e.kycKey){const t=await this.parseKey(e.kycKey);t&&o.setKycKey(t)}if(e.freezeKey){const t=await this.parseKey(e.freezeKey);t&&o.setFreezeKey(t)}if(e.wipeKey){const t=await this.parseKey(e.wipeKey);t&&o.setWipeKey(t)}if(e.supplyKey){const t=await this.parseKey(e.supplyKey);t&&o.setSupplyKey(t)}else{const e=await this.kit.query().getAccountInfo(t),r=e?.key?.key;r&&o.setSupplyKey(i$f.fromString(r))}if(e.feeScheduleKey){const t=await this.parseKey(e.feeScheduleKey);t&&o.setFeeScheduleKey(t)}if(e.pauseKey){const t=await this.parseKey(e.pauseKey);t&&o.setPauseKey(t)}if(e.memo&&o.setTokenMemo(e.memo),e.customFees&&e.customFees.length>0){const t=mapToSdkCustomFees(e.customFees,this.parseAmount.bind(this),this.logger,this.kit.userAccountId,this.kit.operationalMode,this.addNote.bind(this));o.setCustomFees(t)}return e.autoRenewAccountId&&o.setAutoRenewAccountId(e.autoRenewAccountId),e.autoRenewPeriod?o.setAutoRenewPeriod(e.autoRenewPeriod):e.autoRenewAccountId&&(o.setAutoRenewPeriod(DEFAULT_AUTORENEW_PERIOD_SECONDS),this.addNote(`A standard auto-renew period of ${DEFAULT_AUTORENEW_PERIOD_SECONDS/86400} days has been set for this NFT collection.`)),this.setCurrentTransaction(o),this}mintFungibleToken(e){const t=(new r$5).setTokenId(e.tokenId).setAmount(this.parseAmount(e.amount));return this.setCurrentTransaction(t),this}burnFungibleToken(e){const t=(new r$b).setTokenId(e.tokenId).setAmount(this.parseAmount(e.amount));return this.setCurrentTransaction(t),this}mintNonFungibleToken(e){const t=e.metadata.map(e=>Buffer$1.from(e,"utf8")),r=(new r$5).setTokenId(e.tokenId).setMetadata(t);return this.setCurrentTransaction(r),this}burnNonFungibleToken(e){if(!e.serials||0===e.serials.length)throw new Error("Serial numbers are required to burn NFTs.");const t=e.serials.map(e=>this.parseAmount(e)),r=(new r$b).setTokenId(e.tokenId).setSerials(t);return this.setCurrentTransaction(r),this}transferNft(e){const t="string"==typeof e.serial?Long.fromString(e.serial):e.serial,r=new e$j(u$b.fromString(e.tokenId),t);let n=new T;return n=e.isApproved?n.addApprovedNftTransfer(r,e.senderAccountId,e.receiverAccountId):n.addNftTransfer(r,e.senderAccountId,e.receiverAccountId),e.memo&&n.setTransactionMemo(e.memo),this.setCurrentTransaction(n),this}associateTokens(e){const t=(new r$c).setAccountId(e.accountId).setTokenIds(e.tokenIds.map(e=>"string"==typeof e?u$b.fromString(e):e));return this.setCurrentTransaction(t),this}dissociateTokens(e){const t=(new r$a).setAccountId(e.accountId).setTokenIds(e.tokenIds.map(e=>"string"==typeof e?u$b.fromString(e):e));return this.setCurrentTransaction(t),this}transferTokens(e){const t=new T;if(e.tokenTransfers&&e.tokenTransfers.length>0)for(const r of e.tokenTransfers)if("fungible"===r.type){const e=r;t.addTokenTransfer("string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId,"string"==typeof e.accountId?f$2.fromString(e.accountId):e.accountId,this.parseAmount(e.amount))}else if("nft"===r.type){const e=r,n=u$b.fromString(e.tokenId);let o;o="string"==typeof e.serial?parseInt(e.serial,10):e.serial;const i=Long.fromValue(o),s=new e$j(n,i),a=f$2.fromString(e.senderAccountId),c=f$2.fromString(e.receiverAccountId);e.isApproved?t.addApprovedNftTransfer(s,a,c):t.addNftTransfer(s,a,c)}if(e.hbarTransfers&&e.hbarTransfers.length>0)for(const r of e.hbarTransfers){const e=e$o.fromString(r.amount.toString());t.addHbarTransfer("string"==typeof r.accountId?f$2.fromString(r.accountId):r.accountId,e)}return e.memo&&t.setTransactionMemo(e.memo),this.setCurrentTransaction(t),this}wipeTokenAccount(e){const t=(new s$5).setAccountId(e.accountId).setTokenId("string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId);return e.amount&&t.setAmount(this.parseAmount(e.amount)),e.serials&&e.serials.length>0&&t.setSerials(e.serials.map(e=>this.parseAmount(e))),this.setCurrentTransaction(t),this}freezeTokenAccount(e){const t=(new r$8).setAccountId(e.accountId).setTokenId("string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId);return this.setCurrentTransaction(t),this}unfreezeTokenAccount(e){const t=(new r$3).setAccountId(e.accountId).setTokenId("string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId);return this.setCurrentTransaction(t),this}grantKycToken(e){const t=(new r$7).setAccountId(e.accountId).setTokenId("string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId);return this.setCurrentTransaction(t),this}revokeKycToken(e){const t=(new r$4).setAccountId(e.accountId).setTokenId("string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId);return this.setCurrentTransaction(t),this}pauseToken(e){const t=(new n$5).setTokenId("string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId);return this.setCurrentTransaction(t),this}unpauseToken(e){const t=(new o$4).setTokenId("string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId);return this.setCurrentTransaction(t),this}async updateToken(e){if(!e.tokenId)throw new Error("Token ID is required to update a token.");this.logger.info(`[HtsBuilder.updateToken] Starting update for token ID: ${e.tokenId.toString()}`);const t=(new a).setTokenId("string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId);if(Object.prototype.hasOwnProperty.call(e,"tokenName")&&t.setTokenName(null===e.tokenName?"":e.tokenName),Object.prototype.hasOwnProperty.call(e,"tokenSymbol")&&t.setTokenSymbol(null===e.tokenSymbol?"":e.tokenSymbol),e.treasuryAccountId&&t.setTreasuryAccountId(e.treasuryAccountId),Object.prototype.hasOwnProperty.call(e,"adminKey"))if(null===e.adminKey)t.setAdminKey(new s$i);else if(e.adminKey){const r=await this.parseKey(e.adminKey);r&&t.setAdminKey(r)}if(Object.prototype.hasOwnProperty.call(e,"kycKey"))if(null===e.kycKey)t.setKycKey(new s$i);else if(e.kycKey){const r=await this.parseKey(e.kycKey);r&&t.setKycKey(r)}if(Object.prototype.hasOwnProperty.call(e,"freezeKey"))if(null===e.freezeKey)t.setFreezeKey(new s$i);else if(e.freezeKey){const r=await this.parseKey(e.freezeKey);r&&t.setFreezeKey(r)}if(Object.prototype.hasOwnProperty.call(e,"wipeKey"))if(null===e.wipeKey)t.setWipeKey(new s$i);else if(e.wipeKey){const r=await this.parseKey(e.wipeKey);r&&t.setWipeKey(r)}if(Object.prototype.hasOwnProperty.call(e,"supplyKey"))if(null===e.supplyKey)t.setSupplyKey(new s$i);else if(e.supplyKey){const r=await this.parseKey(e.supplyKey);r&&t.setSupplyKey(r)}if(Object.prototype.hasOwnProperty.call(e,"feeScheduleKey"))if(null===e.feeScheduleKey)t.setFeeScheduleKey(new s$i);else if(e.feeScheduleKey){const r=await this.parseKey(e.feeScheduleKey);r&&t.setFeeScheduleKey(r)}if(Object.prototype.hasOwnProperty.call(e,"pauseKey"))if(null===e.pauseKey)t.setPauseKey(new s$i);else if(e.pauseKey){const r=await this.parseKey(e.pauseKey);r&&t.setPauseKey(r)}if(Object.prototype.hasOwnProperty.call(e,"memo")&&t.setTokenMemo(null===e.memo?"":e.memo),Object.prototype.hasOwnProperty.call(e,"autoRenewAccountId")){const r=e.autoRenewAccountId;null===r?t.setAutoRenewAccountId(f$2.fromString("0.0.0")):r&&t.setAutoRenewAccountId(r)}return e.autoRenewPeriod&&t.setAutoRenewPeriod(e.autoRenewPeriod),this.logger.info("[HtsBuilder.updateToken] Transaction object populated. Setting current transaction.",t),this.setCurrentTransaction(t),this.logger.info("[HtsBuilder.updateToken] Current transaction set. Value:",this.currentTransaction),this}deleteToken(e){if(!e.tokenId)throw new Error("Token ID is required to delete a token.");const t=(new n$7).setTokenId("string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId);return this.setCurrentTransaction(t),this}async feeScheduleUpdate(e){if(this.clearNotes(),!e.tokenId)throw new Error("Token ID is required to update fee schedule.");const t=mapToSdkCustomFees(e.customFees,this.parseAmount.bind(this),this.logger,this.kit.userAccountId,this.kit.operationalMode,this.addNote.bind(this)),r=(new u$2).setTokenId("string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId).setCustomFees(t);return this.setCurrentTransaction(r),this}airdropToken(e){if(!e.recipients||0===e.recipients.length)throw new Error("Recipients are required for an airdrop.");const t=new s$e,r=this.kit.signer.getAccountId(),n="string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId;let o=!1;for(const i of e.recipients){const e=this.parseAmount(i.amount);e.isZero()||e.isNegative()?this.logger.warn(`Skipping airdrop to ${i.accountId.toString()} with zero or negative amount.`):(t.addTokenTransfer(n,r,e.negate()),t.addTokenTransfer(n,i.accountId,e),o=!0)}if(!o)throw new Error("No valid transfers generated for the airdrop. Check recipient amounts.");return e.memo&&t.setTransactionMemo(e.memo),this.setCurrentTransaction(t),this}claimAirdrop(e){if(!e.pendingAirdropIds||0===e.pendingAirdropIds.length)throw new Error("pendingAirdropIds must be provided and non-empty for claimAirdrop.");const t=new i$a;for(const r of e.pendingAirdropIds)t.addPendingAirdropId(r);return e.memo&&t.setTransactionMemo(e.memo),this.setCurrentTransaction(t),this}cancelAirdrop(e){if(!e.pendingAirdropIds||0===e.pendingAirdropIds.length)throw new Error("pendingAirdropIds must be provided and non-empty for cancelAirdrop.");const t=new e$h;return t.setPendingAirdropIds(e.pendingAirdropIds),e.memo&&t.setTransactionMemo(e.memo),this.setCurrentTransaction(t),this}rejectTokens(e){const t=(new o$5).setOwnerId(this.kit.signer.getAccountId()),r="string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId;return t.addTokenId(r),e.memo&&t.setTransactionMemo(e.memo),this.setCurrentTransaction(t),this}}const DEFAULT_ACCOUNT_AUTORENEW_PERIOD_SECONDS=7776e3;class AccountBuilder extends BaseServiceBuilder{constructor(e){super(e)}createAccount(e){this.clearNotes();const t=new h;let r=!1;if(void 0!==e.key)if(null===e.key)this.logger.warn("Received null for key in createAccount. A key or alias is typically required.");else if("string"==typeof e.key){const r=detectKeyTypeFromString(e.key);t.setKeyWithoutAlias(r.privateKey)}else t.setKeyWithoutAlias(e.key);return void 0!==e.initialBalance&&(null===e.initialBalance?this.logger.warn("Received null for initialBalance in createAccount."):"string"==typeof e.initialBalance?t.setInitialBalance(e$o.fromString(e.initialBalance)):"number"==typeof e.initialBalance?t.setInitialBalance(new e$o(e.initialBalance)):t.setInitialBalance(e.initialBalance)),void 0!==e.receiverSignatureRequired&&(null===e.receiverSignatureRequired?this.logger.warn("Received null for receiverSignatureRequired in createAccount."):t.setReceiverSignatureRequired(e.receiverSignatureRequired)),void 0!==e.autoRenewPeriod?null===e.autoRenewPeriod?this.logger.warn("Received null for autoRenewPeriod in createAccount."):"number"==typeof e.autoRenewPeriod||e.autoRenewPeriod instanceof Long?(t.setAutoRenewPeriod(e.autoRenewPeriod),r=!0):"object"==typeof e.autoRenewPeriod&&"number"==typeof e.autoRenewPeriod.seconds?(t.setAutoRenewPeriod(e.autoRenewPeriod.seconds),r=!0):(this.logger.warn("Invalid autoRenewPeriod in createAccount, using default."),t.setAutoRenewPeriod(DEFAULT_ACCOUNT_AUTORENEW_PERIOD_SECONDS)):t.setAutoRenewPeriod(DEFAULT_ACCOUNT_AUTORENEW_PERIOD_SECONDS),r||this.addNote(`Default auto-renew period of ${DEFAULT_ACCOUNT_AUTORENEW_PERIOD_SECONDS} seconds applied.`),void 0!==e.memo&&(null===e.memo?this.logger.warn("Received null for memo in createAccount."):t.setAccountMemo(e.memo)),void 0!==e.maxAutomaticTokenAssociations&&(null===e.maxAutomaticTokenAssociations?this.logger.warn("Received null for maxAutomaticTokenAssociations in createAccount."):t.setMaxAutomaticTokenAssociations(e.maxAutomaticTokenAssociations)),void 0!==e.stakedAccountId&&(null===e.stakedAccountId?this.logger.warn("Received null for stakedAccountId in createAccount."):t.setStakedAccountId(e.stakedAccountId)),void 0!==e.stakedNodeId&&(null===e.stakedNodeId?this.logger.warn("Received null for stakedNodeId in createAccount."):t.setStakedNodeId(e.stakedNodeId)),void 0!==e.declineStakingReward&&(null===e.declineStakingReward?this.logger.warn("Received null for declineStakingReward in createAccount."):t.setDeclineStakingReward(e.declineStakingReward)),void 0!==e.alias&&(null===e.alias?this.logger.warn("Received null for alias in createAccount."):t.setAlias(e.alias)),e.key||e.alias||this.logger.warn("AccountCreateTransaction: Neither key nor a usable alias (PublicKey/EvmAddress) was provided. Transaction might fail."),this.setCurrentTransaction(t),this}transferHbar(e,t=!0){this.clearNotes();const r=new T;if(!e.transfers||0===e.transfers.length)throw new Error("HbarTransferParams must include at least one transfer.");let n=new BigNumber$2(0),o=!1;if(t&&this.kit.userAccountId&&"returnBytes"===this.kit.operationalMode&&1===e.transfers.length){const t=e.transfers[0],n="string"==typeof t.amount||"number"==typeof t.amount?t.amount:t.amount.toString();if(new BigNumber$2(n).isPositive()){const e="string"==typeof t.accountId?f$2.fromString(t.accountId):t.accountId,i=e$o.fromString(n.toString());this.logger.info(`[AccountBuilder.transferHbar] Configuring user-initiated scheduled transfer: ${i.toString()} from ${this.kit.userAccountId} to ${e.toString()}`),this.addNote(`Configured HBAR transfer from your account (${this.kit.userAccountId}) to ${e.toString()} for ${i.toString()}.`),r.addHbarTransfer(e,i),r.addHbarTransfer(f$2.fromString(this.kit.userAccountId),i.negated()),o=!0}}if(!o){for(const t of e.transfers){const e="string"==typeof t.accountId?f$2.fromString(t.accountId):t.accountId,o="string"==typeof t.amount||"number"==typeof t.amount?t.amount:t.amount.toString(),i=e$o.fromString(o.toString());r.addHbarTransfer(e,i);const s=i.toTinybars();n=n.plus(s.toString())}if(!n.isZero())throw new Error("The sum of all HBAR transfers must be zero.")}return void 0!==e.memo&&(null===e.memo?this.logger.warn("Received null for memo in transferHbar."):r.setTransactionMemo(e.memo)),this.setCurrentTransaction(r),this}updateAccount(e){if(!e.accountIdToUpdate)throw new Error("accountIdToUpdate is required for updating an account.");const t=(new s$9).setAccountId(e.accountIdToUpdate);if(void 0!==e.key)if(null===e.key)this.logger.warn("Received null for key, skipping update for key.");else if("string"==typeof e.key)try{const r=detectKeyTypeFromString(e.key);t.setKey(r.privateKey)}catch(r){throw this.logger.error(`Failed to parse key string: ${e.key}`,r),new Error(`Invalid key string provided: ${e.key}`)}else t.setKey(e.key);if(void 0!==e.autoRenewPeriod&&(null===e.autoRenewPeriod?this.logger.warn("Received null for autoRenewPeriod, skipping update."):"number"==typeof e.autoRenewPeriod?t.setAutoRenewPeriod(e.autoRenewPeriod):this.logger.warn(`Invalid autoRenewPeriod format: ${JSON.stringify(e.autoRenewPeriod)}. Skipping.`)),void 0!==e.receiverSignatureRequired&&(null===e.receiverSignatureRequired?this.logger.warn("Received null for receiverSignatureRequired, skipping update."):t.setReceiverSignatureRequired(e.receiverSignatureRequired)),void 0!==e.stakedAccountId)if(null===e.stakedAccountId)this.logger.warn("Received null for stakedAccountId, skipping update.");else{const r=String(e.stakedAccountId);"0.0.0"===r||/^\d+\.\d+\.\d+$/.test(r)?t.setStakedAccountId(r):this.logger.warn(`Invalid stakedAccountId format: ${r}. Skipping.`)}return void 0!==e.stakedNodeId&&(null===e.stakedNodeId?this.logger.warn("Received null for stakedNodeId, skipping update."):t.setStakedNodeId(e.stakedNodeId)),void 0!==e.declineStakingReward&&(null===e.declineStakingReward?this.logger.warn("Received null for declineStakingReward, skipping update."):t.setDeclineStakingReward(e.declineStakingReward)),void 0!==e.memo&&(null===e.memo?this.logger.warn("Received null for memo, skipping update."):t.setAccountMemo(e.memo)),void 0!==e.maxAutomaticTokenAssociations&&(null===e.maxAutomaticTokenAssociations?this.logger.warn("Received null for maxAutomaticTokenAssociations, skipping update."):"number"==typeof e.maxAutomaticTokenAssociations?t.setMaxAutomaticTokenAssociations(e.maxAutomaticTokenAssociations):this.logger.warn(`Invalid type for maxAutomaticTokenAssociations: ${typeof e.maxAutomaticTokenAssociations}. Skipping.`)),this.setCurrentTransaction(t),this}deleteAccount(e){if(!e.deleteAccountId)throw new Error("deleteAccountId is required for deleting an account.");if(!e.transferAccountId)throw new Error("transferAccountId is required for deleting an account.");const t=(new c$5).setAccountId(e.deleteAccountId).setTransferAccountId(e.transferAccountId);return this.setCurrentTransaction(t),this}approveHbarAllowance(e){const t=(new c$6).approveHbarAllowance(e.ownerAccountId||this.kit.signer.getAccountId(),e.spenderAccountId,e.amount);return this.setCurrentTransaction(t),this}approveTokenNftAllowance(e){const t=new c$6,r=e.ownerAccountId||this.kit.signer.getAccountId(),n="string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId;if(e.allSerials)t.approveTokenNftAllowanceAllSerials(n,r,e.spenderAccountId);else{if(!(e.serials&&e.serials.length>0))throw new Error("Either allSerials must be true or 'serials' (with serial numbers) must be provided for NFT allowance.");for(const o of e.serials){let i;i="number"==typeof o?Long.fromNumber(o):o instanceof BigNumber$2?Long.fromString(o.toString()):o,t.approveTokenNftAllowance(new e$j(n,i),r,e.spenderAccountId)}}return void 0!==e.memo&&(null===e.memo?this.logger.warn("Received null for memo in approveTokenNftAllowance."):t.setTransactionMemo(e.memo)),this.setCurrentTransaction(t),this}approveFungibleTokenAllowance(e){const t="string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId;let r;r="string"==typeof e.amount?Long.fromString(e.amount):"number"==typeof e.amount?Long.fromNumber(e.amount):e.amount instanceof BigNumber$2?Long.fromString(e.amount.toString()):e.amount;const n=(new c$6).approveTokenAllowance(t,e.ownerAccountId||this.kit.signer.getAccountId(),e.spenderAccountId,r);return this.setCurrentTransaction(n),this}deleteNftSpenderAllowance(e){const t="string"==typeof e.nftId?e$j.fromString(e.nftId):e.nftId,r=e.ownerAccountId||this.kit.signer.getAccountId(),n=(new r$i).deleteAllTokenNftAllowances(t,r);return void 0!==e.memo&&(null===e.memo?this.logger.warn("Received null for memo in deleteNftSpenderAllowance."):n.setTransactionMemo(e.memo)),this.setCurrentTransaction(n),this}revokeHbarAllowance(e){const t=(new c$6).approveHbarAllowance(e.ownerAccountId||this.kit.signer.getAccountId(),e.spenderAccountId,new e$o(0));return this.setCurrentTransaction(t),this}revokeFungibleTokenAllowance(e){const t="string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId,r=(new c$6).approveTokenAllowance(t,e.ownerAccountId||this.kit.signer.getAccountId(),e.spenderAccountId,0);return this.setCurrentTransaction(r),this}deleteNftSerialAllowancesForAllSpenders(e){let t;t=e.ownerAccountId?"string"==typeof e.ownerAccountId?f$2.fromString(e.ownerAccountId):e.ownerAccountId:this.kit.signer.getAccountId();const r=e.nftIdString.split(".");if(4!==r.length)throw new Error(`Invalid nftIdString format: ${e.nftIdString}. Expected format like "0.0.token.serial".`);const n=u$b.fromString(`${r[0]}.${r[1]}.${r[2]}`),o=Long.fromString(r[3]),i=new e$j(n,o),s=(new r$i).deleteAllTokenNftAllowances(i,t);return e.memo&&s.setTransactionMemo(e.memo),this.setCurrentTransaction(s),this}deleteTokenNftAllowanceForSpender(e){let t;t=e.ownerAccountId?"string"==typeof e.ownerAccountId?f$2.fromString(e.ownerAccountId):e.ownerAccountId:this.kit.signer.getAccountId();const r="string"==typeof e.tokenId?u$b.fromString(e.tokenId):e.tokenId,n=e.serials.map(e=>"string"==typeof e?Long.fromString(e):"number"==typeof e?Long.fromNumber(e):e),o=(new r$i).deleteAllTokenNftAllowances(new e$j(r,n[0]),t);return e.memo&&o.setTransactionMemo(e.memo),this.setCurrentTransaction(o),this}prepareSignScheduledTransaction(e){if(!e.scheduleId)throw new Error("scheduleId is required to prepare a ScheduleSignTransaction.");const t="string"==typeof e.scheduleId?o$k.fromString(e.scheduleId):e.scheduleId,r=(new u$3).setScheduleId(t);return e.memo&&r.setTransactionMemo(e.memo),this.setCurrentTransaction(r),this}}const DEFAULT_CONTRACT_AUTORENEW_PERIOD_SECONDS=7776e3;class ScsBuilder extends BaseServiceBuilder{constructor(e){super(e)}createContract(e){this.clearNotes();const t=new d$4;if(e.bytecodeFileId)t.setBytecodeFileId(e.bytecodeFileId);else{if(!e.bytecode)throw new Error("Either bytecodeFileId or bytecode must be provided to create a contract.");"string"==typeof e.bytecode?t.setBytecode(Buffer$1.from(e.bytecode,"hex")):t.setBytecode(e.bytecode)}if(e.adminKey)if("string"==typeof e.adminKey){const r=detectKeyTypeFromString(e.adminKey);t.setAdminKey(r.privateKey)}else t.setAdminKey(e.adminKey);if("number"==typeof e.gas?t.setGas(e.gas):t.setGas(Long.fromValue(e.gas)),e.initialBalance){let r;r="number"==typeof e.initialBalance?new e$o(e.initialBalance):e$o.fromTinybars(Long.fromString(e.initialBalance.toString())),t.setInitialBalance(r)}return e.constructorParameters&&t.setConstructorParameters(e.constructorParameters),e.memo&&t.setContractMemo(e.memo),e.autoRenewPeriod?t.setAutoRenewPeriod(e.autoRenewPeriod):(t.setAutoRenewPeriod(DEFAULT_CONTRACT_AUTORENEW_PERIOD_SECONDS),this.addNote(`Default auto-renew period of ${DEFAULT_CONTRACT_AUTORENEW_PERIOD_SECONDS} seconds applied for contract.`)),e.stakedAccountId&&t.setStakedAccountId(e.stakedAccountId),e.stakedNodeId&&t.setStakedNodeId(e.stakedNodeId),e.declineStakingReward&&t.setDeclineStakingReward(e.declineStakingReward),e.maxAutomaticTokenAssociations&&t.setMaxAutomaticTokenAssociations(e.maxAutomaticTokenAssociations),this.setCurrentTransaction(t),this}executeContract(e){let t;this.clearNotes(),t="number"==typeof e.gas?e.gas:Long.fromValue(e.gas);const r=(new i$7).setContractId(e.contractId).setGas(t).setFunction(e.functionName,e.functionParameters);if(e.payableAmount){let t;t=e.payableAmount instanceof e$o?e.payableAmount:"number"==typeof e.payableAmount?new e$o(e.payableAmount):e$o.fromTinybars(Long.fromString(e.payableAmount.toString())),r.setPayableAmount(t)}return e.memo&&r.setTransactionMemo(e.memo),this.setCurrentTransaction(r),this}updateContract(e){if(this.clearNotes(),void 0===e.contractId)throw new Error("Contract ID is required to update a contract.");const t=(new u$6).setContractId(e.contractId);if(e.adminKey)if("string"==typeof e.adminKey){const r=detectKeyTypeFromString(e.adminKey);t.setAdminKey(r.privateKey)}else t.setAdminKey(e.adminKey);return e.autoRenewPeriod&&t.setAutoRenewPeriod(e.autoRenewPeriod),e.memo&&t.setContractMemo(e.memo),e.stakedAccountId&&t.setStakedAccountId(e.stakedAccountId),e.stakedNodeId&&t.setStakedNodeId(e.stakedNodeId),e.declineStakingReward&&t.setDeclineStakingReward(e.declineStakingReward),e.maxAutomaticTokenAssociations&&t.setMaxAutomaticTokenAssociations(e.maxAutomaticTokenAssociations),e.proxyAccountId&&t.setProxyAccountId(e.proxyAccountId),this.setCurrentTransaction(t),this}deleteContract(e){if(this.clearNotes(),void 0===e.contractId)throw new Error("Contract ID is required to delete a contract.");const t=(new c$2).setContractId(e.contractId);return e.transferAccountId?t.setTransferAccountId(e.transferAccountId):e.transferContractId&&t.setTransferContractId(e.transferContractId),this.setCurrentTransaction(t),this}async callContract(e){const t=(new l$7).setContractId(e.contractId);e.gas&&("number"==typeof e.gas?t.setGas(e.gas):t.setGas(Long.fromValue(e.gas))),e.functionName&&(e.functionParameters?t.setFunction(e.functionName,e.functionParameters):t.setFunction(e.functionName)),e.maxQueryPayment&&t.setQueryPayment(e.maxQueryPayment),e.paymentTransactionId&&("string"==typeof e.paymentTransactionId?t.setPaymentTransactionId(i$c.fromString(e.paymentTransactionId)):t.setPaymentTransactionId(e.paymentTransactionId));try{return this.logger.info(`Executing ContractCallQuery for contract ${e.contractId.toString()}`),await t.execute(this.kit.client)}catch(r){throw this.logger.error(`ContractCallQuery failed for contract ${e.contractId.toString()}: ${r instanceof Error?r.message:JSON.stringify(r)}`),r}}}function filterUndefined(e){const t={};for(const[r,n]of Object.entries(e))void 0!==n&&(t[r]=n);return t}class QueryBuilder{constructor(e){this.hederaKit=e,this.mirrorNode=e.mirrorNode}async getTopicInfo(e){const t="string"==typeof e?e:e.toString();return await this.mirrorNode.getTopicInfo(t)}async getTopicMessages(e){const t="string"==typeof e?e:e.toString();return await this.mirrorNode.getTopicMessages(t)}async getTopicMessagesByFilter(e,t){const r="string"==typeof e?e:e.toString();return await this.mirrorNode.getTopicMessagesByFilter(r,t)}async getAccountInfo(e){const t="string"==typeof e?e:e.toString();return await this.mirrorNode.requestAccount(t)}async getAccountBalance(e){const t="string"==typeof e?e:e.toString();return await this.mirrorNode.getAccountBalance(t)}async getAccountMemo(e){const t="string"==typeof e?e:e.toString();return await this.mirrorNode.getAccountMemo(t)}async getTokenInfo(e){return await this.mirrorNode.getTokenInfo(e)}async getAccountTokens(e,t=100){const r="string"==typeof e?e:e.toString();return await this.mirrorNode.getAccountTokens(r,t)}async getAccountNfts(e,t,r=100){const n="string"==typeof e?e:e.toString();return await this.mirrorNode.getAccountNfts(n,t,r)}async validateNftOwnership(e,t,r){const n="string"==typeof e?e:e.toString();return await this.mirrorNode.validateNFTOwnership(n,t,r)}async getTransaction(e){return await this.mirrorNode.getTransaction(e)}async getTransactionByTimestamp(e){return await this.mirrorNode.getTransactionByTimestamp(e)}async getScheduleInfo(e){return await this.mirrorNode.getScheduleInfo(e)}async getScheduledTransactionStatus(e){return await this.mirrorNode.getScheduledTransactionStatus(e)}async getHbarPrice(e){return await this.mirrorNode.getHBARPrice(e)}async readSmartContract(e,t,r,n){const o="string"==typeof r?r:r.toString();return await this.mirrorNode.readSmartContractQuery(e,t,o,n)}async getPublicKey(e){const t="string"==typeof e?e:e.toString();return await this.mirrorNode.getPublicKey(t)}async getTopicFees(e){const t="string"==typeof e?e:e.toString();return await this.mirrorNode.getTopicFees(t)}async checkKeyListAccess(e,t){return await this.mirrorNode.checkKeyListAccess(e,t)}async getOutstandingTokenAirdrops(e,t){let r,n;if("object"==typeof e&&"accountId"in e?(r=e.accountId,n=filterUndefined({limit:e.limit,order:e.order,receiverId:e.receiverId,serialNumber:e.serialNumber,tokenId:e.tokenId})):(r="string"==typeof e?e:e.toString(),n=t),!n)return await this.mirrorNode.getOutstandingTokenAirdrops(r);const o=filterUndefined(n),i=Object.keys(o).length>0;return await this.mirrorNode.getOutstandingTokenAirdrops(r,i?o:void 0)}async getPendingTokenAirdrops(e,t){let r,n;if("object"==typeof e&&"accountId"in e?(r=e.accountId,n=filterUndefined({limit:e.limit,order:e.order,senderId:e.senderId,serialNumber:e.serialNumber,tokenId:e.tokenId})):(r="string"==typeof e?e:e.toString(),n=t),!n)return await this.mirrorNode.getPendingTokenAirdrops(r);const o=filterUndefined(n),i=Object.keys(o).length>0;return await this.mirrorNode.getPendingTokenAirdrops(r,i?o:void 0)}async getBlocks(e){if(!e)return await this.mirrorNode.getBlocks();const t=filterUndefined(e),r=Object.keys(t).length>0;return await this.mirrorNode.getBlocks(r?t:void 0)}async getBlock(e){return await this.mirrorNode.getBlock(e)}async getContractResults(e){return await this.mirrorNode.getContractResults(e)}async getContractResult(e,t){return await this.mirrorNode.getContractResult(e,t)}async getContractLogs(e){return await this.mirrorNode.getContractLogs(e)}async getContractActions(e,t){return await this.mirrorNode.getContractActions(e,t)}async getNftInfo(e,t){return await this.mirrorNode.getNftInfo(e,t)}async getNftsByToken(e,t){return await this.mirrorNode.getNftsByToken(e,t)}async getNetworkStake(e){return await this.mirrorNode.getNetworkStake(e)}async getNetworkSupply(e){return await this.mirrorNode.getNetworkSupply(e)}async getContracts(e){if(!e)return await this.mirrorNode.getContracts();const t=filterUndefined(e),r=Object.keys(t).length>0;return await this.mirrorNode.getContracts(r?t:void 0)}async getContract(e,t,r){const n=await this.mirrorNode.getContract(e,t);return r||delete n?.bytecode,n}async getContractResultsByContract(e,t){return await this.mirrorNode.getContractResultsByContract(e,t)}async getContractState(e,t){return await this.mirrorNode.getContractState(e,t)}async getContractLogsByContract(e,t){return await this.mirrorNode.getContractLogsByContract(e,t)}async getNetworkInfo(){return await this.mirrorNode.getNetworkInfo()}async getNetworkFees(e){return await this.mirrorNode.getNetworkFees(e)}async getOpcodeTraces(e,t){return await this.mirrorNode.getOpcodeTraces(e,t)}}var ModelCapability=(e=>(e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE",e.UNLIMITED="UNLIMITED",e))(ModelCapability||{});const global$1=globalThis||self;function bind$1(e,t){return function(){return e.apply(t,arguments)}}const{toString:toString}=Object.prototype,{getPrototypeOf:getPrototypeOf}=Object,{iterator:iterator,toStringTag:toStringTag}=Symbol,kindOf=(e=>t=>{const r=toString.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),kindOfTest=e=>(e=e.toLowerCase(),t=>kindOf(t)===e),typeOfTest=e=>t=>typeof t===e,{isArray:isArray$2}=Array,isUndefined=typeOfTest("undefined");function isBuffer(e){return null!==e&&!isUndefined(e)&&null!==e.constructor&&!isUndefined(e.constructor)&&isFunction$1(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&isArrayBuffer(e.buffer),t}const isString=typeOfTest("string"),isFunction$1=typeOfTest("function"),isNumber=typeOfTest("number"),isObject=e=>null!==e&&"object"==typeof e,isBoolean=e=>!0===e||!1===e,isPlainObject=e=>{if("object"!==kindOf(e))return!1;const t=getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||toStringTag in e||iterator in e)},isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList"),isStream=e=>isObject(e)&&isFunction$1(e.pipe),isFormData=e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||isFunction$1(e.append)&&("formdata"===(t=kindOf(e))||"object"===t&&isFunction$1(e.toString)&&"[object FormData]"===e.toString()))},isURLSearchParams=kindOfTest("URLSearchParams"),[isReadableStream,isRequest,isResponse,isHeaders]=["ReadableStream","Request","Response","Headers"].map(kindOfTest),trim=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function forEach(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,o;if("object"!=typeof e&&(e=[e]),isArray$2(e))for(n=0,o=e.length;n<o;n++)t.call(null,e[n],n,e);else{const o=r?Object.getOwnPropertyNames(e):Object.keys(e),i=o.length;let s;for(n=0;n<i;n++)s=o[n],t.call(null,e[s],s,e)}}function findKey(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,o=r.length;for(;o-- >0;)if(n=r[o],t===n.toLowerCase())return n;return null}const _global="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global$1,isContextDefined=e=>!isUndefined(e)&&e!==_global;function merge(){const{caseless:e}=isContextDefined(this)&&this||{},t={},r=(r,n)=>{const o=e&&findKey(t,n)||n;isPlainObject(t[o])&&isPlainObject(r)?t[o]=merge(t[o],r):isPlainObject(r)?t[o]=merge({},r):isArray$2(r)?t[o]=r.slice():t[o]=r};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&forEach(arguments[n],r);return t}const extend=(e,t,r,{allOwnKeys:n}={})=>(forEach(t,(t,n)=>{r&&isFunction$1(t)?e[n]=bind$1(t,r):e[n]=t},{allOwnKeys:n}),e),stripBOM=e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject=(e,t,r,n)=>{let o,i,s;const a={};if(t=t||{},null==e)return t;do{for(o=Object.getOwnPropertyNames(e),i=o.length;i-- >0;)s=o[i],n&&!n(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==r&&getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},endsWith=(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray$1=e=>{if(!e)return null;if(isArray$2(e))return e;let t=e.length;if(!isNumber(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},isTypedArray=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&getPrototypeOf(Uint8Array)),forEachEntry=(e,t)=>{const r=(e&&e[iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll=(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm=kindOfTest("HTMLFormElement"),toCamelCase=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),hasOwnProperty$1=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),isRegExp=kindOfTest("RegExp"),reduceDescriptors=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};forEach(r,(r,o)=>{let i;!1!==(i=t(r,o,e))&&(n[o]=i||r)}),Object.defineProperties(e,n)},freezeMethods=e=>{reduceDescriptors(e,(t,r)=>{if(isFunction$1(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];isFunction$1(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet=(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return isArray$2(e)?n(e):n(String(e).split(t)),r},noop$1=()=>{},toFiniteNumber=(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t;function isSpecCompliantForm(e){return!!(e&&isFunction$1(e.append)&&"FormData"===e[toStringTag]&&e[iterator])}const toJSONObject=e=>{const t=new Array(10),r=(e,n)=>{if(isObject(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const o=isArray$2(e)?[]:{};return forEach(e,(e,t)=>{const i=r(e,n+1);!isUndefined(i)&&(o[t]=i)}),t[n]=void 0,o}}return e};return r(e,0)},isAsyncFn=kindOfTest("AsyncFunction"),isThenable=e=>e&&(isObject(e)||isFunction$1(e))&&isFunction$1(e.then)&&isFunction$1(e.catch),_setImmediate=(setImmediateSupported="function"==typeof setImmediate,postMessageSupported=isFunction$1(_global.postMessage),setImmediateSupported?setImmediate:postMessageSupported?(token=`axios@${Math.random()}`,callbacks=[],_global.addEventListener("message",({source:e,data:t})=>{e===_global&&t===token&&callbacks.length&&callbacks.shift()()},!1),e=>{callbacks.push(e),_global.postMessage(token,"*")}):e=>setTimeout(e));var setImmediateSupported,postMessageSupported,token,callbacks;const asap="undefined"!=typeof queueMicrotask?queueMicrotask.bind(_global):void 0!==process$1&&process$1.nextTick||_setImmediate,isIterable=e=>null!=e&&isFunction$1(e[iterator]),utils$1={isArray:isArray$2,isArrayBuffer:isArrayBuffer,isBuffer:isBuffer,isFormData:isFormData,isArrayBufferView:isArrayBufferView,isString:isString,isNumber:isNumber,isBoolean:isBoolean,isObject:isObject,isPlainObject:isPlainObject,isReadableStream:isReadableStream,isRequest:isRequest,isResponse:isResponse,isHeaders:isHeaders,isUndefined:isUndefined,isDate:isDate,isFile:isFile,isBlob:isBlob,isRegExp:isRegExp,isFunction:isFunction$1,isStream:isStream,isURLSearchParams:isURLSearchParams,isTypedArray:isTypedArray,isFileList:isFileList,forEach:forEach,merge:merge,extend:extend,trim:trim,stripBOM:stripBOM,inherits:inherits,toFlatObject:toFlatObject,kindOf:kindOf,kindOfTest:kindOfTest,endsWith:endsWith,toArray:toArray$1,forEachEntry:forEachEntry,matchAll:matchAll,isHTMLForm:isHTMLForm,hasOwnProperty:hasOwnProperty$1,hasOwnProp:hasOwnProperty$1,reduceDescriptors:reduceDescriptors,freezeMethods:freezeMethods,toObjectSet:toObjectSet,toCamelCase:toCamelCase,noop:noop$1,toFiniteNumber:toFiniteNumber,findKey:findKey,global:_global,isContextDefined:isContextDefined,isSpecCompliantForm:isSpecCompliantForm,toJSONObject:toJSONObject,isAsyncFn:isAsyncFn,isThenable:isThenable,setImmediate:_setImmediate,asap:asap,isIterable:isIterable};function AxiosError$1(e,t,r,n,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o,this.status=o.status?o.status:null)}utils$1.inherits(AxiosError$1,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:utils$1.toJSONObject(this.config),code:this.code,status:this.status}}});const prototype$1=AxiosError$1.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{descriptors[e]={value:e}}),Object.defineProperties(AxiosError$1,descriptors),Object.defineProperty(prototype$1,"isAxiosError",{value:!0}),AxiosError$1.from=(e,t,r,n,o,i)=>{const s=Object.create(prototype$1);return utils$1.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),AxiosError$1.call(s,e.message,t,r,n,o),s.cause=e,s.name=e.name,i&&Object.assign(s,i),s};const httpAdapter=null;function isVisitable(e){return utils$1.isPlainObject(e)||utils$1.isArray(e)}function removeBrackets(e){return utils$1.endsWith(e,"[]")?e.slice(0,-2):e}function renderKey(e,t,r){return e?e.concat(t).map(function(e,t){return e=removeBrackets(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}function isFlatArray(e){return utils$1.isArray(e)&&!e.some(isVisitable)}const predicates=utils$1.toFlatObject(utils$1,{},null,function(e){return/^is[A-Z]/.test(e)});function toFormData$1(e,t,r){if(!utils$1.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=utils$1.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!utils$1.isUndefined(t[e])})).metaTokens,o=r.visitor||u,i=r.dots,s=r.indexes,a=(r.Blob||"undefined"!=typeof Blob&&Blob)&&utils$1.isSpecCompliantForm(t);if(!utils$1.isFunction(o))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(utils$1.isDate(e))return e.toISOString();if(utils$1.isBoolean(e))return e.toString();if(!a&&utils$1.isBlob(e))throw new AxiosError$1("Blob is not supported. Use a Buffer instead.");return utils$1.isArrayBuffer(e)||utils$1.isTypedArray(e)?a&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,r,o){let a=e;if(e&&!o&&"object"==typeof e)if(utils$1.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(utils$1.isArray(e)&&isFlatArray(e)||(utils$1.isFileList(e)||utils$1.endsWith(r,"[]"))&&(a=utils$1.toArray(e)))return r=removeBrackets(r),a.forEach(function(e,n){!utils$1.isUndefined(e)&&null!==e&&t.append(!0===s?renderKey([r],n,i):null===s?r:r+"[]",c(e))}),!1;return!!isVisitable(e)||(t.append(renderKey(o,r,i),c(e)),!1)}const l=[],d=Object.assign(predicates,{defaultVisitor:u,convertValue:c,isVisitable:isVisitable});if(!utils$1.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!utils$1.isUndefined(r)){if(-1!==l.indexOf(r))throw Error("Circular reference detected in "+n.join("."));l.push(r),utils$1.forEach(r,function(r,i){!0===(!(utils$1.isUndefined(r)||null===r)&&o.call(t,r,utils$1.isString(i)?i.trim():i,n,d))&&e(r,n?n.concat(i):[i])}),l.pop()}}(e),t}function encode$2(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function AxiosURLSearchParams(e,t){this._pairs=[],e&&toFormData$1(e,this,t)}const prototype=AxiosURLSearchParams.prototype;function encode$1(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function buildURL(e,t,r){if(!t)return e;const n=r&&r.encode||encode$1;utils$1.isFunction(r)&&(r={serialize:r});const o=r&&r.serialize;let i;if(i=o?o(t,r):utils$1.isURLSearchParams(t)?t.toString():new AxiosURLSearchParams(t,r).toString(n),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}prototype.append=function(e,t){this._pairs.push([e,t])},prototype.toString=function(e){const t=e?function(t){return e.call(this,t,encode$2)}:encode$2;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class InterceptorManager{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){utils$1.forEach(this.handlers,function(t){null!==t&&e(t)})}}const transitionalDefaults={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},URLSearchParams$1="undefined"!=typeof URLSearchParams?URLSearchParams:AxiosURLSearchParams,FormData$1="undefined"!=typeof FormData?FormData:null,Blob$1="undefined"!=typeof Blob?Blob:null,platform$1={isBrowser:!0,classes:{URLSearchParams:URLSearchParams$1,FormData:FormData$1,Blob:Blob$1},protocols:["http","https","file","blob","url","data"]},hasBrowserEnv="undefined"!=typeof window&&"undefined"!=typeof document,_navigator="object"==typeof navigator&&navigator||void 0,hasStandardBrowserEnv=hasBrowserEnv&&(!_navigator||["ReactNative","NativeScript","NS"].indexOf(_navigator.product)<0),hasStandardBrowserWebWorkerEnv="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,origin=hasBrowserEnv&&window.location.href||"http://localhost",utils=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:hasBrowserEnv,hasStandardBrowserEnv:hasStandardBrowserEnv,hasStandardBrowserWebWorkerEnv:hasStandardBrowserWebWorkerEnv,navigator:_navigator,origin:origin},Symbol.toStringTag,{value:"Module"})),platform={...utils,...platform$1};function toURLEncodedForm(e,t){return toFormData$1(e,new platform.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return platform.isNode&&utils$1.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}function parsePropPath(e){return utils$1.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}function arrayToObject(e){const t={},r=Object.keys(e);let n;const o=r.length;let i;for(n=0;n<o;n++)i=r[n],t[i]=e[i];return t}function formDataToJSON(e){function t(e,r,n,o){let i=e[o++];if("__proto__"===i)return!0;const s=Number.isFinite(+i),a=o>=e.length;if(i=!i&&utils$1.isArray(n)?n.length:i,a)return utils$1.hasOwnProp(n,i)?n[i]=[n[i],r]:n[i]=r,!s;n[i]&&utils$1.isObject(n[i])||(n[i]=[]);return t(e,r,n[i],o)&&utils$1.isArray(n[i])&&(n[i]=arrayToObject(n[i])),!s}if(utils$1.isFormData(e)&&utils$1.isFunction(e.entries)){const r={};return utils$1.forEachEntry(e,(e,n)=>{t(parsePropPath(e),n,r,0)}),r}return null}function stringifySafely(e,t,r){if(utils$1.isString(e))try{return(t||JSON.parse)(e),utils$1.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(e)}const defaults$1={transitional:transitionalDefaults,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,o=utils$1.isObject(e);o&&utils$1.isHTMLForm(e)&&(e=new FormData(e));if(utils$1.isFormData(e))return n?JSON.stringify(formDataToJSON(e)):e;if(utils$1.isArrayBuffer(e)||utils$1.isBuffer(e)||utils$1.isStream(e)||utils$1.isFile(e)||utils$1.isBlob(e)||utils$1.isReadableStream(e))return e;if(utils$1.isArrayBufferView(e))return e.buffer;if(utils$1.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return toURLEncodedForm(e,this.formSerializer).toString();if((i=utils$1.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return toFormData$1(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return o||n?(t.setContentType("application/json",!1),stringifySafely(e)):e}],transformResponse:[function(e){const t=this.transitional||defaults$1.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(utils$1.isResponse(e)||utils$1.isReadableStream(e))return e;if(e&&utils$1.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(o){if(r){if("SyntaxError"===o.name)throw AxiosError$1.from(o,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:platform.classes.FormData,Blob:platform.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};utils$1.forEach(["delete","get","head","post","put","patch"],e=>{defaults$1.headers[e]={}});const ignoreDuplicateOf=utils$1.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),parseHeaders=e=>{const t={};let r,n,o;return e&&e.split("\n").forEach(function(e){o=e.indexOf(":"),r=e.substring(0,o).trim().toLowerCase(),n=e.substring(o+1).trim(),!r||t[r]&&ignoreDuplicateOf[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},$internals=Symbol("internals");function normalizeHeader(e){return e&&String(e).trim().toLowerCase()}function normalizeValue(e){return!1===e||null==e?e:utils$1.isArray(e)?e.map(normalizeValue):String(e)}function parseTokens(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const isValidHeaderName=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function matchHeaderValue(e,t,r,n,o){return utils$1.isFunction(n)?n.call(this,t,r):(o&&(t=r),utils$1.isString(t)?utils$1.isString(n)?-1!==t.indexOf(n):utils$1.isRegExp(n)?n.test(t):void 0:void 0)}function formatHeader(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}function buildAccessors(e,t){const r=utils$1.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,o){return this[n].call(this,t,e,r,o)},configurable:!0})})}let AxiosHeaders$1=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function o(e,t,r){const o=normalizeHeader(t);if(!o)throw new Error("header name must be a non-empty string");const i=utils$1.findKey(n,o);(!i||void 0===n[i]||!0===r||void 0===r&&!1!==n[i])&&(n[i||t]=normalizeValue(e))}const i=(e,t)=>utils$1.forEach(e,(e,r)=>o(e,r,t));if(utils$1.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(utils$1.isString(e)&&(e=e.trim())&&!isValidHeaderName(e))i(parseHeaders(e),t);else if(utils$1.isObject(e)&&utils$1.isIterable(e)){let r,n,o={};for(const t of e){if(!utils$1.isArray(t))throw TypeError("Object iterator must return a key-value pair");o[n=t[0]]=(r=o[n])?utils$1.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}i(o,t)}else null!=e&&o(t,e,r);return this}get(e,t){if(e=normalizeHeader(e)){const r=utils$1.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return parseTokens(e);if(utils$1.isFunction(t))return t.call(this,e,r);if(utils$1.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=normalizeHeader(e)){const r=utils$1.findKey(this,e);return!(!r||void 0===this[r]||t&&!matchHeaderValue(this,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function o(e){if(e=normalizeHeader(e)){const o=utils$1.findKey(r,e);!o||t&&!matchHeaderValue(r,r[o],o,t)||(delete r[o],n=!0)}}return utils$1.isArray(e)?e.forEach(o):o(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const o=t[r];e&&!matchHeaderValue(this,this[o],o,e,!0)||(delete this[o],n=!0)}return n}normalize(e){const t=this,r={};return utils$1.forEach(this,(n,o)=>{const i=utils$1.findKey(r,o);if(i)return t[i]=normalizeValue(n),void delete t[o];const s=e?formatHeader(o):String(o).trim();s!==o&&delete t[o],t[s]=normalizeValue(n),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return utils$1.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&utils$1.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[$internals]=this[$internals]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=normalizeHeader(e);t[n]||(buildAccessors(r,e),t[n]=!0)}return utils$1.isArray(e)?e.forEach(n):n(e),this}};function transformData(e,t){const r=this||defaults$1,n=t||r,o=AxiosHeaders$1.from(n.headers);let i=n.data;return utils$1.forEach(e,function(e){i=e.call(r,i,o.normalize(),t?t.status:void 0)}),o.normalize(),i}function isCancel$1(e){return!(!e||!e.__CANCEL__)}function CanceledError$1(e,t,r){AxiosError$1.call(this,null==e?"canceled":e,AxiosError$1.ERR_CANCELED,t,r),this.name="CanceledError"}function settle(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new AxiosError$1("Request failed with status code "+r.status,[AxiosError$1.ERR_BAD_REQUEST,AxiosError$1.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}function parseProtocol(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function speedometer(e,t){e=e||10;const r=new Array(e),n=new Array(e);let o,i=0,s=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),u=n[s];o||(o=c),r[i]=a,n[i]=c;let l=s,d=0;for(;l!==i;)d+=r[l++],l%=e;if(i=(i+1)%e,i===s&&(s=(s+1)%e),c-o<t)return;const h=u&&c-u;return h?Math.round(1e3*d/h):void 0}}function throttle(e,t){let r,n,o=0,i=1e3/t;const s=(t,i=Date.now())=>{o=i,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),a=t-o;a>=i?s(e,t):(r=e,n||(n=setTimeout(()=>{n=null,s(r)},i-a)))},()=>r&&s(r)]}AxiosHeaders$1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),utils$1.reduceDescriptors(AxiosHeaders$1.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),utils$1.freezeMethods(AxiosHeaders$1),utils$1.inherits(CanceledError$1,AxiosError$1,{__CANCEL__:!0});const progressEventReducer=(e,t,r=3)=>{let n=0;const o=speedometer(50,250);return throttle(r=>{const i=r.loaded,s=r.lengthComputable?r.total:void 0,a=i-n,c=o(a);n=i;e({loaded:i,total:s,progress:s?i/s:void 0,bytes:a,rate:c||void 0,estimated:c&&s&&i<=s?(s-i)/c:void 0,event:r,lengthComputable:null!=s,[t?"download":"upload"]:!0})},r)},progressEventDecorator=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},asyncDecorator=e=>(...t)=>utils$1.asap(()=>e(...t)),isURLSameOrigin=platform.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,platform.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(platform.origin),platform.navigator&&/(msie|trident)/i.test(platform.navigator.userAgent)):()=>!0,cookies=platform.hasStandardBrowserEnv?{write(e,t,r,n,o,i){const s=[e+"="+encodeURIComponent(t)];utils$1.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),utils$1.isString(n)&&s.push("path="+n),utils$1.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function isAbsoluteURL$1(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function combineURLs(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function buildFullPath(e,t,r){let n=!isAbsoluteURL$1(t);return e&&(n||0==r)?combineURLs(e,t):t}const headersToObject=e=>e instanceof AxiosHeaders$1?{...e}:e;function mergeConfig$1(e,t){t=t||{};const r={};function n(e,t,r,n){return utils$1.isPlainObject(e)&&utils$1.isPlainObject(t)?utils$1.merge.call({caseless:n},e,t):utils$1.isPlainObject(t)?utils$1.merge({},t):utils$1.isArray(t)?t.slice():t}function o(e,t,r,o){return utils$1.isUndefined(t)?utils$1.isUndefined(e)?void 0:n(void 0,e,0,o):n(e,t,0,o)}function i(e,t){if(!utils$1.isUndefined(t))return n(void 0,t)}function s(e,t){return utils$1.isUndefined(t)?utils$1.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,o,i){return i in t?n(r,o):i in e?n(void 0,r):void 0}const c={url:i,method:i,data:i,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,r)=>o(headersToObject(e),headersToObject(t),0,!0)};return utils$1.forEach(Object.keys(Object.assign({},e,t)),function(n){const i=c[n]||o,s=i(e[n],t[n],n);utils$1.isUndefined(s)&&i!==a||(r[n]=s)}),r}const resolveConfig=e=>{const t=mergeConfig$1({},e);let r,{data:n,withXSRFToken:o,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:c}=t;if(t.headers=a=AxiosHeaders$1.from(a),t.url=buildURL(buildFullPath(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&a.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),utils$1.isFormData(n))if(platform.hasStandardBrowserEnv||platform.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(r=a.getContentType())){const[e,...t]=r?r.split(";").map(e=>e.trim()).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(platform.hasStandardBrowserEnv&&(o&&utils$1.isFunction(o)&&(o=o(t)),o||!1!==o&&isURLSameOrigin(t.url))){const e=i&&s&&cookies.read(s);e&&a.set(i,e)}return t},isXHRAdapterSupported="undefined"!=typeof XMLHttpRequest,xhrAdapter=isXHRAdapterSupported&&function(e){return new Promise(function(t,r){const n=resolveConfig(e);let o=n.data;const i=AxiosHeaders$1.from(n.headers).normalize();let s,a,c,u,l,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=n;function p(){u&&u(),l&&l(),n.cancelToken&&n.cancelToken.unsubscribe(s),n.signal&&n.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function y(){if(!m)return;const n=AxiosHeaders$1.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());settle(function(e){t(e),p()},function(e){r(e),p()},{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=y:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(y)},m.onabort=function(){m&&(r(new AxiosError$1("Request aborted",AxiosError$1.ECONNABORTED,e,m)),m=null)},m.onerror=function(){r(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const o=n.transitional||transitionalDefaults;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new AxiosError$1(t,o.clarifyTimeoutError?AxiosError$1.ETIMEDOUT:AxiosError$1.ECONNABORTED,e,m)),m=null},void 0===o&&i.setContentType(null),"setRequestHeader"in m&&utils$1.forEach(i.toJSON(),function(e,t){m.setRequestHeader(t,e)}),utils$1.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),d&&"json"!==d&&(m.responseType=n.responseType),f&&([c,l]=progressEventReducer(f,!0),m.addEventListener("progress",c)),h&&m.upload&&([a,u]=progressEventReducer(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",u)),(n.cancelToken||n.signal)&&(s=t=>{m&&(r(!t||t.type?new CanceledError$1(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(s),n.signal&&(n.signal.aborted?s():n.signal.addEventListener("abort",s)));const g=parseProtocol(n.url);g&&-1===platform.protocols.indexOf(g)?r(new AxiosError$1("Unsupported protocol "+g+":",AxiosError$1.ERR_BAD_REQUEST,e)):m.send(o||null)})},composeSignals=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const o=function(e){if(!r){r=!0,s();const t=e instanceof Error?e:this.reason;n.abort(t instanceof AxiosError$1?t:new CanceledError$1(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,o(new AxiosError$1(`timeout ${t} of ms exceeded`,AxiosError$1.ETIMEDOUT))},t);const s=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)}),e=null)};e.forEach(e=>e.addEventListener("abort",o));const{signal:a}=n;return a.unsubscribe=()=>utils$1.asap(s),a}},streamChunk=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let n,o=0;for(;o<r;)n=o+t,yield e.slice(o,n),o=n},readBytes=async function*(e,t){for await(const r of readStream(e))yield*streamChunk(r,t)},readStream=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},trackStream=(e,t,r,n)=>{const o=readBytes(e,t);let i,s=0,a=e=>{i||(i=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await o.next();if(t)return a(),void e.close();let i=n.byteLength;if(r){let e=s+=i;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw a(t),t}},cancel:e=>(a(e),o.return())},{highWaterMark:2})},isFetchSupported="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,isReadableStreamSupported=isFetchSupported&&"function"==typeof ReadableStream,encodeText=isFetchSupported&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),test=(e,...t)=>{try{return!!e(...t)}catch(r){return!1}},supportsRequestStream=isReadableStreamSupported&&test(()=>{let e=!1;const t=new Request(platform.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),DEFAULT_CHUNK_SIZE=65536,supportsResponseStream=isReadableStreamSupported&&test(()=>utils$1.isReadableStream(new Response("").body)),resolvers={stream:supportsResponseStream&&(e=>e.body)};var res;isFetchSupported&&(res=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!resolvers[e]&&(resolvers[e]=utils$1.isFunction(res[e])?t=>t[e]():(t,r)=>{throw new AxiosError$1(`Response type '${e}' is not supported`,AxiosError$1.ERR_NOT_SUPPORT,r)})}));const getBodyLength=async e=>{if(null==e)return 0;if(utils$1.isBlob(e))return e.size;if(utils$1.isSpecCompliantForm(e)){const t=new Request(platform.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return utils$1.isArrayBufferView(e)||utils$1.isArrayBuffer(e)?e.byteLength:(utils$1.isURLSearchParams(e)&&(e+=""),utils$1.isString(e)?(await encodeText(e)).byteLength:void 0)},resolveBodyLength=async(e,t)=>{const r=utils$1.toFiniteNumber(e.getContentLength());return null==r?getBodyLength(t):r},fetchAdapter=isFetchSupported&&(async e=>{let{url:t,method:r,data:n,signal:o,cancelToken:i,timeout:s,onDownloadProgress:a,onUploadProgress:c,responseType:u,headers:l,withCredentials:d="same-origin",fetchOptions:h}=resolveConfig(e);u=u?(u+"").toLowerCase():"text";let f,p=composeSignals([o,i&&i.toAbortSignal()],s);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let y;try{if(c&&supportsRequestStream&&"get"!==r&&"head"!==r&&0!==(y=await resolveBodyLength(l,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(utils$1.isFormData(n)&&(e=r.headers.get("content-type"))&&l.setContentType(e),r.body){const[e,t]=progressEventDecorator(y,progressEventReducer(asyncDecorator(c)));n=trackStream(r.body,DEFAULT_CHUNK_SIZE,e,t)}}utils$1.isString(d)||(d=d?"include":"omit");const o="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:r.toUpperCase(),headers:l.normalize().toJSON(),body:n,duplex:"half",credentials:o?d:void 0});let i=await fetch(f,h);const s=supportsResponseStream&&("stream"===u||"response"===u);if(supportsResponseStream&&(a||s&&m)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=i[t]});const t=utils$1.toFiniteNumber(i.headers.get("content-length")),[r,n]=a&&progressEventDecorator(t,progressEventReducer(asyncDecorator(a),!0))||[];i=new Response(trackStream(i.body,DEFAULT_CHUNK_SIZE,r,()=>{n&&n(),m&&m()}),e)}u=u||"text";let g=await resolvers[utils$1.findKey(resolvers,u)||"text"](i,e);return!s&&m&&m(),await new Promise((t,r)=>{settle(t,r,{data:g,headers:AxiosHeaders$1.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:f})})}catch(g){if(m&&m(),g&&"TypeError"===g.name&&/Load failed|fetch/i.test(g.message))throw Object.assign(new AxiosError$1("Network Error",AxiosError$1.ERR_NETWORK,e,f),{cause:g.cause||g});throw AxiosError$1.from(g,g&&g.code,e,f)}}),knownAdapters={http:httpAdapter,xhr:xhrAdapter,fetch:fetchAdapter};utils$1.forEach(knownAdapters,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const renderReason=e=>`- ${e}`,isResolvedHandle=e=>utils$1.isFunction(e)||null===e||!1===e,adapters={getAdapter:e=>{e=utils$1.isArray(e)?e:[e];const{length:t}=e;let r,n;const o={};for(let i=0;i<t;i++){let t;if(r=e[i],n=r,!isResolvedHandle(r)&&(n=knownAdapters[(t=String(r)).toLowerCase()],void 0===n))throw new AxiosError$1(`Unknown adapter '${t}'`);if(n)break;o[t||"#"+i]=n}if(!n){const e=Object.entries(o).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new AxiosError$1("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(renderReason).join("\n"):" "+renderReason(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n},adapters:knownAdapters};function throwIfCancellationRequested(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new CanceledError$1(null,e)}function dispatchRequest(e){throwIfCancellationRequested(e),e.headers=AxiosHeaders$1.from(e.headers),e.data=transformData.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return adapters.getAdapter(e.adapter||defaults$1.adapter)(e).then(function(t){return throwIfCancellationRequested(e),t.data=transformData.call(e,e.transformResponse,t),t.headers=AxiosHeaders$1.from(t.headers),t},function(t){return isCancel$1(t)||(throwIfCancellationRequested(e),t&&t.response&&(t.response.data=transformData.call(e,e.transformResponse,t.response),t.response.headers=AxiosHeaders$1.from(t.response.headers))),Promise.reject(t)})}const VERSION$2="1.10.0",validators$1={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{validators$1[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const deprecatedWarnings={};function assertOptions(e,t,r){if("object"!=typeof e)throw new AxiosError$1("options must be an object",AxiosError$1.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let o=n.length;for(;o-- >0;){const i=n[o],s=t[i];if(s){const t=e[i],r=void 0===t||s(t,i,e);if(!0!==r)throw new AxiosError$1("option "+i+" must be "+r,AxiosError$1.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new AxiosError$1("Unknown option "+i,AxiosError$1.ERR_BAD_OPTION)}}validators$1.transitional=function(e,t,r){function n(e,t){return"[Axios v"+VERSION$2+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,o,i)=>{if(!1===e)throw new AxiosError$1(n(o," has been removed"+(t?" in "+t:"")),AxiosError$1.ERR_DEPRECATED);return t&&!deprecatedWarnings[o]&&(deprecatedWarnings[o]=!0,console.warn(n(o," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,o,i)}},validators$1.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};const validator$1={assertOptions:assertOptions,validators:validators$1},validators=validator$1.validators;let Axios$1=class{constructor(e){this.defaults=e||{},this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(n){}}throw r}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=mergeConfig$1(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:o}=t;void 0!==r&&validator$1.assertOptions(r,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1),null!=n&&(utils$1.isFunction(n)?t.paramsSerializer={serialize:n}:validator$1.assertOptions(n,{encode:validators.function,serialize:validators.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),validator$1.assertOptions(t,{baseUrl:validators.spelling("baseURL"),withXsrfToken:validators.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&utils$1.merge(o.common,o[t.method]);o&&utils$1.forEach(["delete","get","head","post","put","patch","common"],e=>{delete o[e]}),t.headers=AxiosHeaders$1.concat(i,o);const s=[];let a=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});const c=[];let u;this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let l,d=0;if(!a){const e=[dispatchRequest.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,c),l=e.length,u=Promise.resolve(t);d<l;)u=u.then(e[d++],e[d++]);return u}l=s.length;let h=t;for(d=0;d<l;){const e=s[d++],t=s[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{u=dispatchRequest.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,l=c.length;d<l;)u=u.then(c[d++],c[d++]);return u}getUri(e){return buildURL(buildFullPath((e=mergeConfig$1(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};utils$1.forEach(["delete","get","head","options"],function(e){Axios$1.prototype[e]=function(t,r){return this.request(mergeConfig$1(r||{},{method:e,url:t,data:(r||{}).data}))}}),utils$1.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,o){return this.request(mergeConfig$1(o||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Axios$1.prototype[e]=t(),Axios$1.prototype[e+"Form"]=t(!0)});let CancelToken$1=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,o){r.reason||(r.reason=new CanceledError$1(e,n,o),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}};function spread$1(e){return function(t){return e.apply(null,t)}}function isAxiosError$1(e){return utils$1.isObject(e)&&!0===e.isAxiosError}const HttpStatusCode$1={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};function createInstance(e){const t=new Axios$1(e),r=bind$1(Axios$1.prototype.request,t);return utils$1.extend(r,Axios$1.prototype,t,{allOwnKeys:!0}),utils$1.extend(r,t,null,{allOwnKeys:!0}),r.create=function(t){return createInstance(mergeConfig$1(e,t))},r}Object.entries(HttpStatusCode$1).forEach(([e,t])=>{HttpStatusCode$1[t]=e});const axios=createInstance(defaults$1);axios.Axios=Axios$1,axios.CanceledError=CanceledError$1,axios.CancelToken=CancelToken$1,axios.isCancel=isCancel$1,axios.VERSION=VERSION$2,axios.toFormData=toFormData$1,axios.AxiosError=AxiosError$1,axios.Cancel=axios.CanceledError,axios.all=function(e){return Promise.all(e)},axios.spread=spread$1,axios.isAxiosError=isAxiosError$1,axios.mergeConfig=mergeConfig$1,axios.AxiosHeaders=AxiosHeaders$1,axios.formToJSON=e=>formDataToJSON(utils$1.isHTMLForm(e)?new FormData(e):e),axios.getAdapter=adapters.getAdapter,axios.HttpStatusCode=HttpStatusCode$1,axios.default=axios;const{Axios:Axios,AxiosError:AxiosError,CanceledError:CanceledError,isCancel:isCancel,CancelToken:CancelToken,VERSION:VERSION$1,all:all,Cancel:Cancel,isAxiosError:isAxiosError,spread:spread,toFormData:toFormData,AxiosHeaders:AxiosHeaders,HttpStatusCode:HttpStatusCode,formToJSON:formToJSON,getAdapter:getAdapter,mergeConfig:mergeConfig}=axios;class HederaMirrorNode{constructor(e,t,r){this.maxRetries=5,this.initialDelayMs=2e3,this.maxDelayMs=3e4,this.backoffFactor=2,this.network=e,r?.apiKey&&(this.apiKey=r.apiKey),this.customHeaders=r?.headers||{},this.baseUrl=r?.customUrl||this.getMirrorNodeUrl(),this.logger=t||new Logger({level:"debug",module:"MirrorNode"}),this.isServerEnvironment="undefined"==typeof window,r?.customUrl&&this.logger.info(`Using custom mirror node URL: ${r.customUrl}`),r?.apiKey&&this.logger.info("Using API key for mirror node requests")}configureRetry(e){this.maxRetries=e.maxRetries??this.maxRetries,this.initialDelayMs=e.initialDelayMs??this.initialDelayMs,this.maxDelayMs=e.maxDelayMs??this.maxDelayMs,this.backoffFactor=e.backoffFactor??this.backoffFactor,this.logger.info(`Retry configuration updated: maxRetries=${this.maxRetries}, initialDelayMs=${this.initialDelayMs}, maxDelayMs=${this.maxDelayMs}, backoffFactor=${this.backoffFactor}`)}configureMirrorNode(e){e.customUrl&&(this.baseUrl=e.customUrl,this.logger.info(`Updated mirror node URL: ${e.customUrl}`)),e.apiKey&&(this.apiKey=e.apiKey,this.logger.info("Updated API key for mirror node requests")),e.headers&&(this.customHeaders={...this.customHeaders,...e.headers},this.logger.info("Updated custom headers for mirror node requests"))}constructUrl(e){if(this.baseUrl.includes("<API-KEY>")&&this.apiKey){const t=this.baseUrl.replace("<API-KEY>",this.apiKey);return e.startsWith("/")?`${t}${e}`:`${t}/${e}`}return e.startsWith("/")?`${this.baseUrl}${e}`:`${this.baseUrl}/${e}`}getMirrorNodeUrl(){return"mainnet"===this.network?"https://mainnet-public.mirrornode.hedera.com":"https://testnet.mirrornode.hedera.com"}getBaseUrl(){return this.baseUrl}async getPublicKey(e){this.logger.info(`Getting public key for account ${e}`);const t=await this.requestAccount(e);try{if(!t||!t.key)throw new Error(`Failed to retrieve public key for account ID: ${e}`);return i$f.fromString(t.key.key)}catch(r){const e=`Error fetching public key from Mirror Node: ${r.message}`;throw this.logger.error(e),new Error(e)}}async getAccountMemo(e){this.logger.info(`Getting account memo for account ID: ${e}`);try{const t=await this._requestWithRetry(`/api/v1/accounts/${e}`);return t?.memo?t.memo:(this.logger.warn(`No memo found for account ${e}`),null)}catch(t){const r=t;return this.logger.error(`Failed to get account memo for ${e} after retries: ${r.message}`),null}}async getTopicInfo(e){try{this.logger.debug(`Fetching topic info for ${e}`);return await this._requestWithRetry(`/api/v1/topics/${e}`)}catch(t){const r=`Error retrieving topic information for ${e} after retries: ${t.message}`;throw this.logger.error(r),new Error(r)}}async getTopicFees(e){try{return(await this.getTopicInfo(e)).custom_fees}catch(t){const e=`Error retrieving topic fees: ${t.message}`;return this.logger.error(e),null}}async getHBARPrice(e){try{const t=s$j.fromDate(e).toString();this.logger.debug(`Fetching HBAR price for timestamp ${t}`);const r=await this._requestWithRetry(`/api/v1/network/exchangerate?timestamp=${t}`);return Number(r?.current_rate?.cent_equivalent)/Number(r?.current_rate?.hbar_equivalent)/100}catch(t){const e=`Error retrieving HBAR price: ${t.message}`;return this.logger.error(e),null}}async getTokenInfo(e){this.logger.debug(`Fetching token info for ${e}`);try{const t=await this._requestWithRetry(`/api/v1/tokens/${e}`);return t?(this.logger.trace(`Token info found for ${e}:`,t),t):(this.logger.warn(`No token info found for ${e}`),null)}catch(t){const r=`Error fetching token info for ${e}: ${t.message}`;return this.logger.error(r),null}}async getTopicMessages(e,t){this.logger.trace(`Querying messages for topic ${e}${t?" with filters":""}`);let r=`/api/v1/topics/${e}/messages`;const n=new URLSearchParams;if(t){if(void 0!==t.sequenceNumber){const e="number"==typeof t.sequenceNumber?t.sequenceNumber.toString():t.sequenceNumber;e.match(/^(gt|gte|lt|lte|eq|ne):/)?n.append("sequencenumber",e):n.append("sequencenumber",`gt:${e}`)}t.limit&&n.append("limit",t.limit.toString()),t.order&&n.append("order",t.order)}const o=n.toString();o&&(r+=`?${o}`);const i=[];let s=r;for(;s;)try{const e=await this._requestWithRetry(s);if(e.messages&&e.messages.length>0)for(const t of e.messages)try{if(!t.message)continue;let e,r;try{e=this.isServerEnvironment?Buffer.from(t.message,"base64").toString("utf-8"):(new TextDecoder).decode(Uint8Array.from(atob(t.message),e=>e.charCodeAt(0)))}catch(a){const e=`Error decoding message: ${a}`;this.logger.error(e);continue}try{r=JSON.parse(e)}catch{const t=`Invalid JSON message content: ${e}`;this.logger.error(t);continue}r.sequence_number=t.sequence_number,i.push({...r,consensus_timestamp:t.consensus_timestamp,sequence_number:t.sequence_number,created:new Date(1e3*Number(t.consensus_timestamp))})}catch(a){const e=`Error processing message: ${a.message}`;this.logger.error(e)}s=e.links?.next||""}catch(c){const t=`Error querying topic messages for topic ${e} (endpoint: ${s}) after retries: ${c.message}`;throw this.logger.error(t),new Error(t)}return i}async requestAccount(e){try{this.logger.debug(`Requesting account info for ${e}`);const t=await this._requestWithRetry(`/api/v1/accounts/${e}`);if(!t)throw new Error(`No data received from mirror node for account: ${e}`);return t}catch(t){const r=`Failed to fetch account ${e} after retries: ${t.message}`;throw this.logger.error(r),new Error(r)}}async checkKeyListAccess(e,t){try{const r=libExports.proto.Key.decode(e);return this.evaluateKeyAccess(r,t)}catch(r){const e=`Error decoding protobuf key: ${r.message}`;throw this.logger.error(e),new Error(e)}}async evaluateKeyAccess(e,t){return e.ed25519?this.compareEd25519Key(e.ed25519,t):e.keyList?this.evaluateKeyList(e.keyList,t):!(!e.thresholdKey||!e.thresholdKey.keys)&&this.evaluateKeyList(e.thresholdKey.keys,t)}async evaluateKeyList(e,t){const r=e.keys||[];for(const o of r)if(o)if(o.ed25519){if(this.compareEd25519Key(o.ed25519,t))return!0}else if(o.keyList||o.thresholdKey)try{const e=libExports.proto.Key.encode({...o.keyList?{keyList:o.keyList}:{},...o.thresholdKey?{thresholdKey:o.thresholdKey}:{}}).finish();if(await this.checkKeyListAccess(Buffer.from(e),t))return!0}catch(n){const e=`Error in nested key: ${n.message}`;this.logger.debug(e)}return!1}compareEd25519Key(e,t){try{return i$f.fromBytes(Buffer.from(e)).toString()===t.toString()}catch(r){const e=`Error comparing Ed25519 key: ${r.message}`;return this.logger.debug(e),!1}}async getScheduleInfo(e){try{this.logger.info(`Getting information for scheduled transaction ${e}`);const t=await this._requestWithRetry(`/api/v1/schedules/${e}`);return t||(this.logger.warn(`No schedule info found for ${e} after retries.`),null)}catch(t){return this.logger.error(`Error fetching schedule info for ${e} after retries: ${t.message}`),null}}async getScheduledTransactionStatus(e){try{this.logger.info(`Checking status of scheduled transaction ${e}`);const t=await this.getScheduleInfo(e);if(!t)throw new Error(`Schedule ${e} not found`);return{executed:Boolean(t.executed_timestamp),executedDate:t.executed_timestamp?new Date(1e3*Number(t.executed_timestamp)):void 0,deleted:t.deleted||!1}}catch(t){throw this.logger.error(`Error checking scheduled transaction status: ${t}`),t}}async getTransaction(e){this.logger.info(`Getting transaction details for ID/hash: ${e}`);try{const t=await this._requestWithRetry(`/api/v1/transactions/${e}`);return t?.transactions?.length>0?(this.logger.trace(`Transaction details found for ${e}:`,t.transactions[0]),t.transactions[0]):(this.logger.warn(`No transaction details found for ${e} or unexpected response structure.`),null)}catch(t){const r=t;return this.logger.error(`Failed to get transaction details for ${e} after retries: ${r.message}`),null}}async _requestWithRetry(e,t){let r=0,n=this.initialDelayMs;const o=this.constructUrl(e),i={...t,headers:{...this.customHeaders,...t?.headers}};for(this.apiKey&&(i.headers={...i.headers,Authorization:`Bearer ${this.apiKey}`,"X-API-Key":this.apiKey});r<this.maxRetries;)try{return(await axios.get(o,i)).data}catch(s){r++;const e=r>=this.maxRetries,t=s.response?.status;if(t&&t>404&&t<500&&429!==t)throw this.logger.error(`Client error for ${o} (status ${t}): ${s.message}. Not retrying.`),s;if(e)throw this.logger.error(`Max retries (${this.maxRetries}) reached for ${o}. Last error: ${s.message}`),s;this.logger.warn(`Attempt ${r}/${this.maxRetries} failed for ${o}: ${s.message}. Retrying in ${n}ms...`),await new Promise(e=>setTimeout(e,n)),n=Math.min(n*this.backoffFactor,this.maxDelayMs)}throw new Error(`Failed to fetch data from ${o} after ${this.maxRetries} attempts.`)}async _fetchWithRetry(e,t){let r=0,n=this.initialDelayMs;const o={...this.customHeaders};t?.headers&&(t.headers instanceof Headers?t.headers.forEach((e,t)=>{o[t]=e}):Array.isArray(t.headers)?t.headers.forEach(([e,t])=>{o[e]=t}):Object.assign(o,t.headers)),this.apiKey&&(o.Authorization=`Bearer ${this.apiKey}`,o["X-API-Key"]=this.apiKey);const i={...t,headers:o};for(;r<this.maxRetries;)try{const t=await fetch(e,i);if(!t.ok){if(t.status>=400&&t.status<500&&429!==t.status)throw this.logger.error(`Client error for ${e} (status ${t.status}): ${t.statusText}. Not retrying.`),new Error(`Fetch failed with status ${t.status}: ${t.statusText} for URL: ${e}`);throw new Error(`Fetch failed with status ${t.status}: ${t.statusText} for URL: ${e}`)}return await t.json()}catch(s){if(r++,r>=this.maxRetries)throw this.logger.error(`Max retries (${this.maxRetries}) reached for ${e}. Last error: ${s.message}`),s;this.logger.warn(`Attempt ${r}/${this.maxRetries} failed for ${e}: ${s.message}. Retrying in ${n}ms...`),await new Promise(e=>setTimeout(e,n)),n=Math.min(n*this.backoffFactor,this.maxDelayMs)}throw new Error(`Failed to fetch data from ${e} after ${this.maxRetries} attempts.`)}async getAccountBalance(e){this.logger.info(`Getting balance for account ${e}`);try{const t=await this.requestAccount(e);if(t&&t.balance){return t.balance.balance/1e8}return this.logger.warn(`Could not retrieve balance for account ${e} from account info.`),null}catch(t){return this.logger.error(`Error fetching numerical balance for account ${e}: ${t.message}`),null}}async getTopicMessagesByFilter(e,t){this.logger.trace(`Querying messages for topic ${e} with filters: ${JSON.stringify(t)}`);let r=`/api/v1/topics/${e}/messages`;const n=new URLSearchParams;t?.limit&&n.append("limit",t.limit.toString()),t?.sequenceNumber&&n.append("sequencenumber",t.sequenceNumber),t?.startTime&&n.append("timestamp",`gte:${t.startTime}`),t?.endTime&&n.append("timestamp",`lt:${t.endTime}`),t?.order&&n.append("order",t.order);const o=n.toString();o&&(r+=`?${o}`);const i=[];let s=0;try{for(;r&&s<10;){s++;const e=await this._requestWithRetry(r);if(e.messages&&e.messages.length>0)for(const t of e.messages)try{if(!t.message)continue;let e;e=this.isServerEnvironment?Buffer.from(t.message,"base64").toString("utf-8"):(new TextDecoder).decode(Uint8Array.from(atob(t.message),e=>e.charCodeAt(0)));let r={};try{r=JSON.parse(e)}catch{this.logger.debug(`Message content is not valid JSON, using raw: ${e}`),r={raw_content:e}}const n={...r,consensus_timestamp:t.consensus_timestamp,sequence_number:t.sequence_number,payer_account_id:t.payer_account_id,topic_id:t.topic_id,running_hash:t.running_hash,running_hash_version:t.running_hash_version,chunk_info:t.chunk_info??{},created:new Date(1e3*Number(t.consensus_timestamp.split(".")[0])+Number(t.consensus_timestamp.split(".")[1]||0)/1e6),payer:t.payer_account_id};i.push(n)}catch(a){const e=a;this.logger.error(`Error processing individual message: ${e.message}`)}if(t?.limit&&i.length>=t.limit)break;r=e.links?.next?`${e.links.next}`:""}return i}catch(a){const t=a;return this.logger.error(`Error querying filtered topic messages for ${e}: ${t.message}`),null}}async getAccountTokens(e,t=100){this.logger.info(`Getting tokens for account ${e}`);let r=[],n=`/api/v1/accounts/${e}/tokens?limit=${t}`;try{for(let e=0;e<10&&n;e++){const e=await this._requestWithRetry(n);if(e&&e.tokens&&(r=r.concat(e.tokens)),n=e.links?.next||"",!n||t&&r.length>=t){t&&r.length>t&&(r=r.slice(0,t));break}}return r}catch(o){return this.logger.error(`Error fetching tokens for account ${e}: ${o.message}`),null}}async getTransactionByTimestamp(e){this.logger.info(`Getting transaction by timestamp: ${e}`);try{return(await this._requestWithRetry(`/api/v1/transactions?timestamp=${e}&limit=1`)).transactions}catch(t){return this.logger.error(`Error fetching transaction by timestamp ${e}: ${t}`),[]}}async getAccountNfts(e,t,r=100){this.logger.info(`Getting NFTs for account ${e}${t?` for token ${t}`:""}`);let n=[],o=`/api/v1/accounts/${e}/nfts?limit=${r}`;t&&(o+=`&token.id=${t}`);try{for(let e=0;e<10&&o;e++){const e=await this._requestWithRetry(o);if(e&&e.nfts){const t=e.nfts.map(e=>{let t;if(e.metadata)try{t=this.isServerEnvironment?Buffer.from(e.metadata,"base64").toString("utf-8"):(new TextDecoder).decode(Uint8Array.from(atob(e.metadata),e=>e.charCodeAt(0)))}catch(r){this.logger.warn(`Failed to decode metadata for NFT ${e.token_id} SN ${e.serial_number}: ${r.message}`)}return{...e,token_uri:t}});n=n.concat(t)}if(o=e.links?.next||"",!o)break}return n}catch(i){return this.logger.error(`Error fetching NFTs for account ${e}: ${i}`),null}}async validateNFTOwnership(e,t,r){this.logger.info(`Validating ownership of NFT ${t} SN ${r} for account ${e}`);try{const n=await this.getAccountNfts(e,t);if(n){return n.find(e=>e.token_id===t&&e.serial_number===r)||null}return null}catch(n){return this.logger.error(`Error validating NFT ownership: ${n.message}`),null}}async readSmartContractQuery(e,t,r,n){this.logger.info(`Reading smart contract ${e} with selector ${t}`);const o=e.startsWith("0x")?e:`0x${f$2.fromString(e).toSolidityAddress()}`,i=r.startsWith("0x")?r:`0x${f$2.fromString(r).toSolidityAddress()}`,s={block:n?.block||"latest",data:t,estimate:n?.estimate||!1,from:i,to:o,gas:n?.gas,gasPrice:n?.gasPrice,value:n?.value||0};Object.keys(s).forEach(e=>{const t=e;void 0===s[t]&&delete s[t]});try{const e=this.constructUrl("/api/v1/contracts/call");return await this._fetchWithRetry(e,{method:"POST",body:JSON.stringify(s),headers:{"Content-Type":"application/json"}})}catch(a){return this.logger.error(`Error reading smart contract ${e}: ${a.message}`),null}}async getOutstandingTokenAirdrops(e,t){this.logger.info(`Getting outstanding token airdrops sent by account ${e}`);let r=`/api/v1/accounts/${e}/airdrops/outstanding`;const n=new URLSearchParams;t?.limit&&n.append("limit",t.limit.toString()),t?.order&&n.append("order",t.order),t?.receiverId&&n.append("receiver.id",t.receiverId),t?.serialNumber&&n.append("serialnumber",t.serialNumber),t?.tokenId&&n.append("token.id",t.tokenId);const o=n.toString();o&&(r+=`?${o}`);try{return(await this._requestWithRetry(r)).airdrops||[]}catch(i){return this.logger.error(`Error fetching outstanding token airdrops for account ${e}: ${i.message}`),null}}async getPendingTokenAirdrops(e,t){this.logger.info(`Getting pending token airdrops received by account ${e}`);let r=`/api/v1/accounts/${e}/airdrops/pending`;const n=new URLSearchParams;t?.limit&&n.append("limit",t.limit.toString()),t?.order&&n.append("order",t.order),t?.senderId&&n.append("sender.id",t.senderId),t?.serialNumber&&n.append("serialnumber",t.serialNumber),t?.tokenId&&n.append("token.id",t.tokenId);const o=n.toString();o&&(r+=`?${o}`);try{return(await this._requestWithRetry(r)).airdrops||[]}catch(i){return this.logger.error(`Error fetching pending token airdrops for account ${e}: ${i.message}`),null}}async getBlocks(e){this.logger.info("Getting blocks from the network");let t="/api/v1/blocks";const r=new URLSearchParams;e?.limit&&r.append("limit",e.limit.toString()),e?.order&&r.append("order",e.order),e?.timestamp&&r.append("timestamp",e.timestamp),e?.blockNumber&&r.append("block.number",e.blockNumber);const n=r.toString();n&&(t+=`?${n}`);try{return(await this._requestWithRetry(t)).blocks||[]}catch(o){return this.logger.error(`Error fetching blocks: ${o.message}`),null}}async getBlock(e){this.logger.info(`Getting block ${e}`);try{return await this._requestWithRetry(`/api/v1/blocks/${e}`)}catch(t){return this.logger.error(`Error fetching block ${e}: ${t.message}`),null}}async getContracts(e){this.logger.info("Getting contracts from the network");let t="/api/v1/contracts";const r=new URLSearchParams;e?.contractId&&r.append("contract.id",e.contractId),e?.limit&&r.append("limit",e.limit.toString()),e?.order&&r.append("order",e.order);const n=r.toString();n&&(t+=`?${n}`);try{return(await this._requestWithRetry(t)).contracts||[]}catch(o){return this.logger.error(`Error fetching contracts: ${o.message}`),null}}async getContract(e,t){this.logger.info(`Getting contract ${e}`);let r=`/api/v1/contracts/${e}`;t&&(r+=`?timestamp=${t}`);try{return await this._requestWithRetry(r)}catch(n){return this.logger.error(`Error fetching contract ${e}: ${n.message}`),null}}async getContractResults(e){this.logger.info("Getting contract results from the network");let t="/api/v1/contracts/results";const r=new URLSearchParams;e?.from&&r.append("from",e.from),e?.blockHash&&r.append("block.hash",e.blockHash),e?.blockNumber&&r.append("block.number",e.blockNumber),void 0!==e?.internal&&r.append("internal",e.internal.toString()),e?.limit&&r.append("limit",e.limit.toString()),e?.order&&r.append("order",e.order),e?.timestamp&&r.append("timestamp",e.timestamp),e?.transactionIndex&&r.append("transaction.index",e.transactionIndex.toString());const n=r.toString();n&&(t+=`?${n}`);try{return(await this._requestWithRetry(t)).results||[]}catch(o){return this.logger.error(`Error fetching contract results: ${o.message}`),null}}async getContractResult(e,t){this.logger.info(`Getting contract result for ${e}`);let r=`/api/v1/contracts/results/${e}`;void 0!==t&&(r+=`?nonce=${t}`);try{return await this._requestWithRetry(r)}catch(n){return this.logger.error(`Error fetching contract result for ${e}: ${n.message}`),null}}async getContractResultsByContract(e,t){this.logger.info(`Getting contract results for contract ${e}`);let r=`/api/v1/contracts/${e}/results`;const n=new URLSearchParams;t?.blockHash&&n.append("block.hash",t.blockHash),t?.blockNumber&&n.append("block.number",t.blockNumber),t?.from&&n.append("from",t.from),void 0!==t?.internal&&n.append("internal",t.internal.toString()),t?.limit&&n.append("limit",t.limit.toString()),t?.order&&n.append("order",t.order),t?.timestamp&&n.append("timestamp",t.timestamp),t?.transactionIndex&&n.append("transaction.index",t.transactionIndex.toString());const o=n.toString();o&&(r+=`?${o}`);try{return(await this._requestWithRetry(r)).results||[]}catch(i){return this.logger.error(`Error fetching contract results for ${e}: ${i.message}`),null}}async getContractState(e,t){this.logger.info(`Getting contract state for ${e}`);let r=`/api/v1/contracts/${e}/state`;const n=new URLSearchParams;t?.limit&&n.append("limit",t.limit.toString()),t?.order&&n.append("order",t.order),t?.slot&&n.append("slot",t.slot),t?.timestamp&&n.append("timestamp",t.timestamp);const o=n.toString();o&&(r+=`?${o}`);try{return(await this._requestWithRetry(r)).state||[]}catch(i){return this.logger.error(`Error fetching contract state for ${e}: ${i.message}`),null}}async getContractActions(e,t){this.logger.info(`Getting contract actions for ${e}`);let r=`/api/v1/contracts/results/${e}/actions`;const n=new URLSearchParams;t?.index&&n.append("index",t.index),t?.limit&&n.append("limit",t.limit.toString()),t?.order&&n.append("order",t.order);const o=n.toString();o&&(r+=`?${o}`);try{return(await this._requestWithRetry(r)).actions||[]}catch(i){return this.logger.error(`Error fetching contract actions for ${e}: ${i.message}`),null}}async getContractLogs(e){this.logger.info("Getting contract logs from the network");let t="/api/v1/contracts/results/logs";const r=new URLSearchParams;e?.index&&r.append("index",e.index),e?.limit&&r.append("limit",e.limit.toString()),e?.order&&r.append("order",e.order),e?.timestamp&&r.append("timestamp",e.timestamp),e?.topic0&&r.append("topic0",e.topic0),e?.topic1&&r.append("topic1",e.topic1),e?.topic2&&r.append("topic2",e.topic2),e?.topic3&&r.append("topic3",e.topic3),e?.transactionHash&&r.append("transaction.hash",e.transactionHash);const n=r.toString();n&&(t+=`?${n}`);try{return(await this._requestWithRetry(t)).logs||[]}catch(o){return this.logger.error(`Error fetching contract logs: ${o.message}`),null}}async getContractLogsByContract(e,t){this.logger.info(`Getting contract logs for contract ${e}`);let r=`/api/v1/contracts/${e}/results/logs`;const n=new URLSearchParams;t?.index&&n.append("index",t.index),t?.limit&&n.append("limit",t.limit.toString()),t?.order&&n.append("order",t.order),t?.timestamp&&n.append("timestamp",t.timestamp),t?.topic0&&n.append("topic0",t.topic0),t?.topic1&&n.append("topic1",t.topic1),t?.topic2&&n.append("topic2",t.topic2),t?.topic3&&n.append("topic3",t.topic3);const o=n.toString();o&&(r+=`?${o}`);try{return(await this._requestWithRetry(r)).logs||[]}catch(i){return this.logger.error(`Error fetching contract logs for ${e}: ${i.message}`),null}}async getNftInfo(e,t){this.logger.info(`Getting NFT info for ${e}/${t}`);const r=`/api/v1/tokens/${e}/nfts/${t}`;try{return await this._requestWithRetry(r)}catch(n){return this.logger.error(`Error fetching NFT info for ${e}/${t}: ${n.message}`),null}}async getNftsByToken(e,t){this.logger.info(`Getting NFTs for token ${e}`);let r=`/api/v1/tokens/${e}/nfts`;const n=new URLSearchParams;t?.accountId&&n.append("account.id",t.accountId),t?.limit&&n.append("limit",t.limit.toString()),t?.order&&n.append("order",t.order),t?.serialNumber&&n.append("serialnumber",t.serialNumber);const o=n.toString();o&&(r+=`?${o}`);try{return(await this._requestWithRetry(r)).nfts||[]}catch(i){return this.logger.error(`Error fetching NFTs for token ${e}: ${i.message}`),null}}async getNetworkInfo(){this.logger.info("Getting network information");try{return await this._requestWithRetry("/api/v1/network/nodes")}catch(e){return this.logger.error(`Error fetching network info: ${e.message}`),null}}async getNetworkFees(e){this.logger.info("Getting network fees");let t="/api/v1/network/fees";e&&(t+=`?timestamp=${e}`);try{return await this._requestWithRetry(t)}catch(r){return this.logger.error(`Error fetching network fees: ${r.message}`),null}}async getNetworkSupply(e){this.logger.info("Getting network supply");let t="/api/v1/network/supply";e&&(t+=`?timestamp=${e}`);try{return await this._requestWithRetry(t)}catch(r){return this.logger.error(`Error fetching network supply: ${r.message}`),null}}async getNetworkStake(e){this.logger.info("Getting network stake");let t="/api/v1/network/stake";e&&(t+=`?timestamp=${e}`);try{return await this._requestWithRetry(t)}catch(r){return this.logger.error(`Error fetching network stake: ${r.message}`),null}}async getOpcodeTraces(e,t){this.logger.info(`Getting opcode traces for ${e}`);let r=`/api/v1/contracts/results/${e}/opcodes`;const n=new URLSearchParams;void 0!==t?.stack&&n.append("stack",t.stack.toString()),void 0!==t?.memory&&n.append("memory",t.memory.toString()),void 0!==t?.storage&&n.append("storage",t.storage.toString());const o=n.toString();o&&(r+=`?${o}`);try{return await this._requestWithRetry(r)}catch(i){return this.logger.error(`Error fetching opcode traces for ${e}: ${i.message}`),null}}}const NOT_INITIALIZED_ERROR="HederaAgentKit not initialized. Call await kit.initialize() first.";class HederaAgentKit{constructor(e,t,r="returnBytes",n,o=!0,i=ModelCapability.MEDIUM,s,a,c=!1){this.isInitialized=!1,this.signer=e,this.network=this.signer.getNetwork();const u=c||"true"===process$1.env.DISABLE_LOGS;if(this.logger=new Logger({level:u?"silent":"info",module:"HederaAgentKit",silent:u}),"mainnet"===this.network)this.client=i$1.forMainnet();else{if("testnet"!==this.network)throw new Error(`Unsupported network type: ${this.network}`);this.client=i$1.forTestnet()}this.client.setOperator(this.signer.getAccountId(),this.signer.getOperatorPrivateKey()),this.mirrorNode=new HederaMirrorNode(this.network,new Logger({level:u?"silent":"info",module:"HederaAgentKit-MirrorNode",silent:u}),a),this.pluginConfigInternal=t,this.loadedPlugins=[],this.aggregatedTools=[],this.operationalMode=r,this.userAccountId=n,this.scheduleUserTransactionsInBytesMode=o,this.modelCapability=i,this.modelName=s}async initialize(){if(this.isInitialized)return void this.logger.warn("HederaAgentKit is already initialized.");this.loadedPlugins=[];const e={logger:this.logger,config:{...this.pluginConfigInternal?.appConfig||{},hederaKit:this,modelCapability:this.modelCapability},client:{getNetwork:()=>this.network}},t=[],r=new Set;if(this.pluginConfigInternal?.plugins)for(const i of this.pluginConfigInternal.plugins)r.has(i.id)||(t.push(i),r.add(i.id));for(const i of t)try{this.logger.info(`Initializing plugin: ${i.name}`),await i.initialize(e),this.loadedPlugins.push(i),this.logger.info(`Successfully initialized and added plugin: ${i.name}`)}catch(o){this.logger.error(`Failed to initialize plugin ${i.name}: ${o instanceof Error?o.message:String(o)}`)}const n=this.loadedPlugins.flatMap(e=>e.getTools());this.aggregatedTools=[...n],this.isInitialized=!0,this.logger.info("HederaAgentKit initialized successfully with all tools aggregated.")}async getOperator(){return{id:this.signer.getAccountId(),publicKey:await this.signer.getPublicKey()}}getAggregatedLangChainTools(){if(!this.isInitialized)throw new Error("HederaAgentKit not initialized. Call await kit.initialize() before accessing tools.");return this.aggregatedTools}hcs(){if(!this.isInitialized)throw new Error(NOT_INITIALIZED_ERROR);return new HcsBuilder(this)}hts(){if(!this.isInitialized)throw new Error(NOT_INITIALIZED_ERROR);return new HtsBuilder(this)}accounts(){if(!this.isInitialized)throw new Error(NOT_INITIALIZED_ERROR);return new AccountBuilder(this)}scs(){if(!this.isInitialized)throw new Error(NOT_INITIALIZED_ERROR);return new ScsBuilder(this)}query(){if(!this.isInitialized)throw new Error(NOT_INITIALIZED_ERROR);return new QueryBuilder(this)}async getTransactionReceipt(e){const t="string"==typeof e?i$c.fromString(e):e;try{return await t.getReceipt(this.client)}catch(r){throw this.logger.error(`Failed to get transaction receipt for ${t.toString()}: ${r instanceof Error?r.message:String(r)}`),r}}async signScheduledTransaction(e){if(!this.isInitialized)throw new Error("HederaAgentKit not initialized. Call await kit.initialize() first.");this.logger.info(`Attempting to sign scheduled transaction: ${e.scheduleId.toString()}`);const t="string"==typeof e.scheduleId?o$k.fromString(e.scheduleId):e.scheduleId,r=(new u$3).setScheduleId(t);let n;e.memo&&r.setTransactionMemo(e.memo),r.transactionId||r.freezeWith(this.client),n=r.transactionId?.toString();try{return{success:!0,receipt:await this.signer.signAndExecuteTransaction(r),transactionId:n}}catch(o){return this.logger.error(`Failed to sign scheduled transaction ${e.scheduleId.toString()}: ${o instanceof Error?o.message:String(o)}`),{success:!1,error:o instanceof Error?o.message:String(o),transactionId:n}}}}function __classPrivateFieldSet(e,t,r,n,o){if("function"==typeof t||!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,r),r}function __classPrivateFieldGet(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}let uuid4=function(){const{crypto:e}=globalThis;if(e?.randomUUID)return uuid4=e.randomUUID.bind(e),e.randomUUID();const t=new Uint8Array(1),r=e?()=>e.getRandomValues(t)[0]:()=>255*Math.random()&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e=>(+e^r()&15>>+e/4).toString(16))};function isAbortError(e){return"object"==typeof e&&null!==e&&("name"in e&&"AbortError"===e.name||"message"in e&&String(e.message).includes("FetchRequestCanceledException"))}const castToError=e=>{if(e instanceof Error)return e;if("object"==typeof e&&null!==e){try{if("[object Error]"===Object.prototype.toString.call(e)){const t=new Error(e.message,e.cause?{cause:e.cause}:{});return e.stack&&(t.stack=e.stack),e.cause&&!t.cause&&(t.cause=e.cause),e.name&&(t.name=e.name),t}}catch{}try{return new Error(JSON.stringify(e))}catch{}}return new Error(e)};class OpenAIError extends Error{}class APIError extends OpenAIError{constructor(e,t,r,n){super(`${APIError.makeMessage(e,t,r)}`),this.status=e,this.headers=n,this.requestID=n?.get("x-request-id"),this.error=t;const o=t;this.code=o?.code,this.param=o?.param,this.type=o?.type}static makeMessage(e,t,r){const n=t?.message?"string"==typeof t.message?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&n?`${e} ${n}`:e?`${e} status code (no body)`:n||"(no status code or body)"}static generate(e,t,r,n){if(!e||!n)return new APIConnectionError({message:r,cause:castToError(t)});const o=t?.error;return 400===e?new BadRequestError(e,o,r,n):401===e?new AuthenticationError(e,o,r,n):403===e?new PermissionDeniedError(e,o,r,n):404===e?new NotFoundError(e,o,r,n):409===e?new ConflictError(e,o,r,n):422===e?new UnprocessableEntityError(e,o,r,n):429===e?new RateLimitError(e,o,r,n):e>=500?new InternalServerError(e,o,r,n):new APIError(e,o,r,n)}}class APIUserAbortError extends APIError{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class APIConnectionError extends APIError{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class APIConnectionTimeoutError extends APIConnectionError{constructor({message:e}={}){super({message:e??"Request timed out."})}}class BadRequestError extends APIError{}class AuthenticationError extends APIError{}class PermissionDeniedError extends APIError{}class NotFoundError extends APIError{}class ConflictError extends APIError{}class UnprocessableEntityError extends APIError{}class RateLimitError extends APIError{}class InternalServerError extends APIError{}class LengthFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the length limit was reached")}}class ContentFilterFinishReasonError extends OpenAIError{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class InvalidWebhookSignatureError extends Error{constructor(e){super(e)}}const startsWithSchemeRegexp=/^[a-z][a-z0-9+.-]*:/i,isAbsoluteURL=e=>startsWithSchemeRegexp.test(e);let isArray$1=e=>(isArray$1=Array.isArray,isArray$1(e)),isReadonlyArray=isArray$1;function maybeObj(e){return"object"!=typeof e?{}:e??{}}function isEmptyObj$1(e){if(!e)return!0;for(const t in e)return!1;return!0}function hasOwn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function isObj(e){return null!=e&&"object"==typeof e&&!Array.isArray(e)}const validatePositiveInteger=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new OpenAIError(`${e} must be an integer`);if(t<0)throw new OpenAIError(`${e} must be a positive integer`);return t},safeJSON=e=>{try{return JSON.parse(e)}catch(t){return}},sleep=e=>new Promise(t=>setTimeout(t,e)),VERSION="5.8.2",isRunningInBrowser=()=>"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator;function getDetectedPlatform(){return"undefined"!=typeof Deno&&null!=Deno.build?"deno":"undefined"!=typeof EdgeRuntime?"edge":"[object process]"===Object.prototype.toString.call(void 0!==globalThis.process?globalThis.process:0)?"node":"unknown"}const getPlatformProperties=()=>{const e=getDetectedPlatform();if("deno"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(Deno.build.os),"X-Stainless-Arch":normalizeArch(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":"string"==typeof Deno.version?Deno.version:Deno.version?.deno??"unknown"};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if("node"===e)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":normalizePlatform(globalThis.process.platform??"unknown"),"X-Stainless-Arch":normalizeArch(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const t=getBrowserInfo();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function getBrowserInfo(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:r}of e){const e=r.exec(navigator.userAgent);if(e){return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}}return null}const normalizeArch=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",normalizePlatform=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let _platformHeaders;const getPlatformHeaders=()=>_platformHeaders??(_platformHeaders=getPlatformProperties());function getDefaultFetch(){if("undefined"!=typeof fetch)return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function makeReadableStream(...e){const t=globalThis.ReadableStream;if(void 0===t)throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...e)}function ReadableStreamFrom(e){let t=Symbol.asyncIterator in e?e[Symbol.asyncIterator]():e[Symbol.iterator]();return makeReadableStream({start(){},async pull(e){const{done:r,value:n}=await t.next();r?e.close():e.enqueue(n)},async cancel(){await(t.return?.())}})}function ReadableStreamToAsyncIterable(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return e?.done&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function CancelReadableStream(e){if(null===e||"object"!=typeof e)return;if(e[Symbol.asyncIterator])return void(await(e[Symbol.asyncIterator]().return?.()));const t=e.getReader(),r=t.cancel();t.releaseLock(),await r}const FallbackEncoder=({headers:e,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),default_format="RFC3986",default_formatter=e=>String(e),formatters={RFC1738:e=>String(e).replace(/%20/g,"+"),RFC3986:default_formatter},RFC1738="RFC1738";let has=(e,t)=>(has=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),has(e,t));const hex_table=(()=>{const e=[];for(let t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e})(),limit=1024,encode=(e,t,r,n,o)=>{if(0===e.length)return e;let i=e;if("symbol"==typeof e?i=Symbol.prototype.toString.call(e):"string"!=typeof e&&(i=String(e)),"iso-8859-1"===r)return escape(i).replace(/%u[0-9a-f]{4}/gi,function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"});let s="";for(let a=0;a<i.length;a+=limit){const e=i.length>=limit?i.slice(a,a+limit):i,t=[];for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);45===n||46===n||95===n||126===n||n>=48&&n<=57||n>=65&&n<=90||n>=97&&n<=122||o===RFC1738&&(40===n||41===n)?t[t.length]=e.charAt(r):n<128?t[t.length]=hex_table[n]:n<2048?t[t.length]=hex_table[192|n>>6]+hex_table[128|63&n]:n<55296||n>=57344?t[t.length]=hex_table[224|n>>12]+hex_table[128|n>>6&63]+hex_table[128|63&n]:(r+=1,n=65536+((1023&n)<<10|1023&e.charCodeAt(r)),t[t.length]=hex_table[240|n>>18]+hex_table[128|n>>12&63]+hex_table[128|n>>6&63]+hex_table[128|63&n])}s+=t.join("")}return s};function is_buffer(e){return!(!e||"object"!=typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}function maybe_map(e,t){if(isArray$1(e)){const r=[];for(let n=0;n<e.length;n+=1)r.push(t(e[n]));return r}return t(e)}const array_prefix_generators={brackets:e=>String(e)+"[]",comma:"comma",indices:(e,t)=>String(e)+"["+t+"]",repeat:e=>String(e)},push_to_array=function(e,t){Array.prototype.push.apply(e,isArray$1(t)?t:[t])};let toISOString;const defaults={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:encode,encodeValuesOnly:!1,format:default_format,formatter:default_formatter,indices:!1,serializeDate:e=>(toISOString??(toISOString=Function.prototype.call.bind(Date.prototype.toISOString)))(e),skipNulls:!1,strictNullHandling:!1};function is_non_nullish_primitive(e){return"string"==typeof e||"number"==typeof e||"boolean"==typeof e||"symbol"==typeof e||"bigint"==typeof e}const sentinel={};function inner_stringify(e,t,r,n,o,i,s,a,c,u,l,d,h,f,p,m,y,g){let b=e,_=g,w=0,v=!1;for(;void 0!==(_=_.get(sentinel))&&!v;){const t=_.get(e);if(w+=1,void 0!==t){if(t===w)throw new RangeError("Cyclic object value");v=!0}void 0===_.get(sentinel)&&(w=0)}if("function"==typeof u?b=u(t,b):b instanceof Date?b=h?.(b):"comma"===r&&isArray$1(b)&&(b=maybe_map(b,function(e){return e instanceof Date?h?.(e):e})),null===b){if(i)return c&&!m?c(t,defaults.encoder,y,"key",f):t;b=""}if(is_non_nullish_primitive(b)||is_buffer(b)){if(c){const e=m?t:c(t,defaults.encoder,y,"key",f);return[p?.(e)+"="+p?.(c(b,defaults.encoder,y,"value",f))]}return[p?.(t)+"="+p?.(String(b))]}const I=[];if(void 0===b)return I;let k;if("comma"===r&&isArray$1(b))m&&c&&(b=maybe_map(b,c)),k=[{value:b.length>0?b.join(",")||null:void 0}];else if(isArray$1(u))k=u;else{const e=Object.keys(b);k=l?e.sort(l):e}const T=a?String(t).replace(/\./g,"%2E"):String(t),A=n&&isArray$1(b)&&1===b.length?T+"[]":T;if(o&&isArray$1(b)&&0===b.length)return A+"[]";for(let S=0;S<k.length;++S){const t=k[S],_="object"==typeof t&&void 0!==t.value?t.value:b[t];if(s&&null===_)continue;const v=d&&a?t.replace(/\./g,"%2E"):t,T=isArray$1(b)?"function"==typeof r?r(A,v):A:A+(d?"."+v:"["+v+"]");g.set(e,w);const E=new WeakMap;E.set(sentinel,g),push_to_array(I,inner_stringify(_,T,r,n,o,i,s,a,"comma"===r&&m&&isArray$1(b)?null:c,u,l,d,h,f,p,m,y,E))}return I}function normalize_stringify_options(e=defaults){if(void 0!==e.allowEmptyArrays&&"boolean"!=typeof e.allowEmptyArrays)throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(void 0!==e.encodeDotInKeys&&"boolean"!=typeof e.encodeDotInKeys)throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");const t=e.charset||defaults.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let r=default_format;if(void 0!==e.format){if(!has(formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}const n=formatters[r];let o,i=defaults.filter;if(("function"==typeof e.filter||isArray$1(e.filter))&&(i=e.filter),o=e.arrayFormat&&e.arrayFormat in array_prefix_generators?e.arrayFormat:"indices"in e?e.indices?"indices":"repeat":defaults.arrayFormat,"commaRoundTrip"in e&&"boolean"!=typeof e.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const s=void 0===e.allowDots?!0==!!e.encodeDotInKeys||defaults.allowDots:!!e.allowDots;return{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:defaults.addQueryPrefix,allowDots:s,allowEmptyArrays:"boolean"==typeof e.allowEmptyArrays?!!e.allowEmptyArrays:defaults.allowEmptyArrays,arrayFormat:o,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:defaults.charsetSentinel,commaRoundTrip:!!e.commaRoundTrip,delimiter:void 0===e.delimiter?defaults.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:defaults.encode,encodeDotInKeys:"boolean"==typeof e.encodeDotInKeys?e.encodeDotInKeys:defaults.encodeDotInKeys,encoder:"function"==typeof e.encoder?e.encoder:defaults.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:defaults.encodeValuesOnly,filter:i,format:r,formatter:n,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:defaults.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:defaults.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:defaults.strictNullHandling}}function stringify(e,t={}){let r=e;const n=normalize_stringify_options(t);let o,i;"function"==typeof n.filter?(i=n.filter,r=i("",r)):isArray$1(n.filter)&&(i=n.filter,o=i);const s=[];if("object"!=typeof r||null===r)return"";const a=array_prefix_generators[n.arrayFormat],c="comma"===a&&n.commaRoundTrip;o||(o=Object.keys(r)),n.sort&&o.sort(n.sort);const u=new WeakMap;for(let h=0;h<o.length;++h){const e=o[h];n.skipNulls&&null===r[e]||push_to_array(s,inner_stringify(r[e],e,a,c,n.allowEmptyArrays,n.strictNullHandling,n.skipNulls,n.encodeDotInKeys,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}const l=s.join(n.delimiter);let d=!0===n.addQueryPrefix?"?":"";return n.charsetSentinel&&("iso-8859-1"===n.charset?d+="utf8=%26%2310003%3B&":d+="utf8=%E2%9C%93&"),l.length>0?d+l:""}function concatBytes(e){let t=0;for(const o of e)t+=o.length;const r=new Uint8Array(t);let n=0;for(const o of e)r.set(o,n),n+=o.length;return r}let encodeUTF8_,decodeUTF8_;function encodeUTF8(e){let t;return(encodeUTF8_??(t=new globalThis.TextEncoder,encodeUTF8_=t.encode.bind(t)))(e)}function decodeUTF8(e){let t;return(decodeUTF8_??(t=new globalThis.TextDecoder,decodeUTF8_=t.decode.bind(t)))(e)}var _LineDecoder_buffer,_LineDecoder_carriageReturnIndex;class LineDecoder{constructor(){_LineDecoder_buffer.set(this,void 0),_LineDecoder_carriageReturnIndex.set(this,void 0),__classPrivateFieldSet(this,_LineDecoder_buffer,new Uint8Array),__classPrivateFieldSet(this,_LineDecoder_carriageReturnIndex,null)}decode(e){if(null==e)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):"string"==typeof e?encodeUTF8(e):e;__classPrivateFieldSet(this,_LineDecoder_buffer,concatBytes([__classPrivateFieldGet(this,_LineDecoder_buffer,"f"),t]));const r=[];let n;for(;null!=(n=findNewlineIndex(__classPrivateFieldGet(this,_LineDecoder_buffer,"f"),__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f")));){if(n.carriage&&null==__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f")){__classPrivateFieldSet(this,_LineDecoder_carriageReturnIndex,n.index);continue}if(null!=__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f")&&(n.index!==__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f")+1||n.carriage)){r.push(decodeUTF8(__classPrivateFieldGet(this,_LineDecoder_buffer,"f").subarray(0,__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f")-1))),__classPrivateFieldSet(this,_LineDecoder_buffer,__classPrivateFieldGet(this,_LineDecoder_buffer,"f").subarray(__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f"))),__classPrivateFieldSet(this,_LineDecoder_carriageReturnIndex,null);continue}const e=null!==__classPrivateFieldGet(this,_LineDecoder_carriageReturnIndex,"f")?n.preceding-1:n.preceding,t=decodeUTF8(__classPrivateFieldGet(this,_LineDecoder_buffer,"f").subarray(0,e));r.push(t),__classPrivateFieldSet(this,_LineDecoder_buffer,__classPrivateFieldGet(this,_LineDecoder_buffer,"f").subarray(n.index)),__classPrivateFieldSet(this,_LineDecoder_carriageReturnIndex,null)}return r}flush(){return __classPrivateFieldGet(this,_LineDecoder_buffer,"f").length?this.decode("\n"):[]}}function findNewlineIndex(e,t){for(let r=t??0;r<e.length;r++){if(10===e[r])return{preceding:r,index:r+1,carriage:!1};if(13===e[r])return{preceding:r,index:r+1,carriage:!0}}return null}function findDoubleNewlineIndex(e){for(let t=0;t<e.length-1;t++){if(10===e[t]&&10===e[t+1])return t+2;if(13===e[t]&&13===e[t+1])return t+2;if(13===e[t]&&10===e[t+1]&&t+3<e.length&&13===e[t+2]&&10===e[t+3])return t+4}return-1}_LineDecoder_buffer=new WeakMap,_LineDecoder_carriageReturnIndex=new WeakMap,LineDecoder.NEWLINE_CHARS=new Set(["\n","\r"]),LineDecoder.NEWLINE_REGEXP=/\r\n|[\n\r]/g;class Stream{constructor(e,t){this.iterator=e,this.controller=t}static fromSSEResponse(e,t){let r=!1;return new Stream(async function*(){if(r)throw new OpenAIError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const r of _iterSSEMessages(e,t))if(!n)if(r.data.startsWith("[DONE]"))n=!0;else if(null===r.event||r.event.startsWith("response.")||r.event.startsWith("transcript.")){let t;try{t=JSON.parse(r.data)}catch(o){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),o}if(t&&t.error)throw new APIError(void 0,t.error,void 0,e.headers);yield t}else{let e;try{e=JSON.parse(r.data)}catch(o){throw console.error("Could not parse message into JSON:",r.data),console.error("From chunk:",r.raw),o}if("error"==r.event)throw new APIError(void 0,e.error,e.message,void 0);yield{event:r.event,data:e}}n=!0}catch(o){if(isAbortError(o))return;throw o}finally{n||t.abort()}},t)}static fromReadableStream(e,t){let r=!1;return new Stream(async function*(){if(r)throw new OpenAIError("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let n=!1;try{for await(const t of async function*(){const t=new LineDecoder,r=ReadableStreamToAsyncIterable(e);for await(const e of r)for(const r of t.decode(e))yield r;for(const e of t.flush())yield e}())n||t&&(yield JSON.parse(t));n=!0}catch(o){if(isAbortError(o))return;throw o}finally{n||t.abort()}},t)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),n=n=>({next:()=>{if(0===n.length){const n=r.next();e.push(n),t.push(n)}return n.shift()}});return[new Stream(()=>n(e),this.controller),new Stream(()=>n(t),this.controller)]}toReadableStream(){const e=this;let t;return makeReadableStream({async start(){t=e[Symbol.asyncIterator]()},async pull(e){try{const{value:r,done:n}=await t.next();if(n)return e.close();const o=encodeUTF8(JSON.stringify(r)+"\n");e.enqueue(o)}catch(r){e.error(r)}},async cancel(){await(t.return?.())}})}}async function*_iterSSEMessages(e,t){if(!e.body){if(t.abort(),void 0!==globalThis.navigator&&"ReactNative"===globalThis.navigator.product)throw new OpenAIError("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api");throw new OpenAIError("Attempted to iterate over a response with no body")}const r=new SSEDecoder,n=new LineDecoder,o=ReadableStreamToAsyncIterable(e.body);for await(const i of iterSSEChunks(o))for(const e of n.decode(i)){const t=r.decode(e);t&&(yield t)}for(const i of n.flush()){const e=r.decode(i);e&&(yield e)}}async function*iterSSEChunks(e){let t=new Uint8Array;for await(const r of e){if(null==r)continue;const e=r instanceof ArrayBuffer?new Uint8Array(r):"string"==typeof r?encodeUTF8(r):r;let n,o=new Uint8Array(t.length+e.length);for(o.set(t),o.set(e,t.length),t=o;-1!==(n=findDoubleNewlineIndex(t));)yield t.slice(0,n),t=t.slice(n)}t.length>0&&(yield t)}class SSEDecoder{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=partition(e,":");return n.startsWith(" ")&&(n=n.substring(1)),"event"===t?this.event=n:"data"===t&&this.data.push(n),null}}function partition(e,t){const r=e.indexOf(t);return-1!==r?[e.substring(0,r),t,e.substring(r+t.length)]:[e,"",""]}const levelNumbers={off:0,error:200,warn:300,info:400,debug:500},parseLogLevel=(e,t,r)=>{if(e)return hasOwn(levelNumbers,e)?e:void loggerFor(r).warn(`${t} was set to ${JSON.stringify(e)}, expected one of ${JSON.stringify(Object.keys(levelNumbers))}`)};function noop(){}function makeLogFn(e,t,r){return!t||levelNumbers[e]>levelNumbers[r]?noop:t[e].bind(t)}const noopLogger={error:noop,warn:noop,info:noop,debug:noop};let cachedLoggers=new WeakMap;function loggerFor(e){const t=e.logger,r=e.logLevel??"off";if(!t)return noopLogger;const n=cachedLoggers.get(t);if(n&&n[0]===r)return n[1];const o={error:makeLogFn("error",t,r),warn:makeLogFn("warn",t,r),info:makeLogFn("info",t,r),debug:makeLogFn("debug",t,r)};return cachedLoggers.set(t,[r,o]),o}const formatRequestDetails=e=>(e.options&&(e.options={...e.options},delete e.options.headers),e.headers&&(e.headers=Object.fromEntries((e.headers instanceof Headers?[...e.headers]:Object.entries(e.headers)).map(([e,t])=>[e,"authorization"===e.toLowerCase()||"cookie"===e.toLowerCase()||"set-cookie"===e.toLowerCase()?"***":t]))),"retryOfRequestLogID"in e&&(e.retryOfRequestLogID&&(e.retryOf=e.retryOfRequestLogID),delete e.retryOfRequestLogID),e);async function defaultParseResponse(e,t){const{response:r,requestLogID:n,retryOfRequestLogID:o,startTime:i}=t,s=await(async()=>{if(t.options.stream)return loggerFor(e).debug("response",r.status,r.url,r.headers,r.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(r,t.controller):Stream.fromSSEResponse(r,t.controller);if(204===r.status)return null;if(t.options.__binaryResponse)return r;const n=r.headers.get("content-type"),o=n?.split(";")[0]?.trim();if(o?.includes("application/json")||o?.endsWith("+json")){return addRequestID(await r.json(),r)}return await r.text()})();return loggerFor(e).debug(`[${n}] response parsed`,formatRequestDetails({retryOfRequestLogID:o,url:r.url,status:r.status,body:s,durationMs:Date.now()-i})),s}function addRequestID(e,t){return!e||"object"!=typeof e||Array.isArray(e)?e:Object.defineProperty(e,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}var _APIPromise_client,_AbstractPage_client;class APIPromise extends Promise{constructor(e,t,r=defaultParseResponse){super(e=>{e(null)}),this.responsePromise=t,this.parseResponse=r,_APIPromise_client.set(this,void 0),__classPrivateFieldSet(this,_APIPromise_client,e)}_thenUnwrap(e){return new APIPromise(__classPrivateFieldGet(this,_APIPromise_client,"f"),this.responsePromise,async(t,r)=>addRequestID(e(await this.parseResponse(t,r),r),r.response))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t,request_id:t.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(__classPrivateFieldGet(this,_APIPromise_client,"f"),e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}_APIPromise_client=new WeakMap;class AbstractPage{constructor(e,t,r,n){_AbstractPage_client.set(this,void 0),__classPrivateFieldSet(this,_AbstractPage_client,e),this.options=n,this.response=t,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageRequestOptions()}async getNextPage(){const e=this.nextPageRequestOptions();if(!e)throw new OpenAIError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await __classPrivateFieldGet(this,_AbstractPage_client,"f").requestAPIList(this.constructor,e)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(_AbstractPage_client=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}class PagePromise extends APIPromise{constructor(e,t,r){super(e,t,async(e,t)=>new r(e,t.response,await defaultParseResponse(e,t),t.options))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}class Page extends AbstractPage{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.object=r.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class CursorPage extends AbstractPage{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data||[],this.has_more=r.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return!1!==this.has_more&&super.hasNextPage()}nextPageRequestOptions(){const e=this.getPaginatedItems(),t=e[e.length-1]?.id;return t?{...this.options,query:{...maybeObj(this.options.query),after:t}}:null}}const checkFileSupport=()=>{if("undefined"==typeof File){const{process:e}=globalThis,t="string"==typeof e?.versions?.node&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function makeFile(e,t,r){return checkFileSupport(),new File(e,t??"unknown_file",r)}function getName(e){return("object"==typeof e&&null!==e&&("name"in e&&e.name&&String(e.name)||"url"in e&&e.url&&String(e.url)||"filename"in e&&e.filename&&String(e.filename)||"path"in e&&e.path&&String(e.path))||"").split(/[\\/]/).pop()||void 0}const isAsyncIterable$1=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator],multipartFormRequestOptions=async(e,t)=>({...e,body:await createForm(e.body,t)}),supportsFormDataMap=new WeakMap;function supportsFormData(e){const t="function"==typeof e?e:e.fetch,r=supportsFormDataMap.get(t);if(r)return r;const n=(async()=>{try{const e="Response"in t?t.Response:(await t("data:,")).constructor,r=new FormData;return r.toString()!==await new e(r).text()}catch{return!0}})();return supportsFormDataMap.set(t,n),n}const createForm=async(e,t)=>{if(!(await supportsFormData(t)))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const r=new FormData;return await Promise.all(Object.entries(e||{}).map(([e,t])=>addFormValue(r,e,t))),r},isNamedBlob=e=>e instanceof Blob&&"name"in e,addFormValue=async(e,t,r)=>{if(void 0!==r){if(null==r)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof r||"number"==typeof r||"boolean"==typeof r)e.append(t,String(r));else if(r instanceof Response)e.append(t,makeFile([await r.blob()],getName(r)));else if(isAsyncIterable$1(r))e.append(t,makeFile([await new Response(ReadableStreamFrom(r)).blob()],getName(r)));else if(isNamedBlob(r))e.append(t,r,getName(r));else if(Array.isArray(r))await Promise.all(r.map(r=>addFormValue(e,t+"[]",r)));else{if("object"!=typeof r)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${r} instead`);await Promise.all(Object.entries(r).map(([r,n])=>addFormValue(e,`${t}[${r}]`,n)))}}},isBlobLike=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,isFileLike=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&isBlobLike(e),isResponseLike=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob;async function toFile(e,t,r){if(checkFileSupport(),e=await e,isFileLike(e))return e instanceof File?e:makeFile([await e.arrayBuffer()],e.name);if(isResponseLike(e)){const n=await e.blob();return t||(t=new URL(e.url).pathname.split(/[\\/]/).pop()),makeFile(await getBytes(n),t,r)}const n=await getBytes(e);if(t||(t=getName(e)),!r?.type){const e=n.find(e=>"object"==typeof e&&"type"in e&&e.type);"string"==typeof e&&(r={...r,type:e})}return makeFile(n,t,r)}async function getBytes(e){let t=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)t.push(e);else if(isBlobLike(e))t.push(e instanceof Blob?e:await e.arrayBuffer());else{if(!isAsyncIterable$1(e)){const t=e?.constructor?.name;throw new Error(`Unexpected data type: ${typeof e}${t?`; constructor: ${t}`:""}${propsForError(e)}`)}for await(const r of e)t.push(...await getBytes(r))}return t}function propsForError(e){if("object"!=typeof e||null===e)return"";return`; props: [${Object.getOwnPropertyNames(e).map(e=>`"${e}"`).join(", ")}]`}class APIResource{constructor(e){this._client=e}}function encodeURIPath(e){return e.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const createPathTagFunction=(e=encodeURIPath)=>function(t,...r){if(1===t.length)return t[0];let n=!1;const o=t.reduce((t,o,i)=>(/[?#]/.test(o)&&(n=!0),t+o+(i===r.length?"":(n?encodeURIComponent:e)(String(r[i])))),""),i=o.split(/[?#]/,1)[0],s=[],a=/(?<=^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let c;for(;null!==(c=a.exec(i));)s.push({start:c.index,length:c[0].length});if(s.length>0){let e=0;const t=s.reduce((t,r)=>{const n=" ".repeat(r.start-e),o="^".repeat(r.length);return e=r.start+r.length,t+n+o},"");throw new OpenAIError(`Path parameters result in path with invalid segments:\n${o}\n${t}`)}return o},path=createPathTagFunction(encodeURIPath);let Messages$1=class extends APIResource{list(e,t={},r){return this._client.getAPIList(path`/chat/completions/${e}/messages`,CursorPage,{query:t,...r})}};function isRunnableFunctionWithParse(e){return"function"==typeof e.parse}const isAssistantMessage=e=>"assistant"===e?.role,isToolMessage=e=>"tool"===e?.role;var _EventStream_instances,_EventStream_connectedPromise,_EventStream_resolveConnectedPromise,_EventStream_rejectConnectedPromise,_EventStream_endPromise,_EventStream_resolveEndPromise,_EventStream_rejectEndPromise,_EventStream_listeners,_EventStream_ended,_EventStream_errored,_EventStream_aborted,_EventStream_catchingPromiseCreated,_EventStream_handleError,_AbstractChatCompletionRunner_instances,_AbstractChatCompletionRunner_getFinalContent,_AbstractChatCompletionRunner_getFinalMessage,_AbstractChatCompletionRunner_getFinalFunctionToolCall,_AbstractChatCompletionRunner_getFinalFunctionToolCallResult,_AbstractChatCompletionRunner_calculateTotalUsage,_AbstractChatCompletionRunner_validateParams,_AbstractChatCompletionRunner_stringifyFunctionCallResult;class EventStream{constructor(){_EventStream_instances.add(this),this.controller=new AbortController,_EventStream_connectedPromise.set(this,void 0),_EventStream_resolveConnectedPromise.set(this,()=>{}),_EventStream_rejectConnectedPromise.set(this,()=>{}),_EventStream_endPromise.set(this,void 0),_EventStream_resolveEndPromise.set(this,()=>{}),_EventStream_rejectEndPromise.set(this,()=>{}),_EventStream_listeners.set(this,{}),_EventStream_ended.set(this,!1),_EventStream_errored.set(this,!1),_EventStream_aborted.set(this,!1),_EventStream_catchingPromiseCreated.set(this,!1),__classPrivateFieldSet(this,_EventStream_connectedPromise,new Promise((e,t)=>{__classPrivateFieldSet(this,_EventStream_resolveConnectedPromise,e,"f"),__classPrivateFieldSet(this,_EventStream_rejectConnectedPromise,t,"f")})),__classPrivateFieldSet(this,_EventStream_endPromise,new Promise((e,t)=>{__classPrivateFieldSet(this,_EventStream_resolveEndPromise,e,"f"),__classPrivateFieldSet(this,_EventStream_rejectEndPromise,t,"f")})),__classPrivateFieldGet(this,_EventStream_connectedPromise,"f").catch(()=>{}),__classPrivateFieldGet(this,_EventStream_endPromise,"f").catch(()=>{})}_run(e){setTimeout(()=>{e().then(()=>{this._emitFinal(),this._emit("end")},__classPrivateFieldGet(this,_EventStream_instances,"m",_EventStream_handleError).bind(this))},0)}_connected(){this.ended||(__classPrivateFieldGet(this,_EventStream_resolveConnectedPromise,"f").call(this),this._emit("connect"))}get ended(){return __classPrivateFieldGet(this,_EventStream_ended,"f")}get errored(){return __classPrivateFieldGet(this,_EventStream_errored,"f")}get aborted(){return __classPrivateFieldGet(this,_EventStream_aborted,"f")}abort(){this.controller.abort()}on(e,t){return(__classPrivateFieldGet(this,_EventStream_listeners,"f")[e]||(__classPrivateFieldGet(this,_EventStream_listeners,"f")[e]=[])).push({listener:t}),this}off(e,t){const r=__classPrivateFieldGet(this,_EventStream_listeners,"f")[e];if(!r)return this;const n=r.findIndex(e=>e.listener===t);return n>=0&&r.splice(n,1),this}once(e,t){return(__classPrivateFieldGet(this,_EventStream_listeners,"f")[e]||(__classPrivateFieldGet(this,_EventStream_listeners,"f")[e]=[])).push({listener:t,once:!0}),this}emitted(e){return new Promise((t,r)=>{__classPrivateFieldSet(this,_EventStream_catchingPromiseCreated,!0),"error"!==e&&this.once("error",r),this.once(e,t)})}async done(){__classPrivateFieldSet(this,_EventStream_catchingPromiseCreated,!0),await __classPrivateFieldGet(this,_EventStream_endPromise,"f")}_emit(e,...t){if(__classPrivateFieldGet(this,_EventStream_ended,"f"))return;"end"===e&&(__classPrivateFieldSet(this,_EventStream_ended,!0),__classPrivateFieldGet(this,_EventStream_resolveEndPromise,"f").call(this));const r=__classPrivateFieldGet(this,_EventStream_listeners,"f")[e];if(r&&(__classPrivateFieldGet(this,_EventStream_listeners,"f")[e]=r.filter(e=>!e.once),r.forEach(({listener:e})=>e(...t))),"abort"===e){const e=t[0];return __classPrivateFieldGet(this,_EventStream_catchingPromiseCreated,"f")||r?.length||Promise.reject(e),__classPrivateFieldGet(this,_EventStream_rejectConnectedPromise,"f").call(this,e),__classPrivateFieldGet(this,_EventStream_rejectEndPromise,"f").call(this,e),void this._emit("end")}if("error"===e){const e=t[0];__classPrivateFieldGet(this,_EventStream_catchingPromiseCreated,"f")||r?.length||Promise.reject(e),__classPrivateFieldGet(this,_EventStream_rejectConnectedPromise,"f").call(this,e),__classPrivateFieldGet(this,_EventStream_rejectEndPromise,"f").call(this,e),this._emit("end")}}_emitFinal(){}}function makeParseableResponseFormat$1(e,t){const r={...e};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),r}function isAutoParsableResponseFormat(e){return"auto-parseable-response-format"===e?.$brand}function isAutoParsableTool$1(e){return"auto-parseable-tool"===e?.$brand}function maybeParseChatCompletion(e,t){return t&&hasAutoParseableInput$1(t)?parseChatCompletion(e,t):{...e,choices:e.choices.map(e=>({...e,message:{...e.message,parsed:null,...e.message.tool_calls?{tool_calls:e.message.tool_calls}:void 0}}))}}function parseChatCompletion(e,t){const r=e.choices.map(e=>{if("length"===e.finish_reason)throw new LengthFinishReasonError;if("content_filter"===e.finish_reason)throw new ContentFilterFinishReasonError;return{...e,message:{...e.message,...e.message.tool_calls?{tool_calls:e.message.tool_calls?.map(e=>parseToolCall$2(t,e))??void 0}:void 0,parsed:e.message.content&&!e.message.refusal?parseResponseFormat(t,e.message.content):null}}});return{...e,choices:r}}function parseResponseFormat(e,t){if("json_schema"!==e.response_format?.type)return null;if("json_schema"===e.response_format?.type){if("$parseRaw"in e.response_format){return e.response_format.$parseRaw(t)}return JSON.parse(t)}return null}function parseToolCall$2(e,t){const r=e.tools?.find(e=>e.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:isAutoParsableTool$1(r)?r.$parseRaw(t.function.arguments):r?.function.strict?JSON.parse(t.function.arguments):null}}}function shouldParseToolCall(e,t){if(!e)return!1;const r=e.tools?.find(e=>e.function?.name===t.function.name);return isAutoParsableTool$1(r)||r?.function.strict||!1}function hasAutoParseableInput$1(e){return!!isAutoParsableResponseFormat(e.response_format)||(e.tools?.some(e=>isAutoParsableTool$1(e)||"function"===e.type&&!0===e.function.strict)??!1)}function validateInputTools(e){for(const t of e??[]){if("function"!==t.type)throw new OpenAIError(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(!0!==t.function.strict)throw new OpenAIError(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}_EventStream_connectedPromise=new WeakMap,_EventStream_resolveConnectedPromise=new WeakMap,_EventStream_rejectConnectedPromise=new WeakMap,_EventStream_endPromise=new WeakMap,_EventStream_resolveEndPromise=new WeakMap,_EventStream_rejectEndPromise=new WeakMap,_EventStream_listeners=new WeakMap,_EventStream_ended=new WeakMap,_EventStream_errored=new WeakMap,_EventStream_aborted=new WeakMap,_EventStream_catchingPromiseCreated=new WeakMap,_EventStream_instances=new WeakSet,_EventStream_handleError=function(e){if(__classPrivateFieldSet(this,_EventStream_errored,!0),e instanceof Error&&"AbortError"===e.name&&(e=new APIUserAbortError),e instanceof APIUserAbortError)return __classPrivateFieldSet(this,_EventStream_aborted,!0),this._emit("abort",e);if(e instanceof OpenAIError)return this._emit("error",e);if(e instanceof Error){const t=new OpenAIError(e.message);return t.cause=e,this._emit("error",t)}return this._emit("error",new OpenAIError(String(e)))};const DEFAULT_MAX_CHAT_COMPLETIONS=10;class AbstractChatCompletionRunner extends EventStream{constructor(){super(...arguments),_AbstractChatCompletionRunner_instances.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(e){this._chatCompletions.push(e),this._emit("chatCompletion",e);const t=e.choices[0]?.message;return t&&this._addMessage(t),e}_addMessage(e,t=!0){if("content"in e||(e.content=null),this.messages.push(e),t)if(this._emit("message",e),isToolMessage(e)&&e.content)this._emit("functionToolCallResult",e.content);else if(isAssistantMessage(e)&&e.tool_calls)for(const r of e.tool_calls)"function"===r.type&&this._emit("functionToolCall",r.function)}async finalChatCompletion(){await this.done();const e=this._chatCompletions[this._chatCompletions.length-1];if(!e)throw new OpenAIError("stream ended without producing a ChatCompletion");return e}async finalContent(){return await this.done(),__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this)}async finalMessage(){return await this.done(),__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this)}async finalFunctionToolCall(){return await this.done(),__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionToolCall).call(this)}async finalFunctionToolCallResult(){return await this.done(),__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionToolCallResult).call(this)}async totalUsage(){return await this.done(),__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const e=this._chatCompletions[this._chatCompletions.length-1];e&&this._emit("finalChatCompletion",e);const t=__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this);t&&this._emit("finalMessage",t);const r=__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalContent).call(this);r&&this._emit("finalContent",r);const n=__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionToolCall).call(this);n&&this._emit("finalFunctionToolCall",n);const o=__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalFunctionToolCallResult).call(this);null!=o&&this._emit("finalFunctionToolCallResult",o),this._chatCompletions.some(e=>e.usage)&&this._emit("totalUsage",__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_calculateTotalUsage).call(this))}async _createChatCompletion(e,t,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_validateParams).call(this,t);const o=await e.chat.completions.create({...t,stream:!1},{...r,signal:this.controller.signal});return this._connected(),this._addChatCompletion(parseChatCompletion(o,t))}async _runChatCompletion(e,t,r){for(const n of t.messages)this._addMessage(n,!1);return await this._createChatCompletion(e,t,r)}async _runTools(e,t,r){const n="tool",{tool_choice:o="auto",stream:i,...s}=t,a="string"!=typeof o&&o?.function?.name,{maxChatCompletions:c=DEFAULT_MAX_CHAT_COMPLETIONS}=r||{},u=t.tools.map(e=>{if(isAutoParsableTool$1(e)){if(!e.$callback)throw new OpenAIError("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:e.$callback,name:e.function.name,description:e.function.description||"",parameters:e.function.parameters,parse:e.$parseRaw,strict:!0}}}return e}),l={};for(const f of u)"function"===f.type&&(l[f.function.name||f.function.function.name]=f.function);const d="tools"in t?u.map(e=>"function"===e.type?{type:"function",function:{name:e.function.name||e.function.function.name,parameters:e.function.parameters,description:e.function.description,strict:e.function.strict}}:e):void 0;for(const f of t.messages)this._addMessage(f,!1);for(let f=0;f<c;++f){const t=await this._createChatCompletion(e,{...s,tool_choice:o,tools:d,messages:[...this.messages]},r),i=t.choices[0]?.message;if(!i)throw new OpenAIError("missing message in ChatCompletion response");if(!i.tool_calls?.length)return;for(const e of i.tool_calls){if("function"!==e.type)continue;const t=e.id,{name:r,arguments:o}=e.function,i=l[r];if(!i){const e=`Invalid tool_call: ${JSON.stringify(r)}. Available options are: ${Object.keys(l).map(e=>JSON.stringify(e)).join(", ")}. Please try again`;this._addMessage({role:n,tool_call_id:t,content:e});continue}if(a&&a!==r){const e=`Invalid tool_call: ${JSON.stringify(r)}. ${JSON.stringify(a)} requested. Please try again`;this._addMessage({role:n,tool_call_id:t,content:e});continue}let s;try{s=isRunnableFunctionWithParse(i)?await i.parse(o):o}catch(h){const e=h instanceof Error?h.message:String(h);this._addMessage({role:n,tool_call_id:t,content:e});continue}const c=await i.function(s,this),u=__classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_stringifyFunctionCallResult).call(this,c);if(this._addMessage({role:n,tool_call_id:t,content:u}),a)return}}}}_AbstractChatCompletionRunner_instances=new WeakSet,_AbstractChatCompletionRunner_getFinalContent=function(){return __classPrivateFieldGet(this,_AbstractChatCompletionRunner_instances,"m",_AbstractChatCompletionRunner_getFinalMessage).call(this).content??null},_AbstractChatCompletionRunner_getFinalMessage=function(){let e=this.messages.length;for(;e-- >0;){const t=this.messages[e];if(isAssistantMessage(t)){return{...t,content:t.content??null,refusal:t.refusal??null}}}throw new OpenAIError("stream ended without producing a ChatCompletionMessage with role=assistant")},_AbstractChatCompletionRunner_getFinalFunctionToolCall=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(isAssistantMessage(t)&&t?.tool_calls?.length)return t.tool_calls.at(-1)?.function}},_AbstractChatCompletionRunner_getFinalFunctionToolCallResult=function(){for(let e=this.messages.length-1;e>=0;e--){const t=this.messages[e];if(isToolMessage(t)&&null!=t.content&&"string"==typeof t.content&&this.messages.some(e=>"assistant"===e.role&&e.tool_calls?.some(e=>"function"===e.type&&e.id===t.tool_call_id)))return t.content}},_AbstractChatCompletionRunner_calculateTotalUsage=function(){const e={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:t}of this._chatCompletions)t&&(e.completion_tokens+=t.completion_tokens,e.prompt_tokens+=t.prompt_tokens,e.total_tokens+=t.total_tokens);return e},_AbstractChatCompletionRunner_validateParams=function(e){if(null!=e.n&&e.n>1)throw new OpenAIError("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},_AbstractChatCompletionRunner_stringifyFunctionCallResult=function(e){return"string"==typeof e?e:void 0===e?"undefined":JSON.stringify(e)};class ChatCompletionRunner extends AbstractChatCompletionRunner{static runTools(e,t,r){const n=new ChatCompletionRunner,o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,o)),n}_addMessage(e,t=!0){super._addMessage(e,t),isAssistantMessage(e)&&e.content&&this._emit("content",e.content)}}const STR=1,NUM=2,ARR=4,OBJ=8,NULL=16,BOOL=32,NAN=64,INFINITY=128,MINUS_INFINITY=256,INF=INFINITY|MINUS_INFINITY,SPECIAL=NULL|BOOL|INF|NAN,ATOM=STR|NUM|SPECIAL,COLLECTION=ARR|OBJ,ALL=ATOM|COLLECTION,Allow={STR:STR,NUM:NUM,ARR:ARR,OBJ:OBJ,NULL:NULL,BOOL:BOOL,NAN:NAN,INFINITY:INFINITY,MINUS_INFINITY:MINUS_INFINITY,INF:INF,SPECIAL:SPECIAL,ATOM:ATOM,COLLECTION:COLLECTION,ALL:ALL};class PartialJSON extends Error{}class MalformedJSON extends Error{}function parseJSON(e,t=Allow.ALL){if("string"!=typeof e)throw new TypeError("expecting str, got "+typeof e);if(!e.trim())throw new Error(`${e} is empty`);return _parseJSON(e.trim(),t)}const _parseJSON=(e,t)=>{const r=e.length;let n=0;const o=e=>{throw new PartialJSON(`${e} at position ${n}`)},i=e=>{throw new MalformedJSON(`${e} at position ${n}`)},s=()=>(d(),n>=r&&o("Unexpected end of input"),'"'===e[n]?a():"{"===e[n]?c():"["===e[n]?u():"null"===e.substring(n,n+4)||Allow.NULL&t&&r-n<4&&"null".startsWith(e.substring(n))?(n+=4,null):"true"===e.substring(n,n+4)||Allow.BOOL&t&&r-n<4&&"true".startsWith(e.substring(n))?(n+=4,!0):"false"===e.substring(n,n+5)||Allow.BOOL&t&&r-n<5&&"false".startsWith(e.substring(n))?(n+=5,!1):"Infinity"===e.substring(n,n+8)||Allow.INFINITY&t&&r-n<8&&"Infinity".startsWith(e.substring(n))?(n+=8,1/0):"-Infinity"===e.substring(n,n+9)||Allow.MINUS_INFINITY&t&&1<r-n&&r-n<9&&"-Infinity".startsWith(e.substring(n))?(n+=9,-1/0):"NaN"===e.substring(n,n+3)||Allow.NAN&t&&r-n<3&&"NaN".startsWith(e.substring(n))?(n+=3,NaN):l()),a=()=>{const s=n;let a=!1;for(n++;n<r&&('"'!==e[n]||a&&"\\"===e[n-1]);)a="\\"===e[n]&&!a,n++;if('"'==e.charAt(n))try{return JSON.parse(e.substring(s,++n-Number(a)))}catch(c){i(String(c))}else if(Allow.STR&t)try{return JSON.parse(e.substring(s,n-Number(a))+'"')}catch(c){return JSON.parse(e.substring(s,e.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},c=()=>{n++,d();const i={};try{for(;"}"!==e[n];){if(d(),n>=r&&Allow.OBJ&t)return i;const o=a();d(),n++;try{const e=s();Object.defineProperty(i,o,{value:e,writable:!0,enumerable:!0,configurable:!0})}catch(c){if(Allow.OBJ&t)return i;throw c}d(),","===e[n]&&n++}}catch(c){if(Allow.OBJ&t)return i;o("Expected '}' at end of object")}return n++,i},u=()=>{n++;const r=[];try{for(;"]"!==e[n];)r.push(s()),d(),","===e[n]&&n++}catch(i){if(Allow.ARR&t)return r;o("Expected ']' at end of array")}return n++,r},l=()=>{if(0===n){"-"===e&&Allow.NUM&t&&o("Not sure what '-' is");try{return JSON.parse(e)}catch(a){if(Allow.NUM&t)try{return"."===e[e.length-1]?JSON.parse(e.substring(0,e.lastIndexOf("."))):JSON.parse(e.substring(0,e.lastIndexOf("e")))}catch(c){}i(String(a))}}const s=n;for("-"===e[n]&&n++;e[n]&&!",]}".includes(e[n]);)n++;n!=r||Allow.NUM&t||o("Unterminated number literal");try{return JSON.parse(e.substring(s,n))}catch(a){"-"===e.substring(s,n)&&Allow.NUM&t&&o("Not sure what '-' is");try{return JSON.parse(e.substring(s,e.lastIndexOf("e")))}catch(c){i(String(c))}}},d=()=>{for(;n<r&&" \n\r\t".includes(e[n]);)n++};return s()},partialParse=e=>parseJSON(e,Allow.ALL^Allow.NUM);var _ChatCompletionStream_instances,_ChatCompletionStream_params,_ChatCompletionStream_choiceEventStates,_ChatCompletionStream_currentChatCompletionSnapshot,_ChatCompletionStream_beginRequest,_ChatCompletionStream_getChoiceEventState,_ChatCompletionStream_addChunk,_ChatCompletionStream_emitToolCallDoneEvent,_ChatCompletionStream_emitContentDoneEvents,_ChatCompletionStream_endRequest,_ChatCompletionStream_getAutoParseableResponseFormat,_ChatCompletionStream_accumulateChatCompletion;class ChatCompletionStream extends AbstractChatCompletionRunner{constructor(e){super(),_ChatCompletionStream_instances.add(this),_ChatCompletionStream_params.set(this,void 0),_ChatCompletionStream_choiceEventStates.set(this,void 0),_ChatCompletionStream_currentChatCompletionSnapshot.set(this,void 0),__classPrivateFieldSet(this,_ChatCompletionStream_params,e),__classPrivateFieldSet(this,_ChatCompletionStream_choiceEventStates,[])}get currentChatCompletionSnapshot(){return __classPrivateFieldGet(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f")}static fromReadableStream(e){const t=new ChatCompletionStream(null);return t._run(()=>t._fromReadableStream(e)),t}static createChatCompletion(e,t,r){const n=new ChatCompletionStream(t);return n._run(()=>n._runChatCompletion(e,{...t,stream:!0},{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createChatCompletion(e,t,r){super._createChatCompletion;const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this);const o=await e.chat.completions.create({...t,stream:!0},{...r,signal:this.controller.signal});this._connected();for await(const i of o)__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,i);if(o.controller.signal?.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}async _fromReadableStream(e,t){const r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_beginRequest).call(this),this._connected();const n=Stream.fromReadableStream(e,this.controller);let o;for await(const i of n)o&&o!==i.id&&this._addChatCompletion(__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this)),__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_addChunk).call(this,i),o=i.id;if(n.controller.signal?.aborted)throw new APIUserAbortError;return this._addChatCompletion(__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_endRequest).call(this))}[(_ChatCompletionStream_params=new WeakMap,_ChatCompletionStream_choiceEventStates=new WeakMap,_ChatCompletionStream_currentChatCompletionSnapshot=new WeakMap,_ChatCompletionStream_instances=new WeakSet,_ChatCompletionStream_beginRequest=function(){this.ended||__classPrivateFieldSet(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0)},_ChatCompletionStream_getChoiceEventState=function(e){let t=__classPrivateFieldGet(this,_ChatCompletionStream_choiceEventStates,"f")[e.index];return t||(t={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},__classPrivateFieldGet(this,_ChatCompletionStream_choiceEventStates,"f")[e.index]=t,t)},_ChatCompletionStream_addChunk=function(e){if(this.ended)return;const t=__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_accumulateChatCompletion).call(this,e);this._emit("chunk",e,t);for(const r of e.choices){const e=t.choices[r.index];null!=r.delta.content&&"assistant"===e.message?.role&&e.message?.content&&(this._emit("content",r.delta.content,e.message.content),this._emit("content.delta",{delta:r.delta.content,snapshot:e.message.content,parsed:e.message.parsed})),null!=r.delta.refusal&&"assistant"===e.message?.role&&e.message?.refusal&&this._emit("refusal.delta",{delta:r.delta.refusal,snapshot:e.message.refusal}),null!=r.logprobs?.content&&"assistant"===e.message?.role&&this._emit("logprobs.content.delta",{content:r.logprobs?.content,snapshot:e.logprobs?.content??[]}),null!=r.logprobs?.refusal&&"assistant"===e.message?.role&&this._emit("logprobs.refusal.delta",{refusal:r.logprobs?.refusal,snapshot:e.logprobs?.refusal??[]});const n=__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,e);e.finish_reason&&(__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,e),null!=n.current_tool_call_index&&__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,e,n.current_tool_call_index));for(const t of r.delta.tool_calls??[])n.current_tool_call_index!==t.index&&(__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitContentDoneEvents).call(this,e),null!=n.current_tool_call_index&&__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_emitToolCallDoneEvent).call(this,e,n.current_tool_call_index)),n.current_tool_call_index=t.index;for(const t of r.delta.tool_calls??[]){const r=e.message.tool_calls?.[t.index];r?.type&&("function"===r?.type?this._emit("tool_calls.function.arguments.delta",{name:r.function?.name,index:t.index,arguments:r.function.arguments,parsed_arguments:r.function.parsed_arguments,arguments_delta:t.function?.arguments??""}):assertNever(r?.type))}}},_ChatCompletionStream_emitToolCallDoneEvent=function(e,t){if(__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,e).done_tool_calls.has(t))return;const r=e.message.tool_calls?.[t];if(!r)throw new Error("no tool call snapshot");if(!r.type)throw new Error("tool call snapshot missing `type`");if("function"===r.type){const e=__classPrivateFieldGet(this,_ChatCompletionStream_params,"f")?.tools?.find(e=>"function"===e.type&&e.function.name===r.function.name);this._emit("tool_calls.function.arguments.done",{name:r.function.name,index:t,arguments:r.function.arguments,parsed_arguments:isAutoParsableTool$1(e)?e.$parseRaw(r.function.arguments):e?.function.strict?JSON.parse(r.function.arguments):null})}else assertNever(r.type)},_ChatCompletionStream_emitContentDoneEvents=function(e){const t=__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getChoiceEventState).call(this,e);if(e.message.content&&!t.content_done){t.content_done=!0;const r=__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this);this._emit("content.done",{content:e.message.content,parsed:r?r.$parseRaw(e.message.content):null})}e.message.refusal&&!t.refusal_done&&(t.refusal_done=!0,this._emit("refusal.done",{refusal:e.message.refusal})),e.logprobs?.content&&!t.logprobs_content_done&&(t.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:e.logprobs.content})),e.logprobs?.refusal&&!t.logprobs_refusal_done&&(t.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:e.logprobs.refusal}))},_ChatCompletionStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const e=__classPrivateFieldGet(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");if(!e)throw new OpenAIError("request ended without sending any chunks");return __classPrivateFieldSet(this,_ChatCompletionStream_currentChatCompletionSnapshot,void 0),__classPrivateFieldSet(this,_ChatCompletionStream_choiceEventStates,[]),finalizeChatCompletion(e,__classPrivateFieldGet(this,_ChatCompletionStream_params,"f"))},_ChatCompletionStream_getAutoParseableResponseFormat=function(){const e=__classPrivateFieldGet(this,_ChatCompletionStream_params,"f")?.response_format;return isAutoParsableResponseFormat(e)?e:null},_ChatCompletionStream_accumulateChatCompletion=function(e){var t,r,n,o;let i=__classPrivateFieldGet(this,_ChatCompletionStream_currentChatCompletionSnapshot,"f");const{choices:s,...a}=e;i?Object.assign(i,a):i=__classPrivateFieldSet(this,_ChatCompletionStream_currentChatCompletionSnapshot,{...a,choices:[]});for(const{delta:c,finish_reason:u,index:l,logprobs:d=null,...h}of e.choices){let e=i.choices[l];if(e||(e=i.choices[l]={finish_reason:u,index:l,message:{},logprobs:d,...h}),d)if(e.logprobs){const{content:n,refusal:o,...i}=d;Object.assign(e.logprobs,i),n&&((t=e.logprobs).content??(t.content=[]),e.logprobs.content.push(...n)),o&&((r=e.logprobs).refusal??(r.refusal=[]),e.logprobs.refusal.push(...o))}else e.logprobs=Object.assign({},d);if(u&&(e.finish_reason=u,__classPrivateFieldGet(this,_ChatCompletionStream_params,"f")&&hasAutoParseableInput$1(__classPrivateFieldGet(this,_ChatCompletionStream_params,"f")))){if("length"===u)throw new LengthFinishReasonError;if("content_filter"===u)throw new ContentFilterFinishReasonError}if(Object.assign(e,h),!c)continue;const{content:s,refusal:a,function_call:f,role:p,tool_calls:m,...y}=c;if(Object.assign(e.message,y),a&&(e.message.refusal=(e.message.refusal||"")+a),p&&(e.message.role=p),f&&(e.message.function_call?(f.name&&(e.message.function_call.name=f.name),f.arguments&&((n=e.message.function_call).arguments??(n.arguments=""),e.message.function_call.arguments+=f.arguments)):e.message.function_call=f),s&&(e.message.content=(e.message.content||"")+s,!e.message.refusal&&__classPrivateFieldGet(this,_ChatCompletionStream_instances,"m",_ChatCompletionStream_getAutoParseableResponseFormat).call(this)&&(e.message.parsed=partialParse(e.message.content))),m){e.message.tool_calls||(e.message.tool_calls=[]);for(const{index:t,id:r,type:n,function:i,...s}of m){const a=(o=e.message.tool_calls)[t]??(o[t]={});Object.assign(a,s),r&&(a.id=r),n&&(a.type=n),i&&(a.function??(a.function={name:i.name??"",arguments:""})),i?.name&&(a.function.name=i.name),i?.arguments&&(a.function.arguments+=i.arguments,shouldParseToolCall(__classPrivateFieldGet(this,_ChatCompletionStream_params,"f"),a)&&(a.function.parsed_arguments=partialParse(a.function.arguments)))}}}return i},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("chunk",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{r=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),this.on("error",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),{next:async()=>{if(!e.length)return r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function finalizeChatCompletion(e,t){const{id:r,choices:n,created:o,model:i,system_fingerprint:s,...a}=e;return maybeParseChatCompletion({...a,id:r,choices:n.map(({message:t,finish_reason:r,index:n,logprobs:o,...i})=>{if(!r)throw new OpenAIError(`missing finish_reason for choice ${n}`);const{content:s=null,function_call:a,tool_calls:c,...u}=t,l=t.role;if(!l)throw new OpenAIError(`missing role for choice ${n}`);if(a){const{arguments:e,name:c}=a;if(null==e)throw new OpenAIError(`missing function_call.arguments for choice ${n}`);if(!c)throw new OpenAIError(`missing function_call.name for choice ${n}`);return{...i,message:{content:s,function_call:{arguments:e,name:c},role:l,refusal:t.refusal??null},finish_reason:r,index:n,logprobs:o}}return c?{...i,index:n,finish_reason:r,logprobs:o,message:{...u,role:l,content:s,refusal:t.refusal??null,tool_calls:c.map((t,r)=>{const{function:o,type:i,id:s,...a}=t,{arguments:c,name:u,...l}=o||{};if(null==s)throw new OpenAIError(`missing choices[${n}].tool_calls[${r}].id\n${str(e)}`);if(null==i)throw new OpenAIError(`missing choices[${n}].tool_calls[${r}].type\n${str(e)}`);if(null==u)throw new OpenAIError(`missing choices[${n}].tool_calls[${r}].function.name\n${str(e)}`);if(null==c)throw new OpenAIError(`missing choices[${n}].tool_calls[${r}].function.arguments\n${str(e)}`);return{...a,id:s,type:i,function:{...l,name:u,arguments:c}}})}}:{...i,message:{...u,content:s,role:l,refusal:t.refusal??null},finish_reason:r,index:n,logprobs:o}}),created:o,model:i,object:"chat.completion",...s?{system_fingerprint:s}:{}},t)}function str(e){return JSON.stringify(e)}function assertNever(e){}class ChatCompletionStreamingRunner extends ChatCompletionStream{static fromReadableStream(e){const t=new ChatCompletionStreamingRunner(null);return t._run(()=>t._fromReadableStream(e)),t}static runTools(e,t,r){const n=new ChatCompletionStreamingRunner(t),o={...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"runTools"}};return n._run(()=>n._runTools(e,t,o)),n}}let Completions$1=class extends APIResource{constructor(){super(...arguments),this.messages=new Messages$1(this._client)}create(e,t){return this._client.post("/chat/completions",{body:e,...t,stream:e.stream??!1})}retrieve(e,t){return this._client.get(path`/chat/completions/${e}`,t)}update(e,t,r){return this._client.post(path`/chat/completions/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/chat/completions",CursorPage,{query:e,...t})}delete(e,t){return this._client.delete(path`/chat/completions/${e}`,t)}parse(e,t){return validateInputTools(e.tools),this._client.chat.completions.create(e,{...t,headers:{...t?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(t=>parseChatCompletion(t,e))}runTools(e,t){return e.stream?ChatCompletionStreamingRunner.runTools(this._client,e,t):ChatCompletionRunner.runTools(this._client,e,t)}stream(e,t){return ChatCompletionStream.createChatCompletion(this._client,e,t)}};Completions$1.Messages=Messages$1;class Chat extends APIResource{constructor(){super(...arguments),this.completions=new Completions$1(this._client)}}Chat.Completions=Completions$1;const brand_privateNullableHeaders=Symbol("brand.privateNullableHeaders");function*iterateHeaders(e){if(!e)return;if(brand_privateNullableHeaders in e){const{values:t,nulls:r}=e;yield*t.entries();for(const e of r)yield[e,null];return}let t,r=!1;e instanceof Headers?t=e.entries():isReadonlyArray(e)?t=e:(r=!0,t=Object.entries(e??{}));for(let n of t){const e=n[0];if("string"!=typeof e)throw new TypeError("expected header name to be a string");const t=isReadonlyArray(n[1])?n[1]:[n[1]];let o=!1;for(const n of t)void 0!==n&&(r&&!o&&(o=!0,yield[e,null]),yield[e,n])}}const buildHeaders=e=>{const t=new Headers,r=new Set;for(const n of e){const e=new Set;for(const[o,i]of iterateHeaders(n)){const n=o.toLowerCase();e.has(n)||(t.delete(o),e.add(n)),null===i?(t.delete(o),r.add(n)):(t.append(o,i),r.delete(n))}}return{[brand_privateNullableHeaders]:!0,values:t,nulls:r}};class Speech extends APIResource{create(e,t){return this._client.post("/audio/speech",{body:e,...t,headers:buildHeaders([{Accept:"application/octet-stream"},t?.headers]),__binaryResponse:!0})}}class Transcriptions extends APIResource{create(e,t){return this._client.post("/audio/transcriptions",multipartFormRequestOptions({body:e,...t,stream:e.stream??!1,__metadata:{model:e.model}},this._client))}}class Translations extends APIResource{create(e,t){return this._client.post("/audio/translations",multipartFormRequestOptions({body:e,...t,__metadata:{model:e.model}},this._client))}}class Audio extends APIResource{constructor(){super(...arguments),this.transcriptions=new Transcriptions(this._client),this.translations=new Translations(this._client),this.speech=new Speech(this._client)}}Audio.Transcriptions=Transcriptions,Audio.Translations=Translations,Audio.Speech=Speech;class Batches extends APIResource{create(e,t){return this._client.post("/batches",{body:e,...t})}retrieve(e,t){return this._client.get(path`/batches/${e}`,t)}list(e={},t){return this._client.getAPIList("/batches",CursorPage,{query:e,...t})}cancel(e,t){return this._client.post(path`/batches/${e}/cancel`,t)}}class Assistants extends APIResource{create(e,t){return this._client.post("/assistants",{body:e,...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(path`/assistants/${e}`,{...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,r){return this._client.post(path`/assistants/${e}`,{body:t,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},t){return this._client.getAPIList("/assistants",CursorPage,{query:e,...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(path`/assistants/${e}`,{...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class Sessions extends APIResource{create(e,t){return this._client.post("/realtime/sessions",{body:e,...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class TranscriptionSessions extends APIResource{create(e,t){return this._client.post("/realtime/transcription_sessions",{body:e,...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}}class Realtime extends APIResource{constructor(){super(...arguments),this.sessions=new Sessions(this._client),this.transcriptionSessions=new TranscriptionSessions(this._client)}}Realtime.Sessions=Sessions,Realtime.TranscriptionSessions=TranscriptionSessions;class Messages extends APIResource{create(e,t,r){return this._client.post(path`/threads/${e}/messages`,{body:t,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,t,r){const{thread_id:n}=t;return this._client.get(path`/threads/${n}/messages/${e}`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,t,r){const{thread_id:n,...o}=t;return this._client.post(path`/threads/${n}/messages/${e}`,{body:o,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t={},r){return this._client.getAPIList(path`/threads/${e}/messages`,CursorPage,{query:t,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,t,r){const{thread_id:n}=t;return this._client.delete(path`/threads/${n}/messages/${e}`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class Steps extends APIResource{retrieve(e,t,r){const{thread_id:n,run_id:o,...i}=t;return this._client.get(path`/threads/${n}/runs/${o}/steps/${e}`,{query:i,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t,r){const{thread_id:n,...o}=t;return this._client.getAPIList(path`/threads/${n}/runs/${e}/steps`,CursorPage,{query:o,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}const toFloat32Array=e=>{if(void 0!==Buffer){const t=Buffer.from(e,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}{const t=atob(e),r=t.length,n=new Uint8Array(r);for(let e=0;e<r;e++)n[e]=t.charCodeAt(e);return Array.from(new Float32Array(n.buffer))}},readEnv=e=>void 0!==globalThis.process?globalThis.process.env?.[e]?.trim()??void 0:void 0!==globalThis.Deno?globalThis.Deno.env?.get?.(e)?.trim():void 0;var _AssistantStream_instances,_a$1,_AssistantStream_events,_AssistantStream_runStepSnapshots,_AssistantStream_messageSnapshots,_AssistantStream_messageSnapshot,_AssistantStream_finalRun,_AssistantStream_currentContentIndex,_AssistantStream_currentContent,_AssistantStream_currentToolCallIndex,_AssistantStream_currentToolCall,_AssistantStream_currentEvent,_AssistantStream_currentRunSnapshot,_AssistantStream_currentRunStepSnapshot,_AssistantStream_addEvent,_AssistantStream_endRequest,_AssistantStream_handleMessage,_AssistantStream_handleRunStep,_AssistantStream_handleEvent,_AssistantStream_accumulateRunStep,_AssistantStream_accumulateMessage,_AssistantStream_accumulateContent,_AssistantStream_handleRun;class AssistantStream extends EventStream{constructor(){super(...arguments),_AssistantStream_instances.add(this),_AssistantStream_events.set(this,[]),_AssistantStream_runStepSnapshots.set(this,{}),_AssistantStream_messageSnapshots.set(this,{}),_AssistantStream_messageSnapshot.set(this,void 0),_AssistantStream_finalRun.set(this,void 0),_AssistantStream_currentContentIndex.set(this,void 0),_AssistantStream_currentContent.set(this,void 0),_AssistantStream_currentToolCallIndex.set(this,void 0),_AssistantStream_currentToolCall.set(this,void 0),_AssistantStream_currentEvent.set(this,void 0),_AssistantStream_currentRunSnapshot.set(this,void 0),_AssistantStream_currentRunStepSnapshot.set(this,void 0)}[(_AssistantStream_events=new WeakMap,_AssistantStream_runStepSnapshots=new WeakMap,_AssistantStream_messageSnapshots=new WeakMap,_AssistantStream_messageSnapshot=new WeakMap,_AssistantStream_finalRun=new WeakMap,_AssistantStream_currentContentIndex=new WeakMap,_AssistantStream_currentContent=new WeakMap,_AssistantStream_currentToolCallIndex=new WeakMap,_AssistantStream_currentToolCall=new WeakMap,_AssistantStream_currentEvent=new WeakMap,_AssistantStream_currentRunSnapshot=new WeakMap,_AssistantStream_currentRunStepSnapshot=new WeakMap,_AssistantStream_instances=new WeakSet,Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{r=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),this.on("error",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),{next:async()=>{if(!e.length)return r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(e){const t=new _a$1;return t._run(()=>t._fromReadableStream(e)),t}async _fromReadableStream(e,t){const r=t?.signal;r&&(r.aborted&&this.controller.abort(),r.addEventListener("abort",()=>this.controller.abort())),this._connected();const n=Stream.fromReadableStream(e,this.controller);for await(const o of n)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,o);if(n.controller.signal?.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}toReadableStream(){return new Stream(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(e,t,r,n){const o=new _a$1;return o._run(()=>o._runToolAssistantStream(e,t,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createToolAssistantStream(e,t,r,n){const o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const i={...r,stream:!0},s=await e.submitToolOutputs(t,i,{...n,signal:this.controller.signal});this._connected();for await(const a of s)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,a);if(s.controller.signal?.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static createThreadAssistantStream(e,t,r){const n=new _a$1;return n._run(()=>n._threadAssistantStream(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}static createAssistantStream(e,t,r,n){const o=new _a$1;return o._run(()=>o._runAssistantStream(e,t,r,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"stream"}})),o}currentEvent(){return __classPrivateFieldGet(this,_AssistantStream_currentEvent,"f")}currentRun(){return __classPrivateFieldGet(this,_AssistantStream_currentRunSnapshot,"f")}currentMessageSnapshot(){return __classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f")}currentRunStepSnapshot(){return __classPrivateFieldGet(this,_AssistantStream_currentRunStepSnapshot,"f")}async finalRunSteps(){return await this.done(),Object.values(__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f"))}async finalMessages(){return await this.done(),Object.values(__classPrivateFieldGet(this,_AssistantStream_messageSnapshots,"f"))}async finalRun(){if(await this.done(),!__classPrivateFieldGet(this,_AssistantStream_finalRun,"f"))throw Error("Final run was not received.");return __classPrivateFieldGet(this,_AssistantStream_finalRun,"f")}async _createThreadAssistantStream(e,t,r){const n=r?.signal;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort()));const o={...t,stream:!0},i=await e.createAndRun(o,{...r,signal:this.controller.signal});this._connected();for await(const s of i)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,s);if(i.controller.signal?.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}async _createAssistantStream(e,t,r,n){const o=n?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const i={...r,stream:!0},s=await e.create(t,i,{...n,signal:this.controller.signal});this._connected();for await(const a of s)__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_addEvent).call(this,a);if(s.controller.signal?.aborted)throw new APIUserAbortError;return this._addRun(__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_endRequest).call(this))}static accumulateDelta(e,t){for(const[r,n]of Object.entries(t)){if(!e.hasOwnProperty(r)){e[r]=n;continue}let t=e[r];if(null!=t)if("index"!==r&&"type"!==r){if("string"==typeof t&&"string"==typeof n)t+=n;else if("number"==typeof t&&"number"==typeof n)t+=n;else{if(!isObj(t)||!isObj(n)){if(Array.isArray(t)&&Array.isArray(n)){if(t.every(e=>"string"==typeof e||"number"==typeof e)){t.push(...n);continue}for(const e of n){if(!isObj(e))throw new Error(`Expected array delta entry to be an object but got: ${e}`);const r=e.index;if(null==r)throw console.error(e),new Error("Expected array delta entry to have an `index` property");if("number"!=typeof r)throw new Error(`Expected array delta entry \`index\` property to be a number but got ${r}`);const n=t[r];null==n?t.push(e):t[r]=this.accumulateDelta(n,e)}continue}throw Error(`Unhandled record type: ${r}, deltaValue: ${n}, accValue: ${t}`)}t=this.accumulateDelta(t,n)}e[r]=t}else e[r]=n;else e[r]=n}return e}_addRun(e){return e}async _threadAssistantStream(e,t,r){return await this._createThreadAssistantStream(t,e,r)}async _runAssistantStream(e,t,r,n){return await this._createAssistantStream(t,e,r,n)}async _runToolAssistantStream(e,t,r,n){return await this._createToolAssistantStream(t,e,r,n)}}_a$1=AssistantStream,_AssistantStream_addEvent=function(e){if(!this.ended)switch(__classPrivateFieldSet(this,_AssistantStream_currentEvent,e),__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleEvent).call(this,e),e.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleRun).call(this,e);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleRunStep).call(this,e);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_handleMessage).call(this,e);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},_AssistantStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");if(!__classPrivateFieldGet(this,_AssistantStream_finalRun,"f"))throw Error("Final run has not been received");return __classPrivateFieldGet(this,_AssistantStream_finalRun,"f")},_AssistantStream_handleMessage=function(e){const[t,r]=__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_accumulateMessage).call(this,e,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));__classPrivateFieldSet(this,_AssistantStream_messageSnapshot,t),__classPrivateFieldGet(this,_AssistantStream_messageSnapshots,"f")[t.id]=t;for(const n of r){const e=t.content[n.index];"text"==e?.type&&this._emit("textCreated",e.text)}switch(e.event){case"thread.message.created":this._emit("messageCreated",e.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",e.data.delta,t),e.data.delta.content)for(const r of e.data.delta.content){if("text"==r.type&&r.text){let e=r.text,n=t.content[r.index];if(!n||"text"!=n.type)throw Error("The snapshot associated with this text delta is not text or missing");this._emit("textDelta",e,n.text)}if(r.index!=__classPrivateFieldGet(this,_AssistantStream_currentContentIndex,"f")){if(__classPrivateFieldGet(this,_AssistantStream_currentContent,"f"))switch(__classPrivateFieldGet(this,_AssistantStream_currentContent,"f").type){case"text":this._emit("textDone",__classPrivateFieldGet(this,_AssistantStream_currentContent,"f").text,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break;case"image_file":this._emit("imageFileDone",__classPrivateFieldGet(this,_AssistantStream_currentContent,"f").image_file,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"))}__classPrivateFieldSet(this,_AssistantStream_currentContentIndex,r.index)}__classPrivateFieldSet(this,_AssistantStream_currentContent,t.content[r.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(void 0!==__classPrivateFieldGet(this,_AssistantStream_currentContentIndex,"f")){const t=e.data.content[__classPrivateFieldGet(this,_AssistantStream_currentContentIndex,"f")];if(t)switch(t.type){case"image_file":this._emit("imageFileDone",t.image_file,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"));break;case"text":this._emit("textDone",t.text,__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f"))}}__classPrivateFieldGet(this,_AssistantStream_messageSnapshot,"f")&&this._emit("messageDone",e.data),__classPrivateFieldSet(this,_AssistantStream_messageSnapshot,void 0)}},_AssistantStream_handleRunStep=function(e){const t=__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_accumulateRunStep).call(this,e);switch(__classPrivateFieldSet(this,_AssistantStream_currentRunStepSnapshot,t),e.event){case"thread.run.step.created":this._emit("runStepCreated",e.data);break;case"thread.run.step.delta":const r=e.data.delta;if(r.step_details&&"tool_calls"==r.step_details.type&&r.step_details.tool_calls&&"tool_calls"==t.step_details.type)for(const e of r.step_details.tool_calls)e.index==__classPrivateFieldGet(this,_AssistantStream_currentToolCallIndex,"f")?this._emit("toolCallDelta",e,t.step_details.tool_calls[e.index]):(__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallDone",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet(this,_AssistantStream_currentToolCallIndex,e.index),__classPrivateFieldSet(this,_AssistantStream_currentToolCall,t.step_details.tool_calls[e.index]),__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&this._emit("toolCallCreated",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")));this._emit("runStepDelta",e.data.delta,t);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":__classPrivateFieldSet(this,_AssistantStream_currentRunStepSnapshot,void 0);"tool_calls"==e.data.step_details.type&&__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet(this,_AssistantStream_currentToolCall,void 0)),this._emit("runStepDone",e.data,t)}},_AssistantStream_handleEvent=function(e){__classPrivateFieldGet(this,_AssistantStream_events,"f").push(e),this._emit("event",e)},_AssistantStream_accumulateRunStep=function(e){switch(e.event){case"thread.run.step.created":return __classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id]=e.data,e.data;case"thread.run.step.delta":let t=__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id];if(!t)throw Error("Received a RunStepDelta before creation of a snapshot");let r=e.data;if(r.delta){const n=_a$1.accumulateDelta(t,r.delta);__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id]=n}return __classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id]=e.data}if(__classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id])return __classPrivateFieldGet(this,_AssistantStream_runStepSnapshots,"f")[e.data.id];throw new Error("No snapshot available")},_AssistantStream_accumulateMessage=function(e,t){let r=[];switch(e.event){case"thread.message.created":return[e.data,r];case"thread.message.delta":if(!t)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let n=e.data;if(n.delta.content)for(const e of n.delta.content)if(e.index in t.content){let r=t.content[e.index];t.content[e.index]=__classPrivateFieldGet(this,_AssistantStream_instances,"m",_AssistantStream_accumulateContent).call(this,e,r)}else t.content[e.index]=e,r.push(e);return[t,r];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(t)return[t,r];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},_AssistantStream_accumulateContent=function(e,t){return _a$1.accumulateDelta(t,e)},_AssistantStream_handleRun=function(e){switch(__classPrivateFieldSet(this,_AssistantStream_currentRunSnapshot,e.data),e.event){case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":__classPrivateFieldSet(this,_AssistantStream_finalRun,e.data),__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")&&(this._emit("toolCallDone",__classPrivateFieldGet(this,_AssistantStream_currentToolCall,"f")),__classPrivateFieldSet(this,_AssistantStream_currentToolCall,void 0))}};let Runs$1=class extends APIResource{constructor(){super(...arguments),this.steps=new Steps(this._client)}create(e,t,r){const{include:n,...o}=t;return this._client.post(path`/threads/${e}/runs`,{query:{include:n},body:o,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:t.stream??!1})}retrieve(e,t,r){const{thread_id:n}=t;return this._client.get(path`/threads/${n}/runs/${e}`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,t,r){const{thread_id:n,...o}=t;return this._client.post(path`/threads/${n}/runs/${e}`,{body:o,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t={},r){return this._client.getAPIList(path`/threads/${e}/runs`,CursorPage,{query:t,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,t,r){const{thread_id:n}=t;return this._client.post(path`/threads/${n}/runs/${e}/cancel`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,t,r){const n=await this.create(e,t,r);return await this.poll(n.id,{thread_id:e},r)}createAndStream(e,t,r){return AssistantStream.createAssistantStream(e,this._client.beta.threads.runs,t,r)}async poll(e,t,r){const n=buildHeaders([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:o,response:i}=await this.retrieve(e,t,{...r,headers:{...r?.headers,...n}}).withResponse();switch(o.status){case"queued":case"in_progress":case"cancelling":let e=5e3;if(r?.pollIntervalMs)e=r.pollIntervalMs;else{const t=i.headers.get("openai-poll-after-ms");if(t){const r=parseInt(t);isNaN(r)||(e=r)}}await sleep(e);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return o}}}stream(e,t,r){return AssistantStream.createAssistantStream(e,this._client.beta.threads.runs,t,r)}submitToolOutputs(e,t,r){const{thread_id:n,...o}=t;return this._client.post(path`/threads/${n}/runs/${e}/submit_tool_outputs`,{body:o,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers]),stream:t.stream??!1})}async submitToolOutputsAndPoll(e,t,r){const n=await this.submitToolOutputs(e,t,r);return await this.poll(n.id,t,r)}submitToolOutputsStream(e,t,r){return AssistantStream.createToolAssistantStream(e,this._client.beta.threads.runs,t,r)}};Runs$1.Steps=Steps;class Threads extends APIResource{constructor(){super(...arguments),this.runs=new Runs$1(this._client),this.messages=new Messages(this._client)}create(e={},t){return this._client.post("/threads",{body:e,...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(path`/threads/${e}`,{...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,r){return this._client.post(path`/threads/${e}`,{body:t,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,t){return this._client.delete(path`/threads/${e}`,{...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}createAndRun(e,t){return this._client.post("/threads/runs",{body:e,...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers]),stream:e.stream??!1})}async createAndRunPoll(e,t){const r=await this.createAndRun(e,t);return await this.runs.poll(r.id,{thread_id:r.thread_id},t)}createAndRunStream(e,t){return AssistantStream.createThreadAssistantStream(e,this._client.beta.threads,t)}}Threads.Runs=Runs$1,Threads.Messages=Messages;class Beta extends APIResource{constructor(){super(...arguments),this.realtime=new Realtime(this._client),this.assistants=new Assistants(this._client),this.threads=new Threads(this._client)}}Beta.Realtime=Realtime,Beta.Assistants=Assistants,Beta.Threads=Threads;class Completions extends APIResource{create(e,t){return this._client.post("/completions",{body:e,...t,stream:e.stream??!1})}}class Content extends APIResource{retrieve(e,t,r){const{container_id:n}=t;return this._client.get(path`/containers/${n}/files/${e}/content`,{...r,headers:buildHeaders([{Accept:"application/binary"},r?.headers]),__binaryResponse:!0})}}let Files$2=class extends APIResource{constructor(){super(...arguments),this.content=new Content(this._client)}create(e,t,r){return this._client.post(path`/containers/${e}/files`,multipartFormRequestOptions({body:t,...r},this._client))}retrieve(e,t,r){const{container_id:n}=t;return this._client.get(path`/containers/${n}/files/${e}`,r)}list(e,t={},r){return this._client.getAPIList(path`/containers/${e}/files`,CursorPage,{query:t,...r})}delete(e,t,r){const{container_id:n}=t;return this._client.delete(path`/containers/${n}/files/${e}`,{...r,headers:buildHeaders([{Accept:"*/*"},r?.headers])})}};Files$2.Content=Content;class Containers extends APIResource{constructor(){super(...arguments),this.files=new Files$2(this._client)}create(e,t){return this._client.post("/containers",{body:e,...t})}retrieve(e,t){return this._client.get(path`/containers/${e}`,t)}list(e={},t){return this._client.getAPIList("/containers",CursorPage,{query:e,...t})}delete(e,t){return this._client.delete(path`/containers/${e}`,{...t,headers:buildHeaders([{Accept:"*/*"},t?.headers])})}}Containers.Files=Files$2;class Embeddings extends APIResource{create(e,t){const r=!!e.encoding_format;let n=r?e.encoding_format:"base64";r&&loggerFor(this._client).debug("embeddings/user defined encoding_format:",e.encoding_format);const o=this._client.post("/embeddings",{body:{...e,encoding_format:n},...t});return r?o:(loggerFor(this._client).debug("embeddings/decoding base64 embeddings from base64"),o._thenUnwrap(e=>(e&&e.data&&e.data.forEach(e=>{const t=e.embedding;e.embedding=toFloat32Array(t)}),e)))}}class OutputItems extends APIResource{retrieve(e,t,r){const{eval_id:n,run_id:o}=t;return this._client.get(path`/evals/${n}/runs/${o}/output_items/${e}`,r)}list(e,t,r){const{eval_id:n,...o}=t;return this._client.getAPIList(path`/evals/${n}/runs/${e}/output_items`,CursorPage,{query:o,...r})}}class Runs extends APIResource{constructor(){super(...arguments),this.outputItems=new OutputItems(this._client)}create(e,t,r){return this._client.post(path`/evals/${e}/runs`,{body:t,...r})}retrieve(e,t,r){const{eval_id:n}=t;return this._client.get(path`/evals/${n}/runs/${e}`,r)}list(e,t={},r){return this._client.getAPIList(path`/evals/${e}/runs`,CursorPage,{query:t,...r})}delete(e,t,r){const{eval_id:n}=t;return this._client.delete(path`/evals/${n}/runs/${e}`,r)}cancel(e,t,r){const{eval_id:n}=t;return this._client.post(path`/evals/${n}/runs/${e}`,r)}}Runs.OutputItems=OutputItems;class Evals extends APIResource{constructor(){super(...arguments),this.runs=new Runs(this._client)}create(e,t){return this._client.post("/evals",{body:e,...t})}retrieve(e,t){return this._client.get(path`/evals/${e}`,t)}update(e,t,r){return this._client.post(path`/evals/${e}`,{body:t,...r})}list(e={},t){return this._client.getAPIList("/evals",CursorPage,{query:e,...t})}delete(e,t){return this._client.delete(path`/evals/${e}`,t)}}Evals.Runs=Runs;let Files$1=class extends APIResource{create(e,t){return this._client.post("/files",multipartFormRequestOptions({body:e,...t},this._client))}retrieve(e,t){return this._client.get(path`/files/${e}`,t)}list(e={},t){return this._client.getAPIList("/files",CursorPage,{query:e,...t})}delete(e,t){return this._client.delete(path`/files/${e}`,t)}content(e,t){return this._client.get(path`/files/${e}/content`,{...t,headers:buildHeaders([{Accept:"application/binary"},t?.headers]),__binaryResponse:!0})}async waitForProcessing(e,{pollInterval:t=5e3,maxWait:r=18e5}={}){const n=new Set(["processed","error","deleted"]),o=Date.now();let i=await this.retrieve(e);for(;!i.status||!n.has(i.status);)if(await sleep(t),i=await this.retrieve(e),Date.now()-o>r)throw new APIConnectionTimeoutError({message:`Giving up on waiting for file ${e} to finish processing after ${r} milliseconds.`});return i}};class Methods extends APIResource{}let Graders$1=class extends APIResource{run(e,t){return this._client.post("/fine_tuning/alpha/graders/run",{body:e,...t})}validate(e,t){return this._client.post("/fine_tuning/alpha/graders/validate",{body:e,...t})}};class Alpha extends APIResource{constructor(){super(...arguments),this.graders=new Graders$1(this._client)}}Alpha.Graders=Graders$1;class Permissions extends APIResource{create(e,t,r){return this._client.getAPIList(path`/fine_tuning/checkpoints/${e}/permissions`,Page,{body:t,method:"post",...r})}retrieve(e,t={},r){return this._client.get(path`/fine_tuning/checkpoints/${e}/permissions`,{query:t,...r})}delete(e,t,r){const{fine_tuned_model_checkpoint:n}=t;return this._client.delete(path`/fine_tuning/checkpoints/${n}/permissions/${e}`,r)}}let Checkpoints$1=class extends APIResource{constructor(){super(...arguments),this.permissions=new Permissions(this._client)}};Checkpoints$1.Permissions=Permissions;class Checkpoints extends APIResource{list(e,t={},r){return this._client.getAPIList(path`/fine_tuning/jobs/${e}/checkpoints`,CursorPage,{query:t,...r})}}class Jobs extends APIResource{constructor(){super(...arguments),this.checkpoints=new Checkpoints(this._client)}create(e,t){return this._client.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this._client.get(path`/fine_tuning/jobs/${e}`,t)}list(e={},t){return this._client.getAPIList("/fine_tuning/jobs",CursorPage,{query:e,...t})}cancel(e,t){return this._client.post(path`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return this._client.getAPIList(path`/fine_tuning/jobs/${e}/events`,CursorPage,{query:t,...r})}pause(e,t){return this._client.post(path`/fine_tuning/jobs/${e}/pause`,t)}resume(e,t){return this._client.post(path`/fine_tuning/jobs/${e}/resume`,t)}}Jobs.Checkpoints=Checkpoints;class FineTuning extends APIResource{constructor(){super(...arguments),this.methods=new Methods(this._client),this.jobs=new Jobs(this._client),this.checkpoints=new Checkpoints$1(this._client),this.alpha=new Alpha(this._client)}}FineTuning.Methods=Methods,FineTuning.Jobs=Jobs,FineTuning.Checkpoints=Checkpoints$1,FineTuning.Alpha=Alpha;class GraderModels extends APIResource{}class Graders extends APIResource{constructor(){super(...arguments),this.graderModels=new GraderModels(this._client)}}Graders.GraderModels=GraderModels;class Images extends APIResource{createVariation(e,t){return this._client.post("/images/variations",multipartFormRequestOptions({body:e,...t},this._client))}edit(e,t){return this._client.post("/images/edits",multipartFormRequestOptions({body:e,...t},this._client))}generate(e,t){return this._client.post("/images/generations",{body:e,...t})}}class Models extends APIResource{retrieve(e,t){return this._client.get(path`/models/${e}`,t)}list(e){return this._client.getAPIList("/models",Page,e)}delete(e,t){return this._client.delete(path`/models/${e}`,t)}}class Moderations extends APIResource{create(e,t){return this._client.post("/moderations",{body:e,...t})}}function maybeParseResponse(e,t){return t&&hasAutoParseableInput(t)?parseResponse(e,t):{...e,output_parsed:null,output:e.output.map(e=>"function_call"===e.type?{...e,parsed_arguments:null}:"message"===e.type?{...e,content:e.content.map(e=>({...e,parsed:null}))}:e)}}function parseResponse(e,t){const r=e.output.map(e=>{if("function_call"===e.type)return{...e,parsed_arguments:parseToolCall$1(t,e)};if("message"===e.type){const r=e.content.map(e=>"output_text"===e.type?{...e,parsed:parseTextFormat(t,e.text)}:e);return{...e,content:r}}return e}),n=Object.assign({},e,{output:r});return Object.getOwnPropertyDescriptor(e,"output_text")||addOutputText(n),Object.defineProperty(n,"output_parsed",{enumerable:!0,get(){for(const e of n.output)if("message"===e.type)for(const t of e.content)if("output_text"===t.type&&null!==t.parsed)return t.parsed;return null}}),n}function parseTextFormat(e,t){if("json_schema"!==e.text?.format?.type)return null;if("$parseRaw"in e.text?.format){const r=e.text?.format;return r.$parseRaw(t)}return JSON.parse(t)}function hasAutoParseableInput(e){return!!isAutoParsableResponseFormat(e.text?.format)}function isAutoParsableTool(e){return"auto-parseable-tool"===e?.$brand}function getInputToolByName(e,t){return e.find(e=>"function"===e.type&&e.name===t)}function parseToolCall$1(e,t){const r=getInputToolByName(e.tools??[],t.name);return{...t,...t,parsed_arguments:isAutoParsableTool(r)?r.$parseRaw(t.arguments):r?.strict?JSON.parse(t.arguments):null}}function addOutputText(e){const t=[];for(const r of e.output)if("message"===r.type)for(const e of r.content)"output_text"===e.type&&t.push(e.text);e.output_text=t.join("")}var _ResponseStream_instances,_ResponseStream_params,_ResponseStream_currentResponseSnapshot,_ResponseStream_finalResponse,_ResponseStream_beginRequest,_ResponseStream_addEvent,_ResponseStream_endRequest,_ResponseStream_accumulateResponse;class ResponseStream extends EventStream{constructor(e){super(),_ResponseStream_instances.add(this),_ResponseStream_params.set(this,void 0),_ResponseStream_currentResponseSnapshot.set(this,void 0),_ResponseStream_finalResponse.set(this,void 0),__classPrivateFieldSet(this,_ResponseStream_params,e)}static createResponse(e,t,r){const n=new ResponseStream(t);return n._run(()=>n._createOrRetrieveResponse(e,t,{...r,headers:{...r?.headers,"X-Stainless-Helper-Method":"stream"}})),n}async _createOrRetrieveResponse(e,t,r){const n=r?.signal;let o;n&&(n.aborted&&this.controller.abort(),n.addEventListener("abort",()=>this.controller.abort())),__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_beginRequest).call(this);let i=null;"response_id"in t?(o=await e.responses.retrieve(t.response_id,{stream:!0},{...r,signal:this.controller.signal,stream:!0}),i=t.starting_after??null):o=await e.responses.create({...t,stream:!0},{...r,signal:this.controller.signal}),this._connected();for await(const s of o)__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_addEvent).call(this,s,i);if(o.controller.signal?.aborted)throw new APIUserAbortError;return __classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_endRequest).call(this)}[(_ResponseStream_params=new WeakMap,_ResponseStream_currentResponseSnapshot=new WeakMap,_ResponseStream_finalResponse=new WeakMap,_ResponseStream_instances=new WeakSet,_ResponseStream_beginRequest=function(){this.ended||__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,void 0)},_ResponseStream_addEvent=function(e,t){if(this.ended)return;const r=(e,r)=>{(null==t||r.sequence_number>t)&&this._emit(e,r)},n=__classPrivateFieldGet(this,_ResponseStream_instances,"m",_ResponseStream_accumulateResponse).call(this,e);switch(r("event",e),e.type){case"response.output_text.delta":{const t=n.output[e.output_index];if(!t)throw new OpenAIError(`missing output at index ${e.output_index}`);if("message"===t.type){const n=t.content[e.content_index];if(!n)throw new OpenAIError(`missing content at index ${e.content_index}`);if("output_text"!==n.type)throw new OpenAIError(`expected content to be 'output_text', got ${n.type}`);r("response.output_text.delta",{...e,snapshot:n.text})}break}case"response.function_call_arguments.delta":{const t=n.output[e.output_index];if(!t)throw new OpenAIError(`missing output at index ${e.output_index}`);"function_call"===t.type&&r("response.function_call_arguments.delta",{...e,snapshot:t.arguments});break}default:r(e.type,e)}},_ResponseStream_endRequest=function(){if(this.ended)throw new OpenAIError("stream has ended, this shouldn't happen");const e=__classPrivateFieldGet(this,_ResponseStream_currentResponseSnapshot,"f");if(!e)throw new OpenAIError("request ended without sending any events");__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,void 0);const t=finalizeResponse(e,__classPrivateFieldGet(this,_ResponseStream_params,"f"));return __classPrivateFieldSet(this,_ResponseStream_finalResponse,t),t},_ResponseStream_accumulateResponse=function(e){let t=__classPrivateFieldGet(this,_ResponseStream_currentResponseSnapshot,"f");if(!t){if("response.created"!==e.type)throw new OpenAIError(`When snapshot hasn't been set yet, expected 'response.created' event, got ${e.type}`);return t=__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,e.response),t}switch(e.type){case"response.output_item.added":t.output.push(e.item);break;case"response.content_part.added":{const r=t.output[e.output_index];if(!r)throw new OpenAIError(`missing output at index ${e.output_index}`);"message"===r.type&&r.content.push(e.part);break}case"response.output_text.delta":{const r=t.output[e.output_index];if(!r)throw new OpenAIError(`missing output at index ${e.output_index}`);if("message"===r.type){const t=r.content[e.content_index];if(!t)throw new OpenAIError(`missing content at index ${e.content_index}`);if("output_text"!==t.type)throw new OpenAIError(`expected content to be 'output_text', got ${t.type}`);t.text+=e.delta}break}case"response.function_call_arguments.delta":{const r=t.output[e.output_index];if(!r)throw new OpenAIError(`missing output at index ${e.output_index}`);"function_call"===r.type&&(r.arguments+=e.delta);break}case"response.completed":__classPrivateFieldSet(this,_ResponseStream_currentResponseSnapshot,e.response)}return t},Symbol.asyncIterator)](){const e=[],t=[];let r=!1;return this.on("event",r=>{const n=t.shift();n?n.resolve(r):e.push(r)}),this.on("end",()=>{r=!0;for(const e of t)e.resolve(void 0);t.length=0}),this.on("abort",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),this.on("error",e=>{r=!0;for(const r of t)r.reject(e);t.length=0}),{next:async()=>{if(!e.length)return r?{value:void 0,done:!0}:new Promise((e,r)=>t.push({resolve:e,reject:r})).then(e=>e?{value:e,done:!1}:{value:void 0,done:!0});return{value:e.shift(),done:!1}},return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const e=__classPrivateFieldGet(this,_ResponseStream_finalResponse,"f");if(!e)throw new OpenAIError("stream ended without producing a ChatCompletion");return e}}function finalizeResponse(e,t){return maybeParseResponse(e,t)}class InputItems extends APIResource{list(e,t={},r){return this._client.getAPIList(path`/responses/${e}/input_items`,CursorPage,{query:t,...r})}}class Responses extends APIResource{constructor(){super(...arguments),this.inputItems=new InputItems(this._client)}create(e,t){return this._client.post("/responses",{body:e,...t,stream:e.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&addOutputText(e),e))}retrieve(e,t={},r){return this._client.get(path`/responses/${e}`,{query:t,...r,stream:t?.stream??!1})._thenUnwrap(e=>("object"in e&&"response"===e.object&&addOutputText(e),e))}delete(e,t){return this._client.delete(path`/responses/${e}`,{...t,headers:buildHeaders([{Accept:"*/*"},t?.headers])})}parse(e,t){return this._client.responses.create(e,t)._thenUnwrap(t=>parseResponse(t,e))}stream(e,t){return ResponseStream.createResponse(this._client,e,t)}cancel(e,t){return this._client.post(path`/responses/${e}/cancel`,t)}}Responses.InputItems=InputItems;class Parts extends APIResource{create(e,t,r){return this._client.post(path`/uploads/${e}/parts`,multipartFormRequestOptions({body:t,...r},this._client))}}class Uploads extends APIResource{constructor(){super(...arguments),this.parts=new Parts(this._client)}create(e,t){return this._client.post("/uploads",{body:e,...t})}cancel(e,t){return this._client.post(path`/uploads/${e}/cancel`,t)}complete(e,t,r){return this._client.post(path`/uploads/${e}/complete`,{body:t,...r})}}Uploads.Parts=Parts;const allSettledWithThrow=async e=>{const t=await Promise.allSettled(e),r=t.filter(e=>"rejected"===e.status);if(r.length){for(const e of r)console.error(e.reason);throw new Error(`${r.length} promise(s) failed - see the above errors`)}const n=[];for(const o of t)"fulfilled"===o.status&&n.push(o.value);return n};class FileBatches extends APIResource{create(e,t,r){return this._client.post(path`/vector_stores/${e}/file_batches`,{body:t,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,t,r){const{vector_store_id:n}=t;return this._client.get(path`/vector_stores/${n}/file_batches/${e}`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}cancel(e,t,r){const{vector_store_id:n}=t;return this._client.post(path`/vector_stores/${n}/file_batches/${e}/cancel`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,t,r){const n=await this.create(e,t);return await this.poll(e,n.id,r)}listFiles(e,t,r){const{vector_store_id:n,...o}=t;return this._client.getAPIList(path`/vector_stores/${n}/file_batches/${e}/files`,CursorPage,{query:o,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async poll(e,t,r){const n=buildHeaders([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:o,response:i}=await this.retrieve(t,{vector_store_id:e},{...r,headers:n}).withResponse();switch(o.status){case"in_progress":let e=5e3;if(r?.pollIntervalMs)e=r.pollIntervalMs;else{const t=i.headers.get("openai-poll-after-ms");if(t){const r=parseInt(t);isNaN(r)||(e=r)}}await sleep(e);break;case"failed":case"cancelled":case"completed":return o}}}async uploadAndPoll(e,{files:t,fileIds:r=[]},n){if(null==t||0==t.length)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const o=n?.maxConcurrency??5,i=Math.min(o,t.length),s=this._client,a=t.values(),c=[...r];const u=Array(i).fill(a).map(async function(e){for(let t of e){const e=await s.files.create({file:t,purpose:"assistants"},n);c.push(e.id)}});return await allSettledWithThrow(u),await this.createAndPoll(e,{file_ids:c})}}class Files extends APIResource{create(e,t,r){return this._client.post(path`/vector_stores/${e}/files`,{body:t,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}retrieve(e,t,r){const{vector_store_id:n}=t;return this._client.get(path`/vector_stores/${n}/files/${e}`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}update(e,t,r){const{vector_store_id:n,...o}=t;return this._client.post(path`/vector_stores/${n}/files/${e}`,{body:o,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e,t={},r){return this._client.getAPIList(path`/vector_stores/${e}/files`,CursorPage,{query:t,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}delete(e,t,r){const{vector_store_id:n}=t;return this._client.delete(path`/vector_stores/${n}/files/${e}`,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}async createAndPoll(e,t,r){const n=await this.create(e,t,r);return await this.poll(e,n.id,r)}async poll(e,t,r){const n=buildHeaders([r?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":r?.pollIntervalMs?.toString()??void 0}]);for(;;){const o=await this.retrieve(t,{vector_store_id:e},{...r,headers:n}).withResponse(),i=o.data;switch(i.status){case"in_progress":let e=5e3;if(r?.pollIntervalMs)e=r.pollIntervalMs;else{const t=o.response.headers.get("openai-poll-after-ms");if(t){const r=parseInt(t);isNaN(r)||(e=r)}}await sleep(e);break;case"failed":case"completed":return i}}}async upload(e,t,r){const n=await this._client.files.create({file:t,purpose:"assistants"},r);return this.create(e,{file_id:n.id},r)}async uploadAndPoll(e,t,r){const n=await this.upload(e,t,r);return await this.poll(e,n.id,r)}content(e,t,r){const{vector_store_id:n}=t;return this._client.getAPIList(path`/vector_stores/${n}/files/${e}/content`,Page,{...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}class VectorStores extends APIResource{constructor(){super(...arguments),this.files=new Files(this._client),this.fileBatches=new FileBatches(this._client)}create(e,t){return this._client.post("/vector_stores",{body:e,...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}retrieve(e,t){return this._client.get(path`/vector_stores/${e}`,{...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}update(e,t,r){return this._client.post(path`/vector_stores/${e}`,{body:t,...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}list(e={},t){return this._client.getAPIList("/vector_stores",CursorPage,{query:e,...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}delete(e,t){return this._client.delete(path`/vector_stores/${e}`,{...t,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},t?.headers])})}search(e,t,r){return this._client.getAPIList(path`/vector_stores/${e}/search`,Page,{body:t,method:"post",...r,headers:buildHeaders([{"OpenAI-Beta":"assistants=v2"},r?.headers])})}}var _Webhooks_instances,_Webhooks_validateSecret,_Webhooks_getRequiredHeader,_OpenAI_instances,_a,_OpenAI_encoder,_OpenAI_baseURLOverridden;VectorStores.Files=Files,VectorStores.FileBatches=FileBatches;class Webhooks extends APIResource{constructor(){super(...arguments),_Webhooks_instances.add(this)}async unwrap(e,t,r=this._client.webhookSecret,n=300){return await this.verifySignature(e,t,r,n),JSON.parse(e)}async verifySignature(e,t,r=this._client.webhookSecret,n=300){if("undefined"==typeof crypto||"function"!=typeof crypto.subtle.importKey||"function"!=typeof crypto.subtle.verify)throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");__classPrivateFieldGet(this,_Webhooks_instances,"m",_Webhooks_validateSecret).call(this,r);const o=buildHeaders([t]).values,i=__classPrivateFieldGet(this,_Webhooks_instances,"m",_Webhooks_getRequiredHeader).call(this,o,"webhook-signature"),s=__classPrivateFieldGet(this,_Webhooks_instances,"m",_Webhooks_getRequiredHeader).call(this,o,"webhook-timestamp"),a=__classPrivateFieldGet(this,_Webhooks_instances,"m",_Webhooks_getRequiredHeader).call(this,o,"webhook-id"),c=parseInt(s,10);if(isNaN(c))throw new InvalidWebhookSignatureError("Invalid webhook timestamp format");const u=Math.floor(Date.now()/1e3);if(u-c>n)throw new InvalidWebhookSignatureError("Webhook timestamp is too old");if(c>u+n)throw new InvalidWebhookSignatureError("Webhook timestamp is too new");const l=i.split(" ").map(e=>e.startsWith("v1,")?e.substring(3):e),d=r.startsWith("whsec_")?Buffer.from(r.replace("whsec_",""),"base64"):Buffer.from(r,"utf-8"),h=a?`${a}.${s}.${e}`:`${s}.${e}`,f=await crypto.subtle.importKey("raw",d,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const p of l)try{const e=Buffer.from(p,"base64");if(await crypto.subtle.verify("HMAC",f,e,(new TextEncoder).encode(h)))return}catch{continue}throw new InvalidWebhookSignatureError("The given webhook signature does not match the expected signature")}}_Webhooks_instances=new WeakSet,_Webhooks_validateSecret=function(e){if("string"!=typeof e||0===e.length)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},_Webhooks_getRequiredHeader=function(e,t){if(!e)throw new Error("Headers are required");const r=e.get(t);if(null==r)throw new Error(`Missing required header: ${t}`);return r};let OpenAI$1=class{constructor({baseURL:e=readEnv("OPENAI_BASE_URL"),apiKey:t=readEnv("OPENAI_API_KEY"),organization:r=readEnv("OPENAI_ORG_ID")??null,project:n=readEnv("OPENAI_PROJECT_ID")??null,webhookSecret:o=readEnv("OPENAI_WEBHOOK_SECRET")??null,...i}={}){if(_OpenAI_instances.add(this),_OpenAI_encoder.set(this,void 0),this.completions=new Completions(this),this.chat=new Chat(this),this.embeddings=new Embeddings(this),this.files=new Files$1(this),this.images=new Images(this),this.audio=new Audio(this),this.moderations=new Moderations(this),this.models=new Models(this),this.fineTuning=new FineTuning(this),this.graders=new Graders(this),this.vectorStores=new VectorStores(this),this.webhooks=new Webhooks(this),this.beta=new Beta(this),this.batches=new Batches(this),this.uploads=new Uploads(this),this.responses=new Responses(this),this.evals=new Evals(this),this.containers=new Containers(this),void 0===t)throw new OpenAIError("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const s={apiKey:t,organization:r,project:n,webhookSecret:o,...i,baseURL:e||"https://api.openai.com/v1"};if(!s.dangerouslyAllowBrowser&&isRunningInBrowser())throw new OpenAIError("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");this.baseURL=s.baseURL,this.timeout=s.timeout??_a.DEFAULT_TIMEOUT,this.logger=s.logger??console;const a="warn";this.logLevel=a,this.logLevel=parseLogLevel(s.logLevel,"ClientOptions.logLevel",this)??parseLogLevel(readEnv("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??a,this.fetchOptions=s.fetchOptions,this.maxRetries=s.maxRetries??2,this.fetch=s.fetch??getDefaultFetch(),__classPrivateFieldSet(this,_OpenAI_encoder,FallbackEncoder),this._options=s,this.apiKey=t,this.organization=r,this.project=n,this.webhookSecret=o}withOptions(e){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...e})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){}authHeaders(e){return buildHeaders([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(e){return stringify(e,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${VERSION}`}defaultIdempotencyKey(){return`stainless-node-retry-${uuid4()}`}makeStatusError(e,t,r,n){return APIError.generate(e,t,r,n)}buildURL(e,t,r){const n=!__classPrivateFieldGet(this,_OpenAI_instances,"m",_OpenAI_baseURLOverridden).call(this)&&r||this.baseURL,o=isAbsoluteURL(e)?new URL(e):new URL(n+(n.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),i=this.defaultQuery();return isEmptyObj$1(i)||(t={...i,...t}),"object"==typeof t&&t&&!Array.isArray(t)&&(o.search=this.stringifyQuery(t)),o.toString()}async prepareOptions(e){}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(r=>({method:e,path:t,...r})))}request(e,t=null){return new APIPromise(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){const n=await e,o=n.maxRetries??this.maxRetries;null==t&&(t=o),await this.prepareOptions(n);const{req:i,url:s,timeout:a}=this.buildRequest(n,{retryCount:o-t});await this.prepareRequest(i,{url:s,options:n});const c="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),u=void 0===r?"":`, retryOf: ${r}`,l=Date.now();if(loggerFor(this).debug(`[${c}] sending request`,formatRequestDetails({retryOfRequestLogID:r,method:n.method,url:s,options:n,headers:i.headers})),n.signal?.aborted)throw new APIUserAbortError;const d=new AbortController,h=await this.fetchWithTimeout(s,i,a,d).catch(castToError),f=Date.now();if(h instanceof Error){const e=`retrying, ${t} attempts remaining`;if(n.signal?.aborted)throw new APIUserAbortError;const o=isAbortError(h)||/timed? ?out/i.test(String(h)+("cause"in h?String(h.cause):""));if(t)return loggerFor(this).info(`[${c}] connection ${o?"timed out":"failed"} - ${e}`),loggerFor(this).debug(`[${c}] connection ${o?"timed out":"failed"} (${e})`,formatRequestDetails({retryOfRequestLogID:r,url:s,durationMs:f-l,message:h.message})),this.retryRequest(n,t,r??c);if(loggerFor(this).info(`[${c}] connection ${o?"timed out":"failed"} - error; no more retries left`),loggerFor(this).debug(`[${c}] connection ${o?"timed out":"failed"} (error; no more retries left)`,formatRequestDetails({retryOfRequestLogID:r,url:s,durationMs:f-l,message:h.message})),o)throw new APIConnectionTimeoutError;throw new APIConnectionError({cause:h})}const p=`[${c}${u}${[...h.headers.entries()].filter(([e])=>"x-request-id"===e).map(([e,t])=>", "+e+": "+JSON.stringify(t)).join("")}] ${i.method} ${s} ${h.ok?"succeeded":"failed"} with status ${h.status} in ${f-l}ms`;if(!h.ok){const e=this.shouldRetry(h);if(t&&e){const e=`retrying, ${t} attempts remaining`;return await CancelReadableStream(h.body),loggerFor(this).info(`${p} - ${e}`),loggerFor(this).debug(`[${c}] response error (${e})`,formatRequestDetails({retryOfRequestLogID:r,url:h.url,status:h.status,headers:h.headers,durationMs:f-l})),this.retryRequest(n,t,r??c,h.headers)}const o=e?"error; no more retries left":"error; not retryable";loggerFor(this).info(`${p} - ${o}`);const i=await h.text().catch(e=>castToError(e).message),s=safeJSON(i),a=s?void 0:i;loggerFor(this).debug(`[${c}] response error (${o})`,formatRequestDetails({retryOfRequestLogID:r,url:h.url,status:h.status,headers:h.headers,message:a,durationMs:Date.now()-l}));throw this.makeStatusError(h.status,s,a,h.headers)}return loggerFor(this).info(p),loggerFor(this).debug(`[${c}] response start`,formatRequestDetails({retryOfRequestLogID:r,url:h.url,status:h.status,headers:h.headers,durationMs:f-l})),{response:h,options:n,controller:d,requestLogID:c,retryOfRequestLogID:r,startTime:l}}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}requestAPIList(e,t){const r=this.makeRequest(t,null,void 0);return new PagePromise(this,r,e)}async fetchWithTimeout(e,t,r,n){const{signal:o,method:i,...s}=t||{};o&&o.addEventListener("abort",()=>n.abort());const a=setTimeout(()=>n.abort(),r),c=globalThis.ReadableStream&&s.body instanceof globalThis.ReadableStream||"object"==typeof s.body&&null!==s.body&&Symbol.asyncIterator in s.body,u={signal:n.signal,...c?{duplex:"half"}:{},method:"GET",...s};i&&(u.method=i.toUpperCase());try{return await this.fetch.call(void 0,e,u)}finally{clearTimeout(a)}}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(408===e.status||(409===e.status||(429===e.status||e.status>=500)))}async retryRequest(e,t,r,n){let o;const i=n?.get("retry-after-ms");if(i){const e=parseFloat(i);Number.isNaN(e)||(o=e)}const s=n?.get("retry-after");if(s&&!o){const e=parseFloat(s);o=Number.isNaN(e)?Date.parse(s)-Date.now():1e3*e}if(!(o&&0<=o&&o<6e4)){const r=e.maxRetries??this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(t,r)}return await sleep(o),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){const r=t-e;return Math.min(.5*Math.pow(2,r),8)*(1-.25*Math.random())*1e3}buildRequest(e,{retryCount:t=0}={}){const r={...e},{method:n,path:o,query:i,defaultBaseURL:s}=r,a=this.buildURL(o,i,s);"timeout"in r&&validatePositiveInteger("timeout",r.timeout),r.timeout=r.timeout??this.timeout;const{bodyHeaders:c,body:u}=this.buildBody({options:r});return{req:{method:n,headers:this.buildHeaders({options:e,method:n,bodyHeaders:c,retryCount:t}),...r.signal&&{signal:r.signal},...globalThis.ReadableStream&&u instanceof globalThis.ReadableStream&&{duplex:"half"},...u&&{body:u},...this.fetchOptions??{},...r.fetchOptions??{}},url:a,timeout:r.timeout}}buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:n}){let o={};this.idempotencyHeader&&"get"!==t&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),o[this.idempotencyHeader]=e.idempotencyKey);const i=buildHeaders([o,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(n),...e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{},...getPlatformHeaders(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},this.authHeaders(e),this._options.defaultHeaders,r,e.headers]);return this.validateHeaders(i),i.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=buildHeaders([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||"string"==typeof e&&r.values.has("content-type")||e instanceof Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:"object"==typeof e&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&"function"==typeof e.next)?{bodyHeaders:void 0,body:ReadableStreamFrom(e)}:__classPrivateFieldGet(this,_OpenAI_encoder,"f").call(this,{body:e,headers:r})}};function $constructor(e,t,r){function n(r,n){var o;Object.defineProperty(r,"_zod",{value:r._zod??{},enumerable:!1}),(o=r._zod).traits??(o.traits=new Set),r._zod.traits.add(e),t(r,n);for(const e in s.prototype)e in r||Object.defineProperty(r,e,{value:s.prototype[e].bind(r)});r._zod.constr=s,r._zod.def=n}const o=r?.Parent??Object;class i extends o{}function s(e){var t;const o=r?.Parent?new i:this;n(o,e),(t=o._zod).deferred??(t.deferred=[]);for(const r of o._zod.deferred)r();return o}return Object.defineProperty(i,"name",{value:e}),Object.defineProperty(s,"init",{value:n}),Object.defineProperty(s,Symbol.hasInstance,{value:t=>!!(r?.Parent&&t instanceof r.Parent)||t?._zod?.traits?.has(e)}),Object.defineProperty(s,"name",{value:e}),s}_a=OpenAI$1,_OpenAI_encoder=new WeakMap,_OpenAI_instances=new WeakSet,_OpenAI_baseURLOverridden=function(){return"https://api.openai.com/v1"!==this.baseURL},OpenAI$1.OpenAI=_a,OpenAI$1.DEFAULT_TIMEOUT=6e5,OpenAI$1.OpenAIError=OpenAIError,OpenAI$1.APIError=APIError,OpenAI$1.APIConnectionError=APIConnectionError,OpenAI$1.APIConnectionTimeoutError=APIConnectionTimeoutError,OpenAI$1.APIUserAbortError=APIUserAbortError,OpenAI$1.NotFoundError=NotFoundError,OpenAI$1.ConflictError=ConflictError,OpenAI$1.RateLimitError=RateLimitError,OpenAI$1.BadRequestError=BadRequestError,OpenAI$1.AuthenticationError=AuthenticationError,OpenAI$1.InternalServerError=InternalServerError,OpenAI$1.PermissionDeniedError=PermissionDeniedError,OpenAI$1.UnprocessableEntityError=UnprocessableEntityError,OpenAI$1.InvalidWebhookSignatureError=InvalidWebhookSignatureError,OpenAI$1.toFile=toFile,OpenAI$1.Completions=Completions,OpenAI$1.Chat=Chat,OpenAI$1.Embeddings=Embeddings,OpenAI$1.Files=Files$1,OpenAI$1.Images=Images,OpenAI$1.Audio=Audio,OpenAI$1.Moderations=Moderations,OpenAI$1.Models=Models,OpenAI$1.FineTuning=FineTuning,OpenAI$1.Graders=Graders,OpenAI$1.VectorStores=VectorStores,OpenAI$1.Webhooks=Webhooks,OpenAI$1.Beta=Beta,OpenAI$1.Batches=Batches,OpenAI$1.Uploads=Uploads,OpenAI$1.Responses=Responses,OpenAI$1.Evals=Evals,OpenAI$1.Containers=Containers;class $ZodAsyncError extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}const globalConfig={};function config(e){return globalConfig}function getEnumValues(e){const t=Object.values(e).filter(e=>"number"==typeof e);return Object.entries(e).filter(([e,r])=>-1===t.indexOf(+e)).map(([e,t])=>t)}function jsonStringifyReplacer(e,t){return"bigint"==typeof t?t.toString():t}function defineLazy(e,t,r){Object.defineProperty(e,t,{get(){{const n=r();return e[t]=n,n}},set(r){Object.defineProperty(e,t,{value:r})},configurable:!0})}function randomString(e=10){const t="abcdefghijklmnopqrstuvwxyz";let r="";for(let n=0;n<e;n++)r+=t[Math.floor(26*Math.random())];return r}const captureStackTrace=Error.captureStackTrace?Error.captureStackTrace:(...e)=>{};function clone(e,t,r){const n=new e._zod.constr(t??e._zod.def);return t&&!r?.parent||(n._zod.parent=e),n}function normalizeParams(e){return{}}function aborted(e,t=0){for(let r=t;r<e.issues.length;r++)if(!0!==e.issues[r]?.continue)return!0;return!1}function unwrapMessage(e){return"string"==typeof e?e:e?.message}function finalizeIssue(e,t,r){const n={...e,path:e.path??[]};if(!e.message){const o=unwrapMessage(e.inst?._zod.def?.error?.(e))??unwrapMessage(t?.error?.(e))??unwrapMessage(r.customError?.(e))??unwrapMessage(r.localeError?.(e))??"Invalid input";n.message=o}return delete n.inst,delete n.continue,t?.reportInput||delete n.input,n}const initializer=(e,t)=>{e.name="$ZodError",Object.defineProperty(e,"_zod",{value:e._zod,enumerable:!1}),Object.defineProperty(e,"issues",{value:t,enumerable:!1}),Object.defineProperty(e,"message",{get:()=>JSON.stringify(t,jsonStringifyReplacer,2),enumerable:!0})},$ZodError=$constructor("$ZodError",initializer),$ZodRealError=$constructor("$ZodError",initializer,{Parent:Error}),_parse=e=>(t,r,n,o)=>{const i=n?Object.assign(n,{async:!1}):{async:!1},s=t._zod.run({value:r,issues:[]},i);if(s instanceof Promise)throw new $ZodAsyncError;if(s.issues.length){const t=new(o?.Err??e)(s.issues.map(e=>finalizeIssue(e,i,config())));throw captureStackTrace(t,o?.callee),t}return s.value},parse$1=_parse($ZodRealError),_parseAsync=e=>async(t,r,n,o)=>{const i=n?Object.assign(n,{async:!0}):{async:!0};let s=t._zod.run({value:r,issues:[]},i);if(s instanceof Promise&&(s=await s),s.issues.length){const t=new(o?.Err??e)(s.issues.map(e=>finalizeIssue(e,i,config())));throw captureStackTrace(t,o?.callee),t}return s.value},parseAsync=_parseAsync($ZodRealError),_safeParse=e=>(t,r,n)=>{const o=n?{...n,async:!1}:{async:!1},i=t._zod.run({value:r,issues:[]},o);if(i instanceof Promise)throw new $ZodAsyncError;return i.issues.length?{success:!1,error:new(e??$ZodError)(i.issues.map(e=>finalizeIssue(e,o,config())))}:{success:!0,data:i.value}},safeParse=_safeParse($ZodRealError),_safeParseAsync=e=>async(t,r,n)=>{const o=n?Object.assign(n,{async:!0}):{async:!0};let i=t._zod.run({value:r,issues:[]},o);return i instanceof Promise&&(i=await i),i.issues.length?{success:!1,error:new e(i.issues.map(e=>finalizeIssue(e,o,config())))}:{success:!0,data:i.value}},safeParseAsync=_safeParseAsync($ZodRealError),version={major:4,minor:0,patch:0},$ZodType=$constructor("$ZodType",(e,t)=>{var r;e??(e={}),defineLazy(e._zod,"id",()=>t.type+"_"+randomString(10)),e._zod.def=t,e._zod.bag=e._zod.bag||{},e._zod.version=version;const n=[...e._zod.def.checks??[]];e._zod.traits.has("$ZodCheck")&&n.unshift(e);for(const o of n)for(const t of o._zod.onattach)t(e);if(0===n.length)(r=e._zod).deferred??(r.deferred=[]),e._zod.deferred?.push(()=>{e._zod.run=e._zod.parse});else{const t=(e,t,r)=>{let n,o=aborted(e);for(const i of t){if(i._zod.when){if(!i._zod.when(e))continue}else if(o)continue;const t=e.issues.length,s=i._zod.check(e);if(s instanceof Promise&&!1===r?.async)throw new $ZodAsyncError;if(n||s instanceof Promise)n=(n??Promise.resolve()).then(async()=>{await s;e.issues.length!==t&&(o||(o=aborted(e,t)))});else{if(e.issues.length===t)continue;o||(o=aborted(e,t))}}return n?n.then(()=>e):e};e._zod.run=(r,o)=>{const i=e._zod.parse(r,o);if(i instanceof Promise){if(!1===o.async)throw new $ZodAsyncError;return i.then(e=>t(e,n,o))}return t(i,n,o)}}e["~standard"]={validate:t=>{try{const r=safeParse(e,t);return r.success?{value:r.data}:{issues:r.error?.issues}}catch(r){return safeParseAsync(e,t).then(e=>e.success?{value:e.data}:{issues:e.error?.issues})}},vendor:"zod",version:1}}),$ZodNever=$constructor("$ZodNever",(e,t)=>{$ZodType.init(e,t),e._zod.parse=(t,r)=>(t.issues.push({expected:"never",code:"invalid_type",input:t.value,inst:e}),t)});class $ZodRegistry{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...t){const r=t[0];if(this._map.set(e,r),r&&"object"==typeof r&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}remove(e){return this._map.delete(e),this}get(e){const t=e._zod.parent;if(t){const r={...this.get(t)??{}};return delete r.id,{...r,...this._map.get(e)}}return this._map.get(e)}has(e){return this._map.has(e)}}function registry(){return new $ZodRegistry}const globalRegistry=registry();function _never(e,t){return new e({type:"never",...normalizeParams()})}class JSONSchemaGenerator{constructor(e){this.counter=0,this.metadataRegistry=e?.metadata??globalRegistry,this.target=e?.target??"draft-2020-12",this.unrepresentable=e?.unrepresentable??"throw",this.override=e?.override??(()=>{}),this.io=e?.io??"output",this.seen=new Map}process(e,t={path:[],schemaPath:[]}){var r;const n=e._zod.def,o={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},i=this.seen.get(e);if(i){i.count++;return t.schemaPath.includes(e)&&(i.cycle=t.path),i.schema}const s={schema:{},count:1,cycle:void 0};this.seen.set(e,s);const a=e._zod.toJSONSchema?.();if(a)s.schema=a;else{const r={...t,schemaPath:[...t.schemaPath,e],path:t.path},i=e._zod.parent;if(i)s.ref=i,this.process(i,r),this.seen.get(i).isParent=!0;else{const t=s.schema;switch(n.type){case"string":{const r=t;r.type="string";const{minimum:n,maximum:i,format:a,patterns:c,contentEncoding:u}=e._zod.bag;if("number"==typeof n&&(r.minLength=n),"number"==typeof i&&(r.maxLength=i),a&&(r.format=o[a]??a,""===r.format&&delete r.format),u&&(r.contentEncoding=u),c&&c.size>0){const e=[...c];1===e.length?r.pattern=e[0].source:e.length>1&&(s.schema.allOf=[...e.map(e=>({..."draft-7"===this.target?{type:"string"}:{},pattern:e.source}))])}break}case"number":{const r=t,{minimum:n,maximum:o,format:i,multipleOf:s,exclusiveMaximum:a,exclusiveMinimum:c}=e._zod.bag;"string"==typeof i&&i.includes("int")?r.type="integer":r.type="number","number"==typeof c&&(r.exclusiveMinimum=c),"number"==typeof n&&(r.minimum=n,"number"==typeof c&&(c>=n?delete r.minimum:delete r.exclusiveMinimum)),"number"==typeof a&&(r.exclusiveMaximum=a),"number"==typeof o&&(r.maximum=o,"number"==typeof a&&(a<=o?delete r.maximum:delete r.exclusiveMaximum)),"number"==typeof s&&(r.multipleOf=s);break}case"boolean":t.type="boolean";break;case"bigint":if("throw"===this.unrepresentable)throw new Error("BigInt cannot be represented in JSON Schema");break;case"symbol":if("throw"===this.unrepresentable)throw new Error("Symbols cannot be represented in JSON Schema");break;case"undefined":t.type="null";break;case"null":t.type="null";break;case"any":case"unknown":break;case"never":t.not={};break;case"void":if("throw"===this.unrepresentable)throw new Error("Void cannot be represented in JSON Schema");break;case"date":if("throw"===this.unrepresentable)throw new Error("Date cannot be represented in JSON Schema");break;case"array":{const o=t,{minimum:i,maximum:s}=e._zod.bag;"number"==typeof i&&(o.minItems=i),"number"==typeof s&&(o.maxItems=s),o.type="array",o.items=this.process(n.element,{...r,path:[...r.path,"items"]});break}case"object":{const e=t;e.type="object",e.properties={};const o=n.shape;for(const t in o)e.properties[t]=this.process(o[t],{...r,path:[...r.path,"properties",t]});const i=new Set(Object.keys(o)),s=new Set([...i].filter(e=>{const t=n.shape[e]._zod;return"input"===this.io?void 0===t.optin:void 0===t.optout}));s.size>0&&(e.required=Array.from(s)),"never"===n.catchall?._zod.def.type?e.additionalProperties=!1:n.catchall?n.catchall&&(e.additionalProperties=this.process(n.catchall,{...r,path:[...r.path,"additionalProperties"]})):"output"===this.io&&(e.additionalProperties=!1);break}case"union":t.anyOf=n.options.map((e,t)=>this.process(e,{...r,path:[...r.path,"anyOf",t]}));break;case"intersection":{const e=t,o=this.process(n.left,{...r,path:[...r.path,"allOf",0]}),i=this.process(n.right,{...r,path:[...r.path,"allOf",1]}),s=e=>"allOf"in e&&1===Object.keys(e).length,a=[...s(o)?o.allOf:[o],...s(i)?i.allOf:[i]];e.allOf=a;break}case"tuple":{const o=t;o.type="array";const i=n.items.map((e,t)=>this.process(e,{...r,path:[...r.path,"prefixItems",t]}));if("draft-2020-12"===this.target?o.prefixItems=i:o.items=i,n.rest){const e=this.process(n.rest,{...r,path:[...r.path,"items"]});"draft-2020-12"===this.target?o.items=e:o.additionalItems=e}n.rest&&(o.items=this.process(n.rest,{...r,path:[...r.path,"items"]}));const{minimum:s,maximum:a}=e._zod.bag;"number"==typeof s&&(o.minItems=s),"number"==typeof a&&(o.maxItems=a);break}case"record":{const e=t;e.type="object",e.propertyNames=this.process(n.keyType,{...r,path:[...r.path,"propertyNames"]}),e.additionalProperties=this.process(n.valueType,{...r,path:[...r.path,"additionalProperties"]});break}case"map":if("throw"===this.unrepresentable)throw new Error("Map cannot be represented in JSON Schema");break;case"set":if("throw"===this.unrepresentable)throw new Error("Set cannot be represented in JSON Schema");break;case"enum":{const e=t,r=getEnumValues(n.entries);r.every(e=>"number"==typeof e)&&(e.type="number"),r.every(e=>"string"==typeof e)&&(e.type="string"),e.enum=r;break}case"literal":{const e=t,r=[];for(const t of n.values)if(void 0===t){if("throw"===this.unrepresentable)throw new Error("Literal `undefined` cannot be represented in JSON Schema")}else if("bigint"==typeof t){if("throw"===this.unrepresentable)throw new Error("BigInt literals cannot be represented in JSON Schema");r.push(Number(t))}else r.push(t);if(0===r.length);else if(1===r.length){const t=r[0];e.type=null===t?"null":typeof t,e.const=t}else r.every(e=>"number"==typeof e)&&(e.type="number"),r.every(e=>"string"==typeof e)&&(e.type="string"),r.every(e=>"boolean"==typeof e)&&(e.type="string"),r.every(e=>null===e)&&(e.type="null"),e.enum=r;break}case"file":{const r=t,n={type:"string",format:"binary",contentEncoding:"binary"},{minimum:o,maximum:i,mime:s}=e._zod.bag;void 0!==o&&(n.minLength=o),void 0!==i&&(n.maxLength=i),s?1===s.length?(n.contentMediaType=s[0],Object.assign(r,n)):r.anyOf=s.map(e=>({...n,contentMediaType:e})):Object.assign(r,n);break}case"transform":if("throw"===this.unrepresentable)throw new Error("Transforms cannot be represented in JSON Schema");break;case"nullable":{const e=this.process(n.innerType,r);t.anyOf=[e,{type:"null"}];break}case"nonoptional":case"promise":case"optional":this.process(n.innerType,r),s.ref=n.innerType;break;case"success":t.type="boolean";break;case"default":this.process(n.innerType,r),s.ref=n.innerType,t.default=JSON.parse(JSON.stringify(n.defaultValue));break;case"prefault":this.process(n.innerType,r),s.ref=n.innerType,"input"===this.io&&(t._prefault=JSON.parse(JSON.stringify(n.defaultValue)));break;case"catch":{let e;this.process(n.innerType,r),s.ref=n.innerType;try{e=n.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}t.default=e;break}case"nan":if("throw"===this.unrepresentable)throw new Error("NaN cannot be represented in JSON Schema");break;case"template_literal":{const r=t,n=e._zod.pattern;if(!n)throw new Error("Pattern not found in template literal");r.type="string",r.pattern=n.source;break}case"pipe":{const e="input"===this.io?"transform"===n.in._zod.def.type?n.out:n.in:n.out;this.process(e,r),s.ref=e;break}case"readonly":this.process(n.innerType,r),s.ref=n.innerType,t.readOnly=!0;break;case"lazy":{const t=e._zod.innerType;this.process(t,r),s.ref=t;break}case"custom":if("throw"===this.unrepresentable)throw new Error("Custom types cannot be represented in JSON Schema")}}}const c=this.metadataRegistry.get(e);c&&Object.assign(s.schema,c),"input"===this.io&&isTransforming(e)&&(delete s.schema.examples,delete s.schema.default),"input"===this.io&&s.schema._prefault&&((r=s.schema).default??(r.default=s.schema._prefault)),delete s.schema._prefault;return this.seen.get(e).schema}emit(e,t){const r={cycles:t?.cycles??"ref",reused:t?.reused??"inline",external:t?.external??void 0},n=this.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const o=e=>{const t="draft-2020-12"===this.target?"$defs":"definitions";if(r.external){const n=r.external.registry.get(e[0])?.id;if(n)return{ref:r.external.uri(n)};const o=e[1].defId??e[1].schema.id??"schema"+this.counter++;return e[1].defId=o,{defId:o,ref:`${r.external.uri("__shared")}#/${t}/${o}`}}if(e[1]===n)return{ref:"#"};const o=`#/${t}/`,i=e[1].schema.id??"__schema"+this.counter++;return{defId:i,ref:o+i}},i=e=>{if(e[1].schema.$ref)return;const t=e[1],{ref:r,defId:n}=o(e);t.def={...t.schema},n&&(t.defId=n);const i=t.schema;for(const o in i)delete i[o];i.$ref=r};for(const l of this.seen.entries()){const t=l[1];if(e===l[0]){i(l);continue}if(r.external){const t=r.external.registry.get(l[0])?.id;if(e!==l[0]&&t){i(l);continue}}const n=this.metadataRegistry.get(l[0])?.id;if(n)i(l);else if(t.cycle){if("throw"===r.cycles)throw new Error(`Cycle detected: #/${t.cycle?.join("/")}/<root>\n\nSet the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`);"ref"===r.cycles&&i(l)}else t.count>1&&"ref"===r.reused&&i(l)}const s=(e,t)=>{const r=this.seen.get(e),n=r.def??r.schema,o={...n};if(null===r.ref)return;const i=r.ref;if(r.ref=null,i){s(i,t);const e=this.seen.get(i).schema;e.$ref&&"draft-7"===t.target?(n.allOf=n.allOf??[],n.allOf.push(e)):(Object.assign(n,e),Object.assign(n,o))}r.isParent||this.override({zodSchema:e,jsonSchema:n})};for(const l of[...this.seen.entries()].reverse())s(l[0],{target:this.target});const a={};"draft-2020-12"===this.target?a.$schema="https://json-schema.org/draft/2020-12/schema":"draft-7"===this.target?a.$schema="http://json-schema.org/draft-07/schema#":console.warn(`Invalid target: ${this.target}`),Object.assign(a,n.def);const c=r.external?.defs??{};for(const l of this.seen.entries()){const e=l[1];e.def&&e.defId&&(c[e.defId]=e.def)}!r.external&&Object.keys(c).length>0&&("draft-2020-12"===this.target?a.$defs=c:a.definitions=c);try{return JSON.parse(JSON.stringify(a))}catch(u){throw new Error("Error converting schema to JSON.")}}}function toJSONSchema(e,t){if(e instanceof $ZodRegistry){const r=new JSONSchemaGenerator(t),n={};for(const t of e._idmap.entries()){const[e,n]=t;r.process(n)}const o={},i={registry:e,uri:t?.uri||(e=>e),defs:n};for(const s of e._idmap.entries()){const[e,n]=s;o[e]=r.emit(n,{...t,external:i})}if(Object.keys(n).length>0){const e="draft-2020-12"===r.target?"$defs":"definitions";o.__shared={[e]:n}}return{schemas:o}}const r=new JSONSchemaGenerator(t);return r.process(e),r.emit(e,t)}function isTransforming(e,t){const r=t??{seen:new Set};if(r.seen.has(e))return!1;r.seen.add(e);const n=e._zod.def;switch(n.type){case"string":case"number":case"bigint":case"boolean":case"date":case"symbol":case"undefined":case"null":case"any":case"unknown":case"never":case"void":case"literal":case"enum":case"nan":case"file":case"template_literal":case"custom":case"success":case"catch":return!1;case"array":return isTransforming(n.element,r);case"object":for(const e in n.shape)if(isTransforming(n.shape[e],r))return!0;return!1;case"union":for(const e of n.options)if(isTransforming(e,r))return!0;return!1;case"intersection":return isTransforming(n.left,r)||isTransforming(n.right,r);case"tuple":for(const e of n.items)if(isTransforming(e,r))return!0;return!(!n.rest||!isTransforming(n.rest,r));case"record":case"map":return isTransforming(n.keyType,r)||isTransforming(n.valueType,r);case"set":return isTransforming(n.valueType,r);case"promise":case"optional":case"nonoptional":case"nullable":case"readonly":case"default":case"prefault":return isTransforming(n.innerType,r);case"lazy":return isTransforming(n.getter(),r);case"transform":return!0;case"pipe":return isTransforming(n.in,r)||isTransforming(n.out,r)}throw new Error(`Unknown schema type: ${n.type}`)}function parseJsonMarkdown(e,t=parsePartialJson){const r=(e=e.trim()).indexOf("```");if(-1===r)return t(e);let n=e.substring(r+3);n.startsWith("json\n")?n=n.substring(5):n.startsWith("json")?n=n.substring(4):n.startsWith("\n")&&(n=n.substring(1));const o=n.indexOf("```");let i=n;return-1!==o&&(i=n.substring(0,o)),t(i.trim())}function parsePartialJson(e){if(void 0===e)return null;try{return JSON.parse(e)}catch(i){}let t="";const r=[];let n=!1,o=!1;for(let s of e){if(n)'"'!==s||o?"\n"!==s||o?o="\\"===s&&!o:s="\\n":n=!1;else if('"'===s)n=!0,o=!1;else if("{"===s)r.push("}");else if("["===s)r.push("]");else if("}"===s||"]"===s){if(!r||r[r.length-1]!==s)return null;r.pop()}t+=s}n&&(t+='"');for(let s=r.length-1;s>=0;s-=1)t+=r[s];try{return JSON.parse(t)}catch(i){return null}}var decamelize,hasRequiredDecamelize;function requireDecamelize(){return hasRequiredDecamelize?decamelize:(hasRequiredDecamelize=1,decamelize=function(e,t){if("string"!=typeof e)throw new TypeError("Expected a string");return t=void 0===t?"_":t,e.replace(/([a-z\d])([A-Z])/g,"$1"+t+"$2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1"+t+"$2").toLowerCase()})}var decamelizeExports=requireDecamelize();const snakeCase=getDefaultExportFromCjs(decamelizeExports);var camelcase={exports:{}},hasRequiredCamelcase,util,util2,objectUtil,objectUtil2;function requireCamelcase(){if(hasRequiredCamelcase)return camelcase.exports;hasRequiredCamelcase=1;const e=/[\p{Lu}]/u,t=/[\p{Ll}]/u,r=/^[\p{Lu}](?![\p{Lu}])/gu,n=/([\p{Alpha}\p{N}_]|$)/u,o=/[_.\- ]+/,i=new RegExp("^"+o.source),s=new RegExp(o.source+n.source,"gu"),a=new RegExp("\\d+"+n.source,"gu"),c=(n,o)=>{if("string"!=typeof n&&!Array.isArray(n))throw new TypeError("Expected the input to be `string | string[]`");if(o={pascalCase:!1,preserveConsecutiveUppercase:!1,...o},0===(n=Array.isArray(n)?n.map(e=>e.trim()).filter(e=>e.length).join("-"):n.trim()).length)return"";const c=!1===o.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(o.locale),u=!1===o.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(o.locale);if(1===n.length)return o.pascalCase?u(n):c(n);return n!==c(n)&&(n=((r,n,o)=>{let i=!1,s=!1,a=!1;for(let c=0;c<r.length;c++){const u=r[c];i&&e.test(u)?(r=r.slice(0,c)+"-"+r.slice(c),i=!1,a=s,s=!0,c++):s&&a&&t.test(u)?(r=r.slice(0,c-1)+"-"+r.slice(c-1),a=s,s=!1,i=!0):(i=n(u)===u&&o(u)!==u,a=s,s=o(u)===u&&n(u)!==u)}return r})(n,c,u)),n=n.replace(i,""),n=o.preserveConsecutiveUppercase?((e,t)=>(r.lastIndex=0,e.replace(r,e=>t(e))))(n,c):c(n),o.pascalCase&&(n=u(n.charAt(0))+n.slice(1)),((e,t)=>(s.lastIndex=0,a.lastIndex=0,e.replace(s,(e,r)=>t(r)).replace(a,e=>t(e))))(n,u)};return camelcase.exports=c,camelcase.exports.default=c,camelcase.exports}function keyToJson(e,t){return t?.[e]||snakeCase(e)}function mapKeys(e,t,r){const n={};for(const o in e)Object.hasOwn(e,o)&&(n[t(o,r)]=e[o]);return n}function shallowCopy(e){return Array.isArray(e)?[...e]:{...e}}function replaceSecrets(e,t){const r=shallowCopy(e);for(const[n,o]of Object.entries(t)){const[e,...t]=n.split(".").reverse();let i=r;for(const r of t.reverse()){if(void 0===i[r])break;i[r]=shallowCopy(i[r]),i=i[r]}void 0!==i[e]&&(i[e]={lc:1,type:"secret",id:[o]})}return r}function get_lc_unique_name(e){const t=Object.getPrototypeOf(e);return"function"==typeof e.lc_name&&("function"!=typeof t.lc_name||e.lc_name()!==t.lc_name())?e.lc_name():e.name}requireCamelcase();class Serializable{static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,get_lc_unique_name(this.constructor)]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}constructor(e,...t){Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),void 0!==this.lc_serializable_keys?this.lc_kwargs=Object.fromEntries(Object.entries(e||{}).filter(([e])=>this.lc_serializable_keys?.includes(e))):this.lc_kwargs=e??{}}toJSON(){if(!this.lc_serializable)return this.toJSONNotImplemented();if(this.lc_kwargs instanceof Serializable||"object"!=typeof this.lc_kwargs||Array.isArray(this.lc_kwargs))return this.toJSONNotImplemented();const e={},t={},r=Object.keys(this.lc_kwargs).reduce((e,t)=>(e[t]=t in this?this[t]:this.lc_kwargs[t],e),{});for(let n=Object.getPrototypeOf(this);n;n=Object.getPrototypeOf(n))Object.assign(e,Reflect.get(n,"lc_aliases",this)),Object.assign(t,Reflect.get(n,"lc_secrets",this)),Object.assign(r,Reflect.get(n,"lc_attributes",this));return Object.keys(t).forEach(e=>{let t=this,n=r;const[o,...i]=e.split(".").reverse();for(const r of i.reverse()){if(!(r in t)||void 0===t[r])return;r in n&&void 0!==n[r]||("object"==typeof t[r]&&null!=t[r]?n[r]={}:Array.isArray(t[r])&&(n[r]=[])),t=t[r],n=n[r]}o in t&&void 0!==t[o]&&(n[o]=n[o]||t[o])}),{lc:1,type:"constructor",id:this.lc_id,kwargs:mapKeys(Object.keys(t).length?replaceSecrets(r,t):r,keyToJson,e)}}toJSONNotImplemented(){return{lc:1,type:"not_implemented",id:this.lc_id}}}function isDataContentBlock(e){return"object"==typeof e&&null!==e&&"type"in e&&"string"==typeof e.type&&"source_type"in e&&("url"===e.source_type||"base64"===e.source_type||"text"===e.source_type||"id"===e.source_type)}function isURLContentBlock(e){return isDataContentBlock(e)&&"url"===e.source_type&&"url"in e&&"string"==typeof e.url}function isBase64ContentBlock(e){return isDataContentBlock(e)&&"base64"===e.source_type&&"data"in e&&"string"==typeof e.data}function convertToOpenAIImageBlock(e){if(isDataContentBlock(e)){if("url"===e.source_type)return{type:"image_url",image_url:{url:e.url}};if("base64"===e.source_type){if(!e.mime_type)throw new Error("mime_type key is required for base64 data.");return{type:"image_url",image_url:{url:`data:${e.mime_type};base64,${e.data}`}}}}throw new Error("Unsupported source type. Only 'url' and 'base64' are supported.")}function parseMimeType(e){const t=e.split(";")[0].split("/");if(2!==t.length)throw new Error(`Invalid mime type: "${e}" - does not match type/subtype format.`);const r=t[0].trim(),n=t[1].trim();if(""===r||""===n)throw new Error(`Invalid mime type: "${e}" - type or subtype is empty.`);const o={};for(const i of e.split(";").slice(1)){const t=i.split("=");if(2!==t.length)throw new Error(`Invalid parameter syntax in mime type: "${e}".`);const r=t[0].trim(),n=t[1].trim();if(""===r)throw new Error(`Invalid parameter syntax in mime type: "${e}".`);o[r]=n}return{type:r,subtype:n,parameters:o}}function parseBase64DataUrl({dataUrl:e,asTypedArray:t=!1}){const r=e.match(/^data:(\w+\/\w+);base64,([A-Za-z0-9+/]+=*)$/);let n;if(r){n=r[1].toLowerCase();return{mime_type:n,data:t?Uint8Array.from(atob(r[2]),e=>e.charCodeAt(0)):r[2]}}}function convertToProviderContentBlock(e,t){if("text"===e.type){if(!t.fromStandardTextBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardTextBlock\` method.`);return t.fromStandardTextBlock(e)}if("image"===e.type){if(!t.fromStandardImageBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardImageBlock\` method.`);return t.fromStandardImageBlock(e)}if("audio"===e.type){if(!t.fromStandardAudioBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardAudioBlock\` method.`);return t.fromStandardAudioBlock(e)}if("file"===e.type){if(!t.fromStandardFileBlock)throw new Error(`Converter for ${t.providerName} does not implement \`fromStandardFileBlock\` method.`);return t.fromStandardFileBlock(e)}throw new Error(`Unable to convert content block type '${e.type}' to provider-specific format: not recognized.`)}function mergeContent(e,t){return"string"==typeof e?""===e?t:"string"==typeof t?e+t:Array.isArray(t)&&t.some(e=>isDataContentBlock(e))?[{type:"text",source_type:"text",text:e},...t]:[{type:"text",text:e},...t]:Array.isArray(t)?_mergeLists(e,t)??[...e,...t]:""===t?e:Array.isArray(e)&&e.some(e=>isDataContentBlock(e))?[...e,{type:"file",source_type:"text",text:t}]:[...e,{type:"text",text:t}]}function _mergeStatus(e,t){return"error"===e||"error"===t?"error":"success"}function stringifyWithDepthLimit(e,t){return JSON.stringify(function e(r,n){if("object"!=typeof r||null==r)return r;if(n>=t)return Array.isArray(r)?"[Array]":"[Object]";if(Array.isArray(r))return r.map(t=>e(t,n+1));const o={};for(const t of Object.keys(r))o[t]=e(r[t],n+1);return o}(e,0),null,2)}class BaseMessage extends Serializable{get lc_aliases(){return{additional_kwargs:"additional_kwargs",response_metadata:"response_metadata"}}get text(){return"string"==typeof this.content?this.content:Array.isArray(this.content)?this.content.map(e=>"string"==typeof e?e:"text"===e.type?e.text:"").join(""):""}getType(){return this._getType()}constructor(e,t){"string"==typeof e&&(e={content:e,additional_kwargs:t,response_metadata:{}}),e.additional_kwargs||(e.additional_kwargs={}),e.response_metadata||(e.response_metadata={}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","messages"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"additional_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"response_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.content=e.content,this.additional_kwargs=e.additional_kwargs,this.response_metadata=e.response_metadata,this.id=e.id}toDict(){return{type:this._getType(),data:this.toJSON().kwargs}}static lc_name(){return"BaseMessage"}get _printableFields(){return{id:this.id,content:this.content,name:this.name,additional_kwargs:this.additional_kwargs,response_metadata:this.response_metadata}}_updateId(e){this.id=e,this.lc_kwargs.id=e}get[Symbol.toStringTag](){return this.constructor.lc_name()}[Symbol.for("nodejs.util.inspect.custom")](e){if(null===e)return this;const t=stringifyWithDepthLimit(this._printableFields,Math.max(4,e));return`${this.constructor.lc_name()} ${t}`}}function _mergeDicts(e,t){const r={...e};for(const[n,o]of Object.entries(t))if(null==r[n])r[n]=o;else{if(null==o)continue;if(typeof r[n]!=typeof o||Array.isArray(r[n])!==Array.isArray(o))throw new Error(`field[${n}] already exists in the message chunk, but with a different type.`);if("string"==typeof r[n]){if("type"===n)continue;r[n]+=o}else if("object"!=typeof r[n]||Array.isArray(r[n]))if(Array.isArray(r[n]))r[n]=_mergeLists(r[n],o);else{if(r[n]===o)continue;console.warn(`field[${n}] already exists in this message chunk and value has unsupported type.`)}else r[n]=_mergeDicts(r[n],o)}return r}function _mergeLists(e,t){if(void 0!==e||void 0!==t){if(void 0===e||void 0===t)return e||t;{const r=[...e];for(const e of t)if("object"==typeof e&&"index"in e&&"number"==typeof e.index){const t=r.findIndex(t=>t.index===e.index);-1!==t?r[t]=_mergeDicts(r[t],e):r.push(e)}else{if("object"==typeof e&&"text"in e&&""===e.text)continue;r.push(e)}return r}}}function _mergeObj(e,t){if(!e&&!t)throw new Error("Cannot merge two undefined objects.");if(e&&t){if(typeof e!=typeof t)throw new Error(`Cannot merge objects of different types.\nLeft ${typeof e}\nRight ${typeof t}`);if("string"==typeof e&&"string"==typeof t)return e+t;if(Array.isArray(e)&&Array.isArray(t))return _mergeLists(e,t);if("object"==typeof e&&"object"==typeof t)return _mergeDicts(e,t);if(e===t)return e;throw new Error(`Can not merge objects of different types.\nLeft ${e}\nRight ${t}`)}return e||t}class BaseMessageChunk extends BaseMessage{}function _isMessageFieldWithRole(e){return"string"==typeof e.role}function isBaseMessage(e){return"function"==typeof e?._getType}function isBaseMessageChunk(e){return isBaseMessage(e)&&"function"==typeof e.concat}function isDirectToolOutput(e){return null!=e&&"object"==typeof e&&"lc_direct_tool_output"in e&&!0===e.lc_direct_tool_output}class ToolMessage extends BaseMessage{static lc_name(){return"ToolMessage"}get lc_aliases(){return{tool_call_id:"tool_call_id"}}constructor(e,t,r){"string"==typeof e&&(e={content:e,name:r,tool_call_id:t}),super(e),Object.defineProperty(this,"lc_direct_tool_output",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}_getType(){return"tool"}static isInstance(e){return"tool"===e._getType()}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}class ToolMessageChunk extends BaseMessageChunk{constructor(e){super(e),Object.defineProperty(this,"tool_call_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"artifact",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_id=e.tool_call_id,this.artifact=e.artifact,this.status=e.status}static lc_name(){return"ToolMessageChunk"}_getType(){return"tool"}concat(e){return new ToolMessageChunk({content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),artifact:_mergeObj(this.artifact,e.artifact),tool_call_id:this.tool_call_id,id:this.id??e.id,status:_mergeStatus(this.status,e.status)})}get _printableFields(){return{...super._printableFields,tool_call_id:this.tool_call_id,artifact:this.artifact}}}function defaultToolCallParser(e){const t=[],r=[];for(const o of e)if(o.function){const e=o.function.name;try{const r={name:e||"",args:JSON.parse(o.function.arguments)||{},id:o.id};t.push(r)}catch(n){r.push({name:e,args:o.function.arguments,id:o.id,error:"Malformed args."})}}return[t,r]}class AIMessage extends BaseMessage{get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls"}}constructor(e,t){let r;if("string"==typeof e)r={content:e,tool_calls:[],invalid_tool_calls:[],additional_kwargs:t??{}};else{r=e;const t=r.additional_kwargs?.tool_calls,o=r.tool_calls;null!=t&&t.length>0&&(void 0===o||0===o.length)&&console.warn(["New LangChain packages are available that more efficiently handle","tool calling.\n\nPlease upgrade your packages to versions that set","message tool calls. e.g., `yarn add @langchain/anthropic`,","yarn add @langchain/openai`, etc."].join(" "));try{if(null!=t&&void 0===o){const[e,n]=defaultToolCallParser(t);r.tool_calls=e??[],r.invalid_tool_calls=n??[]}else r.tool_calls=r.tool_calls??[],r.invalid_tool_calls=r.invalid_tool_calls??[]}catch(n){r.tool_calls=[],r.invalid_tool_calls=[]}}super(r),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"string"!=typeof r&&(this.tool_calls=r.tool_calls??this.tool_calls,this.invalid_tool_calls=r.invalid_tool_calls??this.invalid_tool_calls),this.usage_metadata=r.usage_metadata}static lc_name(){return"AIMessage"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}}function isAIMessage(e){return"ai"===e._getType()}function isAIMessageChunk(e){return"ai"===e._getType()}class AIMessageChunk extends BaseMessageChunk{constructor(e){let t;if("string"==typeof e)t={content:e,tool_calls:[],invalid_tool_calls:[],tool_call_chunks:[]};else if(void 0===e.tool_call_chunks)t={...e,tool_calls:e.tool_calls??[],invalid_tool_calls:[],tool_call_chunks:[],usage_metadata:void 0!==e.usage_metadata?e.usage_metadata:void 0};else{const n=[],o=[];for(const t of e.tool_call_chunks){let e={};try{if(e=parsePartialJson(t.args||"{}"),null===e||"object"!=typeof e||Array.isArray(e))throw new Error("Malformed tool call chunk args.");n.push({name:t.name??"",args:e,id:t.id,type:"tool_call"})}catch(r){o.push({name:t.name,args:t.args,id:t.id,error:"Malformed args.",type:"invalid_tool_call"})}}t={...e,tool_calls:n,invalid_tool_calls:o,usage_metadata:void 0!==e.usage_metadata?e.usage_metadata:void 0}}super(t),Object.defineProperty(this,"tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"invalid_tool_calls",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tool_call_chunks",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"usage_metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.tool_call_chunks=t.tool_call_chunks??this.tool_call_chunks,this.tool_calls=t.tool_calls??this.tool_calls,this.invalid_tool_calls=t.invalid_tool_calls??this.invalid_tool_calls,this.usage_metadata=t.usage_metadata}get lc_aliases(){return{...super.lc_aliases,tool_calls:"tool_calls",invalid_tool_calls:"invalid_tool_calls",tool_call_chunks:"tool_call_chunks"}}static lc_name(){return"AIMessageChunk"}_getType(){return"ai"}get _printableFields(){return{...super._printableFields,tool_calls:this.tool_calls,tool_call_chunks:this.tool_call_chunks,invalid_tool_calls:this.invalid_tool_calls,usage_metadata:this.usage_metadata}}concat(e){const t={content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),tool_call_chunks:[],id:this.id??e.id};if(void 0!==this.tool_call_chunks||void 0!==e.tool_call_chunks){const r=_mergeLists(this.tool_call_chunks,e.tool_call_chunks);void 0!==r&&r.length>0&&(t.tool_call_chunks=r)}if(void 0!==this.usage_metadata||void 0!==e.usage_metadata){const r={...(void 0!==this.usage_metadata?.input_token_details?.audio||void 0!==e.usage_metadata?.input_token_details?.audio)&&{audio:(this.usage_metadata?.input_token_details?.audio??0)+(e.usage_metadata?.input_token_details?.audio??0)},...(void 0!==this.usage_metadata?.input_token_details?.cache_read||void 0!==e.usage_metadata?.input_token_details?.cache_read)&&{cache_read:(this.usage_metadata?.input_token_details?.cache_read??0)+(e.usage_metadata?.input_token_details?.cache_read??0)},...(void 0!==this.usage_metadata?.input_token_details?.cache_creation||void 0!==e.usage_metadata?.input_token_details?.cache_creation)&&{cache_creation:(this.usage_metadata?.input_token_details?.cache_creation??0)+(e.usage_metadata?.input_token_details?.cache_creation??0)}},n={...(void 0!==this.usage_metadata?.output_token_details?.audio||void 0!==e.usage_metadata?.output_token_details?.audio)&&{audio:(this.usage_metadata?.output_token_details?.audio??0)+(e.usage_metadata?.output_token_details?.audio??0)},...(void 0!==this.usage_metadata?.output_token_details?.reasoning||void 0!==e.usage_metadata?.output_token_details?.reasoning)&&{reasoning:(this.usage_metadata?.output_token_details?.reasoning??0)+(e.usage_metadata?.output_token_details?.reasoning??0)}},o=this.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},i=e.usage_metadata??{input_tokens:0,output_tokens:0,total_tokens:0},s={input_tokens:o.input_tokens+i.input_tokens,output_tokens:o.output_tokens+i.output_tokens,total_tokens:o.total_tokens+i.total_tokens,...Object.keys(r).length>0&&{input_token_details:r},...Object.keys(n).length>0&&{output_token_details:n}};t.usage_metadata=s}return new AIMessageChunk(t)}}class ChatMessage extends BaseMessage{static lc_name(){return"ChatMessage"}static _chatMessageClass(){return ChatMessage}constructor(e,t){"string"==typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}static isInstance(e){return"generic"===e._getType()}get _printableFields(){return{...super._printableFields,role:this.role}}}class ChatMessageChunk extends BaseMessageChunk{static lc_name(){return"ChatMessageChunk"}constructor(e,t){"string"==typeof e&&(e={content:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}_getType(){return"generic"}concat(e){return new ChatMessageChunk({content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),role:this.role,id:this.id??e.id})}get _printableFields(){return{...super._printableFields,role:this.role}}}class FunctionMessageChunk extends BaseMessageChunk{static lc_name(){return"FunctionMessageChunk"}_getType(){return"function"}concat(e){return new FunctionMessageChunk({content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),name:this.name??"",id:this.id??e.id})}}class HumanMessage extends BaseMessage{static lc_name(){return"HumanMessage"}_getType(){return"human"}constructor(e,t){super(e,t)}}class HumanMessageChunk extends BaseMessageChunk{static lc_name(){return"HumanMessageChunk"}_getType(){return"human"}constructor(e,t){super(e,t)}concat(e){return new HumanMessageChunk({content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),id:this.id??e.id})}}class SystemMessage extends BaseMessage{static lc_name(){return"SystemMessage"}_getType(){return"system"}constructor(e,t){super(e,t)}}class SystemMessageChunk extends BaseMessageChunk{static lc_name(){return"SystemMessageChunk"}_getType(){return"system"}constructor(e,t){super(e,t)}concat(e){return new SystemMessageChunk({content:mergeContent(this.content,e.content),additional_kwargs:_mergeDicts(this.additional_kwargs,e.additional_kwargs),response_metadata:_mergeDicts(this.response_metadata,e.response_metadata),id:this.id??e.id})}}function addLangChainErrorFields$1(e,t){return e.lc_error_code=t,e.message=`${e.message}\n\nTroubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${t}/\n`,e}function _isToolCall(e){return!(!e||"object"!=typeof e||!("type"in e)||"tool_call"!==e.type)}function _configHasToolCallId(e){return!!(e&&"object"==typeof e&&"toolCall"in e&&null!=e.toolCall&&"object"==typeof e.toolCall&&"id"in e.toolCall&&"string"==typeof e.toolCall.id)}class ToolInputParsingException extends Error{constructor(e,t){super(e),Object.defineProperty(this,"output",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.output=t}}function _coerceToolCall(e){return _isToolCall(e)?e:"string"==typeof e.id&&"function"===e.type&&"object"==typeof e.function&&null!==e.function&&"arguments"in e.function&&"string"==typeof e.function.arguments&&"name"in e.function&&"string"==typeof e.function.name?{id:e.id,args:JSON.parse(e.function.arguments),name:e.function.name,type:"tool_call"}:e}function isSerializedConstructor(e){return"object"==typeof e&&null!=e&&1===e.lc&&Array.isArray(e.id)&&null!=e.kwargs&&"object"==typeof e.kwargs}function _constructMessageFromParams(e){let t,r;if(isSerializedConstructor(e)){const n=e.id.at(-1);t="HumanMessage"===n||"HumanMessageChunk"===n?"user":"AIMessage"===n||"AIMessageChunk"===n?"assistant":"SystemMessage"===n||"SystemMessageChunk"===n?"system":"FunctionMessage"===n||"FunctionMessageChunk"===n?"function":"ToolMessage"===n||"ToolMessageChunk"===n?"tool":"unknown",r=e.kwargs}else{const{type:n,...o}=e;t=n,r=o}if("human"===t||"user"===t)return new HumanMessage(r);if("ai"===t||"assistant"===t){const{tool_calls:e,...t}=r;if(!Array.isArray(e))return new AIMessage(r);const n=e.map(_coerceToolCall);return new AIMessage({...t,tool_calls:n})}if("system"===t)return new SystemMessage(r);if("developer"===t)return new SystemMessage({...r,additional_kwargs:{...r.additional_kwargs,__openai_role__:"developer"}});if("tool"===t&&"tool_call_id"in r)return new ToolMessage({...r,content:r.content,tool_call_id:r.tool_call_id,name:r.name});throw addLangChainErrorFields$1(new Error(`Unable to coerce message from array: only human, AI, system, developer, or tool message coercion is currently supported.\n\nReceived: ${JSON.stringify(e,null,2)}`),"MESSAGE_COERCION_FAILURE")}function coerceMessageLikeToMessage(e){if("string"==typeof e)return new HumanMessage(e);if(isBaseMessage(e))return e;if(Array.isArray(e)){const[t,r]=e;return _constructMessageFromParams({type:t,content:r})}if(_isMessageFieldWithRole(e)){const{role:t,...r}=e;return _constructMessageFromParams({...r,type:t})}return _constructMessageFromParams(e)}function getBufferString(e,t="Human",r="AI"){const n=[];for(const o of e){let e;if("human"===o._getType())e=t;else if("ai"===o._getType())e=r;else if("system"===o._getType())e="System";else if("function"===o._getType())e="Function";else if("tool"===o._getType())e="Tool";else{if("generic"!==o._getType())throw new Error(`Got unsupported message type: ${o._getType()}`);e=o.role}const i=o.name?`${o.name}, `:"",s="string"==typeof o.content?o.content:JSON.stringify(o.content,null,2);n.push(`${e}: ${i}${s}`)}return n.join("\n")}function convertToChunk(e){const t=e._getType();if("human"===t)return new HumanMessageChunk({...e});if("ai"===t){let t={...e};return"tool_calls"in t&&(t={...t,tool_call_chunks:t.tool_calls?.map(e=>({...e,type:"tool_call_chunk",index:void 0,args:JSON.stringify(e.args)}))}),new AIMessageChunk({...t})}if("system"===t)return new SystemMessageChunk({...e});if("function"===t)return new FunctionMessageChunk({...e});if(ChatMessage.isInstance(e))return new ChatMessageChunk({...e});throw new Error("Unknown message type.")}util2=util||(util={}),util2.assertEqual=e=>{},util2.assertIs=function(e){},util2.assertNever=function(e){throw new Error},util2.arrayToEnum=e=>{const t={};for(const r of e)t[r]=r;return t},util2.getValidEnumValues=e=>{const t=util2.objectKeys(e).filter(t=>"number"!=typeof e[e[t]]),r={};for(const n of t)r[n]=e[n];return util2.objectValues(r)},util2.objectValues=e=>util2.objectKeys(e).map(function(t){return e[t]}),util2.objectKeys="function"==typeof Object.keys?e=>Object.keys(e):e=>{const t=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t},util2.find=(e,t)=>{for(const r of e)if(t(r))return r},util2.isInteger="function"==typeof Number.isInteger?e=>Number.isInteger(e):e=>"number"==typeof e&&Number.isFinite(e)&&Math.floor(e)===e,util2.joinValues=function(e,t=" | "){return e.map(e=>"string"==typeof e?`'${e}'`:e).join(t)},util2.jsonStringifyReplacer=(e,t)=>"bigint"==typeof t?t.toString():t,objectUtil2=objectUtil||(objectUtil={}),objectUtil2.mergeShapes=(e,t)=>({...e,...t});const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=e=>{switch(typeof e){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return Number.isNaN(e)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(e)?ZodParsedType.array:null===e?ZodParsedType.null:e.then&&"function"==typeof e.then&&e.catch&&"function"==typeof e.catch?ZodParsedType.promise:"undefined"!=typeof Map&&e instanceof Map?ZodParsedType.map:"undefined"!=typeof Set&&e instanceof Set?ZodParsedType.set:"undefined"!=typeof Date&&e instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ZodError extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=e=>{this.issues=[...this.issues,e]},this.addIssues=(e=[])=>{this.issues=[...this.issues,...e]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(e){return e.message},r={_errors:[]},n=e=>{for(const o of e.issues)if("invalid_union"===o.code)o.unionErrors.map(n);else if("invalid_return_type"===o.code)n(o.returnTypeError);else if("invalid_arguments"===o.code)n(o.argumentsError);else if(0===o.path.length)r._errors.push(t(o));else{let e=r,n=0;for(;n<o.path.length;){const r=o.path[n];n===o.path.length-1?(e[r]=e[r]||{_errors:[]},e[r]._errors.push(t(o))):e[r]=e[r]||{_errors:[]},e=e[r],n++}}};return n(this),r}static assert(e){if(!(e instanceof ZodError))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(e=e=>e.message){const t={},r=[];for(const n of this.issues)if(n.path.length>0){const r=n.path[0];t[r]=t[r]||[],t[r].push(e(n))}else r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}}ZodError.create=e=>new ZodError(e);const errorMap=(e,t)=>{let r;switch(e.code){case ZodIssueCode.invalid_type:r=e.received===ZodParsedType.undefined?"Required":`Expected ${e.expected}, received ${e.received}`;break;case ZodIssueCode.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:r=`Unrecognized key(s) in object: ${util.joinValues(e.keys,", ")}`;break;case ZodIssueCode.invalid_union:r="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${util.joinValues(e.options)}`;break;case ZodIssueCode.invalid_enum_value:r=`Invalid enum value. Expected ${util.joinValues(e.options)}, received '${e.received}'`;break;case ZodIssueCode.invalid_arguments:r="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:r="Invalid function return type";break;case ZodIssueCode.invalid_date:r="Invalid date";break;case ZodIssueCode.invalid_string:"object"==typeof e.validation?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,"number"==typeof e.validation.position&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:util.assertNever(e.validation):r="regex"!==e.validation?`Invalid ${e.validation}`:"Invalid";break;case ZodIssueCode.too_small:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:"number"===e.type||"bigint"===e.type?`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:"date"===e.type?`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:"Invalid input";break;case ZodIssueCode.too_big:r="array"===e.type?`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:"string"===e.type?`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:"number"===e.type?`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"bigint"===e.type?`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:"date"===e.type?`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:"Invalid input";break;case ZodIssueCode.custom:r="Invalid input";break;case ZodIssueCode.invalid_intersection_types:r="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case ZodIssueCode.not_finite:r="Number must be finite";break;default:r=t.defaultError,util.assertNever(e)}return{message:r}};let overrideErrorMap=errorMap;function getErrorMap(){return overrideErrorMap}const makeIssue=e=>{const{data:t,path:r,errorMaps:n,issueData:o}=e,i=[...r,...o.path||[]],s={...o,path:i};if(void 0!==o.message)return{...o,path:i,message:o.message};let a="";const c=n.filter(e=>!!e).slice().reverse();for(const u of c)a=u(s,{data:t,defaultError:a}).message;return{...o,path:i,message:a}};function addIssueToContext(e,t){const r=getErrorMap(),n=makeIssue({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===errorMap?void 0:errorMap].filter(e=>!!e)});e.common.issues.push(n)}class ParseStatus{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(e,t){const r=[];for(const n of t){if("aborted"===n.status)return INVALID;"dirty"===n.status&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){const r=[];for(const n of t){const e=await n.key,t=await n.value;r.push({key:e,value:t})}return ParseStatus.mergeObjectSync(e,r)}static mergeObjectSync(e,t){const r={};for(const n of t){const{key:t,value:o}=n;if("aborted"===t.status)return INVALID;if("aborted"===o.status)return INVALID;"dirty"===t.status&&e.dirty(),"dirty"===o.status&&e.dirty(),"__proto__"===t.value||void 0===o.value&&!n.alwaysSet||(r[t.value]=o.value)}return{status:e.value,value:r}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=e=>({status:"dirty",value:e}),OK=e=>({status:"valid",value:e}),isAborted=e=>"aborted"===e.status,isDirty=e=>"dirty"===e.status,isValid=e=>"valid"===e.status,isAsync=e=>"undefined"!=typeof Promise&&e instanceof Promise;var errorUtil,errorUtil2;errorUtil2=errorUtil||(errorUtil={}),errorUtil2.errToObj=e=>"string"==typeof e?{message:e}:e||{},errorUtil2.toString=e=>"string"==typeof e?e:e?.message;class ParseInputLazyPath{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(e,t)=>{if(isValid(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new ZodError(e.common.issues);return this._error=t,this._error}}};function processCreateParams(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:o}=e;if(t&&(r||n))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(t)return{errorMap:t,description:o};return{errorMap:(t,o)=>{const{message:i}=e;return"invalid_enum_value"===t.code?{message:i??o.defaultError}:void 0===o.data?{message:i??n??o.defaultError}:"invalid_type"!==t.code?{message:o.defaultError}:{message:i??r??o.defaultError}},description:o}}class ZodType{get description(){return this._def.description}_getType(e){return getParsedType(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ParseStatus,ctx:{common:e.parent.common,data:e.data,parsedType:getParsedType(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(isAsync(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){const r={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},n=this._parseSync({data:e,path:r.path,parent:r});return handleResult(r,n)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)};if(!this["~standard"].async)try{const r=this._parseSync({data:e,path:[],parent:t});return isValid(r)?{value:r.value}:{issues:t.common.issues}}catch(r){r?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(e=>isValid(e)?{value:e.value}:{issues:t.common.issues})}async parseAsync(e,t){const r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){const r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:getParsedType(e)},n=this._parse({data:e,path:r.path,parent:r}),o=await(isAsync(n)?n:Promise.resolve(n));return handleResult(r,o)}refine(e,t){const r=e=>"string"==typeof t||void 0===t?{message:t}:"function"==typeof t?t(e):t;return this._refinement((t,n)=>{const o=e(t),i=()=>n.addIssue({code:ZodIssueCode.custom,...r(t)});return"undefined"!=typeof Promise&&o instanceof Promise?o.then(e=>!!e||(i(),!1)):!!o||(i(),!1)})}refinement(e,t){return this._refinement((r,n)=>!!e(r)||(n.addIssue("function"==typeof t?t(r,n):t),!1))}_refinement(e){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:e=>this["~validate"](e)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(e){return ZodUnion.create([this,e],this._def)}and(e){return ZodIntersection.create(this,e,this._def)}transform(e){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t="function"==typeof e?e:()=>e;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:t,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(e){const t="function"==typeof e?e:()=>e;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:t,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(e){return new(0,this.constructor)({...this._def,description:e})}pipe(e){return ZodPipeline.create(this,e)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex$2;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:null==e.precision&&(t=`${t}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${e.precision?"+":"?"}`}function timeRegex(e){return new RegExp(`^${timeRegexSource(e)}$`)}function datetimeRegex(e){let t=`${dateRegexSource}T${timeRegexSource(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function isValidIP(e,t){return!("v4"!==t&&t||!ipv4Regex.test(e))||!("v6"!==t&&t||!ipv6Regex.test(e))}function isValidJWT(e,t){if(!jwtRegex.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(n));return"object"==typeof o&&null!==o&&((!("typ"in o)||"JWT"===o?.typ)&&(!!o.alg&&(!t||o.alg===t)))}catch{return!1}}function isValidCidr(e,t){return!("v4"!==t&&t||!ipv4CidrRegex.test(e))||!("v6"!==t&&t||!ipv6CidrRegex.test(e))}class ZodString extends ZodType{_parse(e){this._def.coerce&&(e.data=String(e.data));if(this._getType(e)!==ZodParsedType.string){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:t.parsedType}),INVALID}const t=new ParseStatus;let r;for(const n of this._def.checks)if("min"===n.kind)e.data.length<n.value&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("max"===n.kind)e.data.length>n.value&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!1,message:n.message}),t.dirty());else if("length"===n.kind){const o=e.data.length>n.value,i=e.data.length<n.value;(o||i)&&(r=this._getOrReturnCtx(e,r),o?addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}):i&&addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:n.value,type:"string",inclusive:!0,exact:!0,message:n.message}),t.dirty())}else if("email"===n.kind)emailRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"email",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("emoji"===n.kind)emojiRegex$2||(emojiRegex$2=new RegExp(_emojiRegex,"u")),emojiRegex$2.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"emoji",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("uuid"===n.kind)uuidRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"uuid",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("nanoid"===n.kind)nanoidRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("cuid"===n.kind)cuidRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"cuid",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("cuid2"===n.kind)cuid2Regex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("ulid"===n.kind)ulidRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"ulid",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty());else if("url"===n.kind)try{new URL(e.data)}catch{r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"url",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty()}else if("regex"===n.kind){n.regex.lastIndex=0;n.regex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"regex",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty())}else if("trim"===n.kind)e.data=e.data.trim();else if("includes"===n.kind)e.data.includes(n.value,n.position)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.invalid_string,validation:{includes:n.value,position:n.position},message:n.message}),t.dirty());else if("toLowerCase"===n.kind)e.data=e.data.toLowerCase();else if("toUpperCase"===n.kind)e.data=e.data.toUpperCase();else if("startsWith"===n.kind)e.data.startsWith(n.value)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.invalid_string,validation:{startsWith:n.value},message:n.message}),t.dirty());else if("endsWith"===n.kind)e.data.endsWith(n.value)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.invalid_string,validation:{endsWith:n.value},message:n.message}),t.dirty());else if("datetime"===n.kind){datetimeRegex(n).test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.invalid_string,validation:"datetime",message:n.message}),t.dirty())}else if("date"===n.kind){dateRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.invalid_string,validation:"date",message:n.message}),t.dirty())}else if("time"===n.kind){timeRegex(n).test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.invalid_string,validation:"time",message:n.message}),t.dirty())}else"duration"===n.kind?durationRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"duration",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty()):"ip"===n.kind?isValidIP(e.data,n.version)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"ip",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty()):"jwt"===n.kind?isValidJWT(e.data,n.alg)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"jwt",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty()):"cidr"===n.kind?isValidCidr(e.data,n.version)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"cidr",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty()):"base64"===n.kind?base64Regex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"base64",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty()):"base64url"===n.kind?base64urlRegex.test(e.data)||(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{validation:"base64url",code:ZodIssueCode.invalid_string,message:n.message}),t.dirty()):util.assertNever(n);return{status:t.value,value:e.data}}_regex(e,t,r){return this.refinement(t=>e.test(t),{validation:t,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(r)})}_addCheck(e){return new ZodString({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...errorUtil.errToObj(e)})}url(e){return this._addCheck({kind:"url",...errorUtil.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...errorUtil.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...errorUtil.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...errorUtil.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...errorUtil.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...errorUtil.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...errorUtil.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...errorUtil.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...errorUtil.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...errorUtil.errToObj(e)})}datetime(e){return"string"==typeof e?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:void 0===e?.precision?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...errorUtil.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return"string"==typeof e?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:void 0===e?.precision?null:e?.precision,...errorUtil.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...errorUtil.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...errorUtil.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...errorUtil.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...errorUtil.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...errorUtil.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...errorUtil.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...errorUtil.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...errorUtil.errToObj(t)})}nonempty(e){return this.min(1,errorUtil.errToObj(e))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>"datetime"===e.kind)}get isDate(){return!!this._def.checks.find(e=>"date"===e.kind)}get isTime(){return!!this._def.checks.find(e=>"time"===e.kind)}get isDuration(){return!!this._def.checks.find(e=>"duration"===e.kind)}get isEmail(){return!!this._def.checks.find(e=>"email"===e.kind)}get isURL(){return!!this._def.checks.find(e=>"url"===e.kind)}get isEmoji(){return!!this._def.checks.find(e=>"emoji"===e.kind)}get isUUID(){return!!this._def.checks.find(e=>"uuid"===e.kind)}get isNANOID(){return!!this._def.checks.find(e=>"nanoid"===e.kind)}get isCUID(){return!!this._def.checks.find(e=>"cuid"===e.kind)}get isCUID2(){return!!this._def.checks.find(e=>"cuid2"===e.kind)}get isULID(){return!!this._def.checks.find(e=>"ulid"===e.kind)}get isIP(){return!!this._def.checks.find(e=>"ip"===e.kind)}get isCIDR(){return!!this._def.checks.find(e=>"cidr"===e.kind)}get isBase64(){return!!this._def.checks.find(e=>"base64"===e.kind)}get isBase64url(){return!!this._def.checks.find(e=>"base64url"===e.kind)}get minLength(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}function floatSafeRemainder(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,o=r>n?r:n;return Number.parseInt(e.toFixed(o).replace(".",""))%Number.parseInt(t.toFixed(o).replace(".",""))/10**o}ZodString.create=e=>new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:e?.coerce??!1,...processCreateParams(e)});class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){this._def.coerce&&(e.data=Number(e.data));if(this._getType(e)!==ZodParsedType.number){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:t.parsedType}),INVALID}let t;const r=new ParseStatus;for(const n of this._def.checks)if("int"===n.kind)util.isInteger(e.data)||(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:n.message}),r.dirty());else if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.too_small,minimum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.too_big,maximum:n.value,type:"number",inclusive:n.inclusive,exact:!1,message:n.message}),r.dirty())}else"multipleOf"===n.kind?0!==floatSafeRemainder(e.data,n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):"finite"===n.kind?Number.isFinite(e.data)||(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.not_finite,message:n.message}),r.dirty()):util.assertNever(n);return{status:r.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,errorUtil.toString(t))}setLimit(e,t,r,n){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:errorUtil.toString(n)}]})}_addCheck(e){return new ZodNumber({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:errorUtil.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:errorUtil.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>"int"===e.kind||"multipleOf"===e.kind&&util.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const r of this._def.checks){if("finite"===r.kind||"int"===r.kind||"multipleOf"===r.kind)return!0;"min"===r.kind?(null===t||r.value>t)&&(t=r.value):"max"===r.kind&&(null===e||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}}ZodNumber.create=e=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:e?.coerce||!1,...processCreateParams(e)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==ZodParsedType.bigint)return this._getInvalidInput(e);let t;const r=new ParseStatus;for(const n of this._def.checks)if("min"===n.kind){(n.inclusive?e.data<n.value:e.data<=n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.too_small,type:"bigint",minimum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else if("max"===n.kind){(n.inclusive?e.data>n.value:e.data>=n.value)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.too_big,type:"bigint",maximum:n.value,inclusive:n.inclusive,message:n.message}),r.dirty())}else"multipleOf"===n.kind?e.data%n.value!==BigInt(0)&&(t=this._getOrReturnCtx(e,t),addIssueToContext(t,{code:ZodIssueCode.not_multiple_of,multipleOf:n.value,message:n.message}),r.dirty()):util.assertNever(n);return{status:r.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:t.parsedType}),INVALID}gte(e,t){return this.setLimit("min",e,!0,errorUtil.toString(t))}gt(e,t){return this.setLimit("min",e,!1,errorUtil.toString(t))}lte(e,t){return this.setLimit("max",e,!0,errorUtil.toString(t))}lt(e,t){return this.setLimit("max",e,!1,errorUtil.toString(t))}setLimit(e,t,r,n){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:errorUtil.toString(n)}]})}_addCheck(e){return new ZodBigInt({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:errorUtil.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return e}}ZodBigInt.create=e=>new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:e?.coerce??!1,...processCreateParams(e)});class ZodBoolean extends ZodType{_parse(e){this._def.coerce&&(e.data=Boolean(e.data));if(this._getType(e)!==ZodParsedType.boolean){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:t.parsedType}),INVALID}return OK(e.data)}}ZodBoolean.create=e=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:e?.coerce||!1,...processCreateParams(e)});class ZodDate extends ZodType{_parse(e){this._def.coerce&&(e.data=new Date(e.data));if(this._getType(e)!==ZodParsedType.date){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:t.parsedType}),INVALID}if(Number.isNaN(e.data.getTime())){return addIssueToContext(this._getOrReturnCtx(e),{code:ZodIssueCode.invalid_date}),INVALID}const t=new ParseStatus;let r;for(const n of this._def.checks)"min"===n.kind?e.data.getTime()<n.value&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_small,message:n.message,inclusive:!0,exact:!1,minimum:n.value,type:"date"}),t.dirty()):"max"===n.kind?e.data.getTime()>n.value&&(r=this._getOrReturnCtx(e,r),addIssueToContext(r,{code:ZodIssueCode.too_big,message:n.message,inclusive:!0,exact:!1,maximum:n.value,type:"date"}),t.dirty()):util.assertNever(n);return{status:t.value,value:new Date(e.data.getTime())}}_addCheck(e){return new ZodDate({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:errorUtil.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:errorUtil.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)"min"===t.kind&&(null===e||t.value>e)&&(e=t.value);return null!=e?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)"max"===t.kind&&(null===e||t.value<e)&&(e=t.value);return null!=e?new Date(e):null}}ZodDate.create=e=>new ZodDate({checks:[],coerce:e?.coerce||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(e)});class ZodSymbol extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.symbol){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:t.parsedType}),INVALID}return OK(e.data)}}ZodSymbol.create=e=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(e)});class ZodUndefined extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:t.parsedType}),INVALID}return OK(e.data)}}ZodUndefined.create=e=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(e)});class ZodNull extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.null){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:t.parsedType}),INVALID}return OK(e.data)}}ZodNull.create=e=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(e)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(e){return OK(e.data)}}ZodAny.create=e=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(e)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(e){return OK(e.data)}}ZodUnknown.create=e=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(e)});class ZodNever extends ZodType{_parse(e){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:t.parsedType}),INVALID}}ZodNever.create=e=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(e)});class ZodVoid extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.undefined){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:t.parsedType}),INVALID}return OK(e.data)}}ZodVoid.create=e=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(e)});class ZodArray extends ZodType{_parse(e){const{ctx:t,status:r}=this._processInputParams(e),n=this._def;if(t.parsedType!==ZodParsedType.array)return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:t.parsedType}),INVALID;if(null!==n.exactLength){const e=t.data.length>n.exactLength.value,o=t.data.length<n.exactLength.value;(e||o)&&(addIssueToContext(t,{code:e?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:o?n.exactLength.value:void 0,maximum:e?n.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:n.exactLength.message}),r.dirty())}if(null!==n.minLength&&t.data.length<n.minLength.value&&(addIssueToContext(t,{code:ZodIssueCode.too_small,minimum:n.minLength.value,type:"array",inclusive:!0,exact:!1,message:n.minLength.message}),r.dirty()),null!==n.maxLength&&t.data.length>n.maxLength.value&&(addIssueToContext(t,{code:ZodIssueCode.too_big,maximum:n.maxLength.value,type:"array",inclusive:!0,exact:!1,message:n.maxLength.message}),r.dirty()),t.common.async)return Promise.all([...t.data].map((e,r)=>n.type._parseAsync(new ParseInputLazyPath(t,e,t.path,r)))).then(e=>ParseStatus.mergeArray(r,e));const o=[...t.data].map((e,r)=>n.type._parseSync(new ParseInputLazyPath(t,e,t.path,r)));return ParseStatus.mergeArray(r,o)}get element(){return this._def.type}min(e,t){return new ZodArray({...this._def,minLength:{value:e,message:errorUtil.toString(t)}})}max(e,t){return new ZodArray({...this._def,maxLength:{value:e,message:errorUtil.toString(t)}})}length(e,t){return new ZodArray({...this._def,exactLength:{value:e,message:errorUtil.toString(t)}})}nonempty(e){return this.min(1,e)}}function deepPartialify(e){if(e instanceof ZodObject){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=ZodOptional.create(deepPartialify(n))}return new ZodObject({...e._def,shape:()=>t})}return e instanceof ZodArray?new ZodArray({...e._def,type:deepPartialify(e.element)}):e instanceof ZodOptional?ZodOptional.create(deepPartialify(e.unwrap())):e instanceof ZodNullable?ZodNullable.create(deepPartialify(e.unwrap())):e instanceof ZodTuple?ZodTuple.create(e.items.map(e=>deepPartialify(e))):e}ZodArray.create=(e,t)=>new ZodArray({type:e,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(t)});class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const e=this._def.shape(),t=util.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==ZodParsedType.object){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:t.parsedType}),INVALID}const{status:t,ctx:r}=this._processInputParams(e),{shape:n,keys:o}=this._getCached(),i=[];if(!(this._def.catchall instanceof ZodNever&&"strip"===this._def.unknownKeys))for(const a in r.data)o.includes(a)||i.push(a);const s=[];for(const a of o){const e=n[a],t=r.data[a];s.push({key:{status:"valid",value:a},value:e._parse(new ParseInputLazyPath(r,t,r.path,a)),alwaysSet:a in r.data})}if(this._def.catchall instanceof ZodNever){const e=this._def.unknownKeys;if("passthrough"===e)for(const t of i)s.push({key:{status:"valid",value:t},value:{status:"valid",value:r.data[t]}});else if("strict"===e)i.length>0&&(addIssueToContext(r,{code:ZodIssueCode.unrecognized_keys,keys:i}),t.dirty());else if("strip"!==e)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const e=this._def.catchall;for(const t of i){const n=r.data[t];s.push({key:{status:"valid",value:t},value:e._parse(new ParseInputLazyPath(r,n,r.path,t)),alwaysSet:t in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const e=[];for(const t of s){const r=await t.key,n=await t.value;e.push({key:r,value:n,alwaysSet:t.alwaysSet})}return e}).then(e=>ParseStatus.mergeObjectSync(t,e)):ParseStatus.mergeObjectSync(t,s)}get shape(){return this._def.shape()}strict(e){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...void 0!==e?{errorMap:(t,r)=>{const n=this._def.errorMap?.(t,r).message??r.defaultError;return"unrecognized_keys"===t.code?{message:errorUtil.errToObj(e).message??n}:{message:n}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(e){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new ZodObject({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new ZodObject({...this._def,catchall:e})}pick(e){const t={};for(const r of util.objectKeys(e))e[r]&&this.shape[r]&&(t[r]=this.shape[r]);return new ZodObject({...this._def,shape:()=>t})}omit(e){const t={};for(const r of util.objectKeys(this.shape))e[r]||(t[r]=this.shape[r]);return new ZodObject({...this._def,shape:()=>t})}deepPartial(){return deepPartialify(this)}partial(e){const t={};for(const r of util.objectKeys(this.shape)){const n=this.shape[r];e&&!e[r]?t[r]=n:t[r]=n.optional()}return new ZodObject({...this._def,shape:()=>t})}required(e){const t={};for(const r of util.objectKeys(this.shape))if(e&&!e[r])t[r]=this.shape[r];else{let e=this.shape[r];for(;e instanceof ZodOptional;)e=e._def.innerType;t[r]=e}return new ZodObject({...this._def,shape:()=>t})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)}),ZodObject.strictCreate=(e,t)=>new ZodObject({shape:()=>e,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)}),ZodObject.lazycreate=(e,t)=>new ZodObject({shape:e,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(t)});class ZodUnion extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),r=this._def.options;if(t.common.async)return Promise.all(r.map(async e=>{const r={...t,common:{...t.common,issues:[]},parent:null};return{result:await e._parseAsync({data:t.data,path:t.path,parent:r}),ctx:r}})).then(function(e){for(const t of e)if("valid"===t.result.status)return t.result;for(const n of e)if("dirty"===n.result.status)return t.common.issues.push(...n.ctx.common.issues),n.result;const r=e.map(e=>new ZodError(e.ctx.common.issues));return addIssueToContext(t,{code:ZodIssueCode.invalid_union,unionErrors:r}),INVALID});{let e;const n=[];for(const i of r){const r={...t,common:{...t.common,issues:[]},parent:null},o=i._parseSync({data:t.data,path:t.path,parent:r});if("valid"===o.status)return o;"dirty"!==o.status||e||(e={result:o,ctx:r}),r.common.issues.length&&n.push(r.common.issues)}if(e)return t.common.issues.push(...e.ctx.common.issues),e.result;const o=n.map(e=>new ZodError(e));return addIssueToContext(t,{code:ZodIssueCode.invalid_union,unionErrors:o}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(e,t)=>new ZodUnion({options:e,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(t)});const getDiscriminator=e=>e instanceof ZodLazy?getDiscriminator(e.schema):e instanceof ZodEffects?getDiscriminator(e.innerType()):e instanceof ZodLiteral?[e.value]:e instanceof ZodEnum?e.options:e instanceof ZodNativeEnum?util.objectValues(e.enum):e instanceof ZodDefault?getDiscriminator(e._def.innerType):e instanceof ZodUndefined?[void 0]:e instanceof ZodNull?[null]:e instanceof ZodOptional?[void 0,...getDiscriminator(e.unwrap())]:e instanceof ZodNullable?[null,...getDiscriminator(e.unwrap())]:e instanceof ZodBranded||e instanceof ZodReadonly?getDiscriminator(e.unwrap()):e instanceof ZodCatch?getDiscriminator(e._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ZodParsedType.object)return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:t.parsedType}),INVALID;const r=this.discriminator,n=t.data[r],o=this.optionsMap.get(n);return o?t.common.async?o._parseAsync({data:t.data,path:t.path,parent:t}):o._parseSync({data:t.data,path:t.path,parent:t}):(addIssueToContext(t,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,t,r){const n=new Map;for(const o of t){const t=getDiscriminator(o.shape[e]);if(!t.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const r of t){if(n.has(r))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(r)}`);n.set(r,o)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:e,options:t,optionsMap:n,...processCreateParams(r)})}}function mergeValues(e,t){const r=getParsedType(e),n=getParsedType(t);if(e===t)return{valid:!0,data:e};if(r===ZodParsedType.object&&n===ZodParsedType.object){const r=util.objectKeys(t),n=util.objectKeys(e).filter(e=>-1!==r.indexOf(e)),o={...e,...t};for(const i of n){const r=mergeValues(e[i],t[i]);if(!r.valid)return{valid:!1};o[i]=r.data}return{valid:!0,data:o}}if(r===ZodParsedType.array&&n===ZodParsedType.array){if(e.length!==t.length)return{valid:!1};const r=[];for(let n=0;n<e.length;n++){const o=mergeValues(e[n],t[n]);if(!o.valid)return{valid:!1};r.push(o.data)}return{valid:!0,data:r}}return r===ZodParsedType.date&&n===ZodParsedType.date&&+e===+t?{valid:!0,data:e}:{valid:!1}}class ZodIntersection extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=(e,n)=>{if(isAborted(e)||isAborted(n))return INVALID;const o=mergeValues(e.value,n.value);return o.valid?((isDirty(e)||isDirty(n))&&t.dirty(),{status:t.value,value:o.data}):(addIssueToContext(r,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([e,t])=>n(e,t)):n(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}ZodIntersection.create=(e,t,r)=>new ZodIntersection({left:e,right:t,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(r)});class ZodTuple extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.array)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:r.parsedType}),INVALID;if(r.data.length<this._def.items.length)return addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&r.data.length>this._def.items.length&&(addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const n=[...r.data].map((e,t)=>{const n=this._def.items[t]||this._def.rest;return n?n._parse(new ParseInputLazyPath(r,e,r.path,t)):null}).filter(e=>!!e);return r.common.async?Promise.all(n).then(e=>ParseStatus.mergeArray(t,e)):ParseStatus.mergeArray(t,n)}get items(){return this._def.items}rest(e){return new ZodTuple({...this._def,rest:e})}}ZodTuple.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:e,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(t)})};class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.map)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:r.parsedType}),INVALID;const n=this._def.keyType,o=this._def.valueType,i=[...r.data.entries()].map(([e,t],i)=>({key:n._parse(new ParseInputLazyPath(r,e,r.path,[i,"key"])),value:o._parse(new ParseInputLazyPath(r,t,r.path,[i,"value"]))}));if(r.common.async){const e=new Map;return Promise.resolve().then(async()=>{for(const r of i){const n=await r.key,o=await r.value;if("aborted"===n.status||"aborted"===o.status)return INVALID;"dirty"!==n.status&&"dirty"!==o.status||t.dirty(),e.set(n.value,o.value)}return{status:t.value,value:e}})}{const e=new Map;for(const r of i){const n=r.key,o=r.value;if("aborted"===n.status||"aborted"===o.status)return INVALID;"dirty"!==n.status&&"dirty"!==o.status||t.dirty(),e.set(n.value,o.value)}return{status:t.value,value:e}}}}ZodMap.create=(e,t,r)=>new ZodMap({valueType:t,keyType:e,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(r)});class ZodSet extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.parsedType!==ZodParsedType.set)return addIssueToContext(r,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:r.parsedType}),INVALID;const n=this._def;null!==n.minSize&&r.data.size<n.minSize.value&&(addIssueToContext(r,{code:ZodIssueCode.too_small,minimum:n.minSize.value,type:"set",inclusive:!0,exact:!1,message:n.minSize.message}),t.dirty()),null!==n.maxSize&&r.data.size>n.maxSize.value&&(addIssueToContext(r,{code:ZodIssueCode.too_big,maximum:n.maxSize.value,type:"set",inclusive:!0,exact:!1,message:n.maxSize.message}),t.dirty());const o=this._def.valueType;function i(e){const r=new Set;for(const n of e){if("aborted"===n.status)return INVALID;"dirty"===n.status&&t.dirty(),r.add(n.value)}return{status:t.value,value:r}}const s=[...r.data.values()].map((e,t)=>o._parse(new ParseInputLazyPath(r,e,r.path,t)));return r.common.async?Promise.all(s).then(e=>i(e)):i(s)}min(e,t){return new ZodSet({...this._def,minSize:{value:e,message:errorUtil.toString(t)}})}max(e,t){return new ZodSet({...this._def,maxSize:{value:e,message:errorUtil.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}ZodSet.create=(e,t)=>new ZodSet({valueType:e,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(t)});class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}ZodLazy.create=(e,t)=>new ZodLazy({getter:e,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(t)});class ZodLiteral extends ZodType{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{received:t.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:e.data}}get value(){return this._def.value}}function createZodEnum(e,t){return new ZodEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(t)})}ZodLiteral.create=(e,t)=>new ZodLiteral({value:e,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(t)});class ZodEnum extends ZodType{_parse(e){if("string"!=typeof e.data){const t=this._getOrReturnCtx(e),r=this._def.values;return addIssueToContext(t,{expected:util.joinValues(r),received:t.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),r=this._def.values;return addIssueToContext(t,{received:t.data,code:ZodIssueCode.invalid_enum_value,options:r}),INVALID}return OK(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return ZodEnum.create(e,{...this._def,...t})}exclude(e,t=this._def){return ZodEnum.create(this.options.filter(t=>!e.includes(t)),{...this._def,...t})}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(e){const t=util.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==ZodParsedType.string&&r.parsedType!==ZodParsedType.number){const e=util.objectValues(t);return addIssueToContext(r,{expected:util.joinValues(e),received:r.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(this._cache||(this._cache=new Set(util.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const e=util.objectValues(t);return addIssueToContext(r,{received:r.data,code:ZodIssueCode.invalid_enum_value,options:e}),INVALID}return OK(e.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(e,t)=>new ZodNativeEnum({values:e,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(t)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ZodParsedType.promise&&!1===t.common.async)return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:t.parsedType}),INVALID;const r=t.parsedType===ZodParsedType.promise?t.data:Promise.resolve(t.data);return OK(r.then(e=>this._def.type.parseAsync(e,{path:t.path,errorMap:t.common.contextualErrorMap})))}}ZodPromise.create=(e,t)=>new ZodPromise({type:e,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(t)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:r}=this._processInputParams(e),n=this._def.effect||null,o={addIssue:e=>{addIssueToContext(r,e),e.fatal?t.abort():t.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),"preprocess"===n.type){const e=n.transform(r.data,o);if(r.common.async)return Promise.resolve(e).then(async e=>{if("aborted"===t.value)return INVALID;const n=await this._def.schema._parseAsync({data:e,path:r.path,parent:r});return"aborted"===n.status?INVALID:"dirty"===n.status||"dirty"===t.value?DIRTY(n.value):n});{if("aborted"===t.value)return INVALID;const n=this._def.schema._parseSync({data:e,path:r.path,parent:r});return"aborted"===n.status?INVALID:"dirty"===n.status||"dirty"===t.value?DIRTY(n.value):n}}if("refinement"===n.type){const e=e=>{const t=n.refinement(e,o);if(r.common.async)return Promise.resolve(t);if(t instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return e};if(!1===r.common.async){const n=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===n.status?INVALID:("dirty"===n.status&&t.dirty(),e(n.value),{status:t.value,value:n.value})}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(r=>"aborted"===r.status?INVALID:("dirty"===r.status&&t.dirty(),e(r.value).then(()=>({status:t.value,value:r.value}))))}if("transform"===n.type){if(!1===r.common.async){const e=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!isValid(e))return INVALID;const i=n.transform(e.value,o);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:i}}return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(e=>isValid(e)?Promise.resolve(n.transform(e.value,o)).then(e=>({status:t.value,value:e})):INVALID)}util.assertNever(n)}}ZodEffects.create=(e,t,r)=>new ZodEffects({schema:e,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:t,...processCreateParams(r)}),ZodEffects.createWithPreprocess=(e,t,r)=>new ZodEffects({schema:t,effect:{type:"preprocess",transform:e},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(r)});class ZodOptional extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodOptional.create=(e,t)=>new ZodOptional({innerType:e,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(t)});class ZodNullable extends ZodType{_parse(e){return this._getType(e)===ZodParsedType.null?OK(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ZodNullable.create=(e,t)=>new ZodNullable({innerType:e,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(t)});class ZodDefault extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e);let r=t.data;return t.parsedType===ZodParsedType.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}ZodDefault.create=(e,t)=>new ZodDefault({innerType:e,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:"function"==typeof t.default?t.default:()=>t.default,...processCreateParams(t)});class ZodCatch extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),r={...t,common:{...t.common,issues:[]}},n=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return isAsync(n)?n.then(e=>({status:"valid",value:"valid"===e.status?e.value:this._def.catchValue({get error(){return new ZodError(r.common.issues)},input:r.data})})):{status:"valid",value:"valid"===n.status?n.value:this._def.catchValue({get error(){return new ZodError(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(e,t)=>new ZodCatch({innerType:e,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:"function"==typeof t.catch?t.catch:()=>t.catch,...processCreateParams(t)});class ZodNaN extends ZodType{_parse(e){if(this._getType(e)!==ZodParsedType.nan){const t=this._getOrReturnCtx(e);return addIssueToContext(t,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:t.parsedType}),INVALID}return{status:"valid",value:e.data}}}ZodNaN.create=e=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(e)});class ZodBranded extends ZodType{_parse(e){const{ctx:t}=this._processInputParams(e),r=t.data;return this._def.type._parse({data:r,path:t.path,parent:t})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(e){const{status:t,ctx:r}=this._processInputParams(e);if(r.common.async){return(async()=>{const e=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?INVALID:"dirty"===e.status?(t.dirty(),DIRTY(e.value)):this._def.out._parseAsync({data:e.value,path:r.path,parent:r})})()}{const e=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return"aborted"===e.status?INVALID:"dirty"===e.status?(t.dirty(),{status:"dirty",value:e.value}):this._def.out._parseSync({data:e.value,path:r.path,parent:r})}}static create(e,t){return new ZodPipeline({in:e,out:t,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(e){const t=this._def.innerType._parse(e),r=e=>(isValid(e)&&(e.value=Object.freeze(e.value)),e);return isAsync(t)?t.then(e=>r(e)):r(t)}unwrap(){return this._def.innerType}}var ZodFirstPartyTypeKind,ZodFirstPartyTypeKind2;ZodReadonly.create=(e,t)=>new ZodReadonly({innerType:e,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(t)}),ZodFirstPartyTypeKind2=ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}),ZodFirstPartyTypeKind2.ZodString="ZodString",ZodFirstPartyTypeKind2.ZodNumber="ZodNumber",ZodFirstPartyTypeKind2.ZodNaN="ZodNaN",ZodFirstPartyTypeKind2.ZodBigInt="ZodBigInt",ZodFirstPartyTypeKind2.ZodBoolean="ZodBoolean",ZodFirstPartyTypeKind2.ZodDate="ZodDate",ZodFirstPartyTypeKind2.ZodSymbol="ZodSymbol",ZodFirstPartyTypeKind2.ZodUndefined="ZodUndefined",ZodFirstPartyTypeKind2.ZodNull="ZodNull",ZodFirstPartyTypeKind2.ZodAny="ZodAny",ZodFirstPartyTypeKind2.ZodUnknown="ZodUnknown",ZodFirstPartyTypeKind2.ZodNever="ZodNever",ZodFirstPartyTypeKind2.ZodVoid="ZodVoid",ZodFirstPartyTypeKind2.ZodArray="ZodArray",ZodFirstPartyTypeKind2.ZodObject="ZodObject",ZodFirstPartyTypeKind2.ZodUnion="ZodUnion",ZodFirstPartyTypeKind2.ZodDiscriminatedUnion="ZodDiscriminatedUnion",ZodFirstPartyTypeKind2.ZodIntersection="ZodIntersection",ZodFirstPartyTypeKind2.ZodTuple="ZodTuple",ZodFirstPartyTypeKind2.ZodRecord="ZodRecord",ZodFirstPartyTypeKind2.ZodMap="ZodMap",ZodFirstPartyTypeKind2.ZodSet="ZodSet",ZodFirstPartyTypeKind2.ZodFunction="ZodFunction",ZodFirstPartyTypeKind2.ZodLazy="ZodLazy",ZodFirstPartyTypeKind2.ZodLiteral="ZodLiteral",ZodFirstPartyTypeKind2.ZodEnum="ZodEnum",ZodFirstPartyTypeKind2.ZodEffects="ZodEffects",ZodFirstPartyTypeKind2.ZodNativeEnum="ZodNativeEnum",ZodFirstPartyTypeKind2.ZodOptional="ZodOptional",ZodFirstPartyTypeKind2.ZodNullable="ZodNullable",ZodFirstPartyTypeKind2.ZodDefault="ZodDefault",ZodFirstPartyTypeKind2.ZodCatch="ZodCatch",ZodFirstPartyTypeKind2.ZodPromise="ZodPromise",ZodFirstPartyTypeKind2.ZodBranded="ZodBranded",ZodFirstPartyTypeKind2.ZodPipeline="ZodPipeline",ZodFirstPartyTypeKind2.ZodReadonly="ZodReadonly";const stringType=ZodString.create,numberType=ZodNumber.create,booleanType=ZodBoolean.create,anyType=ZodAny.create;ZodNever.create;const arrayType=ZodArray.create,objectType=ZodObject.create,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create;ZodIntersection.create,ZodTuple.create;const literalType=ZodLiteral.create,enumType=ZodEnum.create;ZodPromise.create,ZodOptional.create,ZodNullable.create;var pRetry$1={exports:{}},retry$1={},retry_operation,hasRequiredRetry_operation,hasRequiredRetry$1,retry,hasRequiredRetry,hasRequiredPRetry;function requireRetry_operation(){if(hasRequiredRetry_operation)return retry_operation;function e(e,t){"boolean"==typeof t&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return hasRequiredRetry_operation=1,retry_operation=e,e.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},e.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},e.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(void 0===r){if(!this._cachedTimeouts)return!1;this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1)}var n=this;return this._timer=setTimeout(function(){n._attempts++,n._operationTimeoutCb&&(n._timeout=setTimeout(function(){n._operationTimeoutCb(n._attempts)},n._operationTimeout),n._options.unref&&n._timeout.unref()),n._fn(n._attempts)},r),this._options.unref&&this._timer.unref(),!0},e.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=(new Date).getTime(),this._fn(this._attempts)},e.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},e.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},e.prototype.start=e.prototype.try,e.prototype.errors=function(){return this._errors},e.prototype.attempts=function(){return this._attempts},e.prototype.mainError=function(){if(0===this._errors.length)return null;for(var e={},t=null,r=0,n=0;n<this._errors.length;n++){var o=this._errors[n],i=o.message,s=(e[i]||0)+1;e[i]=s,s>=r&&(t=o,r=s)}return t},retry_operation}function requireRetry$1(){return hasRequiredRetry$1||(hasRequiredRetry$1=1,e=retry$1,t=requireRetry_operation(),e.operation=function(r){var n=e.timeouts(r);return new t(n,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},e.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var r in e)t[r]=e[r];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var n=[],o=0;o<t.retries;o++)n.push(this.createTimeout(o,t));return e&&e.forever&&!n.length&&n.push(this.createTimeout(o,t)),n.sort(function(e,t){return e-t}),n},e.createTimeout=function(e,t){var r=t.randomize?Math.random()+1:1,n=Math.round(r*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return n=Math.min(n,t.maxTimeout)},e.wrap=function(t,r,n){if(r instanceof Array&&(n=r,r=null),!n)for(var o in n=[],t)"function"==typeof t[o]&&n.push(o);for(var i=0;i<n.length;i++){var s=n[i],a=t[s];t[s]=function(n){var o=e.operation(r),i=Array.prototype.slice.call(arguments,1),s=i.pop();i.push(function(e){o.retry(e)||(e&&(arguments[0]=o.mainError()),s.apply(this,arguments))}),o.attempt(function(){n.apply(t,i)})}.bind(t,a),t[s].options=r}}),retry$1;var e,t}function requireRetry(){return hasRequiredRetry?retry:(hasRequiredRetry=1,retry=requireRetry$1())}function requirePRetry(){if(hasRequiredPRetry)return pRetry$1.exports;hasRequiredPRetry=1;const e=requireRetry(),t=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class r extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,({message:e}=e)):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const n=(n,o)=>new Promise((i,s)=>{o={onFailedAttempt:()=>{},retries:10,...o};const a=e.operation(o);a.attempt(async e=>{try{i(await n(e))}catch(u){if(!(u instanceof Error))return void s(new TypeError(`Non-error was thrown: "${u}". You should only throw errors.`));if(u instanceof r)a.stop(),s(u.originalError);else if(u instanceof TypeError&&(c=u.message,!t.includes(c)))a.stop(),s(u);else{((e,t,r)=>{const n=r.retries-(t-1);e.attemptNumber=t,e.retriesLeft=n})(u,e,o);try{await o.onFailedAttempt(u)}catch(l){return void s(l)}a.retry(u)||s(a.mainError())}}var c})});return pRetry$1.exports=n,pRetry$1.exports.default=n,pRetry$1.exports.AbortError=r,pRetry$1.exports}var pRetryExports=requirePRetry();const pRetry=getDefaultExportFromCjs(pRetryExports),REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;function validate$2(e){return"string"==typeof e&&REGEX.test(e)}function parse(e){if(!validate$2(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r}for(var byteToHex=[],i=0,getRandomValues;i<256;++i)byteToHex.push((i+256).toString(16).slice(1));function unsafeStringify(e,t=0){return(byteToHex[e[t+0]]+byteToHex[e[t+1]]+byteToHex[e[t+2]]+byteToHex[e[t+3]]+"-"+byteToHex[e[t+4]]+byteToHex[e[t+5]]+"-"+byteToHex[e[t+6]]+byteToHex[e[t+7]]+"-"+byteToHex[e[t+8]]+byteToHex[e[t+9]]+"-"+byteToHex[e[t+10]]+byteToHex[e[t+11]]+byteToHex[e[t+12]]+byteToHex[e[t+13]]+byteToHex[e[t+14]]+byteToHex[e[t+15]]).toLowerCase()}var rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&!(getRandomValues="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}function stringToBytes(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}var DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",URL$1="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function v35(e,t,r){function n(e,n,o,i){var s;if("string"==typeof e&&(e=stringToBytes(e)),"string"==typeof n&&(n=parse(n)),16!==(null===(s=n)||void 0===s?void 0:s.length))throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(n),a.set(e,n.length),(a=r(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,o){i=i||0;for(var c=0;c<16;++c)o[i+c]=a[c];return o}return unsafeStringify(a)}try{n.name=e}catch(o){}return n.DNS=DNS,n.URL=URL$1,n}var randomUUID="undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const native={randomUUID:randomUUID};function v4(e,t,r){if(native.randomUUID&&!e)return native.randomUUID();var n=(e=e||{}).random||(e.rng||rng)();return n[6]=15&n[6]|64,n[8]=63&n[8]|128,unsafeStringify(n)}function f(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:case 3:return t^r^n;case 2:return t&r^t&n^r&n}}function ROTL(e,t){return e<<t|e>>>32-t}function sha1(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,s=Math.ceil(i/16),a=new Array(s),c=0;c<s;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[64*c+4*l]<<24|e[64*c+4*l+1]<<16|e[64*c+4*l+2]<<8|e[64*c+4*l+3];a[c]=u}a[s-1][14]=8*(e.length-1)/Math.pow(2,32),a[s-1][14]=Math.floor(a[s-1][14]),a[s-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<s;++d){for(var h=new Uint32Array(80),p=0;p<16;++p)h[p]=a[d][p];for(var m=16;m<80;++m)h[m]=ROTL(h[m-3]^h[m-8]^h[m-14]^h[m-16],1);for(var y=r[0],g=r[1],b=r[2],_=r[3],w=r[4],v=0;v<80;++v){var I=Math.floor(v/20),k=ROTL(y,5)+f(I,g,b,_)+w+t[I]+h[v]>>>0;w=_,_=b,b=ROTL(g,30)>>>0,g=y,y=k}r[0]=r[0]+y>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+b>>>0,r[3]=r[3]+_>>>0,r[4]=r[4]+w>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}var v5=v35("v5",80,sha1);const GEN_AI_OPERATION_NAME="gen_ai.operation.name",GEN_AI_SYSTEM="gen_ai.system",GEN_AI_REQUEST_MODEL="gen_ai.request.model",GEN_AI_RESPONSE_MODEL="gen_ai.response.model",GEN_AI_USAGE_INPUT_TOKENS="gen_ai.usage.input_tokens",GEN_AI_USAGE_OUTPUT_TOKENS="gen_ai.usage.output_tokens",GEN_AI_USAGE_TOTAL_TOKENS="gen_ai.usage.total_tokens",GEN_AI_REQUEST_MAX_TOKENS="gen_ai.request.max_tokens",GEN_AI_REQUEST_TEMPERATURE="gen_ai.request.temperature",GEN_AI_REQUEST_TOP_P="gen_ai.request.top_p",GEN_AI_REQUEST_FREQUENCY_PENALTY="gen_ai.request.frequency_penalty",GEN_AI_REQUEST_PRESENCE_PENALTY="gen_ai.request.presence_penalty",GEN_AI_RESPONSE_FINISH_REASONS="gen_ai.response.finish_reasons",GENAI_PROMPT="gen_ai.prompt",GENAI_COMPLETION="gen_ai.completion",GEN_AI_REQUEST_EXTRA_QUERY="gen_ai.request.extra_query",GEN_AI_REQUEST_EXTRA_BODY="gen_ai.request.extra_body",GEN_AI_SERIALIZED_NAME="gen_ai.serialized.name",GEN_AI_SERIALIZED_SIGNATURE="gen_ai.serialized.signature",GEN_AI_SERIALIZED_DOC="gen_ai.serialized.doc",GEN_AI_RESPONSE_ID="gen_ai.response.id",GEN_AI_RESPONSE_SERVICE_TIER="gen_ai.response.service_tier",GEN_AI_RESPONSE_SYSTEM_FINGERPRINT="gen_ai.response.system_fingerprint",GEN_AI_USAGE_INPUT_TOKEN_DETAILS="gen_ai.usage.input_token_details",GEN_AI_USAGE_OUTPUT_TOKEN_DETAILS="gen_ai.usage.output_token_details",LANGSMITH_SESSION_ID="langsmith.trace.session_id",LANGSMITH_SESSION_NAME="langsmith.trace.session_name",LANGSMITH_RUN_TYPE="langsmith.span.kind",LANGSMITH_NAME="langsmith.trace.name",LANGSMITH_METADATA="langsmith.metadata",LANGSMITH_TAGS="langsmith.span.tags",LANGSMITH_REQUEST_STREAMING="langsmith.request.streaming",LANGSMITH_REQUEST_HEADERS="langsmith.request.headers",DEFAULT_FETCH_IMPLEMENTATION=(...e)=>fetch(...e),LANGSMITH_FETCH_IMPLEMENTATION_KEY=Symbol.for("ls:fetch_implementation"),_globalFetchImplementationIsNodeFetch=()=>{const e=globalThis[LANGSMITH_FETCH_IMPLEMENTATION_KEY];return!!e&&("function"==typeof e&&"Headers"in e&&"Request"in e&&"Response"in e)},_getFetchImplementation=e=>async(...t)=>{if(e||"true"===getLangSmithEnvironmentVariable("DEBUG")){const[e,r]=t;console.log(`→ ${r?.method||"GET"} ${e}`)}const r=await(globalThis[LANGSMITH_FETCH_IMPLEMENTATION_KEY]??DEFAULT_FETCH_IMPLEMENTATION)(...t);return(e||"true"===getLangSmithEnvironmentVariable("DEBUG"))&&console.log(`← ${r.status} ${r.statusText} ${r.url}`),r},getDefaultProjectName=()=>getLangSmithEnvironmentVariable("PROJECT")??getEnvironmentVariable$1("LANGCHAIN_SESSION")??"default",__version__="0.3.37";let globalEnv;const isBrowser$1=()=>"undefined"!=typeof window&&void 0!==window.document,isWebWorker$1=()=>"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name,isJsDom$1=()=>"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&navigator.userAgent.includes("jsdom"),isDeno$1=()=>"undefined"!=typeof Deno,isNode$1=()=>void 0!==process$1&&void 0!==process$1.versions&&void 0!==process$1.versions.node&&!isDeno$1(),getEnv$1=()=>globalEnv||(globalEnv=isBrowser$1()?"browser":isNode$1()?"node":isWebWorker$1()?"webworker":isJsDom$1()?"jsdom":isDeno$1()?"deno":"other",globalEnv);let runtimeEnvironment$1,cachedCommitSHAs;function getRuntimeEnvironment(){if(void 0===runtimeEnvironment$1){const e=getEnv$1(),t=getShas();runtimeEnvironment$1={library:"langsmith",runtime:e,sdk:"langsmith-js",sdk_version:__version__,...t}}return runtimeEnvironment$1}function getLangChainEnvVarsMetadata(){const e=getEnvironmentVariables()||{},t={},r=["LANGCHAIN_API_KEY","LANGCHAIN_ENDPOINT","LANGCHAIN_TRACING_V2","LANGCHAIN_PROJECT","LANGCHAIN_SESSION","LANGSMITH_API_KEY","LANGSMITH_ENDPOINT","LANGSMITH_TRACING_V2","LANGSMITH_PROJECT","LANGSMITH_SESSION"];for(const[n,o]of Object.entries(e))!n.startsWith("LANGCHAIN_")&&!n.startsWith("LANGSMITH_")||"string"!=typeof o||r.includes(n)||n.toLowerCase().includes("key")||n.toLowerCase().includes("secret")||n.toLowerCase().includes("token")||("LANGCHAIN_REVISION_ID"===n?t.revision_id=o:t[n]=o);return t}function getEnvironmentVariables(){try{return void 0!==process$1&&process$1.env?Object.entries(process$1.env).reduce((e,[t,r])=>(e[t]=String(r),e),{}):void 0}catch(e){return}}function getEnvironmentVariable$1(e){try{return void 0!==process$1?process$1.env?.[e]:void 0}catch(t){return}}function getLangSmithEnvironmentVariable(e){return getEnvironmentVariable$1(`LANGSMITH_${e}`)||getEnvironmentVariable$1(`LANGCHAIN_${e}`)}function getShas(){if(void 0!==cachedCommitSHAs)return cachedCommitSHAs;const e=["VERCEL_GIT_COMMIT_SHA","NEXT_PUBLIC_VERCEL_GIT_COMMIT_SHA","COMMIT_REF","RENDER_GIT_COMMIT","CI_COMMIT_SHA","CIRCLE_SHA1","CF_PAGES_COMMIT_SHA","REACT_APP_GIT_SHA","SOURCE_VERSION","GITHUB_SHA","TRAVIS_COMMIT","GIT_COMMIT","BUILD_VCS_NUMBER","bamboo_planRepository_revision","Build.SourceVersion","BITBUCKET_COMMIT","DRONE_COMMIT_SHA","SEMAPHORE_GIT_SHA","BUILDKITE_COMMIT"],t={};for(const r of e){const e=getEnvironmentVariable$1(r);void 0!==e&&(t[r]=e)}return cachedCommitSHAs=t,t}class MockTracer{constructor(){Object.defineProperty(this,"hasWarned",{enumerable:!0,configurable:!0,writable:!0,value:!1})}startActiveSpan(e,...t){let r;if(this.hasWarned||"true"!==getEnvironmentVariable$1("OTEL_ENABLED")||(console.warn('You have enabled OTEL export via the `OTEL_ENABLED` environment variable, but have not initialized the required OTEL instances. Please add:\n```\nimport { initializeOTEL } from "langsmith/experimental/otel/setup";\ninitializeOTEL();\n```\nat the beginning of your code.'),this.hasWarned=!0),1===t.length&&"function"==typeof t[0]?r=t[0]:2===t.length&&"function"==typeof t[1]?r=t[1]:3===t.length&&"function"==typeof t[2]&&(r=t[2]),"function"==typeof r)return r()}}class MockOTELTrace{constructor(){Object.defineProperty(this,"mockTracer",{enumerable:!0,configurable:!0,writable:!0,value:new MockTracer})}getTracer(e,t){return this.mockTracer}getActiveSpan(){}setSpan(e,t){return e}getSpan(e){}setSpanContext(e,t){return e}getTracerProvider(){}setGlobalTracerProvider(e){return!1}}class MockOTELContext{active(){return{}}with(e,t){return t()}}const OTEL_TRACE_KEY=Symbol.for("ls:otel_trace"),OTEL_CONTEXT_KEY=Symbol.for("ls:otel_context"),OTEL_GET_DEFAULT_OTLP_TRACER_PROVIDER_KEY=Symbol.for("ls:otel_get_default_otlp_tracer_provider"),mockOTELTrace=new MockOTELTrace,mockOTELContext=new MockOTELContext;class OTELProvider{getTraceInstance(){return globalThis[OTEL_TRACE_KEY]??mockOTELTrace}getContextInstance(){return globalThis[OTEL_CONTEXT_KEY]??mockOTELContext}initializeGlobalInstances(e){void 0===globalThis[OTEL_TRACE_KEY]&&(globalThis[OTEL_TRACE_KEY]=e.trace),void 0===globalThis[OTEL_CONTEXT_KEY]&&(globalThis[OTEL_CONTEXT_KEY]=e.context)}setDefaultOTLPTracerComponents(e){globalThis[OTEL_GET_DEFAULT_OTLP_TRACER_PROVIDER_KEY]=e}getDefaultOTLPTracerComponents(){return globalThis[OTEL_GET_DEFAULT_OTLP_TRACER_PROVIDER_KEY]??void 0}}const OTELProviderSingleton=new OTELProvider;function getOTELTrace(){return OTELProviderSingleton.getTraceInstance()}function getOTELContext(){return OTELProviderSingleton.getContextInstance()}function getDefaultOTLPTracerComponents(){return OTELProviderSingleton.getDefaultOTLPTracerComponents()}const WELL_KNOWN_OPERATION_NAMES={llm:"chat",tool:"execute_tool",retriever:"embeddings",embedding:"embeddings",prompt:"chat"};function getOperationName(e){return WELL_KNOWN_OPERATION_NAMES[e]||e}class LangSmithToOTELTranslator{constructor(){Object.defineProperty(this,"spans",{enumerable:!0,configurable:!0,writable:!0,value:new Map})}exportBatch(e,t){for(const n of e)try{if(!n.run)continue;if("post"===n.operation){const e=this.createSpanForRun(n,n.run,t.get(n.id));e&&!n.run.end_time&&this.spans.set(n.id,e)}else this.updateSpanForRun(n,n.run)}catch(r){console.error(`Error processing operation ${n.id}:`,r)}}createSpanForRun(e,t,r){const n=r&&getOTELTrace().getSpan(r);if(n)try{return this.finishSpanSetup(n,t,e)}catch(o){return void console.error(`Failed to create span for run ${e.id}:`,o)}}finishSpanSetup(e,t,r){return this.setSpanAttributes(e,t,r),t.error?(e.setStatus({code:2}),e.recordException(new Error(t.error))):e.setStatus({code:1}),t.end_time&&e.end(t.end_time),e}updateSpanForRun(e,t){try{const r=this.spans.get(e.id);if(!r)return void console.debug(`No span found for run ${e.id} during update`);this.setSpanAttributes(r,t,e),t.error?(r.setStatus({code:2}),r.recordException(new Error(t.error))):r.setStatus({code:1});const n=t.end_time;n&&(r.end(n),this.spans.delete(e.id))}catch(r){console.error(`Failed to update span for run ${e.id}:`,r)}}extractModelName(e){if(e.extra?.metadata){const t=e.extra.metadata;if(t.ls_model_name)return t.ls_model_name;if(t.invocation_params){const e=t.invocation_params;if(e.model)return e.model;if(e.model_name)return e.model_name}}}setSpanAttributes(e,t,r){if("run_type"in t&&t.run_type){e.setAttribute(LANGSMITH_RUN_TYPE,t.run_type);const r=getOperationName(t.run_type||"chain");e.setAttribute(GEN_AI_OPERATION_NAME,r)}"name"in t&&t.name&&e.setAttribute(LANGSMITH_NAME,t.name),"session_id"in t&&t.session_id&&e.setAttribute(LANGSMITH_SESSION_ID,t.session_id),"session_name"in t&&t.session_name&&e.setAttribute(LANGSMITH_SESSION_NAME,t.session_name),this.setGenAiSystem(e,t);const n=this.extractModelName(t);n&&e.setAttribute(GEN_AI_REQUEST_MODEL,n),"prompt_tokens"in t&&"number"==typeof t.prompt_tokens&&e.setAttribute(GEN_AI_USAGE_INPUT_TOKENS,t.prompt_tokens),"completion_tokens"in t&&"number"==typeof t.completion_tokens&&e.setAttribute(GEN_AI_USAGE_OUTPUT_TOKENS,t.completion_tokens),"total_tokens"in t&&"number"==typeof t.total_tokens&&e.setAttribute(GEN_AI_USAGE_TOTAL_TOKENS,t.total_tokens),this.setInvocationParameters(e,t);const o=t.extra?.metadata||{};for(const[s,a]of Object.entries(o))null!=a&&e.setAttribute(`${LANGSMITH_METADATA}.${s}`,String(a));const i=t.tags;if(i&&Array.isArray(i)?e.setAttribute(LANGSMITH_TAGS,i.join(", ")):i&&e.setAttribute(LANGSMITH_TAGS,String(i)),"serialized"in t&&"object"==typeof t.serialized){const r=t.serialized;r.name&&e.setAttribute(GEN_AI_SERIALIZED_NAME,String(r.name)),r.signature&&e.setAttribute(GEN_AI_SERIALIZED_SIGNATURE,String(r.signature)),r.doc&&e.setAttribute(GEN_AI_SERIALIZED_DOC,String(r.doc))}this.setIOAttributes(e,r)}setGenAiSystem(e,t){let r="langchain";const n=this.extractModelName(t);if(n){const e=n.toLowerCase();e.includes("anthropic")||e.startsWith("claude")?r="anthropic":e.includes("bedrock")?r="aws.bedrock":e.includes("azure")&&e.includes("openai")?r="az.ai.openai":e.includes("azure")&&e.includes("inference")?r="az.ai.inference":e.includes("cohere")?r="cohere":e.includes("deepseek")?r="deepseek":e.includes("gemini")?r="gemini":e.includes("groq")?r="groq":e.includes("watson")||e.includes("ibm")?r="ibm.watsonx.ai":e.includes("mistral")?r="mistral_ai":e.includes("gpt")||e.includes("openai")?r="openai":e.includes("perplexity")||e.includes("sonar")?r="perplexity":e.includes("vertex")?r="vertex_ai":(e.includes("xai")||e.includes("grok"))&&(r="xai")}e.setAttribute(GEN_AI_SYSTEM,r)}setInvocationParameters(e,t){if(!t.extra?.metadata?.invocation_params)return;const r=t.extra.metadata.invocation_params;void 0!==r.max_tokens&&e.setAttribute(GEN_AI_REQUEST_MAX_TOKENS,r.max_tokens),void 0!==r.temperature&&e.setAttribute(GEN_AI_REQUEST_TEMPERATURE,r.temperature),void 0!==r.top_p&&e.setAttribute(GEN_AI_REQUEST_TOP_P,r.top_p),void 0!==r.frequency_penalty&&e.setAttribute(GEN_AI_REQUEST_FREQUENCY_PENALTY,r.frequency_penalty),void 0!==r.presence_penalty&&e.setAttribute(GEN_AI_REQUEST_PRESENCE_PENALTY,r.presence_penalty)}setIOAttributes(e,t){if(t.run.inputs)try{const r=t.run.inputs;"object"==typeof r&&null!==r&&(r.model&&Array.isArray(r.messages)&&e.setAttribute(GEN_AI_REQUEST_MODEL,r.model),void 0!==r.stream&&e.setAttribute(LANGSMITH_REQUEST_STREAMING,r.stream),r.extra_headers&&e.setAttribute(LANGSMITH_REQUEST_HEADERS,JSON.stringify(r.extra_headers)),r.extra_query&&e.setAttribute(GEN_AI_REQUEST_EXTRA_QUERY,JSON.stringify(r.extra_query)),r.extra_body&&e.setAttribute(GEN_AI_REQUEST_EXTRA_BODY,JSON.stringify(r.extra_body))),e.setAttribute(GENAI_PROMPT,JSON.stringify(r))}catch(r){console.debug(`Failed to process inputs for run ${t.id}`,r)}if(t.run.outputs)try{const r=t.run.outputs,n=this.getUnifiedRunTokens(r);if(n&&(e.setAttribute(GEN_AI_USAGE_INPUT_TOKENS,n[0]),e.setAttribute(GEN_AI_USAGE_OUTPUT_TOKENS,n[1]),e.setAttribute(GEN_AI_USAGE_TOTAL_TOKENS,n[0]+n[1])),r&&"object"==typeof r){if(r.model&&e.setAttribute(GEN_AI_RESPONSE_MODEL,String(r.model)),r.id&&e.setAttribute(GEN_AI_RESPONSE_ID,r.id),r.choices&&Array.isArray(r.choices)){const t=r.choices.map(e=>e.finish_reason).filter(e=>e).map(String);t.length>0&&e.setAttribute(GEN_AI_RESPONSE_FINISH_REASONS,t.join(", "))}if(r.service_tier&&e.setAttribute(GEN_AI_RESPONSE_SERVICE_TIER,r.service_tier),r.system_fingerprint&&e.setAttribute(GEN_AI_RESPONSE_SYSTEM_FINGERPRINT,r.system_fingerprint),r.usage_metadata&&"object"==typeof r.usage_metadata){const t=r.usage_metadata;t.input_token_details&&e.setAttribute(GEN_AI_USAGE_INPUT_TOKEN_DETAILS,JSON.stringify(t.input_token_details)),t.output_token_details&&e.setAttribute(GEN_AI_USAGE_OUTPUT_TOKEN_DETAILS,JSON.stringify(t.output_token_details))}}e.setAttribute(GENAI_COMPLETION,JSON.stringify(r))}catch(r){console.debug(`Failed to process outputs for run ${t.id}`,r)}}getUnifiedRunTokens(e){if(!e)return null;let t=this.extractUnifiedRunTokens(e.usage_metadata);if(t)return t;const r=Object.keys(e);for(const i of r){const r=e[i];if(r&&"object"==typeof r){if(t=this.extractUnifiedRunTokens(r.usage_metadata),t)return t;if(1===r.lc&&r.kwargs&&"object"==typeof r.kwargs&&(t=this.extractUnifiedRunTokens(r.kwargs.usage_metadata),t))return t}}const n=e.generations||[];if(!Array.isArray(n))return null;const o=Array.isArray(n[0])?n.flat():n;for(const i of o)if("object"==typeof i&&i.message&&"object"==typeof i.message&&i.message.kwargs&&"object"==typeof i.message.kwargs&&(t=this.extractUnifiedRunTokens(i.message.kwargs.usage_metadata),t))return t;return null}extractUnifiedRunTokens(e){return e&&"object"==typeof e?"number"!=typeof e.input_tokens||"number"!=typeof e.output_tokens?null:[e.input_tokens,e.output_tokens]:null}}var dist={},eventemitter3={exports:{}},hasRequiredEventemitter3;function requireEventemitter3(){return hasRequiredEventemitter3||(hasRequiredEventemitter3=1,function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function i(e,t,n,i,s){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new o(n,i||e,s),c=r?r+t:t;return e._events[c]?e._events[c].fn?e._events[c]=[e._events[c],a]:e._events[c].push(a):(e._events[c]=a,e._eventsCount++),e}function s(e,t){0===--e._eventsCount?e._events=new n:delete e._events[t]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(r=!1)),a.prototype.eventNames=function(){var e,n,o=[];if(0===this._eventsCount)return o;for(n in e=this._events)t.call(e,n)&&o.push(r?n.slice(1):n);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},a.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,s=new Array(i);o<i;o++)s[o]=n[o].fn;return s},a.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},a.prototype.emit=function(e,t,n,o,i,s){var a=r?r+e:e;if(!this._events[a])return!1;var c,u,l=this._events[a],d=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),d){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,n),!0;case 4:return l.fn.call(l.context,t,n,o),!0;case 5:return l.fn.call(l.context,t,n,o,i),!0;case 6:return l.fn.call(l.context,t,n,o,i,s),!0}for(u=1,c=new Array(d-1);u<d;u++)c[u-1]=arguments[u];l.fn.apply(l.context,c)}else{var h,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(e,l[u].fn,void 0,!0),d){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,t);break;case 3:l[u].fn.call(l[u].context,t,n);break;case 4:l[u].fn.call(l[u].context,t,n,o);break;default:if(!c)for(h=1,c=new Array(d-1);h<d;h++)c[h-1]=arguments[h];l[u].fn.apply(l[u].context,c)}}return!0},a.prototype.on=function(e,t,r){return i(this,e,t,r,!1)},a.prototype.once=function(e,t,r){return i(this,e,t,r,!0)},a.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||n&&a.context!==n||s(this,i);else{for(var c=0,u=[],l=a.length;c<l;c++)(a[c].fn!==t||o&&!a[c].once||n&&a[c].context!==n)&&u.push(a[c]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},a.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,e.exports=a}(eventemitter3)),eventemitter3.exports}var pTimeout={exports:{}},pFinally,hasRequiredPFinally,hasRequiredPTimeout;function requirePFinally(){return hasRequiredPFinally?pFinally:(hasRequiredPFinally=1,pFinally=(e,t)=>(t=t||(()=>{}),e.then(e=>new Promise(e=>{e(t())}).then(()=>e),e=>new Promise(e=>{e(t())}).then(()=>{throw e}))))}function requirePTimeout(){if(hasRequiredPTimeout)return pTimeout.exports;hasRequiredPTimeout=1;const e=requirePFinally();class t extends Error{constructor(e){super(e),this.name="TimeoutError"}}const r=(r,n,o)=>new Promise((i,s)=>{if("number"!=typeof n||n<0)throw new TypeError("Expected `milliseconds` to be a positive number");if(n===1/0)return void i(r);const a=setTimeout(()=>{if("function"==typeof o){try{i(o())}catch(a){s(a)}return}const e=o instanceof Error?o:new t("string"==typeof o?o:`Promise timed out after ${n} milliseconds`);"function"==typeof r.cancel&&r.cancel(),s(e)},n);e(r.then(i,s),()=>{clearTimeout(a)})});return pTimeout.exports=r,pTimeout.exports.default=r,pTimeout.exports.TimeoutError=t,pTimeout.exports}var priorityQueue={},lowerBound={},hasRequiredLowerBound,hasRequiredPriorityQueue,hasRequiredDist;function requireLowerBound(){if(hasRequiredLowerBound)return lowerBound;return hasRequiredLowerBound=1,Object.defineProperty(lowerBound,"__esModule",{value:!0}),lowerBound.default=function(e,t,r){let n=0,o=e.length;for(;o>0;){const i=o/2|0;let s=n+i;r(e[s],t)<=0?(n=++s,o-=i+1):o=i}return n},lowerBound}function requirePriorityQueue(){if(hasRequiredPriorityQueue)return priorityQueue;hasRequiredPriorityQueue=1,Object.defineProperty(priorityQueue,"__esModule",{value:!0});const e=requireLowerBound();return priorityQueue.default=class{constructor(){this._queue=[]}enqueue(t,r){const n={priority:(r=Object.assign({priority:0},r)).priority,run:t};if(this.size&&this._queue[this.size-1].priority>=r.priority)return void this._queue.push(n);const o=e.default(this._queue,n,(e,t)=>t.priority-e.priority);this._queue.splice(o,0,n)}dequeue(){const e=this._queue.shift();return null==e?void 0:e.run}filter(e){return this._queue.filter(t=>t.priority===e.priority).map(e=>e.run)}get size(){return this._queue.length}},priorityQueue}function requireDist(){if(hasRequiredDist)return dist;hasRequiredDist=1,Object.defineProperty(dist,"__esModule",{value:!0});const e=requireEventemitter3(),t=requirePTimeout(),r=requirePriorityQueue(),n=()=>{},o=new t.TimeoutError;return dist.default=class extends e{constructor(e){var t,o,i,s;if(super(),this._intervalCount=0,this._intervalEnd=0,this._pendingCount=0,this._resolveEmpty=n,this._resolveIdle=n,!("number"==typeof(e=Object.assign({carryoverConcurrencyCount:!1,intervalCap:1/0,interval:0,concurrency:1/0,autoStart:!0,queueClass:r.default},e)).intervalCap&&e.intervalCap>=1))throw new TypeError(`Expected \`intervalCap\` to be a number from 1 and up, got \`${null!==(o=null===(t=e.intervalCap)||void 0===t?void 0:t.toString())&&void 0!==o?o:""}\` (${typeof e.intervalCap})`);if(void 0===e.interval||!(Number.isFinite(e.interval)&&e.interval>=0))throw new TypeError(`Expected \`interval\` to be a finite number >= 0, got \`${null!==(s=null===(i=e.interval)||void 0===i?void 0:i.toString())&&void 0!==s?s:""}\` (${typeof e.interval})`);this._carryoverConcurrencyCount=e.carryoverConcurrencyCount,this._isIntervalIgnored=e.intervalCap===1/0||0===e.interval,this._intervalCap=e.intervalCap,this._interval=e.interval,this._queue=new e.queueClass,this._queueClass=e.queueClass,this.concurrency=e.concurrency,this._timeout=e.timeout,this._throwOnTimeout=!0===e.throwOnTimeout,this._isPaused=!1===e.autoStart}get _doesIntervalAllowAnother(){return this._isIntervalIgnored||this._intervalCount<this._intervalCap}get _doesConcurrentAllowAnother(){return this._pendingCount<this._concurrency}_next(){this._pendingCount--,this._tryToStartAnother(),this.emit("next")}_resolvePromises(){this._resolveEmpty(),this._resolveEmpty=n,0===this._pendingCount&&(this._resolveIdle(),this._resolveIdle=n,this.emit("idle"))}_onResumeInterval(){this._onInterval(),this._initializeIntervalIfNeeded(),this._timeoutId=void 0}_isIntervalPaused(){const e=Date.now();if(void 0===this._intervalId){const t=this._intervalEnd-e;if(!(t<0))return void 0===this._timeoutId&&(this._timeoutId=setTimeout(()=>{this._onResumeInterval()},t)),!0;this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0}return!1}_tryToStartAnother(){if(0===this._queue.size)return this._intervalId&&clearInterval(this._intervalId),this._intervalId=void 0,this._resolvePromises(),!1;if(!this._isPaused){const e=!this._isIntervalPaused();if(this._doesIntervalAllowAnother&&this._doesConcurrentAllowAnother){const t=this._queue.dequeue();return!!t&&(this.emit("active"),t(),e&&this._initializeIntervalIfNeeded(),!0)}}return!1}_initializeIntervalIfNeeded(){this._isIntervalIgnored||void 0!==this._intervalId||(this._intervalId=setInterval(()=>{this._onInterval()},this._interval),this._intervalEnd=Date.now()+this._interval)}_onInterval(){0===this._intervalCount&&0===this._pendingCount&&this._intervalId&&(clearInterval(this._intervalId),this._intervalId=void 0),this._intervalCount=this._carryoverConcurrencyCount?this._pendingCount:0,this._processQueue()}_processQueue(){for(;this._tryToStartAnother(););}get concurrency(){return this._concurrency}set concurrency(e){if(!("number"==typeof e&&e>=1))throw new TypeError(`Expected \`concurrency\` to be a number from 1 and up, got \`${e}\` (${typeof e})`);this._concurrency=e,this._processQueue()}async add(e,r={}){return new Promise((n,i)=>{this._queue.enqueue(async()=>{this._pendingCount++,this._intervalCount++;try{const s=void 0===this._timeout&&void 0===r.timeout?e():t.default(Promise.resolve(e()),void 0===r.timeout?this._timeout:r.timeout,()=>{(void 0===r.throwOnTimeout?this._throwOnTimeout:r.throwOnTimeout)&&i(o)});n(await s)}catch(s){i(s)}this._next()},r),this._tryToStartAnother(),this.emit("add")})}async addAll(e,t){return Promise.all(e.map(async e=>this.add(e,t)))}start(){return this._isPaused?(this._isPaused=!1,this._processQueue(),this):this}pause(){this._isPaused=!0}clear(){this._queue=new this._queueClass}async onEmpty(){if(0!==this._queue.size)return new Promise(e=>{const t=this._resolveEmpty;this._resolveEmpty=()=>{t(),e()}})}async onIdle(){if(0!==this._pendingCount||0!==this._queue.size)return new Promise(e=>{const t=this._resolveIdle;this._resolveIdle=()=>{t(),e()}})}get size(){return this._queue.size}sizeBy(e){return this._queue.filter(e).length}get pending(){return this._pendingCount}get isPaused(){return this._isPaused}get timeout(){return this._timeout}set timeout(e){this._timeout=e}},dist}var distExports=requireDist();const PQueueMod=getDefaultExportFromCjs(distExports),STATUS_NO_RETRY$1=[400,401,403,404,405,406,407,408],STATUS_IGNORE=[409];let AsyncCaller$1=class{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedResponseHook",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.debug=e.debug,this.queue="default"in PQueueMod?new PQueueMod.default({concurrency:this.maxConcurrency}):new PQueueMod({concurrency:this.maxConcurrency}),this.onFailedResponseHook=e?.onFailedResponseHook}call(e,...t){const r=this.onFailedResponseHook;return this.queue.add(()=>pRetry(()=>e(...t).catch(e=>{throw e instanceof Error?e:new Error(e)}),{async onFailedAttempt(e){if(e.message.startsWith("Cancel")||e.message.startsWith("TimeoutError")||e.message.startsWith("AbortError"))throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response,n=t?.status;if(n){if(STATUS_NO_RETRY$1.includes(+n))throw e;if(STATUS_IGNORE.includes(+n))return;r&&await r(t)}},retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((t,r)=>{e.signal?.addEventListener("abort",()=>{r(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>_getFetchImplementation(this.debug)(...e).then(e=>e.ok?e:Promise.reject(e)))}};function isLangChainMessage(e){return"function"==typeof e?._getType}function convertLangChainMessageToExample(e){const t={type:e._getType(),data:{content:e.content}};return e?.additional_kwargs&&Object.keys(e.additional_kwargs).length>0&&(t.data.additional_kwargs={...e.additional_kwargs}),t}const UUID_REGEX=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function assertUuid(e,t){if(!UUID_REGEX.test(e)){throw new Error(void 0!==t?`Invalid UUID for ${t}: ${e}`:`Invalid UUID: ${e}`)}return e}const warnedMessages={};function warnOnce(e){warnedMessages[e]||(console.warn(e),warnedMessages[e]=!0)}var re={exports:{}},constants,hasRequiredConstants,debug_1,hasRequiredDebug,hasRequiredRe,parseOptions_1,hasRequiredParseOptions,identifiers,hasRequiredIdentifiers,semver$1,hasRequiredSemver$1,parse_1,hasRequiredParse,valid_1,hasRequiredValid$1,clean_1,hasRequiredClean,inc_1,hasRequiredInc,diff_1,hasRequiredDiff,major_1,hasRequiredMajor,minor_1,hasRequiredMinor,patch_1,hasRequiredPatch,prerelease_1,hasRequiredPrerelease,compare_1,hasRequiredCompare,rcompare_1,hasRequiredRcompare,compareLoose_1,hasRequiredCompareLoose,compareBuild_1,hasRequiredCompareBuild,sort_1,hasRequiredSort,rsort_1,hasRequiredRsort,gt_1,hasRequiredGt,lt_1,hasRequiredLt,eq_1,hasRequiredEq,neq_1,hasRequiredNeq,gte_1,hasRequiredGte,lte_1,hasRequiredLte,cmp_1,hasRequiredCmp,coerce_1,hasRequiredCoerce,lrucache,hasRequiredLrucache,range,hasRequiredRange,comparator,hasRequiredComparator,satisfies_1,hasRequiredSatisfies,toComparators_1,hasRequiredToComparators,maxSatisfying_1,hasRequiredMaxSatisfying,minSatisfying_1,hasRequiredMinSatisfying,minVersion_1,hasRequiredMinVersion,valid,hasRequiredValid,outside_1,hasRequiredOutside,gtr_1,hasRequiredGtr,ltr_1,hasRequiredLtr,intersects_1,hasRequiredIntersects,simplify,hasRequiredSimplify,subset_1,hasRequiredSubset,semver,hasRequiredSemver;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1;const e=Number.MAX_SAFE_INTEGER||9007199254740991;return constants={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:e,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}function requireDebug(){if(hasRequiredDebug)return debug_1;hasRequiredDebug=1;const e="object"==typeof process$1&&process$1.env&&process$1.env.NODE_DEBUG&&/\bsemver\b/i.test(process$1.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};return debug_1=e}function requireRe(){return hasRequiredRe||(hasRequiredRe=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:o}=requireConstants(),i=requireDebug(),s=(t=e.exports={}).re=[],a=t.safeRe=[],c=t.src=[],u=t.safeSrc=[],l=t.t={};let d=0;const h="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[h,n]],p=(e,t,r)=>{const n=(e=>{for(const[t,r]of f)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e})(t),o=d++;i(e,o,t),l[e]=o,c[o]=t,u[o]=n,s[o]=new RegExp(t,r?"g":void 0),a[o]=new RegExp(n,r?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),p("MAINVERSION",`(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})\\.(${c[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})\\.(${c[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${c[l.NONNUMERICIDENTIFIER]}|${c[l.NUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${c[l.NONNUMERICIDENTIFIER]}|${c[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASE",`(?:-(${c[l.PRERELEASEIDENTIFIER]}(?:\\.${c[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${c[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${h}+`),p("BUILD",`(?:\\+(${c[l.BUILDIDENTIFIER]}(?:\\.${c[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${c[l.MAINVERSION]}${c[l.PRERELEASE]}?${c[l.BUILD]}?`),p("FULL",`^${c[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${c[l.MAINVERSIONLOOSE]}${c[l.PRERELEASELOOSE]}?${c[l.BUILD]}?`),p("LOOSE",`^${c[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${c[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${c[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:\\.(${c[l.XRANGEIDENTIFIER]})(?:${c[l.PRERELEASE]})?${c[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[l.XRANGEIDENTIFIERLOOSE]})(?:${c[l.PRERELEASELOOSE]})?${c[l.BUILD]}?)?)?`),p("XRANGE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${c[l.GTLT]}\\s*${c[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),p("COERCE",`${c[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",c[l.COERCEPLAIN]+`(?:${c[l.PRERELEASE]})?(?:${c[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",c[l.COERCE],!0),p("COERCERTLFULL",c[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${c[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${c[l.LONETILDE]}${c[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${c[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${c[l.LONECARET]}${c[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${c[l.LONECARET]}${c[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${c[l.GTLT]}\\s*(${c[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${c[l.GTLT]}\\s*(${c[l.LOOSEPLAIN]}|${c[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${c[l.XRANGEPLAIN]})\\s+-\\s+(${c[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${c[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(re,re.exports)),re.exports}function requireParseOptions(){if(hasRequiredParseOptions)return parseOptions_1;hasRequiredParseOptions=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return parseOptions_1=r=>r?"object"!=typeof r?e:r:t}function requireIdentifiers(){if(hasRequiredIdentifiers)return identifiers;hasRequiredIdentifiers=1;const e=/^[0-9]+$/,t=(t,r)=>{const n=e.test(t),o=e.test(r);return n&&o&&(t=+t,r=+r),t===r?0:n&&!o?-1:o&&!n?1:t<r?-1:1};return identifiers={compareIdentifiers:t,rcompareIdentifiers:(e,r)=>t(r,e)}}function requireSemver$1(){if(hasRequiredSemver$1)return semver$1;hasRequiredSemver$1=1;const e=requireDebug(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:r}=requireConstants(),{safeRe:n,t:o}=requireRe(),i=requireParseOptions(),{compareIdentifiers:s}=requireIdentifiers();class a{constructor(s,c){if(c=i(c),s instanceof a){if(s.loose===!!c.loose&&s.includePrerelease===!!c.includePrerelease)return s;s=s.version}else if("string"!=typeof s)throw new TypeError(`Invalid version. Must be a string. Got type "${typeof s}".`);if(s.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",s,c),this.options=c,this.loose=!!c.loose,this.includePrerelease=!!c.includePrerelease;const u=s.trim().match(c.loose?n[o.LOOSE]:n[o.FULL]);if(!u)throw new TypeError(`Invalid Version: ${s}`);if(this.raw=s,this.major=+u[1],this.minor=+u[2],this.patch=+u[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");u[4]?this.prerelease=u[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<r)return t}return e}):this.prerelease=[],this.build=u[5]?u[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(e("SemVer.compare",this.version,this.options,t),!(t instanceof a)){if("string"==typeof t&&t===this.version)return 0;t=new a(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(e){return e instanceof a||(e=new a(e,this.options)),s(this.major,e.major)||s(this.minor,e.minor)||s(this.patch,e.patch)}comparePre(t){if(t instanceof a||(t=new a(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{const n=this.prerelease[r],o=t.prerelease[r];if(e("prerelease compare",r,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return s(n,o)}while(++r)}compareBuild(t){t instanceof a||(t=new a(t,this.options));let r=0;do{const n=this.build[r],o=t.build[r];if(e("build compare",r,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return s(n,o)}while(++r)}inc(e,t,r){if(e.startsWith("pre")){if(!t&&!1===r)throw new Error("invalid increment argument: identifier is empty");if(t){const e=`-${t}`.match(this.options.loose?n[o.PRERELEASELOOSE]:n[o.PRERELEASE]);if(!e||e[1]!==t)throw new Error(`invalid identifier: ${t}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"release":if(0===this.prerelease.length)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{const e=Number(r)?1:0;if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===s(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return semver$1=a}function requireParse(){if(hasRequiredParse)return parse_1;hasRequiredParse=1;const e=requireSemver$1();return parse_1=(t,r,n=!1)=>{if(t instanceof e)return t;try{return new e(t,r)}catch(o){if(!n)return null;throw o}}}function requireValid$1(){if(hasRequiredValid$1)return valid_1;hasRequiredValid$1=1;const e=requireParse();return valid_1=(t,r)=>{const n=e(t,r);return n?n.version:null}}function requireClean(){if(hasRequiredClean)return clean_1;hasRequiredClean=1;const e=requireParse();return clean_1=(t,r)=>{const n=e(t.trim().replace(/^[=v]+/,""),r);return n?n.version:null}}function requireInc(){if(hasRequiredInc)return inc_1;hasRequiredInc=1;const e=requireSemver$1();return inc_1=(t,r,n,o,i)=>{"string"==typeof n&&(i=o,o=n,n=void 0);try{return new e(t instanceof e?t.version:t,n).inc(r,o,i).version}catch(s){return null}}}function requireDiff(){if(hasRequiredDiff)return diff_1;hasRequiredDiff=1;const e=requireParse();return diff_1=(t,r)=>{const n=e(t,null,!0),o=e(r,null,!0),i=n.compare(o);if(0===i)return null;const s=i>0,a=s?n:o,c=s?o:n,u=!!a.prerelease.length;if(!!c.prerelease.length&&!u){if(!c.patch&&!c.minor)return"major";if(0===c.compareMain(a))return c.minor&&!c.patch?"minor":"patch"}const l=u?"pre":"";return n.major!==o.major?l+"major":n.minor!==o.minor?l+"minor":n.patch!==o.patch?l+"patch":"prerelease"}}function requireMajor(){if(hasRequiredMajor)return major_1;hasRequiredMajor=1;const e=requireSemver$1();return major_1=(t,r)=>new e(t,r).major}function requireMinor(){if(hasRequiredMinor)return minor_1;hasRequiredMinor=1;const e=requireSemver$1();return minor_1=(t,r)=>new e(t,r).minor}function requirePatch(){if(hasRequiredPatch)return patch_1;hasRequiredPatch=1;const e=requireSemver$1();return patch_1=(t,r)=>new e(t,r).patch}function requirePrerelease(){if(hasRequiredPrerelease)return prerelease_1;hasRequiredPrerelease=1;const e=requireParse();return prerelease_1=(t,r)=>{const n=e(t,r);return n&&n.prerelease.length?n.prerelease:null}}function requireCompare(){if(hasRequiredCompare)return compare_1;hasRequiredCompare=1;const e=requireSemver$1();return compare_1=(t,r,n)=>new e(t,n).compare(new e(r,n))}function requireRcompare(){if(hasRequiredRcompare)return rcompare_1;hasRequiredRcompare=1;const e=requireCompare();return rcompare_1=(t,r,n)=>e(r,t,n)}function requireCompareLoose(){if(hasRequiredCompareLoose)return compareLoose_1;hasRequiredCompareLoose=1;const e=requireCompare();return compareLoose_1=(t,r)=>e(t,r,!0)}function requireCompareBuild(){if(hasRequiredCompareBuild)return compareBuild_1;hasRequiredCompareBuild=1;const e=requireSemver$1();return compareBuild_1=(t,r,n)=>{const o=new e(t,n),i=new e(r,n);return o.compare(i)||o.compareBuild(i)}}function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;const e=requireCompareBuild();return sort_1=(t,r)=>t.sort((t,n)=>e(t,n,r))}function requireRsort(){if(hasRequiredRsort)return rsort_1;hasRequiredRsort=1;const e=requireCompareBuild();return rsort_1=(t,r)=>t.sort((t,n)=>e(n,t,r))}function requireGt(){if(hasRequiredGt)return gt_1;hasRequiredGt=1;const e=requireCompare();return gt_1=(t,r,n)=>e(t,r,n)>0}function requireLt(){if(hasRequiredLt)return lt_1;hasRequiredLt=1;const e=requireCompare();return lt_1=(t,r,n)=>e(t,r,n)<0}function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;const e=requireCompare();return eq_1=(t,r,n)=>0===e(t,r,n)}function requireNeq(){if(hasRequiredNeq)return neq_1;hasRequiredNeq=1;const e=requireCompare();return neq_1=(t,r,n)=>0!==e(t,r,n)}function requireGte(){if(hasRequiredGte)return gte_1;hasRequiredGte=1;const e=requireCompare();return gte_1=(t,r,n)=>e(t,r,n)>=0}function requireLte(){if(hasRequiredLte)return lte_1;hasRequiredLte=1;const e=requireCompare();return lte_1=(t,r,n)=>e(t,r,n)<=0}function requireCmp(){if(hasRequiredCmp)return cmp_1;hasRequiredCmp=1;const e=requireEq(),t=requireNeq(),r=requireGt(),n=requireGte(),o=requireLt(),i=requireLte();return cmp_1=(s,a,c,u)=>{switch(a){case"===":return"object"==typeof s&&(s=s.version),"object"==typeof c&&(c=c.version),s===c;case"!==":return"object"==typeof s&&(s=s.version),"object"==typeof c&&(c=c.version),s!==c;case"":case"=":case"==":return e(s,c,u);case"!=":return t(s,c,u);case">":return r(s,c,u);case">=":return n(s,c,u);case"<":return o(s,c,u);case"<=":return i(s,c,u);default:throw new TypeError(`Invalid operator: ${a}`)}}}function requireCoerce(){if(hasRequiredCoerce)return coerce_1;hasRequiredCoerce=1;const e=requireSemver$1(),t=requireParse(),{safeRe:r,t:n}=requireRe();return coerce_1=(o,i)=>{if(o instanceof e)return o;if("number"==typeof o&&(o=String(o)),"string"!=typeof o)return null;let s=null;if((i=i||{}).rtl){const e=i.includePrerelease?r[n.COERCERTLFULL]:r[n.COERCERTL];let t;for(;(t=e.exec(o))&&(!s||s.index+s[0].length!==o.length);)s&&t.index+t[0].length===s.index+s[0].length||(s=t),e.lastIndex=t.index+t[1].length+t[2].length;e.lastIndex=-1}else s=o.match(i.includePrerelease?r[n.COERCEFULL]:r[n.COERCE]);if(null===s)return null;const a=s[2],c=s[3]||"0",u=s[4]||"0",l=i.includePrerelease&&s[5]?`-${s[5]}`:"",d=i.includePrerelease&&s[6]?`+${s[6]}`:"";return t(`${a}.${c}.${u}${l}${d}`,i)}}function requireLrucache(){if(hasRequiredLrucache)return lrucache;hasRequiredLrucache=1;return lrucache=class{constructor(){this.max=1e3,this.map=new Map}get(e){const t=this.map.get(e);return void 0===t?void 0:(this.map.delete(e),this.map.set(e,t),t)}delete(e){return this.map.delete(e)}set(e,t){if(!this.delete(e)&&void 0!==t){if(this.map.size>=this.max){const e=this.map.keys().next().value;this.delete(e)}this.map.set(e,t)}return this}}}function requireRange(){if(hasRequiredRange)return range;hasRequiredRange=1;const e=/\s+/g;class t{constructor(r,i){if(i=n(i),r instanceof t)return r.loose===!!i.loose&&r.includePrerelease===!!i.includePrerelease?r:new t(r.raw,i);if(r instanceof o)return this.raw=r.value,this.set=[[r]],this.formatted=void 0,this;if(this.options=i,this.loose=!!i.loose,this.includePrerelease=!!i.includePrerelease,this.raw=r.trim().replace(e," "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter(e=>!p(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const t of this.set)if(1===t.length&&m(t[0])){this.set=[t];break}}this.formatted=void 0}get range(){if(void 0===this.formatted){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");const t=this.set[e];for(let e=0;e<t.length;e++)e>0&&(this.formatted+=" "),this.formatted+=t[e].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){const t=((this.options.includePrerelease&&h)|(this.options.loose&&f))+":"+e,n=r.get(t);if(n)return n;const s=this.options.loose,m=s?a[c.HYPHENRANGELOOSE]:a[c.HYPHENRANGE];e=e.replace(m,E(this.options.includePrerelease)),i("hyphen replace",e),e=e.replace(a[c.COMPARATORTRIM],u),i("comparator trim",e),e=e.replace(a[c.TILDETRIM],l),i("tilde trim",e),e=e.replace(a[c.CARETTRIM],d),i("caret trim",e);let y=e.split(" ").map(e=>g(e,this.options)).join(" ").split(/\s+/).map(e=>S(e,this.options));s&&(y=y.filter(e=>(i("loose invalid filter",e,this.options),!!e.match(a[c.COMPARATORLOOSE])))),i("range list",y);const b=new Map,_=y.map(e=>new o(e,this.options));for(const r of _){if(p(r))return[r];b.set(r.value,r)}b.size>1&&b.has("")&&b.delete("");const w=[...b.values()];return r.set(t,w),w}intersects(e,r){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(t=>y(t,r)&&e.set.some(e=>y(e,r)&&t.every(t=>e.every(e=>t.intersects(e,r)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new s(e,this.options)}catch(t){return!1}for(let r=0;r<this.set.length;r++)if(P(this.set[r],e,this.options))return!0;return!1}}range=t;const r=new(requireLrucache()),n=requireParseOptions(),o=requireComparator(),i=requireDebug(),s=requireSemver$1(),{safeRe:a,t:c,comparatorTrimReplace:u,tildeTrimReplace:l,caretTrimReplace:d}=requireRe(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:f}=requireConstants(),p=e=>"<0.0.0-0"===e.value,m=e=>""===e.value,y=(e,t)=>{let r=!0;const n=e.slice();let o=n.pop();for(;r&&n.length;)r=n.every(e=>o.intersects(e,t)),o=n.pop();return r},g=(e,t)=>(i("comp",e,t),e=v(e,t),i("caret",e),e=_(e,t),i("tildes",e),e=k(e,t),i("xrange",e),e=A(e,t),i("stars",e),e),b=e=>!e||"x"===e.toLowerCase()||"*"===e,_=(e,t)=>e.trim().split(/\s+/).map(e=>w(e,t)).join(" "),w=(e,t)=>{const r=t.loose?a[c.TILDELOOSE]:a[c.TILDE];return e.replace(r,(t,r,n,o,s)=>{let a;return i("tilde",e,t,r,n,o,s),b(r)?a="":b(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:b(o)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:s?(i("replaceTilde pr",s),a=`>=${r}.${n}.${o}-${s} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,i("tilde return",a),a})},v=(e,t)=>e.trim().split(/\s+/).map(e=>I(e,t)).join(" "),I=(e,t)=>{i("caret",e,t);const r=t.loose?a[c.CARETLOOSE]:a[c.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,o,s,a)=>{let c;return i("caret",e,t,r,o,s,a),b(r)?c="":b(o)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:b(s)?c="0"===r?`>=${r}.${o}.0${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${n} <${+r+1}.0.0-0`:a?(i("replaceCaret pr",a),c="0"===r?"0"===o?`>=${r}.${o}.${s}-${a} <${r}.${o}.${+s+1}-0`:`>=${r}.${o}.${s}-${a} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${s}-${a} <${+r+1}.0.0-0`):(i("no pr"),c="0"===r?"0"===o?`>=${r}.${o}.${s}${n} <${r}.${o}.${+s+1}-0`:`>=${r}.${o}.${s}${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${s} <${+r+1}.0.0-0`),i("caret return",c),c})},k=(e,t)=>(i("replaceXRanges",e,t),e.split(/\s+/).map(e=>T(e,t)).join(" ")),T=(e,t)=>{e=e.trim();const r=t.loose?a[c.XRANGELOOSE]:a[c.XRANGE];return e.replace(r,(r,n,o,s,a,c)=>{i("xRange",e,r,n,o,s,a,c);const u=b(o),l=u||b(s),d=l||b(a),h=d;return"="===n&&h&&(n=""),c=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&h?(l&&(s=0),a=0,">"===n?(n=">=",l?(o=+o+1,s=0,a=0):(s=+s+1,a=0)):"<="===n&&(n="<",l?o=+o+1:s=+s+1),"<"===n&&(c="-0"),r=`${n+o}.${s}.${a}${c}`):l?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:d&&(r=`>=${o}.${s}.0${c} <${o}.${+s+1}.0-0`),i("xRange return",r),r})},A=(e,t)=>(i("replaceStars",e,t),e.trim().replace(a[c.STAR],"")),S=(e,t)=>(i("replaceGTE0",e,t),e.trim().replace(a[t.includePrerelease?c.GTE0PRE:c.GTE0],"")),E=e=>(t,r,n,o,i,s,a,c,u,l,d,h)=>`${r=b(n)?"":b(o)?`>=${n}.0.0${e?"-0":""}`:b(i)?`>=${n}.${o}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=b(u)?"":b(l)?`<${+u+1}.0.0-0`:b(d)?`<${u}.${+l+1}.0-0`:h?`<=${u}.${l}.${d}-${h}`:e?`<${u}.${l}.${+d+1}-0`:`<=${c}`}`.trim(),P=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(i(e[r].semver),e[r].semver!==o.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0};return range}function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(n,o){if(o=r(o),n instanceof t){if(n.loose===!!o.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),s("comparator",n,o),this.options=o,this.loose=!!o.loose,this.parse(n),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(t){const r=this.options.loose?n[o.COMPARATORLOOSE]:n[o.COMPARATOR],i=t.match(r);if(!i)throw new TypeError(`Invalid comparator: ${t}`);this.operator=void 0!==i[1]?i[1]:"","="===this.operator&&(this.operator=""),i[2]?this.semver=new a(i[2],this.options.loose):this.semver=e}toString(){return this.value}test(t){if(s("Comparator.test",t,this.options.loose),this.semver===e||t===e)return!0;if("string"==typeof t)try{t=new a(t,this.options)}catch(r){return!1}return i(t,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return""===this.operator?""===this.value||new c(e.value,n).test(this.value):""===e.operator?""===e.value||new c(this.value,n).test(e.semver):(!(n=r(n)).includePrerelease||"<0.0.0-0"!==this.value&&"<0.0.0-0"!==e.value)&&(!(!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&(!(!this.operator.startsWith(">")||!e.operator.startsWith(">"))||(!(!this.operator.startsWith("<")||!e.operator.startsWith("<"))||(!(this.semver.version!==e.semver.version||!this.operator.includes("=")||!e.operator.includes("="))||(!!(i(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<"))||!!(i(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))))))}}comparator=t;const r=requireParseOptions(),{safeRe:n,t:o}=requireRe(),i=requireCmp(),s=requireDebug(),a=requireSemver$1(),c=requireRange();return comparator}function requireSatisfies(){if(hasRequiredSatisfies)return satisfies_1;hasRequiredSatisfies=1;const e=requireRange();return satisfies_1=(t,r,n)=>{try{r=new e(r,n)}catch(o){return!1}return r.test(t)}}function requireToComparators(){if(hasRequiredToComparators)return toComparators_1;hasRequiredToComparators=1;const e=requireRange();return toComparators_1=(t,r)=>new e(t,r).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "))}function requireMaxSatisfying(){if(hasRequiredMaxSatisfying)return maxSatisfying_1;hasRequiredMaxSatisfying=1;const e=requireSemver$1(),t=requireRange();return maxSatisfying_1=(r,n,o)=>{let i=null,s=null,a=null;try{a=new t(n,o)}catch(c){return null}return r.forEach(t=>{a.test(t)&&(i&&-1!==s.compare(t)||(i=t,s=new e(i,o)))}),i}}function requireMinSatisfying(){if(hasRequiredMinSatisfying)return minSatisfying_1;hasRequiredMinSatisfying=1;const e=requireSemver$1(),t=requireRange();return minSatisfying_1=(r,n,o)=>{let i=null,s=null,a=null;try{a=new t(n,o)}catch(c){return null}return r.forEach(t=>{a.test(t)&&(i&&1!==s.compare(t)||(i=t,s=new e(i,o)))}),i}}function requireMinVersion(){if(hasRequiredMinVersion)return minVersion_1;hasRequiredMinVersion=1;const e=requireSemver$1(),t=requireRange(),r=requireGt();return minVersion_1=(n,o)=>{n=new t(n,o);let i=new e("0.0.0");if(n.test(i))return i;if(i=new e("0.0.0-0"),n.test(i))return i;i=null;for(let t=0;t<n.set.length;++t){const o=n.set[t];let s=null;o.forEach(t=>{const n=new e(t.semver.version);switch(t.operator){case">":0===n.prerelease.length?n.patch++:n.prerelease.push(0),n.raw=n.format();case"":case">=":s&&!r(n,s)||(s=n);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${t.operator}`)}}),!s||i&&!r(i,s)||(i=s)}return i&&n.test(i)?i:null}}function requireValid(){if(hasRequiredValid)return valid;hasRequiredValid=1;const e=requireRange();return valid=(t,r)=>{try{return new e(t,r).range||"*"}catch(n){return null}}}function requireOutside(){if(hasRequiredOutside)return outside_1;hasRequiredOutside=1;const e=requireSemver$1(),t=requireComparator(),{ANY:r}=t,n=requireRange(),o=requireSatisfies(),i=requireGt(),s=requireLt(),a=requireLte(),c=requireGte();return outside_1=(u,l,d,h)=>{let f,p,m,y,g;switch(u=new e(u,h),l=new n(l,h),d){case">":f=i,p=a,m=s,y=">",g=">=";break;case"<":f=s,p=c,m=i,y="<",g="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(o(u,l,h))return!1;for(let e=0;e<l.set.length;++e){const n=l.set[e];let o=null,i=null;if(n.forEach(e=>{e.semver===r&&(e=new t(">=0.0.0")),o=o||e,i=i||e,f(e.semver,o.semver,h)?o=e:m(e.semver,i.semver,h)&&(i=e)}),o.operator===y||o.operator===g)return!1;if((!i.operator||i.operator===y)&&p(u,i.semver))return!1;if(i.operator===g&&m(u,i.semver))return!1}return!0}}function requireGtr(){if(hasRequiredGtr)return gtr_1;hasRequiredGtr=1;const e=requireOutside();return gtr_1=(t,r,n)=>e(t,r,">",n)}function requireLtr(){if(hasRequiredLtr)return ltr_1;hasRequiredLtr=1;const e=requireOutside();return ltr_1=(t,r,n)=>e(t,r,"<",n)}function requireIntersects(){if(hasRequiredIntersects)return intersects_1;hasRequiredIntersects=1;const e=requireRange();return intersects_1=(t,r,n)=>(t=new e(t,n),r=new e(r,n),t.intersects(r,n))}function requireSimplify(){if(hasRequiredSimplify)return simplify;hasRequiredSimplify=1;const e=requireSatisfies(),t=requireCompare();return simplify=(r,n,o)=>{const i=[];let s=null,a=null;const c=r.sort((e,r)=>t(e,r,o));for(const t of c){e(t,n,o)?(a=t,s||(s=t)):(a&&i.push([s,a]),a=null,s=null)}s&&i.push([s,null]);const u=[];for(const[e,t]of i)e===t?u.push(e):t||e!==c[0]?t?e===c[0]?u.push(`<=${t}`):u.push(`${e} - ${t}`):u.push(`>=${e}`):u.push("*");const l=u.join(" || "),d="string"==typeof n.raw?n.raw:String(n);return l.length<d.length?l:n}}function requireSubset(){if(hasRequiredSubset)return subset_1;hasRequiredSubset=1;const e=requireRange(),t=requireComparator(),{ANY:r}=t,n=requireSatisfies(),o=requireCompare(),i=[new t(">=0.0.0-0")],s=[new t(">=0.0.0")],a=(e,t,a)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===r){if(1===t.length&&t[0].semver===r)return!0;e=a.includePrerelease?i:s}if(1===t.length&&t[0].semver===r){if(a.includePrerelease)return!0;t=s}const l=new Set;let d,h,f,p,m,y,g;for(const r of e)">"===r.operator||">="===r.operator?d=c(d,r,a):"<"===r.operator||"<="===r.operator?h=u(h,r,a):l.add(r.semver);if(l.size>1)return null;if(d&&h){if(f=o(d.semver,h.semver,a),f>0)return null;if(0===f&&(">="!==d.operator||"<="!==h.operator))return null}for(const r of l){if(d&&!n(r,String(d),a))return null;if(h&&!n(r,String(h),a))return null;for(const e of t)if(!n(r,String(e),a))return!1;return!0}let b=!(!h||a.includePrerelease||!h.semver.prerelease.length)&&h.semver,_=!(!d||a.includePrerelease||!d.semver.prerelease.length)&&d.semver;b&&1===b.prerelease.length&&"<"===h.operator&&0===b.prerelease[0]&&(b=!1);for(const r of t){if(g=g||">"===r.operator||">="===r.operator,y=y||"<"===r.operator||"<="===r.operator,d)if(_&&r.semver.prerelease&&r.semver.prerelease.length&&r.semver.major===_.major&&r.semver.minor===_.minor&&r.semver.patch===_.patch&&(_=!1),">"===r.operator||">="===r.operator){if(p=c(d,r,a),p===r&&p!==d)return!1}else if(">="===d.operator&&!n(d.semver,String(r),a))return!1;if(h)if(b&&r.semver.prerelease&&r.semver.prerelease.length&&r.semver.major===b.major&&r.semver.minor===b.minor&&r.semver.patch===b.patch&&(b=!1),"<"===r.operator||"<="===r.operator){if(m=u(h,r,a),m===r&&m!==h)return!1}else if("<="===h.operator&&!n(h.semver,String(r),a))return!1;if(!r.operator&&(h||d)&&0!==f)return!1}return!(d&&y&&!h&&0!==f)&&(!(h&&g&&!d&&0!==f)&&(!_&&!b))},c=(e,t,r)=>{if(!e)return t;const n=o(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},u=(e,t,r)=>{if(!e)return t;const n=o(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};return subset_1=(t,r,n={})=>{if(t===r)return!0;t=new e(t,n),r=new e(r,n);let o=!1;e:for(const e of t.set){for(const t of r.set){const r=a(e,t,n);if(o=o||null!==r,r)continue e}if(o)return!1}return!0}}function requireSemver(){if(hasRequiredSemver)return semver;hasRequiredSemver=1;const e=requireRe(),t=requireConstants(),r=requireSemver$1(),n=requireIdentifiers(),o=requireParse(),i=requireValid$1(),s=requireClean(),a=requireInc(),c=requireDiff(),u=requireMajor(),l=requireMinor(),d=requirePatch(),h=requirePrerelease(),f=requireCompare(),p=requireRcompare(),m=requireCompareLoose(),y=requireCompareBuild(),g=requireSort(),b=requireRsort(),_=requireGt(),w=requireLt(),v=requireEq(),I=requireNeq(),k=requireGte(),T=requireLte(),A=requireCmp(),S=requireCoerce(),E=requireComparator(),P=requireRange(),O=requireSatisfies(),R=requireToComparators(),C=requireMaxSatisfying(),$=requireMinSatisfying(),N=requireMinVersion(),M=requireValid(),x=requireOutside(),B=requireGtr(),D=requireLtr(),L=requireIntersects(),F=requireSimplify(),j=requireSubset();return semver={parse:o,valid:i,clean:s,inc:a,diff:c,major:u,minor:l,patch:d,prerelease:h,compare:f,rcompare:p,compareLoose:m,compareBuild:y,sort:g,rsort:b,gt:_,lt:w,eq:v,neq:I,gte:k,lte:T,cmp:A,coerce:S,Comparator:E,Range:P,satisfies:O,toComparators:R,maxSatisfying:C,minSatisfying:$,minVersion:N,validRange:M,outside:x,gtr:B,ltr:D,intersects:L,simplifyRange:F,subset:j,SemVer:r,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers}}function parsePromptIdentifier(e){if(!e||e.split("/").length>2||e.startsWith("/")||e.endsWith("/")||e.split(":").length>2)throw new Error(`Invalid identifier format: ${e}`);const[t,r]=e.split(":"),n=r||"latest";if(t.includes("/")){const[r,o]=t.split("/",2);if(!r||!o)throw new Error(`Invalid identifier format: ${e}`);return[r,o,n]}if(!t)throw new Error(`Invalid identifier format: ${e}`);return["-",t,n]}requireSemver();class LangSmithConflictError extends Error{constructor(e){super(e),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="LangSmithConflictError",this.status=409}}async function raiseForStatus(e,t,r){let n;if(e.ok)return void(r&&(n=await e.text()));n=await e.text();const o=`Failed to ${t}. Received status [${e.status}]: ${e.statusText}. Server response: ${n}`;if(409===e.status)throw new LangSmithConflictError(o);const i=new Error(o);throw i.status=e.status,i}var LIMIT_REPLACE_NODE="[...]",CIRCULAR_REPLACE_NODE={result:"[Circular]"},arr=[],replacerStack=[];const encoder=new TextEncoder;function defaultOptions$2(){return{depthLimit:Number.MAX_SAFE_INTEGER,edgesLimit:Number.MAX_SAFE_INTEGER}}function encodeString(e){return encoder.encode(e)}function serialize(e,t,r,n,o){try{return encodeString(JSON.stringify(e,r,n))}catch(i){if(!i.message?.includes("Converting circular structure to JSON"))return console.warn("[WARNING]: LangSmith received unserializable value."+(t?`\nContext: ${t}`:"")),encodeString("[Unserializable]");let a;"true"!==getLangSmithEnvironmentVariable("SUPPRESS_CIRCULAR_JSON_WARNINGS")&&console.warn("[WARNING]: LangSmith received circular JSON. This will decrease tracer performance. "+(t?`\nContext: ${t}`:"")),void 0===o&&(o=defaultOptions$2()),decirc(e,"",0,[],void 0,0,o);try{a=0===replacerStack.length?JSON.stringify(e,r,n):JSON.stringify(e,replaceGetterValues(r),n)}catch(s){return encodeString("[unable to serialize, circular reference is too complex to analyze]")}finally{for(;0!==arr.length;){const e=arr.pop();4===e.length?Object.defineProperty(e[0],e[1],e[3]):e[0][e[1]]=e[2]}}return encodeString(a)}}function setReplace(e,t,r,n){var o=Object.getOwnPropertyDescriptor(n,r);void 0!==o.get?o.configurable?(Object.defineProperty(n,r,{value:e}),arr.push([n,r,t,o])):replacerStack.push([t,r,e]):(n[r]=e,arr.push([n,r,t]))}function decirc(e,t,r,n,o,i,s){var a;if(i+=1,"object"==typeof e&&null!==e){for(a=0;a<n.length;a++)if(n[a]===e)return void setReplace(CIRCULAR_REPLACE_NODE,e,t,o);if(void 0!==s.depthLimit&&i>s.depthLimit)return void setReplace(LIMIT_REPLACE_NODE,e,t,o);if(void 0!==s.edgesLimit&&r+1>s.edgesLimit)return void setReplace(LIMIT_REPLACE_NODE,e,t,o);if(n.push(e),Array.isArray(e))for(a=0;a<e.length;a++)decirc(e[a],a,a,n,e,i,s);else{var c=Object.keys(e);for(a=0;a<c.length;a++){var u=c[a];decirc(e[u],u,a,n,e,i,s)}}n.pop()}}function replaceGetterValues(e){return e=void 0!==e?e:function(e,t){return t},function(t,r){if(replacerStack.length>0)for(var n=0;n<replacerStack.length;n++){var o=replacerStack[n];if(o[1]===t&&o[0]===r){r=o[2],replacerStack.splice(n,1);break}}return e.call(this,t,r)}}function mergeRuntimeEnvIntoRunCreate(e){const t=getRuntimeEnvironment(),r=getLangChainEnvVarsMetadata(),n=e.extra??{},o=n.metadata;return e.extra={...n,runtime:{...t,...n?.runtime},metadata:{...r,...r.revision_id||e.revision_id?{revision_id:e.revision_id??r.revision_id}:{},...o}},e}const getTracingSamplingRate=e=>{const t=e?.toString()??getLangSmithEnvironmentVariable("TRACING_SAMPLING_RATE");if(void 0===t)return;const r=parseFloat(t);if(r<0||r>1)throw new Error(`LANGSMITH_TRACING_SAMPLING_RATE must be between 0 and 1 if set. Got: ${r}`);return r},isLocalhost=e=>{const t=e.replace("http://","").replace("https://","").split("/")[0].split(":")[0];return"localhost"===t||"127.0.0.1"===t||"::1"===t};async function toArray(e){const t=[];for await(const r of e)t.push(r);return t}function trimQuotes(e){if(void 0!==e)return e.trim().replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}const handle429=async e=>{if(429===e?.status){const t=1e3*parseInt(e.headers.get("retry-after")??"30",10);if(t>0)return await new Promise(e=>setTimeout(e,t)),!0}return!1};function _formatFeedbackScore(e){return"number"==typeof e?Number(e.toFixed(4)):e}class AutoBatchQueue{constructor(){Object.defineProperty(this,"items",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"sizeBytes",{enumerable:!0,configurable:!0,writable:!0,value:0})}peek(){return this.items[0]}push(e){let t;const r=new Promise(e=>{t=e}),n=serialize(e.item,`Serializing run with id: ${e.item.id}`).length;return this.items.push({action:e.action,payload:e.item,otelContext:e.otelContext,itemPromiseResolve:t,itemPromise:r,size:n}),this.sizeBytes+=n,r}pop(e){if(e<1)throw new Error("Number of bytes to pop off may not be less than 1.");const t=[];let r=0;for(;r+(this.peek()?.size??0)<e&&this.items.length>0;){const e=this.items.shift();e&&(t.push(e),r+=e.size,this.sizeBytes-=e.size)}if(0===t.length&&this.items.length>0){const e=this.items.shift();t.push(e),r+=e.size,this.sizeBytes-=e.size}return[t.map(e=>({action:e.action,item:e.payload,otelContext:e.otelContext})),()=>t.forEach(e=>e.itemPromiseResolve())]}}const DEFAULT_BATCH_SIZE_LIMIT_BYTES=20971520,SERVER_INFO_REQUEST_TIMEOUT=2500;class Client{constructor(e={}){Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"webUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"batchIngestCaller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout_ms",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tenantId",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hideInputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"hideOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingSampleRate",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"filteredPostUuids",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"autoBatchTracing",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"autoBatchQueue",{enumerable:!0,configurable:!0,writable:!0,value:new AutoBatchQueue}),Object.defineProperty(this,"autoBatchTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"autoBatchAggregationDelayMs",{enumerable:!0,configurable:!0,writable:!0,value:250}),Object.defineProperty(this,"batchSizeBytesLimit",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fetchOptions",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"settings",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"blockOnRootRunFinalization",{enumerable:!0,configurable:!0,writable:!0,value:"false"===getEnvironmentVariable$1("LANGSMITH_TRACING_BACKGROUND")}),Object.defineProperty(this,"traceBatchConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:5}),Object.defineProperty(this,"_serverInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_getServerInfoPromise",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"manualFlushMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"langSmithToOTELTranslator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"debug",{enumerable:!0,configurable:!0,writable:!0,value:"true"===getEnvironmentVariable$1("LANGSMITH_DEBUG")});const t=Client.getDefaultClientConfig();if(this.tracingSampleRate=getTracingSamplingRate(e.tracingSamplingRate),this.apiUrl=trimQuotes(e.apiUrl??t.apiUrl)??"",this.apiUrl.endsWith("/")&&(this.apiUrl=this.apiUrl.slice(0,-1)),this.apiKey=trimQuotes(e.apiKey??t.apiKey),this.webUrl=trimQuotes(e.webUrl??t.webUrl),this.webUrl?.endsWith("/")&&(this.webUrl=this.webUrl.slice(0,-1)),this.timeout_ms=e.timeout_ms??9e4,this.caller=new AsyncCaller$1({...e.callerOptions??{},debug:e.debug??this.debug}),this.traceBatchConcurrency=e.traceBatchConcurrency??this.traceBatchConcurrency,this.traceBatchConcurrency<1)throw new Error("Trace batch concurrency must be positive.");this.debug=e.debug??this.debug,this.batchIngestCaller=new AsyncCaller$1({maxRetries:2,maxConcurrency:this.traceBatchConcurrency,...e.callerOptions??{},onFailedResponseHook:handle429,debug:e.debug??this.debug}),this.hideInputs=e.hideInputs??e.anonymizer??t.hideInputs,this.hideOutputs=e.hideOutputs??e.anonymizer??t.hideOutputs,this.autoBatchTracing=e.autoBatchTracing??this.autoBatchTracing,this.blockOnRootRunFinalization=e.blockOnRootRunFinalization??this.blockOnRootRunFinalization,this.batchSizeBytesLimit=e.batchSizeBytesLimit,this.fetchOptions=e.fetchOptions||{},this.manualFlushMode=e.manualFlushMode??this.manualFlushMode,"true"===getEnvironmentVariable$1("OTEL_ENABLED")&&(this.langSmithToOTELTranslator=new LangSmithToOTELTranslator)}static getDefaultClientConfig(){const e=getLangSmithEnvironmentVariable("API_KEY");return{apiUrl:getLangSmithEnvironmentVariable("ENDPOINT")??"https://api.smith.langchain.com",apiKey:e,webUrl:void 0,hideInputs:"true"===getLangSmithEnvironmentVariable("HIDE_INPUTS"),hideOutputs:"true"===getLangSmithEnvironmentVariable("HIDE_OUTPUTS")}}getHostUrl(){return this.webUrl?this.webUrl:isLocalhost(this.apiUrl)?(this.webUrl="http://localhost:3000",this.webUrl):this.apiUrl.endsWith("/api/v1")?(this.webUrl=this.apiUrl.replace("/api/v1",""),this.webUrl):this.apiUrl.includes("/api")&&!this.apiUrl.split(".",1)[0].endsWith("api")?(this.webUrl=this.apiUrl.replace("/api",""),this.webUrl):this.apiUrl.split(".",1)[0].includes("dev")?(this.webUrl="https://dev.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("eu")?(this.webUrl="https://eu.smith.langchain.com",this.webUrl):this.apiUrl.split(".",1)[0].includes("beta")?(this.webUrl="https://beta.smith.langchain.com",this.webUrl):(this.webUrl="https://smith.langchain.com",this.webUrl)}get headers(){const e={"User-Agent":`langsmith-js/${__version__}`};return this.apiKey&&(e["x-api-key"]=`${this.apiKey}`),e}async processInputs(e){return!1===this.hideInputs?e:!0===this.hideInputs?{}:"function"==typeof this.hideInputs?this.hideInputs(e):e}async processOutputs(e){return!1===this.hideOutputs?e:!0===this.hideOutputs?{}:"function"==typeof this.hideOutputs?this.hideOutputs(e):e}async prepareRunCreateOrUpdateInputs(e){const t={...e};return void 0!==t.inputs&&(t.inputs=await this.processInputs(t.inputs)),void 0!==t.outputs&&(t.outputs=await this.processOutputs(t.outputs)),t}async _getResponse(e,t){const r=t?.toString()??"",n=`${this.apiUrl}${e}?${r}`,o=await this.caller.call(_getFetchImplementation(this.debug),n,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(o,`Failed to fetch ${e}`),o}async _get(e,t){return(await this._getResponse(e,t)).json()}async*_getPaginated(e,t=new URLSearchParams,r){let n=Number(t.get("offset"))||0;const o=Number(t.get("limit"))||100;for(;;){t.set("offset",String(n)),t.set("limit",String(o));const i=`${this.apiUrl}${e}?${t}`,s=await this.caller.call(_getFetchImplementation(this.debug),i,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(s,`Failed to fetch ${e}`);const a=r?r(await s.json()):await s.json();if(0===a.length)break;if(yield a,a.length<o)break;n+=a.length}}async*_getCursorPaginatedList(e,t=null,r="POST",n="runs"){const o=t?{...t}:{};for(;;){const t=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}${e}`,{method:r,headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions,body:JSON.stringify(o)}),i=await t.json();if(!i)break;if(!i[n])break;yield i[n];const s=i.cursors;if(!s)break;if(!s.next)break;o.cursor=s.next}}_shouldSample(){return void 0===this.tracingSampleRate||Math.random()<this.tracingSampleRate}_filterForSampling(e,t=!1){if(void 0===this.tracingSampleRate)return e;if(t){const t=[];for(const r of e)this.filteredPostUuids.has(r.id)?this.filteredPostUuids.delete(r.id):t.push(r);return t}{const t=[];for(const r of e){const e=r.trace_id??r.id;this.filteredPostUuids.has(e)||(r.id===e?this._shouldSample()?t.push(r):this.filteredPostUuids.add(e):t.push(r))}return t}}async _getBatchSizeLimitBytes(){const e=await this._ensureServerInfo();return this.batchSizeBytesLimit??e.batch_ingest_config?.size_limit_bytes??DEFAULT_BATCH_SIZE_LIMIT_BYTES}async _getMultiPartSupport(){const e=await this._ensureServerInfo();return e.instance_flags?.dataset_examples_multipart_enabled??!1}drainAutoBatchQueue(e){const t=[];for(;this.autoBatchQueue.items.length>0;){const[r,n]=this.autoBatchQueue.pop(e);if(!r.length){n();break}const o=this._processBatch(r,n).catch(console.error);t.push(o)}return Promise.all(t)}async _processBatch(e,t){if(e.length)try{if(void 0!==this.langSmithToOTELTranslator)this._sendBatchToOTELTranslator(e);else{const t={runCreates:e.filter(e=>"create"===e.action).map(e=>e.item),runUpdates:e.filter(e=>"update"===e.action).map(e=>e.item)},r=await this._ensureServerInfo();r?.batch_ingest_config?.use_multipart_endpoint?await this.multipartIngestRuns(t):await this.batchIngestRuns(t)}}catch(r){console.error("Error exporting batch:",r)}finally{t()}else t()}_sendBatchToOTELTranslator(e){if(void 0!==this.langSmithToOTELTranslator){const t=new Map,r=[];for(const n of e)n.item.id&&n.otelContext&&(t.set(n.item.id,n.otelContext),"create"===n.action?r.push({operation:"post",id:n.item.id,trace_id:n.item.trace_id??n.item.id,run:n.item}):r.push({operation:"patch",id:n.item.id,trace_id:n.item.trace_id??n.item.id,run:n.item}));this.langSmithToOTELTranslator.exportBatch(r,t)}}async processRunOperation(e){clearTimeout(this.autoBatchTimeout),this.autoBatchTimeout=void 0,"create"===e.action&&(e.item=mergeRuntimeEnvIntoRunCreate(e.item));const t=this.autoBatchQueue.push(e);if(this.manualFlushMode)return t;const r=await this._getBatchSizeLimitBytes();return this.autoBatchQueue.sizeBytes>r&&this.drainAutoBatchQueue(r),this.autoBatchQueue.items.length>0&&(this.autoBatchTimeout=setTimeout(()=>{this.autoBatchTimeout=void 0,this.drainAutoBatchQueue(r)},this.autoBatchAggregationDelayMs)),t}async _getServerInfo(){const e=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/info`,{method:"GET",headers:{Accept:"application/json"},signal:AbortSignal.timeout(SERVER_INFO_REQUEST_TIMEOUT),...this.fetchOptions});await raiseForStatus(e,"get server info");const t=await e.json();return this.debug&&console.log("\n=== LangSmith Server Configuration ===\n"+JSON.stringify(t,null,2)+"\n"),t}async _ensureServerInfo(){return void 0===this._getServerInfoPromise&&(this._getServerInfoPromise=(async()=>{if(void 0===this._serverInfo)try{this._serverInfo=await this._getServerInfo()}catch(e){console.warn(`[WARNING]: LangSmith failed to fetch info on supported operations with status code ${e.status}. Falling back to batch operations and default limits.`)}return this._serverInfo??{}})()),this._getServerInfoPromise.then(e=>(void 0===this._serverInfo&&(this._getServerInfoPromise=void 0),e))}async _getSettings(){return this.settings||(this.settings=this._get("/settings")),await this.settings}async flush(){const e=await this._getBatchSizeLimitBytes();await this.drainAutoBatchQueue(e)}_cloneCurrentOTELContext(){const e=getOTELTrace(),t=getOTELContext();if(void 0!==this.langSmithToOTELTranslator){const r=e.getActiveSpan();if(r)return e.setSpan(t.active(),r)}}async createRun(e){if(!this._filterForSampling([e]).length)return;const t={...this.headers,"Content-Type":"application/json"},r=e.project_name;delete e.project_name;const n=await this.prepareRunCreateOrUpdateInputs({session_name:r,...e,start_time:e.start_time??Date.now()});if(this.autoBatchTracing&&void 0!==n.trace_id&&void 0!==n.dotted_order){const e=this._cloneCurrentOTELContext();return void this.processRunOperation({action:"create",item:n,otelContext:e}).catch(console.error)}const o=mergeRuntimeEnvIntoRunCreate(n),i=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs`,{method:"POST",headers:t,body:serialize(o,`Creating run with id: ${o.id}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(i,"create run",!0)}async batchIngestRuns({runCreates:e,runUpdates:t}){if(void 0===e&&void 0===t)return;let r=await Promise.all(e?.map(e=>this.prepareRunCreateOrUpdateInputs(e))??[]),n=await Promise.all(t?.map(e=>this.prepareRunCreateOrUpdateInputs(e))??[]);if(r.length>0&&n.length>0){const e=r.reduce((e,t)=>t.id?(e[t.id]=t,e):e,{}),t=[];for(const r of n)void 0!==r.id&&e[r.id]?e[r.id]={...e[r.id],...r}:t.push(r);r=Object.values(e),n=t}const o={post:r,patch:n};if(!o.post.length&&!o.patch.length)return;const i={post:[],patch:[]};for(const s of["post","patch"]){const e=s,t=o[e].reverse();let r=t.pop();for(;void 0!==r;)i[e].push(r),r=t.pop()}if(i.post.length>0||i.patch.length>0){const e=i.post.map(e=>e.id).concat(i.patch.map(e=>e.id)).join(",");await this._postBatchIngestRuns(serialize(i,`Ingesting runs with ids: ${e}`))}}async _postBatchIngestRuns(e){const t={...this.headers,"Content-Type":"application/json",Accept:"application/json"},r=await this.batchIngestCaller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/batch`,{method:"POST",headers:t,body:e,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,"batch create run",!0)}async multipartIngestRuns({runCreates:e,runUpdates:t}){if(void 0===e&&void 0===t)return;const r={};let n=[];for(const a of e??[]){const e=await this.prepareRunCreateOrUpdateInputs(a);void 0!==e.id&&void 0!==e.attachments&&(r[e.id]=e.attachments),delete e.attachments,n.push(e)}let o=[];for(const a of t??[])o.push(await this.prepareRunCreateOrUpdateInputs(a));if(void 0!==n.find(e=>void 0===e.trace_id||void 0===e.dotted_order))throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when creating a run');if(void 0!==o.find(e=>void 0===e.trace_id||void 0===e.dotted_order))throw new Error('Multipart ingest requires "trace_id" and "dotted_order" to be set when updating a run');if(n.length>0&&o.length>0){const e=n.reduce((e,t)=>t.id?(e[t.id]=t,e):e,{}),t=[];for(const r of o)void 0!==r.id&&e[r.id]?e[r.id]={...e[r.id],...r}:t.push(r);n=Object.values(e),o=t}if(0===n.length&&0===o.length)return;const i=[],s=[];for(const[a,c]of[["post",n],["patch",o]])for(const e of c){const{inputs:t,outputs:n,events:o,attachments:c,...u}=e,l={inputs:t,outputs:n,events:o},d=serialize(u,`Serializing for multipart ingestion of run with id: ${u.id}`);s.push({name:`${a}.${u.id}`,payload:new Blob([d],{type:`application/json; length=${d.length}`})});for(const[e,r]of Object.entries(l)){if(void 0===r)continue;const t=serialize(r,`Serializing ${e} for multipart ingestion of run with id: ${u.id}`);s.push({name:`${a}.${u.id}.${e}`,payload:new Blob([t],{type:`application/json; length=${t.length}`})})}if(void 0!==u.id){const e=r[u.id];if(e){delete r[u.id];for(const[t,r]of Object.entries(e)){let e,n;Array.isArray(r)?[e,n]=r:(e=r.mimeType,n=r.data),t.includes(".")?console.warn(`Skipping attachment '${t}' for run ${u.id}: Invalid attachment name. Attachment names must not contain periods ('.'). Please rename the attachment and try again.`):s.push({name:`attachment.${u.id}.${t}`,payload:new Blob([n],{type:`${e}; length=${n.byteLength}`})})}}}i.push(`trace=${u.trace_id},id=${u.id}`)}await this._sendMultipartRequest(s,i.join("; "))}async _createNodeFetchBody(e,t){const r=[];for(const o of e)r.push(new Blob([`--${t}\r\n`])),r.push(new Blob([`Content-Disposition: form-data; name="${o.name}"\r\n`,`Content-Type: ${o.payload.type}\r\n\r\n`])),r.push(o.payload),r.push(new Blob(["\r\n"]));r.push(new Blob([`--${t}--\r\n`]));const n=new Blob(r);return await n.arrayBuffer()}async _createMultipartStream(e,t){const r=new TextEncoder;return new ReadableStream({async start(n){const o=async e=>{"string"==typeof e?n.enqueue(r.encode(e)):n.enqueue(e)};for(const r of e){await o(`--${t}\r\n`),await o(`Content-Disposition: form-data; name="${r.name}"\r\n`),await o(`Content-Type: ${r.payload.type}\r\n\r\n`);const e=r.payload.stream().getReader();try{let t;for(;!(t=await e.read()).done;)n.enqueue(t.value)}finally{e.releaseLock()}await o("\r\n")}await o(`--${t}--\r\n`),n.close()}})}async _sendMultipartRequest(e,t){try{const t="----LangSmithFormBoundary"+Math.random().toString(36).slice(2),r=await(_globalFetchImplementationIsNodeFetch()?this._createNodeFetchBody(e,t):this._createMultipartStream(e,t)),n=await this.batchIngestCaller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/multipart`,{method:"POST",headers:{...this.headers,"Content-Type":`multipart/form-data; boundary=${t}`},body:r,duplex:"half",signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(n,"ingest multipart runs",!0)}catch(r){console.warn(`${r.message.trim()}\n\nContext: ${t}`)}}async updateRun(e,t){assertUuid(e),t.inputs&&(t.inputs=await this.processInputs(t.inputs)),t.outputs&&(t.outputs=await this.processOutputs(t.outputs));const r={...t,id:e};if(!this._filterForSampling([r],!0).length)return;if(this.autoBatchTracing&&void 0!==r.trace_id&&void 0!==r.dotted_order){const e=this._cloneCurrentOTELContext();return void 0!==t.end_time&&void 0===r.parent_run_id&&this.blockOnRootRunFinalization&&!this.manualFlushMode?void(await this.processRunOperation({action:"update",item:r,otelContext:e}).catch(console.error)):void this.processRunOperation({action:"update",item:r,otelContext:e}).catch(console.error)}const n={...this.headers,"Content-Type":"application/json"},o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/${e}`,{method:"PATCH",headers:n,body:serialize(t,`Serializing payload to update run with id: ${e}`),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(o,"update run",!0)}async readRun(e,{loadChildRuns:t}={loadChildRuns:!1}){assertUuid(e);let r=await this._get(`/runs/${e}`);return t&&(r=await this._loadChildRuns(r)),r}async getRunUrl({runId:e,run:t,projectOpts:r}){if(void 0!==t){let e;if(t.session_id)e=t.session_id;else if(r?.projectName)e=(await this.readProject({projectName:r?.projectName})).id;else if(r?.projectId)e=r?.projectId;else{e=(await this.readProject({projectName:getLangSmithEnvironmentVariable("PROJECT")||"default"})).id}const n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${e}/r/${t.id}?poll=true`}if(void 0!==e){const t=await this.readRun(e);if(!t.app_path)throw new Error(`Run ${e} has no app_path`);return`${this.getHostUrl()}${t.app_path}`}throw new Error("Must provide either runId or run")}async _loadChildRuns(e){const t=await toArray(this.listRuns({isRoot:!1,projectId:e.session_id,traceId:e.trace_id})),r={},n={};t.sort((e,t)=>(e?.dotted_order??"").localeCompare(t?.dotted_order??""));for(const o of t){if(null===o.parent_run_id||void 0===o.parent_run_id)throw new Error(`Child run ${o.id} has no parent`);o.dotted_order?.startsWith(e.dotted_order??"")&&o.id!==e.id&&(o.parent_run_id in r||(r[o.parent_run_id]=[]),r[o.parent_run_id].push(o),n[o.id]=o)}e.child_runs=r[e.id]||[];for(const o in r)o!==e.id&&(n[o].child_runs=r[o]);return e}async*listRuns(e){const{projectId:t,projectName:r,parentRunId:n,traceId:o,referenceExampleId:i,startTime:s,executionOrder:a,isRoot:c,runType:u,error:l,id:d,query:h,filter:f,traceFilter:p,treeFilter:m,limit:y,select:g,order:b}=e;let _=[];if(t&&(_=Array.isArray(t)?t:[t]),r){const e=Array.isArray(r)?r:[r],t=await Promise.all(e.map(e=>this.readProject({projectName:e}).then(e=>e.id)));_.push(...t)}const w={session:_.length?_:null,run_type:u,reference_example:i,query:h,filter:f,trace_filter:p,tree_filter:m,execution_order:a,parent_run:n,start_time:s?s.toISOString():null,error:l,id:d,limit:y,trace:o,select:g||["app_path","completion_cost","completion_tokens","dotted_order","end_time","error","events","extra","feedback_stats","first_token_time","id","inputs","name","outputs","parent_run_id","parent_run_ids","prompt_cost","prompt_tokens","reference_example_id","run_type","session_id","start_time","status","tags","total_cost","total_tokens","trace_id"],is_root:c,order:b};let v=0;for await(const I of this._getCursorPaginatedList("/runs/query",w))if(y){if(v>=y)break;if(I.length+v>y){const e=I.slice(0,y-v);yield*e;break}v+=I.length,yield*I}else yield*I}async*listGroupRuns(e){const{projectId:t,projectName:r,groupBy:n,filter:o,startTime:i,endTime:s,limit:a,offset:c}=e,u={session_id:t||(await this.readProject({projectName:r})).id,group_by:n,filter:o,start_time:i?i.toISOString():null,end_time:s?s.toISOString():null,limit:Number(a)||100};let l=Number(c)||0;const d="/runs/group",h=`${this.apiUrl}${d}`;for(;;){const e={...u,offset:l},t=Object.fromEntries(Object.entries(e).filter(([e,t])=>void 0!==t)),r=await this.caller.call(_getFetchImplementation(),h,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,`Failed to fetch ${d}`);const n=await r.json(),{groups:o,total:i}=n;if(0===o.length)break;for(const s of o)yield s;if(l+=o.length,l>=i)break}}async getRunStats({id:e,trace:t,parentRun:r,runType:n,projectNames:o,projectIds:i,referenceExampleIds:s,startTime:a,endTime:c,error:u,query:l,filter:d,traceFilter:h,treeFilter:f,isRoot:p,dataSourceType:m}){let y=i||[];o&&(y=[...i||[],...await Promise.all(o.map(e=>this.readProject({projectName:e}).then(e=>e.id)))]);const g={id:e,trace:t,parent_run:r,run_type:n,session:y,reference_example:s,start_time:a,end_time:c,error:u,query:l,filter:d,trace_filter:h,tree_filter:f,is_root:p,data_source_type:m},b=Object.fromEntries(Object.entries(g).filter(([e,t])=>void 0!==t)),_=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/stats`,{method:"POST",headers:this.headers,body:JSON.stringify(b),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await _.json()}async shareRun(e,{shareId:t}={}){const r={run_id:e,share_token:t||v4()};assertUuid(e);const n=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),o=await n.json();if(null===o||!("share_token"in o))throw new Error("Invalid response from server");return`${this.getHostUrl()}/public/${o.share_token}/r`}async unshareRun(e){assertUuid(e);const t=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(t,"unshare run",!0)}async readRunSharedLink(e){assertUuid(e);const t=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/runs/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await t.json();if(null!==r&&"share_token"in r)return`${this.getHostUrl()}/public/${r.share_token}/r`}async listSharedRuns(e,{runIds:t}={}){const r=new URLSearchParams({share_token:e});if(void 0!==t)for(const o of t)r.append("id",o);assertUuid(e);const n=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/public/${e}/runs${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await n.json()}async readDatasetSharedSchema(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");if(!e){e=(await this.readDataset({datasetName:t})).id}assertUuid(e);const r=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),n=await r.json();return n.url=`${this.getHostUrl()}/public/${n.share_token}/d`,n}async shareDataset(e,t){if(!e&&!t)throw new Error("Either datasetId or datasetName must be given");if(!e){e=(await this.readDataset({datasetName:t})).id}const r={dataset_id:e};assertUuid(e);const n=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"PUT",headers:this.headers,body:JSON.stringify(r),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),o=await n.json();return o.url=`${this.getHostUrl()}/public/${o.share_token}/d`,o}async unshareDataset(e){assertUuid(e);const t=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${e}/share`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(t,"unshare dataset",!0)}async readSharedDataset(e){assertUuid(e);const t=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/public/${e}/datasets`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await t.json()}async listSharedExamples(e,t){const r={};t?.exampleIds&&(r.id=t.exampleIds);const n=new URLSearchParams;Object.entries(r).forEach(([e,t])=>{Array.isArray(t)?t.forEach(t=>n.append(e,t)):n.append(e,t)});const o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/public/${e}/examples?${n.toString()}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),i=await o.json();if(!o.ok){if("detail"in i)throw new Error(`Failed to list shared examples.\nStatus: ${o.status}\nMessage: ${Array.isArray(i.detail)?i.detail.join("\n"):"Unspecified error"}`);throw new Error(`Failed to list shared examples: ${o.status} ${o.statusText}`)}return i.map(e=>({...e,_hostUrl:this.getHostUrl()}))}async createProject({projectName:e,description:t=null,metadata:r=null,upsert:n=!1,projectExtra:o=null,referenceDatasetId:i=null}){const s=n?"?upsert=true":"",a=`${this.apiUrl}/sessions${s}`,c=o||{};r&&(c.metadata=r);const u={name:e,extra:c,description:t};null!==i&&(u.reference_dataset_id=i);const l=await this.caller.call(_getFetchImplementation(this.debug),a,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(u),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(l,"create project");return await l.json()}async updateProject(e,{name:t=null,description:r=null,metadata:n=null,projectExtra:o=null,endTime:i=null}){const s=`${this.apiUrl}/sessions/${e}`;let a=o;n&&(a={...a||{},metadata:n});const c={name:t,extra:a,description:r,end_time:i?new Date(i).toISOString():null},u=await this.caller.call(_getFetchImplementation(this.debug),s,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(c),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(u,"update project");return await u.json()}async hasProject({projectId:e,projectName:t}){let r="/sessions";const n=new URLSearchParams;if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==e)assertUuid(e),r+=`/${e}`;else{if(void 0===t)throw new Error("Must provide projectName or projectId");n.append("name",t)}const o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}${r}?${n}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});try{const e=await o.json();return!!o.ok&&(!Array.isArray(e)||e.length>0)}catch(i){return!1}}async readProject({projectId:e,projectName:t,includeStats:r}){let n="/sessions";const o=new URLSearchParams;if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");if(void 0!==e)assertUuid(e),n+=`/${e}`;else{if(void 0===t)throw new Error("Must provide projectName or projectId");o.append("name",t)}void 0!==r&&o.append("include_stats",r.toString());const i=await this._get(n,o);let s;if(Array.isArray(i)){if(0===i.length)throw new Error(`Project[id=${e}, name=${t}] not found`);s=i[0]}else s=i;return s}async getProjectUrl({projectId:e,projectName:t}){if(void 0===e&&void 0===t)throw new Error("Must provide either projectName or projectId");const r=await this.readProject({projectId:e,projectName:t}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/projects/p/${r.id}`}async getDatasetUrl({datasetId:e,datasetName:t}){if(void 0===e&&void 0===t)throw new Error("Must provide either datasetName or datasetId");const r=await this.readDataset({datasetId:e,datasetName:t}),n=await this._getTenantId();return`${this.getHostUrl()}/o/${n}/datasets/${r.id}`}async _getTenantId(){if(null!==this._tenantId)return this._tenantId;const e=new URLSearchParams({limit:"1"});for await(const t of this._getPaginated("/sessions",e))return this._tenantId=t[0].tenant_id,t[0].tenant_id;throw new Error("No projects found to resolve tenant.")}async*listProjects({projectIds:e,name:t,nameContains:r,referenceDatasetId:n,referenceDatasetName:o,referenceFree:i,metadata:s}={}){const a=new URLSearchParams;if(void 0!==e)for(const c of e)a.append("id",c);if(void 0!==t&&a.append("name",t),void 0!==r&&a.append("name_contains",r),void 0!==n)a.append("reference_dataset",n);else if(void 0!==o){const e=await this.readDataset({datasetName:o});a.append("reference_dataset",e.id)}void 0!==i&&a.append("reference_free",i.toString()),void 0!==s&&a.append("metadata",JSON.stringify(s));for await(const c of this._getPaginated("/sessions",a))yield*c}async deleteProject({projectId:e,projectName:t}){let r;if(void 0===e&&void 0===t)throw new Error("Must provide projectName or projectId");if(void 0!==e&&void 0!==t)throw new Error("Must provide either projectName or projectId, not both");r=void 0===e?(await this.readProject({projectName:t})).id:e,assertUuid(r);const n=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/sessions/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(n,`delete session ${r} (${t})`,!0)}async uploadCsv({csvFile:e,fileName:t,inputKeys:r,outputKeys:n,description:o,dataType:i,name:s}){const a=`${this.apiUrl}/datasets/upload`,c=new FormData;c.append("file",e,t),r.forEach(e=>{c.append("input_keys",e)}),n.forEach(e=>{c.append("output_keys",e)}),o&&c.append("description",o),i&&c.append("data_type",i),s&&c.append("name",s);const u=await this.caller.call(_getFetchImplementation(this.debug),a,{method:"POST",headers:this.headers,body:c,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(u,"upload CSV");return await u.json()}async createDataset(e,{description:t,dataType:r,inputsSchema:n,outputsSchema:o,metadata:i}={}){const s={name:e,description:t,extra:i?{metadata:i}:void 0};r&&(s.data_type=r),n&&(s.inputs_schema_definition=n),o&&(s.outputs_schema_definition=o);const a=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(a,"create dataset");return await a.json()}async readDataset({datasetId:e,datasetName:t}){let r="/datasets";const n=new URLSearchParams({limit:"1"});if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==e)assertUuid(e),r+=`/${e}`;else{if(void 0===t)throw new Error("Must provide datasetName or datasetId");n.append("name",t)}const o=await this._get(r,n);let i;if(Array.isArray(o)){if(0===o.length)throw new Error(`Dataset[id=${e}, name=${t}] not found`);i=o[0]}else i=o;return i}async hasDataset({datasetId:e,datasetName:t}){try{return await this.readDataset({datasetId:e,datasetName:t}),!0}catch(r){if(r instanceof Error&&r.message.toLocaleLowerCase().includes("not found"))return!1;throw r}}async diffDatasetVersions({datasetId:e,datasetName:t,fromVersion:r,toVersion:n}){let o=e;if(void 0===o&&void 0===t)throw new Error("Must provide either datasetName or datasetId");if(void 0!==o&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===o){o=(await this.readDataset({datasetName:t})).id}const i=new URLSearchParams({from_version:"string"==typeof r?r:r.toISOString(),to_version:"string"==typeof n?n:n.toISOString()});return await this._get(`/datasets/${o}/versions/diff`,i)}async readDatasetOpenaiFinetuning({datasetId:e,datasetName:t}){if(void 0!==e);else{if(void 0===t)throw new Error("Must provide either datasetName or datasetId");e=(await this.readDataset({datasetName:t})).id}const r=await this._getResponse(`/datasets/${e}/openai_ft`);return(await r.text()).trim().split("\n").map(e=>JSON.parse(e))}async*listDatasets({limit:e=100,offset:t=0,datasetIds:r,datasetName:n,datasetNameContains:o,metadata:i}={}){const s=new URLSearchParams({limit:e.toString(),offset:t.toString()});if(void 0!==r)for(const a of r)s.append("id",a);void 0!==n&&s.append("name",n),void 0!==o&&s.append("name_contains",o),void 0!==i&&s.append("metadata",JSON.stringify(i));for await(const a of this._getPaginated("/datasets",s))yield*a}async updateDataset(e){const{datasetId:t,datasetName:r,...n}=e;if(!t&&!r)throw new Error("Must provide either datasetName or datasetId");const o=t??(await this.readDataset({datasetName:r})).id;assertUuid(o);const i=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${o}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(n),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(i,"update dataset"),await i.json()}async updateDatasetTag(e){const{datasetId:t,datasetName:r,asOf:n,tag:o}=e;if(!t&&!r)throw new Error("Must provide either datasetName or datasetId");const i=t??(await this.readDataset({datasetName:r})).id;assertUuid(i);const s=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${i}/tags`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({as_of:"string"==typeof n?n:n.toISOString(),tag:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(s,"update dataset tags")}async deleteDataset({datasetId:e,datasetName:t}){let r="/datasets",n=e;if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==t){n=(await this.readDataset({datasetName:t})).id}if(void 0===n)throw new Error("Must provide datasetName or datasetId");assertUuid(n),r+=`/${n}`;const o=await this.caller.call(_getFetchImplementation(this.debug),this.apiUrl+r,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(o,`delete ${r}`),await o.json()}async indexDataset({datasetId:e,datasetName:t,tag:r}){let n=e;if(!n&&!t)throw new Error("Must provide either datasetName or datasetId");if(n&&t)throw new Error("Must provide either datasetName or datasetId, not both");if(!n){n=(await this.readDataset({datasetName:t})).id}assertUuid(n);const o={tag:r},i=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${n}/index`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(i,"index dataset"),await i.json()}async similarExamples(e,t,r,{filter:n}={}){const o={limit:r,inputs:e};void 0!==n&&(o.filter=n),assertUuid(t);const i=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${t}/search`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(i,"fetch similar examples");return(await i.json()).examples}async createExample(e,t,r){if(isExampleCreate(e)&&(void 0!==t||void 0!==r))throw new Error("Cannot provide outputs or options when using ExampleCreate object");let n=t?r?.datasetId:e.dataset_id;const o=t?r?.datasetName:e.dataset_name;if(void 0===n&&void 0===o)throw new Error("Must provide either datasetName or datasetId");if(void 0!==n&&void 0!==o)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===n){n=(await this.readDataset({datasetName:o})).id}const i=(t?r?.createdAt:e.created_at)||new Date;let s;s=isExampleCreate(e)?e:{inputs:e,outputs:t,created_at:i?.toISOString(),id:r?.exampleId,metadata:r?.metadata,split:r?.split,source_run_id:r?.sourceRunId,use_source_run_io:r?.useSourceRunIO,use_source_run_attachments:r?.useSourceRunAttachments,attachments:r?.attachments};const a=await this._uploadExamplesMultipart(n,[s]);return await this.readExample(a.example_ids?.[0]??v4())}async createExamples(e){if(Array.isArray(e)){if(0===e.length)return[];const t=e;let r=t[0].dataset_id;const n=t[0].dataset_name;if(void 0===r&&void 0===n)throw new Error("Must provide either datasetName or datasetId");if(void 0!==r&&void 0!==n)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===r){r=(await this.readDataset({datasetName:n})).id}const o=await this._uploadExamplesMultipart(r,t);return await Promise.all(o.example_ids.map(e=>this.readExample(e)))}const{inputs:t,outputs:r,metadata:n,splits:o,sourceRunIds:i,useSourceRunIOs:s,useSourceRunAttachments:a,attachments:c,exampleIds:u,datasetId:l,datasetName:d}=e;if(void 0===t)throw new Error("Must provide inputs when using legacy parameters");let h=l;const f=d;if(void 0===h&&void 0===f)throw new Error("Must provide either datasetName or datasetId");if(void 0!==h&&void 0!==f)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===h){const e=await this.readDataset({datasetName:f});h=e.id}const p=t.map((e,t)=>({dataset_id:h,inputs:e,outputs:r?.[t],metadata:n?.[t],split:o?.[t],id:u?.[t],attachments:c?.[t],source_run_id:i?.[t],use_source_run_io:s?.[t],use_source_run_attachments:a?.[t]})),m=await this._uploadExamplesMultipart(h,p);return await Promise.all(m.example_ids.map(e=>this.readExample(e)))}async createLLMExample(e,t,r){return this.createExample({input:e},{output:t},r)}async createChatExample(e,t,r){const n=e.map(e=>isLangChainMessage(e)?convertLangChainMessageToExample(e):e),o=isLangChainMessage(t)?convertLangChainMessageToExample(t):t;return this.createExample({input:n},{output:o},r)}async readExample(e){assertUuid(e);const t=`/examples/${e}`,r=await this._get(t),{attachment_urls:n,...o}=r,i=o;return n&&(i.attachments=Object.entries(n).reduce((e,[t,r])=>(e[t.slice(11)]={presigned_url:r.presigned_url,mime_type:r.mime_type},e),{})),i}async*listExamples({datasetId:e,datasetName:t,exampleIds:r,asOf:n,splits:o,inlineS3Urls:i,metadata:s,limit:a,offset:c,filter:u,includeAttachments:l}={}){let d;if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0!==e)d=e;else{if(void 0===t)throw new Error("Must provide a datasetName or datasetId");d=(await this.readDataset({datasetName:t})).id}const h=new URLSearchParams({dataset:d}),f=n?"string"==typeof n?n:n?.toISOString():void 0;f&&h.append("as_of",f);const p=i??!0;if(h.append("inline_s3_urls",p.toString()),void 0!==r)for(const y of r)h.append("id",y);if(void 0!==o)for(const y of o)h.append("splits",y);if(void 0!==s){const e=JSON.stringify(s);h.append("metadata",e)}void 0!==a&&h.append("limit",a.toString()),void 0!==c&&h.append("offset",c.toString()),void 0!==u&&h.append("filter",u),!0===l&&["attachment_urls","outputs","metadata"].forEach(e=>h.append("select",e));let m=0;for await(const y of this._getPaginated("/examples",h)){for(const e of y){const{attachment_urls:t,...r}=e,n=r;t&&(n.attachments=Object.entries(t).reduce((e,[t,r])=>(e[t.slice(11)]={presigned_url:r.presigned_url,mime_type:r.mime_type||void 0},e),{})),yield n,m++}if(void 0!==a&&m>=a)break}}async deleteExample(e){assertUuid(e);const t=`/examples/${e}`,r=await this.caller.call(_getFetchImplementation(this.debug),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,`delete ${t}`),await r.json()}async updateExample(e,t){let r,n,o;if(r=t?e:e.id,assertUuid(r),n=t?{id:r,...t}:e,void 0!==n.dataset_id)o=n.dataset_id;else{o=(await this.readExample(r)).dataset_id}return this._updateExamplesMultipart(o,[n])}async updateExamples(e){let t;if(void 0===e[0].dataset_id){t=(await this.readExample(e[0].id)).dataset_id}else t=e[0].dataset_id;return this._updateExamplesMultipart(t,e)}async readDatasetVersion({datasetId:e,datasetName:t,asOf:r,tag:n}){let o;if(e)o=e;else{o=(await this.readDataset({datasetName:t})).id}if(assertUuid(o),r&&n||!r&&!n)throw new Error("Exactly one of asOf and tag must be specified.");const i=new URLSearchParams;void 0!==r&&i.append("as_of","string"==typeof r?r:r.toISOString()),void 0!==n&&i.append("tag",n);const s=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${o}/version?${i.toString()}`,{method:"GET",headers:{...this.headers},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(s,"read dataset version"),await s.json()}async listDatasetSplits({datasetId:e,datasetName:t,asOf:r}){let n;if(void 0===e&&void 0===t)throw new Error("Must provide dataset name or ID");if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===e){n=(await this.readDataset({datasetName:t})).id}else n=e;assertUuid(n);const o=new URLSearchParams,i=r?"string"==typeof r?r:r?.toISOString():void 0;i&&o.append("as_of",i);return await this._get(`/datasets/${n}/splits`,o)}async updateDatasetSplits({datasetId:e,datasetName:t,splitName:r,exampleIds:n,remove:o=!1}){let i;if(void 0===e&&void 0===t)throw new Error("Must provide dataset name or ID");if(void 0!==e&&void 0!==t)throw new Error("Must provide either datasetName or datasetId, not both");if(void 0===e){i=(await this.readDataset({datasetName:t})).id}else i=e;assertUuid(i);const s={split_name:r,examples:n.map(e=>(assertUuid(e),e)),remove:o},a=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/${i}/splits`,{method:"PUT",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(a,"update dataset splits",!0)}async evaluateRun(e,t,{sourceInfo:r,loadChildRuns:n,referenceExample:o}={loadChildRuns:!1}){let i;if(warnOnce("This method is deprecated and will be removed in future LangSmith versions, use `evaluate` from `langsmith/evaluation` instead."),"string"==typeof e)i=await this.readRun(e,{loadChildRuns:n});else{if("object"!=typeof e||!("id"in e))throw new Error("Invalid run type: "+typeof e);i=e}null!==i.reference_example_id&&void 0!==i.reference_example_id&&(o=await this.readExample(i.reference_example_id));const s=await t.evaluateRun(i,o),[a,c]=await this._logEvaluationFeedback(s,i,r);return c[0]}async createFeedback(e,t,{score:r,value:n,correction:o,comment:i,sourceInfo:s,feedbackSourceType:a="api",sourceRunId:c,feedbackId:u,feedbackConfig:l,projectId:d,comparativeExperimentId:h}){if(!e&&!d)throw new Error("One of runId or projectId must be provided");if(e&&d)throw new Error("Only one of runId or projectId can be provided");const f={type:a??"api",metadata:s??{}};void 0===c||void 0===f?.metadata||f.metadata.__run||(f.metadata.__run={run_id:c}),void 0!==f?.metadata&&void 0!==f.metadata.__run?.run_id&&assertUuid(f.metadata.__run.run_id);const p={id:u??v4(),run_id:e,key:t,score:_formatFeedbackScore(r),value:n,correction:o,comment:i,feedback_source:f,comparative_experiment_id:h,feedbackConfig:l,session_id:d},m=`${this.apiUrl}/feedback`,y=await this.caller.call(_getFetchImplementation(this.debug),m,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(p),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(y,"create feedback",!0),p}async updateFeedback(e,{score:t,value:r,correction:n,comment:o}){const i={};null!=t&&(i.score=_formatFeedbackScore(t)),null!=r&&(i.value=r),null!=n&&(i.correction=n),null!=o&&(i.comment=o),assertUuid(e);const s=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/feedback/${e}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(i),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(s,"update feedback",!0)}async readFeedback(e){assertUuid(e);const t=`/feedback/${e}`;return await this._get(t)}async deleteFeedback(e){assertUuid(e);const t=`/feedback/${e}`,r=await this.caller.call(_getFetchImplementation(this.debug),this.apiUrl+t,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,`delete ${t}`),await r.json()}async*listFeedback({runIds:e,feedbackKeys:t,feedbackSourceTypes:r}={}){const n=new URLSearchParams;if(e&&n.append("run",e.join(",")),t)for(const o of t)n.append("key",o);if(r)for(const o of r)n.append("source",o);for await(const o of this._getPaginated("/feedback",n))yield*o}async createPresignedFeedbackToken(e,t,{expiration:r,feedbackConfig:n}={}){const o={run_id:e,feedback_key:t,feedback_config:n};r?"string"==typeof r?o.expires_at=r:(r?.hours||r?.minutes||r?.days)&&(o.expires_in=r):o.expires_in={hours:3};const i=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/feedback/tokens`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(o),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await i.json()}async createComparativeExperiment({name:e,experimentIds:t,referenceDatasetId:r,createdAt:n,description:o,metadata:i,id:s}){if(0===t.length)throw new Error("At least one experiment is required");if(r||(r=(await this.readProject({projectId:t[0]})).reference_dataset_id),null==!r)throw new Error("A reference dataset is required");const a={id:s,name:e,experiment_ids:t,reference_dataset_id:r,description:o,created_at:(n??new Date)?.toISOString(),extra:{}};i&&(a.extra.metadata=i);const c=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/datasets/comparative`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await c.json()}async*listPresignedFeedbackTokens(e){assertUuid(e);const t=new URLSearchParams({run_id:e});for await(const r of this._getPaginated("/feedback/tokens",t))yield*r}_selectEvalResults(e){let t;return t="results"in e?e.results:Array.isArray(e)?e:[e],t}async _logEvaluationFeedback(e,t,r){const n=this._selectEvalResults(e),o=[];for(const i of n){let e=r||{};i.evaluatorInfo&&(e={...i.evaluatorInfo,...e});let n=null;i.targetRunId?n=i.targetRunId:t&&(n=t.id),o.push(await this.createFeedback(n,i.key,{score:i.score,value:i.value,comment:i.comment,correction:i.correction,sourceInfo:e,sourceRunId:i.sourceRunId,feedbackConfig:i.feedbackConfig,feedbackSourceType:"model"}))}return[n,o]}async logEvaluationFeedback(e,t,r){const[n]=await this._logEvaluationFeedback(e,t,r);return n}async*listAnnotationQueues(e={}){const{queueIds:t,name:r,nameContains:n,limit:o}=e,i=new URLSearchParams;t&&t.forEach((e,t)=>{assertUuid(e,`queueIds[${t}]`),i.append("ids",e)}),r&&i.append("name",r),n&&i.append("name_contains",n),i.append("limit",(void 0!==o?Math.min(o,100):100).toString());let s=0;for await(const a of this._getPaginated("/annotation-queues",i))if(yield*a,s++,void 0!==o&&s>=o)break}async createAnnotationQueue(e){const{name:t,description:r,queueId:n,rubricInstructions:o}=e,i={name:t,description:r,id:n||v4(),rubric_instructions:o},s=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(Object.entries(i).filter(([e,t])=>void 0!==t))),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(s,"create annotation queue");return await s.json()}async readAnnotationQueue(e){const t=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(t,"read annotation queue");return await t.json()}async updateAnnotationQueue(e,t){const{name:r,description:n,rubricInstructions:o}=t,i=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}`,{method:"PATCH",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify({name:r,description:n,rubric_instructions:o}),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(i,"update annotation queue")}async deleteAnnotationQueue(e){const t=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(t,"delete annotation queue")}async addRunsToAnnotationQueue(e,t){const r=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}/runs`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(t.map((e,t)=>assertUuid(e,`runIds[${t}]`).toString())),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,"add runs to annotation queue")}async getRunFromAnnotationQueue(e,t){const r=`/annotation-queues/${assertUuid(e,"queueId")}/run`,n=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}${r}/${t}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(n,"get run from annotation queue"),await n.json()}async deleteRunFromAnnotationQueue(e,t){const r=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}/runs/${assertUuid(t,"queueRunId")}`,{method:"DELETE",headers:{...this.headers,Accept:"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(r,"delete run from annotation queue")}async getSizeFromAnnotationQueue(e){const t=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/annotation-queues/${assertUuid(e,"queueId")}/size`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(t,"get size from annotation queue"),await t.json()}async _currentTenantIsOwner(e){const t=await this._getSettings();return"-"==e||t.tenant_handle===e}async _ownerConflictError(e,t){const r=await this._getSettings();return new Error(`Cannot ${e} for another tenant.\n\n      Current tenant: ${r.tenant_handle}\n\n      Requested tenant: ${t}`)}async _getLatestCommitHash(e){const t=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/commits/${e}/?limit=1&offset=0`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions}),r=await t.json();if(!t.ok){const e="string"==typeof r.detail?r.detail:JSON.stringify(r.detail),n=new Error(`Error ${t.status}: ${t.statusText}\n${e}`);throw n.statusCode=t.status,n}if(0!==r.commits.length)return r.commits[0].commit_hash}async _likeOrUnlikePrompt(e,t){const[r,n,o]=parsePromptIdentifier(e),i=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/likes/${r}/${n}`,{method:"POST",body:JSON.stringify({like:t}),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(i,(t?"like":"unlike")+" prompt"),await i.json()}async _getPromptUrl(e){const[t,r,n]=parsePromptIdentifier(e);if(await this._currentTenantIsOwner(t)){const e=await this._getSettings();return"latest"!==n?`${this.getHostUrl()}/prompts/${r}/${n.substring(0,8)}?organizationId=${e.id}`:`${this.getHostUrl()}/prompts/${r}?organizationId=${e.id}`}return"latest"!==n?`${this.getHostUrl()}/hub/${t}/${r}/${n.substring(0,8)}`:`${this.getHostUrl()}/hub/${t}/${r}`}async promptExists(e){return!!(await this.getPrompt(e))}async likePrompt(e){return this._likeOrUnlikePrompt(e,!0)}async unlikePrompt(e){return this._likeOrUnlikePrompt(e,!1)}async*listCommits(e){for await(const t of this._getPaginated(`/commits/${e}/`,new URLSearchParams,e=>e.commits))yield*t}async*listPrompts(e){const t=new URLSearchParams;t.append("sort_field",e?.sortField??"updated_at"),t.append("sort_direction","desc"),t.append("is_archived",(!!e?.isArchived).toString()),void 0!==e?.isPublic&&t.append("is_public",e.isPublic.toString()),e?.query&&t.append("query",e.query);for await(const r of this._getPaginated("/repos",t,e=>e.repos))yield*r}async getPrompt(e){const[t,r,n]=parsePromptIdentifier(e),o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/repos/${t}/${r}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});if(404===o.status)return null;await raiseForStatus(o,"get prompt");const i=await o.json();return i.repo?i.repo:null}async createPrompt(e,t){const r=await this._getSettings();if(t?.isPublic&&!r.tenant_handle)throw new Error("Cannot create a public prompt without first\n\n        creating a LangChain Hub handle. \n        You can add a handle by creating a public prompt at:\n\n        https://smith.langchain.com/prompts");const[n,o,i]=parsePromptIdentifier(e);if(!(await this._currentTenantIsOwner(n)))throw await this._ownerConflictError("create a prompt",n);const s={repo_handle:o,...t?.description&&{description:t.description},...t?.readme&&{readme:t.readme},...t?.tags&&{tags:t.tags},is_public:!!t?.isPublic},a=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/repos/`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(s),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(a,"create prompt");const{repo:c}=await a.json();return c}async createCommit(e,t,r){if(!(await this.promptExists(e)))throw new Error("Prompt does not exist, you must create it first.");const[n,o,i]=parsePromptIdentifier(e),s="latest"!==r?.parentCommitHash&&r?.parentCommitHash?r?.parentCommitHash:await this._getLatestCommitHash(`${n}/${o}`),a={manifest:JSON.parse(JSON.stringify(t)),parent_commit:s},c=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/commits/${n}/${o}`,{method:"POST",headers:{...this.headers,"Content-Type":"application/json"},body:JSON.stringify(a),signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(c,"create commit");const u=await c.json();return this._getPromptUrl(`${n}/${o}${u.commit_hash?`:${u.commit_hash}`:""}`)}async updateExamplesMultipart(e,t=[]){return this._updateExamplesMultipart(e,t)}async _updateExamplesMultipart(e,t=[]){if(!(await this._getMultiPartSupport()))throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const i of t){const e=i.id,t=serialize({...i.metadata&&{metadata:i.metadata},...i.split&&{split:i.split}},`Serializing body for example with id: ${e}`),n=new Blob([t],{type:"application/json"});if(r.append(e,n),i.inputs){const t=serialize(i.inputs,`Serializing inputs for example with id: ${e}`),n=new Blob([t],{type:"application/json"});r.append(`${e}.inputs`,n)}if(i.outputs){const t=serialize(i.outputs,`Serializing outputs whle updating example with id: ${e}`),n=new Blob([t],{type:"application/json"});r.append(`${e}.outputs`,n)}if(i.attachments)for(const[o,s]of Object.entries(i.attachments)){let t,n;Array.isArray(s)?[t,n]=s:(t=s.mimeType,n=s.data);const i=new Blob([n],{type:`${t}; length=${n.byteLength}`});r.append(`${e}.attachment.${o}`,i)}if(i.attachments_operations){const t=serialize(i.attachments_operations,`Serializing attachments while updating example with id: ${e}`),n=new Blob([t],{type:"application/json"});r.append(`${e}.attachments_operations`,n)}}const n=e??t[0]?.dataset_id,o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/v1/platform/datasets/${n}/examples`,{method:"PATCH",headers:this.headers,body:r});return await o.json()}async uploadExamplesMultipart(e,t=[]){return this._uploadExamplesMultipart(e,t)}async _uploadExamplesMultipart(e,t=[]){if(!(await this._getMultiPartSupport()))throw new Error("Your LangSmith deployment does not allow using the multipart examples endpoint, please upgrade your deployment to the latest version.");const r=new FormData;for(const o of t){const e=(o.id??v4()).toString(),t=serialize({created_at:o.created_at,...o.metadata&&{metadata:o.metadata},...o.split&&{split:o.split},...o.source_run_id&&{source_run_id:o.source_run_id},...o.use_source_run_io&&{use_source_run_io:o.use_source_run_io},...o.use_source_run_attachments&&{use_source_run_attachments:o.use_source_run_attachments}},`Serializing body for uploaded example with id: ${e}`),n=new Blob([t],{type:"application/json"});if(r.append(e,n),o.inputs){const t=serialize(o.inputs,`Serializing inputs for uploaded example with id: ${e}`),n=new Blob([t],{type:"application/json"});r.append(`${e}.inputs`,n)}if(o.outputs){const t=serialize(o.outputs,`Serializing outputs for uploaded example with id: ${e}`),n=new Blob([t],{type:"application/json"});r.append(`${e}.outputs`,n)}if(o.attachments)for(const[i,s]of Object.entries(o.attachments)){let t,n;Array.isArray(s)?[t,n]=s:(t=s.mimeType,n=s.data);const o=new Blob([n],{type:`${t}; length=${n.byteLength}`});r.append(`${e}.attachment.${i}`,o)}}const n=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/v1/platform/datasets/${e}/examples`,{method:"POST",headers:this.headers,body:r});await raiseForStatus(n,"upload examples");return await n.json()}async updatePrompt(e,t){if(!(await this.promptExists(e)))throw new Error("Prompt does not exist, you must create it first.");const[r,n]=parsePromptIdentifier(e);if(!(await this._currentTenantIsOwner(r)))throw await this._ownerConflictError("update a prompt",r);const o={};if(void 0!==t?.description&&(o.description=t.description),void 0!==t?.readme&&(o.readme=t.readme),void 0!==t?.tags&&(o.tags=t.tags),void 0!==t?.isPublic&&(o.is_public=t.isPublic),void 0!==t?.isArchived&&(o.is_archived=t.isArchived),0===Object.keys(o).length)throw new Error("No valid update options provided");const i=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/repos/${r}/${n}`,{method:"PATCH",body:JSON.stringify(o),headers:{...this.headers,"Content-Type":"application/json"},signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await raiseForStatus(i,"update prompt"),i.json()}async deletePrompt(e){if(!(await this.promptExists(e)))throw new Error("Prompt does not exist, you must create it first.");const[t,r,n]=parsePromptIdentifier(e);if(!(await this._currentTenantIsOwner(t)))throw await this._ownerConflictError("delete a prompt",t);const o=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/repos/${t}/${r}`,{method:"DELETE",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});return await o.json()}async pullPromptCommit(e,t){const[r,n,o]=parsePromptIdentifier(e),i=await this.caller.call(_getFetchImplementation(this.debug),`${this.apiUrl}/commits/${r}/${n}/${o}${t?.includeModel?"?include_model=true":""}`,{method:"GET",headers:this.headers,signal:AbortSignal.timeout(this.timeout_ms),...this.fetchOptions});await raiseForStatus(i,"pull prompt commit");const s=await i.json();return{owner:r,repo:n,commit_hash:s.commit_hash,manifest:s.manifest,examples:s.examples}}async _pullPrompt(e,t){const r=await this.pullPromptCommit(e,{includeModel:t?.includeModel});return JSON.stringify(r.manifest)}async pushPrompt(e,t){if(await this.promptExists(e)?t&&Object.keys(t).some(e=>"object"!==e)&&await this.updatePrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}):await this.createPrompt(e,{description:t?.description,readme:t?.readme,tags:t?.tags,isPublic:t?.isPublic}),!t?.object)return await this._getPromptUrl(e);return await this.createCommit(e,t?.object,{parentCommitHash:t?.parentCommitHash})}async clonePublicDataset(e,t={}){const{sourceApiUrl:r=this.apiUrl,datasetName:n}=t,[o,i]=this.parseTokenOrUrl(e,r),s=new Client({apiUrl:o,apiKey:"placeholder"}),a=await s.readSharedDataset(i),c=n||a.name;try{if(await this.hasDataset({datasetId:c}))return void console.log(`Dataset ${c} already exists in your tenant. Skipping.`)}catch(d){}const u=await s.listSharedExamples(i),l=await this.createDataset(c,{description:a.description,dataType:a.data_type||"kv",inputsSchema:a.inputs_schema_definition??void 0,outputsSchema:a.outputs_schema_definition??void 0});try{await this.createExamples({inputs:u.map(e=>e.inputs),outputs:u.flatMap(e=>e.outputs?[e.outputs]:[]),datasetId:l.id})}catch(h){throw console.error(`An error occurred while creating dataset ${c}. You should delete it manually.`),h}}parseTokenOrUrl(e,t,r=2,n="dataset"){try{return assertUuid(e),[t,e]}catch(o){}try{const o=new URL(e).pathname.split("/").filter(e=>""!==e);if(o.length>=r){return[t,o[o.length-r]]}throw new Error(`Invalid public ${n} URL: ${e}`)}catch(i){throw new Error(`Invalid public ${n} URL or token: ${e}`)}}async awaitPendingTraceBatches(){if(this.manualFlushMode)return console.warn("[WARNING]: When tracing in manual flush mode, you must call `await client.flush()` manually to submit trace batches."),Promise.resolve();await Promise.all([...this.autoBatchQueue.items.map(({itemPromise:e})=>e),this.batchIngestCaller.queue.onIdle()]),void 0!==this.langSmithToOTELTranslator&&await(getDefaultOTLPTracerComponents()?.DEFAULT_LANGSMITH_SPAN_PROCESSOR?.forceFlush())}}function isExampleCreate(e){return"dataset_id"in e||"dataset_name"in e}const isTracingEnabled$1=e=>!!["TRACING_V2","TRACING"].find(e=>"true"===getLangSmithEnvironmentVariable(e)),_LC_CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables");function stripNonAlphanumeric$1(e){return e.replace(/[-:.]/g,"")}function convertToDottedOrderFormat$1(e,t,r=1){const n=r.toFixed(0).slice(0,3).padStart(3,"0");return stripNonAlphanumeric$1(`${new Date(e).toISOString().slice(0,-1)}${n}Z`)+t}class Baggage{constructor(e,t,r,n){Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.metadata=e,this.tags=t,this.project_name=r,this.replicas=n}static fromHeader(e){const t=e.split(",");let r,n,o={},i=[];for(const s of t){const[e,t]=s.split("="),a=decodeURIComponent(t);"langsmith-metadata"===e?o=JSON.parse(a):"langsmith-tags"===e?i=a.split(","):"langsmith-project"===e?r=a:"langsmith-replicas"===e&&(n=JSON.parse(a))}return new Baggage(o,i,r,n)}toHeader(){const e=[];return this.metadata&&Object.keys(this.metadata).length>0&&e.push(`langsmith-metadata=${encodeURIComponent(JSON.stringify(this.metadata))}`),this.tags&&this.tags.length>0&&e.push(`langsmith-tags=${encodeURIComponent(this.tags.join(","))}`),this.project_name&&e.push(`langsmith-project=${encodeURIComponent(this.project_name)}`),e.join(",")}}class RunTree{constructor(e){if(Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"run_type",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"project_name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"parent_run",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_runs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"start_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"end_time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"extra",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"error",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"serialized",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reference_example_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"trace_id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dotted_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tracingEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"child_execution_order",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"attachments",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),isRunTree(e))return void Object.assign(this,{...e});const t=RunTree.getDefaultConfig(),{metadata:r,...n}=e,o=n.client??RunTree.getSharedClient(),i={...r,...n?.extra?.metadata};if(n.extra={...n.extra,metadata:i},Object.assign(this,{...t,...n,client:o}),this.trace_id||(this.parent_run?this.trace_id=this.parent_run.trace_id??this.id:this.trace_id=this.id),this.execution_order??(this.execution_order=1),this.child_execution_order??(this.child_execution_order=1),!this.dotted_order){const e=convertToDottedOrderFormat$1(this.start_time,this.id,this.execution_order);this.parent_run?this.dotted_order=this.parent_run.dotted_order+"."+e:this.dotted_order=e}}set metadata(e){this.extra={...this.extra,metadata:{...this.extra?.metadata,...e}}}get metadata(){return this.extra?.metadata}static getDefaultConfig(){return{id:v4(),run_type:"chain",project_name:getDefaultProjectName(),child_runs:[],api_url:getEnvironmentVariable$1("LANGCHAIN_ENDPOINT")??"http://localhost:1984",api_key:getEnvironmentVariable$1("LANGCHAIN_API_KEY"),caller_options:{},start_time:Date.now(),serialized:{},inputs:{},extra:{}}}static getSharedClient(){return RunTree.sharedClient||(RunTree.sharedClient=new Client),RunTree.sharedClient}createChild(e){const t=this.child_execution_order+1,r=new RunTree({...e,parent_run:this,project_name:this.project_name,replicas:this.replicas,client:this.client,tracingEnabled:this.tracingEnabled,execution_order:t,child_execution_order:t});_LC_CONTEXT_VARIABLES_KEY in this&&(r[_LC_CONTEXT_VARIABLES_KEY]=this[_LC_CONTEXT_VARIABLES_KEY]);const n=Symbol.for("lc:child_config"),o=e.extra?.[n]??this.extra[n];if(isRunnableConfigLike(o)){const e={...o},t=isCallbackManagerLike(e.callbacks)?e.callbacks.copy?.():void 0;t&&(Object.assign(t,{_parentRunId:r.id}),t.handlers?.find(isLangChainTracerLike)?.updateFromRunTree?.(r),e.callbacks=t),r.extra[n]=e}const i=new Set;let s=this;for(;null!=s&&!i.has(s.id);)i.add(s.id),s.child_execution_order=Math.max(s.child_execution_order,t),s=s.parent_run;return this.child_runs.push(r),r}async end(e,t,r=Date.now(),n){this.outputs=this.outputs??e,this.error=this.error??t,this.end_time=this.end_time??r,n&&Object.keys(n).length>0&&(this.extra=this.extra?{...this.extra,metadata:{...this.extra.metadata,...n}}:{metadata:n})}_convertToCreate(e,t,r=!0){const n=e.extra??{};if(void 0===n?.runtime?.library&&(n.runtime||(n.runtime={}),t))for(const[s,a]of Object.entries(t))n.runtime[s]||(n.runtime[s]=a);let o,i;return r?(i=e.parent_run?.id,o=[]):(o=e.child_runs.map(e=>this._convertToCreate(e,t,r)),i=void 0),{id:e.id,name:e.name,start_time:e.start_time,end_time:e.end_time,run_type:e.run_type,reference_example_id:e.reference_example_id,extra:n,serialized:e.serialized,error:e.error,inputs:e.inputs,outputs:e.outputs,session_name:e.project_name,child_runs:o,parent_run_id:i,trace_id:e.trace_id,dotted_order:e.dotted_order,tags:e.tags,attachments:e.attachments,events:e.events}}_remapForProject(e,t,r=!0){const n=this._convertToCreate(this,t,r);if(e===this.project_name)return n;const o=t=>v5(`${t}:${e}`,v5.DNS),i=o(n.id),s=n.trace_id?o(n.trace_id):void 0,a=n.parent_run_id?o(n.parent_run_id):void 0;let c;if(n.dotted_order){const e=_parseDottedOrder(n.dotted_order),t=[];for(let n=0;n<e.length-1;n++){const[r,i]=e[n],s=o(i);t.push(r.toISOString().replace(/[-:]/g,"").replace(".","")+s)}const[r]=e[e.length-1];t.push(r.toISOString().replace(/[-:]/g,"").replace(".","")+i),c=t.join(".")}else c=void 0;return{...n,id:i,trace_id:s,parent_run_id:a,dotted_order:c,session_name:e}}async postRun(e=!0){try{const t=getRuntimeEnvironment();if(this.replicas&&this.replicas.length>0)for(const[e]of this.replicas){const r=this._remapForProject(e,t,!0);await this.client.createRun(r)}else{const r=this._convertToCreate(this,t,e);await this.client.createRun(r)}if(!e){warnOnce("Posting with excludeChildRuns=false is deprecated and will be removed in a future version.");for(const e of this.child_runs)await e.postRun(!1)}}catch(t){console.error(`Error in postRun for run ${this.id}:`,t)}}async patchRun(){if(this.replicas&&this.replicas.length>0)for(const[t,r]of this.replicas){const e=this._remapForProject(t);await this.client.updateRun(e.id,{inputs:e.inputs,outputs:e.outputs,error:e.error,parent_run_id:e.parent_run_id,session_name:e.session_name,reference_example_id:e.reference_example_id,end_time:e.end_time,dotted_order:e.dotted_order,trace_id:e.trace_id,events:e.events,tags:e.tags,extra:e.extra,attachments:this.attachments,...r})}else try{const e={end_time:this.end_time,error:this.error,inputs:this.inputs,outputs:this.outputs,parent_run_id:this.parent_run?.id,reference_example_id:this.reference_example_id,extra:this.extra,events:this.events,dotted_order:this.dotted_order,trace_id:this.trace_id,tags:this.tags,attachments:this.attachments,session_name:this.project_name};await this.client.updateRun(this.id,e)}catch(e){console.error(`Error in patchRun for run ${this.id}`,e)}}toJSON(){return this._convertToCreate(this,void 0,!1)}addEvent(e){this.events||(this.events=[]),"string"==typeof e?this.events.push({name:"event",time:(new Date).toISOString(),message:e}):this.events.push({...e,time:e.time??(new Date).toISOString()})}static fromRunnableConfig(e,t){const r=e?.callbacks;let n,o,i,s=isTracingEnabled$1();if(r){const e=r?.getParentRunId?.()??"",t=r?.handlers?.find(e=>"langchain_tracer"==e?.name);n=t?.getRun?.(e),o=t?.projectName,i=t?.client,s=s||!!t}if(!n)return new RunTree({...t,client:i,tracingEnabled:s,project_name:o});return new RunTree({name:n.name,id:n.id,trace_id:n.trace_id,dotted_order:n.dotted_order,client:i,tracingEnabled:s,project_name:o,tags:[...new Set((n?.tags??[]).concat(e?.tags??[]))],extra:{metadata:{...n?.extra?.metadata,...e?.metadata}}}).createChild(t)}static fromDottedOrder(e){return this.fromHeaders({"langsmith-trace":e})}static fromHeaders(e,t){const r="get"in e&&"function"==typeof e.get?{"langsmith-trace":e.get("langsmith-trace"),baggage:e.get("baggage")}:e,n=r["langsmith-trace"];if(!n||"string"!=typeof n)return;const o=n.trim(),i=o.split(".").map(e=>{const[t,r]=e.split("Z");return{strTime:t,time:Date.parse(t+"Z"),uuid:r}}),s=i[0].uuid,a={...t,name:t?.name??"parent",run_type:t?.run_type??"chain",start_time:t?.start_time??Date.now(),id:i.at(-1)?.uuid,trace_id:s,dotted_order:o};if(r.baggage&&"string"==typeof r.baggage){const e=Baggage.fromHeader(r.baggage);a.metadata=e.metadata,a.tags=e.tags,a.project_name=e.project_name,a.replicas=e.replicas}return new RunTree(a)}toHeaders(e){const t={"langsmith-trace":this.dotted_order,baggage:new Baggage(this.extra?.metadata,this.tags,this.project_name,this.replicas).toHeader()};if(e)for(const[r,n]of Object.entries(t))e.set(r,n);return t}}function isRunTree(e){return void 0!==e&&"function"==typeof e.createChild&&"function"==typeof e.postRun}function isLangChainTracerLike(e){return"object"==typeof e&&null!=e&&"string"==typeof e.name&&"langchain_tracer"===e.name}function containsLangChainTracerLike(e){return Array.isArray(e)&&e.some(e=>isLangChainTracerLike(e))}function isCallbackManagerLike(e){return"object"==typeof e&&null!=e&&Array.isArray(e.handlers)}function isRunnableConfigLike(e){return void 0!==e&&"object"==typeof e.callbacks&&(containsLangChainTracerLike(e.callbacks?.handlers)||containsLangChainTracerLike(e.callbacks))}function _parseDottedOrder(e){return e.split(".").map(e=>{const t=e.slice(0,-36),r=e.slice(-36),n=parseInt(t.slice(0,4)),o=parseInt(t.slice(4,6))-1,i=parseInt(t.slice(6,8)),s=parseInt(t.slice(9,11)),a=parseInt(t.slice(11,13)),c=parseInt(t.slice(13,15)),u=parseInt(t.slice(15,21));return[new Date(n,o,i,s,a,c,u/1e3),r]})}Object.defineProperty(RunTree,"sharedClient",{enumerable:!0,configurable:!0,writable:!0,value:null});let MockAsyncLocalStorage$1=class{getStore(){}run(e,t){return t()}};const TRACING_ALS_KEY$1=Symbol.for("ls:tracing_async_local_storage"),mockAsyncLocalStorage$1=new MockAsyncLocalStorage$1;let AsyncLocalStorageProvider$1=class{getInstance(){return globalThis[TRACING_ALS_KEY$1]??mockAsyncLocalStorage$1}initializeGlobalInstance(e){void 0===globalThis[TRACING_ALS_KEY$1]&&(globalThis[TRACING_ALS_KEY$1]=e)}};const AsyncLocalStorageProviderSingleton$1=new AsyncLocalStorageProvider$1;function getCurrentRunTree(e=!1){const t=AsyncLocalStorageProviderSingleton$1.getInstance().getStore();if(!e&&!isRunTree(t))throw new Error("Could not get the current run tree.\n\nPlease make sure you are calling this method within a traceable function and that tracing is enabled.");return t}function isTraceableFunction(e){return"function"==typeof e&&"langsmith:traceable"in e}
/*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2017-2022 Joachim Wester
   * MIT licensed
   */const _hasOwnProperty=Object.prototype.hasOwnProperty;function hasOwnProperty(e,t){return _hasOwnProperty.call(e,t)}function _objectKeys(e){if(Array.isArray(e)){const t=new Array(e.length);for(let e=0;e<t.length;e++)t[e]=""+e;return t}if(Object.keys)return Object.keys(e);let t=[];for(let r in e)hasOwnProperty(e,r)&&t.push(r);return t}function _deepClone(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function isInteger(e){let t=0;const r=e.length;let n;for(;t<r;){if(n=e.charCodeAt(t),!(n>=48&&n<=57))return!1;t++}return!0}function escapePathComponent(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function unescapePathComponent(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function hasUndefined(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(hasUndefined(e[r]))return!0}else if("object"==typeof e){const r=_objectKeys(e),n=r.length;for(var t=0;t<n;t++)if(hasUndefined(e[r[t]]))return!0}return!1}function patchErrorMessageFormatter(e,t){const r=[e];for(const n in t){const e="object"==typeof t[n]?JSON.stringify(t[n],null,2):t[n];void 0!==e&&r.push(`${n}: ${e}`)}return r.join("\n")}class PatchError extends Error{constructor(e,t,r,n,o){super(patchErrorMessageFormatter(e,{name:t,index:r,operation:n,tree:o})),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"index",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"operation",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"tree",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.setPrototypeOf(this,new.target.prototype),this.message=patchErrorMessageFormatter(e,{name:t,index:r,operation:n,tree:o})}}const JsonPatchError=PatchError,objOps={add:function(e,t,r){return e[t]=this.value,{newDocument:r}},remove:function(e,t,r){var n=e[t];return delete e[t],{newDocument:r,removed:n}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:function(e,t,r){let n=getValueByPointer(r,this.path);n&&(n=_deepClone(n));const o=applyOperation(r,{op:"remove",path:this.from}).removed;return applyOperation(r,{op:"add",path:this.path,value:o}),{newDocument:r,removed:n}},copy:function(e,t,r){const n=getValueByPointer(r,this.from);return applyOperation(r,{op:"add",path:this.path,value:_deepClone(n)}),{newDocument:r}},test:function(e,t,r){return{newDocument:r,test:_areEquals(e[t],this.value)}},_get:function(e,t,r){return this.value=e[t],{newDocument:r}}};var arrOps={add:function(e,t,r){return isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:r,index:t}},remove:function(e,t,r){return{newDocument:r,removed:e.splice(t,1)[0]}},replace:function(e,t,r){var n=e[t];return e[t]=this.value,{newDocument:r,removed:n}},move:objOps.move,copy:objOps.copy,test:objOps.test,_get:objOps._get};function getValueByPointer(e,t){if(""==t)return e;var r={op:"_get",path:t};return applyOperation(e,r),r.value}function applyOperation(e,t,r=!1,n=!0,o=!0,i=0){if(r&&("function"==typeof r?r(t,0,e,t.path):validator(t,0)),""===t.path){let n={newDocument:e};if("add"===t.op)return n.newDocument=t.value,n;if("replace"===t.op)return n.newDocument=t.value,n.removed=e,n;if("move"===t.op||"copy"===t.op)return n.newDocument=getValueByPointer(e,t.from),"move"===t.op&&(n.removed=e),n;if("test"===t.op){if(n.test=_areEquals(e,t.value),!1===n.test)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return n.newDocument=e,n}if("remove"===t.op)return n.removed=e,n.newDocument=null,n;if("_get"===t.op)return t.value=e,n;if(r)throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,t,e);return n}{n||(e=_deepClone(e));const s=(t.path||"").split("/");let a,c,u,l=e,d=1,h=s.length;for(u="function"==typeof r?r:validator;;){if(c=s[d],c&&-1!=c.indexOf("~")&&(c=unescapePathComponent(c)),o&&("__proto__"==c||"prototype"==c&&d>0&&"constructor"==s[d-1]))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(r&&void 0===a&&(void 0===l[c]?a=s.slice(0,d).join("/"):d==h-1&&(a=t.path),void 0!==a&&u(t,0,e,a)),d++,Array.isArray(l)){if("-"===c)c=l.length;else{if(r&&!isInteger(c))throw new JsonPatchError("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,t,e);isInteger(c)&&(c=~~c)}if(d>=h){if(r&&"add"===t.op&&c>l.length)throw new JsonPatchError("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,t,e);const n=arrOps[t.op].call(t,l,c,e);if(!1===n.test)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return n}}else if(d>=h){const r=objOps[t.op].call(t,l,c,e);if(!1===r.test)throw new JsonPatchError("Test operation failed","TEST_OPERATION_FAILED",i,t,e);return r}if(l=l[c],r&&d<h&&(!l||"object"!=typeof l))throw new JsonPatchError("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,t,e)}}}function applyPatch(e,t,r,n=!0,o=!0){if(r&&!Array.isArray(t))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");n||(e=_deepClone(e));const i=new Array(t.length);for(let s=0,a=t.length;s<a;s++)i[s]=applyOperation(e,t[s],r,!0,o,s),e=i[s].newDocument;return i.newDocument=e,i}function validator(e,t,r,n){if("object"!=typeof e||null===e||Array.isArray(e))throw new JsonPatchError("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,r);if(!objOps[e.op])throw new JsonPatchError("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,r);if("string"!=typeof e.path)throw new JsonPatchError("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,r);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new JsonPatchError('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,r);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new JsonPatchError("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,r);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&hasUndefined(e.value))throw new JsonPatchError("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,r);if(r)if("add"==e.op){var o=e.path.split("/").length,i=n.split("/").length;if(o!==i+1&&o!==i)throw new JsonPatchError("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,r)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==n)throw new JsonPatchError("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,r)}else if("move"===e.op||"copy"===e.op){var s=validate$1([{op:"_get",path:e.from,value:void 0}],r);if(s&&"OPERATION_PATH_UNRESOLVABLE"===s.name)throw new JsonPatchError("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,r)}}function validate$1(e,t,r){try{if(!Array.isArray(e))throw new JsonPatchError("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)applyPatch(_deepClone(t),_deepClone(e),r||!0);else{r=r||validator;for(var n=0;n<e.length;n++)r(e[n],n,t,void 0)}}catch(o){if(o instanceof JsonPatchError)return o;throw o}}function _areEquals(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var r,n,o,i=Array.isArray(e),s=Array.isArray(t);if(i&&s){if((n=e.length)!=t.length)return!1;for(r=n;0!==r--;)if(!_areEquals(e[r],t[r]))return!1;return!0}if(i!=s)return!1;var a=Object.keys(e);if((n=a.length)!==Object.keys(t).length)return!1;for(r=n;0!==r--;)if(!t.hasOwnProperty(a[r]))return!1;for(r=n;0!==r--;)if(!_areEquals(e[o=a[r]],t[o]))return!1;return!0}return e!=e&&t!=t}
/*!
   * https://github.com/Starcounter-Jack/JSON-Patch
   * (c) 2013-2021 Joachim Wester
   * MIT license
   */function _generate(e,t,r,n,o){if(t!==e){"function"==typeof t.toJSON&&(t=t.toJSON());for(var i=_objectKeys(t),s=_objectKeys(e),a=!1,c=s.length-1;c>=0;c--){var u=e[d=s[c]];if(!hasOwnProperty(t,d)||void 0===t[d]&&void 0!==u&&!1===Array.isArray(t))Array.isArray(e)===Array.isArray(t)?(o&&r.push({op:"test",path:n+"/"+escapePathComponent(d),value:_deepClone(u)}),r.push({op:"remove",path:n+"/"+escapePathComponent(d)}),a=!0):(o&&r.push({op:"test",path:n,value:e}),r.push({op:"replace",path:n,value:t}));else{var l=t[d];"object"==typeof u&&null!=u&&"object"==typeof l&&null!=l&&Array.isArray(u)===Array.isArray(l)?_generate(u,l,r,n+"/"+escapePathComponent(d),o):u!==l&&(o&&r.push({op:"test",path:n+"/"+escapePathComponent(d),value:_deepClone(u)}),r.push({op:"replace",path:n+"/"+escapePathComponent(d),value:_deepClone(l)}))}}if(a||i.length!=s.length)for(c=0;c<i.length;c++){var d;hasOwnProperty(e,d=i[c])||void 0===t[d]||r.push({op:"add",path:n+"/"+escapePathComponent(d),value:_deepClone(t[d])})}}}function compare(e,t,r=!1){var n=[];return _generate(e,t,n,"",r),n}const isBrowser=()=>"undefined"!=typeof window&&void 0!==window.document,isWebWorker=()=>"object"==typeof globalThis&&globalThis.constructor&&"DedicatedWorkerGlobalScope"===globalThis.constructor.name,isJsDom=()=>"undefined"!=typeof window&&"nodejs"===window.name||"undefined"!=typeof navigator&&navigator.userAgent.includes("jsdom"),isDeno=()=>"undefined"!=typeof Deno,isNode=()=>void 0!==process$1&&void 0!==process$1.versions&&void 0!==process$1.versions.node&&!isDeno(),getEnv=()=>{let e;return e=isBrowser()?"browser":isNode()?"node":isWebWorker()?"webworker":isJsDom()?"jsdom":isDeno()?"deno":"other",e};let runtimeEnvironment;function getRuntimeEnvironmentSync(){if(void 0===runtimeEnvironment){const e=getEnv();runtimeEnvironment={library:"langchain-js",runtime:e}}return runtimeEnvironment}function getEnvironmentVariable(e){try{return void 0!==process$1?process$1.env?.[e]:isDeno()?Deno?.env.get(e):void 0}catch(t){return}}class BaseCallbackHandlerMethodsClass{}function callbackHandlerPrefersStreaming(e){return"lc_prefer_streaming"in e&&e.lc_prefer_streaming}class BaseCallbackHandler extends BaseCallbackHandlerMethodsClass{get lc_namespace(){return["langchain_core","callbacks",this.name]}get lc_secrets(){}get lc_attributes(){}get lc_aliases(){}get lc_serializable_keys(){}static lc_name(){return this.name}get lc_id(){return[...this.lc_namespace,get_lc_unique_name(this.constructor)]}constructor(e){super(),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreLLM",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreChain",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreAgent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreRetriever",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreCustomEvent",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"raiseError",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"awaitHandlers",{enumerable:!0,configurable:!0,writable:!0,value:"false"===getEnvironmentVariable("LANGCHAIN_CALLBACKS_BACKGROUND")}),this.lc_kwargs=e||{},e&&(this.ignoreLLM=e.ignoreLLM??this.ignoreLLM,this.ignoreChain=e.ignoreChain??this.ignoreChain,this.ignoreAgent=e.ignoreAgent??this.ignoreAgent,this.ignoreRetriever=e.ignoreRetriever??this.ignoreRetriever,this.ignoreCustomEvent=e.ignoreCustomEvent??this.ignoreCustomEvent,this.raiseError=e.raiseError??this.raiseError,this.awaitHandlers=this.raiseError||(e._awaitHandler??this.awaitHandlers))}copy(){return new this.constructor(this)}toJSON(){return Serializable.prototype.toJSON.call(this)}toJSONNotImplemented(){return Serializable.prototype.toJSONNotImplemented.call(this)}static fromMethods(e){return new class extends BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:v4()}),Object.assign(this,e)}}}}const isBaseCallbackHandler=e=>{const t=e;return void 0!==t&&"function"==typeof t.copy&&"string"==typeof t.name&&"boolean"==typeof t.awaitHandlers},convertRunTreeToRun=e=>{if(e)return e.events=e.events??[],e.child_runs=e.child_runs??[],e};function convertRunToRunTree(e,t){if(e)return new RunTree({...e,parent_run:convertRunToRunTree(t),child_runs:e.child_runs.map(e=>convertRunToRunTree(e)).filter(e=>void 0!==e),extra:{...e.extra,runtime:getRuntimeEnvironmentSync()},tracingEnabled:!1})}function _coerceToDict$1(e,t){return e&&!Array.isArray(e)&&"object"==typeof e?e:{[t]:e}}function stripNonAlphanumeric(e){return e.replace(/[-:.]/g,"")}function convertToDottedOrderFormat(e,t,r){const n=r.toFixed(0).slice(0,3).padStart(3,"0");return stripNonAlphanumeric(`${new Date(e).toISOString().slice(0,-1)}${n}Z`)+t}function isBaseTracer(e){return"function"==typeof e._addRunToRunMap}class BaseTracer extends BaseCallbackHandler{constructor(e){super(...arguments),Object.defineProperty(this,"runMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"runTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!1})}copy(){return this}getRunById(e){if(void 0!==e)return this.usesRunTreeMap?convertRunTreeToRun(this.runTreeMap.get(e)):this.runMap.get(e)}stringifyError(e){return e instanceof Error?e.message+(e?.stack?`\n\n${e.stack}`:""):"string"==typeof e?e:`${e}`}_addChildRun(e,t){e.child_runs.push(t)}_addRunToRunMap(e){const t=convertToDottedOrderFormat(e.start_time,e.id,e.execution_order),r={...e},n=this.getRunById(r.parent_run_id);if(void 0!==r.parent_run_id?n&&(this._addChildRun(n,r),n.child_execution_order=Math.max(n.child_execution_order,r.child_execution_order),r.trace_id=n.trace_id,void 0!==n.dotted_order&&(r.dotted_order=[n.dotted_order,t].join("."))):(r.trace_id=r.id,r.dotted_order=t),this.usesRunTreeMap){const e=convertRunToRunTree(r,n);void 0!==e&&this.runTreeMap.set(r.id,e)}else this.runMap.set(r.id,r);return r}async _endTrace(e){const t=void 0!==e.parent_run_id&&this.getRunById(e.parent_run_id);t?t.child_execution_order=Math.max(t.child_execution_order,e.child_execution_order):await this.persistRun(e),await(this.onRunUpdate?.(e)),this.usesRunTreeMap?this.runTreeMap.delete(e.id):this.runMap.delete(e.id)}_getExecutionOrder(e){const t=void 0!==e&&this.getRunById(e);return t?t.child_execution_order+1:1}_createRunForLLMStart(e,t,r,n,o,i,s,a){const c=this._getExecutionOrder(n),u=Date.now(),l=s?{...o,metadata:s}:o,d={id:r,name:a??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{prompts:t},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:l??{},tags:i||[]};return this._addRunToRunMap(d)}async handleLLMStart(e,t,r,n,o,i,s,a){const c=this.getRunById(r)??this._createRunForLLMStart(e,t,r,n,o,i,s,a);return await(this.onRunCreate?.(c)),await(this.onLLMStart?.(c)),c}_createRunForChatModelStart(e,t,r,n,o,i,s,a){const c=this._getExecutionOrder(n),u=Date.now(),l=s?{...o,metadata:s}:o,d={id:r,name:a??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:{messages:t},execution_order:c,child_runs:[],child_execution_order:c,run_type:"llm",extra:l??{},tags:i||[]};return this._addRunToRunMap(d)}async handleChatModelStart(e,t,r,n,o,i,s,a){const c=this.getRunById(r)??this._createRunForChatModelStart(e,t,r,n,o,i,s,a);return await(this.onRunCreate?.(c)),await(this.onLLMStart?.(c)),c}async handleLLMEnd(e,t,r,n,o){const i=this.getRunById(t);if(!i||"llm"!==i?.run_type)throw new Error("No LLM run to end.");return i.end_time=Date.now(),i.outputs=e,i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),i.extra={...i.extra,...o},await(this.onLLMEnd?.(i)),await this._endTrace(i),i}async handleLLMError(e,t,r,n,o){const i=this.getRunById(t);if(!i||"llm"!==i?.run_type)throw new Error("No LLM run to end.");return i.end_time=Date.now(),i.error=this.stringifyError(e),i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),i.extra={...i.extra,...o},await(this.onLLMError?.(i)),await this._endTrace(i),i}_createRunForChainStart(e,t,r,n,o,i,s,a){const c=this._getExecutionOrder(n),u=Date.now(),l={id:r,name:a??e.id[e.id.length-1],parent_run_id:n,start_time:u,serialized:e,events:[{name:"start",time:new Date(u).toISOString()}],inputs:t,execution_order:c,child_execution_order:c,run_type:s??"chain",child_runs:[],extra:i?{metadata:i}:{},tags:o||[]};return this._addRunToRunMap(l)}async handleChainStart(e,t,r,n,o,i,s,a){const c=this.getRunById(r)??this._createRunForChainStart(e,t,r,n,o,i,s,a);return await(this.onRunCreate?.(c)),await(this.onChainStart?.(c)),c}async handleChainEnd(e,t,r,n,o){const i=this.getRunById(t);if(!i)throw new Error("No chain run to end.");return i.end_time=Date.now(),i.outputs=_coerceToDict$1(e,"output"),i.events.push({name:"end",time:new Date(i.end_time).toISOString()}),void 0!==o?.inputs&&(i.inputs=_coerceToDict$1(o.inputs,"input")),await(this.onChainEnd?.(i)),await this._endTrace(i),i}async handleChainError(e,t,r,n,o){const i=this.getRunById(t);if(!i)throw new Error("No chain run to end.");return i.end_time=Date.now(),i.error=this.stringifyError(e),i.events.push({name:"error",time:new Date(i.end_time).toISOString()}),void 0!==o?.inputs&&(i.inputs=_coerceToDict$1(o.inputs,"input")),await(this.onChainError?.(i)),await this._endTrace(i),i}_createRunForToolStart(e,t,r,n,o,i,s){const a=this._getExecutionOrder(n),c=Date.now(),u={id:r,name:s??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{input:t},execution_order:a,child_execution_order:a,run_type:"tool",child_runs:[],extra:i?{metadata:i}:{},tags:o||[]};return this._addRunToRunMap(u)}async handleToolStart(e,t,r,n,o,i,s){const a=this.getRunById(r)??this._createRunForToolStart(e,t,r,n,o,i,s);return await(this.onRunCreate?.(a)),await(this.onToolStart?.(a)),a}async handleToolEnd(e,t){const r=this.getRunById(t);if(!r||"tool"!==r?.run_type)throw new Error("No tool run to end");return r.end_time=Date.now(),r.outputs={output:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(this.onToolEnd?.(r)),await this._endTrace(r),r}async handleToolError(e,t){const r=this.getRunById(t);if(!r||"tool"!==r?.run_type)throw new Error("No tool run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(this.onToolError?.(r)),await this._endTrace(r),r}async handleAgentAction(e,t){const r=this.getRunById(t);if(!r||"chain"!==r?.run_type)return;const n=r;n.actions=n.actions||[],n.actions.push(e),n.events.push({name:"agent_action",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentAction?.(r))}async handleAgentEnd(e,t){const r=this.getRunById(t);r&&"chain"===r?.run_type&&(r.events.push({name:"agent_end",time:(new Date).toISOString(),kwargs:{action:e}}),await(this.onAgentEnd?.(r)))}_createRunForRetrieverStart(e,t,r,n,o,i,s){const a=this._getExecutionOrder(n),c=Date.now(),u={id:r,name:s??e.id[e.id.length-1],parent_run_id:n,start_time:c,serialized:e,events:[{name:"start",time:new Date(c).toISOString()}],inputs:{query:t},execution_order:a,child_execution_order:a,run_type:"retriever",child_runs:[],extra:i?{metadata:i}:{},tags:o||[]};return this._addRunToRunMap(u)}async handleRetrieverStart(e,t,r,n,o,i,s){const a=this.getRunById(r)??this._createRunForRetrieverStart(e,t,r,n,o,i,s);return await(this.onRunCreate?.(a)),await(this.onRetrieverStart?.(a)),a}async handleRetrieverEnd(e,t){const r=this.getRunById(t);if(!r||"retriever"!==r?.run_type)throw new Error("No retriever run to end");return r.end_time=Date.now(),r.outputs={documents:e},r.events.push({name:"end",time:new Date(r.end_time).toISOString()}),await(this.onRetrieverEnd?.(r)),await this._endTrace(r),r}async handleRetrieverError(e,t){const r=this.getRunById(t);if(!r||"retriever"!==r?.run_type)throw new Error("No retriever run to end");return r.end_time=Date.now(),r.error=this.stringifyError(e),r.events.push({name:"error",time:new Date(r.end_time).toISOString()}),await(this.onRetrieverError?.(r)),await this._endTrace(r),r}async handleText(e,t){const r=this.getRunById(t);r&&"chain"===r?.run_type&&(r.events.push({name:"text",time:(new Date).toISOString(),kwargs:{text:e}}),await(this.onText?.(r)))}async handleLLMNewToken(e,t,r,n,o,i){const s=this.getRunById(r);if(!s||"llm"!==s?.run_type)throw new Error('Invalid "runId" provided to "handleLLMNewToken" callback.');return s.events.push({name:"new_token",time:(new Date).toISOString(),kwargs:{token:e,idx:t,chunk:i?.chunk}}),await(this.onLLMNewToken?.(s,e,{chunk:i?.chunk})),s}}var ansiStyles={exports:{}},hasRequiredAnsiStyles;function requireAnsiStyles(){return hasRequiredAnsiStyles||(hasRequiredAnsiStyles=1,function(e){const t=(e=0)=>t=>`[${38+e};5;${t}m`,r=(e=0)=>(t,r,n)=>`[${38+e};2;${t};${r};${n}m`;Object.defineProperty(e,"exports",{enumerable:!0,get:function(){const e=new Map,n={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],overline:[53,55],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};n.color.gray=n.color.blackBright,n.bgColor.bgGray=n.bgColor.bgBlackBright,n.color.grey=n.color.blackBright,n.bgColor.bgGrey=n.bgColor.bgBlackBright;for(const[t,r]of Object.entries(n)){for(const[t,o]of Object.entries(r))n[t]={open:`[${o[0]}m`,close:`[${o[1]}m`},r[t]=n[t],e.set(o[0],o[1]);Object.defineProperty(n,t,{value:r,enumerable:!1})}return Object.defineProperty(n,"codes",{value:e,enumerable:!1}),n.color.close="[39m",n.bgColor.close="[49m",n.color.ansi256=t(),n.color.ansi16m=r(),n.bgColor.ansi256=t(10),n.bgColor.ansi16m=r(10),Object.defineProperties(n,{rgbToAnsi256:{value:(e,t,r)=>e===t&&t===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(r/255*5),enumerable:!1},hexToRgb:{value:e=>{const t=/(?<colorString>[a-f\d]{6}|[a-f\d]{3})/i.exec(e.toString(16));if(!t)return[0,0,0];let{colorString:r}=t.groups;3===r.length&&(r=r.split("").map(e=>e+e).join(""));const n=Number.parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},enumerable:!1},hexToAnsi256:{value:e=>n.rgbToAnsi256(...n.hexToRgb(e)),enumerable:!1}}),n}})}(ansiStyles)),ansiStyles.exports}ansiStyles.exports;var ansiStylesExports=requireAnsiStyles();const styles=getDefaultExportFromCjs(ansiStylesExports);function wrap(e,t){return`${e.open}${t}${e.close}`}function tryJsonStringify(e,t){try{return JSON.stringify(e,null,2)}catch(r){return t}}function formatKVMapItem(e){return"string"==typeof e?e.trim():null==e?e:tryJsonStringify(e,e.toString())}function elapsed(e){if(!e.end_time)return"";const t=e.end_time-e.start_time;return t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`}const{color:color}=styles;class ConsoleCallbackHandler extends BaseTracer{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"console_callback_handler"})}persistRun(e){return Promise.resolve()}getParents(e){const t=[];let r=e;for(;r.parent_run_id;){const e=this.runMap.get(r.parent_run_id);if(!e)break;t.push(e),r=e}return t}getBreadcrumbs(e){const t=[...this.getParents(e).reverse(),e].map((e,t,r)=>{const n=`${e.execution_order}:${e.run_type}:${e.name}`;return t===r.length-1?wrap(styles.bold,n):n}).join(" > ");return wrap(color.grey,t)}onChainStart(e){const t=this.getBreadcrumbs(e);console.log(`${wrap(color.green,"[chain/start]")} [${t}] Entering Chain run with input: ${tryJsonStringify(e.inputs,"[inputs]")}`)}onChainEnd(e){const t=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[chain/end]")} [${t}] [${elapsed(e)}] Exiting Chain run with output: ${tryJsonStringify(e.outputs,"[outputs]")}`)}onChainError(e){const t=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[chain/error]")} [${t}] [${elapsed(e)}] Chain run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onLLMStart(e){const t=this.getBreadcrumbs(e),r="prompts"in e.inputs?{prompts:e.inputs.prompts.map(e=>e.trim())}:e.inputs;console.log(`${wrap(color.green,"[llm/start]")} [${t}] Entering LLM run with input: ${tryJsonStringify(r,"[inputs]")}`)}onLLMEnd(e){const t=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[llm/end]")} [${t}] [${elapsed(e)}] Exiting LLM run with output: ${tryJsonStringify(e.outputs,"[response]")}`)}onLLMError(e){const t=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[llm/error]")} [${t}] [${elapsed(e)}] LLM run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onToolStart(e){const t=this.getBreadcrumbs(e);console.log(`${wrap(color.green,"[tool/start]")} [${t}] Entering Tool run with input: "${formatKVMapItem(e.inputs.input)}"`)}onToolEnd(e){const t=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[tool/end]")} [${t}] [${elapsed(e)}] Exiting Tool run with output: "${formatKVMapItem(e.outputs?.output)}"`)}onToolError(e){const t=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[tool/error]")} [${t}] [${elapsed(e)}] Tool run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onRetrieverStart(e){const t=this.getBreadcrumbs(e);console.log(`${wrap(color.green,"[retriever/start]")} [${t}] Entering Retriever run with input: ${tryJsonStringify(e.inputs,"[inputs]")}`)}onRetrieverEnd(e){const t=this.getBreadcrumbs(e);console.log(`${wrap(color.cyan,"[retriever/end]")} [${t}] [${elapsed(e)}] Exiting Retriever run with output: ${tryJsonStringify(e.outputs,"[outputs]")}`)}onRetrieverError(e){const t=this.getBreadcrumbs(e);console.log(`${wrap(color.red,"[retriever/error]")} [${t}] [${elapsed(e)}] Retriever run errored with error: ${tryJsonStringify(e.error,"[error]")}`)}onAgentAction(e){const t=e,r=this.getBreadcrumbs(e);console.log(`${wrap(color.blue,"[agent/action]")} [${r}] Agent selected action: ${tryJsonStringify(t.actions[t.actions.length-1],"[action]")}`)}}let client;const getDefaultLangChainClientSingleton=()=>{if(void 0===client){const e="false"===getEnvironmentVariable("LANGCHAIN_CALLBACKS_BACKGROUND")?{blockOnRootRunFinalization:!0}:{};client=new Client(e)}return client};class LangChainTracer extends BaseTracer{constructor(e={}){super(e),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"langchain_tracer"}),Object.defineProperty(this,"projectName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"replicas",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"usesRunTreeMap",{enumerable:!0,configurable:!0,writable:!0,value:!0});const{exampleId:t,projectName:r,client:n,replicas:o}=e;this.projectName=r??getDefaultProjectName(),this.replicas=o,this.exampleId=t,this.client=n??getDefaultLangChainClientSingleton();const i=LangChainTracer.getTraceableRunTree();i&&this.updateFromRunTree(i)}async persistRun(e){}async onRunCreate(e){const t=this.getRunTreeWithTracingConfig(e.id);await(t?.postRun())}async onRunUpdate(e){const t=this.getRunTreeWithTracingConfig(e.id);await(t?.patchRun())}getRun(e){return this.runTreeMap.get(e)}updateFromRunTree(e){let t=e;const r=new Set;for(;t.parent_run&&!r.has(t.id)&&(r.add(t.id),t.parent_run);)t=t.parent_run;r.clear();const n=[t];for(;n.length>0;){const e=n.shift();e&&!r.has(e.id)&&(r.add(e.id),this.runTreeMap.set(e.id,e),e.child_runs&&n.push(...e.child_runs))}this.client=e.client??this.client,this.replicas=e.replicas??this.replicas,this.projectName=e.project_name??this.projectName,this.exampleId=e.reference_example_id??this.exampleId}getRunTreeWithTracingConfig(e){const t=this.runTreeMap.get(e);if(t)return new RunTree({...t,client:this.client,project_name:this.projectName,replicas:this.replicas,reference_example_id:this.exampleId,tracingEnabled:!0})}static getTraceableRunTree(){try{return getCurrentRunTree(!0)}catch{return}}}const TRACING_ALS_KEY=Symbol.for("ls:tracing_async_local_storage"),_CONTEXT_VARIABLES_KEY=Symbol.for("lc:context_variables"),setGlobalAsyncLocalStorageInstance=e=>{globalThis[TRACING_ALS_KEY]=e},getGlobalAsyncLocalStorageInstance=()=>globalThis[TRACING_ALS_KEY];let queue;function createQueue(){return new("default"in PQueueMod?PQueueMod.default:PQueueMod)({autoStart:!0,concurrency:1})}function getQueue(){return void 0===queue&&(queue=createQueue()),queue}async function consumeCallback(e,t){if(!0===t){const t=getGlobalAsyncLocalStorageInstance();void 0!==t?await t.run(void 0,async()=>e()):await e()}else queue=getQueue(),queue.add(async()=>{const t=getGlobalAsyncLocalStorageInstance();void 0!==t?await t.run(void 0,async()=>e()):await e()})}const isTracingEnabled=e=>!!["LANGSMITH_TRACING_V2","LANGCHAIN_TRACING_V2","LANGSMITH_TRACING","LANGCHAIN_TRACING"].find(e=>"true"===getEnvironmentVariable(e));function getContextVariable(e){const t=getGlobalAsyncLocalStorageInstance();if(void 0===t)return;const r=t.getStore();return r?.[_CONTEXT_VARIABLES_KEY]?.[e]}const LC_CONFIGURE_HOOKS_KEY=Symbol("lc:configure_hooks"),_getConfigureHooks=()=>getContextVariable(LC_CONFIGURE_HOOKS_KEY)||[];function parseCallbackConfigArg(e){return e?Array.isArray(e)||"name"in e?{callbacks:e}:e:{}}class BaseCallbackManager{setHandler(e){return this.setHandlers([e])}}class BaseRunManager{constructor(e,t,r,n,o,i,s,a){Object.defineProperty(this,"runId",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:o}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:s}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:a})}get parentRunId(){return this._parentRunId}async handleText(e){await Promise.all(this.handlers.map(t=>consumeCallback(async()=>{try{await(t.handleText?.(e,this.runId,this._parentRunId,this.tags))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleText: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}async handleCustomEvent(e,t,r,n,o){await Promise.all(this.handlers.map(r=>consumeCallback(async()=>{try{await(r.handleCustomEvent?.(e,t,this.runId,this.tags,this.metadata))}catch(n){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleCustomEvent: ${n}`),r.raiseError)throw n}},r.awaitHandlers)))}}class CallbackManagerForRetrieverRun extends BaseRunManager{getChild(e){const t=new CallbackManager(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleRetrieverEnd(e){await Promise.all(this.handlers.map(t=>consumeCallback(async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetriever`),t.raiseError)throw r}},t.awaitHandlers)))}async handleRetrieverError(e){await Promise.all(this.handlers.map(t=>consumeCallback(async()=>{if(!t.ignoreRetriever)try{await(t.handleRetrieverError?.(e,this.runId,this._parentRunId,this.tags))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleRetrieverError: ${r}`),t.raiseError)throw e}},t.awaitHandlers)))}}class CallbackManagerForLLMRun extends BaseRunManager{async handleLLMNewToken(e,t,r,n,o,i){await Promise.all(this.handlers.map(r=>consumeCallback(async()=>{if(!r.ignoreLLM)try{await(r.handleLLMNewToken?.(e,t??{prompt:0,completion:0},this.runId,this._parentRunId,this.tags,i))}catch(n){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMNewToken: ${n}`),r.raiseError)throw n}},r.awaitHandlers)))}async handleLLMError(e,t,r,n,o){await Promise.all(this.handlers.map(t=>consumeCallback(async()=>{if(!t.ignoreLLM)try{await(t.handleLLMError?.(e,this.runId,this._parentRunId,this.tags,o))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMError: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}async handleLLMEnd(e,t,r,n,o){await Promise.all(this.handlers.map(t=>consumeCallback(async()=>{if(!t.ignoreLLM)try{await(t.handleLLMEnd?.(e,this.runId,this._parentRunId,this.tags,o))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleLLMEnd: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}}class CallbackManagerForChainRun extends BaseRunManager{getChild(e){const t=new CallbackManager(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleChainError(e,t,r,n,o){await Promise.all(this.handlers.map(t=>consumeCallback(async()=>{if(!t.ignoreChain)try{await(t.handleChainError?.(e,this.runId,this._parentRunId,this.tags,o))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainError: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}async handleChainEnd(e,t,r,n,o){await Promise.all(this.handlers.map(t=>consumeCallback(async()=>{if(!t.ignoreChain)try{await(t.handleChainEnd?.(e,this.runId,this._parentRunId,this.tags,o))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleChainEnd: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}async handleAgentAction(e){await Promise.all(this.handlers.map(t=>consumeCallback(async()=>{if(!t.ignoreAgent)try{await(t.handleAgentAction?.(e,this.runId,this._parentRunId,this.tags))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentAction: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}async handleAgentEnd(e){await Promise.all(this.handlers.map(t=>consumeCallback(async()=>{if(!t.ignoreAgent)try{await(t.handleAgentEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleAgentEnd: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}}class CallbackManagerForToolRun extends BaseRunManager{getChild(e){const t=new CallbackManager(this.runId);return t.setHandlers(this.inheritableHandlers),t.addTags(this.inheritableTags),t.addMetadata(this.inheritableMetadata),e&&t.addTags([e],!1),t}async handleToolError(e){await Promise.all(this.handlers.map(t=>consumeCallback(async()=>{if(!t.ignoreAgent)try{await(t.handleToolError?.(e,this.runId,this._parentRunId,this.tags))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolError: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}async handleToolEnd(e){await Promise.all(this.handlers.map(t=>consumeCallback(async()=>{if(!t.ignoreAgent)try{await(t.handleToolEnd?.(e,this.runId,this._parentRunId,this.tags))}catch(r){if((t.raiseError?console.error:console.warn)(`Error in handler ${t.constructor.name}, handleToolEnd: ${r}`),t.raiseError)throw r}},t.awaitHandlers)))}}class CallbackManager extends BaseCallbackManager{constructor(e,t){super(),Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableHandlers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"inheritableTags",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inheritableMetadata",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"callback_manager"}),Object.defineProperty(this,"_parentRunId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.handlers=t?.handlers??this.handlers,this.inheritableHandlers=t?.inheritableHandlers??this.inheritableHandlers,this.tags=t?.tags??this.tags,this.inheritableTags=t?.inheritableTags??this.inheritableTags,this.metadata=t?.metadata??this.metadata,this.inheritableMetadata=t?.inheritableMetadata??this.inheritableMetadata,this._parentRunId=e}getParentRunId(){return this._parentRunId}async handleLLMStart(e,t,r=void 0,n=void 0,o=void 0,i=void 0,s=void 0,a=void 0){return Promise.all(t.map(async(t,n)=>{const i=0===n&&r?r:v4();return await Promise.all(this.handlers.map(r=>{if(!r.ignoreLLM)return isBaseTracer(r)&&r._createRunForLLMStart(e,[t],i,this._parentRunId,o,this.tags,this.metadata,a),consumeCallback(async()=>{try{await(r.handleLLMStart?.(e,[t],i,this._parentRunId,o,this.tags,this.metadata,a))}catch(n){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMStart: ${n}`),r.raiseError)throw n}},r.awaitHandlers)})),new CallbackManagerForLLMRun(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChatModelStart(e,t,r=void 0,n=void 0,o=void 0,i=void 0,s=void 0,a=void 0){return Promise.all(t.map(async(t,n)=>{const i=0===n&&r?r:v4();return await Promise.all(this.handlers.map(r=>{if(!r.ignoreLLM)return isBaseTracer(r)&&r._createRunForChatModelStart(e,[t],i,this._parentRunId,o,this.tags,this.metadata,a),consumeCallback(async()=>{try{if(r.handleChatModelStart)await(r.handleChatModelStart?.(e,[t],i,this._parentRunId,o,this.tags,this.metadata,a));else if(r.handleLLMStart){const n=getBufferString(t);await(r.handleLLMStart?.(e,[n],i,this._parentRunId,o,this.tags,this.metadata,a))}}catch(n){if((r.raiseError?console.error:console.warn)(`Error in handler ${r.constructor.name}, handleLLMStart: ${n}`),r.raiseError)throw n}},r.awaitHandlers)})),new CallbackManagerForLLMRun(i,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}))}async handleChainStart(e,t,r=v4(),n=void 0,o=void 0,i=void 0,s=void 0){return await Promise.all(this.handlers.map(o=>{if(!o.ignoreChain)return isBaseTracer(o)&&o._createRunForChainStart(e,t,r,this._parentRunId,this.tags,this.metadata,n,s),consumeCallback(async()=>{try{await(o.handleChainStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,n,s))}catch(i){if((o.raiseError?console.error:console.warn)(`Error in handler ${o.constructor.name}, handleChainStart: ${i}`),o.raiseError)throw i}},o.awaitHandlers)})),new CallbackManagerForChainRun(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleToolStart(e,t,r=v4(),n=void 0,o=void 0,i=void 0,s=void 0){return await Promise.all(this.handlers.map(n=>{if(!n.ignoreAgent)return isBaseTracer(n)&&n._createRunForToolStart(e,t,r,this._parentRunId,this.tags,this.metadata,s),consumeCallback(async()=>{try{await(n.handleToolStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,s))}catch(o){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleToolStart: ${o}`),n.raiseError)throw o}},n.awaitHandlers)})),new CallbackManagerForToolRun(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleRetrieverStart(e,t,r=v4(),n=void 0,o=void 0,i=void 0,s=void 0){return await Promise.all(this.handlers.map(n=>{if(!n.ignoreRetriever)return isBaseTracer(n)&&n._createRunForRetrieverStart(e,t,r,this._parentRunId,this.tags,this.metadata,s),consumeCallback(async()=>{try{await(n.handleRetrieverStart?.(e,t,r,this._parentRunId,this.tags,this.metadata,s))}catch(o){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleRetrieverStart: ${o}`),n.raiseError)throw o}},n.awaitHandlers)})),new CallbackManagerForRetrieverRun(r,this.handlers,this.inheritableHandlers,this.tags,this.inheritableTags,this.metadata,this.inheritableMetadata,this._parentRunId)}async handleCustomEvent(e,t,r,n,o){await Promise.all(this.handlers.map(n=>consumeCallback(async()=>{if(!n.ignoreCustomEvent)try{await(n.handleCustomEvent?.(e,t,r,this.tags,this.metadata))}catch(o){if((n.raiseError?console.error:console.warn)(`Error in handler ${n.constructor.name}, handleCustomEvent: ${o}`),n.raiseError)throw o}},n.awaitHandlers)))}addHandler(e,t=!0){this.handlers.push(e),t&&this.inheritableHandlers.push(e)}removeHandler(e){this.handlers=this.handlers.filter(t=>t!==e),this.inheritableHandlers=this.inheritableHandlers.filter(t=>t!==e)}setHandlers(e,t=!0){this.handlers=[],this.inheritableHandlers=[];for(const r of e)this.addHandler(r,t)}addTags(e,t=!0){this.removeTags(e),this.tags.push(...e),t&&this.inheritableTags.push(...e)}removeTags(e){this.tags=this.tags.filter(t=>!e.includes(t)),this.inheritableTags=this.inheritableTags.filter(t=>!e.includes(t))}addMetadata(e,t=!0){this.metadata={...this.metadata,...e},t&&(this.inheritableMetadata={...this.inheritableMetadata,...e})}removeMetadata(e){for(const t of Object.keys(e))delete this.metadata[t],delete this.inheritableMetadata[t]}copy(e=[],t=!0){const r=new CallbackManager(this._parentRunId);for(const n of this.handlers){const e=this.inheritableHandlers.includes(n);r.addHandler(n,e)}for(const n of this.tags){const e=this.inheritableTags.includes(n);r.addTags([n],e)}for(const n of Object.keys(this.metadata)){const e=Object.keys(this.inheritableMetadata).includes(n);r.addMetadata({[n]:this.metadata[n]},e)}for(const n of e)r.handlers.filter(e=>"console_callback_handler"===e.name).some(e=>e.name===n.name)||r.addHandler(n,t);return r}static fromHandlers(e){const t=new this;return t.addHandler(new class extends BaseCallbackHandler{constructor(){super(),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:v4()}),Object.assign(this,e)}}),t}static configure(e,t,r,n,o,i,s){return this._configureSync(e,t,r,n,o,i,s)}static _configureSync(e,t,r,n,o,i,s){let a;(e||t)&&(Array.isArray(e)||!e?(a=new CallbackManager,a.setHandlers(e?.map(ensureHandler)??[],!0)):a=e,a=a.copy(Array.isArray(t)?t.map(ensureHandler):t?.handlers,!1));const c="true"===getEnvironmentVariable("LANGCHAIN_VERBOSE")||s?.verbose,u=LangChainTracer.getTraceableRunTree()?.tracingEnabled||isTracingEnabled(),l=u||(getEnvironmentVariable("LANGCHAIN_TRACING")??!1);if(c||l){if(a||(a=new CallbackManager),c&&!a.handlers.some(e=>e.name===ConsoleCallbackHandler.prototype.name)){const e=new ConsoleCallbackHandler;a.addHandler(e,!0)}if(l&&!a.handlers.some(e=>"langchain_tracer"===e.name)&&u){const e=new LangChainTracer;a.addHandler(e,!0),a._parentRunId=LangChainTracer.getTraceableRunTree()?.id??a._parentRunId}}for(const{contextVar:d,inheritable:h=!0,handlerClass:f,envVar:p}of _getConfigureHooks()){const e=p&&"true"===getEnvironmentVariable(p)&&f;let t;const r=void 0!==d?getContextVariable(d):void 0;r&&isBaseCallbackHandler(r)?t=r:e&&(t=new f({})),void 0!==t&&(a||(a=new CallbackManager),a.handlers.some(e=>e.name===t.name)||a.addHandler(t,h))}return(r||n)&&a&&(a.addTags(r??[]),a.addTags(n??[],!1)),(o||i)&&a&&(a.addMetadata(o??{}),a.addMetadata(i??{},!1)),a}}function ensureHandler(e){return"name"in e?e:BaseCallbackHandler.fromMethods(e)}class MockAsyncLocalStorage{getStore(){}run(e,t){return t()}enterWith(e){}}const mockAsyncLocalStorage=new MockAsyncLocalStorage,LC_CHILD_KEY=Symbol.for("lc:child_config");class AsyncLocalStorageProvider{getInstance(){return getGlobalAsyncLocalStorageInstance()??mockAsyncLocalStorage}getRunnableConfig(){const e=this.getInstance();return e.getStore()?.extra?.[LC_CHILD_KEY]}runWithConfig(e,t,r){const n=CallbackManager._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata),o=this.getInstance(),i=o.getStore(),s=n?.getParentRunId(),a=n?.handlers?.find(e=>"langchain_tracer"===e?.name);let c;return a&&s?c=a.getRunTreeWithTracingConfig(s):r||(c=new RunTree({name:"<runnable_lambda>",tracingEnabled:!1})),c&&(c.extra={...c.extra,[LC_CHILD_KEY]:e}),void 0!==i&&void 0!==i[_CONTEXT_VARIABLES_KEY]&&(void 0===c&&(c={}),c[_CONTEXT_VARIABLES_KEY]=i[_CONTEXT_VARIABLES_KEY]),o.run(c,t)}initializeGlobalInstance(e){void 0===getGlobalAsyncLocalStorageInstance()&&setGlobalAsyncLocalStorageInstance(e)}}const AsyncLocalStorageProviderSingleton=new AsyncLocalStorageProvider,DEFAULT_RECURSION_LIMIT=25;async function getCallbackManagerForConfig(e){return CallbackManager._configureSync(e?.callbacks,void 0,e?.tags,void 0,e?.metadata)}function mergeConfigs(...e){const t={};for(const r of e.filter(e=>!!e))for(const e of Object.keys(r))if("metadata"===e)t[e]={...t[e],...r[e]};else if("tags"===e){const n=t[e]??[];t[e]=[...new Set(n.concat(r[e]??[]))]}else if("configurable"===e)t[e]={...t[e],...r[e]};else if("timeout"===e)void 0===t.timeout?t.timeout=r.timeout:void 0!==r.timeout&&(t.timeout=Math.min(t.timeout,r.timeout));else if("signal"===e)void 0===t.signal?t.signal=r.signal:void 0!==r.signal&&("any"in AbortSignal?t.signal=AbortSignal.any([t.signal,r.signal]):t.signal=r.signal);else if("callbacks"===e){const e=t.callbacks,n=r.callbacks;if(Array.isArray(n))if(e)if(Array.isArray(e))t.callbacks=e.concat(n);else{const r=e.copy();for(const e of n)r.addHandler(ensureHandler(e),!0);t.callbacks=r}else t.callbacks=n;else if(n)if(e)if(Array.isArray(e)){const r=n.copy();for(const t of e)r.addHandler(ensureHandler(t),!0);t.callbacks=r}else t.callbacks=new CallbackManager(n._parentRunId,{handlers:e.handlers.concat(n.handlers),inheritableHandlers:e.inheritableHandlers.concat(n.inheritableHandlers),tags:Array.from(new Set(e.tags.concat(n.tags))),inheritableTags:Array.from(new Set(e.inheritableTags.concat(n.inheritableTags))),metadata:{...e.metadata,...n.metadata}});else t.callbacks=n}else{const n=e;t[n]=r[n]??t[n]}return t}const PRIMITIVES=new Set(["string","number","boolean"]);function ensureConfig(e){const t=AsyncLocalStorageProviderSingleton.getRunnableConfig();let r={tags:[],metadata:{},recursionLimit:25,runId:void 0};if(t){const{runId:e,runName:n,...o}=t;r=Object.entries(o).reduce((e,[t,r])=>(void 0!==r&&(e[t]=r),e),r)}if(e&&(r=Object.entries(e).reduce((e,[t,r])=>(void 0!==r&&(e[t]=r),e),r)),r?.configurable)for(const n of Object.keys(r.configurable))PRIMITIVES.has(typeof r.configurable[n])&&!r.metadata?.[n]&&(r.metadata||(r.metadata={}),r.metadata[n]=r.configurable[n]);if(void 0!==r.timeout){if(r.timeout<=0)throw new Error("Timeout must be a positive number");const e=AbortSignal.timeout(r.timeout);void 0!==r.signal?"any"in AbortSignal&&(r.signal=AbortSignal.any([r.signal,e])):r.signal=e,delete r.timeout}return r}function patchConfig(e={},{callbacks:t,maxConcurrency:r,recursionLimit:n,runName:o,configurable:i,runId:s}={}){const a=ensureConfig(e);return void 0!==t&&(delete a.runName,a.callbacks=t),void 0!==n&&(a.recursionLimit=n),void 0!==r&&(a.maxConcurrency=r),void 0!==o&&(a.runName=o),void 0!==i&&(a.configurable={...a.configurable,...i}),void 0!==s&&delete a.runId,a}function pickRunnableConfigKeys(e){return e?{configurable:e.configurable,recursionLimit:e.recursionLimit,callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,maxConcurrency:e.maxConcurrency,timeout:e.timeout,signal:e.signal}:void 0}async function raceWithSignal(e,t){if(void 0===t)return e;let r;return Promise.race([e.catch(e=>{if(!t?.aborted)throw e}),new Promise((e,n)=>{r=()=>{n(new Error("Aborted"))},t.addEventListener("abort",r),t.aborted&&n(new Error("Aborted"))})]).finally(()=>t.removeEventListener("abort",r))}class IterableReadableStream extends ReadableStream{constructor(){super(...arguments),Object.defineProperty(this,"reader",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}ensureReader(){this.reader||(this.reader=this.getReader())}async next(){this.ensureReader();try{const e=await this.reader.read();return e.done?(this.reader.releaseLock(),{done:!0,value:void 0}):{done:!1,value:e.value}}catch(e){throw this.reader.releaseLock(),e}}async return(){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}return{done:!0,value:void 0}}async throw(e){if(this.ensureReader(),this.locked){const e=this.reader.cancel();this.reader.releaseLock(),await e}throw e}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}static fromReadableStream(e){const t=e.getReader();return new IterableReadableStream({start:e=>function r(){return t.read().then(({done:t,value:n})=>{if(!t)return e.enqueue(n),r();e.close()})}(),cancel(){t.releaseLock()}})}static fromAsyncGenerator(e){return new IterableReadableStream({async pull(t){const{value:r,done:n}=await e.next();n&&t.close(),t.enqueue(r)},async cancel(t){await e.return(t)}})}}function atee(e,t=2){const r=Array.from({length:t},()=>[]);return r.map(async function*(t){for(;;)if(0===t.length){const t=await e.next();for(const e of r)e.push(t)}else{if(t[0].done)return;yield t.shift().value}})}function concat(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.concat(t);if("string"==typeof e&&"string"==typeof t)return e+t;if("number"==typeof e&&"number"==typeof t)return e+t;if("concat"in e&&"function"==typeof e.concat)return e.concat(t);if("object"==typeof e&&"object"==typeof t){const r={...e};for(const[e,n]of Object.entries(t))e in r&&!Array.isArray(r[e])?r[e]=concat(r[e],n):r[e]=n;return r}throw new Error(`Cannot concat ${typeof e} and ${typeof t}`)}class AsyncGeneratorWithSetup{constructor(e){Object.defineProperty(this,"generator",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"setup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signal",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResult",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"firstResultUsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.generator=e.generator,this.config=e.config,this.signal=e.signal??this.config?.signal,this.setup=new Promise((t,r)=>{AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(e.config),async()=>{this.firstResult=e.generator.next(),e.startSetup?this.firstResult.then(e.startSetup).then(t,r):this.firstResult.then(e=>t(void 0),r)},!0)})}async next(...e){return this.signal?.throwIfAborted(),this.firstResultUsed?AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(this.config),this.signal?async()=>raceWithSignal(this.generator.next(...e),this.signal):async()=>this.generator.next(...e),!0):(this.firstResultUsed=!0,this.firstResult)}async return(e){return this.generator.return(e)}async throw(e){return this.generator.throw(e)}[Symbol.asyncIterator](){return this}async[Symbol.asyncDispose](){await this.return()}}async function pipeGeneratorWithSetup(e,t,r,n,...o){const i=new AsyncGeneratorWithSetup({generator:t,startSetup:r,signal:n}),s=await i.setup;return{output:e(i,s,...o),setup:s}}class RunLogPatch{constructor(e){Object.defineProperty(this,"ops",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.ops=e.ops??[]}concat(e){const t=this.ops.concat(e.ops),r=applyPatch({},t);return new RunLog({ops:t,state:r[r.length-1].newDocument})}}class RunLog extends RunLogPatch{constructor(e){super(e),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state=e.state}concat(e){const t=this.ops.concat(e.ops),r=applyPatch(this.state,e.ops);return new RunLog({ops:t,state:r[r.length-1].newDocument})}static fromRunLogPatch(e){const t=applyPatch({},e.ops);return new RunLog({ops:e.ops,state:t[t.length-1].newDocument})}}const isLogStreamHandler=e=>"log_stream_tracer"===e.name;async function _getStandardizedInputs(e,t){if("original"===t)throw new Error("Do not assign inputs with original schema drop the key for now. When inputs are added to streamLog they should be added with standardized schema for streaming events.");const{inputs:r}=e;return["retriever","llm","prompt"].includes(e.run_type)?r:1!==Object.keys(r).length||""!==r?.input?r.input:void 0}async function _getStandardizedOutputs(e,t){const{outputs:r}=e;return"original"===t||["retriever","llm","prompt"].includes(e.run_type)?r:void 0!==r&&1===Object.keys(r).length&&void 0!==r?.output?r.output:r}function isChatGenerationChunk(e){return void 0!==e&&void 0!==e.message}class LogStreamCallbackHandler extends BaseTracer{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_schemaFormat",{enumerable:!0,configurable:!0,writable:!0,value:"original"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"keyMapByRunId",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"counterMapByRunName",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"log_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this._schemaFormat=e?._schemaFormat??this._schemaFormat,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){if(e.id===this.rootId)return!1;const t=e.tags??[];let r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.run_type)),void 0!==this.includeTags&&(r=r||void 0!==t.find(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.run_type)),void 0!==this.excludeTags&&(r=r&&t.every(e=>!this.excludeTags?.includes(e))),r}async*tapOutputIterable(e,t){for await(const r of t){if(e!==this.rootId){const t=this.keyMapByRunId[e];t&&await this.writer.write(new RunLogPatch({ops:[{op:"add",path:`/logs/${t}/streamed_output/-`,value:r}]}))}yield r}}async onRunCreate(e){if(void 0===this.rootId&&(this.rootId=e.id,await this.writer.write(new RunLogPatch({ops:[{op:"replace",path:"",value:{id:e.id,name:e.name,type:e.run_type,streamed_output:[],final_output:void 0,logs:{}}}]}))),!this._includeRun(e))return;void 0===this.counterMapByRunName[e.name]&&(this.counterMapByRunName[e.name]=0),this.counterMapByRunName[e.name]+=1;const t=this.counterMapByRunName[e.name];this.keyMapByRunId[e.id]=1===t?e.name:`${e.name}:${t}`;const r={id:e.id,name:e.name,type:e.run_type,tags:e.tags??[],metadata:e.extra?.metadata??{},start_time:new Date(e.start_time).toISOString(),streamed_output:[],streamed_output_str:[],final_output:void 0,end_time:void 0};"streaming_events"===this._schemaFormat&&(r.inputs=await _getStandardizedInputs(e,this._schemaFormat)),await this.writer.write(new RunLogPatch({ops:[{op:"add",path:`/logs/${this.keyMapByRunId[e.id]}`,value:r}]}))}async onRunUpdate(e){try{const t=this.keyMapByRunId[e.id];if(void 0===t)return;const r=[];"streaming_events"===this._schemaFormat&&r.push({op:"replace",path:`/logs/${t}/inputs`,value:await _getStandardizedInputs(e,this._schemaFormat)}),r.push({op:"add",path:`/logs/${t}/final_output`,value:await _getStandardizedOutputs(e,this._schemaFormat)}),void 0!==e.end_time&&r.push({op:"add",path:`/logs/${t}/end_time`,value:new Date(e.end_time).toISOString()});const n=new RunLogPatch({ops:r});await this.writer.write(n)}finally{if(e.id===this.rootId){const t=new RunLogPatch({ops:[{op:"replace",path:"/final_output",value:await _getStandardizedOutputs(e,this._schemaFormat)}]});await this.writer.write(t),this.autoClose&&await this.writer.close()}}}async onLLMNewToken(e,t,r){const n=this.keyMapByRunId[e.id];if(void 0===n)return;let o;o=void 0!==e.inputs.messages?isChatGenerationChunk(r?.chunk)?r?.chunk:new AIMessageChunk({id:`run-${e.id}`,content:t}):t;const i=new RunLogPatch({ops:[{op:"add",path:`/logs/${n}/streamed_output_str/-`,value:t},{op:"add",path:`/logs/${n}/streamed_output/-`,value:o}]});await this.writer.write(i)}}const RUN_KEY="__run";class GenerationChunk{constructor(e){Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"generationInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.text=e.text,this.generationInfo=e.generationInfo}concat(e){return new GenerationChunk({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo}})}}class ChatGenerationChunk extends GenerationChunk{constructor(e){super(e),Object.defineProperty(this,"message",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.message=e.message}concat(e){return new ChatGenerationChunk({text:this.text+e.text,generationInfo:{...this.generationInfo,...e.generationInfo},message:this.message.concat(e.message)})}}function assignName({name:e,serialized:t}){return void 0!==e?e:void 0!==t?.name?t.name:void 0!==t?.id&&Array.isArray(t?.id)?t.id[t.id.length-1]:"Unnamed"}const isStreamEventsHandler=e=>"event_stream_tracer"===e.name;class EventStreamCallbackHandler extends BaseTracer{constructor(e){super({_awaitHandler:!0,...e}),Object.defineProperty(this,"autoClose",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runInfoMap",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"tappedPromises",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"transformStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"writer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"receiveStream",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"event_stream_tracer"}),Object.defineProperty(this,"lc_prefer_streaming",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.autoClose=e?.autoClose??!0,this.includeNames=e?.includeNames,this.includeTypes=e?.includeTypes,this.includeTags=e?.includeTags,this.excludeNames=e?.excludeNames,this.excludeTypes=e?.excludeTypes,this.excludeTags=e?.excludeTags,this.transformStream=new TransformStream,this.writer=this.transformStream.writable.getWriter(),this.receiveStream=IterableReadableStream.fromReadableStream(this.transformStream.readable)}[Symbol.asyncIterator](){return this.receiveStream}async persistRun(e){}_includeRun(e){const t=e.tags??[];let r=void 0===this.includeNames&&void 0===this.includeTags&&void 0===this.includeTypes;return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(e.runType)),void 0!==this.includeTags&&(r=r||void 0!==t.find(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(e.runType)),void 0!==this.excludeTags&&(r=r&&t.every(e=>!this.excludeTags?.includes(e))),r}async*tapOutputIterable(e,t){const r=await t.next();if(r.done)return;const n=this.runInfoMap.get(e);if(void 0===n)return void(yield r.value);function o(e,t){return"llm"===e&&"string"==typeof t?new GenerationChunk({text:t}):t}let i=this.tappedPromises.get(e);if(void 0===i){let s;i=new Promise(e=>{s=e}),this.tappedPromises.set(e,i);try{const i={event:`on_${n.runType}_stream`,run_id:e,name:n.name,tags:n.tags,metadata:n.metadata,data:{}};await this.send({...i,data:{chunk:o(n.runType,r.value)}},n),yield r.value;for await(const e of t)"tool"!==n.runType&&"retriever"!==n.runType&&await this.send({...i,data:{chunk:o(n.runType,e)}},n),yield e}finally{s()}}else{yield r.value;for await(const e of t)yield e}}async send(e,t){this._includeRun(t)&&await this.writer.write(e)}async sendEndEvent(e,t){const r=this.tappedPromises.get(e.run_id);void 0!==r?r.then(()=>{this.send(e,t)}):await this.send(e,t)}async onLLMStart(e){const t=assignName(e),r=void 0!==e.inputs.messages?"chat_model":"llm",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:r,inputs:e.inputs};this.runInfoMap.set(e.id,n);const o=`on_${r}_start`;await this.send({event:o,data:{input:e.inputs},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onLLMNewToken(e,t,r){const n=this.runInfoMap.get(e.id);let o,i;if(void 0===n)throw new Error(`onLLMNewToken: Run ID ${e.id} not found in run map.`);if(1!==this.runInfoMap.size){if("chat_model"===n.runType)i="on_chat_model_stream",o=void 0===r?.chunk?new AIMessageChunk({content:t,id:`run-${e.id}`}):r.chunk.message;else{if("llm"!==n.runType)throw new Error(`Unexpected run type ${n.runType}`);i="on_llm_stream",o=void 0===r?.chunk?new GenerationChunk({text:t}):r.chunk}await this.send({event:i,data:{chunk:o},run_id:e.id,name:n.name,tags:n.tags,metadata:n.metadata},n)}}async onLLMEnd(e){const t=this.runInfoMap.get(e.id);let r;if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onLLMEnd: Run ID ${e.id} not found in run map.`);const n=e.outputs?.generations;let o;if("chat_model"===t.runType){for(const e of n??[]){if(void 0!==o)break;o=e[0]?.message}r="on_chat_model_end"}else{if("llm"!==t.runType)throw new Error(`onLLMEnd: Unexpected run type: ${t.runType}`);o={generations:n?.map(e=>e.map(e=>({text:e.text,generationInfo:e.generationInfo}))),llmOutput:e.outputs?.llmOutput??{}},r="on_llm_end"}await this.sendEndEvent({event:r,data:{output:o,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onChainStart(e){const t=assignName(e),r=e.run_type??"chain",n={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:e.run_type};let o={};""===e.inputs.input&&1===Object.keys(e.inputs).length?(o={},n.inputs={}):void 0!==e.inputs.input?(o.input=e.inputs.input,n.inputs=e.inputs.input):(o.input=e.inputs,n.inputs=e.inputs),this.runInfoMap.set(e.id,n),await this.send({event:`on_${r}_start`,data:o,name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},n)}async onChainEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onChainEnd: Run ID ${e.id} not found in run map.`);const r=`on_${e.run_type}_end`,n=e.inputs??t.inputs??{},o={output:e.outputs?.output??e.outputs,input:n};n.input&&1===Object.keys(n).length&&(o.input=n.input,t.inputs=n.input),await this.sendEndEvent({event:r,data:o,run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata??{}},t)}async onToolStart(e){const t=assignName(e),r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"tool",inputs:e.inputs??{}};this.runInfoMap.set(e.id,r),await this.send({event:"on_tool_start",data:{input:e.inputs??{}},name:t,run_id:e.id,tags:e.tags??[],metadata:e.extra?.metadata??{}},r)}async onToolEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onToolEnd: Run ID ${e.id} not found in run map.`);if(void 0===t.inputs)throw new Error(`onToolEnd: Run ID ${e.id} is a tool call, and is expected to have traced inputs.`);const r=void 0===e.outputs?.output?e.outputs:e.outputs.output;await this.sendEndEvent({event:"on_tool_end",data:{output:r,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async onRetrieverStart(e){const t=assignName(e),r={tags:e.tags??[],metadata:e.extra?.metadata??{},name:t,runType:"retriever",inputs:{query:e.inputs.query}};this.runInfoMap.set(e.id,r),await this.send({event:"on_retriever_start",data:{input:{query:e.inputs.query}},name:t,tags:e.tags??[],run_id:e.id,metadata:e.extra?.metadata??{}},r)}async onRetrieverEnd(e){const t=this.runInfoMap.get(e.id);if(this.runInfoMap.delete(e.id),void 0===t)throw new Error(`onRetrieverEnd: Run ID ${e.id} not found in run map.`);await this.sendEndEvent({event:"on_retriever_end",data:{output:e.outputs?.documents??e.outputs,input:t.inputs},run_id:e.id,name:t.name,tags:t.tags,metadata:t.metadata},t)}async handleCustomEvent(e,t,r){const n=this.runInfoMap.get(r);if(void 0===n)throw new Error(`handleCustomEvent: Run ID ${r} not found in run map.`);await this.send({event:"on_custom_event",run_id:r,name:e,tags:n.tags,metadata:n.metadata,data:t},n)}async finish(){const e=[...this.tappedPromises.values()];Promise.all(e).finally(()=>{this.writer.close()})}}const STATUS_NO_RETRY=[400,401,402,403,404,405,406,407,409],defaultFailedAttemptHandler=e=>{if(e.message.startsWith("Cancel")||e.message.startsWith("AbortError")||"AbortError"===e.name)throw e;if("ECONNABORTED"===e?.code)throw e;const t=e?.response?.status??e?.status;if(t&&STATUS_NO_RETRY.includes(+t))throw e;if("insufficient_quota"===e?.error?.code){const t=new Error(e?.message);throw t.name="InsufficientQuotaError",t}};class AsyncCaller{constructor(e){Object.defineProperty(this,"maxConcurrency",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxRetries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"queue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxConcurrency=e.maxConcurrency??1/0,this.maxRetries=e.maxRetries??6,this.onFailedAttempt=e.onFailedAttempt??defaultFailedAttemptHandler;const t="default"in PQueueMod?PQueueMod.default:PQueueMod;this.queue=new t({concurrency:this.maxConcurrency})}call(e,...t){return this.queue.add(()=>pRetry(()=>e(...t).catch(e=>{throw e instanceof Error?e:new Error(e)}),{onFailedAttempt:this.onFailedAttempt,retries:this.maxRetries,randomize:!0}),{throwOnTimeout:!0})}callWithOptions(e,t,...r){return e.signal?Promise.race([this.call(t,...r),new Promise((t,r)=>{e.signal?.addEventListener("abort",()=>{r(new Error("AbortError"))})})]):this.call(t,...r)}fetch(...e){return this.call(()=>fetch(...e).then(e=>e.ok?e:Promise.reject(e)))}}class RootListenersTracer extends BaseTracer{constructor({config:e,onStart:t,onEnd:r,onError:n}){super({_awaitHandler:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"RootListenersTracer"}),Object.defineProperty(this,"rootId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnStart",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnEnd",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"argOnError",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.config=e,this.argOnStart=t,this.argOnEnd=r,this.argOnError=n}persistRun(e){return Promise.resolve()}async onRunCreate(e){this.rootId||(this.rootId=e.id,this.argOnStart&&await this.argOnStart(e,this.config))}async onRunUpdate(e){e.id===this.rootId&&(e.error?this.argOnError&&await this.argOnError(e,this.config):this.argOnEnd&&await this.argOnEnd(e,this.config))}}function isRunnableInterface(e){return!!e&&e.lc_runnable}class _RootEventFilter{constructor(e){Object.defineProperty(this,"includeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"includeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTypes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"excludeTags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.includeNames=e.includeNames,this.includeTypes=e.includeTypes,this.includeTags=e.includeTags,this.excludeNames=e.excludeNames,this.excludeTypes=e.excludeTypes,this.excludeTags=e.excludeTags}includeEvent(e,t){let r=void 0===this.includeNames&&void 0===this.includeTypes&&void 0===this.includeTags;const n=e.tags??[];return void 0!==this.includeNames&&(r=r||this.includeNames.includes(e.name)),void 0!==this.includeTypes&&(r=r||this.includeTypes.includes(t)),void 0!==this.includeTags&&(r=r||n.some(e=>this.includeTags?.includes(e))),void 0!==this.excludeNames&&(r=r&&!this.excludeNames.includes(e.name)),void 0!==this.excludeTypes&&(r=r&&!this.excludeTypes.includes(t)),void 0!==this.excludeTags&&(r=r&&n.every(e=>!this.excludeTags?.includes(e))),r}}function _escapeNodeLabel(e){return e.replace(/[^a-zA-Z-_0-9]/g,"_")}const MARKDOWN_SPECIAL_CHARS=["*","_","`"];function _generateMermaidGraphStyles(e){let t="";for(const[r,n]of Object.entries(e))t+=`\tclassDef ${r} ${n};\n`;return t}function drawMermaid(e,t,r){const{firstNode:n,lastNode:o,nodeColors:i,withStyles:s=!0,curveStyle:a="linear",wrapLabelNWords:c=9}=r??{};let u=s?`%%{init: {'flowchart': {'curve': '${a}'}}}%%\ngraph TD;\n`:"graph TD;\n";if(s){const t="default",r={[t]:"{0}({1})"};void 0!==n&&(r[n]="{0}([{1}]):::first"),void 0!==o&&(r[o]="{0}([{1}]):::last");for(const[n,o]of Object.entries(e)){const e=o.name.split(":").pop()??"";let i=MARKDOWN_SPECIAL_CHARS.some(t=>e.startsWith(t)&&e.endsWith(t))?`<p>${e}</p>`:e;Object.keys(o.metadata??{}).length&&(i+=`<hr/><small><em>${Object.entries(o.metadata??{}).map(([e,t])=>`${e} = ${t}`).join("\n")}</em></small>`);const s=(r[n]??r[t]).replace("{0}",_escapeNodeLabel(n)).replace("{1}",i);u+=`\t${s}\n`}}const l={};for(const f of t){const e=f.source.split(":"),t=f.target.split(":"),r=e.filter((e,r)=>e===t[r]).join(":");l[r]||(l[r]=[]),l[r].push(f)}const d=new Set;function h(e,t){const r=1===e.length&&e[0].source===e[0].target;if(t&&!r){const e=t.split(":").pop();if(d.has(e))throw new Error(`Found duplicate subgraph '${e}' -- this likely means that you're reusing a subgraph node with the same name. Please adjust your graph to have subgraph nodes with unique names.`);d.add(e),u+=`\tsubgraph ${e}\n`}for(const n of e){const{source:e,target:t,data:r,conditional:o}=n;let i="";if(void 0!==r){let e=r;const t=e.split(" ");t.length>c&&(e=Array.from({length:Math.ceil(t.length/c)},(e,r)=>t.slice(r*c,(r+1)*c).join(" ")).join("&nbsp;<br>&nbsp;")),i=o?` -. &nbsp;${e}&nbsp; .-> `:` -- &nbsp;${e}&nbsp; --\x3e `}else i=o?" -.-> ":" --\x3e ";u+=`\t${_escapeNodeLabel(e)}${i}${_escapeNodeLabel(t)};\n`}for(const n in l)n.startsWith(`${t}:`)&&n!==t&&h(l[n],n);t&&!r&&(u+="\tend\n")}h(l[""]??[],"");for(const f in l)f.includes(":")||""===f||h(l[f],f);return s&&(u+=_generateMermaidGraphStyles(i??{})),u}async function drawMermaidPng(e,t){let{backgroundColor:r="white"}=t??{};const n=btoa(e);if(void 0!==r){/^#(?:[0-9a-fA-F]{3}){1,2}$/.test(r)||(r=`!${r}`)}const o=`https://mermaid.ink/img/${n}?bgColor=${r}`,i=await fetch(o);if(!i.ok)throw new Error(["Failed to render the graph using the Mermaid.INK API.",`Status code: ${i.status}`,`Status text: ${i.statusText}`].join("\n"));return await i.blob()}const ignoreOverride$1=Symbol("Let zodToJsonSchema decide on which parser to use"),defaultOptions$1={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,definitions:{},errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref",openAiAnyTypeName:"OpenAiAnyType"},getDefaultOptions$1=e=>({...defaultOptions$1,...e}),getRefs$1=e=>{const t=getDefaultOptions$1(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,flags:{hasReferencedOpenAiAnyType:!1},currentPath:r,propertyPath:void 0,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[r._def,{def:r._def,path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};function addErrorMessage$1(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function setResponseValueAndErrors$1(e,t,r,n,o){e[t]=r,addErrorMessage$1(e,t,n,o)}const getRelativePath$1=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")};function parseAnyDef$1(e){if("openAi"!==e.target)return{};const t=[...e.basePath,e.definitionPath,e.openAiAnyTypeName];return e.flags.hasReferencedOpenAiAnyType=!0,{$ref:"relative"===e.$refStrategy?getRelativePath$1(t,e.currentPath):t.join("/")}}function parseArrayDef$1(e,t){const r={type:"array"};return e.type?._def&&e.type?._def?.typeName!==ZodFirstPartyTypeKind.ZodAny&&(r.items=parseDef$1(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&setResponseValueAndErrors$1(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&setResponseValueAndErrors$1(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(setResponseValueAndErrors$1(r,"minItems",e.exactLength.value,e.exactLength.message,t),setResponseValueAndErrors$1(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function parseBigintDef$1(e,t){const r={type:"integer",format:"int64"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"min":"jsonSchema7"===t.target?n.inclusive?setResponseValueAndErrors$1(r,"minimum",n.value,n.message,t):setResponseValueAndErrors$1(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),setResponseValueAndErrors$1(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?setResponseValueAndErrors$1(r,"maximum",n.value,n.message,t):setResponseValueAndErrors$1(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),setResponseValueAndErrors$1(r,"maximum",n.value,n.message,t));break;case"multipleOf":setResponseValueAndErrors$1(r,"multipleOf",n.value,n.message,t)}return r}function parseBooleanDef$1(){return{type:"boolean"}}function parseBrandedDef$1(e,t){return parseDef$1(e.type._def,t)}const parseCatchDef$1=(e,t)=>parseDef$1(e.innerType._def,t);function parseDateDef$1(e,t,r){const n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((r,n)=>parseDateDef$1(e,t,r))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser$1(e,t)}}const integerDateParser$1=(e,t)=>{const r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(const n of e.checks)switch(n.kind){case"min":setResponseValueAndErrors$1(r,"minimum",n.value,n.message,t);break;case"max":setResponseValueAndErrors$1(r,"maximum",n.value,n.message,t)}return r};function parseDefaultDef$1(e,t){return{...parseDef$1(e.innerType._def,t),default:e.defaultValue()}}function parseEffectsDef$1(e,t){return"input"===t.effectStrategy?parseDef$1(e.schema._def,t):parseAnyDef$1(t)}function parseEnumDef$1(e){return{type:"string",enum:Array.from(e.values)}}const isJsonSchema7AllOfType$1=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e;function parseIntersectionDef$1(e,t){const r=[parseDef$1(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),parseDef$1(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e);let n="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const o=[];return r.forEach(e=>{if(isJsonSchema7AllOfType$1(e))o.push(...e.allOf),void 0===e.unevaluatedProperties&&(n=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:r,...n}=e;t=n}else n=void 0;o.push(t)}}),o.length?{allOf:o,...n}:void 0}function parseLiteralDef$1(e,t){const r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}let emojiRegex$1;const zodPatterns$1={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===emojiRegex$1&&(emojiRegex$1=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),emojiRegex$1),uuid:/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/,ipv4:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4Cidr:/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6:/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,ipv6Cidr:/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64url:/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/,jwt:/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/};function parseStringDef$1(e,t){const r={type:"string"};if(e.checks)for(const n of e.checks)switch(n.kind){case"min":setResponseValueAndErrors$1(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t);break;case"max":setResponseValueAndErrors$1(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"email":switch(t.emailStrategy){case"format:email":addFormat$1(r,"email",n.message,t);break;case"format:idn-email":addFormat$1(r,"idn-email",n.message,t);break;case"pattern:zod":addPattern$1(r,zodPatterns$1.email,n.message,t)}break;case"url":addFormat$1(r,"uri",n.message,t);break;case"uuid":addFormat$1(r,"uuid",n.message,t);break;case"regex":addPattern$1(r,n.regex,n.message,t);break;case"cuid":addPattern$1(r,zodPatterns$1.cuid,n.message,t);break;case"cuid2":addPattern$1(r,zodPatterns$1.cuid2,n.message,t);break;case"startsWith":addPattern$1(r,RegExp(`^${escapeLiteralCheckValue(n.value,t)}`),n.message,t);break;case"endsWith":addPattern$1(r,RegExp(`${escapeLiteralCheckValue(n.value,t)}$`),n.message,t);break;case"datetime":addFormat$1(r,"date-time",n.message,t);break;case"date":addFormat$1(r,"date",n.message,t);break;case"time":addFormat$1(r,"time",n.message,t);break;case"duration":addFormat$1(r,"duration",n.message,t);break;case"length":setResponseValueAndErrors$1(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,n.value):n.value,n.message,t),setResponseValueAndErrors$1(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,n.value):n.value,n.message,t);break;case"includes":addPattern$1(r,RegExp(escapeLiteralCheckValue(n.value,t)),n.message,t);break;case"ip":"v6"!==n.version&&addFormat$1(r,"ipv4",n.message,t),"v4"!==n.version&&addFormat$1(r,"ipv6",n.message,t);break;case"base64url":addPattern$1(r,zodPatterns$1.base64url,n.message,t);break;case"jwt":addPattern$1(r,zodPatterns$1.jwt,n.message,t);break;case"cidr":"v6"!==n.version&&addPattern$1(r,zodPatterns$1.ipv4Cidr,n.message,t),"v4"!==n.version&&addPattern$1(r,zodPatterns$1.ipv6Cidr,n.message,t);break;case"emoji":addPattern$1(r,zodPatterns$1.emoji(),n.message,t);break;case"ulid":addPattern$1(r,zodPatterns$1.ulid,n.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":addFormat$1(r,"binary",n.message,t);break;case"contentEncoding:base64":setResponseValueAndErrors$1(r,"contentEncoding","base64",n.message,t);break;case"pattern:zod":addPattern$1(r,zodPatterns$1.base64,n.message,t)}break;case"nanoid":addPattern$1(r,zodPatterns$1.nanoid,n.message,t)}return r}function escapeLiteralCheckValue(e,t){return"escape"===t.patternStrategy?escapeNonAlphaNumeric$1(e):e}const ALPHA_NUMERIC=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function escapeNonAlphaNumeric$1(e){let t="";for(let r=0;r<e.length;r++)ALPHA_NUMERIC.has(e[r])||(t+="\\"),t+=e[r];return t}function addFormat$1(e,t,r,n){e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):setResponseValueAndErrors$1(e,"format",t,r,n)}function addPattern$1(e,t,r,n){e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:stringifyRegExpWithFlags(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):setResponseValueAndErrors$1(e,"pattern",stringifyRegExpWithFlags(t,n),r,n)}function stringifyRegExpWithFlags(e,t){if(!t.applyRegexFlags||!e.flags)return e.source;const r=e.flags.includes("i"),n=e.flags.includes("m"),o=e.flags.includes("s"),i=r?e.source.toLowerCase():e.source;let s="",a=!1,c=!1,u=!1;for(let l=0;l<i.length;l++)if(a)s+=i[l],a=!1;else{if(r)if(c){if(i[l].match(/[a-z]/)){u?(s+=i[l],s+=`${i[l-2]}-${i[l]}`.toUpperCase(),u=!1):"-"===i[l+1]&&i[l+2]?.match(/[a-z]/)?(s+=i[l],u=!0):s+=`${i[l]}${i[l].toUpperCase()}`;continue}}else if(i[l].match(/[a-z]/)){s+=`[${i[l]}${i[l].toUpperCase()}]`;continue}if(n){if("^"===i[l]){s+="(^|(?<=[\r\n]))";continue}if("$"===i[l]){s+="($|(?=[\r\n]))";continue}}o&&"."===i[l]?s+=c?`${i[l]}\r\n`:`[${i[l]}\r\n]`:(s+=i[l],"\\"===i[l]?a=!0:c&&"]"===i[l]?c=!1:c||"["!==i[l]||(c=!0))}try{new RegExp(s)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),e.source}return s}function parseRecordDef$1(e,t){if("openAi"===t.target&&console.warn("Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead."),"openApi3"===t.target&&e.keyType?._def.typeName===ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:parseDef$1(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??parseAnyDef$1(t)}),{}),additionalProperties:t.rejectedAdditionalProperties};const r={type:"object",additionalProperties:parseDef$1(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??t.allowedAdditionalProperties};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===ZodFirstPartyTypeKind.ZodString&&e.keyType._def.checks?.length){const{type:n,...o}=parseStringDef$1(e.keyType._def,t);return{...r,propertyNames:o}}if(e.keyType?._def.typeName===ZodFirstPartyTypeKind.ZodEnum)return{...r,propertyNames:{enum:e.keyType._def.values}};if(e.keyType?._def.typeName===ZodFirstPartyTypeKind.ZodBranded&&e.keyType._def.type._def.typeName===ZodFirstPartyTypeKind.ZodString&&e.keyType._def.type._def.checks?.length){const{type:n,...o}=parseBrandedDef$1(e.keyType._def,t);return{...r,propertyNames:o}}return r}function parseMapDef$1(e,t){if("record"===t.mapStrategy)return parseRecordDef$1(e,t);return{type:"array",maxItems:125,items:{type:"array",items:[parseDef$1(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||parseAnyDef$1(t),parseDef$1(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||parseAnyDef$1(t)],minItems:2,maxItems:2}}}function parseNativeEnumDef$1(e){const t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}function parseNeverDef$1(e){return"openAi"===e.target?void 0:{not:parseAnyDef$1({...e,currentPath:[...e.currentPath,"not"]})}}function parseNullDef$1(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}const primitiveMappings$1={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function parseUnionDef$1(e,t){if("openApi3"===t.target)return asAnyOf$1(e,t);const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in primitiveMappings$1&&(!e._def.checks||!e._def.checks.length))){const e=r.reduce((e,t)=>{const r=primitiveMappings$1[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){const e=r.reduce((e,t)=>{const r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){const t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return asAnyOf$1(e,t)}const asAnyOf$1=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>parseDef$1(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0};function parseNullableDef$1(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target?{type:primitiveMappings$1[e.innerType._def.typeName],nullable:!0}:{type:[primitiveMappings$1[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const r=parseDef$1(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const r=parseDef$1(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function parseNumberDef$1(e,t){const r={type:"number"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"int":r.type="integer",addErrorMessage$1(r,"type",n.message,t);break;case"min":"jsonSchema7"===t.target?n.inclusive?setResponseValueAndErrors$1(r,"minimum",n.value,n.message,t):setResponseValueAndErrors$1(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),setResponseValueAndErrors$1(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?setResponseValueAndErrors$1(r,"maximum",n.value,n.message,t):setResponseValueAndErrors$1(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),setResponseValueAndErrors$1(r,"maximum",n.value,n.message,t));break;case"multipleOf":setResponseValueAndErrors$1(r,"multipleOf",n.value,n.message,t)}return r}function parseObjectDef$1(e,t){const r="openAi"===t.target,n={type:"object",properties:{}},o=[],i=e.shape();for(const a in i){let e=i[a];if(void 0===e||void 0===e._def)continue;let s=safeIsOptional(e);s&&r&&("ZodOptional"===e._def.typeName&&(e=e._def.innerType),e.isNullable()||(e=e.nullable()),s=!1);const c=parseDef$1(e._def,{...t,currentPath:[...t.currentPath,"properties",a],propertyPath:[...t.currentPath,"properties",a]});void 0!==c&&(n.properties[a]=c,s||o.push(a))}o.length&&(n.required=o);const s=decideAdditionalProperties$1(e,t);return void 0!==s&&(n.additionalProperties=s),n}function decideAdditionalProperties$1(e,t){if("ZodNever"!==e.catchall._def.typeName)return parseDef$1(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]});switch(e.unknownKeys){case"passthrough":return t.allowedAdditionalProperties;case"strict":return t.rejectedAdditionalProperties;case"strip":return"strict"===t.removeAdditionalStrategy?t.allowedAdditionalProperties:t.rejectedAdditionalProperties}}function safeIsOptional(e){try{return e.isOptional()}catch{return!0}}const parseOptionalDef$1=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return parseDef$1(e.innerType._def,t);const r=parseDef$1(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:parseAnyDef$1(t)},r]}:parseAnyDef$1(t)},parsePipelineDef$1=(e,t)=>{if("input"===t.pipeStrategy)return parseDef$1(e.in._def,t);if("output"===t.pipeStrategy)return parseDef$1(e.out._def,t);const r=parseDef$1(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[r,parseDef$1(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]})].filter(e=>void 0!==e)}};function parsePromiseDef$1(e,t){return parseDef$1(e.type._def,t)}function parseSetDef$1(e,t){const r={type:"array",uniqueItems:!0,items:parseDef$1(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&setResponseValueAndErrors$1(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&setResponseValueAndErrors$1(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function parseTupleDef$1(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>parseDef$1(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:parseDef$1(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>parseDef$1(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}function parseUndefinedDef$1(e){return{not:parseAnyDef$1(e)}}function parseUnknownDef$1(e){return parseAnyDef$1(e)}const parseReadonlyDef$1=(e,t)=>parseDef$1(e.innerType._def,t),selectParser$1=(e,t,r)=>{switch(t){case ZodFirstPartyTypeKind.ZodString:return parseStringDef$1(e,r);case ZodFirstPartyTypeKind.ZodNumber:return parseNumberDef$1(e,r);case ZodFirstPartyTypeKind.ZodObject:return parseObjectDef$1(e,r);case ZodFirstPartyTypeKind.ZodBigInt:return parseBigintDef$1(e,r);case ZodFirstPartyTypeKind.ZodBoolean:return parseBooleanDef$1();case ZodFirstPartyTypeKind.ZodDate:return parseDateDef$1(e,r);case ZodFirstPartyTypeKind.ZodUndefined:return parseUndefinedDef$1(r);case ZodFirstPartyTypeKind.ZodNull:return parseNullDef$1(r);case ZodFirstPartyTypeKind.ZodArray:return parseArrayDef$1(e,r);case ZodFirstPartyTypeKind.ZodUnion:case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return parseUnionDef$1(e,r);case ZodFirstPartyTypeKind.ZodIntersection:return parseIntersectionDef$1(e,r);case ZodFirstPartyTypeKind.ZodTuple:return parseTupleDef$1(e,r);case ZodFirstPartyTypeKind.ZodRecord:return parseRecordDef$1(e,r);case ZodFirstPartyTypeKind.ZodLiteral:return parseLiteralDef$1(e,r);case ZodFirstPartyTypeKind.ZodEnum:return parseEnumDef$1(e);case ZodFirstPartyTypeKind.ZodNativeEnum:return parseNativeEnumDef$1(e);case ZodFirstPartyTypeKind.ZodNullable:return parseNullableDef$1(e,r);case ZodFirstPartyTypeKind.ZodOptional:return parseOptionalDef$1(e,r);case ZodFirstPartyTypeKind.ZodMap:return parseMapDef$1(e,r);case ZodFirstPartyTypeKind.ZodSet:return parseSetDef$1(e,r);case ZodFirstPartyTypeKind.ZodLazy:return()=>e.getter()._def;case ZodFirstPartyTypeKind.ZodPromise:return parsePromiseDef$1(e,r);case ZodFirstPartyTypeKind.ZodNaN:case ZodFirstPartyTypeKind.ZodNever:return parseNeverDef$1(r);case ZodFirstPartyTypeKind.ZodEffects:return parseEffectsDef$1(e,r);case ZodFirstPartyTypeKind.ZodAny:return parseAnyDef$1(r);case ZodFirstPartyTypeKind.ZodUnknown:return parseUnknownDef$1(r);case ZodFirstPartyTypeKind.ZodDefault:return parseDefaultDef$1(e,r);case ZodFirstPartyTypeKind.ZodBranded:return parseBrandedDef$1(e,r);case ZodFirstPartyTypeKind.ZodReadonly:return parseReadonlyDef$1(e,r);case ZodFirstPartyTypeKind.ZodCatch:return parseCatchDef$1(e,r);case ZodFirstPartyTypeKind.ZodPipeline:return parsePipelineDef$1(e,r);case ZodFirstPartyTypeKind.ZodFunction:case ZodFirstPartyTypeKind.ZodVoid:case ZodFirstPartyTypeKind.ZodSymbol:default:return}};function parseDef$1(e,t,r=!1){const n=t.seen.get(e);if(t.override){const o=t.override?.(e,t,n,r);if(o!==ignoreOverride$1)return o}if(n&&!r){const e=get$ref$1(n,t);if(void 0!==e)return e}const o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);const i=selectParser$1(e,e.typeName,t),s="function"==typeof i?parseDef$1(i(),t):i;if(s&&addMeta$1(e,t,s),t.postProcess){const r=t.postProcess(s,e,t);return o.jsonSchema=s,r}return o.jsonSchema=s,s}const get$ref$1=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"relative":return{$ref:getRelativePath$1(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),parseAnyDef$1(t)):"seen"===t.$refStrategy?parseAnyDef$1(t):void 0}},addMeta$1=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),zodToJsonSchema$2=(e,t)=>{const r=getRefs$1(t);let n;const o=t?.name,i=parseDef$1(e._def,r,!1)??parseAnyDef$1(r);r.flags.hasReferencedOpenAiAnyType&&(n||(n={}),n[r.openAiAnyTypeName]||(n[r.openAiAnyTypeName]={type:["string","number","integer","boolean","array","null"],items:{$ref:"relative"===r.$refStrategy?"1":[...r.basePath,r.definitionPath,r.openAiAnyTypeName].join("/")}}));const s=void 0===o?n?{...i,[r.definitionPath]:n}:i:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,o].join("/"),[r.definitionPath]:{...n,[o]:i}};return"jsonSchema7"===r.target?s.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"!==r.target&&"openAi"!==r.target||(s.$schema="https://json-schema.org/draft/2019-09/schema#"),"openAi"===r.target&&("anyOf"in s||"oneOf"in s||"allOf"in s||"type"in s&&Array.isArray(s.type))&&console.warn("Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property."),s};function deepCompareStrict(e,t){const r=typeof e;if(r!==typeof t)return!1;if(Array.isArray(e)){if(!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(!deepCompareStrict(e[n],t[n]))return!1;return!0}if("object"===r){if(!e||!t)return e===t;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(const o of r)if(!deepCompareStrict(e[o],t[o]))return!1;return!0}return e===t}function encodePointer(e){return encodeURI(escapePointer(e))}function escapePointer(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}const schemaArrayKeyword={prefixItems:!0,items:!0,allOf:!0,anyOf:!0,oneOf:!0},schemaMapKeyword={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependentSchemas:!0},ignoredKeyword={id:!0,$id:!0,$ref:!0,$schema:!0,$anchor:!0,$vocabulary:!0,$comment:!0,default:!0,enum:!0,const:!0,required:!0,type:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};let initialBaseURI="undefined"!=typeof self&&self.location&&"null"!==self.location.origin?new URL(self.location.origin+self.location.pathname+location.search):new URL("https://github.com/cfworker");function dereference(e,t=Object.create(null),r=initialBaseURI,n=""){if(e&&"object"==typeof e&&!Array.isArray(e)){const o=e.$id||e.id;if(o){const i=new URL(o,r.href);i.hash.length>1?t[i.href]=e:(i.hash="",""===n?r=i:dereference(e,t,r))}}else if(!0!==e&&!1!==e)return t;const o=r.href+(n?"#"+n:"");if(void 0!==t[o])throw new Error(`Duplicate schema URI "${o}".`);if(t[o]=e,!0===e||!1===e)return t;if(void 0===e.__absolute_uri__&&Object.defineProperty(e,"__absolute_uri__",{enumerable:!1,value:o}),e.$ref&&void 0===e.__absolute_ref__){const t=new URL(e.$ref,r.href);t.hash=t.hash,Object.defineProperty(e,"__absolute_ref__",{enumerable:!1,value:t.href})}if(e.$recursiveRef&&void 0===e.__absolute_recursive_ref__){const t=new URL(e.$recursiveRef,r.href);t.hash=t.hash,Object.defineProperty(e,"__absolute_recursive_ref__",{enumerable:!1,value:t.href})}if(e.$anchor){t[new URL("#"+e.$anchor,r.href).href]=e}for(let i in e){if(ignoredKeyword[i])continue;const o=`${n}/${encodePointer(i)}`,s=e[i];if(Array.isArray(s)){if(schemaArrayKeyword[i]){const e=s.length;for(let n=0;n<e;n++)dereference(s[n],t,r,`${o}/${n}`)}}else if(schemaMapKeyword[i])for(let e in s)dereference(s[e],t,r,`${o}/${encodePointer(e)}`);else dereference(s,t,r,o)}return t}const DATE=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,DAYS=[0,31,28,31,30,31,30,31,31,30,31,30,31],TIME=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i,HOSTNAME=/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,URIREF=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,URITEMPLATE=/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,URL_=/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)(?:\.(?:[a-z\u{00a1}-\u{ffff}0-9]+-?)*[a-z\u{00a1}-\u{ffff}0-9]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,UUID=/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,JSON_POINTER=/^(?:\/(?:[^~/]|~0|~1)*)*$/,JSON_POINTER_URI_FRAGMENT=/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,RELATIVE_JSON_POINTER=/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,EMAIL=e=>{if('"'===e[0])return!1;const[t,r,...n]=e.split("@");return!(!t||!r||0!==n.length||t.length>64||r.length>253)&&("."!==t[0]&&!t.endsWith(".")&&!t.includes("..")&&(!(!/^[a-z0-9.-]+$/i.test(r)||!/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+$/i.test(t))&&r.split(".").every(e=>/^[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?$/i.test(e))))},IPV4=/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,IPV6=/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,DURATION=e=>e.length>1&&e.length<80&&(/^P\d+([.,]\d+)?W$/.test(e)||/^P[\dYMDTHS]*(\d[.,]\d+)?[YMDHS]$/.test(e)&&/^P([.,\d]+Y)?([.,\d]+M)?([.,\d]+D)?(T([.,\d]+H)?([.,\d]+M)?([.,\d]+S)?)?$/.test(e));function bind(e){return e.test.bind(e)}const format={date:date,time:time.bind(void 0,!1),"date-time":date_time,duration:DURATION,uri:uri,"uri-reference":bind(URIREF),"uri-template":bind(URITEMPLATE),url:bind(URL_),email:EMAIL,hostname:bind(HOSTNAME),ipv4:bind(IPV4),ipv6:bind(IPV6),regex:regex,uuid:bind(UUID),"json-pointer":bind(JSON_POINTER),"json-pointer-uri-fragment":bind(JSON_POINTER_URI_FRAGMENT),"relative-json-pointer":bind(RELATIVE_JSON_POINTER)};function isLeapYear(e){return e%4==0&&(e%100!=0||e%400==0)}function date(e){const t=e.match(DATE);if(!t)return!1;const r=+t[1],n=+t[2],o=+t[3];return n>=1&&n<=12&&o>=1&&o<=(2==n&&isLeapYear(r)?29:DAYS[n])}function time(e,t){const r=t.match(TIME);if(!r)return!1;const n=+r[1],o=+r[2],i=+r[3],s=!!r[5];return(n<=23&&o<=59&&i<=59||23==n&&59==o&&60==i)&&(!e||s)}const DATE_TIME_SEPARATOR=/t|\s/i;function date_time(e){const t=e.split(DATE_TIME_SEPARATOR);return 2==t.length&&date(t[0])&&time(!0,t[1])}const NOT_URI_FRAGMENT=/\/|:/,URI_PATTERN=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function uri(e){return NOT_URI_FRAGMENT.test(e)&&URI_PATTERN.test(e)}const Z_ANCHOR=/[^\\]\\Z/;function regex(e){if(Z_ANCHOR.test(e))return!1;try{return new RegExp(e,"u"),!0}catch(t){return!1}}function ucs2length(e){let t,r=0,n=e.length,o=0;for(;o<n;)r++,t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<n&&(t=e.charCodeAt(o),56320==(64512&t)&&o++);return r}function validate(e,t,r="2019-09",n=dereference(t),o=!0,i=null,s="#",a="#",c=Object.create(null)){if(!0===t)return{valid:!0,errors:[]};if(!1===t)return{valid:!1,errors:[{instanceLocation:s,keyword:"false",keywordLocation:s,error:"False boolean schema."}]};const u=typeof e;let l;switch(u){case"boolean":case"number":case"string":l=u;break;case"object":l=null===e?"null":Array.isArray(e)?"array":"object";break;default:throw new Error(`Instances of "${u}" type are not supported.`)}const{$ref:d,$recursiveRef:h,$recursiveAnchor:f,type:p,const:m,enum:y,required:g,not:b,anyOf:_,allOf:w,oneOf:v,if:I,then:k,else:T,format:A,properties:S,patternProperties:E,additionalProperties:P,unevaluatedProperties:O,minProperties:R,maxProperties:C,propertyNames:$,dependentRequired:N,dependentSchemas:M,dependencies:x,prefixItems:B,items:D,additionalItems:L,unevaluatedItems:F,contains:j,minContains:U,maxContains:q,minItems:K,maxItems:H,uniqueItems:G,minimum:z,maximum:V,exclusiveMinimum:Z,exclusiveMaximum:W,multipleOf:J,minLength:Y,maxLength:Q,pattern:X,__absolute_ref__:ee,__absolute_recursive_ref__:te}=t,re=[];if(!0===f&&null===i&&(i=t),"#"===h){const u=null===i?n[te]:i,l=`${a}/$recursiveRef`,d=validate(e,null===i?t:i,r,n,o,u,s,l,c);d.valid||re.push({instanceLocation:s,keyword:"$recursiveRef",keywordLocation:l,error:"A subschema had errors."},...d.errors)}if(void 0!==d){const t=n[ee||d];if(void 0===t){let e=`Unresolved $ref "${d}".`;throw ee&&ee!==d&&(e+=`  Absolute URI "${ee}".`),e+=`\nKnown schemas:\n- ${Object.keys(n).join("\n- ")}`,new Error(e)}const u=`${a}/$ref`,l=validate(e,t,r,n,o,i,s,u,c);if(l.valid||re.push({instanceLocation:s,keyword:"$ref",keywordLocation:u,error:"A subschema had errors."},...l.errors),"4"===r||"7"===r)return{valid:0===re.length,errors:re}}if(Array.isArray(p)){let t=p.length,r=!1;for(let n=0;n<t;n++)if(l===p[n]||"integer"===p[n]&&"number"===l&&e%1==0&&e==e){r=!0;break}r||re.push({instanceLocation:s,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${l}" is invalid. Expected "${p.join('", "')}".`})}else"integer"===p?("number"!==l||e%1||e!=e)&&re.push({instanceLocation:s,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${l}" is invalid. Expected "${p}".`}):void 0!==p&&l!==p&&re.push({instanceLocation:s,keyword:"type",keywordLocation:`${a}/type`,error:`Instance type "${l}" is invalid. Expected "${p}".`});if(void 0!==m&&("object"===l||"array"===l?deepCompareStrict(e,m)||re.push({instanceLocation:s,keyword:"const",keywordLocation:`${a}/const`,error:`Instance does not match ${JSON.stringify(m)}.`}):e!==m&&re.push({instanceLocation:s,keyword:"const",keywordLocation:`${a}/const`,error:`Instance does not match ${JSON.stringify(m)}.`})),void 0!==y&&("object"===l||"array"===l?y.some(t=>deepCompareStrict(e,t))||re.push({instanceLocation:s,keyword:"enum",keywordLocation:`${a}/enum`,error:`Instance does not match any of ${JSON.stringify(y)}.`}):y.some(t=>e===t)||re.push({instanceLocation:s,keyword:"enum",keywordLocation:`${a}/enum`,error:`Instance does not match any of ${JSON.stringify(y)}.`})),void 0!==b){const t=`${a}/not`;validate(e,b,r,n,o,i,s,t).valid&&re.push({instanceLocation:s,keyword:"not",keywordLocation:t,error:'Instance matched "not" schema.'})}let ne=[];if(void 0!==_){const t=`${a}/anyOf`,u=re.length;let l=!1;for(let a=0;a<_.length;a++){const u=_[a],d=Object.create(c),h=validate(e,u,r,n,o,!0===f?i:null,s,`${t}/${a}`,d);re.push(...h.errors),l=l||h.valid,h.valid&&ne.push(d)}l?re.length=u:re.splice(u,0,{instanceLocation:s,keyword:"anyOf",keywordLocation:t,error:"Instance does not match any subschemas."})}if(void 0!==w){const t=`${a}/allOf`,u=re.length;let l=!0;for(let a=0;a<w.length;a++){const u=w[a],d=Object.create(c),h=validate(e,u,r,n,o,!0===f?i:null,s,`${t}/${a}`,d);re.push(...h.errors),l=l&&h.valid,h.valid&&ne.push(d)}l?re.length=u:re.splice(u,0,{instanceLocation:s,keyword:"allOf",keywordLocation:t,error:"Instance does not match every subschema."})}if(void 0!==v){const t=`${a}/oneOf`,u=re.length,l=v.filter((a,u)=>{const l=Object.create(c),d=validate(e,a,r,n,o,!0===f?i:null,s,`${t}/${u}`,l);return re.push(...d.errors),d.valid&&ne.push(l),d.valid}).length;1===l?re.length=u:re.splice(u,0,{instanceLocation:s,keyword:"oneOf",keywordLocation:t,error:`Instance does not match exactly one subschema (${l} matches).`})}if("object"!==l&&"array"!==l||Object.assign(c,...ne),void 0!==I){const t=`${a}/if`;if(validate(e,I,r,n,o,i,s,t,c).valid){if(void 0!==k){const u=validate(e,k,r,n,o,i,s,`${a}/then`,c);u.valid||re.push({instanceLocation:s,keyword:"if",keywordLocation:t,error:'Instance does not match "then" schema.'},...u.errors)}}else if(void 0!==T){const u=validate(e,T,r,n,o,i,s,`${a}/else`,c);u.valid||re.push({instanceLocation:s,keyword:"if",keywordLocation:t,error:'Instance does not match "else" schema.'},...u.errors)}}if("object"===l){if(void 0!==g)for(const r of g)r in e||re.push({instanceLocation:s,keyword:"required",keywordLocation:`${a}/required`,error:`Instance does not have required property "${r}".`});const t=Object.keys(e);if(void 0!==R&&t.length<R&&re.push({instanceLocation:s,keyword:"minProperties",keywordLocation:`${a}/minProperties`,error:`Instance does not have at least ${R} properties.`}),void 0!==C&&t.length>C&&re.push({instanceLocation:s,keyword:"maxProperties",keywordLocation:`${a}/maxProperties`,error:`Instance does not have at least ${C} properties.`}),void 0!==$){const t=`${a}/propertyNames`;for(const a in e){const e=`${s}/${encodePointer(a)}`,c=validate(a,$,r,n,o,i,e,t);c.valid||re.push({instanceLocation:s,keyword:"propertyNames",keywordLocation:t,error:`Property name "${a}" does not match schema.`},...c.errors)}}if(void 0!==N){const t=`${a}/dependantRequired`;for(const r in N)if(r in e){const n=N[r];for(const o of n)o in e||re.push({instanceLocation:s,keyword:"dependentRequired",keywordLocation:t,error:`Instance has "${r}" but does not have "${o}".`})}}if(void 0!==M)for(const d in M){const t=`${a}/dependentSchemas`;if(d in e){const a=validate(e,M[d],r,n,o,i,s,`${t}/${encodePointer(d)}`,c);a.valid||re.push({instanceLocation:s,keyword:"dependentSchemas",keywordLocation:t,error:`Instance has "${d}" but does not match dependant schema.`},...a.errors)}}if(void 0!==x){const t=`${a}/dependencies`;for(const a in x)if(a in e){const c=x[a];if(Array.isArray(c))for(const r of c)r in e||re.push({instanceLocation:s,keyword:"dependencies",keywordLocation:t,error:`Instance has "${a}" but does not have "${r}".`});else{const u=validate(e,c,r,n,o,i,s,`${t}/${encodePointer(a)}`);u.valid||re.push({instanceLocation:s,keyword:"dependencies",keywordLocation:t,error:`Instance has "${a}" but does not match dependant schema.`},...u.errors)}}}const u=Object.create(null);let l=!1;if(void 0!==S){const t=`${a}/properties`;for(const a in S){if(!(a in e))continue;const d=`${s}/${encodePointer(a)}`,h=validate(e[a],S[a],r,n,o,i,d,`${t}/${encodePointer(a)}`);if(h.valid)c[a]=u[a]=!0;else if(l=o,re.push({instanceLocation:s,keyword:"properties",keywordLocation:t,error:`Property "${a}" does not match schema.`},...h.errors),l)break}}if(!l&&void 0!==E){const t=`${a}/patternProperties`;for(const a in E){const d=new RegExp(a,"u"),h=E[a];for(const f in e){if(!d.test(f))continue;const p=`${s}/${encodePointer(f)}`,m=validate(e[f],h,r,n,o,i,p,`${t}/${encodePointer(a)}`);m.valid?c[f]=u[f]=!0:(l=o,re.push({instanceLocation:s,keyword:"patternProperties",keywordLocation:t,error:`Property "${f}" matches pattern "${a}" but does not match associated schema.`},...m.errors))}}}if(l||void 0===P){if(!l&&void 0!==O){const t=`${a}/unevaluatedProperties`;for(const a in e)if(!c[a]){const u=`${s}/${encodePointer(a)}`,l=validate(e[a],O,r,n,o,i,u,t);l.valid?c[a]=!0:re.push({instanceLocation:s,keyword:"unevaluatedProperties",keywordLocation:t,error:`Property "${a}" does not match unevaluated properties schema.`},...l.errors)}}}else{const t=`${a}/additionalProperties`;for(const a in e){if(u[a])continue;const d=`${s}/${encodePointer(a)}`,h=validate(e[a],P,r,n,o,i,d,t);h.valid?c[a]=!0:(l=o,re.push({instanceLocation:s,keyword:"additionalProperties",keywordLocation:t,error:`Property "${a}" does not match additional properties schema.`},...h.errors))}}}else if("array"===l){void 0!==H&&e.length>H&&re.push({instanceLocation:s,keyword:"maxItems",keywordLocation:`${a}/maxItems`,error:`Array has too many items (${e.length} > ${H}).`}),void 0!==K&&e.length<K&&re.push({instanceLocation:s,keyword:"minItems",keywordLocation:`${a}/minItems`,error:`Array has too few items (${e.length} < ${K}).`});const t=e.length;let u=0,l=!1;if(void 0!==B){const d=`${a}/prefixItems`,h=Math.min(B.length,t);for(;u<h;u++){const t=validate(e[u],B[u],r,n,o,i,`${s}/${u}`,`${d}/${u}`);if(c[u]=!0,!t.valid&&(l=o,re.push({instanceLocation:s,keyword:"prefixItems",keywordLocation:d,error:"Items did not match schema."},...t.errors),l))break}}if(void 0!==D){const d=`${a}/items`;if(Array.isArray(D)){const a=Math.min(D.length,t);for(;u<a;u++){const t=validate(e[u],D[u],r,n,o,i,`${s}/${u}`,`${d}/${u}`);if(c[u]=!0,!t.valid&&(l=o,re.push({instanceLocation:s,keyword:"items",keywordLocation:d,error:"Items did not match schema."},...t.errors),l))break}}else for(;u<t;u++){const t=validate(e[u],D,r,n,o,i,`${s}/${u}`,d);if(c[u]=!0,!t.valid&&(l=o,re.push({instanceLocation:s,keyword:"items",keywordLocation:d,error:"Items did not match schema."},...t.errors),l))break}if(!l&&void 0!==L){const d=`${a}/additionalItems`;for(;u<t;u++){const t=validate(e[u],L,r,n,o,i,`${s}/${u}`,d);c[u]=!0,t.valid||(l=o,re.push({instanceLocation:s,keyword:"additionalItems",keywordLocation:d,error:"Items did not match additional items schema."},...t.errors))}}}if(void 0!==j)if(0===t&&void 0===U)re.push({instanceLocation:s,keyword:"contains",keywordLocation:`${a}/contains`,error:"Array is empty. It must contain at least one item matching the schema."});else if(void 0!==U&&t<U)re.push({instanceLocation:s,keyword:"minContains",keywordLocation:`${a}/minContains`,error:`Array has less items (${t}) than minContains (${U}).`});else{const u=`${a}/contains`,l=re.length;let d=0;for(let a=0;a<t;a++){const t=validate(e[a],j,r,n,o,i,`${s}/${a}`,u);t.valid?(c[a]=!0,d++):re.push(...t.errors)}d>=(U||0)&&(re.length=l),void 0===U&&void 0===q&&0===d?re.splice(l,0,{instanceLocation:s,keyword:"contains",keywordLocation:u,error:"Array does not contain item matching schema."}):void 0!==U&&d<U?re.push({instanceLocation:s,keyword:"minContains",keywordLocation:`${a}/minContains`,error:`Array must contain at least ${U} items matching schema. Only ${d} items were found.`}):void 0!==q&&d>q&&re.push({instanceLocation:s,keyword:"maxContains",keywordLocation:`${a}/maxContains`,error:`Array may contain at most ${q} items matching schema. ${d} items were found.`})}if(!l&&void 0!==F){const l=`${a}/unevaluatedItems`;for(;u<t;u++){if(c[u])continue;const t=validate(e[u],F,r,n,o,i,`${s}/${u}`,l);c[u]=!0,t.valid||re.push({instanceLocation:s,keyword:"unevaluatedItems",keywordLocation:l,error:"Items did not match unevaluated items schema."},...t.errors)}}if(G)for(let r=0;r<t;r++){const n=e[r],o="object"==typeof n&&null!==n;for(let i=0;i<t;i++){if(r===i)continue;const t=e[i];(n===t||o&&("object"==typeof t&&null!==t)&&deepCompareStrict(n,t))&&(re.push({instanceLocation:s,keyword:"uniqueItems",keywordLocation:`${a}/uniqueItems`,error:`Duplicate items at indexes ${r} and ${i}.`}),r=Number.MAX_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER)}}}else if("number"===l){if("4"===r?(void 0!==z&&(!0===Z&&e<=z||e<z)&&re.push({instanceLocation:s,keyword:"minimum",keywordLocation:`${a}/minimum`,error:`${e} is less than ${Z?"or equal to ":""} ${z}.`}),void 0!==V&&(!0===W&&e>=V||e>V)&&re.push({instanceLocation:s,keyword:"maximum",keywordLocation:`${a}/maximum`,error:`${e} is greater than ${W?"or equal to ":""} ${V}.`})):(void 0!==z&&e<z&&re.push({instanceLocation:s,keyword:"minimum",keywordLocation:`${a}/minimum`,error:`${e} is less than ${z}.`}),void 0!==V&&e>V&&re.push({instanceLocation:s,keyword:"maximum",keywordLocation:`${a}/maximum`,error:`${e} is greater than ${V}.`}),void 0!==Z&&e<=Z&&re.push({instanceLocation:s,keyword:"exclusiveMinimum",keywordLocation:`${a}/exclusiveMinimum`,error:`${e} is less than ${Z}.`}),void 0!==W&&e>=W&&re.push({instanceLocation:s,keyword:"exclusiveMaximum",keywordLocation:`${a}/exclusiveMaximum`,error:`${e} is greater than or equal to ${W}.`})),void 0!==J){const t=e%J;Math.abs(0-t)>=1.1920929e-7&&Math.abs(J-t)>=1.1920929e-7&&re.push({instanceLocation:s,keyword:"multipleOf",keywordLocation:`${a}/multipleOf`,error:`${e} is not a multiple of ${J}.`})}}else if("string"===l){const t=void 0===Y&&void 0===Q?0:ucs2length(e);void 0!==Y&&t<Y&&re.push({instanceLocation:s,keyword:"minLength",keywordLocation:`${a}/minLength`,error:`String is too short (${t} < ${Y}).`}),void 0!==Q&&t>Q&&re.push({instanceLocation:s,keyword:"maxLength",keywordLocation:`${a}/maxLength`,error:`String is too long (${t} > ${Q}).`}),void 0===X||new RegExp(X,"u").test(e)||re.push({instanceLocation:s,keyword:"pattern",keywordLocation:`${a}/pattern`,error:"String does not match pattern."}),void 0!==A&&format[A]&&!format[A](e)&&re.push({instanceLocation:s,keyword:"format",keywordLocation:`${a}/format`,error:`String does not match format "${A}".`})}return{valid:0===re.length,errors:re}}function isZodSchemaV4(e){if("object"!=typeof e||null===e)return!1;if(!("_zod"in e))return!1;const t=e._zod;return"object"==typeof t&&null!==t&&"def"in t}function isZodSchemaV3(e){if("object"!=typeof e||null===e)return!1;if(!("_def"in e)||"_zod"in e)return!1;const t=e._def;return"object"==typeof t&&null!=t&&"typeName"in t}function isInteropZodSchema(e){return!!e&&("object"==typeof e&&(!Array.isArray(e)&&!(!isZodSchemaV4(e)&&!isZodSchemaV3(e))))}async function interopSafeParseAsync(e,t){if(isZodSchemaV4(e))try{return{success:!0,data:await parseAsync(e,t)}}catch(r){return{success:!1,error:r}}if(isZodSchemaV3(e))return e.safeParse(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}async function interopParseAsync(e,t){if(isZodSchemaV4(e))return parse$1(e,t);if(isZodSchemaV3(e))return e.parse(t);throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function getSchemaDescription(e){return isZodSchemaV4(e)?globalRegistry.get(e)?.description:isZodSchemaV3(e)||"description"in e&&"string"==typeof e.description?e.description:void 0}function isSimpleStringZodSchema(e){if(!isInteropZodSchema(e))return!1;if(isZodSchemaV3(e)){return"ZodString"===e._def.typeName}if(isZodSchemaV4(e)){return"string"===e._zod.def.type}return!1}function isZodObjectV4(e){return!!isZodSchemaV4(e)&&("object"==typeof e&&null!==e&&"_zod"in e&&"object"==typeof e._zod&&null!==e._zod&&"def"in e._zod&&"object"==typeof e._zod.def&&null!==e._zod.def&&"type"in e._zod.def&&"object"===e._zod.def.type)}function isZodArrayV4(e){return!!isZodSchemaV4(e)&&("object"==typeof e&&null!==e&&"_zod"in e&&"object"==typeof e._zod&&null!==e._zod&&"def"in e._zod&&"object"==typeof e._zod.def&&null!==e._zod.def&&"type"in e._zod.def&&"array"===e._zod.def.type)}function interopZodObjectStrict(e,t=!1){if(isZodSchemaV3(e))return e.strict();if(isZodObjectV4(e)){const r=e._zod.def.shape;if(t)for(const[i,s]of Object.entries(e._zod.def.shape)){if(isZodObjectV4(s)){const e=interopZodObjectStrict(s,t);r[i]=e}else if(isZodArrayV4(s)){let e=s._zod.def.element;isZodObjectV4(e)&&(e=interopZodObjectStrict(e,t)),r[i]=clone(s,{...s._zod.def,element:e})}else r[i]=s;const e=globalRegistry.get(s);e&&globalRegistry.add(r[i],e)}const n=clone(e,{...e._zod.def,shape:r,catchall:_never($ZodNever)}),o=globalRegistry.get(e);return o&&globalRegistry.add(n,o),n}throw new Error("Schema must be an instance of z3.ZodObject or z4.$ZodObject")}function isZodTransformV3(e){return isZodSchemaV3(e)&&"typeName"in e._def&&"ZodEffects"===e._def.typeName}function isZodTransformV4(e){return isZodSchemaV4(e)&&"pipe"===e._zod.def.type}function interopZodTransformInputSchema(e,t=!1){if(isZodSchemaV3(e))return isZodTransformV3(e)?interopZodTransformInputSchema(e._def.schema,t):e;if(isZodSchemaV4(e)){let r=e;if(isZodTransformV4(e)&&(r=interopZodTransformInputSchema(e._zod.def.in,t)),t)if(isZodObjectV4(r)){const e=r._zod.def.shape;for(const[n,o]of Object.entries(r._zod.def.shape))e[n]=interopZodTransformInputSchema(o,t);r=clone(r,{...r._zod.def,shape:e})}else if(isZodArrayV4(r)){const e=interopZodTransformInputSchema(r._zod.def.element,t);r=clone(r,{...r._zod.def,element:e})}const n=globalRegistry.get(e);return n&&globalRegistry.add(r,n),r}throw new Error("Schema must be an instance of z3.ZodType or z4.$ZodType")}function toJsonSchema(e){if(isZodSchemaV4(e)){const t=interopZodTransformInputSchema(e,!0);if(isZodObjectV4(t)){return toJSONSchema(interopZodObjectStrict(t,!0))}return toJSONSchema(e)}return isZodSchemaV3(e)?zodToJsonSchema$2(e):e}function nodeDataStr(e,t){if(void 0!==e&&!validate$2(e))return e;if(!isRunnableInterface(t))return t.name??"UnknownSchema";try{let e=t.getName();return e=e.startsWith("Runnable")?e.slice(8):e,e}catch(r){return t.getName()}}function nodeDataJson(e){return isRunnableInterface(e.data)?{type:"runnable",data:{id:e.data.lc_id,name:e.data.getName()}}:{type:"schema",data:{...toJsonSchema(e.data.schema),title:e.data.name}}}class Graph{constructor(e){Object.defineProperty(this,"nodes",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"edges",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.nodes=e?.nodes??this.nodes,this.edges=e?.edges??this.edges}toJSON(){const e={};return Object.values(this.nodes).forEach((t,r)=>{e[t.id]=validate$2(t.id)?r:t.id}),{nodes:Object.values(this.nodes).map(t=>({id:e[t.id],...nodeDataJson(t)})),edges:this.edges.map(t=>{const r={source:e[t.source],target:e[t.target]};return void 0!==t.data&&(r.data=t.data),void 0!==t.conditional&&(r.conditional=t.conditional),r})}}addNode(e,t,r){if(void 0!==t&&void 0!==this.nodes[t])throw new Error(`Node with id ${t} already exists`);const n=t??v4(),o={id:n,data:e,name:nodeDataStr(t,e),metadata:r};return this.nodes[n]=o,o}removeNode(e){delete this.nodes[e.id],this.edges=this.edges.filter(t=>t.source!==e.id&&t.target!==e.id)}addEdge(e,t,r,n){if(void 0===this.nodes[e.id])throw new Error(`Source node ${e.id} not in graph`);if(void 0===this.nodes[t.id])throw new Error(`Target node ${t.id} not in graph`);const o={source:e.id,target:t.id,data:r,conditional:n};return this.edges.push(o),o}firstNode(){return _firstNode(this)}lastNode(){return _lastNode(this)}extend(e,t=""){let r=t;Object.values(e.nodes).map(e=>e.id).every(validate$2)&&(r="");const n=e=>r?`${r}:${e}`:e;Object.entries(e.nodes).forEach(([e,t])=>{this.nodes[n(e)]={...t,id:n(e)}});const o=e.edges.map(e=>({...e,source:n(e.source),target:n(e.target)}));this.edges=[...this.edges,...o];const i=e.firstNode(),s=e.lastNode();return[i?{id:n(i.id),data:i.data}:void 0,s?{id:n(s.id),data:s.data}:void 0]}trimFirstNode(){const e=this.firstNode();e&&_firstNode(this,[e.id])&&this.removeNode(e)}trimLastNode(){const e=this.lastNode();e&&_lastNode(this,[e.id])&&this.removeNode(e)}reid(){const e=Object.fromEntries(Object.values(this.nodes).map(e=>[e.id,e.name])),t=new Map;Object.values(e).forEach(e=>{t.set(e,(t.get(e)||0)+1)});const r=r=>{const n=e[r];return validate$2(r)&&1===t.get(n)?n:r};return new Graph({nodes:Object.fromEntries(Object.entries(this.nodes).map(([e,t])=>[r(e),{...t,id:r(e)}])),edges:this.edges.map(e=>({...e,source:r(e.source),target:r(e.target)}))})}drawMermaid(e){const{withStyles:t,curveStyle:r,nodeColors:n={default:"fill:#f2f0ff,line-height:1.2",first:"fill-opacity:0",last:"fill:#bfb6fc"},wrapLabelNWords:o}=e??{},i=this.reid(),s=i.firstNode(),a=i.lastNode();return drawMermaid(i.nodes,i.edges,{firstNode:s?.id,lastNode:a?.id,withStyles:t,curveStyle:r,nodeColors:n,wrapLabelNWords:o})}async drawMermaidPng(e){return drawMermaidPng(this.drawMermaid(e),{backgroundColor:e?.backgroundColor})}}function _firstNode(e,t=[]){const r=new Set(e.edges.filter(e=>!t.includes(e.source)).map(e=>e.target)),n=[];for(const o of Object.values(e.nodes))t.includes(o.id)||r.has(o.id)||n.push(o);return 1===n.length?n[0]:void 0}function _lastNode(e,t=[]){const r=new Set(e.edges.filter(e=>!t.includes(e.target)).map(e=>e.source)),n=[];for(const o of Object.values(e.nodes))t.includes(o.id)||r.has(o.id)||n.push(o);return 1===n.length?n[0]:void 0}function convertToHttpEventStream(e){const t=new TextEncoder,r=new ReadableStream({async start(r){for await(const n of e)r.enqueue(t.encode(`event: data\ndata: ${JSON.stringify(n)}\n\n`));r.enqueue(t.encode("event: end\n\n")),r.close()}});return IterableReadableStream.fromReadableStream(r)}function isIterableIterator(e){return"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.iterator]&&"function"==typeof e.next}const isIterator=e=>null!=e&&"object"==typeof e&&"next"in e&&"function"==typeof e.next;function isAsyncIterable(e){return"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.asyncIterator]}function*consumeIteratorInContext(e,t){for(;;){const{value:r,done:n}=AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(e),t.next.bind(t),!0);if(n)break;yield r}}async function*consumeAsyncIterableInContext(e,t){const r=t[Symbol.asyncIterator]();for(;;){const{value:n,done:o}=await AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(e),r.next.bind(t),!0);if(o)break;yield n}}function _coerceToDict(e,t){return!e||Array.isArray(e)||e instanceof Date||"object"!=typeof e?{[t]:e}:e}class Runnable extends Serializable{constructor(){super(...arguments),Object.defineProperty(this,"lc_runnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}getName(e){const t=this.name??this.constructor.lc_name()??this.constructor.name;return e?`${t}${e}`:t}bind(e){return new RunnableBinding({bound:this,kwargs:e,config:{}})}map(){return new RunnableEach({bound:this})}withRetry(e){return new RunnableRetry({bound:this,kwargs:{},config:{},maxAttemptNumber:e?.stopAfterAttempt,...e})}withConfig(e){return new RunnableBinding({bound:this,config:e,kwargs:{}})}withFallbacks(e){const t=Array.isArray(e)?e:e.fallbacks;return new RunnableWithFallbacks({runnable:this,fallbacks:t})}_getOptionsList(e,t=0){if(Array.isArray(e)&&e.length!==t)throw new Error(`Passed "options" must be an array with the same length as the inputs, but got ${e.length} options for ${t} inputs`);if(Array.isArray(e))return e.map(ensureConfig);if(t>1&&!Array.isArray(e)&&e.runId){console.warn("Provided runId will be used only for the first element of the batch.");const r=Object.fromEntries(Object.entries(e).filter(([e])=>"runId"!==e));return Array.from({length:t},(t,n)=>ensureConfig(0===n?e:r))}return Array.from({length:t},()=>ensureConfig(e))}async batch(e,t,r){const n=this._getOptionsList(t??{},e.length),o=n[0]?.maxConcurrency??r?.maxConcurrency,i=new AsyncCaller({maxConcurrency:o,onFailedAttempt:e=>{throw e}}),s=e.map((e,t)=>i.call(async()=>{try{return await this.invoke(e,n[t])}catch(o){if(r?.returnExceptions)return o;throw o}}));return Promise.all(s)}async*_streamIterator(e,t){yield this.invoke(e,t)}async stream(e,t){const r=ensureConfig(t),n=new AsyncGeneratorWithSetup({generator:this._streamIterator(e,r),config:r});return await n.setup,IterableReadableStream.fromAsyncGenerator(n)}_separateRunnableConfigFromCallOptions(e){let t;t=ensureConfig(void 0===e?e:{callbacks:e.callbacks,tags:e.tags,metadata:e.metadata,runName:e.runName,configurable:e.configurable,recursionLimit:e.recursionLimit,maxConcurrency:e.maxConcurrency,runId:e.runId,timeout:e.timeout,signal:e.signal});const r={...e};return delete r.callbacks,delete r.tags,delete r.metadata,delete r.runName,delete r.configurable,delete r.recursionLimit,delete r.maxConcurrency,delete r.runId,delete r.timeout,delete r.signal,[t,r]}async _callWithConfig(e,t,r){const n=ensureConfig(r),o=await getCallbackManagerForConfig(n),i=await(o?.handleChainStart(this.toJSON(),_coerceToDict(t,"input"),n.runId,n?.runType,void 0,void 0,n?.runName??this.getName()));let s;delete n.runId;try{const o=e.call(this,t,n,i);s=await raceWithSignal(o,r?.signal)}catch(a){throw await(i?.handleChainError(a)),a}return await(i?.handleChainEnd(_coerceToDict(s,"output"))),s}async _batchWithConfig(e,t,r,n){const o=this._getOptionsList(r??{},t.length),i=await Promise.all(o.map(getCallbackManagerForConfig)),s=await Promise.all(i.map(async(e,r)=>{const n=await(e?.handleChainStart(this.toJSON(),_coerceToDict(t[r],"input"),o[r].runId,o[r].runType,void 0,void 0,o[r].runName??this.getName()));return delete o[r].runId,n}));let a;try{const r=e.call(this,t,o,s,n);a=await raceWithSignal(r,o?.[0]?.signal)}catch(c){throw await Promise.all(s.map(e=>e?.handleChainError(c))),c}return await Promise.all(s.map(e=>e?.handleChainEnd(_coerceToDict(a,"output")))),a}async*_transformStreamWithConfig(e,t,r){let n,o,i=!0,s=!0;const a=ensureConfig(r),c=await getCallbackManagerForConfig(a);let u;try{const l=await pipeGeneratorWithSetup(t.bind(this),async function*(){for await(const t of e){if(i)if(void 0===n)n=t;else try{n=concat(n,t)}catch{n=void 0,i=!1}yield t}}(),async()=>c?.handleChainStart(this.toJSON(),{input:""},a.runId,a.runType,void 0,void 0,a.runName??this.getName()),r?.signal,a);delete a.runId,u=l.setup;const d=u?.handlers.find(isStreamEventsHandler);let h=l.output;void 0!==d&&void 0!==u&&(h=d.tapOutputIterable(u.runId,h));const f=u?.handlers.find(isLogStreamHandler);void 0!==f&&void 0!==u&&(h=f.tapOutputIterable(u.runId,h));for await(const e of h)if(yield e,s)if(void 0===o)o=e;else try{o=concat(o,e)}catch{o=void 0,s=!1}}catch(l){throw await(u?.handleChainError(l,void 0,void 0,void 0,{inputs:_coerceToDict(n,"input")})),l}await(u?.handleChainEnd(o??{},void 0,void 0,void 0,{inputs:_coerceToDict(n,"input")}))}getGraph(e){const t=new Graph,r=t.addNode({name:`${this.getName()}Input`,schema:anyType()}),n=t.addNode(this),o=t.addNode({name:`${this.getName()}Output`,schema:anyType()});return t.addEdge(r,n),t.addEdge(n,o),t}pipe(e){return new RunnableSequence({first:this,last:_coerceToRunnable(e)})}pick(e){return this.pipe(new RunnablePick(e))}assign(e){return this.pipe(new RunnableAssign(new RunnableMap({steps:e})))}async*transform(e,t){let r;for await(const n of e)r=void 0===r?n:concat(r,n);yield*this._streamIterator(r,ensureConfig(t))}async*streamLog(e,t,r){const n=new LogStreamCallbackHandler({...r,autoClose:!1,_schemaFormat:"original"}),o=ensureConfig(t);yield*this._streamLog(e,n,o)}async*_streamLog(e,t,r){const{callbacks:n}=r;if(void 0===n)r.callbacks=[t];else if(Array.isArray(n))r.callbacks=n.concat([t]);else{const e=n.copy();e.addHandler(t,!0),r.callbacks=e}const o=this.stream(e,r);const i=async function(){try{const e=await o;for await(const r of e){const e=new RunLogPatch({ops:[{op:"add",path:"/streamed_output/-",value:r}]});await t.writer.write(e)}}finally{await t.writer.close()}}();try{for await(const e of t)yield e}finally{await i}}streamEvents(e,t,r){let n;if("v1"===t.version)n=this._streamEventsV1(e,t,r);else{if("v2"!==t.version)throw new Error('Only versions "v1" and "v2" of the schema are currently supported.');n=this._streamEventsV2(e,t,r)}return"text/event-stream"===t.encoding?convertToHttpEventStream(n):IterableReadableStream.fromAsyncGenerator(n)}async*_streamEventsV2(e,t,r){const n=new EventStreamCallbackHandler({...r,autoClose:!1}),o=ensureConfig(t),i=o.runId??v4();o.runId=i;const s=o.callbacks;if(void 0===s)o.callbacks=[n];else if(Array.isArray(s))o.callbacks=s.concat(n);else{const e=s.copy();e.addHandler(n,!0),o.callbacks=e}const a=new AbortController,c=this;const u=async function(){try{let r;t?.signal?"any"in AbortSignal?r=AbortSignal.any([a.signal,t.signal]):(r=t.signal,t.signal.addEventListener("abort",()=>{a.abort()},{once:!0})):r=a.signal;const s=await c.stream(e,{...o,signal:r}),u=n.tapOutputIterable(i,s);for await(const e of u)if(a.signal.aborted)break}finally{await n.finish()}}();let l,d=!1;try{for await(const t of n)d?(t.run_id===l&&t.event.endsWith("_end")&&t.data?.input&&delete t.data.input,yield t):(t.data.input=e,d=!0,l=t.run_id,yield t)}finally{a.abort(),await u}}async*_streamEventsV1(e,t,r){let n,o=!1;const i=ensureConfig(t),s=i.tags??[],a=i.metadata??{},c=i.runName??this.getName(),u=new LogStreamCallbackHandler({...r,autoClose:!1,_schemaFormat:"streaming_events"}),l=new _RootEventFilter({...r}),d=this._streamLog(e,u,i);for await(const f of d){if(n=n?n.concat(f):RunLog.fromRunLogPatch(f),void 0===n.state)throw new Error('Internal error: "streamEvents" state is missing. Please open a bug report.');if(!o){o=!0;const t={...n.state},r={run_id:t.id,event:`on_${t.type}_start`,name:c,tags:s,metadata:a,data:{input:e}};l.includeEvent(r,t.type)&&(yield r)}const t=f.ops.filter(e=>e.path.startsWith("/logs/")).map(e=>e.path.split("/")[2]),r=[...new Set(t)];for(const e of r){let t,r={};const o=n.state.logs[e];if(t=void 0===o.end_time?o.streamed_output.length>0?"stream":"start":"end","start"===t)void 0!==o.inputs&&(r.input=o.inputs);else if("end"===t)void 0!==o.inputs&&(r.input=o.inputs),r.output=o.final_output;else if("stream"===t){const e=o.streamed_output.length;if(1!==e)throw new Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${o.name}"`);r={chunk:o.streamed_output[0]},o.streamed_output=[]}yield{event:`on_${o.type}_${t}`,name:o.name,run_id:o.id,tags:o.tags,metadata:o.metadata,data:r}}const{state:i}=n;if(i.streamed_output.length>0){const e=i.streamed_output.length;if(1!==e)throw new Error(`Expected exactly one chunk of streamed output, got ${e} instead. Encountered in: "${i.name}"`);const t={chunk:i.streamed_output[0]};i.streamed_output=[];const r={event:`on_${i.type}_stream`,run_id:i.id,tags:s,metadata:a,name:c,data:t};l.includeEvent(r,i.type)&&(yield r)}}const h=n?.state;if(void 0!==h){const e={event:`on_${h.type}_end`,name:c,run_id:h.id,tags:s,metadata:a,data:{output:h.final_output}};l.includeEvent(e,h.type)&&(yield e)}}static isRunnable(e){return isRunnableInterface(e)}withListeners({onStart:e,onEnd:t,onError:r}){return new RunnableBinding({bound:this,config:{},configFactories:[n=>({callbacks:[new RootListenersTracer({config:n,onStart:e,onEnd:t,onError:r})]})]})}asTool(e){return convertRunnableToTool(this,e)}}class RunnableBinding extends Runnable{static lc_name(){return"RunnableBinding"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"kwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"configFactories",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound,this.kwargs=e.kwargs,this.config=e.config,this.configFactories=e.configFactories}getName(e){return this.bound.getName(e)}async _mergeConfig(...e){const t=mergeConfigs(this.config,...e);return mergeConfigs(t,...this.configFactories?await Promise.all(this.configFactories.map(async e=>await e(t))):[])}bind(e){return new this.constructor({bound:this.bound,kwargs:{...this.kwargs,...e},config:this.config})}withConfig(e){return new this.constructor({bound:this.bound,kwargs:this.kwargs,config:{...this.config,...e}})}withRetry(e){return new RunnableRetry({bound:this.bound,kwargs:this.kwargs,config:this.config,maxAttemptNumber:e?.stopAfterAttempt,...e})}async invoke(e,t){return this.bound.invoke(e,await this._mergeConfig(ensureConfig(t),this.kwargs))}async batch(e,t,r){const n=Array.isArray(t)?await Promise.all(t.map(async e=>this._mergeConfig(ensureConfig(e),this.kwargs))):await this._mergeConfig(ensureConfig(t),this.kwargs);return this.bound.batch(e,n,r)}async*_streamIterator(e,t){yield*this.bound._streamIterator(e,await this._mergeConfig(ensureConfig(t),this.kwargs))}async stream(e,t){return this.bound.stream(e,await this._mergeConfig(ensureConfig(t),this.kwargs))}async*transform(e,t){yield*this.bound.transform(e,await this._mergeConfig(ensureConfig(t),this.kwargs))}streamEvents(e,t,r){const n=this;return IterableReadableStream.fromAsyncGenerator(async function*(){yield*n.bound.streamEvents(e,{...await n._mergeConfig(ensureConfig(t),n.kwargs),version:t.version},r)}())}static isRunnableBinding(e){return e.bound&&Runnable.isRunnable(e.bound)}withListeners({onStart:e,onEnd:t,onError:r}){return new RunnableBinding({bound:this.bound,kwargs:this.kwargs,config:this.config,configFactories:[n=>({callbacks:[new RootListenersTracer({config:n,onStart:e,onEnd:t,onError:r})]})]})}}class RunnableEach extends Runnable{static lc_name(){return"RunnableEach"}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"bound",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.bound=e.bound}bind(e){return new RunnableEach({bound:this.bound.bind(e)})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _invoke(e,t,r){return this.bound.batch(e,patchConfig(t,{callbacks:r?.getChild()}))}withListeners({onStart:e,onEnd:t,onError:r}){return new RunnableEach({bound:this.bound.withListeners({onStart:e,onEnd:t,onError:r})})}}class RunnableRetry extends RunnableBinding{static lc_name(){return"RunnableRetry"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"maxAttemptNumber",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"onFailedAttempt",{enumerable:!0,configurable:!0,writable:!0,value:()=>{}}),this.maxAttemptNumber=e.maxAttemptNumber??this.maxAttemptNumber,this.onFailedAttempt=e.onFailedAttempt??this.onFailedAttempt}_patchConfigForRetry(e,t,r){const n=e>1?`retry:attempt:${e}`:void 0;return patchConfig(t,{callbacks:r?.getChild(n)})}async _invoke(e,t,r){return pRetry(n=>super.invoke(e,this._patchConfigForRetry(n,t,r)),{onFailedAttempt:t=>this.onFailedAttempt(t,e),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async _batch(e,t,r,n){const o={};try{await pRetry(async i=>{const s=e.map((e,t)=>t).filter(e=>void 0===o[e.toString()]||o[e.toString()]instanceof Error),a=s.map(t=>e[t]),c=s.map(e=>this._patchConfigForRetry(i,t?.[e],r?.[e])),u=await super.batch(a,c,{...n,returnExceptions:!0});let l;for(let e=0;e<u.length;e+=1){const t=u[e],r=s[e];t instanceof Error&&void 0===l&&(l=t,l.input=a[e]),o[r.toString()]=t}if(l)throw l;return u},{onFailedAttempt:e=>this.onFailedAttempt(e,e.input),retries:Math.max(this.maxAttemptNumber-1,0),randomize:!0})}catch(i){if(!0!==n?.returnExceptions)throw i}return Object.keys(o).sort((e,t)=>parseInt(e,10)-parseInt(t,10)).map(e=>o[parseInt(e,10)])}async batch(e,t,r){return this._batchWithConfig(this._batch.bind(this),e,t,r)}}class RunnableSequence extends Runnable{static lc_name(){return"RunnableSequence"}constructor(e){super(e),Object.defineProperty(this,"first",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"middle",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"last",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"omitSequenceTags",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),this.first=e.first,this.middle=e.middle??this.middle,this.last=e.last,this.name=e.name,this.omitSequenceTags=e.omitSequenceTags??this.omitSequenceTags}get steps(){return[this.first,...this.middle,this.last]}async invoke(e,t){const r=ensureConfig(t),n=await getCallbackManagerForConfig(r),o=await(n?.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),r.runId,void 0,void 0,void 0,r?.runName));delete r.runId;let i,s=e;try{const e=[this.first,...this.middle];for(let n=0;n<e.length;n+=1){const i=e[n].invoke(s,patchConfig(r,{callbacks:o?.getChild(this.omitSequenceTags?void 0:`seq:step:${n+1}`)}));s=await raceWithSignal(i,t?.signal)}if(t?.signal?.aborted)throw new Error("Aborted");i=await this.last.invoke(s,patchConfig(r,{callbacks:o?.getChild(this.omitSequenceTags?void 0:`seq:step:${this.steps.length}`)}))}catch(a){throw await(o?.handleChainError(a)),a}return await(o?.handleChainEnd(_coerceToDict(i,"output"))),i}async batch(e,t,r){const n=this._getOptionsList(t??{},e.length),o=await Promise.all(n.map(getCallbackManagerForConfig)),i=await Promise.all(o.map(async(t,r)=>{const o=await(t?.handleChainStart(this.toJSON(),_coerceToDict(e[r],"input"),n[r].runId,void 0,void 0,void 0,n[r].runName));return delete n[r].runId,o}));let s=e;try{for(let e=0;e<this.steps.length;e+=1){const t=this.steps[e].batch(s,i.map((t,r)=>{const o=t?.getChild(this.omitSequenceTags?void 0:`seq:step:${e+1}`);return patchConfig(n[r],{callbacks:o})}),r);s=await raceWithSignal(t,n[0]?.signal)}}catch(a){throw await Promise.all(i.map(e=>e?.handleChainError(a))),a}return await Promise.all(i.map(e=>e?.handleChainEnd(_coerceToDict(s,"output")))),s}async*_streamIterator(e,t){const r=await getCallbackManagerForConfig(t),{runId:n,...o}=t??{},i=await(r?.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),n,void 0,void 0,void 0,o?.runName)),s=[this.first,...this.middle,this.last];let a,c=!0;try{let r=s[0].transform(async function*(){yield e}(),patchConfig(o,{callbacks:i?.getChild(this.omitSequenceTags?void 0:"seq:step:1")}));for(let e=1;e<s.length;e+=1){const t=s[e];r=await t.transform(r,patchConfig(o,{callbacks:i?.getChild(this.omitSequenceTags?void 0:`seq:step:${e+1}`)}))}for await(const e of r)if(t?.signal?.throwIfAborted(),yield e,c)if(void 0===a)a=e;else try{a=concat(a,e)}catch(u){a=void 0,c=!1}}catch(u){throw await(i?.handleChainError(u)),u}await(i?.handleChainEnd(_coerceToDict(a,"output")))}getGraph(e){const t=new Graph;let r=null;return this.steps.forEach((n,o)=>{const i=n.getGraph(e);0!==o&&i.trimFirstNode(),o!==this.steps.length-1&&i.trimLastNode(),t.extend(i);const s=i.firstNode();if(!s)throw new Error(`Runnable ${n} has no first node`);r&&t.addEdge(r,s),r=i.lastNode()}),t}pipe(e){return RunnableSequence.isRunnableSequence(e)?new RunnableSequence({first:this.first,middle:this.middle.concat([this.last,e.first,...e.middle]),last:e.last,name:this.name??e.name}):new RunnableSequence({first:this.first,middle:[...this.middle,this.last],last:_coerceToRunnable(e),name:this.name})}static isRunnableSequence(e){return Array.isArray(e.middle)&&Runnable.isRunnable(e)}static from([e,...t],r){let n={};return"string"==typeof r?n.name=r:void 0!==r&&(n=r),new RunnableSequence({...n,first:_coerceToRunnable(e),middle:t.slice(0,-1).map(_coerceToRunnable),last:_coerceToRunnable(t[t.length-1])})}}class RunnableMap extends Runnable{static lc_name(){return"RunnableMap"}getStepsKeys(){return Object.keys(this.steps)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"steps",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.steps={};for(const[t,r]of Object.entries(e.steps))this.steps[t]=_coerceToRunnable(r)}static from(e){return new RunnableMap({steps:e})}async invoke(e,t){const r=ensureConfig(t),n=await getCallbackManagerForConfig(r),o=await(n?.handleChainStart(this.toJSON(),{input:e},r.runId,void 0,void 0,void 0,r?.runName));delete r.runId;const i={};try{const n=Object.entries(this.steps).map(async([t,n])=>{i[t]=await n.invoke(e,patchConfig(r,{callbacks:o?.getChild(`map:key:${t}`)}))});await raceWithSignal(Promise.all(n),t?.signal)}catch(s){throw await(o?.handleChainError(s)),s}return await(o?.handleChainEnd(i)),i}async*_transform(e,t,r){const n={...this.steps},o=atee(e,Object.keys(n).length),i=new Map(Object.entries(n).map(([e,n],i)=>{const s=n.transform(o[i],patchConfig(r,{callbacks:t?.getChild(`map:key:${e}`)}));return[e,s.next().then(t=>({key:e,gen:s,result:t}))]}));for(;i.size;){const e=Promise.race(i.values()),{key:t,result:n,gen:o}=await raceWithSignal(e,r?.signal);i.delete(t),n.done||(yield{[t]:n.value},i.set(t,o.next().then(e=>({key:t,gen:o,result:e}))))}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const r=ensureConfig(t),n=new AsyncGeneratorWithSetup({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,IterableReadableStream.fromAsyncGenerator(n)}}class RunnableTraceable extends Runnable{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),!isTraceableFunction(e.func))throw new Error("RunnableTraceable requires a function that is wrapped in traceable higher-order function");this.func=e.func}async invoke(e,t){const[r]=this._getOptionsList(t??{},1),n=await getCallbackManagerForConfig(r);return raceWithSignal(this.func(patchConfig(r,{callbacks:n}),e),r?.signal)}async*_streamIterator(e,t){const[r]=this._getOptionsList(t??{},1),n=await this.invoke(e,t);if(isAsyncIterable(n))for await(const o of n)r?.signal?.throwIfAborted(),yield o;else if(isIterator(n))for(;;){r?.signal?.throwIfAborted();const e=n.next();if(e.done)break;yield e.value}else yield n}static from(e){return new RunnableTraceable({func:e})}}function assertNonTraceableFunction(e){if(isTraceableFunction(e))throw new Error("RunnableLambda requires a function that is not wrapped in traceable higher-order function. This shouldn't happen.")}class RunnableLambda extends Runnable{static lc_name(){return"RunnableLambda"}constructor(e){if(isTraceableFunction(e.func))return RunnableTraceable.from(e.func);super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),assertNonTraceableFunction(e.func),this.func=e.func}static from(e){return new RunnableLambda({func:e})}async _invoke(e,t,r){return new Promise((n,o)=>{const i=patchConfig(t,{callbacks:r?.getChild(),recursionLimit:(t?.recursionLimit??DEFAULT_RECURSION_LIMIT)-1});AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(i),async()=>{try{let o=await this.func(e,{...i});if(o&&Runnable.isRunnable(o)){if(0===t?.recursionLimit)throw new Error("Recursion limit reached.");o=await o.invoke(e,{...i,recursionLimit:(i.recursionLimit??DEFAULT_RECURSION_LIMIT)-1})}else if(isAsyncIterable(o)){let e;for await(const n of consumeAsyncIterableInContext(i,o))if(t?.signal?.throwIfAborted(),void 0===e)e=n;else try{e=concat(e,n)}catch(r){e=n}o=e}else if(isIterableIterator(o)){let e;for(const n of consumeIteratorInContext(i,o))if(t?.signal?.throwIfAborted(),void 0===e)e=n;else try{e=concat(e,n)}catch(r){e=n}o=e}n(o)}catch(r){o(r)}})})}async invoke(e,t){return this._callWithConfig(this._invoke.bind(this),e,t)}async*_transform(e,t,r){let n;for await(const a of e)if(void 0===n)n=a;else try{n=concat(n,a)}catch(s){n=a}const o=patchConfig(r,{callbacks:t?.getChild(),recursionLimit:(r?.recursionLimit??DEFAULT_RECURSION_LIMIT)-1}),i=await new Promise((e,t)=>{AsyncLocalStorageProviderSingleton.runWithConfig(pickRunnableConfigKeys(o),async()=>{try{const t=await this.func(n,{...o,config:o});e(t)}catch(s){t(s)}})});if(i&&Runnable.isRunnable(i)){if(0===r?.recursionLimit)throw new Error("Recursion limit reached.");const e=await i.stream(n,o);for await(const t of e)yield t}else if(isAsyncIterable(i))for await(const a of consumeAsyncIterableInContext(o,i))r?.signal?.throwIfAborted(),yield a;else if(isIterableIterator(i))for(const a of consumeIteratorInContext(o,i))r?.signal?.throwIfAborted(),yield a;else yield i}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const r=ensureConfig(t),n=new AsyncGeneratorWithSetup({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,IterableReadableStream.fromAsyncGenerator(n)}}class RunnableWithFallbacks extends Runnable{static lc_name(){return"RunnableWithFallbacks"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fallbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.runnable=e.runnable,this.fallbacks=e.fallbacks}*runnables(){yield this.runnable;for(const e of this.fallbacks)yield e}async invoke(e,t){const r=ensureConfig(t),n=await getCallbackManagerForConfig(r),{runId:o,...i}=r,s=await(n?.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),o,void 0,void 0,void 0,i?.runName)),a=patchConfig(i,{callbacks:s?.getChild()});return await AsyncLocalStorageProviderSingleton.runWithConfig(a,async()=>{let t;for(const o of this.runnables()){r?.signal?.throwIfAborted();try{const t=await o.invoke(e,a);return await(s?.handleChainEnd(_coerceToDict(t,"output"))),t}catch(n){void 0===t&&(t=n)}}if(void 0===t)throw new Error("No error stored at end of fallback.");throw await(s?.handleChainError(t)),t})}async*_streamIterator(e,t){const r=ensureConfig(t),n=await getCallbackManagerForConfig(r),{runId:o,...i}=r,s=await(n?.handleChainStart(this.toJSON(),_coerceToDict(e,"input"),o,void 0,void 0,void 0,i?.runName));let a,c,u;for(const d of this.runnables()){r?.signal?.throwIfAborted();const t=patchConfig(i,{callbacks:s?.getChild()});try{c=consumeAsyncIterableInContext(t,await d.stream(e,t));break}catch(l){void 0===a&&(a=l)}}if(void 0===c){const e=a??new Error("No error stored at end of fallback.");throw await(s?.handleChainError(e)),e}try{for await(const e of c){yield e;try{u=void 0===u?u:concat(u,e)}catch(l){u=void 0}}}catch(l){throw await(s?.handleChainError(l)),l}await(s?.handleChainEnd(_coerceToDict(u,"output")))}async batch(e,t,r){if(r?.returnExceptions)throw new Error("Not implemented.");const n=this._getOptionsList(t??{},e.length),o=await Promise.all(n.map(e=>getCallbackManagerForConfig(e))),i=await Promise.all(o.map(async(t,r)=>{const o=await(t?.handleChainStart(this.toJSON(),_coerceToDict(e[r],"input"),n[r].runId,void 0,void 0,void 0,n[r].runName));return delete n[r].runId,o}));let s;for(const c of this.runnables()){n[0].signal?.throwIfAborted();try{const t=await c.batch(e,i.map((e,t)=>patchConfig(n[t],{callbacks:e?.getChild()})),r);return await Promise.all(i.map((e,r)=>e?.handleChainEnd(_coerceToDict(t[r],"output")))),t}catch(a){void 0===s&&(s=a)}}if(!s)throw new Error("No error stored at end of fallbacks.");throw await Promise.all(i.map(e=>e?.handleChainError(s))),s}}function _coerceToRunnable(e){if("function"==typeof e)return new RunnableLambda({func:e});if(Runnable.isRunnable(e))return e;if(Array.isArray(e)||"object"!=typeof e)throw new Error("Expected a Runnable, function or object.\nInstead got an unsupported type.");{const t={};for(const[r,n]of Object.entries(e))t[r]=_coerceToRunnable(n);return new RunnableMap({steps:t})}}class RunnableAssign extends Runnable{static lc_name(){return"RunnableAssign"}constructor(e){e instanceof RunnableMap&&(e={mapper:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"mapper",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.mapper=e.mapper}async invoke(e,t){const r=await this.mapper.invoke(e,t);return{...e,...r}}async*_transform(e,t,r){const n=this.mapper.getStepsKeys(),[o,i]=atee(e),s=this.mapper.transform(i,patchConfig(r,{callbacks:t?.getChild()})),a=s.next();for await(const c of o){if("object"!=typeof c||Array.isArray(c))throw new Error("RunnableAssign can only be used with objects as input, got "+typeof c);const e=Object.fromEntries(Object.entries(c).filter(([e])=>!n.includes(e)));Object.keys(e).length>0&&(yield e)}yield(await a).value;for await(const c of s)yield c}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const r=ensureConfig(t),n=new AsyncGeneratorWithSetup({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,IterableReadableStream.fromAsyncGenerator(n)}}class RunnablePick extends Runnable{static lc_name(){return"RunnablePick"}constructor(e){("string"==typeof e||Array.isArray(e))&&(e={keys:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"keys",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keys=e.keys}async _pick(e){if("string"==typeof this.keys)return e[this.keys];{const t=this.keys.map(t=>[t,e[t]]).filter(e=>void 0!==e[1]);return 0===t.length?void 0:Object.fromEntries(t)}}async invoke(e,t){return this._callWithConfig(this._pick.bind(this),e,t)}async*_transform(e){for await(const t of e){const e=await this._pick(t);void 0!==e&&(yield e)}}transform(e,t){return this._transformStreamWithConfig(e,this._transform.bind(this),t)}async stream(e,t){const r=ensureConfig(t),n=new AsyncGeneratorWithSetup({generator:this.transform(async function*(){yield e}(),r),config:r});return await n.setup,IterableReadableStream.fromAsyncGenerator(n)}}class RunnableToolLike extends RunnableBinding{constructor(e){super({bound:RunnableSequence.from([RunnableLambda.from(async e=>{let t;if(_isToolCall(e))try{t=await interopParseAsync(this.schema,e.args)}catch(r){throw new ToolInputParsingException("Received tool input did not match expected schema",JSON.stringify(e.args))}else t=e;return t}).withConfig({runName:`${e.name}:parse_input`}),e.bound]).withConfig({runName:e.name}),config:e.config??{}}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e.name,this.description=e.description,this.schema=e.schema}static lc_name(){return"RunnableToolLike"}}function convertRunnableToTool(e,t){const r=t.name??e.getName(),n=t.description??getSchemaDescription(t.schema);return isSimpleStringZodSchema(t.schema)?new RunnableToolLike({name:r,description:n,schema:objectType({input:stringType()}).transform(e=>e.input),bound:e}):new RunnableToolLike({name:r,description:n,schema:t.schema,bound:e})}
/*
   * [js-sha1]{@link https://github.com/emn178/js-sha1}
   *
   * @version 0.6.0
   * @author Chen, Yi-Cyuan [emn178@gmail.com]
   * @copyright Chen, Yi-Cyuan 2014-2017
   * @license MIT
   */var root="object"==typeof window?window:{},HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],blocks=[];function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}Sha1.prototype.update=function(e){if(!this.finalized){var t="string"!=typeof e;t&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var r,n,o=0,i=e.length||0,s=this.blocks;o<i;){if(this.hashed&&(this.hashed=!1,s[0]=this.block,s[16]=s[1]=s[2]=s[3]=s[4]=s[5]=s[6]=s[7]=s[8]=s[9]=s[10]=s[11]=s[12]=s[13]=s[14]=s[15]=0),t)for(n=this.start;o<i&&n<64;++o)s[n>>2]|=e[o]<<SHIFT[3&n++];else for(n=this.start;o<i&&n<64;++o)(r=e.charCodeAt(o))<128?s[n>>2]|=r<<SHIFT[3&n++]:r<2048?(s[n>>2]|=(192|r>>6)<<SHIFT[3&n++],s[n>>2]|=(128|63&r)<<SHIFT[3&n++]):r<55296||r>=57344?(s[n>>2]|=(224|r>>12)<<SHIFT[3&n++],s[n>>2]|=(128|r>>6&63)<<SHIFT[3&n++],s[n>>2]|=(128|63&r)<<SHIFT[3&n++]):(r=65536+((1023&r)<<10|1023&e.charCodeAt(++o)),s[n>>2]|=(240|r>>18)<<SHIFT[3&n++],s[n>>2]|=(128|r>>12&63)<<SHIFT[3&n++],s[n>>2]|=(128|r>>6&63)<<SHIFT[3&n++],s[n>>2]|=(128|63&r)<<SHIFT[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=s[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex;e[16]=this.block,e[t>>2]|=EXTRA[3&t],this.block=e[16],t>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,t,r=this.h0,n=this.h1,o=this.h2,i=this.h3,s=this.h4,a=this.blocks;for(e=16;e<80;++e)t=a[e-3]^a[e-8]^a[e-14]^a[e-16],a[e]=t<<1|t>>>31;for(e=0;e<20;e+=5)r=(t=(n=(t=(o=(t=(i=(t=(s=(t=r<<5|r>>>27)+(n&o|~n&i)+s+1518500249+a[e]|0)<<5|s>>>27)+(r&(n=n<<30|n>>>2)|~r&o)+i+1518500249+a[e+1]|0)<<5|i>>>27)+(s&(r=r<<30|r>>>2)|~s&n)+o+1518500249+a[e+2]|0)<<5|o>>>27)+(i&(s=s<<30|s>>>2)|~i&r)+n+1518500249+a[e+3]|0)<<5|n>>>27)+(o&(i=i<<30|i>>>2)|~o&s)+r+1518500249+a[e+4]|0,o=o<<30|o>>>2;for(;e<40;e+=5)r=(t=(n=(t=(o=(t=(i=(t=(s=(t=r<<5|r>>>27)+(n^o^i)+s+1859775393+a[e]|0)<<5|s>>>27)+(r^(n=n<<30|n>>>2)^o)+i+1859775393+a[e+1]|0)<<5|i>>>27)+(s^(r=r<<30|r>>>2)^n)+o+1859775393+a[e+2]|0)<<5|o>>>27)+(i^(s=s<<30|s>>>2)^r)+n+1859775393+a[e+3]|0)<<5|n>>>27)+(o^(i=i<<30|i>>>2)^s)+r+1859775393+a[e+4]|0,o=o<<30|o>>>2;for(;e<60;e+=5)r=(t=(n=(t=(o=(t=(i=(t=(s=(t=r<<5|r>>>27)+(n&o|n&i|o&i)+s-1894007588+a[e]|0)<<5|s>>>27)+(r&(n=n<<30|n>>>2)|r&o|n&o)+i-1894007588+a[e+1]|0)<<5|i>>>27)+(s&(r=r<<30|r>>>2)|s&n|r&n)+o-1894007588+a[e+2]|0)<<5|o>>>27)+(i&(s=s<<30|s>>>2)|i&r|s&r)+n-1894007588+a[e+3]|0)<<5|n>>>27)+(o&(i=i<<30|i>>>2)|o&s|i&s)+r-1894007588+a[e+4]|0,o=o<<30|o>>>2;for(;e<80;e+=5)r=(t=(n=(t=(o=(t=(i=(t=(s=(t=r<<5|r>>>27)+(n^o^i)+s-899497514+a[e]|0)<<5|s>>>27)+(r^(n=n<<30|n>>>2)^o)+i-899497514+a[e+1]|0)<<5|i>>>27)+(s^(r=r<<30|r>>>2)^n)+o-899497514+a[e+2]|0)<<5|o>>>27)+(i^(s=s<<30|s>>>2)^r)+n-899497514+a[e+3]|0)<<5|n>>>27)+(o^(i=i<<30|i>>>2)^s)+r-899497514+a[e+4]|0,o=o<<30|o>>>2;this.h0=this.h0+r|0,this.h1=this.h1+n|0,this.h2=this.h2+o|0,this.h3=this.h3+i|0,this.h4=this.h4+s|0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,o=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[n>>28&15]+HEX_CHARS[n>>24&15]+HEX_CHARS[n>>20&15]+HEX_CHARS[n>>16&15]+HEX_CHARS[n>>12&15]+HEX_CHARS[n>>8&15]+HEX_CHARS[n>>4&15]+HEX_CHARS[15&n]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,t=this.h1,r=this.h2,n=this.h3,o=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24&255,r>>16&255,r>>8&255,255&r,n>>24&255,n>>16&255,n>>8&255,255&n,o>>24&255,o>>16&255,o>>8&255,255&o]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),t=new DataView(e);return t.setUint32(0,this.h0),t.setUint32(4,this.h1),t.setUint32(8,this.h2),t.setUint32(12,this.h3),t.setUint32(16,this.h4),e};let hasLoggedWarning=!1;const insecureHash=e=>(hasLoggedWarning||(console.warn(["The default method for hashing keys is insecure and will be replaced in a future version,","but hasn't been replaced yet as to not break existing caches. It's recommended that you use","a more secure hashing algorithm to avoid cache poisoning.","","See this page for more information:","|","└> https://js.langchain.com/docs/troubleshooting/warnings/insecure-cache-algorithm"].join("\n")),hasLoggedWarning=!0),new Sha1(!0).update(e).hex()),getCacheKey=(...e)=>insecureHash(e.join("_"));class BaseCache{constructor(){Object.defineProperty(this,"keyEncoder",{enumerable:!0,configurable:!0,writable:!0,value:getCacheKey})}makeDefaultKeyEncoder(e){this.keyEncoder=e}}const GLOBAL_MAP=new Map;class InMemoryCache extends BaseCache{constructor(e){super(),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache=e??new Map}lookup(e,t){return Promise.resolve(this.cache.get(this.keyEncoder(e,t))??null)}async update(e,t,r){this.cache.set(this.keyEncoder(e,t),r)}static global(){return new InMemoryCache(GLOBAL_MAP)}}class BasePromptValue extends Serializable{}class StringPromptValue extends BasePromptValue{static lc_name(){return"StringPromptValue"}constructor(e){super({value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.value=e}toString(){return this.value}toChatMessages(){return[new HumanMessage(this.value)]}}class ChatPromptValue extends BasePromptValue{static lc_name(){return"ChatPromptValue"}constructor(e){Array.isArray(e)&&(e={messages:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"messages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.messages=e.messages}toString(){return getBufferString(this.messages)}toChatMessages(){return this.messages}}class ImagePromptValue extends BasePromptValue{static lc_name(){return"ImagePromptValue"}constructor(e){"imageUrl"in e||(e={imageUrl:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompt_values"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"imageUrl",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.imageUrl=e.imageUrl}toString(){return this.imageUrl.url}toChatMessages(){return[new HumanMessage({content:[{type:"image_url",image_url:{detail:this.imageUrl.detail,url:this.imageUrl.url}}]})]}}var base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=function(e){var t=i(e),r=t[0],n=t[1];return 3*(r+n)/4-n},base64Js.toByteArray=function(e){var n,o,s=i(e),a=s[0],c=s[1],u=new r(function(e,t,r){return 3*(t+r)/4-r}(0,a,c)),l=0,d=c>0?a-4:a;for(o=0;o<d;o+=4)n=t[e.charCodeAt(o)]<<18|t[e.charCodeAt(o+1)]<<12|t[e.charCodeAt(o+2)]<<6|t[e.charCodeAt(o+3)],u[l++]=n>>16&255,u[l++]=n>>8&255,u[l++]=255&n;2===c&&(n=t[e.charCodeAt(o)]<<2|t[e.charCodeAt(o+1)]>>4,u[l++]=255&n);1===c&&(n=t[e.charCodeAt(o)]<<10|t[e.charCodeAt(o+1)]<<4|t[e.charCodeAt(o+2)]>>2,u[l++]=n>>8&255,u[l++]=255&n);return u},base64Js.fromByteArray=function(t){for(var r,n=t.length,o=n%3,i=[],s=16383,c=0,u=n-o;c<u;c+=s)i.push(a(t,c,c+s>u?u:c+s));1===o?(r=t[n-1],i.push(e[r>>2]+e[r<<4&63]+"==")):2===o&&(r=(t[n-2]<<8)+t[n-1],i.push(e[r>>10]+e[r>>4&63]+e[r<<2&63]+"="));return i.join("")};for(var e=[],t=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)e[o]=n[o],t[n.charCodeAt(o)]=o;function i(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function s(t){return e[t>>18&63]+e[t>>12&63]+e[t>>6&63]+e[63&t]}function a(e,t,r){for(var n,o=[],i=t;i<r;i+=3)n=(e[i]<<16&16711680)+(e[i+1]<<8&65280)+(255&e[i+2]),o.push(s(n));return o.join("")}return t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63,base64Js}var base64JsExports=requireBase64Js();const base64=getDefaultExportFromCjs(base64JsExports);var __defProp=Object.defineProperty,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__publicField=(e,t,r)=>(__defNormalProp(e,t+"",r),r);function bytePairMerge(e,t){let r=Array.from({length:e.length},(e,t)=>({start:t,end:t+1}));for(;r.length>1;){let n=null;for(let o=0;o<r.length-1;o++){const i=e.slice(r[o].start,r[o+1].end),s=t.get(i.join(","));null!=s&&((null==n||s<n[0])&&(n=[s,o]))}if(null==n)break;{const e=n[1];r[e]={start:r[e].start,end:r[e+1].end},r.splice(e+1,1)}}return r}function bytePairEncode(e,t){return 1===e.length?[t.get(e.join(","))]:bytePairMerge(e,t).map(r=>t.get(e.slice(r.start,r.end).join(","))).filter(e=>null!=e)}function escapeRegex(e){return e.replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}var _Tiktoken=class{constructor(e,t){__publicField2(this,"specialTokens"),__publicField2(this,"inverseSpecialTokens"),__publicField2(this,"patStr"),__publicField2(this,"textEncoder",new TextEncoder),__publicField2(this,"textDecoder",new TextDecoder("utf-8")),__publicField2(this,"rankMap",new Map),__publicField2(this,"textMap",new Map),this.patStr=e.pat_str;const r=e.bpe_ranks.split("\n").filter(Boolean).reduce((e,t)=>{const[r,n,...o]=t.split(" "),i=Number.parseInt(n,10);return o.forEach((t,r)=>e[t]=i+r),e},{});for(const[n,o]of Object.entries(r)){const e=base64.toByteArray(n);this.rankMap.set(e.join(","),o),this.textMap.set(o,e)}this.specialTokens={...e.special_tokens,...t},this.inverseSpecialTokens=Object.entries(this.specialTokens).reduce((e,[t,r])=>(e[r]=this.textEncoder.encode(t),e),{})}encode(e,t=[],r="all"){const n=new RegExp(this.patStr,"ug"),o=_Tiktoken.specialTokenRegex(Object.keys(this.specialTokens)),i=[],s=new Set("all"===t?Object.keys(this.specialTokens):t),a=new Set("all"===r?Object.keys(this.specialTokens).filter(e=>!s.has(e)):r);if(a.size>0){const t=_Tiktoken.specialTokenRegex([...a]),r=e.match(t);if(null!=r)throw new Error(`The text contains a special token that is not allowed: ${r[0]}`)}let c=0;for(;;){let t=null,r=c;for(;o.lastIndex=r,t=o.exec(e),null!=t&&!s.has(t[0]);)r=t.index+1;const a=t?.index??e.length;for(const o of e.substring(c,a).matchAll(n)){const e=this.textEncoder.encode(o[0]),t=this.rankMap.get(e.join(","));null==t?i.push(...bytePairEncode(e,this.rankMap)):i.push(t)}if(null==t)break;let u=this.specialTokens[t[0]];i.push(u),c=t.index+t[0].length}return i}decode(e){const t=[];let r=0;for(let i=0;i<e.length;++i){const n=e[i],o=this.textMap.get(n)??this.inverseSpecialTokens[n];null!=o&&(t.push(o),r+=o.length)}const n=new Uint8Array(r);let o=0;for(const i of t)n.set(i,o),o+=i.length;return this.textDecoder.decode(n)}},Tiktoken=_Tiktoken;function getEncodingNameForModel(e){switch(e){case"gpt2":return"gpt2";case"code-cushman-001":case"code-cushman-002":case"code-davinci-001":case"code-davinci-002":case"cushman-codex":case"davinci-codex":case"davinci-002":case"text-davinci-002":case"text-davinci-003":return"p50k_base";case"code-davinci-edit-001":case"text-davinci-edit-001":return"p50k_edit";case"ada":case"babbage":case"babbage-002":case"code-search-ada-code-001":case"code-search-babbage-code-001":case"curie":case"davinci":case"text-ada-001":case"text-babbage-001":case"text-curie-001":case"text-davinci-001":case"text-search-ada-doc-001":case"text-search-babbage-doc-001":case"text-search-curie-doc-001":case"text-search-davinci-doc-001":case"text-similarity-ada-001":case"text-similarity-babbage-001":case"text-similarity-curie-001":case"text-similarity-davinci-001":return"r50k_base";case"gpt-3.5-turbo-instruct-0914":case"gpt-3.5-turbo-instruct":case"gpt-3.5-turbo-16k-0613":case"gpt-3.5-turbo-16k":case"gpt-3.5-turbo-0613":case"gpt-3.5-turbo-0301":case"gpt-3.5-turbo":case"gpt-4-32k-0613":case"gpt-4-32k-0314":case"gpt-4-32k":case"gpt-4-0613":case"gpt-4-0314":case"gpt-4":case"gpt-3.5-turbo-1106":case"gpt-35-turbo":case"gpt-4-1106-preview":case"gpt-4-vision-preview":case"gpt-3.5-turbo-0125":case"gpt-4-turbo":case"gpt-4-turbo-2024-04-09":case"gpt-4-turbo-preview":case"gpt-4-0125-preview":case"text-embedding-ada-002":case"text-embedding-3-small":case"text-embedding-3-large":return"cl100k_base";case"gpt-4o":case"gpt-4o-2024-05-13":case"gpt-4o-2024-08-06":case"gpt-4o-2024-11-20":case"gpt-4o-mini-2024-07-18":case"gpt-4o-mini":case"gpt-4o-search-preview":case"gpt-4o-search-preview-2025-03-11":case"gpt-4o-mini-search-preview":case"gpt-4o-mini-search-preview-2025-03-11":case"gpt-4o-audio-preview":case"gpt-4o-audio-preview-2024-12-17":case"gpt-4o-audio-preview-2024-10-01":case"gpt-4o-mini-audio-preview":case"gpt-4o-mini-audio-preview-2024-12-17":case"o1":case"o1-2024-12-17":case"o1-mini":case"o1-mini-2024-09-12":case"o1-preview":case"o1-preview-2024-09-12":case"o1-pro":case"o1-pro-2025-03-19":case"o3":case"o3-2025-04-16":case"o3-mini":case"o3-mini-2025-01-31":case"o4-mini":case"o4-mini-2025-04-16":case"chatgpt-4o-latest":case"gpt-4o-realtime":case"gpt-4o-realtime-preview-2024-10-01":case"gpt-4o-realtime-preview-2024-12-17":case"gpt-4o-mini-realtime-preview":case"gpt-4o-mini-realtime-preview-2024-12-17":case"gpt-4.1":case"gpt-4.1-2025-04-14":case"gpt-4.1-mini":case"gpt-4.1-mini-2025-04-14":case"gpt-4.1-nano":case"gpt-4.1-nano-2025-04-14":case"gpt-4.5-preview":case"gpt-4.5-preview-2025-02-27":return"o200k_base";default:throw new Error("Unknown model")}}__publicField(Tiktoken,"specialTokenRegex",e=>new RegExp(e.map(e=>escapeRegex(e)).join("|"),"g"));const cache={},caller=new AsyncCaller({});async function getEncoding(e){return e in cache||(cache[e]=caller.fetch(`https://tiktoken.pages.dev/js/${e}.json`).then(e=>e.json()).then(e=>new Tiktoken(e)).catch(t=>{throw delete cache[e],t})),await cache[e]}async function encodingForModel(e){return getEncoding(getEncodingNameForModel(e))}const getModelNameForTiktoken=e=>e.startsWith("gpt-3.5-turbo-16k")?"gpt-3.5-turbo-16k":e.startsWith("gpt-3.5-turbo-")?"gpt-3.5-turbo":e.startsWith("gpt-4-32k")?"gpt-4-32k":e.startsWith("gpt-4-")?"gpt-4":e.startsWith("gpt-4o")?"gpt-4o":e;function isOpenAITool(e){return!("object"!=typeof e||!e)&&!!("type"in e&&"function"===e.type&&"function"in e&&"object"==typeof e.function&&e.function&&"name"in e.function&&"parameters"in e.function)}const getVerbosity=()=>!1;class BaseLangChain extends Runnable{get lc_attributes(){return{callbacks:void 0,verbose:void 0}}constructor(e){super(e),Object.defineProperty(this,"verbose",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.verbose=e.verbose??getVerbosity(),this.callbacks=e.callbacks,this.tags=e.tags??[],this.metadata=e.metadata??{}}}class BaseLanguageModel extends BaseLangChain{get callKeys(){return["stop","timeout","signal","tags","metadata","callbacks"]}constructor({callbacks:e,callbackManager:t,...r}){const{cache:n,...o}=r;super({callbacks:e??t,...o}),Object.defineProperty(this,"caller",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_encoding",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cache="object"==typeof n?n:n?InMemoryCache.global():void 0,this.caller=new AsyncCaller(r??{})}async getNumTokens(e){let t;t="string"==typeof e?e:e.map(e=>"string"==typeof e?e:"text"===e.type&&"text"in e?e.text:"").join("");let r=Math.ceil(t.length/4);if(!this._encoding)try{this._encoding=await encodingForModel("modelName"in this?getModelNameForTiktoken(this.modelName):"gpt2")}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}if(this._encoding)try{r=this._encoding.encode(t).length}catch(n){console.warn("Failed to calculate number of tokens, falling back to approximate count",n)}return r}static _convertInputToPromptValue(e){return"string"==typeof e?new StringPromptValue(e):Array.isArray(e)?new ChatPromptValue(e.map(coerceMessageLikeToMessage)):e}_identifyingParams(){return{}}_getSerializedCacheKeyParametersForCall({config:e,...t}){const r={...this._identifyingParams(),...t,_type:this._llmType(),_model:this._modelType()};return Object.entries(r).filter(([e,t])=>void 0!==t).map(([e,t])=>`${e}:${JSON.stringify(t)}`).sort().join(",")}serialize(){return{...this._identifyingParams(),_type:this._llmType(),_model:this._modelType()}}static async deserialize(e){throw new Error("Use .toJSON() instead")}}class RunnablePassthrough extends Runnable{static lc_name(){return"RunnablePassthrough"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","runnables"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"func",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),e&&(this.func=e.func)}async invoke(e,t){const r=ensureConfig(t);return this.func&&await this.func(e,r),this._callWithConfig(e=>Promise.resolve(e),e,r)}async*transform(e,t){const r=ensureConfig(t);let n,o=!0;for await(const i of this._transformStreamWithConfig(e,e=>e,r))if(yield i,o)if(void 0===n)n=i;else try{n=concat(n,i)}catch{n=void 0,o=!1}this.func&&void 0!==n&&await this.func(n,r)}static assign(e){return new RunnableAssign(new RunnableMap({steps:e}))}}function _formatForTracing(e){const t=[];for(const r of e){let e=r;if(Array.isArray(r.content))for(let t=0;t<r.content.length;t++){const n=r.content[t];(isURLContentBlock(n)||isBase64ContentBlock(n))&&e===r&&(e=new r.constructor({...e,content:[...r.content.slice(0,t),convertToOpenAIImageBlock(n),...r.content.slice(t+1)]}))}t.push(e)}return t}class BaseChatModel extends BaseLanguageModel{constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","chat_models",this._llmType()]}),Object.defineProperty(this,"disableStreaming",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_separateRunnableConfigFromCallOptionsCompat(e){const[t,r]=super._separateRunnableConfigFromCallOptions(e);return r.signal=t.signal,[t,r]}async invoke(e,t){const r=BaseChatModel._convertInputToPromptValue(e);return(await this.generatePrompt([r],t,t?.callbacks)).generations[0][0].message}async*_streamResponseChunks(e,t,r){throw new Error("Not implemented.")}async*_streamIterator(e,t){if(this._streamResponseChunks===BaseChatModel.prototype._streamResponseChunks||this.disableStreaming)yield this.invoke(e,t);else{const n=BaseChatModel._convertInputToPromptValue(e).toChatMessages(),[o,i]=this._separateRunnableConfigFromCallOptionsCompat(t),s={...o.metadata,...this.getLsParams(i)},a=await CallbackManager.configure(o.callbacks,this.callbacks,o.tags,this.tags,s,this.metadata,{verbose:this.verbose}),c={options:i,invocation_params:this?.invocationParams(i),batch_size:1},u=await(a?.handleChatModelStart(this.toJSON(),[_formatForTracing(n)],o.runId,void 0,c,void 0,void 0,o.runName));let l,d;try{for await(const e of this._streamResponseChunks(n,i,u?.[0])){if(null==e.message.id){const t=u?.at(0)?.runId;null!=t&&e.message._updateId(`run-${t}`)}e.message.response_metadata={...e.generationInfo,...e.message.response_metadata},yield e.message,l=l?l.concat(e):e,isAIMessageChunk(e.message)&&void 0!==e.message.usage_metadata&&(d={tokenUsage:{promptTokens:e.message.usage_metadata.input_tokens,completionTokens:e.message.usage_metadata.output_tokens,totalTokens:e.message.usage_metadata.total_tokens}})}}catch(r){throw await Promise.all((u??[]).map(e=>e?.handleLLMError(r))),r}await Promise.all((u??[]).map(e=>e?.handleLLMEnd({generations:[[l]],llmOutput:d})))}}getLsParams(e){const t=this.getName().startsWith("Chat")?this.getName().replace("Chat",""):this.getName();return{ls_model_type:"chat",ls_stop:e.stop,ls_provider:t}}async _generateUncached(e,t,r,n){const o=e.map(e=>e.map(coerceMessageLikeToMessage));let i;if(void 0!==n&&n.length===o.length)i=n;else{const e={...r.metadata,...this.getLsParams(t)},n=await CallbackManager.configure(r.callbacks,this.callbacks,r.tags,this.tags,e,this.metadata,{verbose:this.verbose}),s={options:t,invocation_params:this?.invocationParams(t),batch_size:1};i=await(n?.handleChatModelStart(this.toJSON(),o.map(_formatForTracing),r.runId,void 0,s,void 0,void 0,r.runName))}const s=[],a=[];if(!!i?.[0].handlers.find(callbackHandlerPrefersStreaming)&&!this.disableStreaming&&1===o.length&&this._streamResponseChunks!==BaseChatModel.prototype._streamResponseChunks)try{const e=await this._streamResponseChunks(o[0],t,i?.[0]);let r,n;for await(const t of e){if(null==t.message.id){const e=i?.at(0)?.runId;null!=e&&t.message._updateId(`run-${e}`)}r=void 0===r?t:concat(r,t),isAIMessageChunk(t.message)&&void 0!==t.message.usage_metadata&&(n={tokenUsage:{promptTokens:t.message.usage_metadata.input_tokens,completionTokens:t.message.usage_metadata.output_tokens,totalTokens:t.message.usage_metadata.total_tokens}})}if(void 0===r)throw new Error("Received empty response from chat model call.");s.push([r]),await(i?.[0].handleLLMEnd({generations:s,llmOutput:n}))}catch(u){throw await(i?.[0].handleLLMError(u)),u}else{const e=await Promise.allSettled(o.map((e,r)=>this._generate(e,{...t,promptIndex:r},i?.[r])));await Promise.all(e.map(async(e,t)=>{if("fulfilled"===e.status){const r=e.value;for(const e of r.generations){if(null==e.message.id){const t=i?.at(0)?.runId;null!=t&&e.message._updateId(`run-${t}`)}e.message.response_metadata={...e.generationInfo,...e.message.response_metadata}}return 1===r.generations.length&&(r.generations[0].message.response_metadata={...r.llmOutput,...r.generations[0].message.response_metadata}),s[t]=r.generations,a[t]=r.llmOutput,i?.[t]?.handleLLMEnd({generations:[r.generations],llmOutput:r.llmOutput})}return await(i?.[t]?.handleLLMError(e.reason)),Promise.reject(e.reason)}))}const c={generations:s,llmOutput:a.length?this._combineLLMOutput?.(...a):void 0};return Object.defineProperty(c,RUN_KEY,{value:i?{runIds:i?.map(e=>e.runId)}:void 0,configurable:!0}),c}async _generateCached({messages:e,cache:t,llmStringKey:r,parsedOptions:n,handledOptions:o}){const i=e.map(e=>e.map(coerceMessageLikeToMessage)),s={...o.metadata,...this.getLsParams(n)},a=await CallbackManager.configure(o.callbacks,this.callbacks,o.tags,this.tags,s,this.metadata,{verbose:this.verbose}),c={options:n,invocation_params:this?.invocationParams(n),batch_size:1},u=await(a?.handleChatModelStart(this.toJSON(),i.map(_formatForTracing),o.runId,void 0,c,void 0,void 0,o.runName)),l=[],d=(await Promise.allSettled(i.map(async(e,n)=>{const o=BaseChatModel._convertInputToPromptValue(e).toString(),i=await t.lookup(o,r);return null==i&&l.push(n),i}))).map((e,t)=>({result:e,runManager:u?.[t]})).filter(({result:e})=>"fulfilled"===e.status&&null!=e.value||"rejected"===e.status),h=[];await Promise.all(d.map(async({result:e,runManager:t},r)=>{if("fulfilled"===e.status){const n=e.value;return h[r]=n.map(e=>("message"in e&&isBaseMessage(e.message)&&isAIMessage(e.message)&&(e.message.usage_metadata={input_tokens:0,output_tokens:0,total_tokens:0}),e.generationInfo={...e.generationInfo,tokenUsage:{}},e)),n.length&&await(t?.handleLLMNewToken(n[0].text)),t?.handleLLMEnd({generations:[n]},void 0,void 0,void 0,{cached:!0})}return await(t?.handleLLMError(e.reason,void 0,void 0,void 0,{cached:!0})),Promise.reject(e.reason)}));const f={generations:h,missingPromptIndices:l,startedRunManagers:u};return Object.defineProperty(f,RUN_KEY,{value:u?{runIds:u?.map(e=>e.runId)}:void 0,configurable:!0}),f}async generate(e,t,r){let n;n=Array.isArray(t)?{stop:t}:t;const o=e.map(e=>e.map(coerceMessageLikeToMessage)),[i,s]=this._separateRunnableConfigFromCallOptionsCompat(n);if(i.callbacks=i.callbacks??r,!this.cache)return this._generateUncached(o,s,i);const{cache:a}=this,c=this._getSerializedCacheKeyParametersForCall(s),{generations:u,missingPromptIndices:l,startedRunManagers:d}=await this._generateCached({messages:o,cache:a,llmStringKey:c,parsedOptions:s,handledOptions:i});let h={};if(l.length>0){const e=await this._generateUncached(l.map(e=>o[e]),s,i,void 0!==d?l.map(e=>d?.[e]):void 0);await Promise.all(e.generations.map(async(e,t)=>{const r=l[t];u[r]=e;const n=BaseChatModel._convertInputToPromptValue(o[r]).toString();return a.update(n,c,e)})),h=e.llmOutput??{}}return{generations:u,llmOutput:h}}invocationParams(e){return{}}_modelType(){return"base_chat_model"}serialize(){return{...this.invocationParams(),_type:this._llmType(),_model:this._modelType()}}async generatePrompt(e,t,r){const n=e.map(e=>e.toChatMessages());return this.generate(n,t,r)}async call(e,t,r){return(await this.generate([e.map(coerceMessageLikeToMessage)],t,r)).generations[0][0].message}async callPrompt(e,t,r){const n=e.toChatMessages();return this.call(n,t,r)}async predictMessages(e,t,r){return this.call(e,t,r)}async predict(e,t,r){const n=new HumanMessage(e),o=await this.call([n],t,r);if("string"!=typeof o.content)throw new Error("Cannot use predict when output is not a string.");return o.content}withStructuredOutput(e,t){if("function"!=typeof this.bindTools)throw new Error('Chat model must implement ".bindTools()" to use withStructuredOutput.');if(t?.strict)throw new Error('"strict" mode is not supported for this model by default.');const r=e,n=t?.name,o=getSchemaDescription(r)??"A function available to call.",i=t?.method,s=t?.includeRaw;if("jsonMode"===i)throw new Error('Base withStructuredOutput implementation only supports "functionCalling" as a method.');let a,c=n??"extract";isInteropZodSchema(r)?a=[{type:"function",function:{name:c,description:o,parameters:toJsonSchema(r)}}]:("name"in r&&(c=r.name),a=[{type:"function",function:{name:c,description:o,parameters:r}}]);const u=this.bindTools(a),l=RunnableLambda.from(e=>{if(!e.tool_calls||0===e.tool_calls.length)throw new Error("No tool calls found in the response.");const t=e.tool_calls.find(e=>e.name===c);if(!t)throw new Error(`No tool call found with name ${c}.`);return t.args});if(!s)return u.pipe(l).withConfig({runName:"StructuredOutput"});const d=RunnablePassthrough.assign({parsed:(e,t)=>l.invoke(e.raw,t)}),h=RunnablePassthrough.assign({parsed:()=>null}),f=d.withFallbacks({fallbacks:[h]});return RunnableSequence.from([{raw:u},f]).withConfig({runName:"StructuredOutputRunnable"})}}class BaseLLMOutputParser extends Runnable{parseResultWithPrompt(e,t,r){return this.parseResult(e,r)}_baseMessageToString(e){return"string"==typeof e.content?e.content:this._baseMessageContentToString(e.content)}_baseMessageContentToString(e){return JSON.stringify(e)}async invoke(e,t){return"string"==typeof e?this._callWithConfig(async(e,t)=>this.parseResult([{text:e}],t?.callbacks),e,{...t,runType:"parser"}):this._callWithConfig(async(e,t)=>this.parseResult([{message:e,text:this._baseMessageToString(e)}],t?.callbacks),e,{...t,runType:"parser"})}}class BaseOutputParser extends BaseLLMOutputParser{parseResult(e,t){return this.parse(e[0].text,t)}async parseWithPrompt(e,t,r){return this.parse(e,r)}_type(){throw new Error("_type not implemented")}}class OutputParserException extends Error{constructor(e,t,r,n=!1){if(super(e),Object.defineProperty(this,"llmOutput",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"observation",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sendToLLM",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmOutput=t,this.observation=r,this.sendToLLM=n,n&&(void 0===r||void 0===t))throw new Error("Arguments 'observation' & 'llmOutput' are required if 'sendToLlm' is true");addLangChainErrorFields$1(this,"OUTPUT_PARSING_FAILURE")}}class BaseTransformOutputParser extends BaseOutputParser{async*_transform(e){for await(const t of e)"string"==typeof t?yield this.parseResult([{text:t}]):yield this.parseResult([{message:t,text:this._baseMessageToString(t)}])}async*transform(e,t){yield*this._transformStreamWithConfig(e,this._transform.bind(this),{...t,runType:"parser"})}}class BaseCumulativeTransformOutputParser extends BaseTransformOutputParser{constructor(e){super(e),Object.defineProperty(this,"diff",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.diff=e?.diff??this.diff}async*_transform(e){let t,r;for await(const n of e){if("string"!=typeof n&&"string"!=typeof n.content)throw new Error("Cannot handle non-string output.");let e;if(isBaseMessageChunk(n)){if("string"!=typeof n.content)throw new Error("Cannot handle non-string message output.");e=new ChatGenerationChunk({message:n,text:n.content})}else if(isBaseMessage(n)){if("string"!=typeof n.content)throw new Error("Cannot handle non-string message output.");e=new ChatGenerationChunk({message:convertToChunk(n),text:n.content})}else e=new GenerationChunk({text:n});r=void 0===r?e:r.concat(e);const o=await this.parsePartialResult([r]);null==o||deepCompareStrict(o,t)||(this.diff?yield this._diff(t,o):yield o,t=o)}}getFormatInstructions(){return""}}class StructuredOutputParser extends BaseOutputParser{static lc_name(){return"StructuredOutputParser"}toJSON(){return this.toJSONNotImplemented()}constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","structured"]})}static fromZodSchema(e){return new this(e)}static fromNamesAndDescriptions(e){return new this(objectType(Object.fromEntries(Object.entries(e).map(([e,t])=>[e,stringType().describe(t)]))))}getFormatInstructions(){return`You must format your output as a JSON value that adheres to a given "JSON Schema" instance.\n\n"JSON Schema" is a declarative language that allows you to annotate and validate JSON documents.\n\nFor example, the example "JSON Schema" instance {{"properties": {{"foo": {{"description": "a list of test words", "type": "array", "items": {{"type": "string"}}}}}}, "required": ["foo"]}}\nwould match an object with one required property, "foo". The "type" property specifies "foo" must be an "array", and the "description" property semantically describes it as "a list of test words". The items within "foo" must be strings.\nThus, the object {{"foo": ["bar", "baz"]}} is a well-formatted instance of this example "JSON Schema". The object {{"properties": {{"foo": ["bar", "baz"]}}}} is not well-formatted.\n\nYour output will be parsed and type-checked according to the provided schema instance, so make sure all fields in your output match the schema exactly and there are no trailing commas!\n\nHere is the JSON Schema instance your output must adhere to. Include the enclosing markdown codeblock:\n\`\`\`json\n${JSON.stringify(toJsonSchema(this.schema))}\n\`\`\`\n`}async parse(e){try{const t=(e.includes("```")?e.trim().split(/```(?:json)?/)[1]:e.trim()).replace(/"([^"\\]*(\\.[^"\\]*)*)"/g,(e,t)=>`"${t.replace(/\n/g,"\\n")}"`).replace(/\n/g,"");return await interopParseAsync(this.schema,JSON.parse(t))}catch(t){throw new OutputParserException(`Failed to parse. Text: "${e}". Error: ${t}`,e)}}}class JsonOutputParser extends BaseCumulativeTransformOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","output_parsers"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"JsonOutputParser"}_diff(e,t){if(t)return e?compare(e,t):[{op:"replace",path:"",value:t}]}async parsePartialResult(e){return parseJsonMarkdown(e[0].text)}async parse(e){return parseJsonMarkdown(e,JSON.parse)}getFormatInstructions(){return""}}function parseToolCall(e,t){if(void 0===e.function)return;let r;if(t?.partial)try{r=parsePartialJson(e.function.arguments??"{}")}catch(o){return}else try{r=JSON.parse(e.function.arguments)}catch(o){throw new OutputParserException([`Function "${e.function.name}" arguments:`,"",e.function.arguments,"","are not valid JSON.",`Error: ${o.message}`].join("\n"))}const n={name:e.function.name,args:r,type:"tool_call"};return t?.returnId&&(n.id=e.id),n}function convertLangChainToolCallToOpenAI(e){if(void 0===e.id)throw new Error('All OpenAI tool calls must have an "id" field.');return{id:e.id,type:"function",function:{name:e.name,arguments:JSON.stringify(e.args)}}}function makeInvalidToolCall(e,t){return{name:e.function?.name,args:e.function?.arguments,id:e.id,error:t,type:"invalid_tool_call"}}class JsonOutputToolsParser extends BaseCumulativeTransformOutputParser{static lc_name(){return"JsonOutputToolsParser"}constructor(e){super(e),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.returnId=e?.returnId??this.returnId}_diff(){throw new Error("Not supported.")}async parse(){throw new Error("Not implemented.")}async parseResult(e){return await this.parsePartialResult(e,!1)}async parsePartialResult(e,t=!0){const r=e[0].message;let n;if(isAIMessage(r)&&r.tool_calls?.length)n=r.tool_calls.map(e=>{const{id:t,...r}=e;return this.returnId?{id:t,...r}:r});else if(void 0!==r.additional_kwargs.tool_calls){n=JSON.parse(JSON.stringify(r.additional_kwargs.tool_calls)).map(e=>parseToolCall(e,{returnId:this.returnId,partial:t}))}if(!n)return[];const o=[];for(const i of n)if(void 0!==i){const e={type:i.name,args:i.args,id:i.id};o.push(e)}return o}}class JsonOutputKeyToolsParser extends JsonOutputToolsParser{static lc_name(){return"JsonOutputKeyToolsParser"}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","openai_tools"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"returnId",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"keyName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSingle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zodSchema",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.keyName=e.keyName,this.returnSingle=e.returnSingle??this.returnSingle,this.zodSchema=e.zodSchema}async _validateResult(e){if(void 0===this.zodSchema)return e;const t=await interopSafeParseAsync(this.zodSchema,e);if(t.success)return t.data;throw new OutputParserException(`Failed to parse. Text: "${JSON.stringify(e,null,2)}". Error: ${JSON.stringify(t.error?.issues)}`,JSON.stringify(e,null,2))}async parsePartialResult(e){const t=(await super.parsePartialResult(e)).filter(e=>e.type===this.keyName);let r=t;if(t.length)return this.returnId||(r=t.map(e=>e.args)),this.returnSingle?r[0]:r}async parseResult(e){const t=(await super.parsePartialResult(e,!1)).filter(e=>e.type===this.keyName);let r=t;if(!t.length)return;if(this.returnId||(r=t.map(e=>e.args)),this.returnSingle)return this._validateResult(r[0]);return await Promise.all(r.map(e=>this._validateResult(e)))}}const ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use"),defaultOptions={name:void 0,$refStrategy:"root",effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",nullableStrategy:"from-target",removeAdditionalStrategy:"passthrough",definitionPath:"definitions",target:"jsonSchema7",strictUnions:!1,errorMessages:!1,markdownDescription:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"},getDefaultOptions=e=>"string"==typeof e?{...defaultOptions,basePath:["#"],definitions:{},name:e}:{...defaultOptions,basePath:["#"],definitions:{},...e},zodDef=e=>"_def"in e?e._def:e;function isEmptyObj(e){if(!e)return!0;for(const t in e)return!1;return!0}const getRefs=e=>{const t=getDefaultOptions(e),r=void 0!==t.name?[...t.basePath,t.definitionPath,t.name]:t.basePath;return{...t,currentPath:r,propertyPath:void 0,seenRefs:new Set,seen:new Map(Object.entries(t.definitions).map(([e,r])=>[zodDef(r),{def:zodDef(r),path:[...t.basePath,t.definitionPath,e],jsonSchema:void 0}]))}};function addErrorMessage(e,t,r,n){n?.errorMessages&&r&&(e.errorMessage={...e.errorMessage,[t]:r})}function setResponseValueAndErrors(e,t,r,n,o){e[t]=r,addErrorMessage(e,t,n,o)}function parseAnyDef(){return{}}function parseArrayDef(e,t){const r={type:"array"};return e.type?._def?.typeName!==ZodFirstPartyTypeKind.ZodAny&&(r.items=parseDef(e.type._def,{...t,currentPath:[...t.currentPath,"items"]})),e.minLength&&setResponseValueAndErrors(r,"minItems",e.minLength.value,e.minLength.message,t),e.maxLength&&setResponseValueAndErrors(r,"maxItems",e.maxLength.value,e.maxLength.message,t),e.exactLength&&(setResponseValueAndErrors(r,"minItems",e.exactLength.value,e.exactLength.message,t),setResponseValueAndErrors(r,"maxItems",e.exactLength.value,e.exactLength.message,t)),r}function parseBigintDef(e,t){const r={type:"integer",format:"int64"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"min":"jsonSchema7"===t.target?n.inclusive?setResponseValueAndErrors(r,"minimum",n.value,n.message,t):setResponseValueAndErrors(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),setResponseValueAndErrors(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?setResponseValueAndErrors(r,"maximum",n.value,n.message,t):setResponseValueAndErrors(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),setResponseValueAndErrors(r,"maximum",n.value,n.message,t));break;case"multipleOf":setResponseValueAndErrors(r,"multipleOf",n.value,n.message,t)}return r}function parseBooleanDef(){return{type:"boolean"}}function parseBrandedDef(e,t){return parseDef(e.type._def,t)}const parseCatchDef=(e,t)=>parseDef(e.innerType._def,t);function parseDateDef(e,t,r){const n=r??t.dateStrategy;if(Array.isArray(n))return{anyOf:n.map((r,n)=>parseDateDef(e,t,r))};switch(n){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser(e,t)}}const integerDateParser=(e,t)=>{const r={type:"integer",format:"unix-time"};if("openApi3"===t.target)return r;for(const n of e.checks)switch(n.kind){case"min":setResponseValueAndErrors(r,"minimum",n.value,n.message,t);break;case"max":setResponseValueAndErrors(r,"maximum",n.value,n.message,t)}return r};function parseDefaultDef(e,t){return{...parseDef(e.innerType._def,t),default:e.defaultValue()}}function parseEffectsDef(e,t,r){return"input"===t.effectStrategy?parseDef(e.schema._def,t,r):{}}function parseEnumDef(e){return{type:"string",enum:[...e.values]}}const isJsonSchema7AllOfType=e=>(!("type"in e)||"string"!==e.type)&&"allOf"in e;function parseIntersectionDef(e,t){const r=[parseDef(e.left._def,{...t,currentPath:[...t.currentPath,"allOf","0"]}),parseDef(e.right._def,{...t,currentPath:[...t.currentPath,"allOf","1"]})].filter(e=>!!e);let n="jsonSchema2019-09"===t.target?{unevaluatedProperties:!1}:void 0;const o=[];return r.forEach(e=>{if(isJsonSchema7AllOfType(e))o.push(...e.allOf),void 0===e.unevaluatedProperties&&(n=void 0);else{let t=e;if("additionalProperties"in e&&!1===e.additionalProperties){const{additionalProperties:r,...n}=e;t=n}else n=void 0;o.push(t)}}),o.length?{allOf:o,...n}:void 0}function parseLiteralDef(e,t){const r=typeof e.value;return"bigint"!==r&&"number"!==r&&"boolean"!==r&&"string"!==r?{type:Array.isArray(e.value)?"array":"object"}:"openApi3"===t.target?{type:"bigint"===r?"integer":r,enum:[e.value]}:{type:"bigint"===r?"integer":r,const:e.value}}let emojiRegex;const zodPatterns={cuid:/^[cC][^\s-]{8,}$/,cuid2:/^[0-9a-z]+$/,ulid:/^[0-9A-HJKMNP-TV-Z]{26}$/,email:/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,emoji:()=>(void 0===emojiRegex&&(emojiRegex=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),emojiRegex),base64:/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,nanoid:/^[a-zA-Z0-9_-]{21}$/};function parseStringDef(e,t){const r={type:"string"};function n(e){return"escape"===t.patternStrategy?escapeNonAlphaNumeric(e):e}if(e.checks)for(const o of e.checks)switch(o.kind){case"min":setResponseValueAndErrors(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,o.value):o.value,o.message,t);break;case"max":setResponseValueAndErrors(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,o.value):o.value,o.message,t);break;case"email":switch(t.emailStrategy){case"format:email":addFormat(r,"email",o.message,t);break;case"format:idn-email":addFormat(r,"idn-email",o.message,t);break;case"pattern:zod":addPattern(r,zodPatterns.email,o.message,t)}break;case"url":addFormat(r,"uri",o.message,t);break;case"uuid":addFormat(r,"uuid",o.message,t);break;case"regex":addPattern(r,o.regex,o.message,t);break;case"cuid":addPattern(r,zodPatterns.cuid,o.message,t);break;case"cuid2":addPattern(r,zodPatterns.cuid2,o.message,t);break;case"startsWith":addPattern(r,RegExp(`^${n(o.value)}`),o.message,t);break;case"endsWith":addPattern(r,RegExp(`${n(o.value)}$`),o.message,t);break;case"datetime":addFormat(r,"date-time",o.message,t);break;case"date":addFormat(r,"date",o.message,t);break;case"time":addFormat(r,"time",o.message,t);break;case"duration":addFormat(r,"duration",o.message,t);break;case"length":setResponseValueAndErrors(r,"minLength","number"==typeof r.minLength?Math.max(r.minLength,o.value):o.value,o.message,t),setResponseValueAndErrors(r,"maxLength","number"==typeof r.maxLength?Math.min(r.maxLength,o.value):o.value,o.message,t);break;case"includes":addPattern(r,RegExp(n(o.value)),o.message,t);break;case"ip":"v6"!==o.version&&addFormat(r,"ipv4",o.message,t),"v4"!==o.version&&addFormat(r,"ipv6",o.message,t);break;case"emoji":addPattern(r,zodPatterns.emoji,o.message,t);break;case"ulid":addPattern(r,zodPatterns.ulid,o.message,t);break;case"base64":switch(t.base64Strategy){case"format:binary":addFormat(r,"binary",o.message,t);break;case"contentEncoding:base64":setResponseValueAndErrors(r,"contentEncoding","base64",o.message,t);break;case"pattern:zod":addPattern(r,zodPatterns.base64,o.message,t)}break;case"nanoid":addPattern(r,zodPatterns.nanoid,o.message,t)}return r}const escapeNonAlphaNumeric=e=>Array.from(e).map(e=>/[a-zA-Z0-9]/.test(e)?e:`\\${e}`).join(""),addFormat=(e,t,r,n)=>{e.format||e.anyOf?.some(e=>e.format)?(e.anyOf||(e.anyOf=[]),e.format&&(e.anyOf.push({format:e.format,...e.errorMessage&&n.errorMessages&&{errorMessage:{format:e.errorMessage.format}}}),delete e.format,e.errorMessage&&(delete e.errorMessage.format,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.anyOf.push({format:t,...r&&n.errorMessages&&{errorMessage:{format:r}}})):setResponseValueAndErrors(e,"format",t,r,n)},addPattern=(e,t,r,n)=>{e.pattern||e.allOf?.some(e=>e.pattern)?(e.allOf||(e.allOf=[]),e.pattern&&(e.allOf.push({pattern:e.pattern,...e.errorMessage&&n.errorMessages&&{errorMessage:{pattern:e.errorMessage.pattern}}}),delete e.pattern,e.errorMessage&&(delete e.errorMessage.pattern,0===Object.keys(e.errorMessage).length&&delete e.errorMessage)),e.allOf.push({pattern:processRegExp(t,n),...r&&n.errorMessages&&{errorMessage:{pattern:r}}})):setResponseValueAndErrors(e,"pattern",processRegExp(t,n),r,n)},processRegExp=(e,t)=>{const r="function"==typeof e?e():e;if(!t.applyRegexFlags||!r.flags)return r.source;const n=r.flags.includes("i"),o=r.flags.includes("m"),i=r.flags.includes("s"),s=n?r.source.toLowerCase():r.source;let a="",c=!1,u=!1,l=!1;for(let d=0;d<s.length;d++)if(c)a+=s[d],c=!1;else{if(n)if(u){if(s[d].match(/[a-z]/)){l?(a+=s[d],a+=`${s[d-2]}-${s[d]}`.toUpperCase(),l=!1):"-"===s[d+1]&&s[d+2]?.match(/[a-z]/)?(a+=s[d],l=!0):a+=`${s[d]}${s[d].toUpperCase()}`;continue}}else if(s[d].match(/[a-z]/)){a+=`[${s[d]}${s[d].toUpperCase()}]`;continue}if(o){if("^"===s[d]){a+="(^|(?<=[\r\n]))";continue}if("$"===s[d]){a+="($|(?=[\r\n]))";continue}}i&&"."===s[d]?a+=u?`${s[d]}\r\n`:`[${s[d]}\r\n]`:(a+=s[d],"\\"===s[d]?c=!0:u&&"]"===s[d]?u=!1:u||"["!==s[d]||(u=!0))}try{new RegExp(a)}catch{return console.warn(`Could not convert regex pattern at ${t.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),r.source}return a};function parseRecordDef(e,t){if("openApi3"===t.target&&e.keyType?._def.typeName===ZodFirstPartyTypeKind.ZodEnum)return{type:"object",required:e.keyType._def.values,properties:e.keyType._def.values.reduce((r,n)=>({...r,[n]:parseDef(e.valueType._def,{...t,currentPath:[...t.currentPath,"properties",n]})??{}}),{}),additionalProperties:!1};const r={type:"object",additionalProperties:parseDef(e.valueType._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??{}};if("openApi3"===t.target)return r;if(e.keyType?._def.typeName===ZodFirstPartyTypeKind.ZodString&&e.keyType._def.checks?.length){const n=Object.entries(parseStringDef(e.keyType._def,t)).reduce((e,[t,r])=>"type"===t?e:{...e,[t]:r},{});return{...r,propertyNames:n}}return e.keyType?._def.typeName===ZodFirstPartyTypeKind.ZodEnum?{...r,propertyNames:{enum:e.keyType._def.values}}:r}function parseMapDef(e,t){if("record"===t.mapStrategy)return parseRecordDef(e,t);return{type:"array",maxItems:125,items:{type:"array",items:[parseDef(e.keyType._def,{...t,currentPath:[...t.currentPath,"items","items","0"]})||{},parseDef(e.valueType._def,{...t,currentPath:[...t.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}function parseNativeEnumDef(e){const t=e.values,r=Object.keys(e.values).filter(e=>"number"!=typeof t[t[e]]).map(e=>t[e]),n=Array.from(new Set(r.map(e=>typeof e)));return{type:1===n.length?"string"===n[0]?"string":"number":["string","number"],enum:r}}function parseNeverDef(){return{not:{}}}function parseNullDef(e){return"openApi3"===e.target?{enum:["null"],nullable:!0}:{type:"null"}}const primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};function parseUnionDef(e,t){if("openApi3"===t.target)return asAnyOf(e,t);const r=e.options instanceof Map?Array.from(e.options.values()):e.options;if(r.every(e=>e._def.typeName in primitiveMappings&&(!e._def.checks||!e._def.checks.length))){const e=r.reduce((e,t)=>{const r=primitiveMappings[t._def.typeName];return r&&!e.includes(r)?[...e,r]:e},[]);return{type:e.length>1?e:e[0]}}if(r.every(e=>"ZodLiteral"===e._def.typeName&&!e.description)){const e=r.reduce((e,t)=>{const r=typeof t._def.value;switch(r){case"string":case"number":case"boolean":return[...e,r];case"bigint":return[...e,"integer"];case"object":if(null===t._def.value)return[...e,"null"];default:return e}},[]);if(e.length===r.length){const t=e.filter((e,t,r)=>r.indexOf(e)===t);return{type:t.length>1?t:t[0],enum:r.reduce((e,t)=>e.includes(t._def.value)?e:[...e,t._def.value],[])}}}else if(r.every(e=>"ZodEnum"===e._def.typeName))return{type:"string",enum:r.reduce((e,t)=>[...e,...t._def.values.filter(t=>!e.includes(t))],[])};return asAnyOf(e,t)}const asAnyOf=(e,t)=>{const r=(e.options instanceof Map?Array.from(e.options.values()):e.options).map((e,r)=>parseDef(e._def,{...t,currentPath:[...t.currentPath,"anyOf",`${r}`]})).filter(e=>!!e&&(!t.strictUnions||"object"==typeof e&&Object.keys(e).length>0));return r.length?{anyOf:r}:void 0};function parseNullableDef(e,t){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(e.innerType._def.typeName)&&(!e.innerType._def.checks||!e.innerType._def.checks.length))return"openApi3"===t.target||"property"===t.nullableStrategy?{type:primitiveMappings[e.innerType._def.typeName],nullable:!0}:{type:[primitiveMappings[e.innerType._def.typeName],"null"]};if("openApi3"===t.target){const r=parseDef(e.innerType._def,{...t,currentPath:[...t.currentPath]});return r&&"$ref"in r?{allOf:[r],nullable:!0}:r&&{...r,nullable:!0}}const r=parseDef(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","0"]});return r&&{anyOf:[r,{type:"null"}]}}function parseNumberDef(e,t){const r={type:"number"};if(!e.checks)return r;for(const n of e.checks)switch(n.kind){case"int":r.type="integer",addErrorMessage(r,"type",n.message,t);break;case"min":"jsonSchema7"===t.target?n.inclusive?setResponseValueAndErrors(r,"minimum",n.value,n.message,t):setResponseValueAndErrors(r,"exclusiveMinimum",n.value,n.message,t):(n.inclusive||(r.exclusiveMinimum=!0),setResponseValueAndErrors(r,"minimum",n.value,n.message,t));break;case"max":"jsonSchema7"===t.target?n.inclusive?setResponseValueAndErrors(r,"maximum",n.value,n.message,t):setResponseValueAndErrors(r,"exclusiveMaximum",n.value,n.message,t):(n.inclusive||(r.exclusiveMaximum=!0),setResponseValueAndErrors(r,"maximum",n.value,n.message,t));break;case"multipleOf":setResponseValueAndErrors(r,"multipleOf",n.value,n.message,t)}return r}function decideAdditionalProperties(e,t){return"strict"===t.removeAdditionalStrategy?"ZodNever"===e.catchall._def.typeName?"strict"!==e.unknownKeys:parseDef(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0:"ZodNever"===e.catchall._def.typeName?"passthrough"===e.unknownKeys:parseDef(e.catchall._def,{...t,currentPath:[...t.currentPath,"additionalProperties"]})??!0}function parseObjectDef(e,t){const r={type:"object",...Object.entries(e.shape()).reduce((e,[r,n])=>{if(void 0===n||void 0===n._def)return e;const o=[...t.currentPath,"properties",r],i=parseDef(n._def,{...t,currentPath:o,propertyPath:o});if(void 0===i)return e;if(t.openaiStrictMode&&n.isOptional()&&!n.isNullable()&&void 0===n._def?.defaultValue)throw new Error(`Zod field at \`${o.join("/")}\` uses \`.optional()\` without \`.nullable()\` which is not supported by the API. See: https://platform.openai.com/docs/guides/structured-outputs?api-mode=responses#all-fields-must-be-required`);return{properties:{...e.properties,[r]:i},required:n.isOptional()&&!t.openaiStrictMode?e.required:[...e.required,r]}},{properties:{},required:[]}),additionalProperties:decideAdditionalProperties(e,t)};return r.required.length||delete r.required,r}const parseOptionalDef=(e,t)=>{if(t.currentPath.toString()===t.propertyPath?.toString())return parseDef(e.innerType._def,t);const r=parseDef(e.innerType._def,{...t,currentPath:[...t.currentPath,"anyOf","1"]});return r?{anyOf:[{not:{}},r]}:{}},parsePipelineDef=(e,t)=>{if("input"===t.pipeStrategy)return parseDef(e.in._def,t);if("output"===t.pipeStrategy)return parseDef(e.out._def,t);const r=parseDef(e.in._def,{...t,currentPath:[...t.currentPath,"allOf","0"]});return{allOf:[r,parseDef(e.out._def,{...t,currentPath:[...t.currentPath,"allOf",r?"1":"0"]})].filter(e=>void 0!==e)}};function parsePromiseDef(e,t){return parseDef(e.type._def,t)}function parseSetDef(e,t){const r={type:"array",uniqueItems:!0,items:parseDef(e.valueType._def,{...t,currentPath:[...t.currentPath,"items"]})};return e.minSize&&setResponseValueAndErrors(r,"minItems",e.minSize.value,e.minSize.message,t),e.maxSize&&setResponseValueAndErrors(r,"maxItems",e.maxSize.value,e.maxSize.message,t),r}function parseTupleDef(e,t){return e.rest?{type:"array",minItems:e.items.length,items:e.items.map((e,r)=>parseDef(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[]),additionalItems:parseDef(e.rest._def,{...t,currentPath:[...t.currentPath,"additionalItems"]})}:{type:"array",minItems:e.items.length,maxItems:e.items.length,items:e.items.map((e,r)=>parseDef(e._def,{...t,currentPath:[...t.currentPath,"items",`${r}`]})).reduce((e,t)=>void 0===t?e:[...e,t],[])}}function parseUndefinedDef(){return{not:{}}}function parseUnknownDef(){return{}}const parseReadonlyDef=(e,t)=>parseDef(e.innerType._def,t);function parseDef(e,t,r=!1){const n=t.seen.get(e);if(t.override){const o=t.override?.(e,t,n,r);if(o!==ignoreOverride)return o}if(n&&!r){const e=get$ref(n,t);if(void 0!==e)return"$ref"in e&&t.seenRefs.add(e.$ref),e}const o={def:e,path:t.currentPath,jsonSchema:void 0};t.seen.set(e,o);const i=selectParser(e,e.typeName,t,r);return i&&addMeta(e,t,i),o.jsonSchema=i,i}const get$ref=(e,t)=>{switch(t.$refStrategy){case"root":return{$ref:e.path.join("/")};case"extract-to-root":const r=e.path.slice(t.basePath.length+1).join("_");return r!==t.name&&"duplicate-ref"===t.nameStrategy&&(t.definitions[r]=e.def),{$ref:[...t.basePath,t.definitionPath,r].join("/")};case"relative":return{$ref:getRelativePath(t.currentPath,e.path)};case"none":case"seen":return e.path.length<t.currentPath.length&&e.path.every((e,r)=>t.currentPath[r]===e)?(console.warn(`Recursive reference detected at ${t.currentPath.join("/")}! Defaulting to any`),{}):"seen"===t.$refStrategy?{}:void 0}},getRelativePath=(e,t)=>{let r=0;for(;r<e.length&&r<t.length&&e[r]===t[r];r++);return[(e.length-r).toString(),...t.slice(r)].join("/")},selectParser=(e,t,r,n)=>{switch(t){case ZodFirstPartyTypeKind.ZodString:return parseStringDef(e,r);case ZodFirstPartyTypeKind.ZodNumber:return parseNumberDef(e,r);case ZodFirstPartyTypeKind.ZodObject:return parseObjectDef(e,r);case ZodFirstPartyTypeKind.ZodBigInt:return parseBigintDef(e,r);case ZodFirstPartyTypeKind.ZodBoolean:return parseBooleanDef();case ZodFirstPartyTypeKind.ZodDate:return parseDateDef(e,r);case ZodFirstPartyTypeKind.ZodUndefined:return parseUndefinedDef();case ZodFirstPartyTypeKind.ZodNull:return parseNullDef(r);case ZodFirstPartyTypeKind.ZodArray:return parseArrayDef(e,r);case ZodFirstPartyTypeKind.ZodUnion:case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return parseUnionDef(e,r);case ZodFirstPartyTypeKind.ZodIntersection:return parseIntersectionDef(e,r);case ZodFirstPartyTypeKind.ZodTuple:return parseTupleDef(e,r);case ZodFirstPartyTypeKind.ZodRecord:return parseRecordDef(e,r);case ZodFirstPartyTypeKind.ZodLiteral:return parseLiteralDef(e,r);case ZodFirstPartyTypeKind.ZodEnum:return parseEnumDef(e);case ZodFirstPartyTypeKind.ZodNativeEnum:return parseNativeEnumDef(e);case ZodFirstPartyTypeKind.ZodNullable:return parseNullableDef(e,r);case ZodFirstPartyTypeKind.ZodOptional:return parseOptionalDef(e,r);case ZodFirstPartyTypeKind.ZodMap:return parseMapDef(e,r);case ZodFirstPartyTypeKind.ZodSet:return parseSetDef(e,r);case ZodFirstPartyTypeKind.ZodLazy:return parseDef(e.getter()._def,r);case ZodFirstPartyTypeKind.ZodPromise:return parsePromiseDef(e,r);case ZodFirstPartyTypeKind.ZodNaN:case ZodFirstPartyTypeKind.ZodNever:return parseNeverDef();case ZodFirstPartyTypeKind.ZodEffects:return parseEffectsDef(e,r,n);case ZodFirstPartyTypeKind.ZodAny:return parseAnyDef();case ZodFirstPartyTypeKind.ZodUnknown:return parseUnknownDef();case ZodFirstPartyTypeKind.ZodDefault:return parseDefaultDef(e,r);case ZodFirstPartyTypeKind.ZodBranded:return parseBrandedDef(e,r);case ZodFirstPartyTypeKind.ZodReadonly:return parseReadonlyDef(e,r);case ZodFirstPartyTypeKind.ZodCatch:return parseCatchDef(e,r);case ZodFirstPartyTypeKind.ZodPipeline:return parsePipelineDef(e,r);case ZodFirstPartyTypeKind.ZodFunction:case ZodFirstPartyTypeKind.ZodVoid:case ZodFirstPartyTypeKind.ZodSymbol:default:return}},addMeta=(e,t,r)=>(e.description&&(r.description=e.description,t.markdownDescription&&(r.markdownDescription=e.description)),r),zodToJsonSchema$1=(e,t)=>{const r=getRefs(t),n="string"==typeof t?t:"title"===t?.nameStrategy?void 0:t?.name,o=parseDef(e._def,void 0===n?r:{...r,currentPath:[...r.basePath,r.definitionPath,n]},!1)??{},i="object"==typeof t&&void 0!==t.name&&"title"===t.nameStrategy?t.name:void 0;void 0!==i&&(o.title=i);const s=(()=>{if(isEmptyObj(r.definitions))return;const e={},t=new Set;for(let n=0;n<500;n++){const n=Object.entries(r.definitions).filter(([e])=>!t.has(e));if(0===n.length)break;for(const[o,i]of n)e[o]=parseDef(zodDef(i),{...r,currentPath:[...r.basePath,r.definitionPath,o]},!0)??{},t.add(o)}return e})(),a=void 0===n?s?{...o,[r.definitionPath]:s}:o:"duplicate-ref"===r.nameStrategy?{...o,...s||r.seenRefs.size?{[r.definitionPath]:{...s,...r.seenRefs.size?{[n]:o}:void 0}}:void 0}:{$ref:[..."relative"===r.$refStrategy?[]:r.basePath,r.definitionPath,n].join("/"),[r.definitionPath]:{...s,[n]:o}};return"jsonSchema7"===r.target?a.$schema="http://json-schema.org/draft-07/schema#":"jsonSchema2019-09"===r.target&&(a.$schema="https://json-schema.org/draft/2019-09/schema#"),a};function zodToJsonSchema(e,t){return zodToJsonSchema$1(e,{openaiStrictMode:!0,name:t.name,nameStrategy:"duplicate-ref",$refStrategy:"extract-to-root",nullableStrategy:"property"})}function zodResponseFormat(e,t,r){return makeParseableResponseFormat$1({type:"json_schema",json_schema:{...r,name:t,strict:!0,schema:zodToJsonSchema(e,{name:t})}},t=>e.parse(JSON.parse(t)))}function getEndpoint(e){const{azureOpenAIApiDeploymentName:t,azureOpenAIApiInstanceName:r,azureOpenAIApiKey:n,azureOpenAIBasePath:o,baseURL:i,azureADTokenProvider:s,azureOpenAIEndpoint:a}=e;if((n||s)&&o&&t)return`${o}/${t}`;if((n||s)&&a&&t)return`${a}/openai/deployments/${t}`;if(n||s){if(!r)throw new Error("azureOpenAIApiInstanceName is required when using azureOpenAIApiKey");if(!t)throw new Error("azureOpenAIApiDeploymentName is a required parameter when using azureOpenAIApiKey");return`https://${r}.openai.azure.com/openai/deployments/${t}`}return i}function isStructuredTool(e){return void 0!==e&&Array.isArray(e.lc_namespace)}function isRunnableToolLike(e){return void 0!==e&&Runnable.isRunnable(e)&&"lc_name"in e.constructor&&"function"==typeof e.constructor.lc_name&&"RunnableToolLike"===e.constructor.lc_name()}function isStructuredToolParams(e){return!!e&&"object"==typeof e&&"name"in e&&"schema"in e&&(isInteropZodSchema(e.schema)||null!=e.schema&&"object"==typeof e.schema&&"type"in e.schema&&"string"==typeof e.schema.type&&["null","boolean","object","array","number","string"].includes(e.schema.type))}function isLangChainTool(e){return isStructuredToolParams(e)||isRunnableToolLike(e)||isStructuredTool(e)}function convertToOpenAIFunction(e,t){return{name:e.name,description:e.description,parameters:toJsonSchema(e.schema)}}function convertToOpenAITool(e,t){let r;return r=isLangChainTool(e)?{type:"function",function:convertToOpenAIFunction(e)}:e,r}function addLangChainErrorFields(e,t){return e.lc_error_code=t,e.message=`${e.message}\n\nTroubleshooting URL: https://js.langchain.com/docs/troubleshooting/errors/${t}/\n`,e}function wrapOpenAIClientError(e){let t;return e.constructor.name===APIConnectionTimeoutError.name?(t=new Error(e.message),t.name="TimeoutError"):e.constructor.name===APIUserAbortError.name?(t=new Error(e.message),t.name="AbortError"):t=400===e.status&&e.message.includes("tool_calls")?addLangChainErrorFields(e,"INVALID_TOOL_RESULTS"):401===e.status?addLangChainErrorFields(e,"MODEL_AUTHENTICATION"):429===e.status?addLangChainErrorFields(e,"MODEL_RATE_LIMIT"):404===e.status?addLangChainErrorFields(e,"MODEL_NOT_FOUND"):e,t}function formatToOpenAIToolChoice(e){return e?"any"===e||"required"===e?"required":"auto"===e?"auto":"none"===e?"none":"string"==typeof e?{type:"function",function:{name:e}}:e:void 0}function isAnyOfProp(e){return void 0!==e.anyOf&&Array.isArray(e.anyOf)}function formatFunctionDefinitions(e){const t=["namespace functions {",""];for(const r of e)r.description&&t.push(`// ${r.description}`),Object.keys(r.parameters.properties??{}).length>0?(t.push(`type ${r.name} = (_: {`),t.push(formatObjectProperties(r.parameters,0)),t.push("}) => any;")):t.push(`type ${r.name} = () => any;`),t.push("");return t.push("} // namespace functions"),t.join("\n")}function formatObjectProperties(e,t){const r=[];for(const[n,o]of Object.entries(e.properties??{}))o.description&&t<2&&r.push(`// ${o.description}`),e.required?.includes(n)?r.push(`${n}: ${formatType(o,t)},`):r.push(`${n}?: ${formatType(o,t)},`);return r.map(e=>" ".repeat(t)+e).join("\n")}function formatType(e,t){if(isAnyOfProp(e))return e.anyOf.map(e=>formatType(e,t)).join(" | ");switch(e.type){case"string":return e.enum?e.enum.map(e=>`"${e}"`).join(" | "):"string";case"number":case"integer":return e.enum?e.enum.map(e=>`${e}`).join(" | "):"number";case"boolean":return"boolean";case"null":return"null";case"object":return["{",formatObjectProperties(e,t+2),"}"].join("\n");case"array":return e.items?`${formatType(e.items,t)}[]`:"any[]";default:return""}}function _convertToOpenAITool(e,t){let r;return r=isLangChainTool(e)?convertToOpenAITool(e):e,void 0!==t?.strict&&(r.function.strict=t.strict),r}function extractGenericMessageCustomRole(e){return"system"!==e.role&&"developer"!==e.role&&"assistant"!==e.role&&"user"!==e.role&&"function"!==e.role&&"tool"!==e.role&&console.warn(`Unknown message role: ${e.role}`),e.role}function messageToOpenAIRole(e){const t=e._getType();switch(t){case"system":return"system";case"ai":return"assistant";case"human":return"user";case"function":return"function";case"tool":return"tool";case"generic":if(!ChatMessage.isInstance(e))throw new Error("Invalid generic chat message");return extractGenericMessageCustomRole(e);default:throw new Error(`Unknown message type: ${t}`)}}const completionsApiContentBlockConverter={providerName:"ChatOpenAI",fromStandardTextBlock:e=>({type:"text",text:e.text}),fromStandardImageBlock(e){if("url"===e.source_type)return{type:"image_url",image_url:{url:e.url,...e.metadata?.detail?{detail:e.metadata.detail}:{}}};if("base64"===e.source_type){return{type:"image_url",image_url:{url:`data:${e.mime_type??""};base64,${e.data}`,...e.metadata?.detail?{detail:e.metadata.detail}:{}}}}throw new Error(`Image content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)},fromStandardAudioBlock(e){if("url"===e.source_type){const t=parseBase64DataUrl({dataUrl:e.url});if(!t)throw new Error(`URL audio blocks with source_type ${e.source_type} must be formatted as a data URL for ChatOpenAI`);const r=t.mime_type||e.mime_type||"";let n;try{n=parseMimeType(r)}catch{throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`)}if("audio"!==n.type||"wav"!==n.subtype&&"mp3"!==n.subtype)throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:n.subtype,data:t.data}}}if("base64"===e.source_type){let t;try{t=parseMimeType(e.mime_type??"")}catch{throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`)}if("audio"!==t.type||"wav"!==t.subtype&&"mp3"!==t.subtype)throw new Error(`Audio blocks with source_type ${e.source_type} must have mime type of audio/wav or audio/mp3`);return{type:"input_audio",input_audio:{format:t.subtype,data:e.data}}}throw new Error(`Audio content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)},fromStandardFileBlock(e){if("url"===e.source_type){if(!parseBase64DataUrl({dataUrl:e.url}))throw new Error(`URL file blocks with source_type ${e.source_type} must be formatted as a data URL for ChatOpenAI`);return{type:"file",file:{file_data:e.url,...e.metadata?.filename||e.metadata?.name?{filename:e.metadata?.filename||e.metadata?.name}:{}}}}if("base64"===e.source_type)return{type:"file",file:{file_data:`data:${e.mime_type??""};base64,${e.data}`,...e.metadata?.filename||e.metadata?.name||e.metadata?.title?{filename:e.metadata?.filename||e.metadata?.name||e.metadata?.title}:{}}};if("id"===e.source_type)return{type:"file",file:{file_id:e.id}};throw new Error(`File content blocks with source_type ${e.source_type} are not supported for ChatOpenAI`)}};function _convertMessagesToOpenAIParams(e,t){return e.flatMap(e=>{let r=messageToOpenAIRole(e);"system"===r&&isReasoningModel(t)&&(r="developer");const n={role:r,content:"string"==typeof e.content?e.content:e.content.map(e=>isDataContentBlock(e)?convertToProviderContentBlock(e,completionsApiContentBlockConverter):e)};if(null!=e.name&&(n.name=e.name),null!=e.additional_kwargs.function_call&&(n.function_call=e.additional_kwargs.function_call,n.content=""),isAIMessage(e)&&e.tool_calls?.length?(n.tool_calls=e.tool_calls.map(convertLangChainToolCallToOpenAI),n.content=""):(null!=e.additional_kwargs.tool_calls&&(n.tool_calls=e.additional_kwargs.tool_calls),null!=e.tool_call_id&&(n.tool_call_id=e.tool_call_id)),e.additional_kwargs.audio&&"object"==typeof e.additional_kwargs.audio&&"id"in e.additional_kwargs.audio){return[n,{role:"assistant",audio:{id:e.additional_kwargs.audio.id}}]}return n})}const _FUNCTION_CALL_IDS_MAP_KEY="__openai_function_call_ids__";function _convertReasoningSummaryToOpenAIResponsesParams(e){const t=(e.summary.length>1?e.summary.reduce((e,t)=>{const r=e.at(-1);return r.index===t.index?r.text+=t.text:e.push(t),e},[{...e.summary[0]}]):e.summary).map(e=>Object.fromEntries(Object.entries(e).filter(([e])=>"index"!==e)));return{...e,summary:t}}function _convertMessagesToOpenAIResponsesParams(e,t,r){return e.flatMap(e=>{const n=e.additional_kwargs;let o=messageToOpenAIRole(e);if("system"===o&&isReasoningModel(t)&&(o="developer"),"function"===o)throw new Error("Function messages are not supported in Responses API");if("tool"===o){const t=e;if("computer_call_output"===n?.type){return{type:"computer_call_output",output:(()=>{if("string"==typeof t.content)return{type:"computer_screenshot",image_url:t.content};if(Array.isArray(t.content)){const e=t.content.find(e=>"computer_screenshot"===e.type);if(e)return e;const r=t.content.find(e=>"image_url"===e.type);if(r)return{type:"computer_screenshot",image_url:"string"==typeof r.image_url?r.image_url:r.image_url.url}}throw new Error("Invalid computer call output")})(),call_id:t.tool_call_id}}return{type:"function_call_output",call_id:t.tool_call_id,id:t.id?.startsWith("fc_")?t.id:void 0,output:"string"!=typeof t.content?JSON.stringify(t.content):t.content}}if("assistant"===o){if(!r&&null!=e.response_metadata.output&&Array.isArray(e.response_metadata.output)&&e.response_metadata.output.length>0&&e.response_metadata.output.every(e=>"type"in e))return e.response_metadata.output;const t=[];if(n?.reasoning&&!r){const e=_convertReasoningSummaryToOpenAIResponsesParams(n.reasoning);t.push(e)}let{content:o}=e;n?.refusal&&("string"==typeof o&&(o=[{type:"output_text",text:o,annotations:[]}]),o=[...o,{type:"refusal",refusal:n.refusal}]),t.push({type:"message",role:"assistant",...e.id&&!r?{id:e.id}:{},content:"string"==typeof o?o:o.flatMap(e=>"text"===e.type?{type:"output_text",text:e.text,annotations:e.annotations??[]}:"output_text"===e.type||"refusal"===e.type?e:[])});const i=n?.[_FUNCTION_CALL_IDS_MAP_KEY];isAIMessage(e)&&e.tool_calls?.length?t.push(...e.tool_calls.map(e=>({type:"function_call",name:e.name,arguments:JSON.stringify(e.args),call_id:e.id,...r?{id:i?.[e.id]}:{}}))):n?.tool_calls&&t.push(...n.tool_calls.map(e=>({type:"function_call",name:e.function.name,call_id:e.id,arguments:e.function.arguments,...r?{id:i?.[e.id]}:{}})));const s=e.response_metadata.output?.length?e.response_metadata.output:n.tool_outputs,a=["computer_call","mcp_call","code_interpreter_call","image_generation_call"];if(null!=s){const e=s,r=e?.filter(e=>a.includes(e.type));r.length>0&&t.push(...r)}return t}if("user"===o||"system"===o||"developer"===o){if("string"==typeof e.content)return{type:"message",role:o,content:e.content};const t=[],r=e.content.flatMap(e=>("mcp_approval_response"===e.type&&t.push({type:"mcp_approval_response",approval_request_id:e.approval_request_id,approve:e.approve}),isDataContentBlock(e)?convertToProviderContentBlock(e,completionsApiContentBlockConverter):"text"===e.type?{type:"input_text",text:e.text}:"image_url"===e.type?{type:"input_image",image_url:"string"==typeof e.image_url?e.image_url:e.image_url.url,detail:"string"==typeof e.image_url?"auto":e.image_url.detail}:"input_text"===e.type||"input_image"===e.type||"input_file"===e.type?e:[]));return r.length>0&&t.push({type:"message",role:o,content:r}),t}return console.warn(`Unsupported role found when converting to OpenAI Responses API: ${o}`),[]})}function _convertOpenAIResponsesMessageToBaseMessage(e){if(e.error){const t=new Error(e.error.message);throw t.name=e.error.code,t}let t;const r=[],n=[],o=[],i={model:e.model,created_at:e.created_at,id:e.id,incomplete_details:e.incomplete_details,metadata:e.metadata,object:e.object,status:e.status,user:e.user,service_tier:e.service_tier,model_name:e.model},s={};for(const c of e.output)if("message"===c.type)t=c.id,r.push(...c.content.flatMap(e=>"output_text"===e.type?("parsed"in e&&null!=e.parsed&&(s.parsed=e.parsed),{type:"text",text:e.text,annotations:e.annotations}):"refusal"===e.type?(s.refusal=e.refusal,[]):e));else if("function_call"===c.type){const e={function:{name:c.name,arguments:c.arguments},id:c.call_id};try{n.push(parseToolCall(e,{returnId:!0}))}catch(a){let t;"object"==typeof a&&null!=a&&"message"in a&&"string"==typeof a.message&&(t=a.message),o.push(makeInvalidToolCall(e,t))}s[_FUNCTION_CALL_IDS_MAP_KEY]??(s[_FUNCTION_CALL_IDS_MAP_KEY]={}),c.id&&(s[_FUNCTION_CALL_IDS_MAP_KEY][c.call_id]=c.id)}else"reasoning"===c.type?s.reasoning=c:(s.tool_outputs??(s.tool_outputs=[]),s.tool_outputs.push(c));return new AIMessage({id:t,content:r,tool_calls:n,invalid_tool_calls:o,usage_metadata:e.usage,additional_kwargs:s,response_metadata:i})}function _convertOpenAIResponsesDeltaToBaseMessageChunk(e){const t=[];let r,n={};const o=[],i={},s={};let a;if("response.output_text.delta"===e.type)t.push({type:"text",text:e.delta,index:e.content_index});else if("response.output_text_annotation.added"===e.type)t.push({type:"text",text:"",annotations:[e.annotation],index:e.content_index});else if("response.output_item.added"===e.type&&"message"===e.item.type)a=e.item.id;else if("response.output_item.added"===e.type&&"function_call"===e.item.type)o.push({type:"tool_call_chunk",name:e.item.name,args:e.item.arguments,id:e.item.call_id,index:e.output_index}),s[_FUNCTION_CALL_IDS_MAP_KEY]={[e.item.call_id]:e.item.id};else if("response.output_item.done"===e.type&&["web_search_call","file_search_call","computer_call","code_interpreter_call","mcp_call","mcp_list_tools","mcp_approval_request","image_generation_call"].includes(e.item.type))s.tool_outputs=[e.item];else if("response.created"===e.type)i.id=e.response.id,i.model_name=e.response.model,i.model=e.response.model;else if("response.completed"===e.type){const t=_convertOpenAIResponsesMessageToBaseMessage(e.response);r=e.response.usage,"json_schema"===e.response.text?.format?.type&&(s.parsed??(s.parsed=JSON.parse(t.text)));for(const[r,n]of Object.entries(e.response))"id"!==r&&(i[r]=n)}else if("response.function_call_arguments.delta"===e.type)o.push({type:"tool_call_chunk",args:e.delta,index:e.output_index});else if("response.web_search_call.completed"===e.type||"response.file_search_call.completed"===e.type)n={tool_outputs:{id:e.item_id,type:e.type.replace("response.","").replace(".completed",""),status:"completed"}};else if("response.refusal.done"===e.type)s.refusal=e.refusal;else if("response.output_item.added"===e.type&&"item"in e&&"reasoning"===e.item.type){const t=e.item.summary?e.item.summary.map((e,t)=>({...e,index:t})):void 0;s.reasoning={id:e.item.id,type:e.item.type,...t?{summary:t}:{}}}else if("response.reasoning_summary_part.added"===e.type)s.reasoning={type:"reasoning",summary:[{...e.part,index:e.summary_index}]};else{if("response.reasoning_summary_text.delta"!==e.type)return e.type,null;s.reasoning={type:"reasoning",summary:[{text:e.delta,type:"summary_text",index:e.summary_index}]}}return new ChatGenerationChunk({text:t.map(e=>e.text).join(""),message:new AIMessageChunk({id:a,content:t,tool_call_chunks:o,usage_metadata:r,additional_kwargs:s,response_metadata:i}),generationInfo:n})}function isBuiltInTool(e){return"type"in e&&"function"!==e.type}function isBuiltInToolChoice(e){return null!=e&&"object"==typeof e&&"type"in e&&"function"!==e.type}function _reduceChatOpenAIToolsForResponses(e,t){const r=[];for(const n of e)isBuiltInTool(n)?("image_generation"===n.type&&t?.stream&&(n.partial_images=1),r.push(n)):isOpenAITool(n)&&r.push({type:"function",name:n.function.name,parameters:n.function.parameters,description:n.function.description,strict:t?.strict??null});return r}function _convertChatOpenAIToolTypeToOpenAITool(e,t){return isOpenAITool(e)?void 0!==t?.strict?{...e,function:{...e.function,strict:t.strict}}:e:_convertToOpenAITool(e,t)}function isReasoningModel(e){return e&&/^o\d/.test(e)}class ChatOpenAI extends BaseChatModel{static lc_name(){return"ChatOpenAI"}get callKeys(){return[...super.callKeys,"options","function_call","functions","tools","tool_choice","promptIndex","response_format","seed","reasoning_effort","service_tier"]}get lc_secrets(){return{openAIApiKey:"OPENAI_API_KEY",apiKey:"OPENAI_API_KEY",organization:"OPENAI_ORGANIZATION"}}get lc_aliases(){return{modelName:"model",openAIApiKey:"openai_api_key",apiKey:"openai_api_key"}}get lc_serializable_keys(){return["configuration","logprobs","topLogprobs","prefixMessages","supportsStrictToolCalling","modalities","audio","reasoningEffort","temperature","maxTokens","topP","frequencyPenalty","presencePenalty","n","logitBias","user","streaming","streamUsage","modelName","model","modelKwargs","stop","stopSequences","timeout","openAIApiKey","apiKey","cache","maxConcurrency","maxRetries","verbose","callbacks","tags","metadata","disableStreaming","useResponsesApi","zdrEnabled","reasoning"]}constructor(e){super(e??{}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"temperature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"frequencyPenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"presencePenalty",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"n",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logitBias",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modelName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:"gpt-3.5-turbo"}),Object.defineProperty(this,"modelKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"stopSequences",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"timeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streaming",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"streamUsage",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"logprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"topLogprobs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"openAIApiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiKey",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"organization",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"__includeRawResponse",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"client",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientConfig",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"supportsStrictToolCalling",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"audio",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"modalities",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoningEffort",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reasoning",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"useResponsesApi",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"zdrEnabled",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"service_tier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.openAIApiKey=e?.apiKey??e?.openAIApiKey??e?.configuration?.apiKey??getEnvironmentVariable("OPENAI_API_KEY"),this.apiKey=this.openAIApiKey,this.organization=e?.configuration?.organization??getEnvironmentVariable("OPENAI_ORGANIZATION"),this.model=e?.model??e?.modelName??this.model,this.modelName=this.model,this.modelKwargs=e?.modelKwargs??{},this.timeout=e?.timeout,this.temperature=e?.temperature??this.temperature,this.topP=e?.topP??this.topP,this.frequencyPenalty=e?.frequencyPenalty??this.frequencyPenalty,this.presencePenalty=e?.presencePenalty??this.presencePenalty,this.logprobs=e?.logprobs,this.topLogprobs=e?.topLogprobs,this.n=e?.n??this.n,this.logitBias=e?.logitBias,this.stop=e?.stopSequences??e?.stop,this.stopSequences=this.stop,this.user=e?.user,this.__includeRawResponse=e?.__includeRawResponse,this.audio=e?.audio,this.modalities=e?.modalities,this.reasoningEffort=e?.reasoningEffort??e?.reasoning?.effort,this.reasoning=e?.reasoning??(e?.reasoningEffort?{effort:e.reasoningEffort}:void 0),this.maxTokens=e?.maxCompletionTokens??e?.maxTokens,this.useResponsesApi=e?.useResponsesApi??this.useResponsesApi,this.disableStreaming=e?.disableStreaming??this.disableStreaming,this.streaming=e?.streaming??!1,this.disableStreaming&&(this.streaming=!1),this.streamUsage=e?.streamUsage??this.streamUsage,this.disableStreaming&&(this.streamUsage=!1),this.clientConfig={apiKey:this.apiKey,organization:this.organization,dangerouslyAllowBrowser:!0,...e?.configuration},void 0!==e?.supportsStrictToolCalling&&(this.supportsStrictToolCalling=e.supportsStrictToolCalling),void 0!==e?.service_tier&&(this.service_tier=e.service_tier),this.zdrEnabled=e?.zdrEnabled??!1}getLsParams(e){const t=this.invocationParams(e);return{ls_provider:"openai",ls_model_name:this.model,ls_model_type:"chat",ls_temperature:t.temperature??void 0,ls_max_tokens:t.max_tokens??void 0,ls_stop:e.stop}}bindTools(e,t){let r;return void 0!==t?.strict?r=t.strict:void 0!==this.supportsStrictToolCalling&&(r=this.supportsStrictToolCalling),this.withConfig({tools:e.map(e=>isBuiltInTool(e)?e:_convertChatOpenAIToolTypeToOpenAITool(e,{strict:r})),...t})}createResponseFormat(e){return e&&"json_schema"===e.type&&e.json_schema.schema&&isInteropZodSchema(e.json_schema.schema)?interopZodResponseFormat(e.json_schema.schema,e.json_schema.name,{description:e.json_schema.description}):e}getReasoningParams(e){if(!isReasoningModel(this.model))return;let t;return void 0!==this.reasoningEffort&&(t={effort:this.reasoningEffort}),void 0!==this.reasoning&&(t={...t,...this.reasoning}),void 0!==e?.reasoning_effort&&(t={...t,effort:e.reasoning_effort}),void 0!==e?.reasoning&&(t={...t,...e.reasoning}),t}invocationParams(e,t){let r;if(void 0!==e?.strict?r=e.strict:void 0!==this.supportsStrictToolCalling&&(r=this.supportsStrictToolCalling),this._useResponseApi(e)){const t={model:this.model,temperature:this.temperature,top_p:this.topP,user:this.user,stream:this.streaming,previous_response_id:e?.previous_response_id,truncation:e?.truncation,include:e?.include,tools:e?.tools?.length?_reduceChatOpenAIToolsForResponses(e.tools,{stream:this.streaming,strict:r}):void 0,tool_choice:isBuiltInToolChoice(e?.tool_choice)?e?.tool_choice:(()=>{const t=formatToOpenAIToolChoice(e?.tool_choice);return"object"==typeof t&&"type"in t?{type:"function",name:t.function.name}:void 0})(),text:(()=>{if(e?.text)return e.text;const t=this.createResponseFormat(e?.response_format);return"json_schema"===t?.type?null!=t.json_schema.schema?{format:{type:"json_schema",schema:t.json_schema.schema,description:t.json_schema.description,name:t.json_schema.name,strict:t.json_schema.strict}}:void 0:{format:t}})(),parallel_tool_calls:e?.parallel_tool_calls,max_output_tokens:-1===this.maxTokens?void 0:this.maxTokens,...this.zdrEnabled?{store:!1}:{},...this.modelKwargs},n=this.getReasoningParams(e);return void 0!==n&&(t.reasoning=n),t}let n={};void 0!==e?.stream_options?n={stream_options:e.stream_options}:this.streamUsage&&(this.streaming||t?.streaming)&&(n={stream_options:{include_usage:!0}});const o={model:this.model,temperature:this.temperature,top_p:this.topP,frequency_penalty:this.frequencyPenalty,presence_penalty:this.presencePenalty,logprobs:this.logprobs,top_logprobs:this.topLogprobs,n:this.n,logit_bias:this.logitBias,stop:e?.stop??this.stopSequences,user:this.user,stream:this.streaming,functions:e?.functions,function_call:e?.function_call,tools:e?.tools?.length?e.tools.map(e=>_convertChatOpenAIToolTypeToOpenAITool(e,{strict:r})):void 0,tool_choice:formatToOpenAIToolChoice(e?.tool_choice),response_format:this.createResponseFormat(e?.response_format),seed:e?.seed,...n,parallel_tool_calls:e?.parallel_tool_calls,...this.audio||e?.audio?{audio:this.audio||e?.audio}:{},...this.modalities||e?.modalities?{modalities:this.modalities||e?.modalities}:{},...this.modelKwargs};void 0!==e?.prediction&&(o.prediction=e.prediction),void 0!==this.service_tier&&(o.service_tier=this.service_tier),void 0!==e?.service_tier&&(o.service_tier=e.service_tier);const i=this.getReasoningParams(e);return void 0!==i&&void 0!==i.effort&&(o.reasoning_effort=i.effort),isReasoningModel(o.model)?o.max_completion_tokens=-1===this.maxTokens?void 0:this.maxTokens:o.max_tokens=-1===this.maxTokens?void 0:this.maxTokens,o}_convertOpenAIChatCompletionMessageToBaseMessage(e,t){const r=e.tool_calls;if("assistant"===e.role){const o=[],i=[];for(const e of r??[])try{o.push(parseToolCall(e,{returnId:!0}))}catch(n){i.push(makeInvalidToolCall(e,n.message))}const s={function_call:e.function_call,tool_calls:r};void 0!==this.__includeRawResponse&&(s.__raw_response=t);const a={model_name:t.model,...t.system_fingerprint?{usage:{...t.usage},system_fingerprint:t.system_fingerprint}:{}};return e.audio&&(s.audio=e.audio),new AIMessage({content:e.content||"",tool_calls:o,invalid_tool_calls:i,additional_kwargs:s,response_metadata:a,id:t.id})}return new ChatMessage(e.content||"",e.role??"unknown")}_convertOpenAIDeltaToBaseMessageChunk(e,t,r){const n=e.role??r,o=e.content??"";let i;i=e.function_call?{function_call:e.function_call}:e.tool_calls?{tool_calls:e.tool_calls}:{},this.__includeRawResponse&&(i.__raw_response=t),e.audio&&(i.audio={...e.audio,index:t.choices[0].index});const s={usage:{...t.usage}};if("user"===n)return new HumanMessageChunk({content:o,response_metadata:s});if("assistant"===n){const r=[];if(Array.isArray(e.tool_calls))for(const t of e.tool_calls)r.push({name:t.function?.name,args:t.function?.arguments,id:t.id,index:t.index,type:"tool_call_chunk"});return new AIMessageChunk({content:o,tool_call_chunks:r,additional_kwargs:i,id:t.id,response_metadata:s})}return"system"===n?new SystemMessageChunk({content:o,response_metadata:s}):"developer"===n?new SystemMessageChunk({content:o,response_metadata:s,additional_kwargs:{__openai_role__:"developer"}}):"function"===n?new FunctionMessageChunk({content:o,additional_kwargs:i,name:e.name,response_metadata:s}):"tool"===n?new ToolMessageChunk({content:o,additional_kwargs:i,tool_call_id:e.tool_call_id,response_metadata:s}):new ChatMessageChunk({content:o,role:n,response_metadata:s})}_identifyingParams(){return{model_name:this.model,...this.invocationParams(),...this.clientConfig}}async*_streamResponseChunks(e,t,r){if(this._useResponseApi(t)){const r=await this.responseApiWithRetry({...this.invocationParams(t,{streaming:!0}),input:_convertMessagesToOpenAIResponsesParams(e,this.model,this.zdrEnabled),stream:!0},t);for await(const e of r){const t=_convertOpenAIResponsesDeltaToBaseMessageChunk(e);null!=t&&(yield t)}return}const n=_convertMessagesToOpenAIParams(e,this.model),o={...this.invocationParams(t,{streaming:!0}),messages:n,stream:!0};let i;const s=await this.completionWithRetry(o,t);let a;for await(const c of s){const e=c?.choices?.[0];if(c.usage&&(a=c.usage),!e)continue;const{delta:n}=e;if(!n)continue;const o=this._convertOpenAIDeltaToBaseMessageChunk(n,c,i);i=n.role??i;const s={prompt:t.promptIndex??0,completion:e.index??0};if("string"!=typeof o.content){console.log("[WARNING]: Received non-string content from OpenAI. This is currently not supported.");continue}const u={...s};null!=e.finish_reason&&(u.finish_reason=e.finish_reason,u.system_fingerprint=c.system_fingerprint,u.model_name=c.model,u.service_tier=c.service_tier),this.logprobs&&(u.logprobs=e.logprobs);const l=new ChatGenerationChunk({message:o,text:o.content,generationInfo:u});yield l,await(r?.handleLLMNewToken(l.text??"",s,void 0,void 0,void 0,{chunk:l}))}if(a){const e={...null!==a.prompt_tokens_details?.audio_tokens&&{audio:a.prompt_tokens_details?.audio_tokens},...null!==a.prompt_tokens_details?.cached_tokens&&{cache_read:a.prompt_tokens_details?.cached_tokens}},t={...null!==a.completion_tokens_details?.audio_tokens&&{audio:a.completion_tokens_details?.audio_tokens},...null!==a.completion_tokens_details?.reasoning_tokens&&{reasoning:a.completion_tokens_details?.reasoning_tokens}},r=new ChatGenerationChunk({message:new AIMessageChunk({content:"",response_metadata:{usage:{...a}},usage_metadata:{input_tokens:a.prompt_tokens,output_tokens:a.completion_tokens,total_tokens:a.total_tokens,...Object.keys(e).length>0&&{input_token_details:e},...Object.keys(t).length>0&&{output_token_details:t}}}),text:""});yield r}if(t.signal?.aborted)throw new Error("AbortError")}identifyingParams(){return this._identifyingParams()}async _responseApiGenerate(e,t,r){const n=this.invocationParams(t);if(n.stream){const n=this._streamResponseChunks(e,t,r);let o;for await(const e of n)e.message.response_metadata={...e.generationInfo,...e.message.response_metadata},o=o?.concat(e)??e;return{generations:o?[o]:[],llmOutput:{estimatedTokenUsage:o?.message?.usage_metadata}}}const o=_convertMessagesToOpenAIResponsesParams(e,this.model,this.zdrEnabled),i=await this.responseApiWithRetry({input:o,...n},{signal:t?.signal,...t?.options});return{generations:[{text:i.output_text,message:_convertOpenAIResponsesMessageToBaseMessage(i)}],llmOutput:{id:i.id,estimatedTokenUsage:i.usage?{promptTokens:i.usage.input_tokens,completionTokens:i.usage.output_tokens,totalTokens:i.usage.total_tokens}:void 0}}}_useResponseApi(e){const t=e?.tools?.some(isBuiltInTool),r=null!=e?.previous_response_id||null!=e?.text||null!=e?.truncation||null!=e?.include||null!=e?.reasoning?.summary||null!=this.reasoning?.summary;return this.useResponsesApi||t||r}async _generate(e,t,r){if(this._useResponseApi(t))return this._responseApiGenerate(e,t,r);const n={},o=this.invocationParams(t),i=_convertMessagesToOpenAIParams(e,this.model);if(o.stream){const o=this._streamResponseChunks(e,t,r),i={};for await(const e of o){e.message.response_metadata={...e.generationInfo,...e.message.response_metadata};const t=e.generationInfo?.completion??0;void 0===i[t]?i[t]=e:i[t]=i[t].concat(e)}const s=Object.entries(i).sort(([e],[t])=>parseInt(e,10)-parseInt(t,10)).map(([e,t])=>t),{functions:a,function_call:c}=this.invocationParams(t),u=await this.getEstimatedTokenCountFromPrompt(e,a,c),l=await this.getNumTokensFromGenerations(s);return n.input_tokens=u,n.output_tokens=l,n.total_tokens=u+l,{generations:s,llmOutput:{estimatedTokenUsage:{promptTokens:n.input_tokens,completionTokens:n.output_tokens,totalTokens:n.total_tokens}}}}{let e;e=t.response_format&&"json_schema"===t.response_format.type?await this.betaParsedCompletionWithRetry({...o,stream:!1,messages:i},{signal:t?.signal,...t?.options}):await this.completionWithRetry({...o,stream:!1,messages:i},{signal:t?.signal,...t?.options});const{completion_tokens:r,prompt_tokens:s,total_tokens:a,prompt_tokens_details:c,completion_tokens_details:u}=e?.usage??{};r&&(n.output_tokens=(n.output_tokens??0)+r),s&&(n.input_tokens=(n.input_tokens??0)+s),a&&(n.total_tokens=(n.total_tokens??0)+a),null===c?.audio_tokens&&null===c?.cached_tokens||(n.input_token_details={...null!==c?.audio_tokens&&{audio:c?.audio_tokens},...null!==c?.cached_tokens&&{cache_read:c?.cached_tokens}}),null===u?.audio_tokens&&null===u?.reasoning_tokens||(n.output_token_details={...null!==u?.audio_tokens&&{audio:u?.audio_tokens},...null!==u?.reasoning_tokens&&{reasoning:u?.reasoning_tokens}});const l=[];for(const t of e?.choices??[]){const r={text:t.message?.content??"",message:this._convertOpenAIChatCompletionMessageToBaseMessage(t.message??{role:"assistant"},e)};r.generationInfo={...t.finish_reason?{finish_reason:t.finish_reason}:{},...t.logprobs?{logprobs:t.logprobs}:{}},isAIMessage(r.message)&&(r.message.usage_metadata=n),r.message=new AIMessage(Object.fromEntries(Object.entries(r.message).filter(([e])=>!e.startsWith("lc_")))),l.push(r)}return{generations:l,llmOutput:{tokenUsage:{promptTokens:n.input_tokens,completionTokens:n.output_tokens,totalTokens:n.total_tokens}}}}}async getEstimatedTokenCountFromPrompt(e,t,r){let n=(await this.getNumTokensFromMessages(e)).totalCount;if(t&&"auto"!==r){const e=formatFunctionDefinitions(t);n+=await this.getNumTokens(e),n+=9}return t&&e.find(e=>"system"===e._getType())&&(n-=4),"none"===r?n+=1:"object"==typeof r&&(n+=await this.getNumTokens(r.name)+4),n}async getNumTokensFromGenerations(e){return(await Promise.all(e.map(async e=>e.message.additional_kwargs?.function_call?(await this.getNumTokensFromMessages([e.message])).countPerMessage[0]:await this.getNumTokens(e.message.content)))).reduce((e,t)=>e+t,0)}async getNumTokensFromMessages(e){let t=0,r=0,n=0;"gpt-3.5-turbo-0301"===this.model?(r=4,n=-1):(r=3,n=1);const o=await Promise.all(e.map(async e=>{const o=await this.getNumTokens(e.content),i=await this.getNumTokens(messageToOpenAIRole(e)),s=void 0!==e.name?n+await this.getNumTokens(e.name):0;let a=o+r+i+s;const c=e;if("function"===c._getType()&&(a-=2),c.additional_kwargs?.function_call&&(a+=3),c?.additional_kwargs.function_call?.name&&(a+=await this.getNumTokens(c.additional_kwargs.function_call?.name)),c.additional_kwargs.function_call?.arguments)try{a+=await this.getNumTokens(JSON.stringify(JSON.parse(c.additional_kwargs.function_call?.arguments)))}catch(u){console.error("Error parsing function arguments",u,JSON.stringify(c.additional_kwargs.function_call)),a+=await this.getNumTokens(c.additional_kwargs.function_call?.arguments)}return t+=a,a}));return t+=3,{totalCount:t,countPerMessage:o}}async completionWithRetry(e,t){const r=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.chat.completions.create(e,r)}catch(t){throw wrapOpenAIClientError(t)}})}async responseApiWithRetry(e,t){return this.caller.call(async()=>{const r=this._getClientOptions(t);try{return"json_schema"!==e.text?.format?.type||e.stream?await this.client.responses.create(e,r):await this.client.responses.parse(e,r)}catch(n){throw wrapOpenAIClientError(n)}})}async betaParsedCompletionWithRetry(e,t){const r=this._getClientOptions(t);return this.caller.call(async()=>{try{return await this.client.chat.completions.parse(e,r)}catch(t){throw wrapOpenAIClientError(t)}})}_getClientOptions(e){if(!this.client){const e=getEndpoint({baseURL:this.clientConfig.baseURL}),t={...this.clientConfig,baseURL:e,timeout:this.timeout,maxRetries:0};t.baseURL||delete t.baseURL,this.client=new OpenAI$1(t)}return{...this.clientConfig,...e}}_llmType(){return"openai"}_combineLLMOutput(...e){return e.reduce((e,t)=>(t&&t.tokenUsage&&(e.tokenUsage.completionTokens+=t.tokenUsage.completionTokens??0,e.tokenUsage.promptTokens+=t.tokenUsage.promptTokens??0,e.tokenUsage.totalTokens+=t.tokenUsage.totalTokens??0),e),{tokenUsage:{completionTokens:0,promptTokens:0,totalTokens:0}})}withStructuredOutput(e,t){let r,n,o,i,s,a;if(isStructuredOutputMethodParams(e)?(r=e.schema,n=e.name,o=e.method,i=e.includeRaw):(r=e,n=t?.name,o=t?.method,i=t?.includeRaw),void 0!==t?.strict&&"jsonMode"===o)throw new Error("Argument `strict` is only supported for `method` = 'function_calling'");if(this.model.startsWith("gpt-3")||this.model.startsWith("gpt-4-")||"gpt-4"===this.model?"jsonSchema"===o&&console.warn(`[WARNING]: JSON Schema is not supported for model "${this.model}". Falling back to tool calling.`):void 0===o&&(o="jsonSchema"),"jsonMode"===o){let e;isInteropZodSchema(r)?(a=StructuredOutputParser.fromZodSchema(r),e=toJsonSchema(r)):a=new JsonOutputParser,s=this.withConfig({response_format:{type:"json_object"},ls_structured_output_format:{kwargs:{method:"jsonMode"},schema:e}})}else if("jsonSchema"===o)if(s=this.withConfig({response_format:{type:"json_schema",json_schema:{name:n??"extract",description:getSchemaDescription(r),schema:r,strict:t?.strict}},ls_structured_output_format:{kwargs:{method:"jsonSchema"},schema:toJsonSchema(r)}}),isInteropZodSchema(r)){const e=StructuredOutputParser.fromZodSchema(r);a=RunnableLambda.from(t=>"parsed"in t.additional_kwargs?t.additional_kwargs.parsed:e)}else a=new JsonOutputParser;else{let e=n??"extract";if(isInteropZodSchema(r)){const n=toJsonSchema(r);s=this.withConfig({tools:[{type:"function",function:{name:e,description:n.description,parameters:n}}],tool_choice:{type:"function",function:{name:e}},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:n},...void 0!==t?.strict?{strict:t.strict}:{}}),a=new JsonOutputKeyToolsParser({returnSingle:!0,keyName:e,zodSchema:r})}else{let n;"string"==typeof r.name&&"object"==typeof r.parameters&&null!=r.parameters?(n=r,e=r.name):(e=r.title??e,n={name:e,description:r.description??"",parameters:r}),s=this.withConfig({tools:[{type:"function",function:n}],tool_choice:{type:"function",function:{name:e}},ls_structured_output_format:{kwargs:{method:"functionCalling"},schema:toJsonSchema(r)},...void 0!==t?.strict?{strict:t.strict}:{}}),a=new JsonOutputKeyToolsParser({returnSingle:!0,keyName:e})}}if(!i)return s.pipe(a);const c=RunnablePassthrough.assign({parsed:(e,t)=>a.invoke(e.raw,t)}),u=RunnablePassthrough.assign({parsed:()=>null}),l=c.withFallbacks({fallbacks:[u]});return RunnableSequence.from([{raw:s},l])}}function isStructuredOutputMethodParams(e){return void 0!==e&&"object"==typeof e.schema}function makeParseableResponseFormat(e,t){const r={...e};return Object.defineProperties(r,{$brand:{value:"auto-parseable-response-format",enumerable:!1},$parseRaw:{value:t,enumerable:!1}}),r}function interopZodResponseFormat(e,t,r){if(isZodSchemaV3(e))return zodResponseFormat(e,t,r);if(isZodSchemaV4(e))return makeParseableResponseFormat({type:"json_schema",json_schema:{...r,name:t,strict:!0,schema:toJSONSchema(e,{cycles:"ref",reused:"ref",override(e){e.jsonSchema.title=t}})}},t=>parse$1(e,JSON.parse(t)));throw new Error("Unsupported schema response format")}class StructuredTool extends BaseLangChain{get lc_namespace(){return["langchain","tools"]}constructor(e){super(e??{}),Object.defineProperty(this,"returnDirect",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"verboseParsingErrors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"responseFormat",{enumerable:!0,configurable:!0,writable:!0,value:"content"}),this.verboseParsingErrors=e?.verboseParsingErrors??this.verboseParsingErrors,this.responseFormat=e?.responseFormat??this.responseFormat}async invoke(e,t){let r,n=ensureConfig(t);return _isToolCall(e)?(r=e.args,n={...n,toolCall:e}):r=e,this.call(r,n)}async call(e,t,r){const n=_isToolCall(e)?e.args:e;let o;if(isInteropZodSchema(this.schema))try{o=await interopParseAsync(this.schema,n)}catch(f){let t="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(t=`${t}\nDetails: ${f.message}`),new ToolInputParsingException(t,JSON.stringify(e))}else{const t=validate(n,this.schema);if(!t.valid){let r="Received tool input did not match expected schema";throw this.verboseParsingErrors&&(r=`${r}\nDetails: ${t.errors.map(e=>`${e.keywordLocation}: ${e.error}`).join("\n")}`),new ToolInputParsingException(r,JSON.stringify(e))}o=n}const i=parseCallbackConfigArg(t),s=CallbackManager.configure(i.callbacks,this.callbacks,i.tags||r,this.tags,i.metadata,this.metadata,{verbose:this.verbose}),a=await(s?.handleToolStart(this.toJSON(),"string"==typeof e?e:JSON.stringify(e),i.runId,void 0,void 0,void 0,i.runName));let c,u,l,d;delete i.runId;try{c=await this._call(o,a,i)}catch(f){throw await(a?.handleToolError(f)),f}if("content_and_artifact"===this.responseFormat){if(!Array.isArray(c)||2!==c.length)throw new Error(`Tool response format is "content_and_artifact" but the output was not a two-tuple.\nResult: ${JSON.stringify(c)}`);[u,l]=c}else u=c;_isToolCall(e)&&(d=e.id),!d&&_configHasToolCallId(i)&&(d=i.toolCall.id);const h=_formatToolOutput({content:u,artifact:l,toolCallId:d,name:this.name});return await(a?.handleToolEnd(h)),h}}class Tool extends StructuredTool{constructor(e){super(e),Object.defineProperty(this,"schema",{enumerable:!0,configurable:!0,writable:!0,value:objectType({input:stringType().optional()}).transform(e=>e.input)})}call(e,t){const r="string"==typeof e||null==e?{input:e}:e;return super.call(r,t)}}function _formatToolOutput(e){const{content:t,artifact:r,toolCallId:n}=e;return n&&!isDirectToolOutput(t)?"string"==typeof t||Array.isArray(t)&&t.every(e=>"object"==typeof e)?new ToolMessage({content:t,artifact:r,tool_call_id:n,name:e.name}):new ToolMessage({content:_stringify(t),artifact:r,tool_call_id:n,name:e.name}):t}function _stringify(e){try{return JSON.stringify(e,null,2)??""}catch(t){return`${e}`}}class BasePromptTemplate extends Runnable{get lc_attributes(){return{partialVariables:void 0}}constructor(e){super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts",this._getPromptType()]}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"partialVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0});const{inputVariables:t}=e;if(t.includes("stop"))throw new Error("Cannot have an input variable named 'stop', as it is used internally, please rename.");Object.assign(this,e)}async mergePartialAndUserVariables(e){const t=this.partialVariables??{},r={};for(const[n,o]of Object.entries(t))r[n]="string"==typeof o?o:await o();return{...r,...e}}async invoke(e,t){const r={...this.metadata,...t?.metadata},n=[...this.tags??[],...t?.tags??[]];return this._callWithConfig(e=>this.formatPromptValue(e),e,{...t,tags:n,metadata:r,runType:"prompt"})}serialize(){throw new Error("Use .toJSON() instead")}static async deserialize(e){switch(e._type){case"prompt":{const{PromptTemplate:t}=await Promise.resolve().then(()=>prompt);return t.deserialize(e)}case void 0:{const{PromptTemplate:t}=await Promise.resolve().then(()=>prompt);return t.deserialize({...e,_type:"prompt"})}case"few_shot":{const{FewShotPromptTemplate:t}=await Promise.resolve().then(()=>few_shot);return t.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class BaseStringPromptTemplate extends BasePromptTemplate{async formatPromptValue(e){const t=await this.format(e);return new StringPromptValue(t)}}
/*!
   * mustache.js - Logic-less {{mustache}} templates with JavaScript
   * http://github.com/janl/mustache.js
   */var objectToString=Object.prototype.toString,isArray=Array.isArray||function(e){return"[object Array]"===objectToString.call(e)};function isFunction(e){return"function"==typeof e}function typeStr(e){return isArray(e)?"array":typeof e}function escapeRegExp(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function hasProperty(e,t){return null!=e&&"object"==typeof e&&t in e}function primitiveHasOwnProperty(e,t){return null!=e&&"object"!=typeof e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var regExpTest=RegExp.prototype.test;function testRegExp(e,t){return regExpTest.call(e,t)}var nonSpaceRe=/\S/;function isWhitespace(e){return!testRegExp(nonSpaceRe,e)}var entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function escapeHtml(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return entityMap[e]})}var whiteRe=/\s*/,spaceRe=/\s+/,equalsRe=/\s*=/,curlyRe=/\s*\}/,tagRe=/#|\^|\/|>|\{|&|=|!/;function parseTemplate$1(e,t){if(!e)return[];var r,n,o,i=!1,s=[],a=[],c=[],u=!1,l=!1,d="",h=0;function f(){if(u&&!l)for(;c.length;)delete a[c.pop()];else c=[];u=!1,l=!1}function p(e){if("string"==typeof e&&(e=e.split(spaceRe,2)),!isArray(e)||2!==e.length)throw new Error("Invalid tags: "+e);r=new RegExp(escapeRegExp(e[0])+"\\s*"),n=new RegExp("\\s*"+escapeRegExp(e[1])),o=new RegExp("\\s*"+escapeRegExp("}"+e[1]))}p(t||mustache.tags);for(var m,y,g,b,_,w,v=new Scanner(e);!v.eos();){if(m=v.pos,g=v.scanUntil(r))for(var I=0,k=g.length;I<k;++I)isWhitespace(b=g.charAt(I))?(c.push(a.length),d+=b):(l=!0,i=!0,d+=" "),a.push(["text",b,m,m+1]),m+=1,"\n"===b&&(f(),d="",h=0,i=!1);if(!v.scan(r))break;if(u=!0,y=v.scan(tagRe)||"name",v.scan(whiteRe),"="===y?(g=v.scanUntil(equalsRe),v.scan(equalsRe),v.scanUntil(n)):"{"===y?(g=v.scanUntil(o),v.scan(curlyRe),v.scanUntil(n),y="&"):g=v.scanUntil(n),!v.scan(n))throw new Error("Unclosed tag at "+v.pos);if(_=">"==y?[y,g,m,v.pos,d,h,i]:[y,g,m,v.pos],h++,a.push(_),"#"===y||"^"===y)s.push(_);else if("/"===y){if(!(w=s.pop()))throw new Error('Unopened section "'+g+'" at '+m);if(w[1]!==g)throw new Error('Unclosed section "'+w[1]+'" at '+m)}else"name"===y||"{"===y||"&"===y?l=!0:"="===y&&p(g)}if(f(),w=s.pop())throw new Error('Unclosed section "'+w[1]+'" at '+v.pos);return nestTokens(squashTokens(a))}function squashTokens(e){for(var t,r,n=[],o=0,i=e.length;o<i;++o)(t=e[o])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}function nestTokens(e){for(var t,r=[],n=r,o=[],i=0,s=e.length;i<s;++i)switch((t=e[i])[0]){case"#":case"^":n.push(t),o.push(t),n=t[4]=[];break;case"/":o.pop()[5]=t[2],n=o.length>0?o[o.length-1][4]:r;break;default:n.push(t)}return r}function Scanner(e){this.string=e,this.tail=e,this.pos=0}function Context(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function Writer(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}Scanner.prototype.eos=function(){return""===this.tail},Scanner.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},Scanner.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},Context.prototype.push=function(e){return new Context(e,this)},Context.prototype.lookup=function(e){var t,r=this.cache;if(r.hasOwnProperty(e))t=r[e];else{for(var n,o,i,s=this,a=!1;s;){if(e.indexOf(".")>0)for(n=s.view,o=e.split("."),i=0;null!=n&&i<o.length;)i===o.length-1&&(a=hasProperty(n,o[i])||primitiveHasOwnProperty(n,o[i])),n=n[o[i++]];else n=s.view[e],a=hasProperty(s.view,e);if(a){t=n;break}s=s.parent}r[e]=t}return isFunction(t)&&(t=t.call(this.view)),t},Writer.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},Writer.prototype.parse=function(e,t){var r=this.templateCache,n=e+":"+(t||mustache.tags).join(":"),o=void 0!==r,i=o?r.get(n):void 0;return null==i&&(i=parseTemplate$1(e,t),o&&r.set(n,i)),i},Writer.prototype.render=function(e,t,r,n){var o=this.getConfigTags(n),i=this.parse(e,o),s=t instanceof Context?t:new Context(t,void 0);return this.renderTokens(i,s,r,e,n)},Writer.prototype.renderTokens=function(e,t,r,n,o){for(var i,s,a,c="",u=0,l=e.length;u<l;++u)a=void 0,"#"===(s=(i=e[u])[0])?a=this.renderSection(i,t,r,n,o):"^"===s?a=this.renderInverted(i,t,r,n,o):">"===s?a=this.renderPartial(i,t,r,o):"&"===s?a=this.unescapedValue(i,t):"name"===s?a=this.escapedValue(i,t,o):"text"===s&&(a=this.rawValue(i)),void 0!==a&&(c+=a);return c},Writer.prototype.renderSection=function(e,t,r,n,o){var i=this,s="",a=t.lookup(e[1]);if(a){if(isArray(a))for(var c=0,u=a.length;c<u;++c)s+=this.renderTokens(e[4],t.push(a[c]),r,n,o);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)s+=this.renderTokens(e[4],t.push(a),r,n,o);else if(isFunction(a)){if("string"!=typeof n)throw new Error("Cannot use higher-order sections without the original template");null!=(a=a.call(t.view,n.slice(e[3],e[5]),function(e){return i.render(e,t,r,o)}))&&(s+=a)}else s+=this.renderTokens(e[4],t,r,n,o);return s}},Writer.prototype.renderInverted=function(e,t,r,n,o){var i=t.lookup(e[1]);if(!i||isArray(i)&&0===i.length)return this.renderTokens(e[4],t,r,n,o)},Writer.prototype.indentPartial=function(e,t,r){for(var n=t.replace(/[^ \t]/g,""),o=e.split("\n"),i=0;i<o.length;i++)o[i].length&&(i>0||!r)&&(o[i]=n+o[i]);return o.join("\n")},Writer.prototype.renderPartial=function(e,t,r,n){if(r){var o=this.getConfigTags(n),i=isFunction(r)?r(e[1]):r[e[1]];if(null!=i){var s=e[6],a=e[5],c=e[4],u=i;0==a&&c&&(u=this.indentPartial(i,c,s));var l=this.parse(u,o);return this.renderTokens(l,t,r,u,n)}}},Writer.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},Writer.prototype.escapedValue=function(e,t,r){var n=this.getConfigEscape(r)||mustache.escape,o=t.lookup(e[1]);if(null!=o)return"number"==typeof o&&n===mustache.escape?String(o):n(o)},Writer.prototype.rawValue=function(e){return e[1]},Writer.prototype.getConfigTags=function(e){return isArray(e)?e:e&&"object"==typeof e?e.tags:void 0},Writer.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!isArray(e)?e.escape:void 0};var mustache={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){defaultWriter.templateCache=e},get templateCache(){return defaultWriter.templateCache}},defaultWriter=new Writer;function configureMustache(){mustache.escape=e=>e}mustache.clearCache=function(){return defaultWriter.clearCache()},mustache.parse=function(e,t){return defaultWriter.parse(e,t)},mustache.render=function(e,t,r,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+typeStr(e)+'" was given as the first argument for mustache#render(template, view, partials)');return defaultWriter.render(e,t,r,n)},mustache.escape=escapeHtml,mustache.Scanner=Scanner,mustache.Context=Context,mustache.Writer=Writer;const parseFString=e=>{const t=e.split(""),r=[],n=(e,r)=>{for(let n=r;n<t.length;n+=1)if(e.includes(t[n]))return n;return-1};let o=0;for(;o<t.length;)if("{"===t[o]&&o+1<t.length&&"{"===t[o+1])r.push({type:"literal",text:"{"}),o+=2;else if("}"===t[o]&&o+1<t.length&&"}"===t[o+1])r.push({type:"literal",text:"}"}),o+=2;else if("{"===t[o]){const e=n("}",o);if(e<0)throw new Error("Unclosed '{' in template.");r.push({type:"variable",name:t.slice(o+1,e).join("")}),o=e+1}else{if("}"===t[o])throw new Error("Single '}' in template.");{const e=n("{}",o),i=(e<0?t.slice(o):t.slice(o,e)).join("");r.push({type:"literal",text:i}),o=e<0?t.length:e}}return r},mustacheTemplateToNodes=e=>e.map(e=>{if("name"===e[0]){return{type:"variable",name:e[1].includes(".")?e[1].split(".")[0]:e[1]}}return["#","&","^",">"].includes(e[0])?{type:"variable",name:e[1]}:{type:"literal",text:e[1]}}),parseMustache=e=>{configureMustache();const t=mustache.parse(e);return mustacheTemplateToNodes(t)},interpolateFString=(e,t)=>parseFString(e).reduce((e,r)=>{if("variable"===r.type){if(r.name in t){return e+("string"==typeof t[r.name]?t[r.name]:JSON.stringify(t[r.name]))}throw new Error(`(f-string) Missing value for input ${r.name}`)}return e+r.text},""),interpolateMustache=(e,t)=>(configureMustache(),mustache.render(e,t)),DEFAULT_FORMATTER_MAPPING={"f-string":interpolateFString,mustache:interpolateMustache},DEFAULT_PARSER_MAPPING={"f-string":parseFString,mustache:parseMustache},renderTemplate=(e,t,r)=>{try{return DEFAULT_FORMATTER_MAPPING[t](e,r)}catch(n){throw addLangChainErrorFields$1(n,"INVALID_PROMPT_INPUT")}},parseTemplate=(e,t)=>DEFAULT_PARSER_MAPPING[t](e),checkValidTemplate=(e,t,r)=>{if(!(t in DEFAULT_FORMATTER_MAPPING)){const e=Object.keys(DEFAULT_FORMATTER_MAPPING);throw new Error(`Invalid template format. Got \`${t}\`;\n                         should be one of ${e}`)}try{const n=r.reduce((e,t)=>(e[t]="foo",e),{});Array.isArray(e)?e.forEach(e=>{if("text"===e.type)renderTemplate(e.text,t,n);else{if("image_url"!==e.type)throw new Error(`Invalid message template received. ${JSON.stringify(e,null,2)}`);if("string"==typeof e.image_url)renderTemplate(e.image_url,t,n);else{const r=e.image_url.url;renderTemplate(r,t,n)}}}):renderTemplate(e,t,n)}catch(n){throw new Error(`Invalid prompt schema: ${n.message}`)}};class PromptTemplate extends BaseStringPromptTemplate{static lc_name(){return"PromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),"mustache"===e.templateFormat&&void 0===e.validateTemplate&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){if("mustache"===this.templateFormat)throw new Error("Mustache templates cannot be validated.");let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),checkValidTemplate(this.template,this.templateFormat,e)}}_getPromptType(){return"prompt"}async format(e){const t=await this.mergePartialAndUserVariables(e);return renderTemplate(this.template,this.templateFormat,t)}static fromExamples(e,t,r,n="\n\n",o=""){const i=[o,...e,t].join(n);return new PromptTemplate({inputVariables:r,template:i})}static fromTemplate(e,t){const{templateFormat:r="f-string",...n}=t??{},o=new Set;return parseTemplate(e,r).forEach(e=>{"variable"===e.type&&o.add(e.name)}),new PromptTemplate({inputVariables:[...o],templateFormat:r,template:e,...n})}async partial(e){const t=this.inputVariables.filter(t=>!(t in e)),r={...this.partialVariables??{},...e},n={...this,inputVariables:t,partialVariables:r};return new PromptTemplate(n)}serialize(){if(void 0!==this.outputParser)throw new Error("Cannot serialize a prompt template with an output parser");return{_type:this._getPromptType(),input_variables:this.inputVariables,template:this.template,template_format:this.templateFormat}}static async deserialize(e){if(!e.template)throw new Error("Prompt template must have a template");return new PromptTemplate({inputVariables:e.input_variables,template:e.template,templateFormat:e.template_format})}}const prompt=Object.freeze(Object.defineProperty({__proto__:null,PromptTemplate:PromptTemplate},Symbol.toStringTag,{value:"Module"}));class ImagePromptTemplate extends BasePromptTemplate{static lc_name(){return"ImagePromptTemplate"}constructor(e){if(super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","image"]}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"additionalContentFields",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=e.templateFormat??this.templateFormat,this.validateTemplate=e.validateTemplate??this.validateTemplate,this.additionalContentFields=e.additionalContentFields,this.validateTemplate){let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),checkValidTemplate([{type:"image_url",image_url:this.template}],this.templateFormat,e)}}_getPromptType(){return"prompt"}async partial(e){const t=this.inputVariables.filter(t=>!(t in e)),r={...this.partialVariables??{},...e},n={...this,inputVariables:t,partialVariables:r};return new ImagePromptTemplate(n)}async format(e){const t={};for(const[i,s]of Object.entries(this.template))t[i]="string"==typeof s?renderTemplate(s,this.templateFormat,e):s;const r=e.url||t.url,n=e.detail||t.detail;if(!r)throw new Error("Must provide either an image URL.");if("string"!=typeof r)throw new Error("url must be a string.");const o={url:r};return n&&(o.detail=n),o}async formatPromptValue(e){const t=await this.format(e);return new ImagePromptValue(t)}}class DictPromptTemplate extends Runnable{static lc_name(){return"DictPromptTemplate"}constructor(e){const t=e.templateFormat??"f-string",r=_getInputVariables(e.template,t);super({inputVariables:r,...e}),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","dict"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e.template,this.templateFormat=t,this.inputVariables=r}async format(e){return _insertInputVariables(this.template,e,this.templateFormat)}async invoke(e){return await this._callWithConfig(this.format.bind(this),e,{runType:"prompt"})}}function _getInputVariables(e,t){const r=[];for(const n of Object.values(e))if("string"==typeof n)parseTemplate(n,t).forEach(e=>{"variable"===e.type&&r.push(e.name)});else if(Array.isArray(n))for(const e of n)"string"==typeof e?parseTemplate(e,t).forEach(e=>{"variable"===e.type&&r.push(e.name)}):"object"==typeof e&&r.push(..._getInputVariables(e,t));else"object"==typeof n&&null!==n&&r.push(..._getInputVariables(n,t));return Array.from(new Set(r))}function _insertInputVariables(e,t,r){const n={};for(const[o,i]of Object.entries(e))if("string"==typeof i)n[o]=renderTemplate(i,r,t);else if(Array.isArray(i)){const e=[];for(const n of i)"string"==typeof n?e.push(renderTemplate(n,r,t)):"object"==typeof n&&e.push(_insertInputVariables(n,t,r));n[o]=e}else n[o]="object"==typeof i&&null!==i?_insertInputVariables(i,t,r):i;return n}class BaseMessagePromptTemplate extends Runnable{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}async invoke(e,t){return this._callWithConfig(e=>this.formatMessages(e),e,{...t,runType:"prompt"})}}class MessagesPlaceholder extends BaseMessagePromptTemplate{static lc_name(){return"MessagesPlaceholder"}constructor(e){"string"==typeof e&&(e={variableName:e}),super(e),Object.defineProperty(this,"variableName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"optional",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.variableName=e.variableName,this.optional=e.optional??!1}get inputVariables(){return[this.variableName]}async formatMessages(e){const t=e[this.variableName];if(this.optional&&!t)return[];if(!t){const e=new Error(`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages as an input value. Received: undefined`);throw e.name="InputFormatError",e}let r;try{r=Array.isArray(t)?t.map(coerceMessageLikeToMessage):[coerceMessageLikeToMessage(t)]}catch(n){const e="string"==typeof t?t:JSON.stringify(t,null,2),r=new Error([`Field "${this.variableName}" in prompt uses a MessagesPlaceholder, which expects an array of BaseMessages or coerceable values as input.`,`Received value: ${e}`,`Additional message: ${n.message}`].join("\n\n"));throw r.name="InputFormatError",r.lc_error_code=n.lc_error_code,r}return r}}class BaseMessageStringPromptTemplate extends BaseMessagePromptTemplate{constructor(e){"prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt}get inputVariables(){return this.prompt.inputVariables}async formatMessages(e){return[await this.format(e)]}}class BaseChatPromptTemplate extends BasePromptTemplate{constructor(e){super(e)}async format(e){return(await this.formatPromptValue(e)).toString()}async formatPromptValue(e){const t=await this.formatMessages(e);return new ChatPromptValue(t)}}class ChatMessagePromptTemplate extends BaseMessageStringPromptTemplate{static lc_name(){return"ChatMessagePromptTemplate"}constructor(e,t){"prompt"in e||(e={prompt:e,role:t}),super(e),Object.defineProperty(this,"role",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.role=e.role}async format(e){return new ChatMessage(await this.prompt.format(e),this.role)}static fromTemplate(e,t,r){return new this(PromptTemplate.fromTemplate(e,{templateFormat:r?.templateFormat}),t)}}function isTextTemplateParam(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)&&(1===Object.keys(e).length&&"text"in e&&"string"==typeof e.text)}function isImageTemplateParam(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)&&("image_url"in e&&("string"==typeof e.image_url||"object"==typeof e.image_url&&null!==e.image_url&&"url"in e.image_url&&"string"==typeof e.image_url.url))}class _StringImageMessagePromptTemplate extends BaseMessagePromptTemplate{static _messageClass(){throw new Error("Can not invoke _messageClass from inside _StringImageMessagePromptTemplate")}constructor(e,t){if("prompt"in e||(e={prompt:e}),super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain_core","prompts","chat"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"additionalOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"messageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chatMessageClass",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,Array.isArray(this.prompt)){let e=[];this.prompt.forEach(t=>{"inputVariables"in t&&(e=e.concat(t.inputVariables))}),this.inputVariables=e}else this.inputVariables=this.prompt.inputVariables;this.additionalOptions=t??this.additionalOptions}createMessage(e){const t=this.constructor;if(t._messageClass()){return new(t._messageClass())({content:e})}if(t.chatMessageClass){const r=t.chatMessageClass();return new r({content:e,role:this.getRoleFromMessageClass(r.lc_name())})}throw new Error("No message class defined")}getRoleFromMessageClass(e){switch(e){case"HumanMessage":return"human";case"AIMessage":return"ai";case"SystemMessage":return"system";case"ChatMessage":return"chat";default:throw new Error("Invalid message class name")}}static fromTemplate(e,t){if("string"==typeof e)return new this(PromptTemplate.fromTemplate(e,t));const r=[];for(const n of e)if("string"==typeof n)r.push(PromptTemplate.fromTemplate(n,t));else if(null===n);else if(isTextTemplateParam(n)){let e="";"string"==typeof n.text&&(e=n.text??"");const o={...t,additionalContentFields:n};r.push(PromptTemplate.fromTemplate(e,o))}else if(isImageTemplateParam(n)){let e,o=n.image_url??"",i=[];if("string"==typeof o){let r;r="mustache"===t?.templateFormat?parseMustache(o):parseFString(o);const s=r.flatMap(e=>"variable"===e.type?[e.name]:[]);if((s?.length??0)>0){if(s.length>1)throw new Error(`Only one format variable allowed per image template.\nGot: ${s}\nFrom: ${o}`);i=[s[0]]}else i=[];o={url:o},e=new ImagePromptTemplate({template:o,inputVariables:i,templateFormat:t?.templateFormat,additionalContentFields:n})}else{if("object"!=typeof o)throw new Error("Invalid image template");if("url"in o){let e;e="mustache"===t?.templateFormat?parseMustache(o.url):parseFString(o.url),i=e.flatMap(e=>"variable"===e.type?[e.name]:[])}else i=[];e=new ImagePromptTemplate({template:o,inputVariables:i,templateFormat:t?.templateFormat,additionalContentFields:n})}r.push(e)}else"object"==typeof n&&r.push(new DictPromptTemplate({template:n,templateFormat:t?.templateFormat}));return new this({prompt:r,additionalOptions:t})}async format(e){if(this.prompt instanceof BaseStringPromptTemplate){const t=await this.prompt.format(e);return this.createMessage(t)}{const t=[];for(const r of this.prompt){let n={};if(!("inputVariables"in r))throw new Error(`Prompt ${r} does not have inputVariables defined.`);for(const t of r.inputVariables)n||(n={[t]:e[t]}),n={...n,[t]:e[t]};if(r instanceof BaseStringPromptTemplate){const e=await r.format(n);let o;"additionalContentFields"in r&&(o=r.additionalContentFields),t.push({...o,type:"text",text:e})}else if(r instanceof ImagePromptTemplate){const e=await r.format(n);let o;"additionalContentFields"in r&&(o=r.additionalContentFields),t.push({...o,type:"image_url",image_url:e})}else if(r instanceof DictPromptTemplate){const e=await r.format(n);let o;"additionalContentFields"in r&&(o=r.additionalContentFields),t.push({...o,...e})}}return this.createMessage(t)}}async formatMessages(e){return[await this.format(e)]}}class HumanMessagePromptTemplate extends _StringImageMessagePromptTemplate{static _messageClass(){return HumanMessage}static lc_name(){return"HumanMessagePromptTemplate"}}class AIMessagePromptTemplate extends _StringImageMessagePromptTemplate{static _messageClass(){return AIMessage}static lc_name(){return"AIMessagePromptTemplate"}}class SystemMessagePromptTemplate extends _StringImageMessagePromptTemplate{static _messageClass(){return SystemMessage}static lc_name(){return"SystemMessagePromptTemplate"}}function _isBaseMessagePromptTemplate(e){return"function"==typeof e.formatMessages}function _coerceMessagePromptTemplateLike(e,t){if(_isBaseMessagePromptTemplate(e)||isBaseMessage(e))return e;if(Array.isArray(e)&&"placeholder"===e[0]){const r=e[1];if("mustache"===t?.templateFormat&&"string"==typeof r&&"{{"===r.slice(0,2)&&"}}"===r.slice(-2)){const e=r.slice(2,-2);return new MessagesPlaceholder({variableName:e,optional:!0})}if("string"==typeof r&&"{"===r[0]&&"}"===r[r.length-1]){const e=r.slice(1,-1);return new MessagesPlaceholder({variableName:e,optional:!0})}throw new Error(`Invalid placeholder template for format ${t?.templateFormat??'"f-string"'}: "${e[1]}". Expected a variable name surrounded by ${"mustache"===t?.templateFormat?"double":"single"} curly braces.`)}const r=coerceMessageLikeToMessage(e);let n;if(n="string"==typeof r.content?r.content:r.content.map(e=>"text"in e?{...e,text:e.text}:"image_url"in e?{...e,image_url:e.image_url}:e),"human"===r._getType())return HumanMessagePromptTemplate.fromTemplate(n,t);if("ai"===r._getType())return AIMessagePromptTemplate.fromTemplate(n,t);if("system"===r._getType())return SystemMessagePromptTemplate.fromTemplate(n,t);if(ChatMessage.isInstance(r))return ChatMessagePromptTemplate.fromTemplate(r.content,r.role,t);throw new Error(`Could not coerce message prompt template from input. Received message type: "${r._getType()}".`)}function isMessagesPlaceholder(e){return"MessagesPlaceholder"===e.constructor.lc_name()}class ChatPromptTemplate extends BaseChatPromptTemplate{static lc_name(){return"ChatPromptTemplate"}get lc_aliases(){return{promptMessages:"messages"}}constructor(e){if(super(e),Object.defineProperty(this,"promptMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),"mustache"===e.templateFormat&&void 0===e.validateTemplate&&(this.validateTemplate=!1),Object.assign(this,e),this.validateTemplate){const e=new Set;for(const i of this.promptMessages)if(!(i instanceof BaseMessage))for(const t of i.inputVariables)e.add(t);const t=this.inputVariables,r=new Set(this.partialVariables?t.concat(Object.keys(this.partialVariables)):t),n=new Set([...r].filter(t=>!e.has(t)));if(n.size>0)throw new Error(`Input variables \`${[...n]}\` are not used in any of the prompt messages.`);const o=new Set([...e].filter(e=>!r.has(e)));if(o.size>0)throw new Error(`Input variables \`${[...o]}\` are used in prompt messages but not in the prompt template.`)}}_getPromptType(){return"chat"}async _parseImagePrompts(e,t){if("string"==typeof e.content)return e;const r=await Promise.all(e.content.map(async e=>{if("image_url"!==e.type)return e;let r="";r="string"==typeof e.image_url?e.image_url:e.image_url.url;const n=PromptTemplate.fromTemplate(r,{templateFormat:this.templateFormat}),o=await n.format(t);return"string"!=typeof e.image_url&&"url"in e.image_url?e.image_url.url=o:e.image_url=o,e}));return e.content=r,e}async formatMessages(e){const t=await this.mergePartialAndUserVariables(e);let r=[];for(const n of this.promptMessages)if(n instanceof BaseMessage)r.push(await this._parseImagePrompts(n,t));else{const e=n.inputVariables.reduce((e,r)=>{if(!(r in t||isMessagesPlaceholder(n)&&n.optional)){throw addLangChainErrorFields$1(new Error(`Missing value for input variable \`${r.toString()}\``),"INVALID_PROMPT_INPUT")}return e[r]=t[r],e},{}),o=await n.formatMessages(e);r=r.concat(o)}return r}async partial(e){const t=this.inputVariables.filter(t=>!(t in e)),r={...this.partialVariables??{},...e},n={...this,inputVariables:t,partialVariables:r};return new ChatPromptTemplate(n)}static fromTemplate(e,t){const r=PromptTemplate.fromTemplate(e,t),n=new HumanMessagePromptTemplate({prompt:r});return this.fromMessages([n])}static fromMessages(e,t){const r=e.reduce((e,r)=>e.concat(r instanceof ChatPromptTemplate?r.promptMessages:[_coerceMessagePromptTemplateLike(r,t)]),[]),n=e.reduce((e,t)=>t instanceof ChatPromptTemplate?Object.assign(e,t.partialVariables):e,Object.create(null)),o=new Set;for(const i of r)if(!(i instanceof BaseMessage))for(const e of i.inputVariables)e in n||o.add(e);return new this({...t,inputVariables:[...o],promptMessages:r,partialVariables:n,templateFormat:t?.templateFormat})}static fromPromptMessages(e){return this.fromMessages(e)}}class FewShotPromptTemplate extends BaseStringPromptTemplate{constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"examples",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exampleSelector",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"examplePrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"suffix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"exampleSeparator",{enumerable:!0,configurable:!0,writable:!0,value:"\n\n"}),Object.defineProperty(this,"prefix",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"templateFormat",{enumerable:!0,configurable:!0,writable:!0,value:"f-string"}),Object.defineProperty(this,"validateTemplate",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.assign(this,e),void 0!==this.examples&&void 0!==this.exampleSelector)throw new Error("Only one of 'examples' and 'example_selector' should be provided");if(void 0===this.examples&&void 0===this.exampleSelector)throw new Error("One of 'examples' and 'example_selector' should be provided");if(this.validateTemplate){let e=this.inputVariables;this.partialVariables&&(e=e.concat(Object.keys(this.partialVariables))),checkValidTemplate(this.prefix+this.suffix,this.templateFormat,e)}}_getPromptType(){return"few_shot"}static lc_name(){return"FewShotPromptTemplate"}async getExamples(e){if(void 0!==this.examples)return this.examples;if(void 0!==this.exampleSelector)return this.exampleSelector.selectExamples(e);throw new Error("One of 'examples' and 'example_selector' should be provided")}async partial(e){const t=this.inputVariables.filter(t=>!(t in e)),r={...this.partialVariables??{},...e},n={...this,inputVariables:t,partialVariables:r};return new FewShotPromptTemplate(n)}async format(e){const t=await this.mergePartialAndUserVariables(e),r=await this.getExamples(t),n=await Promise.all(r.map(e=>this.examplePrompt.format(e))),o=[this.prefix,...n,this.suffix].join(this.exampleSeparator);return renderTemplate(o,this.templateFormat,t)}serialize(){if(this.exampleSelector||!this.examples)throw new Error("Serializing an example selector is not currently supported");if(void 0!==this.outputParser)throw new Error("Serializing an output parser is not currently supported");return{_type:this._getPromptType(),input_variables:this.inputVariables,example_prompt:this.examplePrompt.serialize(),example_separator:this.exampleSeparator,suffix:this.suffix,prefix:this.prefix,template_format:this.templateFormat,examples:this.examples}}static async deserialize(e){const{example_prompt:t}=e;if(!t)throw new Error("Missing example prompt");const r=await PromptTemplate.deserialize(t);let n;if(!Array.isArray(e.examples))throw new Error("Invalid examples format. Only list or string are supported.");return n=e.examples,new FewShotPromptTemplate({inputVariables:e.input_variables,examplePrompt:r,examples:n,exampleSeparator:e.example_separator,prefix:e.prefix,suffix:e.suffix,templateFormat:e.template_format})}}const few_shot=Object.freeze(Object.defineProperty({__proto__:null,FewShotPromptTemplate:FewShotPromptTemplate},Symbol.toStringTag,{value:"Module"})),FALLBACK_MODEL_REGISTRY={"gpt-3.5-turbo":{capability:ModelCapability.SMALL,contextWindow:16385,description:"OpenAI GPT-3.5 Turbo"},"gpt-4":{capability:ModelCapability.LARGE,contextWindow:8192,description:"OpenAI GPT-4"},"gpt-4-turbo":{capability:ModelCapability.MEDIUM,contextWindow:128e3,description:"OpenAI GPT-4 Turbo"},"gpt-4o":{capability:ModelCapability.MEDIUM,contextWindow:128e3,description:"OpenAI GPT-4o"},"gpt-4o-mini":{capability:ModelCapability.SMALL,contextWindow:128e3,description:"OpenAI GPT-4o Mini"},"o1-preview":{capability:ModelCapability.LARGE,contextWindow:128e3,description:"OpenAI o1 Preview"},"o1-mini":{capability:ModelCapability.MEDIUM,contextWindow:128e3,description:"OpenAI o1 Mini"},"o3-mini":{capability:ModelCapability.MEDIUM,contextWindow:128e3,description:"OpenAI o3 Mini"},"claude-3.5-sonnet":{capability:ModelCapability.LARGE,contextWindow:2e5,description:"Anthropic Claude 3.5 Sonnet"},"claude-4":{capability:ModelCapability.LARGE,contextWindow:2e5,description:"Anthropic Claude 4"},"gemini-1.5-pro":{capability:ModelCapability.LARGE,contextWindow:2e6,description:"Google Gemini 1.5 Pro"}};class ModelCapabilityDetector{constructor(){this.lastFetchTime=0,this.CACHE_DURATION=864e5,this.OPENROUTER_API_URL="https://openrouter.ai/api/v1/models",this.registry={...FALLBACK_MODEL_REGISTRY}}static getInstance(){return ModelCapabilityDetector.instance||(ModelCapabilityDetector.instance=new ModelCapabilityDetector),ModelCapabilityDetector.instance}determineCapability(e){const t=e.id.toLowerCase(),r=e.context_length;return t.includes("mini")||t.includes("tiny")||t.includes("light")||t.includes("instant")||t.includes("3.5-turbo")?ModelCapability.SMALL:t.includes("local")||t.includes("llama")||t.includes("mistral")||t.includes("yi-")||t.includes("qwen")||t.includes("deepseek")||t.includes("phi-")||t.includes("mythomax")||t.includes("valkyrie")?ModelCapability.UNLIMITED:r<=16e3?ModelCapability.SMALL:r<=5e4?ModelCapability.MEDIUM:ModelCapability.LARGE}async fetchModelsFromAPI(){try{const e=await fetch(this.OPENROUTER_API_URL,{headers:{Accept:"application/json","User-Agent":"hedera-agent-kit/1.0"}});if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);const t=(await e.json()).data||[];this.registry={...FALLBACK_MODEL_REGISTRY};for(const r of t){const e={capability:this.determineCapability(r),contextWindow:r.context_length,description:r.name};this.registry[r.id]=e;const t=this.getSimplifiedModelId(r.id);t!==r.id&&(this.registry[t]=e)}this.lastFetchTime=Date.now(),console.log(`ModelCapabilityDetector: Loaded ${t.length} models from OpenRouter API`)}catch(e){console.warn("ModelCapabilityDetector: Failed to fetch from API, using fallback registry:",e)}}getSimplifiedModelId(e){return e.startsWith("openai/")?e.replace("openai/",""):e.startsWith("anthropic/")?e.replace("anthropic/",""):e.startsWith("google/")?e.replace("google/",""):e.startsWith("mistralai/")?e.replace("mistralai/",""):e.startsWith("meta-llama/")?e.replace("meta-llama/",""):e}async ensureModelsLoaded(){Date.now()-this.lastFetchTime>this.CACHE_DURATION&&await this.fetchModelsFromAPI()}registerModel(e,t){this.registry[e]=t}registerModels(e){Object.assign(this.registry,e)}async getModelCapability(e){if(!e)return ModelCapability.MEDIUM;await this.ensureModelsLoaded();const t=this.registry[e];if(t)return t.capability;const r=e.toLowerCase();for(const[n,o]of Object.entries(this.registry))if(r.includes(n.toLowerCase())||n.toLowerCase().includes(r))return o.capability;return this.getCapabilityFromHeuristics(r)}getModelCapabilitySync(e){if(!e)return ModelCapability.MEDIUM;const t=this.registry[e];if(t)return t.capability;const r=e.toLowerCase();for(const[n,o]of Object.entries(this.registry))if(r.includes(n.toLowerCase())||n.toLowerCase().includes(r))return o.capability;return this.getCapabilityFromHeuristics(r)}getCapabilityFromHeuristics(e){return e.includes("mini")||e.includes("3.5")||e.includes("tiny")||e.includes("light")||e.includes("instant")?ModelCapability.SMALL:e.includes("turbo")||e.includes("4o")||e.includes("flash")||e.includes("small")||e.includes("medium")||e.includes("haiku")||e.includes("bison")||e.includes("palm")?ModelCapability.MEDIUM:e.includes("claude")||e.includes("gpt-4")||e.includes("gemini")||e.includes("sonnet")||e.includes("opus")||e.includes("large")||e.includes("ultra")||e.includes("mixtral")||e.includes("command-r")||e.includes("o1")||e.includes("o3")?ModelCapability.LARGE:e.includes("local")||e.includes("ollama")||e.includes("llama")||e.includes("mistral")||e.includes("yi-")||e.includes("qwen")||e.includes("deepseek")||e.includes("phi-")?ModelCapability.UNLIMITED:ModelCapability.MEDIUM}async getModelConfig(e){return await this.ensureModelsLoaded(),this.registry[e]}async getContextWindow(e){if(!e)return 16385;await this.ensureModelsLoaded();const t=this.registry[e];if(t)return t.contextWindow;const r=e.toLowerCase();for(const[n,o]of Object.entries(this.registry))if(r.includes(n.toLowerCase())||n.toLowerCase().includes(r))return o.contextWindow;return 16385}getContextWindowSync(e){if(!e)return 16385;const t=this.registry[e];if(t)return t.contextWindow;const r=e.toLowerCase();for(const[n,o]of Object.entries(this.registry))if(r.includes(n.toLowerCase())||n.toLowerCase().includes(r))return o.contextWindow;return 16385}async getAllModels(){return await this.ensureModelsLoaded(),{...this.registry}}async isModelRegistered(e){return await this.ensureModelsLoaded(),e in this.registry}async getModelsByCapability(e){return await this.ensureModelsLoaded(),Object.entries(this.registry).filter(([,t])=>t.capability===e).map(([e])=>e)}async refreshModels(){this.lastFetchTime=0,await this.fetchModelsFromAPI()}getCacheStatus(){const e=Date.now()-this.lastFetchTime>this.CACHE_DURATION;return{lastFetch:new Date(this.lastFetchTime),isStale:e,modelCount:Object.keys(this.registry).length}}}const DEFAULT_MODEL="gpt-4o-mini";class ModelPricingManager{constructor(){this.pricingCache=new Map,this.lastFetchTime=0,this.CACHE_DURATION=864e5,this.OPENROUTER_API_URL="https://openrouter.ai/api/v1/models",this.DEFAULT_MODEL="gpt-4o-mini",this.logger=new Logger({module:"ModelPricingManager",level:"info"}),this.initializeFallbackPricing()}static getInstance(){return ModelPricingManager.instance||(ModelPricingManager.instance=new ModelPricingManager),ModelPricingManager.instance}initializeFallbackPricing(){const e={"gpt-4o":{prompt:.005,completion:.015},[this.DEFAULT_MODEL]:{prompt:15e-5,completion:6e-4},"gpt-4-turbo":{prompt:.01,completion:.03},"gpt-4":{prompt:.03,completion:.06},"gpt-3.5-turbo":{prompt:5e-4,completion:.0015}};for(const[t,r]of Object.entries(e))this.pricingCache.set(t,r)}async fetchPricingFromAPI(){try{const e=await fetch(this.OPENROUTER_API_URL,{headers:{Accept:"application/json","User-Agent":"hedera-agent-kit/1.0"}});if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);const t=(await e.json()).data||[];for(const r of t)if(r.pricing?.prompt&&r.pricing?.completion){const e=parseFloat(r.pricing.prompt),t=parseFloat(r.pricing.completion);if(!isNaN(e)&&!isNaN(t)){this.pricingCache.set(r.id,{prompt:1e3*e,completion:1e3*t});const n=this.getSimplifiedModelId(r.id);n!==r.id&&this.pricingCache.set(n,{prompt:1e3*e,completion:1e3*t})}}this.lastFetchTime=Date.now(),this.logger.info(`Loaded pricing for ${t.length} models from OpenRouter API`)}catch(e){this.logger.warn("Failed to fetch pricing from API, using fallback pricing",e)}}getSimplifiedModelId(e){const t=["openai/","anthropic/","google/","mistralai/","meta-llama/"];for(const r of t)if(e.startsWith(r))return e.replace(r,"");return e}async ensurePricingLoaded(){(Date.now()-this.lastFetchTime>this.CACHE_DURATION||this.pricingCache.size<10)&&await this.fetchPricingFromAPI()}async getPricing(e){await this.ensurePricingLoaded();const t=this.pricingCache.get(e);if(t)return t;const r=e.toLowerCase();for(const[n,o]of this.pricingCache.entries())if(n.toLowerCase().includes(r)||r.includes(n.toLowerCase()))return o;return this.pricingCache.get(this.DEFAULT_MODEL)||{prompt:15e-5,completion:6e-4}}getPricingSync(e){const t=this.pricingCache.get(e);if(t)return t;const r=e.toLowerCase();for(const[n,o]of this.pricingCache.entries())if(n.toLowerCase().includes(r)||r.includes(n.toLowerCase()))return o;return this.pricingCache.get(this.DEFAULT_MODEL)||{prompt:15e-5,completion:6e-4}}}class TokenUsageCallbackHandler extends BaseCallbackHandler{constructor(e,t){super(),this.name="TokenUsageCallbackHandler",this.tokenUsageHistory=[],this.currentTokenUsage=void 0,this.modelName=e,this.logger=t||new Logger({module:"TokenUsageTracker",level:"info"})}async handleLLMEnd(e){try{e.llmOutput?.tokenUsage&&(this.currentTokenUsage={promptTokens:e.llmOutput.tokenUsage.promptTokens||0,completionTokens:e.llmOutput.tokenUsage.completionTokens||0,totalTokens:e.llmOutput.tokenUsage.totalTokens||0,modelName:this.modelName,timestamp:new Date},this.tokenUsageHistory.push(this.currentTokenUsage),this.logger.debug("Token usage tracked:",{promptTokens:this.currentTokenUsage.promptTokens,completionTokens:this.currentTokenUsage.completionTokens,totalTokens:this.currentTokenUsage.totalTokens,model:this.modelName}))}catch(t){this.logger.error("Failed to track token usage:",t)}}getLatestTokenUsage(){return this.currentTokenUsage}getTokenUsageHistory(){return[...this.tokenUsageHistory]}getTotalTokenUsage(){return{...this.tokenUsageHistory.reduce((e,t)=>({promptTokens:e.promptTokens+t.promptTokens,completionTokens:e.completionTokens+t.completionTokens,totalTokens:e.totalTokens+t.totalTokens}),{promptTokens:0,completionTokens:0,totalTokens:0}),modelName:this.modelName,timestamp:new Date}}reset(){this.currentTokenUsage=void 0,this.tokenUsageHistory=[]}}async function calculateTokenCost(e,t){const r=t||e.modelName||DEFAULT_MODEL,n=ModelPricingManager.getInstance(),o=await n.getPricing(r),i=e.promptTokens/1e3*o.prompt,s=e.completionTokens/1e3*o.completion;return{promptCost:i,completionCost:s,totalCost:i+s,currency:"USD"}}function calculateTokenCostSync(e,t){const r=t||e.modelName||DEFAULT_MODEL,n=ModelPricingManager.getInstance().getPricingSync(r),o=e.promptTokens/1e3*n.prompt,i=e.completionTokens/1e3*n.completion;return{promptCost:o,completionCost:i,totalCost:o+i,currency:"USD"}}function formatCost(e,t=6){return`$${e.totalCost.toFixed(t)} ${e.currency}`}function estimateTokens(e){return Math.ceil(e.length/4)}class BaseAgent extends Serializable{get returnValues(){return["output"]}get allowedTools(){}_agentType(){throw new Error("Not implemented")}returnStoppedResponse(e,t,r,n){if("force"===e)return Promise.resolve({returnValues:{output:"Agent stopped due to max iterations."},log:""});throw new Error(`Invalid stopping method: ${e}`)}async prepareForOutput(e,t){return{}}}class BaseSingleActionAgent extends BaseAgent{_agentActionType(){return"single"}}class BaseMultiActionAgent extends BaseAgent{_agentActionType(){return"multi"}}function isAgentAction(e){return!Array.isArray(e)&&void 0!==e?.tool}function isRunnableAgent(e){return void 0!==e.runnable}class AgentRunnableSequence extends RunnableSequence{constructor(){super(...arguments),Object.defineProperty(this,"streamRunnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"singleAction",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}static fromRunnables([e,...t],r){const n=RunnableSequence.from([e,...t],r.name);return n.singleAction=r.singleAction,n.streamRunnable=r.streamRunnable,n}static isAgentRunnableSequence(e){return"boolean"==typeof e.singleAction}}class RunnableSingleActionAgent extends BaseSingleActionAgent{get inputKeys(){return[]}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","agents","runnable"]}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamRunnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"defaultRunName",{enumerable:!0,configurable:!0,writable:!0,value:"RunnableAgent"}),this.runnable=e.runnable,this.defaultRunName=e.defaultRunName??this.runnable.name??this.defaultRunName,this.streamRunnable=e.streamRunnable??this.streamRunnable}async plan(e,t,r,n){const o={...t,steps:e},i=patchConfig(n,{callbacks:r,runName:this.defaultRunName});if(this.streamRunnable){const e=await this.runnable.stream(o,i);let t;for await(const r of e){if(void 0!==t)throw new Error(["Multiple agent actions/finishes received in streamed agent output.",'Set "streamRunnable: false" when initializing the agent to invoke this agent in non-streaming mode.'].join("\n"));t=r}if(void 0===t)throw new Error(["No streaming output received from underlying runnable.",'Set "streamRunnable: false" when initializing the agent to invoke this agent in non-streaming mode.'].join("\n"));return t}return this.runnable.invoke(o,i)}}class RunnableMultiActionAgent extends BaseMultiActionAgent{get inputKeys(){return[]}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","agents","runnable"]}),Object.defineProperty(this,"runnable",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"defaultRunName",{enumerable:!0,configurable:!0,writable:!0,value:"RunnableAgent"}),Object.defineProperty(this,"stop",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"streamRunnable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),this.runnable=e.runnable,this.stop=e.stop,this.defaultRunName=e.defaultRunName??this.runnable.name??this.defaultRunName,this.streamRunnable=e.streamRunnable??this.streamRunnable}async plan(e,t,r,n){const o={...t,steps:e},i=patchConfig(n,{callbacks:r,runName:this.defaultRunName});let s;if(this.streamRunnable){const e=await this.runnable.stream(o,i);let t;for await(const r of e){if(void 0!==t)throw new Error(["Multiple agent actions/finishes received in streamed agent output.",'Set "streamRunnable: false" when initializing the agent to invoke this agent in non-streaming mode.'].join("\n"));t=r}if(void 0===t)throw new Error(["No streaming output received from underlying runnable.",'Set "streamRunnable: false" when initializing the agent to invoke this agent in non-streaming mode.'].join("\n"));s=t}else s=await this.runnable.invoke(o,i);return isAgentAction(s)?[s]:s}}var jsonpointer={},hasRequiredJsonpointer;function requireJsonpointer(){if(hasRequiredJsonpointer)return jsonpointer;hasRequiredJsonpointer=1;var e=/~/,t=/~[01]/g;function r(e){switch(e){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+e)}function n(n){return e.test(n)?n.replace(t,r):n}function o(e){if("string"==typeof e){if(""===(e=e.split("/"))[0])return e;throw new Error("Invalid JSON pointer.")}if(Array.isArray(e)){for(const t of e)if("string"!=typeof t&&"number"!=typeof t)throw new Error("Invalid JSON pointer. Must be of type string or number.");return e}throw new Error("Invalid JSON pointer.")}function i(e,t){if("object"!=typeof e)throw new Error("Invalid input object.");var r=(t=o(t)).length;if(1===r)return e;for(var i=1;i<r;){if(e=e[n(t[i++])],r===i)return e;if("object"!=typeof e||null===e)return}}function s(e,t,r){if("object"!=typeof e)throw new Error("Invalid input object.");if(0===(t=o(t)).length)throw new Error("Invalid JSON pointer for set.");return function(e,t,r){for(var o,i,s=1,a=t.length;s<a;){if("constructor"===t[s]||"prototype"===t[s]||"__proto__"===t[s])return e;if(o=n(t[s++]),i=a>s,void 0===e[o]&&(Array.isArray(e)&&"-"===o&&(o=e.length),i&&(""!==t[s]&&t[s]<1/0||"-"===t[s]?e[o]=[]:e[o]={})),!i)break;e=e[o]}var c=e[o];return void 0===r?delete e[o]:e[o]=r,c}(e,t,r)}return jsonpointer.get=i,jsonpointer.set=s,jsonpointer.compile=function(e){var t=o(e);return{get:function(e){return i(e,t)},set:function(e,r){return s(e,t,r)}}},jsonpointer}requireJsonpointer();class BaseChain extends BaseLangChain{get lc_namespace(){return["langchain","chains",this._chainType()]}constructor(e,t,r){if(1!==arguments.length||"object"!=typeof e||"saveContext"in e)super({verbose:t,callbacks:r}),this.memory=e;else{const{memory:t,callbackManager:r,...n}=e;super({...n,callbacks:r??n.callbacks}),this.memory=t}}_selectMemoryInputs(e){const t={...e};return"signal"in t&&delete t.signal,"timeout"in t&&delete t.timeout,t}async invoke(e,t){const r=ensureConfig(t),n=await this._formatValues(e),o=await CallbackManager.configure(r?.callbacks,this.callbacks,r?.tags,this.tags,r?.metadata,this.metadata,{verbose:this.verbose}),i=await(o?.handleChainStart(this.toJSON(),n,void 0,void 0,void 0,void 0,r?.runName));let s;try{s=await(n.signal?Promise.race([this._call(n,i,r),new Promise((e,t)=>{n.signal?.addEventListener("abort",()=>{t(new Error("AbortError"))})})]):this._call(n,i,r))}catch(a){throw await(i?.handleChainError(a)),a}return null!=this.memory&&await this.memory.saveContext(this._selectMemoryInputs(e),s),await(i?.handleChainEnd(s)),Object.defineProperty(s,RUN_KEY,{value:i?{runId:i?.runId}:void 0,configurable:!0}),s}_validateOutputs(e){const t=this.outputKeys.filter(t=>!(t in e));if(t.length)throw new Error(`Missing output keys: ${t.join(", ")} from chain ${this._chainType()}`)}async prepOutputs(e,t,r=!1){return this._validateOutputs(t),this.memory&&await this.memory.saveContext(e,t),r?t:{...e,...t}}serialize(){throw new Error("Method not implemented.")}async run(e,t){const r=this.inputKeys.filter(e=>!this.memory?.memoryKeys.includes(e));if(!(r.length<=1))throw new Error(`Chain ${this._chainType()} expects multiple inputs, cannot use 'run' `);const n=r.length?{[r[0]]:e}:{},o=await this.call(n,t),i=Object.keys(o);if(1===i.length)return o[i[0]];throw new Error("return values have multiple keys, `run` only supported when one key currently")}async _formatValues(e){const t={...e};if(t.timeout&&!t.signal&&(t.signal=AbortSignal.timeout(t.timeout),delete t.timeout),null!=this.memory){const r=await this.memory.loadMemoryVariables(this._selectMemoryInputs(e));for(const[e,n]of Object.entries(r))t[e]=n}return t}async call(e,t,r){const n={tags:r,...parseCallbackConfigArg(t)};return this.invoke(e,n)}async apply(e,t){return Promise.all(e.map(async(e,r)=>this.call(e,t?.[r])))}static async deserialize(e,t={}){switch(e._type){case"llm_chain":{const{LLMChain:t}=await Promise.resolve().then(()=>llm_chain);return t.deserialize(e)}case"sequential_chain":{const{SequentialChain:t}=await Promise.resolve().then(()=>sequential_chain);return t.deserialize(e)}case"simple_sequential_chain":{const{SimpleSequentialChain:t}=await Promise.resolve().then(()=>sequential_chain);return t.deserialize(e)}case"stuff_documents_chain":{const{StuffDocumentsChain:t}=await Promise.resolve().then(()=>combine_docs_chain);return t.deserialize(e)}case"map_reduce_documents_chain":{const{MapReduceDocumentsChain:t}=await Promise.resolve().then(()=>combine_docs_chain);return t.deserialize(e)}case"refine_documents_chain":{const{RefineDocumentsChain:t}=await Promise.resolve().then(()=>combine_docs_chain);return t.deserialize(e)}case"vector_db_qa":{const{VectorDBQAChain:r}=await Promise.resolve().then(()=>vector_db_qa);return r.deserialize(e,t)}case"api_chain":{const{APIChain:t}=await Promise.resolve().then(()=>api_chain);return t.deserialize(e)}default:throw new Error(`Invalid prompt type in config: ${e._type}`)}}}class NoOpOutputParser extends BaseOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","output_parsers","default"]}),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0})}static lc_name(){return"NoOpOutputParser"}parse(e){return Promise.resolve(e)}getFormatInstructions(){return""}}function isBaseLanguageModel(e){return"function"==typeof e._llmType}function _getLanguageModel(e){if(isBaseLanguageModel(e))return e;if("bound"in e&&Runnable.isRunnable(e.bound))return _getLanguageModel(e.bound);if("runnable"in e&&"fallbacks"in e&&Runnable.isRunnable(e.runnable))return _getLanguageModel(e.runnable);if("default"in e&&Runnable.isRunnable(e.default))return _getLanguageModel(e.default);throw new Error("Unable to extract BaseLanguageModel from llmLike object.")}class LLMChain extends BaseChain{static lc_name(){return"LLMChain"}get inputKeys(){return this.prompt.inputVariables}get outputKeys(){return[this.outputKey]}constructor(e){if(super(e),Object.defineProperty(this,"lc_serializable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"prompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llm",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"llmKwargs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"text"}),Object.defineProperty(this,"outputParser",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.prompt=e.prompt,this.llm=e.llm,this.llmKwargs=e.llmKwargs,this.outputKey=e.outputKey??this.outputKey,this.outputParser=e.outputParser??new NoOpOutputParser,this.prompt.outputParser){if(e.outputParser)throw new Error("Cannot set both outputParser and prompt.outputParser");this.outputParser=this.prompt.outputParser}}getCallKeys(){return"callKeys"in this.llm?this.llm.callKeys:[]}_selectMemoryInputs(e){const t=super._selectMemoryInputs(e),r=this.getCallKeys();for(const n of r)n in e&&delete t[n];return t}async _getFinalOutput(e,t,r){let n;return n=this.outputParser?await this.outputParser.parseResultWithPrompt(e,t,r?.getChild()):e[0].text,n}call(e,t){return super.call(e,t)}async _call(e,t){const r={...e},n={...this.llmKwargs},o=this.getCallKeys();for(const c of o)c in e&&n&&(n[c]=e[c],delete r[c]);const i=await this.prompt.formatPromptValue(r);if("generatePrompt"in this.llm){const{generations:e}=await this.llm.generatePrompt([i],n,t?.getChild());return{[this.outputKey]:await this._getFinalOutput(e[0],i,t)}}const s=this.outputParser?this.llm.pipe(this.outputParser):this.llm,a=await s.invoke(i,t?.getChild());return{[this.outputKey]:a}}async predict(e,t){return(await this.call(e,t))[this.outputKey]}_chainType(){return"llm"}static async deserialize(e){const{llm:t,prompt:r}=e;if(!t)throw new Error("LLMChain must have llm");if(!r)throw new Error("LLMChain must have prompt");return new LLMChain({llm:await BaseLanguageModel.deserialize(t),prompt:await BasePromptTemplate.deserialize(r)})}serialize(){const e="serialize"in this.llm?this.llm.serialize():void 0;return{_type:`${this._chainType()}_chain`,llm:e,prompt:this.prompt.serialize()}}_getNumTokens(e){return _getLanguageModel(this.llm).getNumTokens(e)}}const llm_chain=Object.freeze(Object.defineProperty({__proto__:null,LLMChain:LLMChain},Symbol.toStringTag,{value:"Module"}));class AgentMultiActionOutputParser extends BaseOutputParser{}class AgentExecutorIterator extends Serializable{get finalOutputs(){return this._finalOutputs}async setFinalOutputs(e){if(this._finalOutputs=void 0,e){const t=await this.agentExecutor.prepOutputs(this.inputs,e,!0);this._finalOutputs=t}}get nameToToolMap(){const e=this.agentExecutor.tools.map(e=>({[e.name]:e}));return Object.assign({},...e)}constructor(e){super(e),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","agents","executor_iterator"]}),Object.defineProperty(this,"agentExecutor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"config",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callbacks",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tags",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metadata",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_finalOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"runManager",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"intermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"iterations",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.agentExecutor=e.agentExecutor,this.inputs=e.inputs,this.callbacks=e.callbacks,this.tags=e.tags,this.metadata=e.metadata,this.runName=e.runName,this.runManager=e.runManager,this.config=e.config}reset(){this.intermediateSteps=[],this.iterations=0,this._finalOutputs=void 0}updateIterations(){this.iterations+=1}async*streamIterator(){for(this.reset();;)try{0===this.iterations&&await this.onFirstStep();const e=await this._callNext();yield e}catch(e){if("message"in e&&e.message.startsWith("Final outputs already reached: ")){if(!this.finalOutputs)throw e;return this.finalOutputs}throw this.runManager&&await this.runManager.handleChainError(e),e}}async onFirstStep(){if(0===this.iterations){const e=await CallbackManager.configure(this.callbacks??this.config?.callbacks,this.agentExecutor.callbacks,this.tags??this.config?.tags,this.agentExecutor.tags,this.metadata??this.config?.metadata,this.agentExecutor.metadata,{verbose:this.agentExecutor.verbose});this.runManager=await(e?.handleChainStart(this.agentExecutor.toJSON(),this.inputs,this.config?.runId,void 0,this.tags??this.config?.tags,this.metadata??this.config?.metadata,this.runName??this.config?.runName)),void 0!==this.config&&delete this.config.runId}}async _executeNextStep(e){return this.agentExecutor._takeNextStep(this.nameToToolMap,this.inputs,this.intermediateSteps,e,this.config)}async _processNextStepOutput(e,t){if("returnValues"in e){const r=await this.agentExecutor._return(e,this.intermediateSteps,t);return this.runManager&&await this.runManager.handleChainEnd(r),await this.setFinalOutputs(r),r}this.intermediateSteps=this.intermediateSteps.concat(e);let r={};if(Array.isArray(e)&&1===e.length){const n=e[0],o=await this.agentExecutor._getToolReturn(n);o&&(r=await this.agentExecutor._return(o,this.intermediateSteps,t),await(this.runManager?.handleChainEnd(r)),await this.setFinalOutputs(r))}return r={intermediateSteps:e},r}async _stop(){const e=await this.agentExecutor.agent.returnStoppedResponse(this.agentExecutor.earlyStoppingMethod,this.intermediateSteps,this.inputs),t=await this.agentExecutor._return(e,this.intermediateSteps,this.runManager);return await this.setFinalOutputs(t),await(this.runManager?.handleChainEnd(t)),t}async _callNext(){if(this.finalOutputs)throw new Error(`Final outputs already reached: ${JSON.stringify(this.finalOutputs,null,2)}`);if(!this.agentExecutor.shouldContinueGetter(this.iterations))return this._stop();const e=await this._executeNextStep(this.runManager),t=await this._processNextStepOutput(e,this.runManager);return this.updateIterations(),t}}class ExceptionTool extends Tool{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"_Exception"}),Object.defineProperty(this,"description",{enumerable:!0,configurable:!0,writable:!0,value:"Exception tool"})}async _call(e){return e}}class AgentExecutor extends BaseChain{static lc_name(){return"AgentExecutor"}get lc_namespace(){return["langchain","agents","executor"]}get inputKeys(){return this.agent.inputKeys}get outputKeys(){return this.agent.returnValues}constructor(e){let t,r=!0;if(Runnable.isRunnable(e.agent)?(t=AgentRunnableSequence.isAgentRunnableSequence(e.agent)?e.agent.singleAction?new RunnableSingleActionAgent({runnable:e.agent,streamRunnable:e.agent.streamRunnable}):new RunnableMultiActionAgent({runnable:e.agent,streamRunnable:e.agent.streamRunnable}):new RunnableMultiActionAgent({runnable:e.agent}),r=!1):(isRunnableAgent(e.agent)&&(r=!1),t=e.agent),super(e),Object.defineProperty(this,"agent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tools",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnIntermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxIterations",{enumerable:!0,configurable:!0,writable:!0,value:15}),Object.defineProperty(this,"earlyStoppingMethod",{enumerable:!0,configurable:!0,writable:!0,value:"force"}),Object.defineProperty(this,"returnOnlyOutputs",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"handleParsingErrors",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"handleToolRuntimeErrors",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.agent=t,this.tools=e.tools,this.handleParsingErrors=e.handleParsingErrors??this.handleParsingErrors,this.handleToolRuntimeErrors=e.handleToolRuntimeErrors,this.returnOnlyOutputs=r,"multi"===this.agent._agentActionType())for(const n of this.tools)if(n.returnDirect)throw new Error(`Tool with return direct ${n.name} not supported for multi-action agent.`);this.returnIntermediateSteps=e.returnIntermediateSteps??this.returnIntermediateSteps,this.maxIterations=e.maxIterations??this.maxIterations,this.earlyStoppingMethod=e.earlyStoppingMethod??this.earlyStoppingMethod}static fromAgentAndTools(e){return new AgentExecutor(e)}get shouldContinueGetter(){return this.shouldContinue.bind(this)}shouldContinue(e){return void 0===this.maxIterations||e<this.maxIterations}async _call(e,t,r){const n=Object.fromEntries(this.tools.map(e=>[e.name.toLowerCase(),e])),o=[];let i=0;const s=async r=>{const{returnValues:n}=r,i=await this.agent.prepareForOutput(n,o);let s;return await(t?.handleAgentEnd(r)),s=this.returnIntermediateSteps?{...n,intermediateSteps:o,...i}:{...n,...i},this.returnOnlyOutputs||(s={...e,...s}),s};for(;this.shouldContinue(i);){let c,u;try{c=await this.agent.plan(o,e,t?.getChild(),r)}catch(a){if(!(a instanceof OutputParserException))throw a;{let e,t=a.message;if(!0===this.handleParsingErrors)a.sendToLLM?(e=a.observation,t=a.llmOutput??""):e="Invalid or incomplete response";else if("string"==typeof this.handleParsingErrors)e=this.handleParsingErrors;else{if("function"!=typeof this.handleParsingErrors)throw a;e=this.handleParsingErrors(a)}c={tool:"_Exception",toolInput:e,log:t}}}if("returnValues"in c)return s(c);u=Array.isArray(c)?c:[c];const l=await Promise.all(u.map(async e=>{await(t?.handleAgentAction(e));const o="_Exception"===e.tool?new ExceptionTool:n[e.tool?.toLowerCase()];let i;try{if(i=o?await o.invoke(e.toolInput,patchConfig(r,{callbacks:t?.getChild()})):`${e.tool} is not a valid tool, try another one.`,"string"!=typeof i)throw new Error("Received unsupported non-string response from tool call.")}catch(a){if(a instanceof ToolInputParsingException){if(!0===this.handleParsingErrors)i="Invalid or incomplete tool input. Please try again.";else if("string"==typeof this.handleParsingErrors)i=this.handleParsingErrors;else{if("function"!=typeof this.handleParsingErrors)throw a;i=this.handleParsingErrors(a)}return i=await(new ExceptionTool).call(i,t?.getChild()),{action:e,observation:i??""}}void 0!==this.handleToolRuntimeErrors&&(i=this.handleToolRuntimeErrors(a))}return{action:e,observation:i??""}}));o.push(...l);const d=o[o.length-1],h=n[d.action.tool?.toLowerCase()];if(h?.returnDirect)return s({returnValues:{[this.agent.returnValues[0]]:d.observation},log:""});i+=1}return s(await this.agent.returnStoppedResponse(this.earlyStoppingMethod,o,e))}async _takeNextStep(e,t,r,n,o){let i,s;try{i=await this.agent.plan(r,t,n?.getChild(),o)}catch(c){if(!(c instanceof OutputParserException))throw c;{let e,t=c.message;if(!0===this.handleParsingErrors)c.sendToLLM?(e=c.observation,t=c.llmOutput??""):e="Invalid or incomplete response";else if("string"==typeof this.handleParsingErrors)e=this.handleParsingErrors;else{if("function"!=typeof this.handleParsingErrors)throw c;e=this.handleParsingErrors(c)}i={tool:"_Exception",toolInput:e,log:t}}}if("returnValues"in i)return i;s=Array.isArray(i)?i:[i];const a=[];for(const u of s){let t="";if(n&&await(n?.handleAgentAction(u)),u.tool in e){const r=e[u.tool];try{if(t=await r.call(u.toolInput,n?.getChild()),"string"!=typeof t)throw new Error("Received unsupported non-string response from tool call.")}catch(c){if(c instanceof ToolInputParsingException){if(!0===this.handleParsingErrors)t="Invalid or incomplete tool input. Please try again.";else if("string"==typeof this.handleParsingErrors)t=this.handleParsingErrors;else{if("function"!=typeof this.handleParsingErrors)throw c;t=this.handleParsingErrors(c)}t=await(new ExceptionTool).call(t,n?.getChild())}}}else t=`${u.tool} is not a valid tool, try another available tool: ${Object.keys(e).join(", ")}`;a.push({action:u,observation:t})}return a}async _return(e,t,r){r&&await r.handleAgentEnd(e);const n=e.returnValues;return this.returnIntermediateSteps&&(n.intermediateSteps=t),n}async _getToolReturn(e){const{action:t,observation:r}=e,n=Object.fromEntries(this.tools.map(e=>[e.name.toLowerCase(),e])),[o="output"]=this.agent.returnValues;return t.tool in n&&n[t.tool].returnDirect?{returnValues:{[o]:r},log:""}:null}_returnStoppedResponse(e){if("force"===e)return{returnValues:{output:"Agent stopped due to iteration limit or time limit."},log:""};throw new Error(`Got unsupported early_stopping_method: ${e}`)}async*_streamIterator(e,t){const r=new AgentExecutorIterator({inputs:e,agentExecutor:this,config:t,metadata:t?.metadata,tags:t?.tags,callbacks:t?.callbacks}).streamIterator();for await(const n of r)n&&(yield n)}_chainType(){return"agent_executor"}serialize(){throw new Error("Cannot serialize an AgentExecutor")}}class StuffDocumentsChain extends BaseChain{static lc_name(){return"StuffDocumentsChain"}get inputKeys(){return[this.inputKey,...this.llmChain.inputKeys].filter(e=>e!==this.documentVariableName)}get outputKeys(){return this.llmChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),this.llmChain=e.llmChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey}_prepInputs(e){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:t,...r}=e,n=t.map(({pageContent:e})=>e).join("\n\n");return{...r,[this.documentVariableName]:n}}async _call(e,t){return await this.llmChain.call(this._prepInputs(e),t?.getChild("combine_documents"))}_chainType(){return"stuff_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");return new StuffDocumentsChain({llmChain:await LLMChain.deserialize(e.llm_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize()}}}class MapReduceDocumentsChain extends BaseChain{static lc_name(){return"MapReduceDocumentsChain"}get inputKeys(){return[this.inputKey,...this.combineDocumentChain.inputKeys]}get outputKeys(){return this.combineDocumentChain.outputKeys}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"returnIntermediateSteps",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"maxTokens",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"maxIterations",{enumerable:!0,configurable:!0,writable:!0,value:10}),Object.defineProperty(this,"ensureMapStep",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"combineDocumentChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.llmChain=e.llmChain,this.combineDocumentChain=e.combineDocumentChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.ensureMapStep=e.ensureMapStep??this.ensureMapStep,this.inputKey=e.inputKey??this.inputKey,this.maxTokens=e.maxTokens??this.maxTokens,this.maxIterations=e.maxIterations??this.maxIterations,this.returnIntermediateSteps=e.returnIntermediateSteps??!1}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:r,...n}=e;let o=r,i=[];for(let c=0;c<this.maxIterations;c+=1){const e=o.map(e=>({[this.documentVariableName]:e.pageContent,...n}));if(0!==c||!this.ensureMapStep){const e=await this.combineDocumentChain.llmChain.prompt.format(this.combineDocumentChain._prepInputs({[this.combineDocumentChain.inputKey]:o,...n}));if(await this.combineDocumentChain.llmChain._getNumTokens(e)<this.maxTokens)break}const r=await this.llmChain.apply(e,t?Array.from({length:e.length},(e,r)=>t.getChild(`map_${r+1}`)):void 0),{outputKey:s}=this.llmChain;this.returnIntermediateSteps&&(i=i.concat(r.map(e=>e[s]))),o=r.map(e=>({pageContent:e[s],metadata:{}}))}const s={[this.combineDocumentChain.inputKey]:o,...n},a=await this.combineDocumentChain.call(s,t?.getChild("combine_documents"));return this.returnIntermediateSteps?{...a,intermediateSteps:i}:a}_chainType(){return"map_reduce_documents_chain"}static async deserialize(e){if(!e.llm_chain)throw new Error("Missing llm_chain");if(!e.combine_document_chain)throw new Error("Missing combine_document_chain");return new MapReduceDocumentsChain({llmChain:await LLMChain.deserialize(e.llm_chain),combineDocumentChain:await StuffDocumentsChain.deserialize(e.combine_document_chain)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),combine_document_chain:this.combineDocumentChain.serialize()}}}class RefineDocumentsChain extends BaseChain{static lc_name(){return"RefineDocumentsChain"}get defaultDocumentPrompt(){return new PromptTemplate({inputVariables:["page_content"],template:"{page_content}"})}get inputKeys(){return[...new Set([this.inputKey,...this.llmChain.inputKeys,...this.refineLLMChain.inputKeys])].filter(e=>e!==this.documentVariableName&&e!==this.initialResponseName)}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"llmChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input_documents"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output_text"}),Object.defineProperty(this,"documentVariableName",{enumerable:!0,configurable:!0,writable:!0,value:"context"}),Object.defineProperty(this,"initialResponseName",{enumerable:!0,configurable:!0,writable:!0,value:"existing_answer"}),Object.defineProperty(this,"refineLLMChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"documentPrompt",{enumerable:!0,configurable:!0,writable:!0,value:this.defaultDocumentPrompt}),this.llmChain=e.llmChain,this.refineLLMChain=e.refineLLMChain,this.documentVariableName=e.documentVariableName??this.documentVariableName,this.inputKey=e.inputKey??this.inputKey,this.outputKey=e.outputKey??this.outputKey,this.documentPrompt=e.documentPrompt??this.documentPrompt,this.initialResponseName=e.initialResponseName??this.initialResponseName}async _constructInitialInputs(e,t){const r={page_content:e.pageContent,...e.metadata},n={};this.documentPrompt.inputVariables.forEach(e=>{n[e]=r[e]});return{...{[this.documentVariableName]:await this.documentPrompt.format({...n})},...t}}async _constructRefineInputs(e,t){const r={page_content:e.pageContent,...e.metadata},n={};this.documentPrompt.inputVariables.forEach(e=>{n[e]=r[e]});const o={[this.documentVariableName]:await this.documentPrompt.format({...n})};return{[this.initialResponseName]:t,...o}}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Document key ${this.inputKey} not found.`);const{[this.inputKey]:r,...n}=e,o=r,i=await this._constructInitialInputs(o[0],n);let s=await this.llmChain.predict({...i},t?.getChild("answer"));for(let a=1;a<o.length;a+=1){const e={...await this._constructRefineInputs(o[a],s),...n};s=await this.refineLLMChain.predict({...e},t?.getChild("refine"))}return{[this.outputKey]:s}}_chainType(){return"refine_documents_chain"}static async deserialize(e){const t=e.llm_chain;if(!t)throw new Error("Missing llm_chain");const r=e.refine_llm_chain;if(!r)throw new Error("Missing refine_llm_chain");return new RefineDocumentsChain({llmChain:await LLMChain.deserialize(t),refineLLMChain:await LLMChain.deserialize(r)})}serialize(){return{_type:this._chainType(),llm_chain:this.llmChain.serialize(),refine_llm_chain:this.refineLLMChain.serialize()}}}const combine_docs_chain=Object.freeze(Object.defineProperty({__proto__:null,MapReduceDocumentsChain:MapReduceDocumentsChain,RefineDocumentsChain:RefineDocumentsChain,StuffDocumentsChain:StuffDocumentsChain},Symbol.toStringTag,{value:"Module"}));class BasePromptSelector{async getPromptAsync(e,t){return this.getPrompt(e).partial(t?.partialVariables??{})}}class ConditionalPromptSelector extends BasePromptSelector{constructor(e,t=[]){super(),Object.defineProperty(this,"defaultPrompt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"conditionals",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.defaultPrompt=e,this.conditionals=t}getPrompt(e){for(const[t,r]of this.conditionals)if(t(e))return r;return this.defaultPrompt}}function isChatModel(e){return"base_chat_model"===e._modelType()}const DEFAULT_QA_PROMPT=new PromptTemplate({template:"Use the following pieces of context to answer the question at the end. If you don't know the answer, just say that you don't know, don't try to make up an answer.\n\n{context}\n\nQuestion: {question}\nHelpful Answer:",inputVariables:["context","question"]}),system_template="Use the following pieces of context to answer the users question. \nIf you don't know the answer, just say that you don't know, don't try to make up an answer.\n----------------\n{context}",messages=[SystemMessagePromptTemplate.fromTemplate(system_template),HumanMessagePromptTemplate.fromTemplate("{question}")],CHAT_PROMPT=ChatPromptTemplate.fromMessages(messages),QA_PROMPT_SELECTOR=new ConditionalPromptSelector(DEFAULT_QA_PROMPT,[[isChatModel,CHAT_PROMPT]]);function loadQAStuffChain(e,t={}){const{prompt:r=QA_PROMPT_SELECTOR.getPrompt(e),verbose:n}=t,o=new LLMChain({prompt:r,llm:e,verbose:n});return new StuffDocumentsChain({llmChain:o,verbose:n})}class VectorDBQAChain extends BaseChain{static lc_name(){return"VectorDBQAChain"}get inputKeys(){return[this.inputKey]}get outputKeys(){return this.combineDocumentsChain.outputKeys.concat(this.returnSourceDocuments?["sourceDocuments"]:[])}constructor(e){super(e),Object.defineProperty(this,"k",{enumerable:!0,configurable:!0,writable:!0,value:4}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"query"}),Object.defineProperty(this,"vectorstore",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"combineDocumentsChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnSourceDocuments",{enumerable:!0,configurable:!0,writable:!0,value:!1}),this.vectorstore=e.vectorstore,this.combineDocumentsChain=e.combineDocumentsChain,this.inputKey=e.inputKey??this.inputKey,this.k=e.k??this.k,this.returnSourceDocuments=e.returnSourceDocuments??this.returnSourceDocuments}async _call(e,t){if(!(this.inputKey in e))throw new Error(`Question key ${this.inputKey} not found.`);const r=e[this.inputKey],n=await this.vectorstore.similaritySearch(r,this.k,e.filter,t?.getChild("vectorstore")),o={question:r,input_documents:n},i=await this.combineDocumentsChain.call(o,t?.getChild("combine_documents"));return this.returnSourceDocuments?{...i,sourceDocuments:n}:i}_chainType(){return"vector_db_qa"}static async deserialize(e,t){if(!("vectorstore"in t))throw new Error("Need to pass in a vectorstore to deserialize VectorDBQAChain");const{vectorstore:r}=t;if(!e.combine_documents_chain)throw new Error("VectorDBQAChain must have combine_documents_chain in serialized data");return new VectorDBQAChain({combineDocumentsChain:await BaseChain.deserialize(e.combine_documents_chain),k:e.k,vectorstore:r})}serialize(){return{_type:this._chainType(),combine_documents_chain:this.combineDocumentsChain.serialize(),k:this.k}}static fromLLM(e,t,r){return new this({vectorstore:t,combineDocumentsChain:loadQAStuffChain(e),...r})}}const vector_db_qa=Object.freeze(Object.defineProperty({__proto__:null,VectorDBQAChain:VectorDBQAChain},Symbol.toStringTag,{value:"Module"}));class OpenAIToolsAgentOutputParser extends AgentMultiActionOutputParser{constructor(){super(...arguments),Object.defineProperty(this,"lc_namespace",{enumerable:!0,configurable:!0,writable:!0,value:["langchain","agents","openai"]})}static lc_name(){return"OpenAIToolsAgentOutputParser"}async parse(e){throw new Error(`OpenAIFunctionsAgentOutputParser can only parse messages.\nPassed input: ${e}`)}async parseResult(e){if("message"in e[0]&&isBaseMessage(e[0].message))return this.parseAIMessage(e[0].message);throw new Error("parseResult on OpenAIFunctionsAgentOutputParser only works on ChatGeneration output")}parseAIMessage(e){if(e.content&&"string"!=typeof e.content)throw new Error("This agent cannot parse non-string model responses.");if(!e.additional_kwargs.tool_calls)return{returnValues:{output:e.content},log:e.content};{const r=e.additional_kwargs.tool_calls;try{return r.map((t,r)=>{const n=t.function.arguments?JSON.parse(t.function.arguments):{},o=0===r?[e]:[];return{tool:t.function.name,toolInput:n,toolCallId:t.id,log:`Invoking "${t.function.name}" with ${t.function.arguments??"{}"}\n${e.content}`,messageLog:o}})}catch(t){throw new OutputParserException(`Failed to parse tool arguments from chat model response. Text: "${JSON.stringify(r)}". ${t}`)}}}getFormatInstructions(){throw new Error("getFormatInstructions not implemented inside OpenAIToolsAgentOutputParser.")}}function _createToolMessage(e){return new ToolMessage({tool_call_id:e.action.toolCallId,content:e.observation,additional_kwargs:{name:e.action.tool}})}function formatToToolMessages(e){return e.flatMap(({action:e,observation:t})=>{if("messageLog"in e&&void 0!==e.messageLog){return e.messageLog.concat(_createToolMessage({action:e,observation:t}))}return[new AIMessage(e.log)]})}async function createOpenAIToolsAgent({llm:e,tools:t,prompt:r,streamRunnable:n}){if(!r.inputVariables.includes("agent_scratchpad"))throw new Error(['Prompt must have an input variable named "agent_scratchpad".',`Found ${JSON.stringify(r.inputVariables)} instead.`].join("\n"));const o=e.bindTools?e.bindTools(t):e.withConfig({tools:t.map(e=>convertToOpenAITool(e))});return AgentRunnableSequence.fromRunnables([RunnablePassthrough.assign({agent_scratchpad:e=>formatToToolMessages(e.steps)}),r,o,new OpenAIToolsAgentOutputParser],{name:"OpenAIToolsAgent",streamRunnable:n,singleAction:!1})}class HederaConversationalAgent{constructor(e,t={}){this.config={operationalMode:"returnBytes",verbose:!1,scheduleUserTransactionsInBytesMode:!0,...t};const r=this.config.modelCapability||ModelCapabilityDetector.getInstance().getModelCapabilitySync(t.openAIModelName),n=this.config.disableLogging||"true"===process$1.env.DISABLE_LOGS,o=this.config.verbose?"debug":"info",i=n?"silent":o;this.logger=new Logger({level:i,module:"HederaConversationalAgent",silent:n}),this.hederaKit=new HederaAgentKit(e,this.config.pluginConfig,this.config.operationalMode,this.config.userAccountId,this.config.scheduleUserTransactionsInBytesMode,r,this.config.openAIModelName||process$1.env.OPENAI_MODEL_NAME||"gpt-4o-mini",this.config.mirrorNodeConfig,n);const s=this.config.openAIModelName||process$1.env.OPENAI_MODEL_NAME||"gpt-4o-mini";if(this.tokenUsageHandler=new TokenUsageCallbackHandler(s,this.logger),this.config.llm)this.llm=this.config.llm;else{const e=this.config.openAIApiKey||process$1.env.OPENAI_API_KEY;if(!e)throw new Error("OpenAI API key is required. Provide it in config or via OPENAI_API_KEY env variable.");this.llm=new ChatOpenAI({apiKey:e,modelName:s,temperature:.1,callbacks:[this.tokenUsageHandler]})}}constructSystemMessage(){let e=[];const t=this.hederaKit.signer.getAccountId().toString(),r=this.config.userAccountId;return this.config.customSystemMessagePreamble&&e.push(this.config.customSystemMessagePreamble),e.push(`You are a helpful Hedera assistant. Your primary operator account is ${t}. You have tools to interact with the Hedera network. When using any tool, provide all necessary parameters as defined by that tool's schema and description.`),r&&e.push(`The user you are assisting has a personal Hedera account ID: ${r}. IMPORTANT: When the user says things like "I want to send HBAR" or "transfer my tokens", you MUST use ${r} as the sender/from account. For example, if user says "I want to send 2 HBAR to 0.0.800", you must set up a transfer where ${r} sends the HBAR, not your operator account.`),"autonomous"===this.hederaKit.operationalMode?e.push(`\nOPERATIONAL MODE: 'autonomous'. Your goal is to execute transactions directly using your tools. Your account ${t} will be the payer for these transactions. Even if the user's account (${r||"a specified account"}) is the actor in the transaction body (e.g., sender of HBAR), you (the agent with operator ${t}) are still executing and paying. For HBAR transfers, ensure the amounts in the 'transfers' array sum to zero (as per tool schema), balancing with your operator account if necessary.`):this.config.scheduleUserTransactionsInBytesMode&&r?e.push(`\nOPERATIONAL MODE: 'returnBytes' with scheduled transactions for user actions. When a user asks for a transaction to be prepared (e.g., creating a token, topic, transferring assets for them to sign, etc), you MUST default to creating a Scheduled Transaction using the appropriate tool with the metaOption 'schedule: true'. The user (with account ID ${r}) will be the one to ultimately pay for and (if needed) sign the inner transaction. Your operator account (${t}) will pay for creating the schedule entity itself. You MUST return the ScheduleId and details of the scheduled operation in a structured JSON format with these fields: success, op, schedule_id, description, payer_account_id_scheduled_tx, and scheduled_transaction_details.\nOnce a transaction is scheduled and you've provided the Schedule ID, you should ask the user if they want to sign and execute it. If they agree, use the 'hedera-sign-and-execute-scheduled-transaction' tool, providing the Schedule ID. This tool will prepare a ScheduleSignTransaction. If the agent is also configured for 'returnBytes', this ScheduleSignTransaction will be returned as bytes for the user to sign and submit using their account ${r}. If the agent is in 'autonomous' mode for the ScheduleSign part (not typical for user-scheduled flows but possible), the agent would sign and submit it.`):e.push(`\nOPERATIONAL MODE: 'returnBytes'. Your goal is to provide transaction bytes directly. When a user asks for a transaction to be prepared (e.g., for them to sign, or for scheduling without the default scheduling flow), you MUST call the appropriate tool. If you want raw bytes for the user to sign for their own account ${r||"if specified"}, ensure the tool constructs the transaction body accordingly and use metaOption 'returnBytes: true' if available, or ensure the builder is configured for the user. `+(r?`If the transaction body was constructed to reflect the user's account ${r} as the actor, also inform the user the application can adapt these bytes for their signing and payment using their account ${r}.`:"")),e.push("\nAlways be concise. If the tool provides a JSON string as its primary output (especially in returnBytes mode), make your accompanying text brief. If the tool does not provide JSON output or an error occurs, your narrative becomes primary; if notes were generated by the tool in such cases, append them to your textual response."),this.config.customSystemMessagePostamble&&e.push(this.config.customSystemMessagePostamble),e.join("\n")}async initialize(){const e=await ModelCapabilityDetector.getInstance().getModelCapability(this.config.openAIModelName);e!==this.hederaKit.modelCapability&&(this.hederaKit.modelCapability=e,this.logger.info(`Updated model capability to ${e} after API fetch`)),await this.hederaKit.initialize(),this.systemMessage=this.constructSystemMessage();const t=this.hederaKit.getAggregatedLangChainTools();0===t.length&&this.logger.warn("No tools were loaded into HederaAgentKit. The agent may not function correctly."),this.logger.info(`Loaded ${t.length} tools for model capability: ${this.hederaKit.modelCapability}`);const r=ChatPromptTemplate.fromMessages([["system",this.systemMessage],new MessagesPlaceholder("chat_history"),["human","{input}"],new MessagesPlaceholder("agent_scratchpad")]),n=await createOpenAIToolsAgent({llm:this.llm,tools:t,prompt:r});this.agentExecutor=new AgentExecutor({agent:n,tools:t,verbose:this.config.verbose??!1,returnIntermediateSteps:!0}),this.logger.info("HederaConversationalAgent initialized.")}async processMessage(e,t){if(!this.agentExecutor)throw new Error("HederaConversationalAgent not initialized. Call await initialize() first.");const r=(t||[]).map(e=>"human"===e.type?new HumanMessage(e.content):new AIMessage(e.content));let n={output:"",message:"",notes:[],transactionBytes:void 0,receipt:void 0,scheduleId:void 0,transactionId:void 0,error:void 0,intermediateSteps:void 0,rawToolOutput:void 0,tokenUsage:void 0,cost:void 0};try{const t=await this.agentExecutor.invoke({input:e,chat_history:r});n.message=t.output||"";let i=t?.intermediateSteps?.[0]?.observation;if(i)try{n={...n,...JSON.parse(i)}}catch(o){this.logger.error("Error parsing intermediate steps:",o)}n.output&&""!==n.output.trim()||(n.output="Agent action complete.");const s=this.tokenUsageHandler.getLatestTokenUsage();return s&&(n.tokenUsage=s,n.cost=calculateTokenCostSync(s),this.logger.debug("Token usage for request:",{promptTokens:s.promptTokens,completionTokens:s.completionTokens,totalTokens:s.totalTokens,cost:n.cost.totalCost})),n}catch(i){const e=i instanceof Error?i.message:"Unknown error";this.logger.error(`Error in HederaConversationalAgent.processMessage: ${e}`,i);const t=this.tokenUsageHandler.getLatestTokenUsage();let r;return t&&(r=calculateTokenCostSync(t)),{output:"Sorry, I encountered an error processing your request.",message:n.message||"",notes:n.notes||[],error:e,transactionBytes:n?.transactionBytes,receipt:n.receipt,scheduleId:n.scheduleId,transactionId:n.transactionId,intermediateSteps:n.intermediateSteps,rawToolOutput:n.rawToolOutput,tokenUsage:t||void 0,cost:r}}}setOperationalMode(e){this.config.operationalMode=e,this.hederaKit.operationalMode=e,this.systemMessage=this.constructSystemMessage(),this.logger.info(`Operational mode set to: ${e}. System message and kit mode updated.`),this.agentExecutor&&this.logger.warn("Operational mode changed. For the new system prompt to fully take effect, re-initialization (call initialize()) or recreation of the agent executor is needed.")}getTotalTokenUsage(){const e=this.tokenUsageHandler.getTotalTokenUsage(),t=calculateTokenCostSync(e);return{...e,cost:t}}getTokenUsageHistory(){return this.tokenUsageHandler.getTokenUsageHistory().map(e=>({...e,cost:calculateTokenCostSync(e)}))}resetTokenUsageTracking(){this.tokenUsageHandler.reset(),this.logger.info("Token usage tracking has been reset")}getKit(){return this.hederaKit}}class AbstractSigner{async getPublicKey(){if(!this.mirrorNode)throw new Error("AbstractSigner: HederaMirrorNode has not been initialized by the concrete signer implementation. This is an internal error.");const e=this.getAccountId();try{return await this.mirrorNode.getPublicKey(e.toString())}catch(t){const r=t instanceof Error?t.message:String(t);throw new Error(`Failed to retrieve public key from mirror node for account ${e.toString()}: ${r}`)}}initializeMirrorNode(e,t){this.mirrorNode=new HederaMirrorNode(e,new Logger({level:"info",module:`${t}-MirrorNode`}))}}class ServerSigner extends AbstractSigner{constructor(e,t,r){if(super(),this.keyType="ed25519",this.keyTypeVerified=!1,this.accountIdInternal=f$2.fromString(e.toString()),this.networkInternal=r,this.logger=new Logger({module:"ServerSigner",level:"true"===process$1.env.DEBUG?"debug":"warn"}),this.initializeMirrorNode(this.networkInternal,"ServerSigner"),"mainnet"===r)this.client=i$1.forMainnet();else{if("testnet"!==r)throw new Error(`Unsupported Hedera network type specified: ${r}. Only 'mainnet' or 'testnet' are supported.`);this.client=i$1.forTestnet()}if("string"==typeof t){this.privateKeyString=t;try{const e=detectKeyTypeFromString(t);this.privateKey=e.privateKey,this.keyType=e.detectedType,this.initializeOperator(),this.logger.debug(`Detected key type from string: ${this.keyType}`)}catch(n){this.logger.warn("Failed to detect key type from private key format, will query mirror node",n.message),this.privateKey=g.fromStringED25519(t),this.keyType="ed25519"}}else this.privateKey=t,this.privateKeyString=t.toString();this.client.setOperator(this.accountIdInternal,this.privateKey)}async initializeOperator(){try{const e=await this.mirrorNode.requestAccount(this.accountIdInternal.toString()),t=e?.key?._type;let r="ed25519";t?.includes("ECDSA")?r="ecdsa":t?.includes("ED25519")&&(r="ed25519"),r!==this.keyType?(this.logger.debug(`Key type mismatch detected. String detection: ${this.keyType}, Mirror node: ${r}. Using mirror node result.`),this.keyType=r,this.privateKeyString&&(this.privateKey="ecdsa"===r?g.fromStringECDSA(this.privateKeyString):g.fromStringED25519(this.privateKeyString),this.client.setOperator(this.accountIdInternal,this.privateKey),this.logger.debug(`Updated operator with verified key type: ${this.keyType}`))):this.logger.debug(`Key type verification successful: ${this.keyType}`),this.keyTypeVerified=!0}catch(e){this.logger.error(`Failed to verify key type from mirror node: ${e.message}`),this.keyTypeVerified=!0}}getAccountId(){return this.accountIdInternal}async signAndExecuteTransaction(e){e.isFrozen()||(e.transactionId,await e.freezeWith(this.client)),0===e.getSignatures().size&&await e.sign(this.privateKey);return(await e.execute(this.client)).getReceipt(this.client)}getNetwork(){return this.networkInternal}getOperatorPrivateKey(){return this.privateKey}getClient(){return this.client}async getKeyType(){return!this.keyTypeVerified&&this.privateKeyString&&await this.initializeOperator(),this.keyType}getKeyTypeSync(){return this.keyType}}var AgentKitActionName=(e=>(e.CREATE_TOPIC_CUSTODIAL="createTopicCustodial",e.CREATE_TOPIC_NON_CUSTODIAL="createTopicNonCustodial",e.DELETE_TOPIC_CUSTODIAL="deleteTopicCustodial",e.DELETE_TOPIC_NON_CUSTODIAL="deleteTopicNonCustodial",e.SUBMIT_TOPIC_MESSAGE_CUSTODIAL="submitTopicMessageCustodial",e.SUBMIT_TOPIC_MESSAGE_NON_CUSTODIAL="submitTopicMessageCustodial",e.CREATE_TOKEN_CUSTODIAL="createTokenCustodial",e.CREATE_TOKEN_NON_CUSTODIAL="createTokenNonCustodial",e.ASSOCIATE_TOKEN_CUSTODIAL="associateTokenCustodial",e.ASSOCIATE_TOKEN_NON_CUSTODIAL="associateTokenNonCustodial",e.DISSOCIATE_TOKEN_CUSTODIAL="dissociateTokenCustodial",e.DISSOCIATE_TOKEN_NON_CUSTODIAL="dissociateTokenNonCustodial",e.AIRDROP_TOKEN_CUSTODIAL="airdropTokenCustodial",e.AIRDROP_TOKEN_NON_CUSTODIAL="airdropTokenNonCustodial",e.REJECT_TOKEN_CUSTODIAL="rejectedTokenCustodial",e.REJECT_TOKEN_NON_CUSTODIAL="rejectedTokenNonCustodial",e.MINT_TOKEN_CUSTODIAL="mintTokenCustodial",e.MINT_TOKEN_NON_CUSTODIAL="mintTokenNonCustodial",e.MINT_NFT_TOKEN_CUSTODIAL="mintNFTTokenCustodial",e.MINT_NFT_TOKEN_NON_CUSTODIAL="mintNFTTokenNonCustodial",e.CLAIM_AIRDROP_CUSTODIAL="claimAirdropCustodial",e.CLAIM_AIRDROP_NON_CUSTODIAL="claimAirdropNonCustodial",e.TRANSFER_TOKEN_CUSTODIAL="transferTokenCustodial",e.TRANSFER_TOKEN_NON_CUSTODIAL="transferTokenNonCustodial",e.TRANSFER_HBAR_CUSTODIAL="transferHbarCustodial",e.TRANSFER_HBAR_NON_CUSTODIAL="transferHbarNonCustodial",e.ASSET_ALLOWANCE_CUSTODIAL="assetAllowedCustodial",e.ASSET_ALLOWANCE_NON_CUSTODIAL="assetAllowedNonCustodial",e))(AgentKitActionName||{});function parseKey(e){if(!e)return null;try{return detectKeyTypeFromString(e).privateKey.publicKey}catch{try{return i$f.fromString(e)}catch{return null}}}const HederaTransactionMetaOptionsSchema=objectType({transactionMemo:stringType().optional().describe("Optional memo for the Hedera transaction."),transactionId:stringType().optional().describe("Optional transaction ID to use (e.g., for pre-generated IDs)."),nodeAccountIds:arrayType(stringType()).optional().describe("Optional specific node account IDs to target for the transaction."),schedule:booleanType().optional().describe("Set to true to schedule the transaction. If true, output will be for a ScheduleCreate transaction."),scheduleMemo:stringType().optional().describe("Optional memo for the ScheduleCreate transaction itself."),schedulePayerAccountId:stringType().optional().describe("Optional payer account ID for the ScheduleCreate transaction."),scheduleAdminKey:stringType().optional().describe("Optional admin key (serialized string) for the ScheduleCreate transaction. Builder parses.")}).optional();class BaseHederaTransactionTool extends StructuredTool{constructor({hederaKit:e,logger:t,...r}){super(r),this.neverScheduleThisTool=!1,this.requiresMultipleTransactions=!1,this.hederaKit=e,this.logger=t||e.logger}get schema(){return this.specificInputSchema.extend({metaOptions:HederaTransactionMetaOptionsSchema})}async _applyMetaOptions(e,t,r){await this._substituteKeyFields(r),this._applyTransactionOptions(e,t)}async _substituteKeyFields(e){const t=["adminKey","kycKey","freezeKey","wipeKey","supplyKey","feeScheduleKey","pauseKey"];for(const n of t){if("current_signer"===e[n])try{const t=(await this.hederaKit.signer.getPublicKey()).toStringDer();e[n]=t,this.logger.info(`Substituted ${n} with current signer's public key.`)}catch(r){const e=r;this.logger.error(`Failed to get current signer's public key for ${n} substitution: ${e.message}`,r)}}}_applyTransactionOptions(e,t){if(t){if(t.transactionId)try{e.setTransactionId(i$c.fromString(t.transactionId))}catch{this.logger.warn(`Invalid transactionId format in metaOptions: ${t.transactionId}, ignoring.`)}if(t.nodeAccountIds&&t.nodeAccountIds.length>0)try{e.setNodeAccountIds(t.nodeAccountIds.map(e=>f$2.fromString(e)))}catch{this.logger.warn("Invalid nodeAccountId format in metaOptions, ignoring.")}t.transactionMemo&&e.setTransactionMemo(t.transactionMemo)}}async _handleAutonomous(e,t,r){const n=this._buildScheduleOptions(t);this.logger.info(`Executing transaction directly (mode: autonomous): ${this.name}`);const o=await e.execute(n);return JSON.stringify({...o,notes:r})}async _handleReturnBytes(e,t,r){if(this.requiresMultipleTransactions){const e=`The ${this.name} tool requires multiple transactions and cannot be used in returnBytes mode. Please use autonomous mode or break down the operation into individual steps.`;return this.logger.warn(e),JSON.stringify({success:!1,error:e,requiresAutonomous:!0,notes:r})}return this._shouldScheduleTransaction(t)?this._handleScheduledTransaction(e,t,r):this._handleUnscheduledTransaction(e,r)}_shouldScheduleTransaction(e){return!this.neverScheduleThisTool&&(e?.schedule??("returnBytes"===this.hederaKit.operationalMode&&this.hederaKit.scheduleUserTransactionsInBytesMode))}async _handleScheduledTransaction(e,t,r){this.logger.info(`Preparing scheduled transaction (mode: returnBytes, schedule: true): ${this.name}`);const n=this._buildScheduleOptions(t,!0);n.schedulePayerAccountId=this.hederaKit.signer.getAccountId();const o=await e.execute(n);if(o.success&&o.scheduleId){const e=t?.transactionMemo||`Scheduled ${this.name} operation.`,n=this.hederaKit.userAccountId?` User (${this.hederaKit.userAccountId}) will be payer of scheduled transaction.`:"";return JSON.stringify({success:!0,op:"schedule_create",scheduleId:o.scheduleId.toString(),description:e+n,payer_account_id_scheduled_tx:this.hederaKit.userAccountId||"unknown",memo_scheduled_tx:t?.transactionMemo,notes:r})}return JSON.stringify({success:!1,error:o.error||"Failed to create schedule and retrieve ID.",notes:r})}async _handleUnscheduledTransaction(e,t){this.logger.info(`Returning transaction bytes (mode: returnBytes, schedule: false): ${this.name}`);const r=await e.getTransactionBytes({});return JSON.stringify({success:!0,transactionBytes:r,transactionId:e.getCurrentTransaction()?.transactionId?.toString(),notes:t})}_buildScheduleOptions(e,t=!1){const r={};if(t||e?.schedule){if(r.schedule=!0,e?.scheduleMemo&&(r.scheduleMemo=e.scheduleMemo),e?.schedulePayerAccountId)try{r.schedulePayerAccountId=f$2.fromString(e.schedulePayerAccountId)}catch{this.logger.warn("Invalid schedulePayerAccountId")}if(e?.scheduleAdminKey)try{const t=parseKey(e.scheduleAdminKey);t&&(r.scheduleAdminKey=t)}catch{this.logger.warn("Invalid scheduleAdminKey")}}return r}getNoteForKey(e,t,r){}async _call(e,t){const r=e.metaOptions,n=this._extractSpecificArgsFromCombinedArgs(e);this.logger.info(`Executing ${this.name} with Zod-parsed specific args (schema defaults applied by LangChain):`,JSON.parse(JSON.stringify(n)),"and metaOptions:",r);const o=[];if(this.specificInputSchema&&this.specificInputSchema.shape)for(const a in this.specificInputSchema.shape)if(Object.prototype.hasOwnProperty.call(this.specificInputSchema.shape,a)){const e=this.specificInputSchema.shape[a];if(e._def&&"ZodDefault"===e._def.typeName){const t=e._def.defaultValue();let r=t;if("function"==typeof t)try{r=t()}catch(i){this.logger.warn(`Could not execute default value function for key ${a}. Error: ${i.message}`),r="[dynamic schema default]"}const s=n[a];let c;this.getNoteForKey&&(c=this.getNoteForKey(a,r,s)),c||(c=`For the parameter '${a}', the value '${JSON.stringify(s)}' was used. This field has a tool schema default of '${JSON.stringify(r)}'.`),o.push(c)}}this.logger.debug("Zod Schema Default Info Notes:",o);try{const e=this.getServiceBuilder();e.clearNotes(),await this.callBuilderMethod(e,n,t),await this._applyMetaOptions(e,r,n);const i=e.getNotes();this.logger.debug("Builder Applied Default Notes:",i);const s=[...o,...i];return this.logger.debug("All Notes combined:",s),"autonomous"===this.hederaKit.operationalMode?this._handleAutonomous(e,r,s):this._handleReturnBytes(e,r,s)}catch(s){const e=this.getServiceBuilder(),t=e?e.getNotes():[],r=[...o,...t];return this._handleError(s,r)}}_extractSpecificArgsFromCombinedArgs(e){const t={};if(this.specificInputSchema&&this.specificInputSchema.shape)for(const r in this.specificInputSchema.shape)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}_handleError(e,t){const r=e instanceof Error?e.message:JSON.stringify(e);return this.logger.error(`Error in ${this.name}: ${r}`,e),JSON.stringify({success:!1,error:r,notes:t||[]})}}const CreateAccountZodSchemaCore=objectType({key:stringType().optional().describe("Optional. Public key string (hex) or private key string for the new account. Used if alias is not set. Builder validates presence of key or alias."),alias:stringType().optional().describe("Optional. Account alias (e.g., EVM address or serialized PublicKey string). Takes precedence over key. Builder validates presence of key or alias."),initialBalance:unionType([numberType(),stringType()]).optional().describe("Optional. Initial balance in HBAR. Builder handles conversion. Defaults to 0."),memo:stringType().optional().describe("Optional. Memo for the account."),autoRenewAccountId:stringType().optional().describe('Optional. Account ID for auto-renewal payments (e.g., "0.0.xxxx").'),autoRenewPeriod:numberType().int().positive().optional().describe("Optional. Auto-renewal period in seconds (e.g., 7776000 for 90 days)."),receiverSignatureRequired:booleanType().optional().describe("Optional. If true, account must sign transfers out of it."),maxAutomaticTokenAssociations:numberType().int().optional().describe("Optional. Max automatic token associations for the account."),stakedAccountId:stringType().optional().describe('Optional. Account ID to stake to (e.g., "0.0.zzzz").'),stakedNodeId:numberType().int().optional().describe("Optional. Node ID to stake to. Builder handles Long conversion."),declineStakingReward:booleanType().optional().describe("Optional. If true, decline staking rewards.")});class HederaCreateAccountTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-account-create",this.description="Creates a new Hedera account. Requires key or alias (builder validates). Builder handles parsing and defaults.",this.specificInputSchema=CreateAccountZodSchemaCore,this.namespace="account"}getServiceBuilder(){return this.hederaKit.accounts()}async callBuilderMethod(e,t){await e.createAccount(t)}}const HbarTransferInputSchema$1=objectType({accountId:stringType().describe('Account ID for the transfer (e.g., "0.0.xxxx").'),amount:unionType([numberType(),stringType()]).describe("HBAR amount. Positive for credit, negative for debit. Builder handles Hbar unit & sum validation.")}),TransferHbarZodSchemaCore=objectType({transfers:arrayType(HbarTransferInputSchema$1).min(1).describe("Array of HBAR transfers, each with accountId and amount in HBARs."),memo:stringType().optional().describe("Optional. Memo for the transaction.")});class HederaTransferHbarTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-account-transfer-hbar",this.description="Transfers HBAR between accounts. Builder validates amounts and sum.",this.specificInputSchema=TransferHbarZodSchemaCore,this.namespace="account"}getServiceBuilder(){return this.hederaKit.accounts()}async callBuilderMethod(e,t){await e.transferHbar(t)}}const UpdateAccountZodSchemaCore=objectType({accountIdToUpdate:stringType().describe('The ID of the account to update (e.g., "0.0.12345").'),key:stringType().nullable().optional().describe("Optional. New key (serialized string). Pass null to clear (if allowed by SDK). Builder handles parsing."),autoRenewPeriod:numberType().int().positive().optional().describe("Optional. New auto-renewal period in seconds (e.g., 7776000 for 90 days)."),memo:stringType().nullable().optional().describe("Optional. New memo. Pass null or empty string to clear."),maxAutomaticTokenAssociations:numberType().int().min(0).optional().describe("Optional. New max automatic token associations (0-5000)."),stakedAccountId:stringType().nullable().optional().describe('Optional. New account ID to stake to. Pass "0.0.0" or null to clear.'),stakedNodeId:numberType().int().nullable().optional().describe("Optional. New node ID to stake to. Pass -1 or null to clear. Builder handles Long conversion."),declineStakingReward:booleanType().optional().describe("Optional. If true, account declines staking rewards."),receiverSignatureRequired:booleanType().optional().describe("Optional. If true, account must sign transfers out of it.")});class HederaUpdateAccountTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-account-update",this.description="Updates an existing Hedera account. Specify accountIdToUpdate and fields to change. Builder handles parsing and clearing logic.",this.specificInputSchema=UpdateAccountZodSchemaCore,this.namespace="account"}getServiceBuilder(){return this.hederaKit.accounts()}async callBuilderMethod(e,t){await e.updateAccount(t)}}const DeleteAccountZodSchemaCore=objectType({deleteAccountId:stringType().describe('The ID of the account to be deleted (e.g., "0.0.xxxx"). This account must sign.'),transferAccountId:stringType().describe('The ID of the account to transfer the remaining HBAR balance to (e.g., "0.0.yyyy").')});class HederaDeleteAccountTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-account-delete",this.description="Deletes an account, transferring its HBAR balance to another account.",this.specificInputSchema=DeleteAccountZodSchemaCore,this.namespace="account"}getServiceBuilder(){return this.hederaKit.accounts()}async callBuilderMethod(e,t){await e.deleteAccount(t)}}const ApproveHbarAllowanceZodSchemaCore=objectType({ownerAccountId:stringType().optional().describe('Optional. The HBAR owner account ID (e.g., "0.0.xxxx"). Defaults to operator if not provided.'),spenderAccountId:stringType().describe('The spender account ID being granted the allowance (e.g., "0.0.yyyy").'),amount:unionType([numberType(),stringType()]).describe("Max HBAR amount spender can use (in HBARs). Builder handles Hbar object creation."),memo:stringType().optional().describe("Optional. Memo for the transaction.")});class HederaApproveHbarAllowanceTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-account-approve-hbar-allowance",this.description="Approves an HBAR allowance for a spender. Builder handles Hbar unit conversion.",this.specificInputSchema=ApproveHbarAllowanceZodSchemaCore,this.namespace="account"}getServiceBuilder(){return this.hederaKit.accounts()}async callBuilderMethod(e,t){await e.approveHbarAllowance(t)}}const ApproveFungibleTokenAllowanceZodSchemaCore=objectType({ownerAccountId:stringType().optional().describe('Optional. The token owner account ID (e.g., "0.0.xxxx"). Defaults to operator.'),spenderAccountId:stringType().describe('The spender account ID (e.g., "0.0.yyyy").'),tokenId:stringType().describe('The fungible token ID (e.g., "0.0.zzzz").'),amount:unionType([numberType(),stringType()]).describe("Max token amount (smallest unit) spender can use. Builder handles conversion."),memo:stringType().optional().describe("Optional. Memo for the transaction.")});class HederaApproveFungibleTokenAllowanceTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-account-approve-fungible-token-allowance",this.description="Approves a fungible token allowance for a spender. Builder handles amount conversion.",this.specificInputSchema=ApproveFungibleTokenAllowanceZodSchemaCore,this.namespace="account"}getServiceBuilder(){return this.hederaKit.accounts()}async callBuilderMethod(e,t){await e.approveFungibleTokenAllowance(t)}}const ApproveTokenNftAllowanceZodSchemaCore=objectType({ownerAccountId:stringType().optional().describe('Optional. The NFT owner account ID (e.g., "0.0.xxxx"). Defaults to operator.'),spenderAccountId:stringType().describe('The spender account ID (e.g., "0.0.yyyy").'),tokenId:stringType().describe('The NFT collection ID (e.g., "0.0.zzzz").'),serials:arrayType(unionType([numberType().int().positive(),stringType()])).optional().describe("Optional. Specific serial numbers to approve. Use this OR allSerials. Builder handles conversion."),allSerials:booleanType().optional().describe("Optional. If true, approves spender for all serials of the NFT ID. Use this OR serials."),memo:stringType().optional().describe("Optional. Memo for the transaction.")});class HederaApproveTokenNftAllowanceTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-account-approve-nft-allowance",this.description="Approves an NFT allowance. Builder validates serials/allSerials logic and handles serial conversion.",this.specificInputSchema=ApproveTokenNftAllowanceZodSchemaCore,this.namespace="account"}getServiceBuilder(){return this.hederaKit.accounts()}async callBuilderMethod(e,t){await e.approveTokenNftAllowance(t)}}const RevokeHbarAllowanceZodSchemaCore=objectType({ownerAccountId:stringType().optional().describe('Optional. The HBAR owner account ID (e.g., "0.0.xxxx"). Defaults to operator.'),spenderAccountId:stringType().describe('The spender account ID whose HBAR allowance is to be revoked (e.g., "0.0.yyyy").'),memo:stringType().optional().describe("Optional. Memo for the transaction.")});class HederaRevokeHbarAllowanceTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-account-revoke-hbar-allowance",this.description="Revokes/clears an HBAR allowance for a specific spender by approving zero HBAR.",this.specificInputSchema=RevokeHbarAllowanceZodSchemaCore,this.namespace="account"}getServiceBuilder(){return this.hederaKit.accounts()}async callBuilderMethod(e,t){await e.revokeHbarAllowance(t)}}const RevokeFungibleTokenAllowanceZodSchemaCore=objectType({ownerAccountId:stringType().optional().describe('Optional. The token owner account ID (e.g., "0.0.xxxx"). Defaults to operator.'),spenderAccountId:stringType().describe('The spender account ID whose token allowance is to be revoked (e.g., "0.0.yyyy").'),tokenId:stringType().describe('The ID of the fungible token (e.g., "0.0.zzzz").'),memo:stringType().optional().describe("Optional. Memo for the transaction.")});class HederaRevokeFungibleTokenAllowanceTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-account-revoke-fungible-token-allowance",this.description="Revokes/clears a fungible token allowance for a specific spender by approving zero amount.",this.specificInputSchema=RevokeFungibleTokenAllowanceZodSchemaCore,this.namespace="account"}getServiceBuilder(){return this.hederaKit.accounts()}async callBuilderMethod(e,t){await e.revokeFungibleTokenAllowance(t)}}const DeleteNftSpenderAllowanceZodSchemaCore=objectType({ownerAccountId:stringType().optional().describe("Optional. The ID of the NFT owner. Defaults to the operator/signer if not provided."),spenderAccountId:stringType().describe("The ID of the spender whose allowance for specific NFTs will be deleted."),nftIdString:stringType().describe('The NFT ID including serial number (e.g., "0.0.token.serial") for which the allowance will be deleted.'),tokenId:stringType().describe('The token ID of the NFT collection (e.g., "0.0.xxxx").'),serials:arrayType(unionType([numberType().int().positive(),stringType()])).min(1).describe("An array of serial numbers of the NFT to remove allowance for.")});class HederaDeleteNftSpenderAllowanceTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-account-delete-nft-spender-allowance",this.description="Deletes/revokes NFT allowances for specific serial numbers of a token for a specific spender. The owner of the NFTs must sign.",this.specificInputSchema=DeleteNftSpenderAllowanceZodSchemaCore,this.namespace="account"}getServiceBuilder(){return this.hederaKit.accounts()}async callBuilderMethod(e,t){await e.deleteTokenNftAllowanceForSpender(t)}}const DeleteNftSerialAllowancesZodSchemaCore=objectType({ownerAccountId:stringType().optional().describe("Optional. The ID of the NFT owner. Defaults to the operator/signer if not provided."),nftIdString:stringType().describe('The specific NFT ID including serial number (e.g., "0.0.token.serial") for which all spender allowances will be deleted.'),memo:stringType().optional().describe("Optional. Memo for the transaction.")});class HederaDeleteNftSerialAllowancesTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-account-delete-nft-serial-allowances-for-all-spenders",this.description="Deletes all allowances for a specific NFT serial (for all spenders), granted by an owner. This action must be signed by the NFT owner.",this.specificInputSchema=DeleteNftSerialAllowancesZodSchemaCore,this.namespace="account"}getServiceBuilder(){return this.hederaKit.accounts()}async callBuilderMethod(e,t){await e.deleteNftSerialAllowancesForAllSpenders(t)}}const MODEL_STRATEGIES={[ModelCapability.SMALL]:{maxTokens:4e3,summarizeArrays:!0,maxArrayLength:3,includeMetadata:!0},[ModelCapability.MEDIUM]:{maxTokens:12e3,summarizeArrays:!1,maxArrayLength:10,includeMetadata:!0},[ModelCapability.LARGE]:{maxTokens:32e3,summarizeArrays:!1,maxArrayLength:50,includeMetadata:!1},[ModelCapability.UNLIMITED]:{maxTokens:1/0,summarizeArrays:!1,includeMetadata:!1}};class BaseHederaQueryTool extends StructuredTool{constructor({hederaKit:e,logger:t,modelCapability:r=ModelCapability.MEDIUM,customStrategy:n,...o}){super(o),this.notes=[],this.hederaKit=e,this.logger=t||e.logger,this.modelCapability=r;const i=MODEL_STRATEGIES[r];this.responseStrategy={...i,...n},this.logger.debug(`Initialized query tool with ${r} capability strategy`)}get schema(){return this.specificInputSchema}estimateTokens(e){return Math.ceil(e.length/4)}matchesPattern(e,t){if(t===e)return!0;if(t.includes("*")){return new RegExp("^"+t.replace(/\*/g,"[^.]*")+"$").test(e)}return!1}processData(e,t,r=""){if(this.responseStrategy.maxTokens===1/0)return e;const n=this.getLargeFieldProcessors?this.getLargeFieldProcessors(t):{};return null==e?e:Array.isArray(e)?this.processArray(e,t,r):"object"!=typeof e||null===e||Array.isArray(e)?"string"==typeof e?this.processString(e,r,n):e:this.processObject(e,t,r,n)}processArray(e,t,r){const n=e.map((e,n)=>this.processData(e,t,`${r}[${n}]`));if(this.responseStrategy.summarizeArrays&&this.responseStrategy.maxArrayLength&&e.length>this.responseStrategy.maxArrayLength){const t=this.responseStrategy.maxArrayLength,o=Math.floor(t/2),i=t-o-1;return[...n.slice(0,o),{_summary:`[${e.length-t} items truncated]`,_originalLength:e.length,_truncatedAt:r},...n.slice(-i)]}return n}processObject(e,t,r,n){const o={};for(const[i,s]of Object.entries(e)){const e=r?`${r}.${i}`:i,a=Object.entries(n).find(([t])=>this.matchesPattern(e,t)),c=a?a[1]:void 0;c&&c.exclude||(o[i]=this.processData(s,t,e))}return o}processString(e,t,r){const n=Object.entries(r).find(([e])=>this.matchesPattern(t,e)),o=n?n[1]:void 0;if(o&&o.maxLength&&e.length>o.maxLength){return`${e.substring(0,o.maxLength)}...${o.truncateMessage?o.truncateMessage:`[TRUNCATED: ${e.length} chars total]`}`}return e}formatResult(e,t){if("string"==typeof e)return e;let r=e;this.processCustomResponse&&t&&(r=this.processCustomResponse(r,t)),r=this.processData(r,t||{});const n=JSON.stringify(r,null,2),o=this.estimateTokens(n);if(this.responseStrategy.includeMetadata&&o>.8*this.responseStrategy.maxTokens){const e={..."object"==typeof r&&null!==r?r:{data:r},_meta:{estimatedTokens:o,maxTokens:this.responseStrategy.maxTokens,capability:Object.keys(MODEL_STRATEGIES).find(e=>MODEL_STRATEGIES[e]===this.responseStrategy),note:"Response may be truncated. Use higher model capability for full data."}};return JSON.stringify(e,null,2)}return n}handleError(e){const t=e instanceof Error?e.message:JSON.stringify(e);return this.logger.error(`Error in query tool: ${t}`,e),JSON.stringify({success:!1,error:t})}async _call(e,t){this.clearNotes();try{this.logger.info(`Executing ${this.name} with model capability: ${this.modelCapability}`);const r=await this.executeQuery(e,t),n=await this.processLargeFields(r,e),o=this.getNotes();if("object"==typeof n.data&&null!==n.data&&"success"in n.data){const e=n.data,t={...e,...o.length>0&&{notes:[...e.notes||[],...o]}};return JSON.stringify(t)}const i={success:!0,data:n.data,...o.length>0&&{notes:o}};return JSON.stringify(i)}catch(r){const e=r instanceof Error?r.message:String(r);this.logger.error(`Error in ${this.name}: ${e}`,r);const t=this.getNotes();return JSON.stringify({success:!1,error:e,...t.length>0&&{notes:t}})}}async getModelCapabilityLimits(){if(this.modelCapability===ModelCapability.UNLIMITED)return{maxTokens:1/0,arrayLimit:1/0};try{const e=ModelCapabilityDetector.getInstance();if(this.hederaKit.modelName){const t=await e.getContextWindow(this.hederaKit.modelName);if(t>0){const e=Math.floor(.6*t),r=t-e-Math.floor(.2*t),n=this.calculateArrayLimit(r);return{maxTokens:Math.max(r,1e3),arrayLimit:n}}}const t=await e.getAllModels();let r=0;for(const[,n]of Object.entries(t))n.capability===this.modelCapability&&n.contextWindow>r&&(r=n.contextWindow);if(r>0){const e=Math.floor(.6*r),t=r-e-Math.floor(.2*r),n=this.calculateArrayLimit(t);return{maxTokens:Math.max(t,1e3),arrayLimit:n}}}catch(e){this.logger.warn("Failed to get model context window, using fallback limits",e)}switch(this.modelCapability){case ModelCapability.SMALL:return{maxTokens:1e3,arrayLimit:3};case ModelCapability.MEDIUM:return{maxTokens:4e3,arrayLimit:10};case ModelCapability.LARGE:return{maxTokens:12e3,arrayLimit:30};default:return{maxTokens:4e3,arrayLimit:10}}}calculateArrayLimit(e){return e<8e3?5:e<5e4?20:e<1e5?50:100}addNote(e){this.notes.push(e)}clearNotes(){this.notes=[]}getNotes(){return[...this.notes]}async processLargeFields(e,t){const r={data:JSON.parse(JSON.stringify(e)),notes:[]};if(this.modelCapability===ModelCapability.UNLIMITED)return r;const n=this.getLargeFieldProcessors&&t?this.getLargeFieldProcessors(t):{},o=await this.getModelCapabilityLimits();for(const[i,s]of Object.entries(n)){const e=this.getNestedValue(r.data,i);if("string"==typeof e&&s.maxLength&&e.length>s.maxLength){const t=e.substring(0,s.maxLength);this.setNestedValue(r.data,i,t);const n=s.truncateMessage?s.truncateMessage:"Large data field was shortened to fit your model's capacity";this.addNote(`${n}. Original size: ${e.length} characters, shown: ${s.maxLength} characters.`)}}return r.data=this.processDataStructure(r.data,o,r.notes),r}processDataStructure(e,t,r){if(Array.isArray(e)){if(e.length>t.arrayLimit){const n=e.slice(0,t.arrayLimit);return this.addNote(`List was shortened to fit your model's capacity. Showing ${t.arrayLimit} of ${e.length} items.`),n.map(e=>this.processDataStructure(e,t,r))}return e.map(e=>this.processDataStructure(e,t,r))}if(e&&"object"==typeof e&&!Array.isArray(e)){const n={};for(const[o,i]of Object.entries(e))n[o]=this.processDataStructure(i,t,r);return n}return e}getNestedValue(e,t){return t.split(".").reduce((e,t)=>{if(!e||"object"!=typeof e)return;const r=e;if(t.includes("[")&&t.includes("]")){const[e,n]=t.split("["),o=parseInt(n.replace("]","")),i=r[e];return Array.isArray(i)?i[o]:void 0}return r[t]},e)}setNestedValue(e,t,r){if(!e||"object"!=typeof e)return;const n=t.split("."),o=n.pop(),i=n.reduce((e,t)=>{if(!e||"object"!=typeof e)return e;const r=e;if(t.includes("[")&&t.includes("]")){const[e,n]=t.split("["),o=parseInt(n.replace("]","")),i=r[e];return Array.isArray(i)?i[o]:void 0}return r[t]},e);if(!i||"object"!=typeof i)return;const s=i;if(o.includes("[")&&o.includes("]")){const[e,t]=o.split("["),n=parseInt(t.replace("]","")),i=s[e];Array.isArray(i)&&(i[n]=r)}else s[o]=r}}const GetOutstandingAirdropsZodSchema=objectType({accountId:stringType().describe('The account ID that sent the airdrops (e.g., "0.0.123")'),limit:numberType().optional().describe("Maximum number of airdrops to return"),order:enumType(["asc","desc"]).optional().describe("Order of results"),receiverId:stringType().optional().describe("Filter by receiver account ID"),serialNumber:stringType().optional().describe("Filter by NFT serial number"),tokenId:stringType().optional().describe("Filter by token ID")});class HederaGetOutstandingAirdropsTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-outstanding-airdrops",this.description="Retrieves outstanding token airdrops that have been sent by an account but not yet claimed.",this.specificInputSchema=GetOutstandingAirdropsZodSchema,this.namespace="account"}async executeQuery(e){this.logger.info(`Getting outstanding airdrops for account: ${e.accountId}`);const t=await this.hederaKit.query().getOutstandingTokenAirdrops(e);return null===t?{success:!1,error:`Could not retrieve outstanding airdrops for account ${e.accountId}`}:{success:!0,accountId:e.accountId,airdrops:t,count:t.length}}}const GetPendingAirdropsZodSchema=objectType({accountId:stringType().describe('The account ID that received the airdrops (e.g., "0.0.123")'),limit:numberType().optional().describe("Maximum number of airdrops to return"),order:enumType(["asc","desc"]).optional().describe("Order of results"),senderId:stringType().optional().describe("Filter by sender account ID"),serialNumber:stringType().optional().describe("Filter by NFT serial number"),tokenId:stringType().optional().describe("Filter by token ID")});class HederaGetPendingAirdropsTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-pending-airdrops",this.description="Retrieves pending token airdrops that have been received by an account but not yet claimed.",this.specificInputSchema=GetPendingAirdropsZodSchema,this.namespace="account"}async executeQuery(e){this.logger.info(`Getting pending airdrops for account: ${e.accountId}`);const t=await this.hederaKit.query().getPendingTokenAirdrops(e);return t?{success:!0,accountId:e.accountId,airdrops:t,count:t.length}:{success:!1,error:`Could not retrieve pending airdrops for account ${e.accountId}`}}}const GetAccountBalanceZodSchema=objectType({accountId:stringType().describe('The account ID to get balance for (e.g., "0.0.12345")')});class HederaGetAccountBalanceTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-account-balance",this.description="Retrieves the HBAR balance for a Hedera account. Returns the balance in HBAR (not tinybars).",this.specificInputSchema=GetAccountBalanceZodSchema,this.namespace="account"}async executeQuery(e){this.logger.info(`Getting balance for account ID: ${e.accountId}`);const t=await this.hederaKit.query().getAccountBalance(e.accountId);return null===t?{success:!1,error:`Could not retrieve balance for account ${e.accountId}`}:{success:!0,accountId:e.accountId,balance:t,unit:"HBAR"}}}const GetAccountInfoZodSchema=objectType({accountId:stringType().describe('The account ID to get information for (e.g., "0.0.12345")')});class HederaGetAccountInfoTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-account-info",this.description="Retrieves comprehensive information about a Hedera account including balance, key, memo, and other metadata.",this.specificInputSchema=GetAccountInfoZodSchema,this.namespace="account"}async executeQuery(e){this.logger.info(`Getting account info for account ID: ${e.accountId}`);const t=await this.hederaKit.query().getAccountInfo(e.accountId);return t?{success:!0,accountInfo:t}:{success:!1,error:`Account ${e.accountId} not found`}}}const GetAccountNftsZodSchema=objectType({accountId:stringType().describe('The account ID to get NFTs for (e.g., "0.0.12345")'),tokenId:stringType().optional().describe('Optional token ID to filter NFTs by (e.g., "0.0.67890")'),limit:numberType().int().positive().optional().default(100).describe("Maximum number of NFTs to return (default: 100)")});class HederaGetAccountNftsTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-account-nfts",this.description="Retrieves all NFTs owned by a Hedera account. Optionally filter by token ID.",this.specificInputSchema=GetAccountNftsZodSchema,this.namespace="account"}async executeQuery(e){this.logger.info(`Getting NFTs for account ID: ${e.accountId}`);const t=await this.hederaKit.query().getAccountNfts(e.accountId,e.tokenId,e.limit);return t?{success:!0,accountId:e.accountId,tokenId:e.tokenId,nftCount:t.length,nfts:t}:{success:!1,error:`Could not retrieve NFTs for account ${e.accountId}`}}}const GetAccountPublicKeyZodSchema=objectType({accountId:stringType().describe('The account ID to get the public key for (e.g., "0.0.12345")')});class HederaGetAccountPublicKeyTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-account-public-key",this.description="Retrieves the public key for a Hedera account. Returns the public key in string format.",this.specificInputSchema=GetAccountPublicKeyZodSchema,this.namespace="account"}async executeQuery(e){this.logger.info(`Getting public key for account ID: ${e.accountId}`);const t=await this.hederaKit.query().getPublicKey(e.accountId);return t?{success:!0,accountId:e.accountId,publicKey:t.toString(),publicKeyDer:t.toStringDer(),publicKeyRaw:t.toStringRaw()}:{success:!1,error:`Could not retrieve public key for account ${e.accountId}`}}}const GetAccountTokensZodSchema=objectType({accountId:stringType().describe('The account ID to get token balances for (e.g., "0.0.12345")'),limit:numberType().int().positive().optional().default(100).describe("Maximum number of tokens to return (default: 100)")});class HederaGetAccountTokensTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-account-tokens",this.description="Retrieves all token balances for a Hedera account. Returns fungible and non-fungible token associations.",this.specificInputSchema=GetAccountTokensZodSchema,this.namespace="account"}async executeQuery(e){this.logger.info(`Getting tokens for account ID: ${e.accountId}`);const t=await this.hederaKit.query().getAccountTokens(e.accountId,e.limit);return t?{success:!0,accountId:e.accountId,tokenCount:t.length,tokens:t}:{success:!1,error:`Could not retrieve tokens for account ${e.accountId}`}}}const signAndExecuteScheduledTransactionSchema=objectType({scheduleId:stringType().describe('The ID of the scheduled transaction (e.g., "0.0.SCHEDID").'),memo:stringType().optional().describe("Optional memo for the ScheduleSign transaction itself.")});class SignAndExecuteScheduledTransactionTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-sign-and-execute-scheduled-transaction",this.description="Prepares a ScheduleSignTransaction to add a signature to an existing scheduled transaction. Depending on agent configuration, this will either return transaction bytes (for the user to sign and pay) or be executed directly by the agent (agent signs and pays).",this.specificInputSchema=signAndExecuteScheduledTransactionSchema,this.namespace="account",this.neverScheduleThisTool=!0}getServiceBuilder(){return this.hederaKit.accounts()}async callBuilderMethod(e,t){const r=e,n={scheduleId:t.scheduleId};t.memo&&""!==t.memo.trim()&&(n.memo=t.memo),await r.prepareSignScheduledTransaction(n)}}const CustomFeeObjectSchema=objectType({feeCollectorAccountId:stringType().describe("The account ID to receive the custom fee."),denominatingTokenId:stringType().optional().describe("The token ID for fee denomination (if not HBAR)."),amount:unionType([numberType(),stringType()]).describe("The fee amount (smallest unit for tokens, or tinybars for HBAR).")}),CreateTopicZodSchemaCore=objectType({memo:stringType().optional().describe("Optional. Memo for the topic."),adminKey:stringType().optional().describe("Optional. Admin key for the topic (e.g., serialized public key string, or private key string for derivation by builder)."),submitKey:stringType().optional().describe("Optional. Submit key for the topic (e.g., serialized public key string, or private key string for derivation by builder)."),autoRenewPeriod:numberType().int().positive().optional().describe("Optional. Auto-renewal period in seconds (e.g., 7776000 for 90 days)."),autoRenewAccountId:stringType().optional().describe('Optional. Account ID for auto-renewal payments (e.g., "0.0.xxxx").'),feeScheduleKey:stringType().optional().describe("Optional. Fee schedule key for the topic (e.g., serialized public key string, or private key string for derivation by builder)."),customFees:arrayType(CustomFeeObjectSchema).optional().describe("Optional. Array of custom fee objects to be applied to the topic."),exemptAccountIds:arrayType(stringType()).optional().describe("Optional. Account IDs exempt from custom fees.")});class HederaCreateTopicTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hcs-create-topic",this.description="Creates a new Hedera Consensus Service (HCS) topic. Provide parameters as needed. The builder handles defaults and key parsing.",this.specificInputSchema=CreateTopicZodSchemaCore,this.namespace="hcs",this.neverScheduleThisTool=!0}getServiceBuilder(){return this.hederaKit.hcs()}async callBuilderMethod(e,t){await e.createTopic(t)}}const SubmitMessageZodSchemaCore=objectType({topicId:stringType().describe('The ID of the topic (e.g., "0.0.xxxx").'),message:stringType().describe("The message content. For binary data, provide as a base64 encoded string; the builder handles decoding."),maxChunks:numberType().int().positive().optional().describe("Optional. Maximum number of chunks for messages exceeding single transaction limits. Builder handles chunking."),chunkSize:numberType().int().positive().optional().describe("Optional. Size of each chunk in bytes if chunking is performed. Builder applies default if needed."),submitKey:stringType().optional().describe("Optional. Submit key if required by the topic and different from the operator (e.g., serialized public key string, or private key string for derivation by builder).")});class HederaSubmitMessageTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hcs-submit-message",this.description="Submits a message to a Hedera Consensus Service (HCS) topic. The builder handles chunking and base64 decoding for binary messages.",this.specificInputSchema=SubmitMessageZodSchemaCore,this.namespace="hcs"}getServiceBuilder(){return this.hederaKit.hcs()}async callBuilderMethod(e,t){await e.submitMessageToTopic(t)}}const DeleteTopicZodSchemaCore=objectType({topicId:stringType().describe('The ID of the topic to be deleted (e.g., "0.0.xxxx").')});class HederaDeleteTopicTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hcs-delete-topic",this.description="Deletes an HCS topic. Requires topicId.",this.specificInputSchema=DeleteTopicZodSchemaCore,this.namespace="hcs"}getServiceBuilder(){return this.hederaKit.hcs()}async callBuilderMethod(e,t){await e.deleteTopic(t)}}const UpdateTopicZodSchemaCore=objectType({topicId:stringType().describe('The ID of the topic to update (e.g., "0.0.xxxx").'),memo:stringType().nullable().optional().describe("Optional. New memo for the topic. Pass null to clear."),adminKey:stringType().nullable().optional().describe("Optional. New admin key (serialized string). Pass null to clear."),submitKey:stringType().nullable().optional().describe("Optional. New submit key (serialized string). Pass null to clear."),autoRenewPeriod:numberType().int().positive().optional().describe("Optional. New auto-renewal period in seconds."),autoRenewAccountId:stringType().nullable().optional().describe("Optional. New auto-renew account ID. Pass null to clear."),feeScheduleKey:stringType().nullable().optional().describe("Optional. New fee schedule key (serialized string). Pass null to clear."),exemptAccountIds:arrayType(stringType()).optional().describe("Optional. New list of exempt account IDs. An empty array clears all exemptions.")});class HederaUpdateTopicTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hcs-update-topic",this.description="Updates an HCS topic. Requires topicId. Other fields are optional. Null can be used to clear certain fields.",this.specificInputSchema=UpdateTopicZodSchemaCore,this.namespace="hcs"}getServiceBuilder(){return this.hederaKit.hcs()}async callBuilderMethod(e,t){await e.updateTopic(t)}}const GetTopicMessagesByFilterZodSchema=objectType({topicId:stringType().describe('The topic ID to get messages for (e.g., "0.0.12345")'),sequenceNumber:stringType().optional().describe('Filter by sequence number (e.g., "gt:10", "lte:20")'),startTime:stringType().optional().describe('Filter by start consensus timestamp (e.g., "1629400000.000000000")'),endTime:stringType().optional().describe('Filter by end consensus timestamp (e.g., "1629500000.000000000")'),limit:numberType().int().positive().optional().describe("Maximum number of messages to return"),order:enumType(["asc","desc"]).optional().describe("Order of messages (ascending or descending)")});class HederaGetTopicMessages extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-topic-messages-by-filter",this.description="Retrieves filtered messages from a Hedera Consensus Service topic with optional filters for sequence number, time range, limit, and order.",this.specificInputSchema=GetTopicMessagesByFilterZodSchema,this.namespace="hcs"}async executeQuery(e){this.logger.info(`Getting filtered messages for topic ID: ${e.topicId}`);const t={};e.sequenceNumber&&(t.sequenceNumber=e.sequenceNumber),e.startTime&&(t.startTime=e.startTime),e.endTime&&(t.endTime=e.endTime),e.limit&&(t.limit=e.limit),e.order&&(t.order=e.order);const r=await this.hederaKit.query().getTopicMessagesByFilter(e.topicId,t);return r?{success:!0,topicId:e.topicId,messageCount:r.length,filters:t,messages:r}:{success:!1,error:`Could not retrieve messages for topic ${e.topicId}`}}}const GetTopicInfoZodSchema=objectType({topicId:stringType().describe('The topic ID to get information for (e.g., "0.0.12345")')});class HederaGetTopicInfoTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-topic-info",this.description="Retrieves information about a Hedera Consensus Service topic including admin key, submit key, memo, and other metadata.",this.specificInputSchema=GetTopicInfoZodSchema,this.namespace="hcs"}async executeQuery(e){this.logger.info(`Getting topic info for topic ID: ${e.topicId}`);const t=await this.hederaKit.query().getTopicInfo(e.topicId);return t?{success:!0,topicInfo:t}:{success:!1,error:`Topic ${e.topicId} not found`}}}const GetTopicFeesZodSchema=objectType({topicId:stringType().describe('The topic ID to get custom fees for (e.g., "0.0.12345")')});class HederaGetTopicFeesTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-topic-fees",this.description="Retrieves custom fees associated with a Hedera Consensus Service topic.",this.specificInputSchema=GetTopicFeesZodSchema,this.namespace="hcs"}async executeQuery(e){this.logger.info(`Getting custom fees for topic ID: ${e.topicId}`);const t=await this.hederaKit.query().getTopicFees(e.topicId);return t?{success:!0,topicId:e.topicId,customFees:t}:{success:!0,topicId:e.topicId,customFees:null,message:"No custom fees found for this topic"}}}const AirdropRecipientSchema=objectType({accountId:stringType().describe('Recipient account ID (e.g., "0.0.xxxx").'),amount:unionType([numberType(),stringType()]).describe("Amount in smallest unit. Builder handles Long conversion.")}),AirdropTokenZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the fungible token to airdrop (e.g., "0.0.yyyy").'),recipients:arrayType(AirdropRecipientSchema).min(1).describe("Array of recipient objects, each with accountId and amount."),memo:stringType().optional().describe("Optional. Memo for the transaction.")});class HederaAirdropTokenTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-airdrop-token",this.description="Airdrops fungible tokens to multiple recipients. Builder handles parsing and validation.",this.specificInputSchema=AirdropTokenZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.airdropToken(t)}}const AssociateTokensZodSchemaCore=objectType({accountId:stringType().describe('The account ID to associate tokens with (e.g., "0.0.xxxx").'),tokenIds:arrayType(stringType().describe('A token ID (e.g., "0.0.yyyy").')).min(1).describe("An array of one or more token IDs to associate.")});class HederaAssociateTokensTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-associate-tokens",this.description="Associates one or more Hedera tokens with an account.",this.specificInputSchema=AssociateTokensZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.associateTokens(t)}}const BurnFTZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the fungible token (e.g., "0.0.xxxx").'),amount:unionType([numberType(),stringType()]).describe("Amount to burn (smallest unit). Number or string for large values. Builder handles conversion.")});class HederaBurnFungibleTokenTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-burn-fungible-token",this.description="Burns fungible tokens. Requires tokenId and amount.",this.specificInputSchema=BurnFTZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.burnFungibleToken(t)}}const BurnNFTZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the NFT collection (e.g., "0.0.xxxx").'),serials:arrayType(unionType([numberType().int().positive(),stringType()])).min(1).describe("Array of serial numbers to burn. Numbers or strings for large serials. Builder handles conversion.")});class HederaBurnNftTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-burn-nft",this.description="Burns Non-Fungible Tokens (NFTs). Requires token ID and an array of serial numbers.",this.specificInputSchema=BurnNFTZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.burnNonFungibleToken(t)}}const ClaimAirdropZodSchemaCore=objectType({pendingAirdrops:arrayType(objectType({senderAccountId:stringType().describe("The account ID of the sender of the airdrop."),tokenId:stringType().describe("The token ID of the airdropped token."),serialNumber:unionType([numberType(),stringType()]).describe("The serial number for an NFT, or a string/number convertible to Long(0) for fungible token claims (representing the whole pending amount for that FT from that sender).")})).min(1).max(10).describe("An array of pending airdrops to claim. Each object must have senderAccountId, tokenId, and serialNumber. Max 10 entries.")});class HederaClaimAirdropTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-claim-airdrop",this.description="Claims pending airdropped tokens (fungible or NFT serials). Requires an array of airdrop objects, each specifying senderAccountId, tokenId, and serialNumber. Use metaOptions for execution control.",this.specificInputSchema=ClaimAirdropZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){const r={pendingAirdropIds:t.pendingAirdrops.map((e,t)=>{const r=t+1;let n;if("string"==typeof e.serialNumber)try{n=Long.fromString(e.serialNumber)}catch(o){const t=o;throw new Error(`Pending airdrop item #${r} serialNumber string ('${e.serialNumber}') is not a valid Long: ${t.message}`)}else n=Long.fromNumber(e.serialNumber);try{const t=f$2.fromString(e.senderAccountId),r=u$b.fromString(e.tokenId);return new t$h({senderId:t,tokenId:r,nftId:e$j.fromString(n.toString())})}catch(o){const t=o;throw new Error(`Error constructing PendingAirdropId for item #${r} (sender: ${e.senderAccountId}, token: ${e.tokenId}, serial: ${e.serialNumber}): ${t.message}`)}})};e.claimAirdrop(r)}}const SERIALIZED_KEY_DESCRIPTION="serialized string). Builder handles parsing.",FEE_COLLECTOR_DESCRIPTION$1="Fee collector's account ID. Defaults to user's account if in user-centric context and not specified.";function parseCustomFeesJson(e,t){let r;try{if(r=JSON.parse(e),!Array.isArray(r))throw new Error("customFeesJson did not parse to an array.")}catch(n){const e=n instanceof Error?n.message:String(n);throw t.error("Invalid JSON string for customFeesJson:",e),new Error(`Invalid JSON string for customFeesJson: ${e}`)}return r.map((e,t)=>{const r=e.feeCollectorAccountId;if(!r||"string"!=typeof r)throw new Error(`Fee #${t+1}: feeCollectorAccountId is required and must be a string.`);const n=f$2.fromString(r);let o;switch(e.feeType){case"FIXED_FEE":const r=(new l$a).setFeeCollectorAccountId(n);if(e.denominatingTokenId&&r.setDenominatingTokenId(u$b.fromString(e.denominatingTokenId)),void 0===e.amount||null===e.amount)throw new Error(`Fee #${t+1} (FIXED_FEE): amount is required.`);r.setAmount("string"==typeof e.amount?Long.fromString(e.amount):Long.fromNumber(e.amount)),o=r;break;case"FRACTIONAL_FEE":if(void 0===e.numerator||void 0===e.denominator)throw new Error(`Fee #${t+1} (FRACTIONAL_FEE): numerator and denominator are required.`);const i=(new r$9).setFeeCollectorAccountId(n).setNumerator(Long.fromValue(e.numerator)).setDenominator(Long.fromValue(e.denominator));e.minimumAmount&&i.setMin("string"==typeof e.minimumAmount?Long.fromString(e.minimumAmount):Long.fromNumber(e.minimumAmount)),e.maximumAmount&&i.setMax("string"==typeof e.maximumAmount?Long.fromString(e.maximumAmount):Long.fromNumber(e.maximumAmount)),"EXCLUSIVE"===e.assessmentMethod||!0===e.netOfTransfers?i.setAssessmentMethod(e$a.Exclusive):i.setAssessmentMethod(e$a.Inclusive),o=i;break;case"ROYALTY_FEE":if(void 0===e.numerator||void 0===e.denominator)throw new Error(`Fee #${t+1} (ROYALTY_FEE): numerator and denominator are required.`);const s=(new l$3).setFeeCollectorAccountId(n).setNumerator(Long.fromValue(e.numerator)).setDenominator(Long.fromValue(e.denominator));if(e.fallbackFee){if("object"!=typeof e.fallbackFee||null===e.fallbackFee)throw new Error(`Fee #${t+1} (ROYALTY_FEE): fallbackFee must be an object if provided.`);const r=(new l$a).setFeeCollectorAccountId(n);if(e.fallbackFee.denominatingTokenId&&r.setDenominatingTokenId(u$b.fromString(e.fallbackFee.denominatingTokenId)),void 0===e.fallbackFee.amount||null===e.fallbackFee.amount)throw new Error(`Fee #${t+1} (ROYALTY_FEE): fallbackFee.amount is required.`);r.setAmount("string"==typeof e.fallbackFee.amount?Long.fromString(e.fallbackFee.amount):Long.fromNumber(e.fallbackFee.amount)),s.setFallbackFee(r)}o=s;break;default:throw new Error(`Fee #${t+1}: Unknown custom fee type: ${e.feeType}. Supported types are FIXED_FEE, FRACTIONAL_FEE, ROYALTY_FEE.`)}return e.allCollectorsAreExempt&&"boolean"==typeof e.allCollectorsAreExempt&&o.setAllCollectorsAreExempt(e.allCollectorsAreExempt),o})}const FixedFeeInputSchema$2=objectType({type:enumType(["FIXED","FIXED_FEE"]),feeCollectorAccountId:stringType().optional().describe(FEE_COLLECTOR_DESCRIPTION$1),denominatingTokenId:stringType().optional().describe("Denominating token ID for the fee (if not HBAR)."),amount:unionType([numberType(),stringType()]).describe("Fee amount (smallest unit for tokens, or tinybars for HBAR).")}),FractionalFeeInputSchema$2=objectType({type:enumType(["FRACTIONAL","FRACTIONAL_FEE"]),feeCollectorAccountId:stringType().optional().describe(FEE_COLLECTOR_DESCRIPTION$1),numerator:numberType().int().describe("Numerator of the fractional fee."),denominator:numberType().int().positive().describe("Denominator of the fractional fee."),minAmount:unionType([numberType(),stringType()]).optional().describe("Minimum fractional fee amount."),maxAmount:unionType([numberType(),stringType()]).optional().describe("Maximum fractional fee amount (0 for no max)."),assessmentMethodInclusive:booleanType().optional().describe("Fee is assessed on net amount (false) or gross (true).")}),RoyaltyFeeInputSchema$2=objectType({type:enumType(["ROYALTY","ROYALTY_FEE"]),feeCollectorAccountId:stringType().optional().describe(FEE_COLLECTOR_DESCRIPTION$1),numerator:numberType().int().describe("Numerator of the royalty fee."),denominator:numberType().int().positive().describe("Denominator of the royalty fee."),fallbackFee:FixedFeeInputSchema$2.omit({type:!0}).optional().describe("Fallback fixed fee if royalty is not applicable.")}),CustomFeeInputUnionSchema$2=discriminatedUnionType("type",[FixedFeeInputSchema$2,FractionalFeeInputSchema$2,RoyaltyFeeInputSchema$2]),FTCreateZodSchemaCore=objectType({tokenName:stringType().describe("The publicly visible name of the token."),tokenSymbol:stringType().optional().describe("The publicly visible symbol of the token."),treasuryAccountId:stringType().optional().describe('Treasury account ID (e.g., "0.0.xxxx").'),initialSupply:unionType([numberType(),stringType()]).describe("Initial supply in the smallest denomination."),decimals:numberType().int().optional().default(0).describe("Number of decimal places for the token. Defaults to 0 if not specified."),adminKey:stringType().optional().describe(`Optional. Admin key (${SERIALIZED_KEY_DESCRIPTION}. Required for token to be mutable.`),kycKey:stringType().optional().describe(`Optional. KYC key (${SERIALIZED_KEY_DESCRIPTION}`),freezeKey:stringType().optional().describe(`Optional. Freeze key (${SERIALIZED_KEY_DESCRIPTION}`),wipeKey:stringType().optional().describe(`Optional. Wipe key (${SERIALIZED_KEY_DESCRIPTION}`),supplyKey:stringType().optional().describe(`Optional. Supply key (${SERIALIZED_KEY_DESCRIPTION}`),feeScheduleKey:stringType().optional().describe(`Optional. Fee schedule key (${SERIALIZED_KEY_DESCRIPTION}`),pauseKey:stringType().optional().describe(`Optional. Pause key (${SERIALIZED_KEY_DESCRIPTION}`),autoRenewAccountId:stringType().optional().describe('Optional. Auto-renew account ID (e.g., "0.0.xxxx").'),autoRenewPeriod:numberType().int().positive().optional().describe("Optional. Auto-renewal period in seconds."),memo:stringType().optional().describe("Optional. Memo for the token."),freezeDefault:booleanType().optional().describe("Optional. Default freeze status for accounts."),customFees:arrayType(CustomFeeInputUnionSchema$2).optional().describe("Optional. Array of custom fee objects for the token."),supplyType:enumType([e$1.Finite.toString(),e$1.Infinite.toString()]).optional().default(e$1.Finite.toString()).describe("Supply type: FINITE or INFINITE. Defaults to FINITE if not specified."),maxSupply:unionType([numberType(),stringType()]).optional().default(1e15).describe("Max supply if supplyType is FINITE. Builder validates against initialSupply.")});class HederaCreateFungibleTokenTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-create-fungible-token",this.description="Creates a new Hedera Fungible Token (FT). Builder handles key parsing, fee construction, and supply validation.",this.specificInputSchema=FTCreateZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.createFungibleToken(t)}getNoteForKey(e,t,r){if("decimals"===e)return`The number of decimal places for your token was automatically set to '${r}'.`;if("supplyType"===e)return`Your token's supply type was set to '${r}' by default.`;if("maxSupply"===e)try{return`A maximum supply of '${BigInt(String(r)).toLocaleString()}' for the token was set by default.`}catch{return`The maximum supply for the token was set to '${r}' by default.`}return"freezeDefault"===e?`By default, accounts holding this token will ${r?"be frozen":"not be frozen"}.`:void 0}}const FixedFeeInputSchema$1=objectType({type:enumType(["FIXED","FIXED_FEE"]),feeCollectorAccountId:stringType().optional().describe(FEE_COLLECTOR_DESCRIPTION$1),denominatingTokenId:stringType().optional().describe("Denominating token ID for the fee (if not HBAR)."),amount:unionType([numberType(),stringType()]).describe("Fee amount (smallest unit for tokens, or tinybars for HBAR).")}),FractionalFeeInputSchema$1=objectType({type:enumType(["FRACTIONAL","FRACTIONAL_FEE"]),feeCollectorAccountId:stringType().optional().describe(FEE_COLLECTOR_DESCRIPTION$1),numerator:numberType().int().describe("Numerator of the fractional fee."),denominator:numberType().int().positive().describe("Denominator of the fractional fee."),minAmount:unionType([numberType(),stringType()]).optional().describe("Minimum fractional fee amount."),maxAmount:unionType([numberType(),stringType()]).optional().describe("Maximum fractional fee amount (0 for no max)."),assessmentMethodInclusive:booleanType().optional().describe("Fee is assessed on net amount (false) or gross (true).")}),RoyaltyFeeInputSchema$1=objectType({type:enumType(["ROYALTY","ROYALTY_FEE"]),feeCollectorAccountId:stringType().optional().describe(FEE_COLLECTOR_DESCRIPTION$1),numerator:numberType().int().describe("Numerator of the royalty fee."),denominator:numberType().int().positive().describe("Denominator of the royalty fee."),fallbackFee:FixedFeeInputSchema$1.omit({type:!0}).optional().describe("Fallback fixed fee if royalty is not applicable.")}),CustomFeeInputUnionSchema$1=discriminatedUnionType("type",[FixedFeeInputSchema$1,FractionalFeeInputSchema$1,RoyaltyFeeInputSchema$1]),NFTCreateZodSchemaCore=objectType({tokenName:stringType().describe("The publicly visible name of the NFT collection."),tokenSymbol:stringType().optional().describe("The publicly visible symbol of the NFT collection."),treasuryAccountId:stringType().optional().describe('Treasury account ID (e.g., "0.0.xxxx").'),adminKey:stringType().optional().describe(`Optional. Admin key (${SERIALIZED_KEY_DESCRIPTION}`),kycKey:stringType().optional().describe(`Optional. KYC key (${SERIALIZED_KEY_DESCRIPTION}`),freezeKey:stringType().optional().describe(`Optional. Freeze key (${SERIALIZED_KEY_DESCRIPTION}`),wipeKey:stringType().optional().describe(`Optional. Wipe key (${SERIALIZED_KEY_DESCRIPTION}`),supplyKey:stringType().optional().describe(`Optional. Supply key (${SERIALIZED_KEY_DESCRIPTION}`),feeScheduleKey:stringType().optional().describe(`Optional. Fee schedule key (${SERIALIZED_KEY_DESCRIPTION}`),pauseKey:stringType().optional().describe(`Optional. Pause key (${SERIALIZED_KEY_DESCRIPTION}`),autoRenewAccountId:stringType().optional().describe('Optional. Auto-renew account ID (e.g., "0.0.xxxx").'),autoRenewPeriod:numberType().int().positive().optional().describe("Optional. Auto-renewal period in seconds."),memo:stringType().optional().describe("Optional. Memo for the NFT collection."),freezeDefault:booleanType().optional().describe("Optional. Default freeze status for accounts."),customFees:arrayType(CustomFeeInputUnionSchema$1).optional().describe("Optional. Array of custom fee objects for the token."),supplyType:enumType([e$1.Finite.toString(),e$1.Infinite.toString()]).optional().default(e$1.Finite.toString()).describe("Supply type: FINITE or INFINITE. NFTs typically use FINITE. Defaults to FINITE if not specified."),maxSupply:unionType([numberType(),stringType()]).optional().describe("Max supply if supplyType is FINITE. Builder handles validation.")});class HederaCreateNftTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-create-nft",this.description="Creates a new Hedera Non-Fungible Token (NFT) collection. Builder handles key parsing, fee construction, and supply validation.",this.specificInputSchema=NFTCreateZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.createNonFungibleToken(t)}getNoteForKey(e,t,r){if("supplyType"===e)return`Your NFT collection's supply type was set to '${r}' by default.`;if("maxSupply"===e&&void 0!==r)try{return`A maximum supply of '${BigInt(String(r)).toLocaleString()}' for the NFT collection was set (tool schema default).`}catch{return`The maximum supply for the NFT collection was set to '${r}' (tool schema default).`}}}const DeleteTokenZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the token to delete (e.g., "0.0.xxxx").')});class HederaDeleteTokenTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-delete-token",this.description="Deletes a token. Requires the tokenId. Use metaOptions for execution control.",this.specificInputSchema=DeleteTokenZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.deleteToken(t)}}const DissociateTokensZodSchemaCore=objectType({accountId:stringType().describe('The account ID to dissociate tokens from (e.g., "0.0.xxxx").'),tokenIds:arrayType(stringType().describe('A token ID (e.g., "0.0.yyyy").')).min(1).describe("An array of one or more token IDs to dissociate.")});class HederaDissociateTokensTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-dissociate-tokens",this.description="Dissociates one or more Hedera tokens from an account.",this.specificInputSchema=DissociateTokensZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.dissociateTokens(t)}}const FreezeTokenAccountZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the token (e.g., "0.0.xxxx").'),accountId:stringType().describe('The account ID to be frozen for the token (e.g., "0.0.yyyy").')});class HederaFreezeTokenAccountTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-freeze-token-account",this.description="Freezes an account for a specific token.",this.specificInputSchema=FreezeTokenAccountZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.freezeTokenAccount(t)}}const GetTokenInfoZodSchema=objectType({tokenId:stringType().describe('The token ID to get information for (e.g., "0.0.12345")')});class HederaGetTokenInfoTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-token-info",this.description="Retrieves comprehensive information about a Hedera token including name, symbol, supply, keys, and other metadata.",this.specificInputSchema=GetTokenInfoZodSchema,this.namespace="hts"}async executeQuery(e){this.logger.info(`Getting token info for token ID: ${e.tokenId}`);const t=await this.hederaKit.query().getTokenInfo(e.tokenId);return t?{success:!0,tokenInfo:t}:{success:!1,error:`Token ${e.tokenId} not found`}}}const GrantKycTokenZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the token (e.g., "0.0.xxxx").'),accountId:stringType().describe('The account ID to be granted KYC for the token (e.g., "0.0.yyyy").')});class HederaGrantKycTokenTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-grant-kyc-token",this.description="Grants KYC to an account for a specific token.",this.specificInputSchema=GrantKycTokenZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.grantKycToken(t)}}const MintFTZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the fungible token (e.g., "0.0.xxxx").'),amount:unionType([numberType(),stringType()]).describe("Amount to mint (smallest unit). Number or string for large values. Builder handles conversion.")});class HederaMintFungibleTokenTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-mint-fungible-token",this.description="Mints more fungible tokens. Requires tokenId and amount.",this.specificInputSchema=MintFTZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.mintFungibleToken(t)}}const MintNFTZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the NFT collection (e.g., "0.0.xxxx").'),metadata:arrayType(stringType()).describe("Array of metadata for each NFT. Strings are treated as UTF-8, or base64 for binary. Builder handles decoding & validation."),batchSize:numberType().int().positive().optional().describe("Optional. Max NFTs per transaction if chunking. Builder handles default/limits.")});class HederaMintNftTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-mint-nft",this.description="Mints new Non-Fungible Tokens (NFTs). Builder handles metadata decoding and batching.",this.specificInputSchema=MintNFTZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.mintNonFungibleToken(t)}}const PauseTokenZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the token to pause (e.g., "0.0.xxxx").')});class HederaPauseTokenTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-pause-token",this.description="Pauses a token. Requires the tokenId. Use metaOptions for execution control.",this.specificInputSchema=PauseTokenZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.pauseToken(t)}}const RejectTokensZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the token type to reject future associations with (e.g., "0.0.xxxx").'),memo:stringType().optional().describe("Optional. Memo for the transaction.")});class HederaRejectTokensTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-reject-tokens",this.description="Configures the operator to reject future auto-associations with a specific token type.",this.specificInputSchema=RejectTokensZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.rejectTokens(t)}}const RevokeKycTokenZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the token (e.g., "0.0.xxxx").'),accountId:stringType().describe('The account ID to have KYC revoked for the token (e.g., "0.0.yyyy").')});class HederaRevokeKycTokenTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-revoke-kyc-token",this.description="Revokes KYC from an account for a specific token.",this.specificInputSchema=RevokeKycTokenZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.revokeKycToken(t)}}const FEE_COLLECTOR_DESCRIPTION="Fee collector's account ID.",FixedFeeInputSchema=objectType({type:literalType("FIXED"),feeCollectorAccountId:stringType().describe(FEE_COLLECTOR_DESCRIPTION),denominatingTokenId:stringType().optional().describe("Denominating token ID for the fee (if not HBAR)."),amount:unionType([numberType(),stringType()]).describe("Fee amount (smallest unit for tokens, or tinybars for HBAR).")}),FractionalFeeInputSchema=objectType({type:literalType("FRACTIONAL"),feeCollectorAccountId:stringType().describe(FEE_COLLECTOR_DESCRIPTION),numerator:numberType().int().describe("Numerator of the fractional fee."),denominator:numberType().int().positive().describe("Denominator of the fractional fee."),assessmentMethodInclusive:booleanType().optional().describe("Fee is assessed on net amount (false) or gross (true).")}),RoyaltyFeeInputSchema=objectType({type:literalType("ROYALTY"),feeCollectorAccountId:stringType().describe(FEE_COLLECTOR_DESCRIPTION),numerator:numberType().int().describe("Numerator of the royalty fee."),denominator:numberType().int().positive().describe("Denominator of the royalty fee."),fallbackFee:FixedFeeInputSchema.omit({type:!0}).optional().describe("Fallback fixed fee if royalty is not applicable.")}),CustomFeeInputUnionSchema=discriminatedUnionType("type",[FixedFeeInputSchema,FractionalFeeInputSchema,RoyaltyFeeInputSchema]),TokenFeeScheduleUpdateZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the token whose fee schedule is to be updated (e.g., "0.0.xxxx").'),customFees:arrayType(CustomFeeInputUnionSchema).min(1).describe("An array of new custom fee objects. This will replace the existing fee schedule.")});class HederaTokenFeeScheduleUpdateTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-token-fee-schedule-update",this.description="Updates the fee schedule of a token. Requires tokenId and an array of custom fee objects.",this.specificInputSchema=TokenFeeScheduleUpdateZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.feeScheduleUpdate(t)}}const TransferNftZodSchemaCore=objectType({tokenId:stringType().describe('The token ID of the NFT (e.g., "0.0.xxxx").'),serial:unionType([numberType().int().positive(),stringType()]).describe("The serial number of the NFT."),senderAccountId:stringType().describe('The sender account ID (e.g., "0.0.xxxx").'),receiverAccountId:stringType().describe('The receiver account ID (e.g., "0.0.yyyy").'),isApproved:booleanType().optional().describe("Optional. True if sender is an approved operator for the NFT."),memo:stringType().optional().describe("Optional. Memo for the transaction.")});class HederaTransferNftTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-transfer-nft",this.description="Transfers a single Non-Fungible Token (NFT).",this.specificInputSchema=TransferNftZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.transferNft(t)}}const FungibleTokenTransferInputSchema=objectType({type:literalType("fungible"),tokenId:stringType().describe('Token ID (e.g., "0.0.xxxx").'),accountId:stringType().describe('Account ID for the transfer (e.g., "0.0.yyyy").'),amount:unionType([numberType(),stringType()]).describe("Amount in smallest unit. Positive for credit, negative for debit. Builder handles conversion.")}),NftTransferInputSchema=objectType({type:literalType("nft"),tokenId:stringType().describe('Token ID of the NFT (e.g., "0.0.xxxx").'),serial:unionType([numberType().int().positive(),stringType()]).describe("Serial number of the NFT."),senderAccountId:stringType().describe('Sender account ID (e.g., "0.0.ssss").'),receiverAccountId:stringType().describe('Receiver account ID (e.g., "0.0.rrrr").'),isApproved:booleanType().optional().describe("Optional. True if sender is an approved operator.")}),HbarTransferInputSchema=objectType({accountId:stringType().describe('Account ID for the HBAR transfer (e.g., "0.0.zzzz").'),amount:unionType([numberType(),stringType()]).describe("HBAR amount in tinybars. Positive for credit, negative for debit. Builder handles Hbar unit conversion.")}),TransferTokensZodObjectSchema=objectType({tokenTransfers:arrayType(discriminatedUnionType("type",[FungibleTokenTransferInputSchema,NftTransferInputSchema])).min(1).describe("Array of fungible token and/or NFT transfers."),hbarTransfers:arrayType(HbarTransferInputSchema).optional().describe("Optional. Array of HBAR transfers. Sum of amounts must be zero."),memo:stringType().optional().describe("Optional. Memo for the entire transaction.")});class HederaTransferTokensTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-transfer-tokens",this.description="Transfers multiple fungible tokens, NFTs, and/or HBAR in a single transaction. Builder handles parsing and validation.",this.specificInputSchema=TransferTokensZodObjectSchema,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.transferTokens(t)}}const UnfreezeTokenAccountZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the token (e.g., "0.0.xxxx").'),accountId:stringType().describe('The account ID to be unfrozen for the token (e.g., "0.0.yyyy").')});class HederaUnfreezeTokenAccountTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-unfreeze-token-account",this.description="Unfreezes an account for a specific token.",this.specificInputSchema=UnfreezeTokenAccountZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.unfreezeTokenAccount(t)}}const UnpauseTokenZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the token to unpause (e.g., "0.0.xxxx").')});class HederaUnpauseTokenTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-unpause-token",this.description="Unpauses a token. Requires the tokenId. Use metaOptions for execution control.",this.specificInputSchema=UnpauseTokenZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.unpauseToken(t)}}const UpdateTokenZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the token to update (e.g., "0.0.xxxx").'),tokenName:stringType().nullable().optional().describe("Optional. New token name. Pass null to clear."),tokenSymbol:stringType().nullable().optional().describe("Optional. New token symbol. Pass null to clear."),treasuryAccountId:stringType().optional().describe('Optional. New treasury account ID (e.g., "0.0.yyyy").'),adminKey:stringType().nullable().optional().describe("Optional. New admin key (serialized string). Pass null to clear."),kycKey:stringType().nullable().optional().describe("Optional. New KYC key (serialized string). Pass null to clear."),freezeKey:stringType().nullable().optional().describe("Optional. New freeze key (serialized string). Pass null to clear."),wipeKey:stringType().nullable().optional().describe("Optional. New wipe key (serialized string). Pass null to clear."),supplyKey:stringType().nullable().optional().describe("Optional. New supply key (serialized string). Pass null to clear."),feeScheduleKey:stringType().nullable().optional().describe("Optional. New fee schedule key (serialized string). Pass null to clear."),pauseKey:stringType().nullable().optional().describe("Optional. New pause key (serialized string). Pass null to clear."),autoRenewAccountId:stringType().nullable().optional().describe("Optional. New auto-renew account ID. Pass null to clear."),autoRenewPeriod:numberType().int().positive().optional().describe("Optional. New auto-renewal period in seconds."),memo:stringType().nullable().optional().describe("Optional. New token memo. Pass null to clear.")});class HederaUpdateTokenTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-update-token",this.description="Updates an existing Hedera token. Requires tokenId. Other fields are optional. Null can be used to clear certain fields.",this.specificInputSchema=UpdateTokenZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.updateToken(t)}}const ValidateNftOwnershipZodSchema=objectType({accountId:stringType().describe('The account ID to check ownership for (e.g., "0.0.12345")'),tokenId:stringType().describe('The NFT token ID (e.g., "0.0.67890")'),serialNumber:numberType().int().positive().describe("The serial number of the NFT")});class HederaValidateNftOwnershipTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-validate-nft-ownership",this.description="Validates whether a specific account owns a particular NFT by token ID and serial number.",this.specificInputSchema=ValidateNftOwnershipZodSchema,this.namespace="hts"}async executeQuery(e){this.logger.info(`Validating NFT ownership: account ${e.accountId}, token ${e.tokenId}, serial ${e.serialNumber}`);const t=await this.hederaKit.query().validateNftOwnership(e.accountId,e.tokenId,e.serialNumber),r=null!==t;return{success:!0,accountId:e.accountId,tokenId:e.tokenId,serialNumber:e.serialNumber,isOwned:r,nftDetail:r?t:null}}}const WipeTokenAccountZodSchemaCore=objectType({tokenId:stringType().describe('The ID of the token to wipe (e.g., "0.0.xxxx").'),accountId:stringType().describe('The account ID from which tokens will be wiped (e.g., "0.0.yyyy").'),amount:unionType([numberType(),stringType()]).optional().describe("For Fungible Tokens: amount to wipe (smallest unit). Builder handles conversion and validation."),serials:arrayType(unionType([numberType().int().positive(),stringType()])).optional().describe("For Non-Fungible Tokens: array of serial numbers to wipe. Builder handles conversion and validation.")});class HederaWipeTokenAccountTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-hts-wipe-token-account",this.description="Wipes tokens (fungible or non-fungible) from an account. Provide 'amount' for FTs or 'serials' for NFTs. Builder validates inputs.",this.specificInputSchema=WipeTokenAccountZodSchemaCore,this.namespace="hts"}getServiceBuilder(){return this.hederaKit.hts()}async callBuilderMethod(e,t){await e.wipeTokenAccount(t)}}const DeleteContractZodSchemaCore=objectType({contractId:stringType().describe('The ID of the contract to delete (e.g., "0.0.xxxx").'),transferAccountId:stringType().optional().describe("Optional. Account ID to transfer balance to. Builder validates if needed."),transferContractId:stringType().optional().describe("Optional. Contract ID to transfer balance to. Builder validates if needed.")});class HederaDeleteContractTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-scs-delete-contract",this.description="Deletes a smart contract. Optionally specify a transfer target for any remaining balance.",this.specificInputSchema=DeleteContractZodSchemaCore,this.namespace="scs"}getServiceBuilder(){return this.hederaKit.scs()}async callBuilderMethod(e,t){await e.deleteContract(t)}}const GetContractZodSchema=objectType({contractIdOrAddress:stringType().describe("The contract ID or EVM address"),timestamp:stringType().optional().describe("Optional timestamp for historical data"),includeBytecode:booleanType().optional().default(!1).describe("Whether to include full bytecode in response (may be very large)")});class HederaGetContractTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-contract",this.description="Retrieves a specific contract by ID or EVM address from the Hedera network. Use includeBytecode=true for full bytecode (may be large).",this.specificInputSchema=GetContractZodSchema,this.namespace="scs"}getLargeFieldProcessors(e){return e.includeBytecode?{}:{"contract.bytecode":{maxLength:200,truncateMessage:"[Use includeBytecode=true for full bytecode]"},"contract.runtime_bytecode":{maxLength:200,truncateMessage:"[Use includeBytecode=true for full runtime bytecode]"},"contract.creation_bytecode":{maxLength:200,truncateMessage:"[Use includeBytecode=true for full creation bytecode]"},bytecode:{maxLength:200,truncateMessage:"[Use includeBytecode=true for full bytecode]"},runtime_bytecode:{maxLength:200,truncateMessage:"[Use includeBytecode=true for full runtime bytecode]"},creation_bytecode:{maxLength:200,truncateMessage:"[Use includeBytecode=true for full creation bytecode]"}}}async executeQuery(e){this.logger.info(`Getting contract: ${e.contractIdOrAddress}`);const t=await this.hederaKit.query().getContract(e.contractIdOrAddress,e.timestamp);return null===t?{success:!1,error:`Contract ${e.contractIdOrAddress} not found`}:{success:!0,contract:t,summary:{contractId:t.contract_id,evmAddress:t.evm_address,created:t.created_timestamp,expiration:t.expiration_timestamp,deleted:t.deleted,memo:t.memo||"No memo",autoRenewPeriod:t.auto_renew_period,maxAutomaticTokenAssociations:t.max_automatic_token_associations,hasAdminKey:Boolean(t.admin_key),hasBytecode:Boolean(t.bytecode),hasRuntimeBytecode:Boolean(t.runtime_bytecode),bytecodeIncluded:e.includeBytecode}}}}const GetContractsZodSchema=objectType({contractId:stringType().optional().describe("Filter by specific contract ID"),limit:numberType().optional().describe("Maximum number of contracts to return"),order:enumType(["asc","desc"]).optional().describe("Order of results")});class HederaGetContractsTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-contracts",this.description="Retrieves contract entities from the Hedera network with optional filtering.",this.specificInputSchema=GetContractsZodSchema,this.namespace="scs"}async executeQuery(e){this.logger.info("Getting contracts from the network");const t=await this.hederaKit.query().getContracts(e);return null===t?{success:!1,error:"Could not retrieve contracts from the network"}:{success:!0,contracts:t,count:t.length}}}const UpdateContractZodSchemaCore=objectType({contractId:stringType().describe('The ID of the contract to update (e.g., "0.0.xxxx").'),adminKey:stringType().nullable().optional().describe("Optional. New admin key (serialized string). Pass null to clear."),autoRenewPeriod:numberType().int().positive().optional().describe("Optional. New auto-renewal period in seconds."),memo:stringType().nullable().optional().describe("Optional. New contract memo. Pass null or empty string to clear."),stakedAccountId:stringType().nullable().optional().describe('Optional. New account ID to stake to. Pass "0.0.0" or null to clear.'),stakedNodeId:numberType().int().nullable().optional().describe("Optional. New node ID to stake to. Pass -1 or null to clear. Builder handles Long conversion."),declineStakingReward:booleanType().optional().describe("Optional. If true, contract declines staking rewards."),maxAutomaticTokenAssociations:numberType().int().optional().describe("Optional. New max automatic token associations."),proxyAccountId:stringType().nullable().optional().describe('Optional. New proxy account ID. Pass "0.0.0" or null to clear.')});class HederaUpdateContractTool extends BaseHederaTransactionTool{constructor(e){super(e),this.name="hedera-scs-update-contract",this.description="Updates an existing Hedera smart contract. Builder handles parsing and clearing logic.",this.specificInputSchema=UpdateContractZodSchemaCore,this.namespace="scs"}getServiceBuilder(){return this.hederaKit.scs()}async callBuilderMethod(e,t){await e.updateContract(t)}}const GetHbarPriceZodSchema=objectType({date:stringType().optional().describe('Date to get HBAR price for in ISO format (e.g., "2023-12-01T00:00:00Z"). Defaults to current date.')});class HederaGetHbarPriceTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-hbar-price",this.description="Retrieves the HBAR price in USD for a specific date. Defaults to current date if no date provided.",this.specificInputSchema=GetHbarPriceZodSchema,this.namespace="network"}async executeQuery(e){const t=e.date?new Date(e.date):new Date;this.logger.info(`Getting HBAR price for date: ${t.toISOString()}`);const r=await this.hederaKit.query().getHbarPrice(t);return null===r?{success:!1,error:`Could not retrieve HBAR price for date ${t.toISOString()}`}:{success:!0,date:t.toISOString(),priceUsd:r,currency:"USD"}}}const GetNetworkInfoZodSchema=objectType({});class HederaGetNetworkInfoTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-network-info",this.description="Retrieves network information from the Hedera network.",this.specificInputSchema=GetNetworkInfoZodSchema,this.namespace="network"}async executeQuery(){this.logger.info("Getting network information");const e=await this.hederaKit.query().getNetworkInfo();return null===e?{success:!1,error:"Could not retrieve network information"}:{success:!0,networkInfo:e}}}const GetNetworkFeesZodSchema=objectType({timestamp:stringType().optional().describe("Optional timestamp for historical fees")});class HederaGetNetworkFeesTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-network-fees",this.description="Retrieves network fees from the Hedera network.",this.specificInputSchema=GetNetworkFeesZodSchema,this.namespace="network"}async executeQuery(e){this.logger.info("Getting network fees");const t=await this.hederaKit.query().getNetworkFees(e.timestamp);return null===t?{success:!1,error:"Could not retrieve network fees"}:{success:!0,networkFees:t}}}const GetBlocksZodSchema=objectType({blockNumber:stringType().optional().describe("Filter by block number"),timestamp:stringType().optional().describe("Filter by timestamp"),limit:numberType().optional().describe("Maximum number of blocks to return"),order:enumType(["asc","desc"]).optional().describe("Order of results")});class HederaGetBlocksTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-blocks",this.description="Retrieves blocks from the Hedera network with optional filtering.",this.specificInputSchema=GetBlocksZodSchema,this.namespace="network"}async executeQuery(e){this.logger.info("Getting blocks from the network");const t=await this.hederaKit.query().getBlocks(e);return null===t?{success:!1,error:"Could not retrieve blocks from the network"}:{success:!0,blocks:t,count:t.length}}}const GetTransactionZodSchema=objectType({transactionIdOrHash:stringType().describe('The transaction ID (e.g., "0.0.12345-1234567890-123456789") or hash to get details for')});class HederaGetTransactionTool extends BaseHederaQueryTool{constructor(e){super(e),this.name="hedera-get-transaction",this.description="Retrieves detailed information about a Hedera transaction by transaction ID or hash.",this.specificInputSchema=GetTransactionZodSchema,this.namespace="transaction"}async executeQuery(e){this.logger.info(`Getting transaction details for: ${e.transactionIdOrHash}`);const t=await this.hederaKit.query().getTransaction(e.transactionIdOrHash);return t?{success:!0,transactionIdOrHash:e.transactionIdOrHash,transaction:t}:{success:!1,error:`Transaction ${e.transactionIdOrHash} not found`}}}const createBaseMirrorNodeApiUrl=e=>`https://${"mainnet"===e?`${e}-public`:e}.mirrornode.hedera.com`;function convertStringToTimestamp(e){const t=new Date(e);if(isNaN(t.getTime()))throw new Error("Invalid date format");const r=t.getTime();return parseFloat((r/1e3).toFixed(6))}function fromDisplayToBaseUnit(e,t){return e*10**t}function fromBaseToDisplayUnit(e,t){const r=new BigNumber$2(t),n=new BigNumber$2(10).pow(r);return(BigNumber$2.isBigNumber(e)?e:new BigNumber$2(e)).dividedBy(n)}class BasePlugin{async initialize(e){this.context=e}async cleanup(){}}class PluginRegistry{constructor(e){this.plugins=new Map,this.context=e,this.logger=e.logger}async registerPlugin(e){if(this.plugins.has(e.id))throw new Error(`Plugin with ID ${e.id} is already registered`);await e.initialize(this.context),this.plugins.set(e.id,e),this.logger.info(`Plugin registered: ${e.name} (${e.id}) v${e.version}`)}getPlugin(e){return this.plugins.get(e)}getAllPlugins(){return Array.from(this.plugins.values())}getAllTools(){return this.getAllPlugins().flatMap(e=>e.getTools())}async unregisterPlugin(e){const t=this.plugins.get(e);if(!t)return!1;if(t.cleanup)try{await t.cleanup()}catch(n){this.logger.error(`Error during plugin cleanup: ${n}`)}const r=this.plugins.delete(e);return r&&this.logger.info(`Plugin unregistered: ${t.name} (${t.id})`),r}async unregisterAllPlugins(){const e=Array.from(this.plugins.keys());for(const t of e)await this.unregisterPlugin(t)}}class HederaHTSPlugin extends BasePlugin{constructor(){super(...arguments),this.id="hedera-hts",this.name="Hedera Token Service Plugin",this.description="Provides tools for interacting with the Hedera Token Service (HTS).",this.version="1.0.0",this.author="Auto-Generated",this.tools=[]}async initialize(e){await super.initialize(e);const t=e.config.hederaKit,r=e.logger;let n=ModelCapability.MEDIUM;e.config.modelCapability&&Object.values(ModelCapability).includes(e.config.modelCapability)&&(n=e.config.modelCapability);const o={hederaKit:t,logger:r},i={hederaKit:t,logger:r,modelCapability:n};this.tools=[new HederaAirdropTokenTool(o),new HederaAssociateTokensTool(o),new HederaClaimAirdropTool(o),new HederaCreateFungibleTokenTool(o),new HederaCreateNftTool(o),new HederaMintFungibleTokenTool(o),new HederaMintNftTool(o),new HederaRejectTokensTool(o),new HederaTransferTokensTool(o),new HederaDissociateTokensTool(o),new HederaUpdateTokenTool(o),new HederaDeleteTokenTool(o),new HederaPauseTokenTool(o),new HederaUnpauseTokenTool(o),new HederaFreezeTokenAccountTool(o),new HederaUnfreezeTokenAccountTool(o),new HederaGrantKycTokenTool(o),new HederaRevokeKycTokenTool(o),new HederaWipeTokenAccountTool(o),new HederaTokenFeeScheduleUpdateTool(o),new HederaTransferNftTool(o),new HederaBurnFungibleTokenTool(o),new HederaBurnNftTool(o),new HederaGetTokenInfoTool(i),new HederaValidateNftOwnershipTool(i)]}getTools(){return this.tools}}class HederaHCSPlugin extends BasePlugin{constructor(){super(...arguments),this.id="hedera-hcs",this.name="Hedera Consensus Service Plugin",this.description="Provides tools for interacting with the Hedera Consensus Service (HCS).",this.version="1.0.0",this.author="Auto-Generated",this.tools=[]}async initialize(e){await super.initialize(e);const t=e.config.hederaKit,r=e.logger;let n=ModelCapability.MEDIUM;e.config.modelCapability&&Object.values(ModelCapability).includes(e.config.modelCapability)&&(n=e.config.modelCapability);const o={hederaKit:t,logger:r},i={hederaKit:t,logger:r,modelCapability:n};this.tools=[new HederaCreateTopicTool(o),new HederaDeleteTopicTool(o),new HederaUpdateTopicTool(o),new HederaSubmitMessageTool(o),new HederaGetTopicInfoTool(i),new HederaGetTopicFeesTool(i),new HederaGetTopicMessages(i)]}getTools(){return this.tools}}class HederaAccountPlugin extends BasePlugin{constructor(){super(...arguments),this.id="hedera-account",this.name="Hedera Account Plugin",this.description="Provides tools for interacting with Hedera accounts.",this.version="1.0.0",this.author="Hedera Hashgraph",this.tools=[]}async initialize(e){await super.initialize(e);const t=e.config.hederaKit,r=e.logger;let n=ModelCapability.MEDIUM;e.config.modelCapability&&Object.values(ModelCapability).includes(e.config.modelCapability)&&(n=e.config.modelCapability);const o={hederaKit:t,logger:r},i={hederaKit:t,logger:r,modelCapability:n};this.tools=[new HederaApproveFungibleTokenAllowanceTool(o),new HederaApproveHbarAllowanceTool(o),new HederaApproveTokenNftAllowanceTool(o),new HederaCreateAccountTool(o),new HederaDeleteAccountTool(o),new HederaUpdateAccountTool(o),new HederaTransferHbarTool(o),new HederaRevokeHbarAllowanceTool(o),new HederaRevokeFungibleTokenAllowanceTool(o),new SignAndExecuteScheduledTransactionTool(o),new HederaDeleteNftSpenderAllowanceTool(o),new HederaDeleteNftSerialAllowancesTool(o),new HederaGetAccountBalanceTool(i),new HederaGetAccountPublicKeyTool(i),new HederaGetAccountInfoTool(i),new HederaGetAccountTokensTool(i),new HederaGetAccountNftsTool(i),new HederaGetOutstandingAirdropsTool(i),new HederaGetPendingAirdropsTool(i)]}getTools(){return this.tools}}class HederaSCSPlugin extends BasePlugin{constructor(){super(...arguments),this.id="hedera-scs",this.name="Hedera Smart Contract Service Plugin",this.description="Provides tools for interacting with the Hedera Smart Contract Service (SCS).",this.version="1.0.0",this.author="Auto-Generated",this.tools=[]}async initialize(e){await super.initialize(e);const t=e.config.hederaKit,r=e.logger;let n=ModelCapability.MEDIUM;e.config.modelCapability&&Object.values(ModelCapability).includes(e.config.modelCapability)&&(n=e.config.modelCapability);const o={hederaKit:t,logger:r},i={hederaKit:t,logger:r,modelCapability:n};this.tools=[new HederaUpdateContractTool(o),new HederaDeleteContractTool(o),new HederaGetContractsTool(i),new HederaGetContractTool(i)]}getTools(){return this.tools}}class HederaNetworkPlugin extends BasePlugin{constructor(){super(...arguments),this.id="hedera-network",this.name="Hedera Network Plugin",this.description="Provides tools for interacting with the Hedera network and mirror node.",this.version="1.0.0",this.author="Auto-Generated",this.tools=[]}async initialize(e){await super.initialize(e);const t=e.config.hederaKit,r=e.logger;let n=ModelCapability.MEDIUM;e.config.modelCapability&&Object.values(ModelCapability).includes(e.config.modelCapability)&&(n=e.config.modelCapability);const o={hederaKit:t,logger:r,modelCapability:n};this.tools=[new HederaGetHbarPriceTool(o),new HederaGetBlocksTool(o),new HederaGetNetworkInfoTool(o),new HederaGetNetworkFeesTool(o)]}getTools(){return this.tools}}function getAllHederaCorePlugins(){return[new HederaHTSPlugin,new HederaHCSPlugin,new HederaAccountPlugin,new HederaSCSPlugin,new HederaNetworkPlugin]}function intersection(e,t){const r=new Set;for(const n of t)e.has(n)&&r.add(n);return r}function union(e,t){const r=new Set(e);for(const n of t)r.add(n);return r}function difference(e,t){const r=new Set(e);for(const n of t)r.delete(n);return r}function formatSet(e){return Array.from(e).map(e=>`"${e}"`).join(", ")}class SequentialChain extends BaseChain{static lc_name(){return"SequentialChain"}get inputKeys(){return this.inputVariables}get outputKeys(){return this.outputVariables}constructor(e){if(super(e),Object.defineProperty(this,"chains",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"outputVariables",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"returnAll",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chains=e.chains,this.inputVariables=e.inputVariables,this.outputVariables=e.outputVariables??[],this.outputVariables.length>0&&e.returnAll)throw new Error("Either specify variables to return using `outputVariables` or use `returnAll` param. Cannot apply both conditions at the same time.");this.returnAll=e.returnAll??!1,this._validateChains()}_validateChains(){if(0===this.chains.length)throw new Error("Sequential chain must have at least one chain.");const e=this.memory?.memoryKeys??[],t=new Set(this.inputKeys),r=new Set(e),n=intersection(t,r);if(n.size>0)throw new Error(`The following keys: ${formatSet(n)} are overlapping between memory and input keys of the chain variables. This can lead to unexpected behaviour. Please use input and memory keys that don't overlap.`);const o=union(t,r);for(const i of this.chains){let e=difference(new Set(i.inputKeys),o);if(i.memory&&(e=difference(e,new Set(i.memory.memoryKeys))),e.size>0)throw new Error(`Missing variables for chain "${i._chainType()}": ${formatSet(e)}. Only got the following variables: ${formatSet(o)}.`);const t=new Set(i.outputKeys),r=intersection(o,t);if(r.size>0)throw new Error(`The following output variables for chain "${i._chainType()}" are overlapping: ${formatSet(r)}. This can lead to unexpected behaviour.`);for(const n of t)o.add(n)}if(0===this.outputVariables.length)if(this.returnAll){const e=difference(o,t);this.outputVariables=Array.from(e)}else this.outputVariables=this.chains[this.chains.length-1].outputKeys;else{const e=difference(new Set(this.outputVariables),new Set(o));if(e.size>0)throw new Error(`The following output variables were expected to be in the final chain output but were not found: ${formatSet(e)}.`)}}async _call(e,t){let r={};const n=e;let o=0;for(const s of this.chains){o+=1,r=await s.call(n,t?.getChild(`step_${o}`));for(const e of Object.keys(r))n[e]=r[e]}const i={};for(const s of this.outputVariables)i[s]=n[s];return i}_chainType(){return"sequential_chain"}static async deserialize(e){const t=[],r=e.input_variables,n=e.output_variables,o=e.chains;for(const i of o){const e=await BaseChain.deserialize(i);t.push(e)}return new SequentialChain({chains:t,inputVariables:r,outputVariables:n})}serialize(){const e=[];for(const t of this.chains)e.push(t.serialize());return{_type:this._chainType(),input_variables:this.inputVariables,output_variables:this.outputVariables,chains:e}}}class SimpleSequentialChain extends BaseChain{static lc_name(){return"SimpleSequentialChain"}get inputKeys(){return[this.inputKey]}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"chains",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"input"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output"}),Object.defineProperty(this,"trimOutputs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.chains=e.chains,this.trimOutputs=e.trimOutputs??!1,this._validateChains()}_validateChains(){for(const e of this.chains){if(1!==e.inputKeys.filter(t=>!e.memory?.memoryKeys.includes(t)).length)throw new Error(`Chains used in SimpleSequentialChain should all have one input, got ${e.inputKeys.length} for ${e._chainType()}.`);if(1!==e.outputKeys.length)throw new Error(`Chains used in SimpleSequentialChain should all have one output, got ${e.outputKeys.length} for ${e._chainType()}.`)}}async _call(e,t){let r=e[this.inputKey],n=0;for(const o of this.chains)n+=1,r=(await o.call({[o.inputKeys[0]]:r,signal:e.signal},t?.getChild(`step_${n}`)))[o.outputKeys[0]],this.trimOutputs&&(r=r.trim()),await(t?.handleText(r));return{[this.outputKey]:r}}_chainType(){return"simple_sequential_chain"}static async deserialize(e){const t=[],r=e.chains;for(const n of r){const e=await BaseChain.deserialize(n);t.push(e)}return new SimpleSequentialChain({chains:t})}serialize(){const e=[];for(const t of this.chains)e.push(t.serialize());return{_type:this._chainType(),chains:e}}}const sequential_chain=Object.freeze(Object.defineProperty({__proto__:null,SequentialChain:SequentialChain,SimpleSequentialChain:SimpleSequentialChain},Symbol.toStringTag,{value:"Module"})),API_URL_RAW_PROMPT_TEMPLATE="You are given the below API Documentation:\n{api_docs}\nUsing this documentation, generate the full API url to call for answering the user question.\nYou should build the API url in order to get a response that is as short as possible, while still getting the necessary information to answer the question. Pay attention to deliberately exclude any unnecessary pieces of data in the API call.\n\nQuestion:{question}\nAPI url:",API_URL_PROMPT_TEMPLATE=new PromptTemplate({inputVariables:["api_docs","question"],template:API_URL_RAW_PROMPT_TEMPLATE}),API_RESPONSE_RAW_PROMPT_TEMPLATE=`${API_URL_RAW_PROMPT_TEMPLATE} {api_url}\n\nHere is the response from the API:\n\n{api_response}\n\nSummarize this response to answer the original question.\n\nSummary:`,API_RESPONSE_PROMPT_TEMPLATE=new PromptTemplate({inputVariables:["api_docs","question","api_url","api_response"],template:API_RESPONSE_RAW_PROMPT_TEMPLATE});class APIChain extends BaseChain{get inputKeys(){return[this.inputKey]}get outputKeys(){return[this.outputKey]}constructor(e){super(e),Object.defineProperty(this,"apiAnswerChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiRequestChain",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"apiDocs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"inputKey",{enumerable:!0,configurable:!0,writable:!0,value:"question"}),Object.defineProperty(this,"outputKey",{enumerable:!0,configurable:!0,writable:!0,value:"output"}),this.apiRequestChain=e.apiRequestChain,this.apiAnswerChain=e.apiAnswerChain,this.apiDocs=e.apiDocs,this.inputKey=e.inputKey??this.inputKey,this.outputKey=e.outputKey??this.outputKey,this.headers=e.headers??this.headers}async _call(e,t){const r=e[this.inputKey],n=await this.apiRequestChain.predict({question:r,api_docs:this.apiDocs},t?.getChild("request")),o=await fetch(n,{headers:this.headers}),i=await o.text(),s=await this.apiAnswerChain.predict({question:r,api_docs:this.apiDocs,api_url:n,api_response:i},t?.getChild("response"));return{[this.outputKey]:s}}_chainType(){return"api_chain"}static async deserialize(e){const{api_request_chain:t,api_answer_chain:r,api_docs:n}=e;if(!t)throw new Error("LLMChain must have api_request_chain");if(!r)throw new Error("LLMChain must have api_answer_chain");if(!n)throw new Error("LLMChain must have api_docs");return new APIChain({apiAnswerChain:await LLMChain.deserialize(r),apiRequestChain:await LLMChain.deserialize(t),apiDocs:n})}serialize(){return{_type:this._chainType(),api_answer_chain:this.apiAnswerChain.serialize(),api_request_chain:this.apiRequestChain.serialize(),api_docs:this.apiDocs}}static fromLLMAndAPIDocs(e,t,r={}){const{apiUrlPrompt:n=API_URL_PROMPT_TEMPLATE,apiResponsePrompt:o=API_RESPONSE_PROMPT_TEMPLATE}=r,i=new LLMChain({prompt:n,llm:e});return new this({apiAnswerChain:new LLMChain({prompt:o,llm:e}),apiRequestChain:i,apiDocs:t,...r})}}const api_chain=Object.freeze(Object.defineProperty({__proto__:null,APIChain:APIChain},Symbol.toStringTag,{value:"Module"}));exports.AbstractSigner=AbstractSigner,exports.AccountBuilder=AccountBuilder,exports.AccountId=f$2,exports.AgentKitActionName=AgentKitActionName,exports.BaseHederaQueryTool=BaseHederaQueryTool,exports.BaseHederaTransactionTool=BaseHederaTransactionTool,exports.BasePlugin=BasePlugin,exports.BaseServiceBuilder=BaseServiceBuilder,exports.ContractFunctionParameters=_$1,exports.ContractId=v,exports.CustomFee=e$i,exports.CustomFixedFee=l$a,exports.EvmAddress=i$d,exports.FEE_COLLECTOR_DESCRIPTION=FEE_COLLECTOR_DESCRIPTION$1,exports.FileId=u$c,exports.Hbar=e$o,exports.HcsBuilder=HcsBuilder,exports.HederaAccountPlugin=HederaAccountPlugin,exports.HederaAgentKit=HederaAgentKit,exports.HederaAirdropTokenTool=HederaAirdropTokenTool,exports.HederaApproveFungibleTokenAllowanceTool=HederaApproveFungibleTokenAllowanceTool,exports.HederaApproveHbarAllowanceTool=HederaApproveHbarAllowanceTool,exports.HederaApproveTokenNftAllowanceTool=HederaApproveTokenNftAllowanceTool,exports.HederaAssociateTokensTool=HederaAssociateTokensTool,exports.HederaBurnFungibleTokenTool=HederaBurnFungibleTokenTool,exports.HederaBurnNftTool=HederaBurnNftTool,exports.HederaClaimAirdropTool=HederaClaimAirdropTool,exports.HederaConversationalAgent=HederaConversationalAgent,exports.HederaCreateAccountTool=HederaCreateAccountTool,exports.HederaCreateFungibleTokenTool=HederaCreateFungibleTokenTool,exports.HederaCreateNftTool=HederaCreateNftTool,exports.HederaCreateTopicTool=HederaCreateTopicTool,exports.HederaDeleteAccountTool=HederaDeleteAccountTool,exports.HederaDeleteContractTool=HederaDeleteContractTool,exports.HederaDeleteNftSerialAllowancesTool=HederaDeleteNftSerialAllowancesTool,exports.HederaDeleteNftSpenderAllowanceTool=HederaDeleteNftSpenderAllowanceTool,exports.HederaDeleteTokenTool=HederaDeleteTokenTool,exports.HederaDeleteTopicTool=HederaDeleteTopicTool,exports.HederaDissociateTokensTool=HederaDissociateTokensTool,exports.HederaFreezeTokenAccountTool=HederaFreezeTokenAccountTool,exports.HederaGetAccountBalanceTool=HederaGetAccountBalanceTool,exports.HederaGetAccountInfoTool=HederaGetAccountInfoTool,exports.HederaGetAccountNftsTool=HederaGetAccountNftsTool,exports.HederaGetAccountPublicKeyTool=HederaGetAccountPublicKeyTool,exports.HederaGetAccountTokensTool=HederaGetAccountTokensTool,exports.HederaGetBlocksTool=HederaGetBlocksTool,exports.HederaGetContractTool=HederaGetContractTool,exports.HederaGetContractsTool=HederaGetContractsTool,exports.HederaGetHbarPriceTool=HederaGetHbarPriceTool,exports.HederaGetNetworkFeesTool=HederaGetNetworkFeesTool,exports.HederaGetNetworkInfoTool=HederaGetNetworkInfoTool,exports.HederaGetOutstandingAirdropsTool=HederaGetOutstandingAirdropsTool,exports.HederaGetPendingAirdropsTool=HederaGetPendingAirdropsTool,exports.HederaGetTokenInfoTool=HederaGetTokenInfoTool,exports.HederaGetTopicFeesTool=HederaGetTopicFeesTool,exports.HederaGetTopicInfoTool=HederaGetTopicInfoTool,exports.HederaGetTopicMessages=HederaGetTopicMessages,exports.HederaGetTransactionTool=HederaGetTransactionTool,exports.HederaGrantKycTokenTool=HederaGrantKycTokenTool,exports.HederaHCSPlugin=HederaHCSPlugin,exports.HederaHTSPlugin=HederaHTSPlugin,exports.HederaMintFungibleTokenTool=HederaMintFungibleTokenTool,exports.HederaMintNftTool=HederaMintNftTool,exports.HederaPauseTokenTool=HederaPauseTokenTool,exports.HederaRejectTokensTool=HederaRejectTokensTool,exports.HederaRevokeFungibleTokenAllowanceTool=HederaRevokeFungibleTokenAllowanceTool,exports.HederaRevokeHbarAllowanceTool=HederaRevokeHbarAllowanceTool,exports.HederaRevokeKycTokenTool=HederaRevokeKycTokenTool,exports.HederaSCSPlugin=HederaSCSPlugin,exports.HederaSubmitMessageTool=HederaSubmitMessageTool,exports.HederaTokenFeeScheduleUpdateTool=HederaTokenFeeScheduleUpdateTool,exports.HederaTransactionMetaOptionsSchema=HederaTransactionMetaOptionsSchema,exports.HederaTransferHbarTool=HederaTransferHbarTool,exports.HederaTransferNftTool=HederaTransferNftTool,exports.HederaTransferTokensTool=HederaTransferTokensTool,exports.HederaUnfreezeTokenAccountTool=HederaUnfreezeTokenAccountTool,exports.HederaUnpauseTokenTool=HederaUnpauseTokenTool,exports.HederaUpdateAccountTool=HederaUpdateAccountTool,exports.HederaUpdateContractTool=HederaUpdateContractTool,exports.HederaUpdateTokenTool=HederaUpdateTokenTool,exports.HederaUpdateTopicTool=HederaUpdateTopicTool,exports.HederaValidateNftOwnershipTool=HederaValidateNftOwnershipTool,exports.HederaWipeTokenAccountTool=HederaWipeTokenAccountTool,exports.HtsBuilder=HtsBuilder,exports.Key=t$r,exports.KeyList=s$i,exports.Logger=Logger,exports.Long=Long,exports.ModelCapabilityDetector=ModelCapabilityDetector,exports.ModelPricingManager=ModelPricingManager,exports.NftId=e$j,exports.PendingAirdropId=t$h,exports.PluginRegistry=PluginRegistry,exports.PrivateKey=g,exports.PublicKey=i$f,exports.QueryBuilder=QueryBuilder,exports.SERIALIZED_KEY_DESCRIPTION=SERIALIZED_KEY_DESCRIPTION,exports.ScheduleId=o$k,exports.ScsBuilder=ScsBuilder,exports.ServerSigner=ServerSigner,exports.SignAndExecuteScheduledTransactionTool=SignAndExecuteScheduledTransactionTool,exports.TokenId=u$b,exports.TokenSupplyType=e$1,exports.TokenType=e$2,exports.TokenUsageCallbackHandler=TokenUsageCallbackHandler,exports.TopicId=m$1,exports.TransactionId=i$c,exports.calculateTokenCost=calculateTokenCost,exports.calculateTokenCostSync=calculateTokenCostSync,exports.convertStringToTimestamp=convertStringToTimestamp,exports.createBaseMirrorNodeApiUrl=createBaseMirrorNodeApiUrl,exports.detectKeyTypeFromString=detectKeyTypeFromString,exports.estimateTokens=estimateTokens,exports.formatCost=formatCost,exports.fromBaseToDisplayUnit=fromBaseToDisplayUnit,exports.fromDisplayToBaseUnit=fromDisplayToBaseUnit,exports.getAllHederaCorePlugins=getAllHederaCorePlugins,exports.parseCustomFeesJson=parseCustomFeesJson,exports.parseKey=parseKey,Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=hedera-agent-kit.umd.js.map
