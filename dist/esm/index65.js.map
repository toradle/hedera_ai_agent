{"version":3,"file":"index65.js","sources":["../../src/langchain/tools/network/get-hbar-price-tool.ts"],"sourcesContent":["import { z } from 'zod';\nimport {\n  BaseHederaQueryTool,\n  BaseHederaQueryToolParams,\n} from '../common/base-hedera-query-tool';\n\nconst GetHbarPriceZodSchema = z.object({\n  date: z\n    .string()\n    .optional()\n    .describe(\n      'Date to get HBAR price for in ISO format (e.g., \"2023-12-01T00:00:00Z\"). Defaults to current date.'\n    ),\n});\n\n/**\n * Tool for retrieving HBAR price from the Hedera network.\n * This is a read-only operation that queries the mirror node.\n */\nexport class HederaGetHbarPriceTool extends BaseHederaQueryTool<\n  typeof GetHbarPriceZodSchema\n> {\n  name = 'hedera-get-hbar-price';\n  description =\n    'Retrieves the HBAR price in USD for a specific date. Defaults to current date if no date provided.';\n  specificInputSchema = GetHbarPriceZodSchema;\n  namespace = 'network';\n\n  constructor(params: BaseHederaQueryToolParams) {\n    super(params);\n  }\n\n  protected async executeQuery(\n    args: z.infer<typeof GetHbarPriceZodSchema>\n  ): Promise<unknown> {\n    const date = args.date ? new Date(args.date) : new Date();\n\n    this.logger.info(`Getting HBAR price for date: ${date.toISOString()}`);\n\n    const price = await this.hederaKit.query().getHbarPrice(date);\n\n    if (price === null) {\n      return {\n        success: false,\n        error: `Could not retrieve HBAR price for date ${date.toISOString()}`,\n      };\n    }\n\n    return {\n      success: true,\n      date: date.toISOString(),\n      priceUsd: price,\n      currency: 'USD',\n    };\n  }\n}\n"],"names":[],"mappings":";;AAMA,MAAM,wBAAwB,EAAE,OAAO;AAAA,EACrC,MAAM,EACH,SACA,WACA;AAAA,IACC;AAAA,EAAA;AAEN,CAAC;AAMM,MAAM,+BAA+B,oBAE1C;AAAA,EAOA,YAAY,QAAmC;AAC7C,UAAM,MAAM;AAPd,SAAA,OAAO;AACP,SAAA,cACE;AACF,SAAA,sBAAsB;AACtB,SAAA,YAAY;AAAA,EAAA;AAAA,EAMZ,MAAgB,aACd,MACkB;AAClB,UAAM,OAAO,KAAK,OAAO,IAAI,KAAK,KAAK,IAAI,IAAI,oBAAI,KAAA;AAEnD,SAAK,OAAO,KAAK,gCAAgC,KAAK,YAAA,CAAa,EAAE;AAErE,UAAM,QAAQ,MAAM,KAAK,UAAU,MAAA,EAAQ,aAAa,IAAI;AAE5D,QAAI,UAAU,MAAM;AAClB,aAAO;AAAA,QACL,SAAS;AAAA,QACT,OAAO,0CAA0C,KAAK,YAAA,CAAa;AAAA,MAAA;AAAA,IACrE;AAGF,WAAO;AAAA,MACL,SAAS;AAAA,MACT,MAAM,KAAK,YAAA;AAAA,MACX,UAAU;AAAA,MACV,UAAU;AAAA,IAAA;AAAA,EACZ;AAEJ;"}