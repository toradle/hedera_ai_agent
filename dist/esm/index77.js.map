{"version":3,"file":"index77.js","sources":["../../src/utils/logger.ts"],"sourcesContent":["import pino from 'pino';\n\nexport type LogLevel = 'debug' | 'info' | 'warn' | 'error' | 'silent';\n\nexport interface LoggerOptions {\n  level?: LogLevel;\n  module?: string;\n  prettyPrint?: boolean;\n  silent?: boolean;\n}\nexport class Logger {\n  private static instances: Map<string, Logger> = new Map();\n  private logger: pino.Logger;\n  private moduleContext: string;\n\n  constructor(options: LoggerOptions = {}) {\n    const globalDisable = process.env.DISABLE_LOGS === 'true';\n\n    const shouldSilence = options.silent || globalDisable;\n    const level = shouldSilence ? 'silent' : options.level || 'info';\n    this.moduleContext = options.module || 'app';\n\n    const shouldEnablePrettyPrint =\n      !shouldSilence && options.prettyPrint !== false;\n    const pinoOptions = {\n      level,\n      enabled: !shouldSilence,\n      transport: shouldEnablePrettyPrint\n        ? {\n            target: 'pino-pretty',\n            options: {\n              colorize: true,\n              translateTime: 'SYS:standard',\n              ignore: 'pid,hostname',\n            },\n          }\n        : undefined,\n    };\n\n    // @ts-ignore\n    this.logger = pino(pinoOptions);\n  }\n\n  static getInstance(options: LoggerOptions = {}): Logger {\n    const moduleKey = options.module || 'default';\n\n    const globalDisable = process.env.DISABLE_LOGS === 'true';\n\n    if (globalDisable && Logger.instances.has(moduleKey)) {\n      const existingLogger = Logger.instances.get(moduleKey)!;\n      if (existingLogger.getLevel() !== 'silent') {\n        Logger.instances.delete(moduleKey);\n      }\n    }\n\n    if (!Logger.instances.has(moduleKey)) {\n      Logger.instances.set(moduleKey, new Logger(options));\n    }\n\n    return Logger.instances.get(moduleKey)!;\n  }\n\n  setLogLevel(level: LogLevel): void {\n    this.logger.level = level;\n  }\n\n  getLevel(): LogLevel {\n    return this.logger.level as LogLevel;\n  }\n\n  setSilent(silent: boolean): void {\n    if (silent) {\n      this.logger.level = 'silent';\n    }\n  }\n\n  setModule(module: string): void {\n    this.moduleContext = module;\n  }\n\n  debug(...args: any[]): void {\n    this.logger.debug({ module: this.moduleContext }, ...args);\n  }\n\n  info(...args: any[]): void {\n    this.logger.info({ module: this.moduleContext }, ...args);\n  }\n\n  warn(...args: any[]): void {\n    this.logger.warn({ module: this.moduleContext }, ...args);\n  }\n\n  error(...args: any[]): void {\n    this.logger.error({ module: this.moduleContext }, ...args);\n  }\n\n  trace(...args: any[]): void {\n    this.logger.trace({ module: this.moduleContext }, ...args);\n  }\n}\n"],"names":[],"mappings":";AAUO,MAAM,UAAN,MAAM,QAAO;AAAA,EAKlB,YAAY,UAAyB,IAAI;AACvC,UAAM,gBAAgB,QAAQ,IAAI,iBAAiB;AAEnD,UAAM,gBAAgB,QAAQ,UAAU;AACxC,UAAM,QAAQ,gBAAgB,WAAW,QAAQ,SAAS;AAC1D,SAAK,gBAAgB,QAAQ,UAAU;AAEvC,UAAM,0BACJ,CAAC,iBAAiB,QAAQ,gBAAgB;AAC5C,UAAM,cAAc;AAAA,MAClB;AAAA,MACA,SAAS,CAAC;AAAA,MACV,WAAW,0BACP;AAAA,QACE,QAAQ;AAAA,QACR,SAAS;AAAA,UACP,UAAU;AAAA,UACV,eAAe;AAAA,UACf,QAAQ;AAAA,QAAA;AAAA,MACV,IAEF;AAAA,IAAA;AAIN,SAAK,SAAS,KAAK,WAAW;AAAA,EAAA;AAAA,EAGhC,OAAO,YAAY,UAAyB,IAAY;AACtD,UAAM,YAAY,QAAQ,UAAU;AAEpC,UAAM,gBAAgB,QAAQ,IAAI,iBAAiB;AAEnD,QAAI,iBAAiB,QAAO,UAAU,IAAI,SAAS,GAAG;AACpD,YAAM,iBAAiB,QAAO,UAAU,IAAI,SAAS;AACrD,UAAI,eAAe,SAAA,MAAe,UAAU;AAC1C,gBAAO,UAAU,OAAO,SAAS;AAAA,MAAA;AAAA,IACnC;AAGF,QAAI,CAAC,QAAO,UAAU,IAAI,SAAS,GAAG;AACpC,cAAO,UAAU,IAAI,WAAW,IAAI,QAAO,OAAO,CAAC;AAAA,IAAA;AAGrD,WAAO,QAAO,UAAU,IAAI,SAAS;AAAA,EAAA;AAAA,EAGvC,YAAY,OAAuB;AACjC,SAAK,OAAO,QAAQ;AAAA,EAAA;AAAA,EAGtB,WAAqB;AACnB,WAAO,KAAK,OAAO;AAAA,EAAA;AAAA,EAGrB,UAAU,QAAuB;AAC/B,QAAI,QAAQ;AACV,WAAK,OAAO,QAAQ;AAAA,IAAA;AAAA,EACtB;AAAA,EAGF,UAAU,QAAsB;AAC9B,SAAK,gBAAgB;AAAA,EAAA;AAAA,EAGvB,SAAS,MAAmB;AAC1B,SAAK,OAAO,MAAM,EAAE,QAAQ,KAAK,cAAA,GAAiB,GAAG,IAAI;AAAA,EAAA;AAAA,EAG3D,QAAQ,MAAmB;AACzB,SAAK,OAAO,KAAK,EAAE,QAAQ,KAAK,cAAA,GAAiB,GAAG,IAAI;AAAA,EAAA;AAAA,EAG1D,QAAQ,MAAmB;AACzB,SAAK,OAAO,KAAK,EAAE,QAAQ,KAAK,cAAA,GAAiB,GAAG,IAAI;AAAA,EAAA;AAAA,EAG1D,SAAS,MAAmB;AAC1B,SAAK,OAAO,MAAM,EAAE,QAAQ,KAAK,cAAA,GAAiB,GAAG,IAAI;AAAA,EAAA;AAAA,EAG3D,SAAS,MAAmB;AAC1B,SAAK,OAAO,MAAM,EAAE,QAAQ,KAAK,cAAA,GAAiB,GAAG,IAAI;AAAA,EAAA;AAE7D;AAxFE,QAAe,gCAAqC,IAAA;AAD/C,IAAM,SAAN;"}